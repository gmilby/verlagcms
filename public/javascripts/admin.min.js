(function(h,f){function j(a){return c.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:false}function m(a){if(!db[a]){var d=X.body,b=c("<"+a+">").appendTo(d),e=b.css("display");b.remove();if(e==="none"||e===""){Xa||(Xa=X.createElement("iframe"),Xa.frameBorder=Xa.width=Xa.height=0);d.appendChild(Xa);if(!Ha||!Xa.createElement){Ha=(Xa.contentWindow||Xa.contentDocument).document;Ha.write((X.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");Ha.close()}b=Ha.createElement(a);Ha.body.appendChild(b);
e=c.css(b,"display");d.removeChild(Xa)}db[a]=e}return db[a]}function s(a,d){var b={};c.each(Pa.concat.apply([],Pa.slice(0,d)),function(){b[this]=a});return b}function t(){qb=f}function z(){setTimeout(t,0);return qb=c.now()}function J(){try{return new h.XMLHttpRequest}catch(a){}}function C(a,d,b,e){if(c.isArray(d))c.each(d,function(i,k){b||eb.test(a)?e(a,k):C(a+"["+(typeof k=="object"||c.isArray(k)?i:"")+"]",k,b,e)});else if(!b&&d!=null&&typeof d=="object")for(var g in d)C(a+"["+g+"]",d[g],b,e);else e(a,
d)}function y(a,d,b,e,g,i){g=g||d.dataTypes[0];i=i||{};i[g]=true;g=a[g];for(var k=0,n=g?g.length:0,p=a===cb,r;k<n&&(p||!r);k++){r=g[k](d,b,e);typeof r=="string"&&(!p||i[r]?(r=f):(d.dataTypes.unshift(r),r=y(a,d,b,e,r,i)))}(p||!r)&&!i["*"]&&(r=y(a,d,b,e,"*",i));return r}function Q(a){return function(d,b){typeof d!="string"&&(b=d,d="*");if(c.isFunction(b))for(var e=d.toLowerCase().split(cc),g=0,i=e.length,k,n;g<i;g++){k=e[g];(n=/^\+/.test(k))&&(k=k.substr(1)||"*");k=a[k]=a[k]||[];k[n?"unshift":"push"](b)}}}
function W(a,d,b){var e=d==="width"?a.offsetWidth:a.offsetHeight,g=d==="width"?ma:Qb;if(e>0){b!=="border"&&c.each(g,function(){b||(e-=parseFloat(c.css(a,"padding"+this))||0);b==="margin"?(e+=parseFloat(c.css(a,b+this))||0):(e-=parseFloat(c.css(a,"border"+this+"Width"))||0)});return e+"px"}e=fb(a,d,d);if(e<0||e==null)e=a.style[d]||0;e=parseFloat(e)||0;b&&c.each(g,function(){e+=parseFloat(c.css(a,"padding"+this))||0;b!=="padding"&&(e+=parseFloat(c.css(a,"border"+this+"Width"))||0);b==="margin"&&(e+=
parseFloat(c.css(a,b+this))||0)});return e+"px"}function la(a,d){d.src?c.ajax({url:d.src,async:false,dataType:"script"}):c.globalEval((d.text||d.textContent||d.innerHTML||"").replace(dc,"/*$0*/"));d.parentNode&&d.parentNode.removeChild(d)}function pa(a){c.nodeName(a,"input")?oa(a):"getElementsByTagName"in a&&c.grep(a.getElementsByTagName("input"),oa)}function oa(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function l(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):
"querySelectorAll"in a?a.querySelectorAll("*"):[]}function q(a,d){var b;if(d.nodeType===1){d.clearAttributes&&d.clearAttributes();d.mergeAttributes&&d.mergeAttributes(a);b=d.nodeName.toLowerCase();if(b==="object")d.outerHTML=a.outerHTML;else if(b!=="input"||a.type!=="checkbox"&&a.type!=="radio")if(b==="option")d.selected=a.defaultSelected;else{if(b==="input"||b==="textarea")d.defaultValue=a.defaultValue}else{a.checked&&(d.defaultChecked=d.checked=a.checked);d.value!==a.value&&(d.value=a.value)}d.removeAttribute(c.expando)}}
function x(a,d){if(d.nodeType===1&&c.hasData(a)){var b=c.expando,e=c.data(a),g=c.data(d,e);if(e=e[b]){var i=e.events;g=g[b]=c.extend({},e);if(i){delete g.handle;g.events={};for(var k in i){b=0;for(e=i[k].length;b<e;b++)c.event.add(d,k+(i[k][b].namespace?".":"")+i[k][b].namespace,i[k][b],i[k][b].data)}}}}}function E(a,d,b){d=d||0;if(c.isFunction(d))return c.grep(a,function(g,i){return!!d.call(g,i,g)===b});if(d.nodeType)return c.grep(a,function(g){return g===d===b});if(typeof d=="string"){var e=c.grep(a,
function(g){return g.nodeType===1});if(Ka.test(d))return c.filter(d,e,!b);d=c.filter(d,e)}return c.grep(a,function(g){return c.inArray(g,d)>=0===b})}function ca(a,d){return(a&&a!=="*"?a+".":"")+d.replace(La,"`").replace(gb,"&")}function na(a){var d,b,e,g,i,k,n,p,r,w,B,P=[];g=[];i=c._data(this,"events");if(!(a.liveFired===this||!i||!i.live||a.target.disabled||a.button&&a.type==="click")){a.namespace&&(B=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)"));a.liveFired=this;
var ba=i.live.slice(0);for(n=0;n<ba.length;n++){i=ba[n];i.origType.replace(sa,"")===a.type?g.push(i.selector):ba.splice(n--,1)}g=c(a.target).closest(g,a.currentTarget);p=0;for(r=g.length;p<r;p++){w=g[p];for(n=0;n<ba.length;n++){i=ba[n];if(w.selector===i.selector&&(!B||B.test(i.namespace))&&!w.elem.disabled){k=w.elem;e=null;if(i.preType==="mouseenter"||i.preType==="mouseleave"){a.type=i.preType;(e=c(a.relatedTarget).closest(i.selector)[0])&&c.contains(k,e)&&(e=k)}(!e||e!==k)&&P.push({elem:k,handleObj:i,
level:w.level})}}}p=0;for(r=P.length;p<r;p++){g=P[p];if(b&&g.level>b)break;a.currentTarget=g.elem;a.data=g.handleObj.data;a.handleObj=g.handleObj;B=g.handleObj.origHandler.apply(g.elem,arguments);if(B===false||a.isPropagationStopped()){b=g.level;B===false&&(d=false);if(a.isImmediatePropagationStopped())break}}return d}}function S(a,d,b){var e=c.extend({},b[0]);e.type=a;e.originalEvent={};e.liveFired=f;c.event.handle.call(d,e);e.isDefaultPrevented()&&b[0].preventDefault()}function fa(){return true}
function ga(){return false}function xa(a,d,b){var e=d+"defer",g=d+"queue",i=d+"mark",k=c.data(a,e,f,true);k&&(b==="queue"||!c.data(a,g,f,true))&&(b==="mark"||!c.data(a,i,f,true))&&setTimeout(function(){!c.data(a,g,f,true)&&!c.data(a,i,f,true)&&(c.removeData(a,e,true),k.resolve())},0)}function Oa(a){for(var d in a)if(d!=="toJSON")return false;return true}function Ra(a,d,b){if(b===f&&a.nodeType===1){b="data-"+d.replace(R,"$1-$2").toLowerCase();b=a.getAttribute(b);if(typeof b=="string"){try{b=b==="true"?
true:b==="false"?false:b==="null"?null:c.isNaN(b)?M.test(b)?c.parseJSON(b):b:parseFloat(b)}catch(e){}c.data(a,d,b)}else b=f}return b}var X=h.document,O=h.navigator,U=h.location,c=function(){function a(){if(!d.isReady){try{X.documentElement.doScroll("left")}catch(v){setTimeout(a,1);return}d.ready()}}var d=function(v,K){return new d.fn.init(v,K,g)},b=h.jQuery,e=h.$,g,i=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,k=/\S/,n=/^\s+/,p=/\s+$/,r=/\d/,w=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,B=/^[\],:{}\s]*$/,P=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
ba=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ka=/(?:^|:|,)(?:\s*\[)+/g,Ia=/(webkit)[ \/]([\w.]+)/,za=/(opera)(?:.*version)?[ \/]([\w.]+)/,Ba=/(msie) ([\w.]+)/,Ca=/(mozilla)(?:.*? rv:([\w.]+))?/,o=/-([a-z])/ig,u=function(v,K){return K.toUpperCase()},F=O.userAgent,H,D,I=Object.prototype.toString,T=Object.prototype.hasOwnProperty,Z=Array.prototype.push,ra=Array.prototype.slice,Ma=String.prototype.trim,Ja=Array.prototype.indexOf,Sa={};d.fn=d.prototype={constructor:d,init:function(v,
K,da){var Y,qa;if(!v)return this;if(v.nodeType){this.context=this[0]=v;this.length=1;return this}if(v==="body"&&!K&&X.body){this.context=X;this[0]=X.body;this.selector=v;this.length=1;return this}if(typeof v=="string"){v.charAt(0)!=="<"||v.charAt(v.length-1)!==">"||v.length<3?(Y=i.exec(v)):(Y=[null,v,null]);if(Y&&(Y[1]||!K)){if(Y[1]){qa=(K=K instanceof d?K[0]:K)?K.ownerDocument||K:X;(da=w.exec(v))?d.isPlainObject(K)?(v=[X.createElement(da[1])],d.fn.attr.call(v,K,true)):(v=[qa.createElement(da[1])]):
(da=d.buildFragment([Y[1]],[qa]),v=(da.cacheable?d.clone(da.fragment):da.fragment).childNodes);return d.merge(this,v)}if((K=X.getElementById(Y[2]))&&K.parentNode){if(K.id!==Y[2])return da.find(v);this.length=1;this[0]=K}this.context=X;this.selector=v;return this}return!K||K.jquery?(K||da).find(v):this.constructor(K).find(v)}if(d.isFunction(v))return da.ready(v);v.selector!==f&&(this.selector=v.selector,this.context=v.context);return d.makeArray(v,this)},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},
toArray:function(){return ra.call(this,0)},get:function(v){return v==null?this.toArray():v<0?this[this.length+v]:this[v]},pushStack:function(v,K,da){var Y=this.constructor();d.isArray(v)?Z.apply(Y,v):d.merge(Y,v);Y.prevObject=this;Y.context=this.context;K==="find"?(Y.selector=this.selector+(this.selector?" ":"")+da):K&&(Y.selector=this.selector+"."+K+"("+da+")");return Y},each:function(v,K){return d.each(this,v,K)},ready:function(v){d.bindReady();H.done(v);return this},eq:function(v){return v===-1?
this.slice(v):this.slice(v,+v+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(ra.apply(this,arguments),"slice",ra.call(arguments).join(","))},map:function(v){return this.pushStack(d.map(this,function(K,da){return v.call(K,da,K)}))},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:[].sort,splice:[].splice};d.fn.init.prototype=d.fn;d.extend=d.fn.extend=function(){var v,K,da,Y,qa,Aa,Da=arguments[0]||{},Fa=1,
vb=arguments.length,wb=false;typeof Da=="boolean"&&(wb=Da,Da=arguments[1]||{},Fa=2);typeof Da!="object"&&!d.isFunction(Da)&&(Da={});for(vb===Fa&&(Da=this,--Fa);Fa<vb;Fa++)if((v=arguments[Fa])!=null)for(K in v){da=Da[K];Y=v[K];if(Da!==Y)wb&&Y&&(d.isPlainObject(Y)||(qa=d.isArray(Y)))?(qa?(qa=false,Aa=da&&d.isArray(da)?da:[]):(Aa=da&&d.isPlainObject(da)?da:{}),Da[K]=d.extend(wb,Aa,Y)):Y!==f&&(Da[K]=Y)}return Da};d.extend({noConflict:function(v){h.$===d&&(h.$=e);v&&h.jQuery===d&&(h.jQuery=b);return d},
isReady:false,readyWait:1,holdReady:function(v){v?d.readyWait++:d.ready(true)},ready:function(v){if(v===true&&!--d.readyWait||v!==true&&!d.isReady){if(!X.body)return setTimeout(d.ready,1);d.isReady=true;if(!(v!==true&&--d.readyWait>0)){H.resolveWith(X,[d]);d.fn.trigger&&d(X).trigger("ready").unbind("ready")}}},bindReady:function(){if(!H){H=d._Deferred();if(X.readyState==="complete")return setTimeout(d.ready,1);if(X.addEventListener){X.addEventListener("DOMContentLoaded",D,false);h.addEventListener("load",
d.ready,false)}else if(X.attachEvent){X.attachEvent("onreadystatechange",D);h.attachEvent("onload",d.ready);var v=false;try{v=h.frameElement==null}catch(K){}X.documentElement.doScroll&&v&&a()}}},isFunction:function(v){return d.type(v)==="function"},isArray:Array.isArray||function(v){return d.type(v)==="array"},isWindow:function(v){return v&&typeof v=="object"&&"setInterval"in v},isNaN:function(v){return v==null||!r.test(v)||isNaN(v)},type:function(v){return v==null?String(v):Sa[I.call(v)]||"object"},
isPlainObject:function(v){if(!v||d.type(v)!=="object"||v.nodeType||d.isWindow(v))return false;if(v.constructor&&!T.call(v,"constructor")&&!T.call(v.constructor.prototype,"isPrototypeOf"))return false;var K;for(K in v);return K===f||T.call(v,K)},isEmptyObject:function(v){for(var K in v)return false;return true},error:function(v){throw v;},parseJSON:function(v){if(typeof v!="string"||!v)return null;v=d.trim(v);if(h.JSON&&h.JSON.parse)return h.JSON.parse(v);if(B.test(v.replace(P,"@").replace(ba,"]").replace(ka,
"")))return(new Function("return "+v))();d.error("Invalid JSON: "+v)},parseXML:function(v,K,da){h.DOMParser?(da=new DOMParser,K=da.parseFromString(v,"text/xml")):(K=new ActiveXObject("Microsoft.XMLDOM"),K.async="false",K.loadXML(v));da=K.documentElement;(!da||!da.nodeName||da.nodeName==="parsererror")&&d.error("Invalid XML: "+v);return K},noop:function(){},globalEval:function(v){v&&k.test(v)&&(h.execScript||function(K){h.eval.call(h,K)})(v)},camelCase:function(v){return v.replace(o,u)},nodeName:function(v,
K){return v.nodeName&&v.nodeName.toUpperCase()===K.toUpperCase()},each:function(v,K,da){var Y,qa=0,Aa=v.length,Da=Aa===f||d.isFunction(v);if(da)if(Da)for(Y in v){if(K.apply(v[Y],da)===false)break}else for(;qa<Aa;){if(K.apply(v[qa++],da)===false)break}else if(Da)for(Y in v){if(K.call(v[Y],Y,v[Y])===false)break}else for(;qa<Aa;)if(K.call(v[qa],qa,v[qa++])===false)break;return v},trim:Ma?function(v){return v==null?"":Ma.call(v)}:function(v){return v==null?"":(v+"").replace(n,"").replace(p,"")},makeArray:function(v,
K){var da=K||[];if(v!=null){var Y=d.type(v);v.length==null||Y==="string"||Y==="function"||Y==="regexp"||d.isWindow(v)?Z.call(da,v):d.merge(da,v)}return da},inArray:function(v,K){if(Ja)return Ja.call(K,v);for(var da=0,Y=K.length;da<Y;da++)if(K[da]===v)return da;return-1},merge:function(v,K){var da=v.length,Y=0;if(typeof K.length=="number")for(var qa=K.length;Y<qa;Y++)v[da++]=K[Y];else for(;K[Y]!==f;)v[da++]=K[Y++];v.length=da;return v},grep:function(v,K,da){var Y=[],qa;da=!!da;for(var Aa=0,Da=v.length;Aa<
Da;Aa++){qa=!!K(v[Aa],Aa);da!==qa&&Y.push(v[Aa])}return Y},map:function(v,K,da){var Y,qa,Aa=[],Da=0,Fa=v.length;if(v instanceof d||Fa!==f&&typeof Fa=="number"&&(Fa>0&&v[0]&&v[Fa-1]||Fa===0||d.isArray(v)))for(;Da<Fa;Da++){Y=K(v[Da],Da,da);Y!=null&&(Aa[Aa.length]=Y)}else for(qa in v){Y=K(v[qa],qa,da);Y!=null&&(Aa[Aa.length]=Y)}return Aa.concat.apply([],Aa)},guid:1,proxy:function(v,K){if(typeof K=="string"){var da=v[K];K=v;v=da}if(!d.isFunction(v))return f;var Y=ra.call(arguments,2);da=function(){return v.apply(K,
Y.concat(ra.call(arguments)))};da.guid=v.guid=v.guid||da.guid||d.guid++;return da},access:function(v,K,da,Y,qa,Aa){var Da=v.length;if(typeof K=="object"){for(var Fa in K)d.access(v,Fa,K[Fa],Y,qa,da);return v}if(da!==f){Y=!Aa&&Y&&d.isFunction(da);for(Fa=0;Fa<Da;Fa++)qa(v[Fa],K,Y?da.call(v[Fa],Fa,qa(v[Fa],K)):da,Aa);return v}return Da?qa(v[0],K):f},now:function(){return(new Date).getTime()},uaMatch:function(v){v=v.toLowerCase();v=Ia.exec(v)||za.exec(v)||Ba.exec(v)||v.indexOf("compatible")<0&&Ca.exec(v)||
[];return{browser:v[1]||"",version:v[2]||"0"}},sub:function(){function v(da,Y){return new v.fn.init(da,Y)}d.extend(true,v,this);v.superclass=this;v.fn=v.prototype=this();v.fn.constructor=v;v.sub=this.sub;v.fn.init=function(da,Y){Y&&Y instanceof d&&!(Y instanceof v)&&(Y=v(Y));return d.fn.init.call(this,da,Y,K)};v.fn.init.prototype=v.fn;var K=v(X);return v},browser:{}});d.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(v,K){Sa["[object "+K+"]"]=K.toLowerCase()});F=
d.uaMatch(F);F.browser&&(d.browser[F.browser]=true,d.browser.version=F.version);d.browser.webkit&&(d.browser.safari=true);k.test("\u00a0")&&(n=/^[\s\xA0]+/,p=/[\s\xA0]+$/);g=d(X);X.addEventListener?(D=function(){X.removeEventListener("DOMContentLoaded",D,false);d.ready()}):X.attachEvent&&(D=function(){X.readyState==="complete"&&(X.detachEvent("onreadystatechange",D),d.ready())});return d}(),A="done fail isResolved isRejected promise then always pipe".split(" "),L=[].slice;c.extend({_Deferred:function(){var a=
[],d,b,e,g={done:function(){if(!e){var i=arguments,k,n,p,r,w;d&&(w=d,d=0);k=0;for(n=i.length;k<n;k++){p=i[k];r=c.type(p);r==="array"?g.done.apply(g,p):r==="function"&&a.push(p)}w&&g.resolveWith(w[0],w[1])}return this},resolveWith:function(i,k){if(!e&&!d&&!b){k=k||[];b=1;try{for(;a[0];)a.shift().apply(i,k)}finally{d=[i,k];b=0}}return this},resolve:function(){g.resolveWith(this,arguments);return this},isResolved:function(){return!!b||!!d},cancel:function(){e=1;a=[];return this}};return g},Deferred:function(a){var d=
c._Deferred(),b=c._Deferred(),e;c.extend(d,{then:function(g,i){d.done(g).fail(i);return this},always:function(){return d.done.apply(d,arguments).fail.apply(this,arguments)},fail:b.done,rejectWith:b.resolveWith,reject:b.resolve,isRejected:b.isResolved,pipe:function(g,i){return c.Deferred(function(k){c.each({done:[g,"resolve"],fail:[i,"reject"]},function(n,p){var r=p[0],w=p[1],B;c.isFunction(r)?d[n](function(){(B=r.apply(this,arguments))&&c.isFunction(B.promise)?B.promise().then(k.resolve,k.reject):
k[w](B)}):d[n](k[w])})}).promise()},promise:function(g){if(g==null){if(e)return e;e=g={}}for(var i=A.length;i--;)g[A[i]]=d[A[i]];return g}});d.done(b.cancel).fail(d.cancel);delete d.cancel;a&&a.call(d,d);return d},when:function(a){function d(n){return function(p){b[n]=arguments.length>1?L.call(arguments,0):p;--i||k.resolveWith(k,L.call(b,0))}}var b=arguments,e=0,g=b.length,i=g,k=g<=1&&a&&c.isFunction(a.promise)?a:c.Deferred();if(g>1){for(;e<g;e++)b[e]&&c.isFunction(b[e].promise)?b[e].promise().then(d(e),
k.reject):--i;i||k.resolveWith(k,b)}else k!==a&&k.resolveWith(k,g?[a]:[]);return k.promise()}});c.support=function(){var a=X.createElement("div"),d=X.documentElement,b,e,g,i,k,n,p;a.setAttribute("className","t");a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";b=a.getElementsByTagName("*");e=a.getElementsByTagName("a")[0];if(!b||!b.length||!e)return{};g=X.createElement("select");i=g.appendChild(X.createElement("option"));b=a.getElementsByTagName("input")[0];
n={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55$/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:b.value==="on",optSelected:i.selected,getSetAttribute:a.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,
shrinkWrapBlocks:false,reliableMarginRight:true};b.checked=true;n.noCloneChecked=b.cloneNode(true).checked;g.disabled=true;n.optDisabled=!i.disabled;try{delete a.test}catch(r){n.deleteExpando=false}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){n.noCloneEvent=false}),a.cloneNode(true).fireEvent("onclick"));b=X.createElement("input");b.value="t";b.setAttribute("type","radio");n.radioValue=b.value==="t";b.setAttribute("checked","checked");a.appendChild(b);e=X.createDocumentFragment();
e.appendChild(a.firstChild);n.checkClone=e.cloneNode(true).cloneNode(true).lastChild.checked;a.innerHTML="";a.style.width=a.style.paddingLeft="1px";g=X.getElementsByTagName("body")[0];e=X.createElement(g?"div":"body");i={visibility:"hidden",width:0,height:0,border:0,margin:0};g&&c.extend(i,{position:"absolute",left:-1000,top:-1000});for(p in i)e.style[p]=i[p];e.appendChild(a);d=g||d;d.insertBefore(e,d.firstChild);n.appendChecked=b.checked;n.boxModel=a.offsetWidth===2;"zoom"in a.style&&(a.style.display=
"inline",a.style.zoom=1,n.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",n.shrinkWrapBlocks=a.offsetWidth!==2);a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";g=a.getElementsByTagName("td");b=g[0].offsetHeight===0;g[0].style.display="";g[1].style.display="none";n.reliableHiddenOffsets=b&&g[0].offsetHeight===0;a.innerHTML="";X.defaultView&&X.defaultView.getComputedStyle&&(k=X.createElement("div"),
k.style.width="0",k.style.marginRight="0",a.appendChild(k),n.reliableMarginRight=(parseInt((X.defaultView.getComputedStyle(k,null)||{marginRight:0}).marginRight,10)||0)===0);e.innerHTML="";d.removeChild(e);if(a.attachEvent)for(p in{submit:1,change:1,focusin:1}){k="on"+p;(b=k in a)||(a.setAttribute(k,"return;"),b=typeof a[k]=="function");n[p+"Bubbles"]=b}e=e=g=i=g=k=a=b=null;return n}();c.boxModel=c.support.boxModel;var M=/^(?:\{.*\}|\[.*\])$/,R=/([a-z])([A-Z])/g;c.extend({cache:{},uuid:0,expando:"jQuery"+
(c.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(a){a=a.nodeType?c.cache[a[c.expando]]:a[c.expando];return!!a&&!Oa(a)},data:function(a,d,b,e){if(c.acceptData(a)){var g=c.expando,i=typeof d=="string",k=a.nodeType,n=k?c.cache:a,p=k?a[c.expando]:a[c.expando]&&c.expando;if(!((!p||e&&p&&!n[p][g])&&i&&b===f)){p||(k?(a[c.expando]=p=++c.uuid):(p=c.expando));n[p]||(n[p]={},k||(n[p].toJSON=c.noop));if(typeof d==
"object"||typeof d=="function")e?(n[p][g]=c.extend(n[p][g],d)):(n[p]=c.extend(n[p],d));a=n[p];e&&(a[g]||(a[g]={}),a=a[g]);b!==f&&(a[c.camelCase(d)]=b);if(d==="events"&&!a[d])return a[g]&&a[g].events;return i?a[c.camelCase(d)]||a[d]:a}}},removeData:function(a,d,b){if(c.acceptData(a)){var e=c.expando,g=a.nodeType,i=g?c.cache:a,k=g?a[c.expando]:c.expando;if(i[k]){if(d){var n=b?i[k][e]:i[k];if(n){delete n[d];if(!Oa(n))return}}if(b){delete i[k][e];if(!Oa(i[k]))return}d=i[k][e];c.support.deleteExpando||
i!=h?delete i[k]:(i[k]=null);d?(i[k]={},g||(i[k].toJSON=c.noop),i[k][e]=d):g&&(c.support.deleteExpando?delete a[c.expando]:a.removeAttribute?a.removeAttribute(c.expando):(a[c.expando]=null))}}},_data:function(a,d,b){return c.data(a,d,b,true)},acceptData:function(a){if(a.nodeName){var d=c.noData[a.nodeName.toLowerCase()];if(d)return d!==true&&a.getAttribute("classid")===d}return true}});c.fn.extend({data:function(a,d){var b=null;if(typeof a=="undefined"){if(this.length){b=c.data(this[0]);if(this[0].nodeType===
1)for(var e=this[0].attributes,g,i=0,k=e.length;i<k;i++){g=e[i].name;g.indexOf("data-")===0&&(g=c.camelCase(g.substring(5)),Ra(this[0],g,b[g]))}}return b}if(typeof a=="object")return this.each(function(){c.data(this,a)});var n=a.split(".");n[1]=n[1]?"."+n[1]:"";if(d===f){b=this.triggerHandler("getData"+n[1]+"!",[n[0]]);b===f&&this.length&&(b=c.data(this[0],a),b=Ra(this[0],a,b));return b===f&&n[1]?this.data(n[0]):b}return this.each(function(){var p=c(this),r=[n[0],d];p.triggerHandler("setData"+n[1]+
"!",r);c.data(this,a,d);p.triggerHandler("changeData"+n[1]+"!",r)})},removeData:function(a){return this.each(function(){c.removeData(this,a)})}});c.extend({_mark:function(a,d){a&&(d=(d||"fx")+"mark",c.data(a,d,(c.data(a,d,f,true)||0)+1,true))},_unmark:function(a,d,b){a!==true&&(b=d,d=a,a=false);if(d){b=b||"fx";var e=b+"mark";(a=a?0:(c.data(d,e,f,true)||1)-1)?c.data(d,e,a,true):(c.removeData(d,e,true),xa(d,b,"mark"))}},queue:function(a,d,b){if(a){d=(d||"fx")+"queue";var e=c.data(a,d,f,true);b&&(!e||
c.isArray(b)?(e=c.data(a,d,c.makeArray(b),true)):e.push(b));return e||[]}},dequeue:function(a,d){d=d||"fx";var b=c.queue(a,d),e=b.shift();e==="inprogress"&&(e=b.shift());e&&(d==="fx"&&b.unshift("inprogress"),e.call(a,function(){c.dequeue(a,d)}));b.length||(c.removeData(a,d+"queue",true),xa(a,d,"queue"))}});c.fn.extend({queue:function(a,d){typeof a!="string"&&(d=a,a="fx");if(d===f)return c.queue(this[0],a);return this.each(function(){var b=c.queue(this,a,d);a==="fx"&&b[0]!=="inprogress"&&c.dequeue(this,
a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,a)})},delay:function(a,d){a=c.fx?c.fx.speeds[a]||a:a;d=d||"fx";return this.queue(d,function(){var b=this;setTimeout(function(){c.dequeue(b,d)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,d){function b(){--k||e.resolveWith(g,[g])}typeof a!="string"&&(d=a,a=f);a=a||"fx";for(var e=c.Deferred(),g=this,i=g.length,k=1,n=a+"defer",p=a+"queue",r=a+"mark",w;i--;)if(w=c.data(g[i],n,f,true)||(c.data(g[i],
p,f,true)||c.data(g[i],r,f,true))&&c.data(g[i],n,c._Deferred(),true)){k++;w.done(b)}b();return e.promise()}});var ja=/[\n\t\r]/g,ia=/\s+/,wa=/\r/g,Ga=/^(?:button|input)$/i,ua=/^(?:button|input|object|select|textarea)$/i,Na=/^a(?:rea)?$/i,G=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ea=/\:|^on/,aa,ha;c.fn.extend({attr:function(a,d){return c.access(this,a,d,true,c.attr)},removeAttr:function(a){return this.each(function(){c.removeAttr(this,
a)})},prop:function(a,d){return c.access(this,a,d,true,c.prop)},removeProp:function(a){a=c.propFix[a]||a;return this.each(function(){try{this[a]=f;delete this[a]}catch(d){}})},addClass:function(a){var d,b,e,g,i,k,n;if(c.isFunction(a))return this.each(function(p){c(this).addClass(a.call(this,p,this.className))});if(a&&typeof a=="string"){d=a.split(ia);b=0;for(e=this.length;b<e;b++){g=this[b];if(g.nodeType===1)if(!g.className&&d.length===1)g.className=a;else{i=" "+g.className+" ";k=0;for(n=d.length;k<
n;k++)~i.indexOf(" "+d[k]+" ")||(i+=d[k]+" ");g.className=c.trim(i)}}}return this},removeClass:function(a){var d,b,e,g,i,k,n;if(c.isFunction(a))return this.each(function(p){c(this).removeClass(a.call(this,p,this.className))});if(a&&typeof a=="string"||a===f){d=(a||"").split(ia);b=0;for(e=this.length;b<e;b++){g=this[b];if(g.nodeType===1&&g.className)if(a){i=(" "+g.className+" ").replace(ja," ");k=0;for(n=d.length;k<n;k++)i=i.replace(" "+d[k]+" "," ");g.className=c.trim(i)}else g.className=""}}return this},
toggleClass:function(a,d){var b=typeof a,e=typeof d=="boolean";if(c.isFunction(a))return this.each(function(g){c(this).toggleClass(a.call(this,g,this.className,d),d)});return this.each(function(){if(b==="string")for(var g,i=0,k=c(this),n=d,p=a.split(ia);g=p[i++];){n=e?n:!k.hasClass(g);k[n?"addClass":"removeClass"](g)}else if(b==="undefined"||b==="boolean"){this.className&&c._data(this,"__className__",this.className);this.className=this.className||a===false?"":c._data(this,"__className__")||""}})},
hasClass:function(a){for(var d=0,b=this.length;d<b;d++)if((" "+this[d].className+" ").replace(ja," ").indexOf(" "+a+" ")>-1)return true;return false},val:function(a){var d,b,e=this[0];if(!arguments.length){if(e){if((d=c.valHooks[e.nodeName.toLowerCase()]||c.valHooks[e.type])&&"get"in d&&(b=d.get(e,"value"))!==f)return b;b=e.value;return typeof b=="string"?b.replace(wa,""):b==null?"":b}return f}var g=c.isFunction(a);return this.each(function(i){var k=c(this),n;if(this.nodeType===1){g?(n=a.call(this,
i,k.val())):(n=a);n==null?(n=""):typeof n=="number"?(n+=""):c.isArray(n)&&(n=c.map(n,function(p){return p==null?"":p+""}));d=c.valHooks[this.nodeName.toLowerCase()]||c.valHooks[this.type];if(!d||!("set"in d)||d.set(this,n,"value")===f)this.value=n}})}});c.extend({valHooks:{option:{get:function(a){var d=a.attributes.value;return!d||d.specified?a.value:a.text}},select:{get:function(a){var d,b=a.selectedIndex,e=[],g=a.options;a=a.type==="select-one";if(b<0)return null;for(var i=a?b:0,k=a?b+1:g.length;i<
k;i++){d=g[i];if(d.selected&&(c.support.optDisabled?!d.disabled:d.getAttribute("disabled")===null)&&(!d.parentNode.disabled||!c.nodeName(d.parentNode,"optgroup"))){d=c(d).val();if(a)return d;e.push(d)}}if(a&&!e.length&&g.length)return c(g[b]).val();return e},set:function(a,d){var b=c.makeArray(d);c(a).find("option").each(function(){this.selected=c.inArray(c(this).val(),b)>=0});b.length||(a.selectedIndex=-1);return b}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,
offset:true},attrFix:{tabindex:"tabIndex"},attr:function(a,d,b,e){var g=a.nodeType;if(!a||g===3||g===8||g===2)return f;if(e&&d in c.attrFn)return c(a)[d](b);if(!("getAttribute"in a))return c.prop(a,d,b);var i,k;(e=g!==1||!c.isXMLDoc(a))&&(d=c.attrFix[d]||d,k=c.attrHooks[d],k||(G.test(d)?(k=ha):aa&&d!=="className"&&(c.nodeName(a,"form")||ea.test(d))&&(k=aa)));if(b!==f){if(b===null){c.removeAttr(a,d);return f}if(k&&"set"in k&&e&&(i=k.set(a,b,d))!==f)return i;a.setAttribute(d,""+b);return b}if(k&&"get"in
k&&e&&(i=k.get(a,d))!==null)return i;i=a.getAttribute(d);return i===null?f:i},removeAttr:function(a,d){var b;a.nodeType===1&&(d=c.attrFix[d]||d,c.support.getSetAttribute?a.removeAttribute(d):(c.attr(a,d,""),a.removeAttributeNode(a.getAttributeNode(d))),G.test(d)&&(b=c.propFix[d]||d)in a&&(a[b]=false))},attrHooks:{type:{set:function(a,d){if(Ga.test(a.nodeName)&&a.parentNode)c.error("type property can't be changed");else if(!c.support.radioValue&&d==="radio"&&c.nodeName(a,"input")){var b=a.value;a.setAttribute("type",
d);b&&(a.value=b);return d}}},tabIndex:{get:function(a){var d=a.getAttributeNode("tabIndex");return d&&d.specified?parseInt(d.value,10):ua.test(a.nodeName)||Na.test(a.nodeName)&&a.href?0:f}},value:{get:function(a,d){if(aa&&c.nodeName(a,"button"))return aa.get(a,d);return d in a?a.value:null},set:function(a,d,b){if(aa&&c.nodeName(a,"button"))return aa.set(a,d,b);a.value=d}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",
cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,d,b){var e=a.nodeType;if(!a||e===3||e===8||e===2)return f;var g,i;(e!==1||!c.isXMLDoc(a))&&(d=c.propFix[d]||d,i=c.propHooks[d]);return b!==f?i&&"set"in i&&(g=i.set(a,b,d))!==f?g:(a[d]=b):i&&"get"in i&&(g=i.get(a,d))!==f?g:a[d]},propHooks:{}});ha={get:function(a,d){return c.prop(a,d)?d.toLowerCase():f},set:function(a,d,b){var e;d===false?c.removeAttr(a,
b):(e=c.propFix[b]||b,e in a&&(a[e]=true),a.setAttribute(b,b.toLowerCase()));return b}};c.support.getSetAttribute||(c.attrFix=c.propFix,aa=c.attrHooks.name=c.attrHooks.title=c.valHooks.button={get:function(a,d){var b;return(b=a.getAttributeNode(d))&&b.nodeValue!==""?b.nodeValue:f},set:function(a,d,b){if(a=a.getAttributeNode(b))return a.nodeValue=d}},c.each(["width","height"],function(a,d){c.attrHooks[d]=c.extend(c.attrHooks[d],{set:function(b,e){if(e===""){b.setAttribute(d,"auto");return e}}})}));
c.support.hrefNormalized||c.each(["href","src","width","height"],function(a,d){c.attrHooks[d]=c.extend(c.attrHooks[d],{get:function(b){b=b.getAttribute(d,2);return b===null?f:b}})});c.support.style||(c.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||f},set:function(a,d){return a.style.cssText=""+d}});c.support.optSelected||(c.propHooks.selected=c.extend(c.propHooks.selected,{get:function(){}}));c.support.checkOn||c.each(["radio","checkbox"],function(){c.valHooks[this]={get:function(a){return a.getAttribute("value")===
null?"on":a.value}}});c.each(["radio","checkbox"],function(){c.valHooks[this]=c.extend(c.valHooks[this],{set:function(a,d){if(c.isArray(d))return a.checked=c.inArray(c(a).val(),d)>=0}})});var sa=/\.(.*)$/,ta=/^(?:textarea|input|select)$/i,La=/\./g,gb=/ /g,kb=/[^\w\s.|`]/g,Fb=function(a){return a.replace(kb,"\\$&")};c.event={add:function(a,d,b,e){if(a.nodeType!==3&&a.nodeType!==8){if(b===false)b=ga;else if(!b)return;var g,i;b.handler&&(g=b,b=g.handler);b.guid||(b.guid=c.guid++);if(i=c._data(a)){var k=
i.events,n=i.handle;k||(i.events=k={});n||(i.handle=n=function(ba){return typeof c!="undefined"&&(!ba||c.event.triggered!==ba.type)?c.event.handle.apply(n.elem,arguments):f});n.elem=a;d=d.split(" ");for(var p,r=0,w;p=d[r++];){i=g?c.extend({},g):{handler:b,data:e};p.indexOf(".")>-1?(w=p.split("."),p=w.shift(),i.namespace=w.slice(0).sort().join(".")):(w=[],i.namespace="");i.type=p;i.guid||(i.guid=b.guid);var B=k[p],P=c.event.special[p]||{};if(!B){B=k[p]=[];if(!P.setup||P.setup.call(a,e,w,n)===false)a.addEventListener?
a.addEventListener(p,n,false):a.attachEvent&&a.attachEvent("on"+p,n)}P.add&&(P.add.call(a,i),i.handler.guid||(i.handler.guid=b.guid));B.push(i);c.event.global[p]=true}a=null}}},global:{},remove:function(a,d,b,e){if(a.nodeType!==3&&a.nodeType!==8){b===false&&(b=ga);var g,i,k=0,n,p,r,w,B,P,ba=c.hasData(a)&&c._data(a),ka=ba&&ba.events;if(ba&&ka){d&&d.type&&(b=d.handler,d=d.type);if(!d||typeof d=="string"&&d.charAt(0)===".")for(g in ka)c.event.remove(a,g+(d||""));else{for(d=d.split(" ");g=d[k++];){w=
g;n=g.indexOf(".")<0;p=[];n||(p=g.split("."),g=p.shift(),r=new RegExp("(^|\\.)"+c.map(p.slice(0).sort(),Fb).join("\\.(?:.*\\.)?")+"(\\.|$)"));if(B=ka[g])if(b){w=c.event.special[g]||{};for(i=e||0;i<B.length;i++){P=B[i];if(b.guid===P.guid){if(n||r.test(P.namespace)){e==null&&B.splice(i--,1);w.remove&&w.remove.call(a,P)}if(e!=null)break}}if(B.length===0||e!=null&&B.length===1){(!w.teardown||w.teardown.call(a,p)===false)&&c.removeEvent(a,g,ba.handle);delete ka[g]}}else for(i=0;i<B.length;i++){P=B[i];
if(n||r.test(P.namespace)){c.event.remove(a,w,P.handler,i);B.splice(i--,1)}}}if(c.isEmptyObject(ka)){(d=ba.handle)&&(d.elem=null);delete ba.events;delete ba.handle;c.isEmptyObject(ba)&&c.removeData(a,f,true)}}}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(a,d,b,e){var g=a.type||a,i=[],k;g.indexOf("!")>=0&&(g=g.slice(0,-1),k=true);g.indexOf(".")>=0&&(i=g.split("."),g=i.shift(),i.sort());if(b&&!c.event.customEvent[g]||c.event.global[g]){a=typeof a=="object"?a[c.expando]?
a:new c.Event(g,a):new c.Event(g);a.type=g;a.exclusive=k;a.namespace=i.join(".");a.namespace_re=new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)");if(e||!b){a.preventDefault();a.stopPropagation()}if(b){if(!(b.nodeType===3||b.nodeType===8)){a.result=f;a.target=b;d=d!=null?c.makeArray(d):[];d.unshift(a);i=b;e=g.indexOf(":")<0?"on"+g:"";do{k=c._data(i,"handle");a.currentTarget=i;k&&k.apply(i,d);e&&c.acceptData(i)&&i[e]&&i[e].apply(i,d)===false&&(a.result=false,a.preventDefault());i=i.parentNode||
i.ownerDocument||i===a.target.ownerDocument&&h}while(i&&!a.isPropagationStopped());if(!a.isDefaultPrevented()){var n;i=c.event.special[g]||{};if((!i._default||i._default.call(b.ownerDocument,a)===false)&&(g!=="click"||!c.nodeName(b,"a"))&&c.acceptData(b)){try{e&&b[g]&&(n=b[e],n&&(b[e]=null),c.event.triggered=g,b[g]())}catch(p){}n&&(b[e]=n);c.event.triggered=f}}return a.result}}else c.each(c.cache,function(){var r=this[c.expando];r&&r.events&&r.events[g]&&c.event.trigger(a,d,r.handle.elem)})}},handle:function(a){a=
c.event.fix(a||h.event);var d=((c._data(this,"events")||{})[a.type]||[]).slice(0),b=!a.exclusive&&!a.namespace,e=Array.prototype.slice.call(arguments,0);e[0]=a;a.currentTarget=this;for(var g=0,i=d.length;g<i;g++){var k=d[g];if(b||a.namespace_re.test(k.namespace)){a.handler=k.handler;a.data=k.data;a.handleObj=k;k=k.handler.apply(this,e);k!==f&&(a.result=k,k===false&&(a.preventDefault(),a.stopPropagation()));if(a.isImmediatePropagationStopped())break}}return a.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(a){if(a[c.expando])return a;var d=a;a=c.Event(d);for(var b=this.props.length,e;b;){e=this.props[--b];a[e]=d[e]}a.target||(a.target=a.srcElement||X);a.target.nodeType===3&&(a.target=a.target.parentNode);!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){b=a.target.ownerDocument||X;d=b.documentElement;b=b.body;a.pageX=a.clientX+(d&&d.scrollLeft||b&&b.scrollLeft||0)-(d&&d.clientLeft||b&&b.clientLeft||0);
a.pageY=a.clientY+(d&&d.scrollTop||b&&b.scrollTop||0)-(d&&d.clientTop||b&&b.clientTop||0)}a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode);!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey);!a.which&&a.button!==f&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0);return a},guid:1E8,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,ca(a.origType,a.selector),c.extend({},a,{handler:na,guid:a.handler.guid}))},
remove:function(a){c.event.remove(this,ca(a.origType,a.selector),a)}},beforeunload:{setup:function(a,d,b){c.isWindow(this)&&(this.onbeforeunload=b)},teardown:function(a,d){this.onbeforeunload===d&&(this.onbeforeunload=null)}}}};c.removeEvent=X.removeEventListener?function(a,d,b){a.removeEventListener&&a.removeEventListener(d,b,false)}:function(a,d,b){a.detachEvent&&a.detachEvent("on"+d,b)};c.Event=function(a,d){if(!this.preventDefault)return new c.Event(a,d);a&&a.type?(this.originalEvent=a,this.type=
a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===false||a.getPreventDefault&&a.getPreventDefault()?fa:ga):(this.type=a);d&&c.extend(this,d);this.timeStamp=c.now();this[c.expando]=true};c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=fa;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():(a.returnValue=false))},stopPropagation:function(){this.isPropagationStopped=fa;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=
true)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=fa;this.stopPropagation()},isDefaultPrevented:ga,isPropagationStopped:ga,isImmediatePropagationStopped:ga};var Rb=function(a){var d=a.relatedTarget,b=false,e=a.type;a.type=a.data;d!==this&&(d&&(b=c.contains(this,d)),b||(c.event.handle.apply(this,arguments),a.type=e))},Sb=function(a){a.type=a.data;c.event.handle.apply(this,arguments)};c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,d){c.event.special[a]=
{setup:function(b){c.event.add(this,d,b&&b.selector?Sb:Rb,a)},teardown:function(b){c.event.remove(this,d,b&&b.selector?Sb:Rb)}}});c.support.submitBubbles||(c.event.special.submit={setup:function(){if(c.nodeName(this,"form"))return false;else{c.event.add(this,"click.specialSubmit",function(a){var d=a.target,b=d.type;(b==="submit"||b==="image")&&c(d).closest("form").length&&S("submit",this,arguments)});c.event.add(this,"keypress.specialSubmit",function(a){var d=a.target,b=d.type;(b==="text"||b==="password")&&
c(d).closest("form").length&&a.keyCode===13&&S("submit",this,arguments)})}},teardown:function(){c.event.remove(this,".specialSubmit")}});if(!c.support.changeBubbles){var lb,Gb=function(a){var d=a.type,b=a.value;d==="radio"||d==="checkbox"?(b=a.checked):d==="select-multiple"?(b=a.selectedIndex>-1?c.map(a.options,function(e){return e.selected}).join("-"):""):c.nodeName(a,"select")&&(b=a.selectedIndex);return b},Hb=function(a,d){var b=a.target,e,g;if(ta.test(b.nodeName)&&!b.readOnly){e=c._data(b,"_change_data");
g=Gb(b);(a.type!=="focusout"||b.type!=="radio")&&c._data(b,"_change_data",g);if(!(e===f||g===e))if(e!=null||g){a.type="change";a.liveFired=f;c.event.trigger(a,d,b)}}};c.event.special.change={filters:{focusout:Hb,beforedeactivate:Hb,click:function(a){var d=a.target,b=c.nodeName(d,"input")?d.type:"";(b==="radio"||b==="checkbox"||c.nodeName(d,"select"))&&Hb.call(this,a)},keydown:function(a){var d=a.target,b=c.nodeName(d,"input")?d.type:"";(a.keyCode===13&&!c.nodeName(d,"textarea")||a.keyCode===32&&(b===
"checkbox"||b==="radio")||b==="select-multiple")&&Hb.call(this,a)},beforeactivate:function(a){a=a.target;c._data(a,"_change_data",Gb(a))}},setup:function(){if(this.type==="file")return false;for(var a in lb)c.event.add(this,a+".specialChange",lb[a]);return ta.test(this.nodeName)},teardown:function(){c.event.remove(this,".specialChange");return ta.test(this.nodeName)}};lb=c.event.special.change.filters;lb.focus=lb.beforeactivate}c.support.focusinBubbles||c.each({focus:"focusin",blur:"focusout"},function(a,
d){function b(g){var i=c.event.fix(g);i.type=d;i.originalEvent={};c.event.trigger(i,null,i.target);i.isDefaultPrevented()&&g.preventDefault()}var e=0;c.event.special[d]={setup:function(){e++===0&&X.addEventListener(a,b,true)},teardown:function(){--e===0&&X.removeEventListener(a,b,true)}}});c.each(["bind","one"],function(a,d){c.fn[d]=function(b,e,g){var i;if(typeof b=="object"){for(var k in b)this[d](k,e,b[k],g);return this}if(arguments.length===2||e===false){g=e;e=f}d==="one"?(i=function(p){c(this).unbind(p,
i);return g.apply(this,arguments)},i.guid=g.guid||c.guid++):(i=g);if(b==="unload"&&d!=="one")this.one(b,e,g);else{k=0;for(var n=this.length;k<n;k++)c.event.add(this[k],b,i,e)}return this}});c.fn.extend({unbind:function(a,d){if(typeof a=="object"&&!a.preventDefault)for(var b in a)this.unbind(b,a[b]);else{b=0;for(var e=this.length;b<e;b++)c.event.remove(this[b],a,d)}return this},delegate:function(a,d,b,e){return this.live(d,b,e,a)},undelegate:function(a,d,b){return arguments.length===0?this.unbind("live"):
this.die(d,null,b,a)},trigger:function(a,d){return this.each(function(){c.event.trigger(a,d,this)})},triggerHandler:function(a,d){if(this[0])return c.event.trigger(a,d,this[0],true)},toggle:function(a){var d=arguments,b=a.guid||c.guid++,e=0,g=function(i){var k=(c.data(this,"lastToggle"+a.guid)||0)%e;c.data(this,"lastToggle"+a.guid,k+1);i.preventDefault();return d[k].apply(this,arguments)||false};for(g.guid=b;e<d.length;)d[e++].guid=b;return this.click(g)},hover:function(a,d){return this.mouseenter(a).mouseleave(d||
a)}});var rb={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};c.each(["live","die"],function(a,d){c.fn[d]=function(b,e,g,i){var k=0,n,p,r=i||this.selector,w=i?this:c(this.context);if(typeof b=="object"&&!b.preventDefault){for(n in b)w[d](n,e,b[n],r);return this}if(d==="die"&&!b&&i&&i.charAt(0)==="."){w.unbind(i);return this}if(e===false||c.isFunction(e)){g=e||ga;e=f}for(b=(b||"").split(" ");(i=b[k++])!=null;){n=sa.exec(i);p="";n&&(p=n[0],i=i.replace(sa,""));if(i==="hover")b.push("mouseenter"+
p,"mouseleave"+p);else{n=i;rb[i]?(b.push(rb[i]+p),i+=p):(i=(rb[i]||i)+p);if(d==="live"){p=0;for(var B=w.length;p<B;p++)c.event.add(w[p],"live."+ca(i,r),{data:e,selector:r,handler:g,origType:i,origHandler:g,preType:n})}else w.unbind("live."+ca(i,r),g)}}return this}});c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,d){c.fn[d]=function(b,
e){e==null&&(e=b,b=null);return arguments.length>0?this.bind(d,b,e):this.trigger(d)};c.attrFn&&(c.attrFn[d]=true)});(function(){function a(o,u,F,H,D,I){D=0;for(var T=H.length;D<T;D++){var Z=H[D];if(Z){var ra=false;for(Z=Z[o];Z;){if(Z.sizcache===F){ra=H[Z.sizset];break}if(Z.nodeType===1){I||(Z.sizcache=F,Z.sizset=D);if(typeof u!="string"){if(Z===u){ra=true;break}}else if(r.filter(u,[Z]).length>0){ra=Z;break}}Z=Z[o]}H[D]=ra}}}function d(o,u,F,H,D,I){D=0;for(var T=H.length;D<T;D++){var Z=H[D];if(Z){var ra=
false;for(Z=Z[o];Z;){if(Z.sizcache===F){ra=H[Z.sizset];break}Z.nodeType===1&&!I&&(Z.sizcache=F,Z.sizset=D);if(Z.nodeName.toLowerCase()===u){ra=Z;break}Z=Z[o]}H[D]=ra}}}var b=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,g=Object.prototype.toString,i=false,k=true,n=/\\/g,p=/\W/;[0,0].sort(function(){k=false;return 0});var r=function(o,u,F,H){F=F||[];var D=u=u||X;if(u.nodeType!==1&&u.nodeType!==9)return[];if(!o||
typeof o!="string")return F;var I,T,Z,ra,Ma,Ja,Sa=true,v=r.isXML(u),K=[],da=o;do{b.exec("");if(I=b.exec(da)){da=I[3];K.push(I[1]);if(I[2]){ra=I[3];break}}}while(I);if(K.length>1&&B.exec(o))if(K.length===2&&w.relative[K[0]])T=Ca(K[0]+K[1],u);else for(T=w.relative[K[0]]?[u]:r(K.shift(),u);K.length;){o=K.shift();w.relative[o]&&(o+=K.shift());T=Ca(o,T)}else{!H&&K.length>1&&u.nodeType===9&&!v&&w.match.ID.test(K[0])&&!w.match.ID.test(K[K.length-1])&&(Ma=r.find(K.shift(),u,v),u=Ma.expr?r.filter(Ma.expr,
Ma.set)[0]:Ma.set[0]);if(u){Ma=H?{expr:K.pop(),set:ka(H)}:r.find(K.pop(),K.length===1&&(K[0]==="~"||K[0]==="+")&&u.parentNode?u.parentNode:u,v);T=Ma.expr?r.filter(Ma.expr,Ma.set):Ma.set;for(K.length>0?(Z=ka(T)):(Sa=false);K.length;){I=Ja=K.pop();w.relative[Ja]?(I=K.pop()):(Ja="");I==null&&(I=u);w.relative[Ja](Z,I,v)}}else Z=[]}Z||(Z=T);Z||r.error(Ja||o);if(g.call(Z)==="[object Array]")if(Sa)if(u&&u.nodeType===1)for(o=0;Z[o]!=null;o++)Z[o]&&(Z[o]===true||Z[o].nodeType===1&&r.contains(u,Z[o]))&&F.push(T[o]);
else for(o=0;Z[o]!=null;o++)Z[o]&&Z[o].nodeType===1&&F.push(T[o]);else F.push.apply(F,Z);else ka(Z,F);ra&&(r(ra,D,F,H),r.uniqueSort(F));return F};r.uniqueSort=function(o){if(za){i=k;o.sort(za);if(i)for(var u=1;u<o.length;u++)o[u]===o[u-1]&&o.splice(u--,1)}return o};r.matches=function(o,u){return r(o,null,null,u)};r.matchesSelector=function(o,u){return r(u,null,null,[o]).length>0};r.find=function(o,u,F){var H;if(!o)return[];for(var D=0,I=w.order.length;D<I;D++){var T,Z=w.order[D];if(T=w.leftMatch[Z].exec(o)){var ra=
T[1];T.splice(1,1);if(ra.substr(ra.length-1)!=="\\"){T[1]=(T[1]||"").replace(n,"");H=w.find[Z](T,u,F);if(H!=null){o=o.replace(w.match[Z],"");break}}}}H||(H=typeof u.getElementsByTagName!="undefined"?u.getElementsByTagName("*"):[]);return{set:H,expr:o}};r.filter=function(o,u,F,H){for(var D,I,T=o,Z=[],ra=u,Ma=u&&u[0]&&r.isXML(u[0]);o&&u.length;){for(var Ja in w.filter)if((D=w.leftMatch[Ja].exec(o))!=null&&D[2]){var Sa,v,K=w.filter[Ja];v=D[1];I=false;D.splice(1,1);if(v.substr(v.length-1)!=="\\"){ra===
Z&&(Z=[]);if(w.preFilter[Ja])if(D=w.preFilter[Ja](D,ra,F,Z,H,Ma)){if(D===true)continue}else I=Sa=true;if(D)for(var da=0;(v=ra[da])!=null;da++)if(v){Sa=K(v,D,da,ra);var Y=H^!!Sa;F&&Sa!=null?Y?(I=true):(ra[da]=false):Y&&(Z.push(v),I=true)}if(Sa!==f){F||(ra=Z);o=o.replace(w.match[Ja],"");if(!I)return[];break}}}if(o===T)if(I==null)r.error(o);else break;T=o}return ra};r.error=function(o){throw"Syntax error, unrecognized expression: "+o;};var w=r.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},
leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(o){return o.getAttribute("href")},type:function(o){return o.getAttribute("type")}},relative:{"+":function(o,u){var F=typeof u=="string",H=F&&!p.test(u);F=F&&!H;H&&(u=u.toLowerCase());H=0;for(var D=o.length,I;H<D;H++)if(I=o[H]){for(;(I=I.previousSibling)&&I.nodeType!==1;);o[H]=F||I&&I.nodeName.toLowerCase()===u?I||false:I===u}F&&r.filter(u,o,true)},">":function(o,u){var F,H=typeof u=="string",D=0,I=o.length;if(H&&
!p.test(u))for(u=u.toLowerCase();D<I;D++){if(F=o[D]){F=F.parentNode;o[D]=F.nodeName.toLowerCase()===u?F:false}}else{for(;D<I;D++)(F=o[D])&&(o[D]=H?F.parentNode:F.parentNode===u);H&&r.filter(u,o,true)}},"":function(o,u,F){var H,D=e++,I=a;typeof u=="string"&&!p.test(u)&&(u=u.toLowerCase(),H=u,I=d);I("parentNode",u,D,o,H,F)},"~":function(o,u,F){var H,D=e++,I=a;typeof u=="string"&&!p.test(u)&&(u=u.toLowerCase(),H=u,I=d);I("previousSibling",u,D,o,H,F)}},find:{ID:function(o,u,F){if(typeof u.getElementById!=
"undefined"&&!F)return(o=u.getElementById(o[1]))&&o.parentNode?[o]:[]},NAME:function(o,u){if(typeof u.getElementsByName!="undefined"){for(var F=[],H=u.getElementsByName(o[1]),D=0,I=H.length;D<I;D++)H[D].getAttribute("name")===o[1]&&F.push(H[D]);return F.length===0?null:F}},TAG:function(o,u){if(typeof u.getElementsByTagName!="undefined")return u.getElementsByTagName(o[1])}},preFilter:{CLASS:function(o,u,F,H,D,I){o=" "+o[1].replace(n,"")+" ";if(I)return o;I=0;for(var T;(T=u[I])!=null;I++)T&&(D^(T.className&&
(" "+T.className+" ").replace(/[\t\n\r]/g," ").indexOf(o)>=0)?F||H.push(T):F&&(u[I]=false));return false},ID:function(o){return o[1].replace(n,"")},TAG:function(o){return o[1].replace(n,"").toLowerCase()},CHILD:function(o){if(o[1]==="nth"){o[2]||r.error(o[0]);o[2]=o[2].replace(/^\+|\s*/g,"");var u=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(o[2]==="even"&&"2n"||o[2]==="odd"&&"2n+1"||!/\D/.test(o[2])&&"0n+"+o[2]||o[2]);o[2]=u[1]+(u[2]||1)-0;o[3]=u[3]-0}else o[2]&&r.error(o[0]);o[0]=e++;return o},ATTR:function(o,
u,F,H,D,I){u=o[1]=o[1].replace(n,"");!I&&w.attrMap[u]&&(o[1]=w.attrMap[u]);o[4]=(o[4]||o[5]||"").replace(n,"");o[2]==="~="&&(o[4]=" "+o[4]+" ");return o},PSEUDO:function(o,u,F,H,D){if(o[1]==="not")if((b.exec(o[3])||"").length>1||/^\w/.test(o[3]))o[3]=r(o[3],null,null,u);else{o=r.filter(o[3],u,F,true^D);F||H.push.apply(H,o);return false}else if(w.match.POS.test(o[0])||w.match.CHILD.test(o[0]))return true;return o},POS:function(o){o.unshift(true);return o}},filters:{enabled:function(o){return o.disabled===
false&&o.type!=="hidden"},disabled:function(o){return o.disabled===true},checked:function(o){return o.checked===true},selected:function(o){return o.selected===true},parent:function(o){return!!o.firstChild},empty:function(o){return!o.firstChild},has:function(o,u,F){return!!r(F[3],o).length},header:function(o){return/h\d/i.test(o.nodeName)},text:function(o){var u=o.getAttribute("type"),F=o.type;return o.nodeName.toLowerCase()==="input"&&"text"===F&&(u===F||u===null)},radio:function(o){return o.nodeName.toLowerCase()===
"input"&&"radio"===o.type},checkbox:function(o){return o.nodeName.toLowerCase()==="input"&&"checkbox"===o.type},file:function(o){return o.nodeName.toLowerCase()==="input"&&"file"===o.type},password:function(o){return o.nodeName.toLowerCase()==="input"&&"password"===o.type},submit:function(o){var u=o.nodeName.toLowerCase();return(u==="input"||u==="button")&&"submit"===o.type},image:function(o){return o.nodeName.toLowerCase()==="input"&&"image"===o.type},reset:function(o){var u=o.nodeName.toLowerCase();
return(u==="input"||u==="button")&&"reset"===o.type},button:function(o){var u=o.nodeName.toLowerCase();return u==="input"&&"button"===o.type||u==="button"},input:function(o){return/input|select|textarea|button/i.test(o.nodeName)},focus:function(o){return o===o.ownerDocument.activeElement}},setFilters:{first:function(o,u){return u===0},last:function(o,u,F,H){return u===H.length-1},even:function(o,u){return u%2===0},odd:function(o,u){return u%2===1},lt:function(o,u,F){return u<F[3]-0},gt:function(o,
u,F){return u>F[3]-0},nth:function(o,u,F){return F[3]-0===u},eq:function(o,u,F){return F[3]-0===u}},filter:{PSEUDO:function(o,u,F,H){var D=u[1],I=w.filters[D];if(I)return I(o,F,u,H);if(D==="contains")return(o.textContent||o.innerText||r.getText([o])||"").indexOf(u[3])>=0;if(D==="not"){u=u[3];F=0;for(H=u.length;F<H;F++)if(u[F]===o)return false;return true}r.error(D)},CHILD:function(o,u){var F=u[1],H=o;switch(F){case "only":case "first":for(;H=H.previousSibling;)if(H.nodeType===1)return false;if(F===
"first")return true;H=o;case "last":for(;H=H.nextSibling;)if(H.nodeType===1)return false;return true;case "nth":F=u[2];var D=u[3];if(F===1&&D===0)return true;var I=u[0],T=o.parentNode;if(T&&(T.sizcache!==I||!o.nodeIndex)){var Z=0;for(H=T.firstChild;H;H=H.nextSibling)H.nodeType===1&&(H.nodeIndex=++Z);T.sizcache=I}H=o.nodeIndex-D;return F===0?H===0:H%F===0&&H/F>=0}},ID:function(o,u){return o.nodeType===1&&o.getAttribute("id")===u},TAG:function(o,u){return u==="*"&&o.nodeType===1||o.nodeName.toLowerCase()===
u},CLASS:function(o,u){return(" "+(o.className||o.getAttribute("class"))+" ").indexOf(u)>-1},ATTR:function(o,u){var F=u[1];F=w.attrHandle[F]?w.attrHandle[F](o):o[F]!=null?o[F]:o.getAttribute(F);var H=F+"",D=u[2],I=u[4];return F==null?D==="!=":D==="="?H===I:D==="*="?H.indexOf(I)>=0:D==="~="?(" "+H+" ").indexOf(I)>=0:I?D==="!="?H!==I:D==="^="?H.indexOf(I)===0:D==="$="?H.substr(H.length-I.length)===I:D==="|="?H===I||H.substr(0,I.length+1)===I+"-":false:H&&F!==false},POS:function(o,u,F,H){var D=w.setFilters[u[2]];
if(D)return D(o,F,u,H)}}},B=w.match.POS,P=function(o,u){return"\\"+(u-0+1)};for(var ba in w.match){w.match[ba]=new RegExp(w.match[ba].source+/(?![^\[]*\])(?![^\(]*\))/.source);w.leftMatch[ba]=new RegExp(/(^(?:.|\r|\n)*?)/.source+w.match[ba].source.replace(/\\(\d+)/g,P))}var ka=function(o,u){o=Array.prototype.slice.call(o,0);if(u){u.push.apply(u,o);return u}return o};try{Array.prototype.slice.call(X.documentElement.childNodes,0)}catch(Ia){ka=function(o,u){var F=0,H=u||[];if(g.call(o)==="[object Array]")Array.prototype.push.apply(H,
o);else if(typeof o.length=="number")for(var D=o.length;F<D;F++)H.push(o[F]);else for(;o[F];F++)H.push(o[F]);return H}}var za,Ba;X.documentElement.compareDocumentPosition?(za=function(o,u){if(o===u){i=true;return 0}if(!o.compareDocumentPosition||!u.compareDocumentPosition)return o.compareDocumentPosition?-1:1;return o.compareDocumentPosition(u)&4?-1:1}):(za=function(o,u){if(o===u){i=true;return 0}if(o.sourceIndex&&u.sourceIndex)return o.sourceIndex-u.sourceIndex;var F,H,D=[],I=[];F=o.parentNode;H=
u.parentNode;var T=F;if(F===H)return Ba(o,u);if(!F)return-1;if(!H)return 1;for(;T;){D.unshift(T);T=T.parentNode}for(T=H;T;){I.unshift(T);T=T.parentNode}F=D.length;H=I.length;for(T=0;T<F&&T<H;T++)if(D[T]!==I[T])return Ba(D[T],I[T]);return T===F?Ba(o,I[T],-1):Ba(D[T],u,1)},Ba=function(o,u,F){if(o===u)return F;for(o=o.nextSibling;o;){if(o===u)return-1;o=o.nextSibling}return 1});r.getText=function(o){for(var u="",F,H=0;o[H];H++){F=o[H];F.nodeType===3||F.nodeType===4?(u+=F.nodeValue):F.nodeType!==8&&(u+=
r.getText(F.childNodes))}return u};(function(){var o=X.createElement("div"),u="script"+(new Date).getTime(),F=X.documentElement;o.innerHTML="<a name='"+u+"'/>";F.insertBefore(o,F.firstChild);X.getElementById(u)&&(w.find.ID=function(H,D,I){if(typeof D.getElementById!="undefined"&&!I)return(D=D.getElementById(H[1]))?D.id===H[1]||typeof D.getAttributeNode!="undefined"&&D.getAttributeNode("id").nodeValue===H[1]?[D]:f:[]},w.filter.ID=function(H,D){var I=typeof H.getAttributeNode!="undefined"&&H.getAttributeNode("id");
return H.nodeType===1&&I&&I.nodeValue===D});F.removeChild(o);F=o=null})();(function(){var o=X.createElement("div");o.appendChild(X.createComment(""));o.getElementsByTagName("*").length>0&&(w.find.TAG=function(u,F){var H=F.getElementsByTagName(u[1]);if(u[1]==="*"){for(var D=[],I=0;H[I];I++)H[I].nodeType===1&&D.push(H[I]);H=D}return H});o.innerHTML="<a href='#'></a>";o.firstChild&&typeof o.firstChild.getAttribute!="undefined"&&o.firstChild.getAttribute("href")!=="#"&&(w.attrHandle.href=function(u){return u.getAttribute("href",
2)});o=null})();X.querySelectorAll&&function(){var o=r,u=X.createElement("div");u.innerHTML="<p class='TEST'></p>";if(!u.querySelectorAll||u.querySelectorAll(".TEST").length!==0){r=function(H,D,I,T){D=D||X;if(!T&&!r.isXML(D)){var Z=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(H);if(Z&&(D.nodeType===1||D.nodeType===9)){if(Z[1])return ka(D.getElementsByTagName(H),I);if(Z[2]&&w.find.CLASS&&D.getElementsByClassName)return ka(D.getElementsByClassName(Z[2]),I)}if(D.nodeType===9){if(H==="body"&&D.body)return ka([D.body],
I);if(Z&&Z[3]){var ra=D.getElementById(Z[3]);if(!ra||!ra.parentNode)return ka([],I);if(ra.id===Z[3])return ka([ra],I)}try{return ka(D.querySelectorAll(H),I)}catch(Ma){}}else if(D.nodeType===1&&D.nodeName.toLowerCase()!=="object"){Z=D;var Ja=(ra=D.getAttribute("id"))||"__sizzle__",Sa=D.parentNode,v=/^\s*[+~]/.test(H);ra?(Ja=Ja.replace(/'/g,"\\$&")):D.setAttribute("id",Ja);v&&Sa&&(D=D.parentNode);try{if(!v||Sa)return ka(D.querySelectorAll("[id='"+Ja+"'] "+H),I)}catch(K){}finally{ra||Z.removeAttribute("id")}}}return o(H,
D,I,T)};for(var F in o)r[F]=o[F];u=null}}();(function(){var o=X.documentElement,u=o.matchesSelector||o.mozMatchesSelector||o.webkitMatchesSelector||o.msMatchesSelector;if(u){var F=!u.call(X.createElement("div"),"div"),H=false;try{u.call(X.documentElement,"[test!='']:sizzle")}catch(D){H=true}r.matchesSelector=function(I,T){T=T.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!r.isXML(I))try{if(H||!w.match.PSEUDO.test(T)&&!/!=/.test(T)){var Z=u.call(I,T);if(Z||!F||I.document&&I.document.nodeType!==11)return Z}}catch(ra){}return r(T,
null,null,[I]).length>0}}})();(function(){var o=X.createElement("div");o.innerHTML="<div class='test e'></div><div class='test'></div>";if(o.getElementsByClassName&&o.getElementsByClassName("e").length!==0){o.lastChild.className="e";if(o.getElementsByClassName("e").length!==1){w.order.splice(1,0,"CLASS");w.find.CLASS=function(u,F,H){if(typeof F.getElementsByClassName!="undefined"&&!H)return F.getElementsByClassName(u[1])};o=null}}})();X.documentElement.contains?(r.contains=function(o,u){return o!==
u&&(o.contains?o.contains(u):true)}):X.documentElement.compareDocumentPosition?(r.contains=function(o,u){return!!(o.compareDocumentPosition(u)&16)}):(r.contains=function(){return false});r.isXML=function(o){return(o=(o?o.ownerDocument||o:0).documentElement)?o.nodeName!=="HTML":false};var Ca=function(o,u){for(var F,H=[],D="",I=u.nodeType?[u]:u;F=w.match.PSEUDO.exec(o);){D+=F[0];o=o.replace(w.match.PSEUDO,"")}o=w.relative[o]?o+"*":o;F=0;for(var T=I.length;F<T;F++)r(o,I[F],H);return r.filter(D,H)};c.find=
r;c.expr=r.selectors;c.expr[":"]=c.expr.filters;c.unique=r.uniqueSort;c.text=r.getText;c.isXMLDoc=r.isXML;c.contains=r.contains})();var xb=/Until$/,yb=/^(?:parents|prevUntil|prevAll)/,zb=/,/,Ka=/^.[^:#\[\.,]*$/,lc=Array.prototype.slice,sb=c.expr.match.POS,ec={children:true,contents:true,next:true,prev:true};c.fn.extend({find:function(a){var d=this,b,e;if(typeof a!="string")return c(a).filter(function(){b=0;for(e=d.length;b<e;b++)if(c.contains(d[b],this))return true});var g=this.pushStack("","find",
a),i,k,n;b=0;for(e=this.length;b<e;b++){i=g.length;c.find(a,this[b],g);if(b>0)for(k=i;k<g.length;k++)for(n=0;n<i;n++)if(g[n]===g[k]){g.splice(k--,1);break}}return g},has:function(a){var d=c(a);return this.filter(function(){for(var b=0,e=d.length;b<e;b++)if(c.contains(this,d[b]))return true})},not:function(a){return this.pushStack(E(this,a,false),"not",a)},filter:function(a){return this.pushStack(E(this,a,true),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?c.filter(a,this).length>0:this.filter(a).length>
0)},closest:function(a,d){var b=[],e,g,i=this[0];if(c.isArray(a)){var k,n={},p=1;if(i&&a.length){e=0;for(g=a.length;e<g;e++){k=a[e];n[k]||(n[k]=sb.test(k)?c(k,d||this.context):k)}for(;i&&i.ownerDocument&&i!==d;){for(k in n){e=n[k];(e.jquery?e.index(i)>-1:c(i).is(e))&&b.push({selector:k,elem:i,level:p})}i=i.parentNode;p++}}return b}k=sb.test(a)||typeof a!="string"?c(a,d||this.context):0;e=0;for(g=this.length;e<g;e++)for(i=this[e];i;){if(k?k.index(i)>-1:c.find.matchesSelector(i,a)){b.push(i);break}i=
i.parentNode;if(!i||!i.ownerDocument||i===d||i.nodeType===11)break}b=b.length>1?c.unique(b):b;return this.pushStack(b,"closest",a)},index:function(a){if(!a||typeof a=="string")return c.inArray(this[0],a?c(a):this.parent().children());return c.inArray(a.jquery?a[0]:a,this)},add:function(a,d){var b=typeof a=="string"?c(a,d):c.makeArray(a&&a.nodeType?[a]:a),e=c.merge(this.get(),b);return this.pushStack(!b[0]||!b[0].parentNode||b[0].parentNode.nodeType===11||!e[0]||!e[0].parentNode||e[0].parentNode.nodeType===
11?e:c.unique(e))},andSelf:function(){return this.add(this.prevObject)}});c.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return c.dir(a,"parentNode")},parentsUntil:function(a,d,b){return c.dir(a,"parentNode",b)},next:function(a){return c.nth(a,2,"nextSibling")},prev:function(a){return c.nth(a,2,"previousSibling")},nextAll:function(a){return c.dir(a,"nextSibling")},prevAll:function(a){return c.dir(a,"previousSibling")},nextUntil:function(a,d,b){return c.dir(a,
"nextSibling",b)},prevUntil:function(a,d,b){return c.dir(a,"previousSibling",b)},siblings:function(a){return c.sibling(a.parentNode.firstChild,a)},children:function(a){return c.sibling(a.firstChild)},contents:function(a){return c.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes)}},function(a,d){c.fn[a]=function(b,e){var g=c.map(this,d,b),i=lc.call(arguments);xb.test(a)||(e=b);e&&typeof e=="string"&&(g=c.filter(e,g));g=this.length>1&&!ec[a]?c.unique(g):g;(this.length>
1||zb.test(e))&&yb.test(a)&&(g=g.reverse());return this.pushStack(g,a,i.join(","))}});c.extend({filter:function(a,d,b){b&&(a=":not("+a+")");return d.length===1?c.find.matchesSelector(d[0],a)?[d[0]]:[]:c.find.matches(a,d)},dir:function(a,d,b){var e=[];for(a=a[d];a&&a.nodeType!==9&&(b===f||a.nodeType!==1||!c(a).is(b));){a.nodeType===1&&e.push(a);a=a[d]}return e},nth:function(a,d,b){for(var e=0;a;a=a[b])if(a.nodeType===1&&++e===(d||1))break;return a},sibling:function(a,d){for(var b=[];a;a=a.nextSibling)a.nodeType===
1&&a!==d&&b.push(a);return b}});var Tb=/ jQuery\d+="(?:\d+|null)"/g,Jb=/^\s+/,Ub=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Vb=/<([\w:]+)/,Wb=/<tbody/i,fc=/<|&#?\w+;/,ab=/<(?:script|object|embed|option|style)/i,tb=/checked\s*(?:[^=]|=\s*.checked.)/i,gc=/\/(java|ecma)script/i,dc=/^\s*<!(?:\[CDATA\[|\-\-)/,Va={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};Va.optgroup=Va.option;Va.tbody=Va.tfoot=Va.colgroup=Va.caption=Va.thead;Va.th=Va.td;c.support.htmlSerialize||(Va._default=[1,"div<div>","</div>"]);c.fn.extend({text:function(a){if(c.isFunction(a))return this.each(function(d){var b=c(this);b.text(a.call(this,d,b.text()))});if(typeof a!="object"&&a!==f)return this.empty().append((this[0]&&
this[0].ownerDocument||X).createTextNode(a));return c.text(this)},wrapAll:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapAll(a.call(this,b))});if(this[0]){var d=c(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&d.insertBefore(this[0]);d.map(function(){for(var b=this;b.firstChild&&b.firstChild.nodeType===1;)b=b.firstChild;return b}).append(this)}return this},wrapInner:function(a){if(c.isFunction(a))return this.each(function(d){c(this).wrapInner(a.call(this,d))});
return this.each(function(){var d=c(this),b=d.contents();b.length?b.wrapAll(a):d.append(a)})},wrap:function(a){return this.each(function(){c(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,
this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(d){this.parentNode.insertBefore(d,this)});if(arguments.length){var a=c(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(d){this.parentNode.insertBefore(d,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,
c(arguments[0]).toArray());return a}},remove:function(a,d){for(var b=0,e;(e=this[b])!=null;b++)if(!a||c.filter(a,[e]).length){!d&&e.nodeType===1&&(c.cleanData(e.getElementsByTagName("*")),c.cleanData([e]));e.parentNode&&e.parentNode.removeChild(e)}return this},empty:function(){for(var a=0,d;(d=this[a])!=null;a++)for(d.nodeType===1&&c.cleanData(d.getElementsByTagName("*"));d.firstChild;)d.removeChild(d.firstChild);return this},clone:function(a,d){a=a==null?false:a;d=d==null?a:d;return this.map(function(){return c.clone(this,
a,d)})},html:function(a){if(a===f)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Tb,""):null;if(typeof a=="string"&&!ab.test(a)&&(c.support.leadingWhitespace||!Jb.test(a))&&!Va[(Vb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ub,"<$1></$2>");try{for(var d=0,b=this.length;d<b;d++)this[d].nodeType===1&&(c.cleanData(this[d].getElementsByTagName("*")),this[d].innerHTML=a)}catch(e){this.empty().append(a)}}else c.isFunction(a)?this.each(function(g){var i=c(this);i.html(a.call(this,g,
i.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(c.isFunction(a))return this.each(function(d){var b=c(this),e=b.html();b.replaceWith(a.call(this,d,e))});typeof a!="string"&&(a=c(a).detach());return this.each(function(){var d=this.nextSibling,b=this.parentNode;c(this).remove();d?c(d).before(a):c(b).append(a)})}return this.length?this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,true)},domManip:function(a,
d,b){var e,g,i,k=a[0],n=[];if(!c.support.checkClone&&arguments.length===3&&typeof k=="string"&&tb.test(k))return this.each(function(){c(this).domManip(a,d,b,true)});if(c.isFunction(k))return this.each(function(w){var B=c(this);a[0]=k.call(this,w,d?B.html():f);B.domManip(a,d,b)});if(this[0]){i=k&&k.parentNode;c.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?(e={fragment:i}):(e=c.buildFragment(a,this,n));i=e.fragment;i.childNodes.length===1?(g=i=i.firstChild):(g=i.firstChild);
if(g){d=d&&c.nodeName(g,"tr");g=0;for(var p=this.length,r=p-1;g<p;g++)b.call(d?c.nodeName(this[g],"table")?this[g].getElementsByTagName("tbody")[0]||this[g].appendChild(this[g].ownerDocument.createElement("tbody")):this[g]:this[g],e.cacheable||p>1&&g<r?c.clone(i,true,true):i)}n.length&&c.each(n,la)}return this}});c.buildFragment=function(a,d,b){var e,g,i,k;d&&d[0]&&(k=d[0].ownerDocument||d[0]);k.createDocumentFragment||(k=X);a.length===1&&typeof a[0]=="string"&&a[0].length<512&&k===X&&a[0].charAt(0)===
"<"&&!ab.test(a[0])&&(c.support.checkClone||!tb.test(a[0]))&&(g=true,i=c.fragments[a[0]],i&&i!==1&&(e=i));e||(e=k.createDocumentFragment(),c.clean(a,k,e,b));g&&(c.fragments[a[0]]=i?e:1);return{fragment:e,cacheable:g}};c.fragments={};c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,d){c.fn[a]=function(b){var e=[];b=c(b);var g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&b.length===1){b[d](this[0]);
return this}g=0;for(var i=b.length;g<i;g++){var k=(g>0?this.clone(true):this).get();c(b[g])[d](k);e=e.concat(k)}return this.pushStack(e,a,b.selector)}});c.extend({clone:function(a,d,b){var e=a.cloneNode(true),g,i,k;if((!c.support.noCloneEvent||!c.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!c.isXMLDoc(a)){q(a,e);g=l(a);i=l(e);for(k=0;g[k];++k)q(g[k],i[k])}if(d){x(a,e);if(b){g=l(a);i=l(e);for(k=0;g[k];++k)x(g[k],i[k])}}return e},clean:function(a,d,b,e){d=d||X;typeof d.createElement==
"undefined"&&(d=d.ownerDocument||d[0]&&d[0].ownerDocument||X);for(var g=[],i,k=0,n;(n=a[k])!=null;k++){typeof n=="number"&&(n+="");if(n){if(typeof n=="string")if(fc.test(n)){n=n.replace(Ub,"<$1></$2>");i=(Vb.exec(n)||["",""])[1].toLowerCase();var p=Va[i]||Va._default,r=p[0],w=d.createElement("div");for(w.innerHTML=p[1]+n+p[2];r--;)w=w.lastChild;if(!c.support.tbody){r=Wb.test(n);p=i==="table"&&!r?w.firstChild&&w.firstChild.childNodes:p[1]==="<table>"&&!r?w.childNodes:[];for(i=p.length-1;i>=0;--i)c.nodeName(p[i],
"tbody")&&!p[i].childNodes.length&&p[i].parentNode.removeChild(p[i])}!c.support.leadingWhitespace&&Jb.test(n)&&w.insertBefore(d.createTextNode(Jb.exec(n)[0]),w.firstChild);n=w.childNodes}else n=d.createTextNode(n);var B;if(!c.support.appendChecked)if(n[0]&&typeof(B=n.length)=="number")for(i=0;i<B;i++)pa(n[i]);else pa(n);n.nodeType?g.push(n):(g=c.merge(g,n))}}if(b){a=function(P){return!P.type||gc.test(P.type)};for(k=0;g[k];k++)if(e&&c.nodeName(g[k],"script")&&(!g[k].type||g[k].type.toLowerCase()===
"text/javascript"))e.push(g[k].parentNode?g[k].parentNode.removeChild(g[k]):g[k]);else{if(g[k].nodeType===1){d=c.grep(g[k].getElementsByTagName("script"),a);g.splice.apply(g,[k+1,0].concat(d))}b.appendChild(g[k])}}return g},cleanData:function(a){for(var d,b,e=c.cache,g=c.expando,i=c.event.special,k=c.support.deleteExpando,n=0,p;(p=a[n])!=null;n++)if(!(p.nodeName&&c.noData[p.nodeName.toLowerCase()]))if(b=p[c.expando]){if((d=e[b]&&e[b][g])&&d.events){for(var r in d.events)i[r]?c.event.remove(p,r):c.removeEvent(p,
r,d.handle);d.handle&&(d.handle.elem=null)}k?delete p[c.expando]:p.removeAttribute&&p.removeAttribute(c.expando);delete e[b]}}});var Xb=/alpha\([^)]*\)/i,hc=/opacity=([^)]*)/,mc=/([A-Z]|^ms)/g,Kb=/^-?\d+(?:px)?$/i,Yb=/^-?\d/,Zb=/^[+\-]=/,ya=/[^+\-\.\de]+/g,ic={position:"absolute",visibility:"hidden",display:"block"},ma=["Left","Right"],Qb=["Top","Bottom"],fb,mb,va;c.fn.css=function(a,d){if(arguments.length===2&&d===f)return this;return c.access(this,a,d,true,function(b,e,g){return g!==f?c.style(b,
e,g):c.css(b,e)})};c.extend({cssHooks:{opacity:{get:function(a,d){if(d){var b=fb(a,"opacity","opacity");return b===""?"1":b}return a.style.opacity}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":c.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,d,b,e){if(a&&a.nodeType!==3&&a.nodeType!==8&&a.style){var g,i=c.camelCase(d),k=a.style,n=c.cssHooks[i];d=c.cssProps[i]||i;if(b===f){if(n&&"get"in n&&(g=
n.get(a,false,e))!==f)return g;return k[d]}e=typeof b;if(!(e==="number"&&isNaN(b)||b==null)){e==="string"&&Zb.test(b)&&(b=+b.replace(ya,"")+parseFloat(c.css(a,d)),e="number");e==="number"&&!c.cssNumber[i]&&(b+="px");if(!n||!("set"in n)||(b=n.set(a,b))!==f)try{k[d]=b}catch(p){}}}},css:function(a,d,b){var e,g;d=c.camelCase(d);g=c.cssHooks[d];d=c.cssProps[d]||d;d==="cssFloat"&&(d="float");if(g&&"get"in g&&(e=g.get(a,true,b))!==f)return e;if(fb)return fb(a,d)},swap:function(a,d,b){var e={};for(var g in d){e[g]=
a.style[g];a.style[g]=d[g]}b.call(a);for(g in d)a.style[g]=e[g]}});c.curCSS=c.css;c.each(["height","width"],function(a,d){c.cssHooks[d]={get:function(b,e,g){var i;if(e){if(b.offsetWidth!==0)return W(b,d,g);c.swap(b,ic,function(){i=W(b,d,g)});return i}},set:function(b,e){if(!Kb.test(e))return e;e=parseFloat(e);if(e>=0)return e+"px"}}});c.support.opacity||(c.cssHooks.opacity={get:function(a,d){return hc.test((d&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":
d?"1":""},set:function(a,d){var b=a.style,e=a.currentStyle;b.zoom=1;var g=c.isNaN(d)?"":"alpha(opacity="+d*100+")";e=e&&e.filter||b.filter||"";b.filter=Xb.test(e)?e.replace(Xb,g):e+" "+g}});c(function(){c.support.reliableMarginRight||(c.cssHooks.marginRight={get:function(a,d){var b;c.swap(a,{display:"inline-block"},function(){d?(b=fb(a,"margin-right","marginRight")):(b=a.style.marginRight)});return b}})});X.defaultView&&X.defaultView.getComputedStyle&&(mb=function(a,d){var b,e;d=d.replace(mc,"-$1").toLowerCase();
if(!(e=a.ownerDocument.defaultView))return f;if(e=e.getComputedStyle(a,null)){b=e.getPropertyValue(d);b===""&&!c.contains(a.ownerDocument.documentElement,a)&&(b=c.style(a,d))}return b});X.documentElement.currentStyle&&(va=function(a,d){var b,e=a.currentStyle&&a.currentStyle[d],g=a.runtimeStyle&&a.runtimeStyle[d],i=a.style;!Kb.test(e)&&Yb.test(e)&&(b=i.left,g&&(a.runtimeStyle.left=a.currentStyle.left),i.left=d==="fontSize"?"1em":e||0,e=i.pixelLeft+"px",i.left=b,g&&(a.runtimeStyle.left=g));return e===
""?"auto":e});fb=mb||va;c.expr&&c.expr.filters&&(c.expr.filters.hidden=function(a){var d=a.offsetHeight;return a.offsetWidth===0&&d===0||!c.support.reliableHiddenOffsets&&(a.style.display||c.css(a,"display"))==="none"},c.expr.filters.visible=function(a){return!c.expr.filters.hidden(a)});var Ab=/%20/g,eb=/\[\]$/,Lb=/\r?\n/g,nb=/#.*$/,Mb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,$b=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ea=/^(?:GET|HEAD)$/,Ya=/^\/\//,
ob=/\?/,Qa=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ac=/^(?:select|textarea)/i,cc=/\s+/,bc=/([?&])_=[^&]*/,Ta=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,V=c.fn.load,cb={},Za={},Wa,N;try{Wa=U.href}catch(hb){Wa=X.createElement("a");Wa.href="";Wa=Wa.href}N=Ta.exec(Wa.toLowerCase())||[];c.fn.extend({load:function(a,d,b){if(typeof a!="string"&&V)return V.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}e="GET";d&&
(c.isFunction(d)?(b=d,d=f):typeof d=="object"&&(d=c.param(d,c.ajaxSettings.traditional),e="POST"));var i=this;c.ajax({url:a,type:e,dataType:"html",data:d,complete:function(k,n,p){p=k.responseText;k.isResolved()&&(k.done(function(r){p=r}),i.html(g?c("<div>").append(p.replace(Qa,"")).find(g):p));b&&i.each(b,[p,n,k])}});return this},serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this}).filter(function(){return this.name&&
!this.disabled&&(this.checked||ac.test(this.nodeName)||$b.test(this.type))}).map(function(a,d){var b=c(this).val();return b==null?null:c.isArray(b)?c.map(b,function(e){return{name:d.name,value:e.replace(Lb,"\r\n")}}):{name:d.name,value:b.replace(Lb,"\r\n")}}).get()}});c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,d){c.fn[d]=function(b){return this.bind(d,b)}});c.each(["get","post"],function(a,d){c[d]=function(b,e,g,i){c.isFunction(e)&&(i=i||g,g=e,e=
f);return c.ajax({type:d,url:b,data:e,success:g,dataType:i})}});c.extend({getScript:function(a,d){return c.get(a,f,d,"script")},getJSON:function(a,d,b){return c.get(a,d,b,"json")},ajaxSetup:function(a,d){d?c.extend(true,a,c.ajaxSettings,d):(d=a,a=c.extend(true,c.ajaxSettings,d));for(var b in{context:1,url:1})b in d?(a[b]=d[b]):b in c.ajaxSettings&&(a[b]=c.ajaxSettings[b]);return a},ajaxSettings:{url:Wa,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|widget):$/.test(N[1]),global:true,type:"GET",
contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":h.String,"text html":true,"text json":c.parseJSON,"text xml":c.parseXML}},ajaxPrefilter:Q(cb),ajaxTransport:Q(Za),ajax:function(a,d){function b(D,I,T,Z){if(Ba!==2){Ba=2;Ia&&clearTimeout(Ia);
ka=f;P=Z||"";u.readyState=D?4:0;var ra,Ma,Ja;if(T){Z=e;var Sa=u,v=Z.contents,K=Z.dataTypes,da=Z.responseFields,Y,qa,Aa,Da;for(qa in da)qa in T&&(Sa[da[qa]]=T[qa]);for(;K[0]==="*";){K.shift();Y===f&&(Y=Z.mimeType||Sa.getResponseHeader("content-type"))}if(Y)for(qa in v)if(v[qa]&&v[qa].test(Y)){K.unshift(qa);break}if(K[0]in T)Aa=K[0];else{for(qa in T){if(!K[0]||Z.converters[qa+" "+K[0]]){Aa=qa;break}Da||(Da=qa)}Aa=Aa||Da}if(Aa){Aa!==K[0]&&K.unshift(Aa);T=T[Aa]}else T=void 0}else T=f;T=T;if(D>=200&&D<
300||D===304){if(e.ifModified){if(Y=u.getResponseHeader("Last-Modified"))c.lastModified[r]=Y;if(Y=u.getResponseHeader("Etag"))c.etag[r]=Y}if(D===304){I="notmodified";ra=true}else try{Y=e;T=T;Y.dataFilter&&(T=Y.dataFilter(T,Y.dataType));var Fa=Y.dataTypes;qa={};var vb,wb,oc=Fa.length,jc,Bb=Fa[0],Nb,nc,Cb,Ib,Ob;for(vb=1;vb<oc;vb++){if(vb===1)for(wb in Y.converters)typeof wb=="string"&&(qa[wb.toLowerCase()]=Y.converters[wb]);Nb=Bb;Bb=Fa[vb];if(Bb==="*")Bb=Nb;else if(Nb!=="*"&&Nb!==Bb){nc=Nb+" "+Bb;Cb=
qa[nc]||qa["* "+Bb];if(!Cb){Ob=f;for(Ib in qa){jc=Ib.split(" ");if(jc[0]===Nb||jc[0]==="*")if(Ob=qa[jc[1]+" "+Bb]){Ib=qa[Ib];Ib===true?(Cb=Ob):Ob===true&&(Cb=Ib);break}}}!Cb&&!Ob&&c.error("No conversion from "+nc.replace(" "," to "));Cb!==true&&(T=Cb?Cb(T):Ob(Ib(T)))}}Ma=T;I="success";ra=true}catch(pc){I="parsererror";Ja=pc}}else{Ja=I;if(!I||D){I="error";D<0&&(D=0)}}u.status=D;u.statusText=I;ra?k.resolveWith(g,[Ma,I,u]):k.rejectWith(g,[u,I,Ja]);u.statusCode(p);p=f;Ca&&i.trigger("ajax"+(ra?"Success":
"Error"),[u,e,ra?Ma:Ja]);n.resolveWith(g,[u,I]);Ca&&(i.trigger("ajaxComplete",[u,e]),--c.active||c.event.trigger("ajaxStop"))}}typeof a=="object"&&(d=a,a=f);d=d||{};var e=c.ajaxSetup({},d),g=e.context||e,i=g!==e&&(g.nodeType||g instanceof c)?c(g):c.event,k=c.Deferred(),n=c._Deferred(),p=e.statusCode||{},r,w={},B={},P,ba,ka,Ia,za,Ba=0,Ca,o,u={readyState:0,setRequestHeader:function(D,I){if(!Ba){var T=D.toLowerCase();D=B[T]=B[T]||D;w[D]=I}return this},getAllResponseHeaders:function(){return Ba===2?P:
null},getResponseHeader:function(D){var I;if(Ba===2){if(!ba)for(ba={};I=Mb.exec(P);)ba[I[1].toLowerCase()]=I[2];I=ba[D.toLowerCase()]}return I===f?null:I},overrideMimeType:function(D){Ba||(e.mimeType=D);return this},abort:function(D){D=D||"abort";ka&&ka.abort(D);b(0,D);return this}};k.promise(u);u.success=u.done;u.error=u.fail;u.complete=n.done;u.statusCode=function(D){if(D){var I;if(Ba<2)for(I in D)p[I]=[p[I],D[I]];else{I=D[u.status];u.then(I,I)}}return this};e.url=((a||e.url)+"").replace(nb,"").replace(Ya,
N[1]+"//");e.dataTypes=c.trim(e.dataType||"*").toLowerCase().split(cc);e.crossDomain==null&&(za=Ta.exec(e.url.toLowerCase()),e.crossDomain=!(!za||za[1]==N[1]&&za[2]==N[2]&&(za[3]||(za[1]==="http:"?80:443))==(N[3]||(N[1]==="http:"?80:443))));e.data&&e.processData&&typeof e.data!="string"&&(e.data=c.param(e.data,e.traditional));y(cb,e,d,u);if(Ba===2)return false;Ca=e.global;e.type=e.type.toUpperCase();e.hasContent=!Ea.test(e.type);Ca&&c.active++===0&&c.event.trigger("ajaxStart");if(!e.hasContent){e.data&&
(e.url+=(ob.test(e.url)?"&":"?")+e.data);r=e.url;if(e.cache===false){za=c.now();var F=e.url.replace(bc,"$1_="+za);e.url=F+(F===e.url?(ob.test(e.url)?"&":"?")+"_="+za:"")}}(e.data&&e.hasContent&&e.contentType!==false||d.contentType)&&u.setRequestHeader("Content-Type",e.contentType);e.ifModified&&(r=r||e.url,c.lastModified[r]&&u.setRequestHeader("If-Modified-Since",c.lastModified[r]),c.etag[r]&&u.setRequestHeader("If-None-Match",c.etag[r]));u.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?
e.accepts[e.dataTypes[0]]+(e.dataTypes[0]!=="*"?", */*; q=0.01":""):e.accepts["*"]);for(o in e.headers)u.setRequestHeader(o,e.headers[o]);if(e.beforeSend&&(e.beforeSend.call(g,u,e)===false||Ba===2)){u.abort();return false}for(o in{success:1,error:1,complete:1})u[o](e[o]);if(ka=y(Za,e,d,u)){u.readyState=1;Ca&&i.trigger("ajaxSend",[u,e]);e.async&&e.timeout>0&&(Ia=setTimeout(function(){u.abort("timeout")},e.timeout));try{Ba=1;ka.send(w,b)}catch(H){status<2?b(-1,H):c.error(H)}}else b(-1,"No Transport");
return u},param:function(a,d){var b=[],e=function(i,k){k=c.isFunction(k)?k():k;b[b.length]=encodeURIComponent(i)+"="+encodeURIComponent(k)};d===f&&(d=c.ajaxSettings.traditional);if(c.isArray(a)||a.jquery&&!c.isPlainObject(a))c.each(a,function(){e(this.name,this.value)});else for(var g in a)C(g,a[g],d,e);return b.join("&").replace(Ab,"+")}});c.extend({active:0,lastModified:{},etag:{}});var ub=c.now(),Db=/(\=)\?(&|$)|\?\?/i;c.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return c.expando+"_"+
ub++}});c.ajaxPrefilter("json jsonp",function(a,d,b){d=a.contentType==="application/x-www-form-urlencoded"&&typeof a.data=="string";if(a.dataTypes[0]==="jsonp"||a.jsonp!==false&&(Db.test(a.url)||d&&Db.test(a.data))){var e,g=a.jsonpCallback=c.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,i=h[g],k=a.url,n=a.data,p="$1"+g+"$2";a.jsonp!==false&&(k=k.replace(Db,p),a.url===k&&(d&&(n=n.replace(Db,p)),a.data===n&&(k+=(/\?/.test(k)?"&":"?")+a.jsonp+"="+g)));a.url=k;a.data=n;h[g]=function(r){e=
[r]};b.always(function(){h[g]=i;e&&c.isFunction(i)&&h[g](e[0])});a.converters["script json"]=function(){e||c.error(g+" was not called");return e[0]};a.dataTypes[0]="json";return"script"}});c.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){c.globalEval(a);return a}}});c.ajaxPrefilter("script",function(a){a.cache===f&&(a.cache=false);a.crossDomain&&
(a.type="GET",a.global=false)});c.ajaxTransport("script",function(a){if(a.crossDomain){var d,b=X.head||X.getElementsByTagName("head")[0]||X.documentElement;return{send:function(e,g){d=X.createElement("script");d.async="async";a.scriptCharset&&(d.charset=a.scriptCharset);d.src=a.url;d.onload=d.onreadystatechange=function(i,k){if(k||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null;b&&d.parentNode&&b.removeChild(d);d=f;k||g(200,"success")}};b.insertBefore(d,b.firstChild)},
abort:function(){d&&d.onload(0,1)}}}});var bb=h.ActiveXObject?function(){for(var a in pb)pb[a](0,1)}:false,Ua=0,pb;c.ajaxSettings.xhr=h.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&J()))a:{try{a=new h.ActiveXObject("Microsoft.XMLHTTP");break a}catch(d){}a=void 0}return a}:J;(function(a){c.extend(c.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})})(c.ajaxSettings.xhr());c.support.ajax&&c.ajaxTransport(function(a){if(!a.crossDomain||c.support.cors){var d;return{send:function(b,e){var g=a.xhr(),
i,k;a.username?g.open(a.type,a.url,a.async,a.username,a.password):g.open(a.type,a.url,a.async);if(a.xhrFields)for(k in a.xhrFields)g[k]=a.xhrFields[k];a.mimeType&&g.overrideMimeType&&g.overrideMimeType(a.mimeType);!a.crossDomain&&!b["X-Requested-With"]&&(b["X-Requested-With"]="XMLHttpRequest");try{for(k in b)g.setRequestHeader(k,b[k])}catch(n){}g.send(a.hasContent&&a.data||null);d=function(p,r){var w,B,P,ba,ka;try{if(d&&(r||g.readyState===4)){d=f;i&&(g.onreadystatechange=c.noop,bb&&delete pb[i]);
if(r)g.readyState!==4&&g.abort();else{w=g.status;P=g.getAllResponseHeaders();ba={};(ka=g.responseXML)&&ka.documentElement&&(ba.xml=ka);ba.text=g.responseText;try{B=g.statusText}catch(Ia){B=""}!w&&a.isLocal&&!a.crossDomain?(w=ba.text?200:404):w===1223&&(w=204)}}}catch(za){r||e(-1,za)}ba&&e(w,B,ba,P)};!a.async||g.readyState===4?d():(i=++Ua,bb&&(pb||(pb={},c(h).unload(bb)),pb[i]=d),g.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var db={},Xa,Ha,ib=/^(?:toggle|show|hide)$/,kc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,
jb,Pa=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],qb,Eb=h.webkitRequestAnimationFrame||h.mozRequestAnimationFrame||h.oRequestAnimationFrame;c.fn.extend({show:function(a,d,b){var e;if(a||a===0)return this.animate(s("show",3),a,d,b);d=0;for(b=this.length;d<b;d++){a=this[d];a.style&&(e=a.style.display,!c._data(a,"olddisplay")&&e==="none"&&(e=a.style.display=""),e===""&&c.css(a,"display")==="none"&&
c._data(a,"olddisplay",m(a.nodeName)))}for(d=0;d<b;d++){a=this[d];if(a.style){e=a.style.display;if(e===""||e==="none")a.style.display=c._data(a,"olddisplay")||""}}return this},hide:function(a,d,b){if(a||a===0)return this.animate(s("hide",3),a,d,b);a=0;for(d=this.length;a<d;a++)if(this[a].style){b=c.css(this[a],"display");b!=="none"&&!c._data(this[a],"olddisplay")&&c._data(this[a],"olddisplay",b)}for(a=0;a<d;a++)this[a].style&&(this[a].style.display="none");return this},_toggle:c.fn.toggle,toggle:function(a,
d,b){var e=typeof a=="boolean";c.isFunction(a)&&c.isFunction(d)?this._toggle.apply(this,arguments):a==null||e?this.each(function(){var g=e?a:c(this).is(":hidden");c(this)[g?"show":"hide"]()}):this.animate(s("toggle",3),a,d,b);return this},fadeTo:function(a,d,b,e){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:d},a,b,e)},animate:function(a,d,b,e){var g=c.speed(d,b,e);if(c.isEmptyObject(a))return this.each(g.complete,[false]);a=c.extend({},a);return this[g.queue===false?
"each":"queue"](function(){g.queue===false&&c._mark(this);var i=c.extend({},g),k=this.nodeType===1,n=k&&c(this).is(":hidden"),p,r,w,B,P,ba,ka,Ia;i.animatedProperties={};for(w in a){p=c.camelCase(w);w!==p&&(a[p]=a[w],delete a[w]);r=a[p];c.isArray(r)?(i.animatedProperties[p]=r[1],r=a[p]=r[0]):(i.animatedProperties[p]=i.specialEasing&&i.specialEasing[p]||i.easing||"swing");if(r==="hide"&&n||r==="show"&&!n)return i.complete.call(this);k&&(p==="height"||p==="width")&&(i.overflow=[this.style.overflow,this.style.overflowX,
this.style.overflowY],c.css(this,"display")==="inline"&&c.css(this,"float")==="none"&&(c.support.inlineBlockNeedsLayout?(B=m(this.nodeName),B==="inline"?(this.style.display="inline-block"):(this.style.display="inline",this.style.zoom=1)):(this.style.display="inline-block")))}i.overflow!=null&&(this.style.overflow="hidden");for(w in a){k=new c.fx(this,i,w);r=a[w];ib.test(r)?k[r==="toggle"?n?"show":"hide":r]():(P=kc.exec(r),ba=k.cur(),P?(ka=parseFloat(P[2]),Ia=P[3]||(c.cssNumber[w]?"":"px"),Ia!=="px"&&
(c.style(this,w,(ka||1)+Ia),ba=(ka||1)/k.cur()*ba,c.style(this,w,ba+Ia)),P[1]&&(ka=(P[1]==="-="?-1:1)*ka+ba),k.custom(ba,ka,Ia)):k.custom(ba,r,""))}return true})},stop:function(a,d){a&&this.queue([]);this.each(function(){var b=c.timers,e=b.length;for(d||c._unmark(true,this);e--;)b[e].elem===this&&(d&&b[e](true),b.splice(e,1))});d||this.dequeue();return this}});c.each({slideDown:s("show",1),slideUp:s("hide",1),slideToggle:s("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},
function(a,d){c.fn[a]=function(b,e,g){return this.animate(d,b,e,g)}});c.extend({speed:function(a,d,b){var e=a&&typeof a=="object"?c.extend({},a):{complete:b||!b&&d||c.isFunction(a)&&a,duration:a,easing:b&&d||d&&!c.isFunction(d)&&d};e.duration=c.fx.off?0:typeof e.duration=="number"?e.duration:e.duration in c.fx.speeds?c.fx.speeds[e.duration]:c.fx.speeds._default;e.old=e.complete;e.complete=function(g){c.isFunction(e.old)&&e.old.call(this);e.queue!==false?c.dequeue(this):g!==false&&c._unmark(this)};
return e},easing:{linear:function(a,d,b,e){return b+e*a},swing:function(a,d,b,e){return(-Math.cos(a*Math.PI)/2+0.5)*e+b}},timers:[],fx:function(a,d,b){this.options=d;this.elem=a;this.prop=b;d.orig=d.orig||{}}});c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(c.fx.step[this.prop]||c.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,d=c.css(this.elem,
this.prop);return isNaN(a=parseFloat(d))?!d||d==="auto"?0:d:a},custom:function(a,d,b){function e(n){return g.step(n)}var g=this,i=c.fx,k;this.startTime=qb||z();this.start=a;this.end=d;this.unit=b||this.unit||(c.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;e.elem=this.elem;e()&&c.timers.push(e)&&!jb&&(Eb?(jb=true,k=function(){jb&&(Eb(k),i.tick())},Eb(k)):(jb=setInterval(i.tick,i.interval)))},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.show=
true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());c(this.elem).show()},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a){var d=qb||z(),b=true,e=this.elem,g=this.options,i,k;if(a||d>=g.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();g.animatedProperties[this.prop]=true;for(i in g.animatedProperties)g.animatedProperties[i]!==true&&(b=false);if(b){g.overflow!=
null&&!c.support.shrinkWrapBlocks&&c.each(["","X","Y"],function(p,r){e.style["overflow"+r]=g.overflow[p]});g.hide&&c(e).hide();if(g.hide||g.show)for(var n in g.animatedProperties)c.style(e,n,g.orig[n]);g.complete.call(e)}return false}g.duration==Infinity?(this.now=d):(k=d-this.startTime,this.state=k/g.duration,this.pos=c.easing[g.animatedProperties[this.prop]](this.state,k,0,1,g.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return true}};c.extend(c.fx,{tick:function(){for(var a=
c.timers,d=0;d<a.length;++d)a[d]()||a.splice(d--,1);a.length||c.fx.stop()},interval:13,stop:function(){clearInterval(jb);jb=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?(a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit):(a.elem[a.prop]=a.now)}}});c.expr&&c.expr.filters&&(c.expr.filters.animated=function(a){return c.grep(c.timers,function(d){return a===
d.elem}).length});var $a=/^t(?:able|d|h)$/i,Pb=/^(?:body|html)$/i;"getBoundingClientRect"in X.documentElement?(c.fn.offset=function(a){var d=this[0],b;if(a)return this.each(function(k){c.offset.setOffset(this,a,k)});if(!d||!d.ownerDocument)return null;if(d===d.ownerDocument.body)return c.offset.bodyOffset(d);try{b=d.getBoundingClientRect()}catch(e){}var g=d.ownerDocument,i=g.documentElement;if(!b||!c.contains(i,d))return b?{top:b.top,left:b.left}:{top:0,left:0};d=g.body;g=j(g);return{top:b.top+(g.pageYOffset||
c.support.boxModel&&i.scrollTop||d.scrollTop)-(i.clientTop||d.clientTop||0),left:b.left+(g.pageXOffset||c.support.boxModel&&i.scrollLeft||d.scrollLeft)-(i.clientLeft||d.clientLeft||0)}}):(c.fn.offset=function(a){var d=this[0];if(a)return this.each(function(w){c.offset.setOffset(this,a,w)});if(!d||!d.ownerDocument)return null;if(d===d.ownerDocument.body)return c.offset.bodyOffset(d);c.offset.initialize();var b,e=d.offsetParent,g=d,i=d.ownerDocument,k=i.documentElement,n=i.body;b=(i=i.defaultView)?
i.getComputedStyle(d,null):d.currentStyle;for(var p=d.offsetTop,r=d.offsetLeft;(d=d.parentNode)&&d!==n&&d!==k;){if(c.offset.supportsFixedPosition&&b.position==="fixed")break;b=i?i.getComputedStyle(d,null):d.currentStyle;p-=d.scrollTop;r-=d.scrollLeft;d===e&&(p+=d.offsetTop,r+=d.offsetLeft,c.offset.doesNotAddBorder&&(!c.offset.doesAddBorderForTableAndCells||!$a.test(d.nodeName))&&(p+=parseFloat(b.borderTopWidth)||0,r+=parseFloat(b.borderLeftWidth)||0),g=e,e=d.offsetParent);c.offset.subtractsBorderForOverflowNotVisible&&
b.overflow!=="visible"&&(p+=parseFloat(b.borderTopWidth)||0,r+=parseFloat(b.borderLeftWidth)||0);b=b}if(b.position==="relative"||b.position==="static"){p+=n.offsetTop;r+=n.offsetLeft}c.offset.supportsFixedPosition&&b.position==="fixed"&&(p+=Math.max(k.scrollTop,n.scrollTop),r+=Math.max(k.scrollLeft,n.scrollLeft));return{top:p,left:r}});c.offset={initialize:function(){var a=X.body,d=X.createElement("div"),b,e,g,i=parseFloat(c.css(a,"marginTop"))||0;c.extend(d.style,{position:"absolute",top:0,left:0,
margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});d.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";a.insertBefore(d,a.firstChild);b=d.firstChild;e=b.firstChild;g=b.nextSibling.firstChild.firstChild;this.doesNotAddBorder=e.offsetTop!==
5;this.doesAddBorderForTableAndCells=g.offsetTop===5;e.style.position="fixed";e.style.top="20px";this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15;e.style.position=e.style.top="";b.style.overflow="hidden";b.style.position="relative";this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==i;a.removeChild(d);c.offset.initialize=c.noop},bodyOffset:function(a){var d=a.offsetTop,b=a.offsetLeft;c.offset.initialize();c.offset.doesNotIncludeMarginInBodyOffset&&
(d+=parseFloat(c.css(a,"marginTop"))||0,b+=parseFloat(c.css(a,"marginLeft"))||0);return{top:d,left:b}},setOffset:function(a,d,b){var e=c.css(a,"position");e==="static"&&(a.style.position="relative");var g=c(a),i=g.offset(),k=c.css(a,"top"),n=c.css(a,"left"),p={},r={},w,B;(e==="absolute"||e==="fixed")&&c.inArray("auto",[k,n])>-1?(r=g.position(),w=r.top,B=r.left):(w=parseFloat(k)||0,B=parseFloat(n)||0);c.isFunction(d)&&(d=d.call(a,b,i));d.top!=null&&(p.top=d.top-i.top+w);d.left!=null&&(p.left=d.left-
i.left+B);"using"in d?d.using.call(a,p):g.css(p)}};c.fn.extend({position:function(){if(!this[0])return null;var a=this[0],d=this.offsetParent(),b=this.offset(),e=Pb.test(d[0].nodeName)?{top:0,left:0}:d.offset();b.top-=parseFloat(c.css(a,"marginTop"))||0;b.left-=parseFloat(c.css(a,"marginLeft"))||0;e.top+=parseFloat(c.css(d[0],"borderTopWidth"))||0;e.left+=parseFloat(c.css(d[0],"borderLeftWidth"))||0;return{top:b.top-e.top,left:b.left-e.left}},offsetParent:function(){return this.map(function(){for(var a=
this.offsetParent||X.body;a&&!Pb.test(a.nodeName)&&c.css(a,"position")==="static";)a=a.offsetParent;return a})}});c.each(["Left","Top"],function(a,d){var b="scroll"+d;c.fn[b]=function(e){var g,i;if(e===f){g=this[0];if(!g)return null;return(i=j(g))?"pageXOffset"in i?i[a?"pageYOffset":"pageXOffset"]:c.support.boxModel&&i.document.documentElement[b]||i.document.body[b]:g[b]}return this.each(function(){(i=j(this))?i.scrollTo(a?c(i).scrollLeft():e,a?e:c(i).scrollTop()):(this[b]=e)})}});c.each(["Height",
"Width"],function(a,d){var b=d.toLowerCase();c.fn["inner"+d]=function(){var e=this[0];return e&&e.style?parseFloat(c.css(e,b,"padding")):null};c.fn["outer"+d]=function(e){var g=this[0];return g&&g.style?parseFloat(c.css(g,b,e?"margin":"border")):null};c.fn[b]=function(e){var g=this[0];if(!g)return e==null?null:this;if(c.isFunction(e))return this.each(function(k){var n=c(this);n[b](e.call(this,k,n[b]()))});if(c.isWindow(g)){var i=g.document.documentElement["client"+d];return g.document.compatMode===
"CSS1Compat"&&i||g.document.body["client"+d]||i}if(g.nodeType===9)return Math.max(g.documentElement["client"+d],g.body["scroll"+d],g.documentElement["scroll"+d],g.body["offset"+d],g.documentElement["offset"+d]);if(e===f){g=c.css(g,b);i=parseFloat(g);return c.isNaN(i)?g:i}return this.css(b,typeof e=="string"?e:e+"px")}});h.jQuery=h.$=c})(window);
(function(h,f){var j,m=/:([\w\d]+)/g,s=/\?([^#]*)$/,t=function(l){return Array.prototype.slice.call(l)},z=function(l){return Object.prototype.toString.call(l)==="[object Function]"},J=function(l){return Object.prototype.toString.call(l)==="[object Array]"},C=function(l){return decodeURIComponent((l||"").replace(/\+/g," "))},y=encodeURIComponent,Q=function(l){return String(l).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},W=function(l){return function(q,
x){return this.route.apply(this,[l,q,x])}},la={},pa=!!(f.history&&history.pushState),oa=[];j=function(){var l=t(arguments),q,x;j.apps=j.apps||{};if(l.length===0||l[0]&&z(l[0]))return j.apply(j,["body"].concat(l));else if(typeof(x=l.shift())=="string"){q=j.apps[x]||new j.Application;q.element_selector=x;l.length>0&&h.each(l,function(E,ca){q.use(ca)});q.element_selector!=x&&delete j.apps[x];return j.apps[q.element_selector]=q}};j.VERSION="0.7.0";j.addLogger=function(l){oa.push(l)};j.log=function(){var l=
t(arguments);l.unshift("["+Date()+"]");h.each(oa,function(q,x){x.apply(j,l)})};if(typeof f.console!="undefined")z(f.console.log.apply)?j.addLogger(function(){f.console.log.apply(f.console,arguments)}):j.addLogger(function(){f.console.log(arguments)});else typeof console!="undefined"&&j.addLogger(function(){console.log.apply(console,arguments)});h.extend(j,{makeArray:t,isFunction:z,isArray:J});j.Object=function(l){return h.extend(this,l||{})};h.extend(j.Object.prototype,{escapeHTML:Q,h:Q,toHash:function(){var l=
{};h.each(this,function(q,x){z(x)||(l[q]=x)});return l},toHTML:function(){var l="";h.each(this,function(q,x){z(x)||(l+="<strong>"+q+"</strong> "+x+"<br />")});return l},keys:function(l){var q=[];for(var x in this)if(!z(this[x])||!l)q.push(x);return q},has:function(l){return this[l]&&h.trim(this[l].toString())!==""},join:function(){var l=t(arguments),q=l.shift();return l.join(q)},log:function(){j.log.apply(j,arguments)},toString:function(l){var q=[];h.each(this,function(x,E){if(!z(E)||l)q.push('"'+
x+'": '+E.toString())});return"Sammy.Object: {"+q.join(",")+"}"}});j.DefaultLocationProxy=function(l,q){this.app=l;this.is_native=false;this.has_history=pa;this._startPolling(q)};j.DefaultLocationProxy.fullPath=function(l){var q=l.toString().match(/^[^#]*(#.+)$/);return[l.pathname,l.search,q?q[1]:""].join("")};j.DefaultLocationProxy.prototype={bind:function(){var l=this,q=this.app,x=j.DefaultLocationProxy;h(f).bind("hashchange."+this.app.eventNamespace(),function(E,ca){if(l.is_native===false&&!ca){l.is_native=
true;f.clearInterval(x._interval)}q.trigger("location-changed")});if(pa&&!q.disable_push_state){h(f).bind("popstate."+this.app.eventNamespace(),function(){q.trigger("location-changed")});h("a").live("click.history-"+this.app.eventNamespace(),function(E){var ca=x.fullPath(this);if(this.hostname==f.location.hostname&&q.lookupRoute("get",ca)){E.preventDefault();l.setLocation(ca);return false}})}if(!x._bindings)x._bindings=0;x._bindings++},unbind:function(){h(f).unbind("hashchange."+this.app.eventNamespace());
h(f).unbind("popstate."+this.app.eventNamespace());h("a").die("click.history-"+this.app.eventNamespace());j.DefaultLocationProxy._bindings--;j.DefaultLocationProxy._bindings<=0&&f.clearInterval(j.DefaultLocationProxy._interval)},getLocation:function(){return j.DefaultLocationProxy.fullPath(f.location)},setLocation:function(l){if(/^([^#\/]|$)/.test(l))l=pa?"/"+l:"#!/"+l;if(l!=this.getLocation())if(pa&&/^\//.test(l)){history.pushState({path:l},f.title,l);this.app.trigger("location-changed")}else return f.location=
l},_startPolling:function(l){var q=this;if(!j.DefaultLocationProxy._interval){l||(l=10);var x=function(){var E=q.getLocation();if(typeof j.DefaultLocationProxy._last_location=="undefined"||E!=j.DefaultLocationProxy._last_location)f.setTimeout(function(){h(f).trigger("hashchange",[true])},0);j.DefaultLocationProxy._last_location=E};x();j.DefaultLocationProxy._interval=f.setInterval(x,l)}}};j.Application=function(l){var q=this;this.routes={};this.listeners=new j.Object({});this.arounds=[];this.befores=
[];this.namespace=(new Date).getTime()+"-"+parseInt(Math.random()*1E3,10);this.context_prototype=function(){j.EventContext.apply(this,arguments)};this.context_prototype.prototype=new j.EventContext;z(l)&&l.apply(this,[this]);this._location_proxy||this.setLocationProxy(new j.DefaultLocationProxy(this,this.run_interval_every));this.debug&&this.bindToAllEvents(function(x,E){q.log(q.toString(),x.cleaned_type,E||{})})};j.Application.prototype=h.extend({},j.Object.prototype,{ROUTE_VERBS:["get","post","put",
"delete"],APP_EVENTS:["run","unload","lookup-route","run-route","route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect","location-changed"],_last_route:null,_location_proxy:null,_running:false,element_selector:"body",debug:false,raise_errors:false,run_interval_every:50,disable_push_state:false,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(l){return l?h(this.element_selector).find(l):
h(this.element_selector)},use:function(){var l=t(arguments),q=l.shift(),x=q||"";try{l.unshift(this);if(typeof q=="string"){x="Sammy."+q;q=j[q]}q.apply(this,l)}catch(E){if(typeof q==="undefined")this.error("Plugin Error: called use() but plugin ("+x.toString()+") is not defined",E);else z(q)?this.error("Plugin Error",E):this.error("Plugin Error: called use() but '"+x.toString()+"' is not a function",E)}return this},setLocationProxy:function(l){var q=this._location_proxy;this._location_proxy=l;if(this.isRunning()){q&&
q.unbind();this._location_proxy.bind()}},route:function(l,q,x){var E=this,ca=[],na,S;if(!x&&z(q)){x=q=l;l="any"}l=l.toLowerCase();if(q.constructor==String){for(m.lastIndex=0;(S=m.exec(q))!==null;)ca.push(S[1]);q=new RegExp(q.replace(m,"([^/]+)")+"$")}if(typeof x=="string")x=E[x];na=function(fa){var ga={verb:fa,path:q,callback:x,param_names:ca};E.routes[fa]=E.routes[fa]||[];E.routes[fa].push(ga)};l==="any"?h.each(this.ROUTE_VERBS,function(fa,ga){na(ga)}):na(l);return this},get:W("get"),post:W("post"),
put:W("put"),del:W("delete"),any:W("any"),mapRoutes:function(l){var q=this;h.each(l,function(x,E){q.route.apply(q,E)});return this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(l,q,x){var E=this;if(typeof x=="undefined")x=q;q=function(ca,na){var S;if(na&&na.context){S=na.context;delete na.context}else S=new E.context_prototype(E,"bind",ca.type,na,ca.target);ca.cleaned_type=ca.type.replace(E.eventNamespace(),"");x.apply(S,[ca,na])};this.listeners[l]||(this.listeners[l]=
[]);this.listeners[l].push(q);this.isRunning()&&this._listen(l,q);return this},trigger:function(l,q){this.$element().trigger([l,this.eventNamespace()].join("."),[q]);return this},refresh:function(){this.last_location=null;this.trigger("location-changed");return this},before:function(l,q){if(z(l)){q=l;l={}}this.befores.push([l,q]);return this},after:function(l){return this.bind("event-context-after",l)},around:function(l){this.arounds.push(l);return this},isRunning:function(){return this._running},
helpers:function(l){h.extend(this.context_prototype.prototype,l);return this},helper:function(l,q){this.context_prototype.prototype[l]=q;return this},run:function(l){if(this.isRunning())return false;var q=this;h.each(this.listeners.toHash(),function(x,E){h.each(E,function(ca,na){q._listen(x,na)})});this.trigger("run",{start_url:l});this._running=true;this.last_location=null;!/\#(.+)/.test(this.getLocation())&&typeof l!="undefined"&&this.setLocation(l);this._checkLocation();this._location_proxy.bind();
this.bind("location-changed",function(){q._checkLocation()});this.bind("submit",function(x){return q._checkFormSubmission(h(x.target).closest("form"))===false?x.preventDefault():false});h(f).bind("beforeunload",function(){q.unload()});return this.trigger("changed")},unload:function(){if(!this.isRunning())return false;var l=this;this.trigger("unload");this._location_proxy.unbind();this.$element().unbind("submit").removeClass(l.eventNamespace());h.each(this.listeners.toHash(),function(q,x){h.each(x,
function(E,ca){l._unlisten(q,ca)})});this._running=false;return this},bindToAllEvents:function(l){var q=this;h.each(this.APP_EVENTS,function(x,E){q.bind(E,l)});h.each(this.listeners.keys(true),function(x,E){h.inArray(E,q.APP_EVENTS)==-1&&q.bind(E,l)});return this},routablePath:function(l){return l.replace(s,"")},lookupRoute:function(l,q){var x=false,E=0,ca,na;if(typeof this.routes[l]!="undefined")for(ca=this.routes[l].length;E<ca;E++){na=this.routes[l][E];if(this.routablePath(q).match(na.path)){x=
na;break}}return x},runRoute:function(l,q,x,E){var ca=this,na=this.lookupRoute(l,q),S,fa,ga,xa,Oa,Ra,X;this.log("runRoute",[l,q].join(" "));this.trigger("run-route",{verb:l,path:q,params:x});if(typeof x=="undefined")x={};h.extend(x,this._parseQueryString(q));if(na){this.trigger("route-found",{route:na});if((Ra=na.path.exec(this.routablePath(q)))!==null){Ra.shift();h.each(Ra,function(U,c){if(na.param_names[U])x[na.param_names[U]]=C(c);else{if(!x.splat)x.splat=[];x.splat.push(C(c))}})}S=new this.context_prototype(this,
l,q,x,E);E=this.arounds.slice(0);ga=this.befores.slice(0);Oa=[S].concat(x.splat);fa=function(){for(var U;ga.length>0;){xa=ga.shift();if(ca.contextMatchesOptions(S,xa[0])){U=xa[1].apply(S,[S]);if(U===false)return false}}ca.last_route=na;S.trigger("event-context-before",{context:S});U=na.callback.apply(S,Oa);S.trigger("event-context-after",{context:S});return U};h.each(E.reverse(),function(U,c){var A=fa;fa=function(){return c.apply(S,[A])}});try{X=fa()}catch(O){this.error(["500 Error",l,q].join(" "),
O)}return X}else return this.notFound(l,q)},contextMatchesOptions:function(l,q,x){q=q;if(typeof q==="undefined"||q=={})return true;if(typeof x==="undefined")x=true;if(typeof q==="string"||z(q.test))q={path:q};if(q.only)return this.contextMatchesOptions(l,q.only,true);else if(q.except)return this.contextMatchesOptions(l,q.except,false);var E=true,ca=true;if(q.path){if(!z(q.path.test))q.path=new RegExp(q.path.toString()+"$");E=q.path.test(l.path)}if(q.verb)ca=typeof q.verb==="string"?q.verb===l.verb:
q.verb.indexOf(l.verb)>-1;return x?ca&&E:!(ca&&E)},getLocation:function(){return this._location_proxy.getLocation()},setLocation:function(l){return this._location_proxy.setLocation(l)},swap:function(l){return this.$element().html(l)},templateCache:function(l,q){return typeof q!="undefined"?(la[l]=q):la[l]},clearTemplateCache:function(){return la={}},notFound:function(l,q){var x=this.error(["404 Not Found",l,q].join(" "));return l==="get"?x:true},error:function(l,q){q||(q=new Error);q.message=[l,q.message].join(" ");
this.trigger("error",{message:q.message,error:q});if(this.raise_errors)throw q;else this.log(q.message,q)},_checkLocation:function(){var l,q;l=this.getLocation();if(!this.last_location||this.last_location[0]!="get"||this.last_location[1]!=l){this.last_location=["get",l];q=this.runRoute("get",l)}return q},_getFormVerb:function(l){l=h(l);var q,x;x=l.find('input[name="_method"]');if(x.length>0)q=x.val();q||(q=l[0].getAttribute("method"));if(!q||q=="")q="get";return h.trim(q.toString().toLowerCase())},
_checkFormSubmission:function(l){var q,x,E;this.trigger("check-form-submission",{form:l});q=h(l);x=q.attr("action")||"";E=this._getFormVerb(q);this.log("_checkFormSubmission",q,x,E);if(E==="get"){this.setLocation(x+"?"+this._serializeFormParams(q));l=false}else{q=h.extend({},this._parseFormParams(q));l=this.runRoute(E,x,q,l.get(0))}return typeof l=="undefined"?false:l},_serializeFormParams:function(l){var q="";l=l.serializeArray();var x;if(l.length>0){q=this._encodeFormPair(l[0].name,l[0].value);
for(x=1;x<l.length;x++)q=q+"&"+this._encodeFormPair(l[x].name,l[x].value)}return q},_encodeFormPair:function(l,q){return y(l)+"="+y(q)},_parseFormParams:function(l){var q={};l=l.serializeArray();var x;for(x=0;x<l.length;x++)q=this._parseParamPair(q,l[x].name,l[x].value);return q},_parseQueryString:function(l){var q={},x,E;if(l=l.match(s)){l=l[1].split("&");for(E=0;E<l.length;E++){x=l[E].split("=");q=this._parseParamPair(q,C(x[0]),C(x[1]||""))}}return q},_parseParamPair:function(l,q,x){if(l[q])if(J(l[q]))l[q].push(x);
else l[q]=[l[q],x];else l[q]=x;return l},_listen:function(l,q){return this.$element().bind([l,this.eventNamespace()].join("."),q)},_unlisten:function(l,q){return this.$element().unbind([l,this.eventNamespace()].join("."),q)}});j.RenderContext=function(l){this.event_context=l;this.callbacks=[];this.content=this.previous_content=null;this.waiting=this.next_engine=false};j.RenderContext.prototype=h.extend({},j.Object.prototype,{then:function(l){if(!z(l))if(typeof l==="string"&&l in this.event_context){var q=
this.event_context[l];l=function(E){return q.apply(this.event_context,[E])}}else return this;var x=this;if(this.waiting)this.callbacks.push(l);else{this.wait();f.setTimeout(function(){var E=l.apply(x,[x.content,x.previous_content]);E!==false&&x.next(E)},0)}return this},wait:function(){this.waiting=true},next:function(l){this.waiting=false;if(typeof l!=="undefined"){this.previous_content=this.content;this.content=l}this.callbacks.length>0&&this.then(this.callbacks.shift())},load:function(l,q,x){var E=
this;return this.then(function(){var ca,na,S;if(z(q)){x=q;q={}}else q=h.extend({},q);x&&this.then(x);if(typeof l==="string"){ca=(S=l.match(/\.json$/)||q.json)&&q.cache===true||q.cache!==false;E.next_engine=E.event_context.engineFor(l);delete q.cache;delete q.json;if(q.engine){E.next_engine=q.engine;delete q.engine}if(ca&&(na=this.event_context.app.templateCache(l)))return na;this.wait();h.ajax(h.extend({url:l,data:{},dataType:S?"json":null,type:"get",success:function(fa){ca&&E.event_context.app.templateCache(l,
fa);E.next(fa)}},q));return false}else{if(l.nodeType)return l.innerHTML;if(l.selector){E.next_engine=l.attr("data-engine");return q.clone===false?l.remove()[0].innerHTML.toString():l[0].innerHTML.toString()}}})},loadPartials:function(l){if(l){this.partials=this.partials||{};for(name in l)this.load(l[name]).then(function(q){this.partials[name]=q})}return this},render:function(l,q,x,E){return z(l)&&!q?this.then(l):this.loadPartials(E).load(l).interpolate(q,l).then(x)},partial:function(l,q){return this.render(l,
q).swap()},send:function(){var l=this,q=t(arguments),x=q.shift();if(J(q[0]))q=q[0];return this.then(function(){q.push(function(E){l.next(E)});l.wait();x.apply(x,q);return false})},collect:function(l,q,x){var E=this,ca=function(){if(z(l)){q=l;l=this.content}var na=[],S=false;h.each(l,function(fa,ga){var xa=q.apply(E,[fa,ga]);if(xa.jquery&&xa.length==1){xa=xa[0];S=true}na.push(xa);return xa});return S?na:na.join("")};return x?ca():this.then(ca)},renderEach:function(l,q,x,E){if(J(q)){E=x;x=q;q=null}return this.load(l).then(function(ca){var na=
this;x||(x=J(this.previous_content)?this.previous_content:[]);if(E)h.each(x,function(S,fa){var ga={},xa=this.next_engine||l;q?(ga[q]=fa):(ga=fa);E(fa,na.event_context.interpolate(ca,ga,xa))});else return this.collect(x,function(S,fa){var ga={},xa=this.next_engine||l;q?(ga[q]=fa):(ga=fa);return this.event_context.interpolate(ca,ga,xa)},true)})},interpolate:function(l,q,x){var E=this;return this.then(function(ca,na){if(!l&&na)l=na;if(this.next_engine){q=this.next_engine;this.next_engine=false}var S=
E.event_context.interpolate(ca,l,q,this.partials);return x?na+S:S})},swap:function(){return this.then(function(l){this.event_context.swap(l)}).trigger("changed",{})},appendTo:function(l){return this.then(function(q){h(l).append(q)}).trigger("changed",{})},prependTo:function(l){return this.then(function(q){h(l).prepend(q)}).trigger("changed",{})},replace:function(l){return this.then(function(q){h(l).html(q)}).trigger("changed",{})},trigger:function(l,q){return this.then(function(x){if(typeof q=="undefined")q=
{content:x};this.event_context.trigger(l,q)})}});j.EventContext=function(l,q,x,E,ca){this.app=l;this.verb=q;this.path=x;this.params=new j.Object(E);this.target=ca};j.EventContext.prototype=h.extend({},j.Object.prototype,{$element:function(){return this.app.$element(t(arguments).shift())},engineFor:function(l){var q;if(z(l))return l;l=(l||this.app.template_engine).toString();if(q=l.match(/\.([^\.\?\#]+)$/))l=q[1];if(l&&z(this[l]))return this[l];if(this.app.template_engine)return this.engineFor(this.app.template_engine);
return function(x){return x}},interpolate:function(l,q,x,E){return this.engineFor(x).apply(this,[l,q,E])},render:function(l,q,x,E){return(new j.RenderContext(this)).render(l,q,x,E)},renderEach:function(l,q,x,E){return(new j.RenderContext(this)).renderEach(l,q,x,E)},load:function(l,q,x){return(new j.RenderContext(this)).load(l,q,x)},partial:function(l,q){return(new j.RenderContext(this)).partial(l,q)},send:function(){var l=new j.RenderContext(this);return l.send.apply(l,arguments)},redirect:function(){var l;
l=t(arguments);var q=this.app.getLocation(),x=l.length;if(x>1){for(var E=0,ca=[],na=[],S={},fa=false;E<x;E++)if(typeof l[E]=="string")ca.push(l[E]);else{h.extend(S,l[E]);fa=true}l=ca.join("/");if(fa){for(var ga in S)na.push(this.app._encodeFormPair(ga,S[ga]));l+="?"+na.join("&")}}else l=l[0];this.trigger("redirect",{to:l});this.app.last_location=[this.verb,this.path];this.app.setLocation(l);(new RegExp(l)).test(q)&&this.app.trigger("location-changed")},trigger:function(l,q){if(typeof q=="undefined")q=
{};if(!q.context)q.context=this;return this.app.trigger(l,q)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(l){return this.app.swap(l)},notFound:function(){return this.app.notFound(this.verb,this.path)},json:function(l){return h.parseJSON(l)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}});h.sammy=f.Sammy=j})(jQuery,window);
(function(h){Sammy=Sammy||{};Sammy.Title=function(){this.setTitle=function(f){this.title_function=h.isFunction(f)?f:function(j){return[f,j].join(" ")}};this.helper("title",function(){var f=h.makeArray(arguments).join(" ");if(this.app.title_function)f=this.app.title_function(f);document.title=f})}})(jQuery);
(function(h){function f(m){m=unescape(m);return m==="true"?true:m==="false"?false:m}function j(m,s,t){var z;if(s.match(/^[^\[]+$/))m[s]=f(t);else if(z=s.match(/^([^\[]+)\[\](.*)$/)){s=z[1];z=z[2];if(m[s]&&!h.isArray(m[s]))throw"400 Bad Request";if(z){z=z.match(/^\[([^\]]+)\](.*)$/);if(!z)throw"400 Bad Request";if(m[s])m[s][m[s].length-1][z[1]]?m[s].push(j({},z[1]+z[2],t)):h.extend(true,m[s][m[s].length-1],j({},z[1]+z[2],t));else m[s]=[j({},z[1]+z[2],t)]}else if(m[s])m[s].push(f(t));else m[s]=[f(t)]}else if(z=
s.match(/^([^\[]+)\[([^\[]+)\](.*)$/)){s=z[1];z=z[2]+z[3];if(m[s]&&h.isArray(m[s]))throw"400 Bad Request";if(m[s])h.extend(true,m[s],j(m[s],z,t));else m[s]=j({},z,t)}return m}Sammy=Sammy||{};Sammy.NestedParams=function(m){m._parseParamPair=j}})(jQuery);
(function(){if(!window.JSON)window.JSON={};(function(){function h(y){return y<10?"0"+y:y}function f(y){s.lastIndex=0;return s.test(y)?'"'+y.replace(s,function(Q){var W=J[Q];return typeof W==="string"?W:"\\u"+("0000"+Q.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+y+'"'}function j(y,Q){var W,la,pa,oa,l=t,q,x=Q[y];if(x&&typeof x==="object"&&typeof x.toJSON==="function")x=x.toJSON(y);if(typeof C==="function")x=C.call(Q,y,x);switch(typeof x){case "string":return f(x);case "number":return isFinite(x)?
String(x):"null";case "boolean":case "null":return String(x);case "object":if(!x)return"null";t+=z;q=[];if(Object.prototype.toString.apply(x)==="[object Array]"){oa=x.length;for(W=0;W<oa;W+=1)q[W]=j(W,x)||"null";pa=q.length===0?"[]":t?"[\n"+t+q.join(",\n"+t)+"\n"+l+"]":"["+q.join(",")+"]";t=l;return pa}if(C&&typeof C==="object"){oa=C.length;for(W=0;W<oa;W+=1){la=C[W];if(typeof la==="string")if(pa=j(la,x))q.push(f(la)+(t?": ":":")+pa)}}else for(la in x)if(Object.hasOwnProperty.call(x,la))if(pa=j(la,
x))q.push(f(la)+(t?": ":":")+pa);pa=q.length===0?"{}":t?"{\n"+t+q.join(",\n"+t)+"\n"+l+"}":"{"+q.join(",")+"}";t=l;return pa}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+h(this.getUTCMonth()+1)+"-"+h(this.getUTCDate())+"T"+h(this.getUTCHours())+":"+h(this.getUTCMinutes())+":"+h(this.getUTCSeconds())+"Z"};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var m=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,t,z,J={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},C;if(typeof JSON.stringify!=="function")JSON.stringify=function(y,Q,W){var la;z=t="";if(typeof W==="number")for(la=0;la<W;la+=1)z+=" ";else if(typeof W==="string")z=W;if((C=Q)&&typeof Q!=="function"&&(typeof Q!=="object"||typeof Q.length!=="number"))throw new Error("JSON.stringify");
return j("",{"":y})};if(typeof JSON.parse!=="function")JSON.parse=function(y,Q){function W(pa,oa){var l,q,x=pa[oa];if(x&&typeof x==="object")for(l in x)if(Object.hasOwnProperty.call(x,l)){q=W(x,l);if(q!==undefined)x[l]=q;else delete x[l]}return Q.call(pa,oa,x)}var la;m.lastIndex=0;if(m.test(y))y=y.replace(m,function(pa){return"\\u"+("0000"+pa.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(y.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){la=eval("("+y+")");return typeof Q==="function"?W({"":la},""):la}throw new SyntaxError("JSON.parse");}})();Sammy=Sammy||{};Sammy.JSON=function(h){h.helpers({json:function(f){return typeof f=="string"?JSON.parse(f):JSON.stringify(f)}})}})(jQuery);
var Mustache=function(){var h=function(){};h.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":true},context:{},render:function(f,j,m,s){if(!s){this.context=j;this.buffer=[]}if(!this.includes("",f))if(s)return f;else{this.send(f);return}f=this.render_pragmas(f);f=this.render_section(f,j,m);if(s)return this.render_tags(f,j,m,s);this.render_tags(f,j,m,s)},send:function(f){f!==""&&this.buffer.push(f)},render_pragmas:function(f){if(!this.includes("%",f))return f;
var j=this;return f.replace(new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag,"g"),function(m,s,t){if(!j.pragmas_implemented[s])throw{message:"This implementation of mustache doesn't understand the '"+s+"' pragma"};j.pragmas[s]={};if(t){m=t.split("=");j.pragmas[s][m[0]]=m[1]}return""})},render_partial:function(f,j,m){f=this.trim(f);if(!m||m[f]===undefined)throw{message:"unknown_partial '"+f+"'"};if(typeof j[f]!="object")return this.render(m[f],j,m,true);return this.render(m[f],j[f],m,
true)},render_section:function(f,j,m){if(!this.includes("#",f)&&!this.includes("^",f))return f;var s=this;return f.replace(new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg"),function(t,z,J,C){t=s.find(J,j);if(z=="^")return!t||s.is_array(t)&&t.length===0?s.render(C,j,m,true):"";else if(z=="#")return s.is_array(t)?s.map(t,function(y){return s.render(C,s.create_context(y),m,true)}).join(""):s.is_object(t)?s.render(C,s.create_context(t),
m,true):typeof t==="function"?t.call(j,C,function(y){return s.render(y,j,m,true)}):t?s.render(C,j,m,true):""})},render_tags:function(f,j,m,s){var t=this,z=function(){return new RegExp(t.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+t.ctag+"+","g")},J=z(),C=function(Q,W,la){switch(W){case "!":return"";case "=":t.set_delimiters(la);J=z();return"";case ">":return t.render_partial(la,j,m);case "{":return t.find(la,j);default:return t.escape(t.find(la,j))}};f=f.split("\n");for(var y=0;y<f.length;y++){f[y]=f[y].replace(J,
C,this);s||this.send(f[y])}if(s)return f.join("\n")},set_delimiters:function(f){f=f.split(" ");this.otag=this.escape_regex(f[0]);this.ctag=this.escape_regex(f[1])},escape_regex:function(f){if(!arguments.callee.sRE)arguments.callee.sRE=new RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");return f.replace(arguments.callee.sRE,"\\$1")},find:function(f,j){f=this.trim(f);var m;if(j[f]===false||j[f]===0||j[f])m=j[f];else if(this.context[f]===false||this.context[f]===0||this.context[f])m=
this.context[f];if(typeof m==="function")return m.apply(j);if(m!==undefined)return m;return""},includes:function(f,j){return j.indexOf(this.otag+f)!=-1},escape:function(f){return String(f===null?"":f).replace(/&(?!\w+;)|["'<>\\]/g,function(j){switch(j){case "&":return"&amp;";case "\\":return"\\\\";case '"':return"&quot;";case "'":return"&#39;";case "<":return"&lt;";case ">":return"&gt;";default:return j}})},create_context:function(f){if(this.is_object(f))return f;else{var j=".";if(this.pragmas["IMPLICIT-ITERATOR"])j=
this.pragmas["IMPLICIT-ITERATOR"].iterator;var m={};m[j]=f;return m}},is_object:function(f){return f&&typeof f=="object"},is_array:function(f){return Object.prototype.toString.call(f)==="[object Array]"},trim:function(f){return f.replace(/^\s*|\s*$/g,"")},map:function(f,j){if(typeof f.map=="function")return f.map(j);else{for(var m=[],s=f.length,t=0;t<s;t++)m.push(j(f[t]));return m}}};return{name:"mustache.js",version:"0.3.1-dev",to_html:function(f,j,m,s){var t=new h;if(s)t.send=s;t.render(f,j,m);
if(!s)return t.buffer.join("\n")}}}();(function(h){Sammy=Sammy||{};Sammy.Mustache=function(f,j){j||(j="mustache");f.helper(j,function(m,s,t){s=h.extend({},this,s);t=h.extend({},s.partials,t);return Mustache.to_html(m,s,t)})}})(jQuery);
window.Modernizr=function(h,f,j){function m(){J.input=function(O){for(var U=0,c=O.length;U<c;U++)na[O[U]]=!!(O[U]in la);return na}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));J.inputtypes=function(O){for(var U=0,c,A,L,M=O.length;U<M;U++){la.setAttribute("type",A=O[U]);(c=la.type!=="text")&&(la.value=pa,la.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(A)&&la.style.WebkitAppearance!==j?(C.appendChild(la),L=f.defaultView,c=L.getComputedStyle&&
L.getComputedStyle(la,null).WebkitAppearance!=="textfield"&&la.offsetHeight!==0,C.removeChild(la)):/^(search|tel)$/.test(A)||(/^(url|email)$/.test(A)?(c=la.checkValidity&&la.checkValidity()===false):/^color$/.test(A)?(C.appendChild(la),c=la.value!=pa,C.removeChild(la)):(c=la.value!=pa)));ca[O[U]]=!!c}return ca}("search tel url email datetime date month week time datetime-local number range color".split(" "))}function s(O,U){var c=O.charAt(0).toUpperCase()+O.substr(1);c=(O+" "+q.join(c+" ")+c).split(" ");
return!!t(c,U)}function t(O,U){for(var c in O)if(W[O[c]]!==j&&(!U||U(O[c],Q)))return true}function z(O,U){return typeof O===U}var J={},C=f.documentElement,y=f.head||f.getElementsByTagName("head")[0],Q=f.createElement("modernizr"),W=Q.style,la=f.createElement("input"),pa=":)",oa=Object.prototype.toString,l=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),q="Webkit Moz O ms Khtml".split(" "),x={svg:"http://www.w3.org/2000/svg"},E={},ca={},na={},S=[],fa,ga=function(O){var U=f.createElement("style"),c=
f.createElement("div");U.textContent=O+"{#modernizr{height:3px}}";y.appendChild(U);c.id="modernizr";C.appendChild(c);O=c.offsetHeight===3;U.parentNode.removeChild(U);c.parentNode.removeChild(c);return!!O},xa=function(){var O={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(U,c){c=c||f.createElement(O[U]||"div");var A=(U="on"+U)in c;A||(c.setAttribute||(c=f.createElement("div")),c.setAttribute&&c.removeAttribute&&(c.setAttribute(U,""),A=
z(c[U],"function"),z(c[U],j)||(c[U]=j),c.removeAttribute(U)));return A}}(),Oa={}.hasOwnProperty,Ra;z(Oa,j)||z(Oa.call,j)?(Ra=function(O,U){return U in O&&z(O.constructor.prototype[U],j)}):(Ra=function(O,U){return Oa.call(O,U)});E.flexbox=function(){var O=f.createElement("div"),U=f.createElement("div");(function(A,L,M,R){L+=":";A.style.cssText=(L+l.join(M+";"+L)).slice(0,-L.length)+(R||"")})(O,"display","box","width:42px;padding:0;");U.style.cssText=l.join("box-flex:1;")+"width:10px;";O.appendChild(U);
C.appendChild(O);var c=U.offsetWidth===42;O.removeChild(U);C.removeChild(O);return c};E.canvas=function(){var O=f.createElement("canvas");return O.getContext&&O.getContext("2d")};E.canvastext=function(){return J.canvas&&z(f.createElement("canvas").getContext("2d").fillText,"function")};E.webgl=function(){return!!h.WebGLRenderingContext};E.touch=function(){return"ontouchstart"in h||ga("@media ("+l.join("touch-enabled),(")+"modernizr)")};E.geolocation=function(){return!!navigator.geolocation};E.postmessage=
function(){return!!h.postMessage};E.websqldatabase=function(){return!!h.openDatabase};E.indexedDB=function(){for(var O=-1,U=q.length;++O<U;){var c=q[O].toLowerCase();if(h[c+"_indexedDB"]||h[c+"IndexedDB"])return true}return false};E.hashchange=function(){return xa("hashchange",h)&&(f.documentMode===j||f.documentMode>7)};E.history=function(){return!!(h.history&&history.pushState)};E.draganddrop=function(){return xa("dragstart")&&xa("drop")};E.websockets=function(){return"WebSocket"in h};E.rgba=function(){W.cssText=
"background-color:rgba(150,255,150,.5)";return(""+W.backgroundColor).indexOf("rgba")!==-1};E.hsla=function(){W.cssText="background-color:hsla(120,40%,100%,.5)";return(""+W.backgroundColor).indexOf("rgba")!==-1||(""+W.backgroundColor).indexOf("hsla")!==-1};E.multiplebgs=function(){W.cssText="background:url(//:),url(//:),red url(//:)";return/(url\s*\(.*?){3}/.test(W.background)};E.backgroundsize=function(){return s("backgroundSize")};E.borderimage=function(){return s("borderImage")};E.borderradius=
function(){return s("borderRadius","",function(O){return(""+O).indexOf("orderRadius")!==-1})};E.boxshadow=function(){return s("boxShadow")};E.textshadow=function(){return f.createElement("div").style.textShadow===""};E.opacity=function(){var O=l.join("opacity:.55;")+"";W.cssText=O;return/^0.55$/.test(W.opacity)};E.cssanimations=function(){return s("animationName")};E.csscolumns=function(){return s("columnCount")};E.cssgradients=function(){var O=("background-image:"+l.join("gradient(linear,left top,right bottom,from(#9f9),to(white));background-image:")+
l.join("linear-gradient(left top,#9f9, white);background-image:")).slice(0,-17);W.cssText=O;return(""+W.backgroundImage).indexOf("gradient")!==-1};E.cssreflections=function(){return s("boxReflect")};E.csstransforms=function(){return!!t(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])};E.csstransforms3d=function(){var O=!!t(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);O&&"webkitPerspective"in C.style&&(O=ga("@media ("+
l.join("transform-3d),(")+"modernizr)"));return O};E.csstransitions=function(){return s("transitionProperty")};E.fontface=function(){var O,U,c=y||C,A=f.createElement("style");U=f.implementation||{hasFeature:function(){return false}};A.type="text/css";c.insertBefore(A,c.firstChild);O=A.sheet||A.styleSheet;U=(U.hasFeature("CSS2","")?function(L){if(!O||!L)return false;var M=false;try{O.insertRule(L,0);M=/src/i.test(O.cssRules[0].cssText);O.deleteRule(O.cssRules.length-1)}catch(R){}return M}:function(L){if(!O||
!L)return false;O.cssText=L;return O.cssText.length!==0&&/src/i.test(O.cssText)&&O.cssText.replace(/\r+|\n+/g,"").indexOf(L.split(" ")[0])===0})('@font-face { font-family: "font"; src: url(data:,); }');c.removeChild(A);return U};E.video=function(){var O=f.createElement("video"),U=!!O.canPlayType;if(U){U=new Boolean(U);U.ogg=O.canPlayType('video/ogg; codecs="theora"');U.h264=O.canPlayType('video/mp4; codecs="avc1.42E01E"')||O.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');U.webm=O.canPlayType('video/webm; codecs="vp8, vorbis"')}return U};
E.audio=function(){var O=f.createElement("audio"),U=!!O.canPlayType;U&&(U=new Boolean(U),U.ogg=O.canPlayType('audio/ogg; codecs="vorbis"'),U.mp3=O.canPlayType("audio/mpeg;"),U.wav=O.canPlayType('audio/wav; codecs="1"'),U.m4a=O.canPlayType("audio/x-m4a;")||O.canPlayType("audio/aac;"));return U};E.localstorage=function(){try{return!!localStorage.getItem}catch(O){return false}};E.sessionstorage=function(){try{return!!sessionStorage.getItem}catch(O){return false}};E.webWorkers=function(){return!!h.Worker};
E.applicationcache=function(){return!!h.applicationCache};E.svg=function(){return!!f.createElementNS&&!!f.createElementNS(x.svg,"svg").createSVGRect};E.inlinesvg=function(){var O=f.createElement("div");O.innerHTML="<svg/>";return(O.firstChild&&O.firstChild.namespaceURI)==x.svg};E.smil=function(){return!!f.createElementNS&&/SVG/.test(oa.call(f.createElementNS(x.svg,"animate")))};E.svgclippaths=function(){return!!f.createElementNS&&/SVG/.test(oa.call(f.createElementNS(x.svg,"clipPath")))};for(var X in E)Ra(E,
X)&&(fa=X.toLowerCase(),J[fa]=E[X](),S.push((J[fa]?"":"no-")+fa));J.input||m();J.crosswindowmessaging=J.postmessage;J.historymanagement=J.history;J.addTest=function(O,U){O=O.toLowerCase();if(!J[O]){U=!!U();C.className+=" "+(U?"":"no-")+O;J[O]=U;return J}};W.cssText="";Q=la=null;h.attachEvent&&function(){var O=f.createElement("div");O.innerHTML="<elem></elem>";return O.childNodes.length!==1}()&&function(O,U){function c(aa,ha){for(var sa=-1,ta=aa.length,La,gb=[];++sa<ta;){La=aa[sa];(ha=La.media||ha)!=
"screen"&&gb.push(c(La.imports,ha),La.cssText)}return gb.join("")}function A(aa){for(var ha=-1;++ha<M;)aa.createElement(L[ha])}var L="abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video".split("|"),M=L.length,R=new RegExp("(^|\\s)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)","gi"),ja=new RegExp("<(/*)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)",
"gi"),ia=new RegExp("(^|[^\\n]*?\\s)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)([^\\n]*)({[\\n\\w\\W]*?})","gi"),wa=U.createDocumentFragment(),Ga=U.documentElement,ua=Ga.firstChild,Na=U.createElement("body"),G=U.createElement("style"),ea;A(U);A(wa);ua.insertBefore(G,ua.firstChild);G.media="print";O.attachEvent("onbeforeprint",function(){var aa=-1,ha=c(U.styleSheets,"all"),sa=[],ta;for(ea=ea||U.body;(ta=
ia.exec(ha))!=null;)sa.push((ta[1]+ta[2]+ta[3]).replace(R,"$1.iepp_$2")+ta[4]);for(G.styleSheet.cssText=sa.join("\n");++aa<M;){ha=U.getElementsByTagName(L[aa]);sa=ha.length;for(ta=-1;++ta<sa;)ha[ta].className.indexOf("iepp_")<0&&(ha[ta].className+=" iepp_"+L[aa])}wa.appendChild(ea);Ga.appendChild(Na);Na.className=ea.className;Na.innerHTML=ea.innerHTML.replace(ja,"<$1font")});O.attachEvent("onafterprint",function(){Na.innerHTML="";Ga.removeChild(Na);Ga.appendChild(ea);G.styleSheet.cssText=""})}(h,
f);J._enableHTML5=true;J._version="1.7";C.className=C.className.replace(/\bno-js\b/,"")+" js "+S.join(" ");return J}(this,this.document);
var Model=function(h,f){var j=function(m){this.attributes=jQuery.extend({},m);this.changes={};this.errors=new Model.Errors(this);this.uid=[h,Model.UID.generate()].join("-");jQuery.isFunction(this.initialize)&&this.initialize()};Model.Module.extend.call(j,Model.Module);j._name=h;j.collection=[];j.unique_key="id";j.extend(Model.Callbacks).extend(Model.ClassMethods);j.prototype=new Model.Base;j.prototype.constructor=j;jQuery.isFunction(f)&&f.call(j,j,j.prototype);return j};
Model.Callbacks={bind:function(h,f){this.callbacks=this.callbacks||{};this.callbacks[h]=this.callbacks[h]||[];this.callbacks[h].push(f);return this},trigger:function(h,f){this.callbacks=this.callbacks||{};var j=this.callbacks[h];if(j)for(var m=0;m<j.length;m++)j[m].apply(this,f||[]);return this},unbind:function(h,f){this.callbacks=this.callbacks||{};if(f)for(var j=this.callbacks[h]||[],m=0;m<j.length;m++)j[m]===f&&this.callbacks[h].splice(m,1);else delete this.callbacks[h];return this}};
Model.ClassMethods={add:function(h){var f=h.id();if(jQuery.inArray(h,this.collection)===-1&&!(f&&this.find(f))){this.collection.push(h);this.trigger("add",[h])}return this},all:function(){return this.collection.slice()},chain:function(h){return jQuery.extend({},this,{collection:h})},count:function(){return this.all().length},detect:function(h){for(var f=this.all(),j,m=0,s=f.length;m<s;m++){j=f[m];if(h.call(j,j,m))return j}},each:function(h,f){for(var j=this.all(),m=0,s=j.length;m<s;m++)h.call(f||
j[m],j[m],m,j);return this},find:function(h){return this.detect(function(){return this.id()==h})},first:function(){return this.all()[0]},load:function(h){if(this._persistence){var f=this;this._persistence.read(function(j){for(var m=0,s=j.length;m<s;m++)f.add(j[m]);h&&h.call(f,j)})}return this},last:function(){var h=this.all();return h[h.length-1]},map:function(h,f){for(var j=this.all(),m=[],s=0,t=j.length;s<t;s++)m.push(h.call(f||j[s],j[s],s,j));return m},persistence:function(h){if(arguments.length==
0)return this._persistence;else{var f=Array.prototype.slice.call(arguments,1);f.unshift(this);this._persistence=h.apply(h,f);return this}},pluck:function(h){for(var f=this.all(),j=[],m=0,s=f.length;m<s;m++)j.push(f[m].attr(h));return j},remove:function(h){for(var f,j=0,m=this.collection.length;j<m;j++)if(this.collection[j]===h){f=j;break}if(f!=undefined){this.collection.splice(f,1);this.trigger("remove",[h]);return true}else return false},reverse:function(){return this.chain(this.all().reverse())},
select:function(h,f){for(var j=this.all(),m=[],s,t=0,z=j.length;t<z;t++){s=j[t];if(h.call(f||s,s,t,j))m.push(s)}return this.chain(m)},sort:function(h){return this.chain(this.all().sort(h))},sortBy:function(h){var f=jQuery.isFunction(h);return this.sort(function(j,m){var s=f?h.call(j):j.attr(h),t=f?h.call(m):m.attr(h);return s<t?-1:s>t?1:0})},use:function(h){var f=Array.prototype.slice.call(arguments,1);f.unshift(this);h.apply(this,f);return this}};
Model.Errors=function(h){this.errors={};this.model=h};Model.Errors.prototype={add:function(h,f){this.errors[h]||(this.errors[h]=[]);this.errors[h].push(f);return this},all:function(){return this.errors},clear:function(){this.errors={};return this},each:function(h){for(var f in this.errors)for(var j=0;j<this.errors[f].length;j++)h.call(this,f,this.errors[f][j]);return this},on:function(h){return this.errors[h]||[]},size:function(){var h=0;this.each(function(){h++});return h}};
Model.InstanceMethods={asJSON:function(){return this.attr()},attr:function(h,f){if(arguments.length===0)return jQuery.extend({},this.attributes,this.changes);else if(arguments.length===2){if(this.attributes[h]===f)delete this.changes[h];else this.changes[h]=f;return this}else if(typeof h==="object"){for(var j in h)this.attr(j,h[j]);return this}else return h in this.changes?this.changes[h]:this.attributes[h]},callPersistMethod:function(h,f){var j=this,m=function(s){if(s){j.merge(j.changes).reset();
h==="destroy"?j.constructor.remove(j):j.constructor.add(j);j.trigger(h)}var t;if(f)t=f.apply(j,arguments);return t};this.constructor._persistence?this.constructor._persistence[h](this,m):m.call(this,true)},destroy:function(h){this.callPersistMethod("destroy",h);return this},id:function(){return this.attributes[this.constructor.unique_key]},merge:function(h){jQuery.extend(this.attributes,h);return this},newRecord:function(){return this.id()===undefined},reset:function(){this.errors.clear();this.changes=
{};return this},save:function(h){if(this.valid())this.callPersistMethod(this.newRecord()?"create":"update",h);else h&&h(false);return this},valid:function(){this.errors.clear();this.validate();return this.errors.size()===0},validate:function(){return this}};
Model.localStorage=function(h){if(!window.localStorage)return{create:function(s,t){t(true)},destroy:function(s,t){t(true)},read:function(s){s([])},update:function(s,t){t(true)}};var f=[h._name,"collection"].join("-"),j=function(){var s=localStorage[f];return s?JSON.parse(s):[]},m=function(s){localStorage.setItem(s.uid,JSON.stringify(s.asJSON()));s=s.uid;var t=j();if(jQuery.inArray(s,t)===-1){t.push(s);localStorage.setItem(f,JSON.stringify(t))}};return{create:function(s,t){m(s);t(true)},destroy:function(s,
t){localStorage.removeItem(s.uid);var z=s.uid,J=j();z=jQuery.inArray(z,J);if(z>-1){J.splice(z,1);localStorage.setItem(f,JSON.stringify(J))}t(true)},read:function(s){if(!s)return false;for(var t=h.map(function(){return this.uid}),z=j(),J=[],C,y,Q=0,W=z.length;Q<W;Q++){y=z[Q];if(jQuery.inArray(y,t)==-1){C=JSON.parse(localStorage[y]);C=new h(C);C.uid=y;J.push(C)}}s(J)},update:function(s,t){m(s);t(true)}}};Model.Log=function(){window.console&&window.console.log.apply(window.console,arguments)};
Model.Module={extend:function(h){jQuery.extend(this,h);return this},include:function(h){jQuery.extend(this.prototype,h);return this}};
Model.REST=function(h,f,j){var m=/:([\w\d]+)/g,s=function(){for(var t=[],z;(z=m.exec(f))!==null;)t.push(z[1]);return t}();return jQuery.extend({path:function(t){var z=f;jQuery.each(s,function(J,C){z=z.replace(":"+C,t.attributes[C])});return z},create:function(t,z){return this.xhr("POST",this.create_path(t),t,z)},create_path:function(t){return this.path(t)},destroy:function(t,z){return this.xhr("DELETE",this.destroy_path(t),t,z)},destroy_path:function(t){return this.update_path(t)},params:function(t){var z;
if(t){var J=t.asJSON();delete J[t.constructor.unique_key];z={};z[t.constructor._name.toLowerCase()]=J}else z=null;if(jQuery.ajaxSettings.data)z=jQuery.extend({},jQuery.ajaxSettings.data,z);return z},read:function(t){return this.xhr("GET",this.read_path(),null,function(z,J,C){C=jQuery.makeArray(C);z=[];J=0;for(var y=C.length;J<y;J++)z.push(new h(C[J]));t(z)})},read_path:function(){return f},update:function(t,z){return this.xhr("PUT",this.update_path(t),t,z)},update_path:function(t){return[this.path(t),
t.id()].join("/")},xhr:function(t,z,J,C){var y=this,Q=t=="GET"?undefined:this.params(J);return jQuery.ajax({type:t,url:z+".json",dataType:"json",data:Q,dataFilter:function(W){return/\S/.test(W)?W:undefined},complete:function(W,la){y.xhrComplete(W,la,J,C)}})},xhrComplete:function(t,z,J,C){var y=Model.REST["handle"+t.status];y&&y.call(this,t,z,J);z=z==="success";y=Model.REST.parseResponseData(t);z&&J&&y&&J.attr(y);C&&C.call(J,z,t,y)}},j)};Model.RestPersistence=Model.REST;
Model.REST.handle422=function(h,f,j){if(h=Model.REST.parseResponseData(h)){j.errors.clear();for(var m in h)for(f=0;f<h[m].length;f++)j.errors.add(m,h[m][f])}};Model.REST.parseResponseData=function(h){try{return/\S/.test(h.responseText)?jQuery.parseJSON(h.responseText):undefined}catch(f){Model.Log(f)}};Model.UID={counter:0,generate:function(){return[(new Date).valueOf(),this.counter++].join("-")},reset:function(){this.counter=0;return this}};Model.VERSION="0.10.1";
Model.Base=function(){function h(){}h.prototype=jQuery.extend({},Model.Callbacks,Model.InstanceMethods);return h}();
Model.SinatraREST=function(h,f,j){var m=/:([\w\d]+)/g,s=function(){for(var t=[],z;(z=m.exec(f))!==null;)t.push(z[1]);return t}();return jQuery.extend({path:function(t){var z=f;jQuery.each(s,function(J,C){z=z.replace(":"+C,t.attributes[C])});return z},create:function(t,z){return this.xhr("POST",this.create_path(t),t,z)},create_path:function(t){return this.path(t)},destroy:function(t,z){return this.xhr("DELETE",this.destroy_path(t),t,z)},destroy_path:function(t){return this.update_path(t)},params:function(t){var z;
if(t){var J=t.asJSON();delete J[t.constructor.unique_key];z={};z[t.constructor._name.toLowerCase()]=J}else z=null;if(jQuery.ajaxSettings.data)z=jQuery.extend({},jQuery.ajaxSettings.data,z);return z},read:function(t){return this.xhr("GET",this.read_path(),null,function(z,J,C){C=jQuery.makeArray(C);z=[];J=0;for(var y=C.length;J<y;J++)z.push(new h(C[J]));t(z)})},read_path:function(){return f},update:function(t,z){return this.xhr("PUT",this.update_path(t),t,z)},update_path:function(t){return[this.path(t),
t.id()].join("/")},xhr:function(t,z,J,C){var y=this,Q=t=="GET"?undefined:this.params(J);return jQuery.ajax({type:t,url:z+".json",dataType:"json",data:Q,complete:function(W,la){y.xhrComplete(W,la,J,C)}})},xhrComplete:function(t,z,J,C){var y=Model.REST["handle"+t.status];y&&y.call(this,t,z,J);z=z==="success";y=Model.REST.parseResponseData(t);z&&J&&y&&J.attr(y);C&&C.call(J,z,t,y)}},j)};
var CodeMirror=function(){function h(c,A){function L(b){Za=null;var e={line:0,ch:0};ja(e,{line:V.length-1,ch:V[V.length-1].text.length},X(b),e,e);Za=new z}function M(){if(ma.readOnly!="nocursor"){!Wa&&ma.onFocus&&ma.onFocus($a);Wa=true;sa();if(va.className.search(/\bCodeMirror-focused\b/)==-1)va.className+=" CodeMirror-focused";dc()}}function R(){Wa&&ma.onBlur&&ma.onBlur($a);clearInterval(bc);hb=null;Wa=false;va.className=va.className.replace(" CodeMirror-focused","")}function ja(b,e,g,i,k){if(Za){for(var n=
[],p=b.line,r=e.line+1;p<r;++p)n.push(V[p].text);for(Za.addChange(b.line,g.length,n);Za.done.length>ma.undoDepth;)Za.done.shift()}ua(b,e,g,i,k)}function ia(b,e){var g=b.pop();if(g){for(var i=[],k=g.start+g.added,n=g.start;n<k;++n)i.push(V[n].text);e.push({start:g.start,added:g.old.length,old:i});n=g.start+g.old.length-1;i=i[i.length-1];var p=g.old[g.old.length-1];if(p)if(i){for(var r=i.length,w=p.length;r>=0&&w>=0;--r,--w)if(i.charAt(r)!=p.charAt(w))break;i=w+1}else i=p.length;else i=i?i.length:0;
n=Ka({line:n,ch:i});ua({line:g.start,ch:0},{line:k-1,ch:V[k-1].text.length},g.old,n,n)}}function wa(){ia(Za.done,Za.undone)}function Ga(){ia(Za.undone,Za.done)}function ua(b,e,g,i,k){for(var n=false,p=Eb.length,r=b.line;r<e.line;++r)if(V[r].text.length==p){n=true;break}var w=e.line-b.line;r=V[b.line];var B=V[e.line];if(r==B)if(g.length==1)r.replace(b.ch,e.ch,g[0]);else{B=r.split(e.ch,g[g.length-1]);var P=[b.line+1,w];r.replace(b.ch,r.text.length,g[0]);r=1;for(var ba=g.length-1;r<ba;++r)P.push(new s(g[r]));
P.push(B);V.splice.apply(V,P)}else if(g.length==1){r.replace(b.ch,r.text.length,g[0]+B.text.slice(e.ch));V.splice(b.line+1,w)}else{P=[b.line+1,w-1];r.replace(b.ch,r.text.length,g[0]);B.replace(0,e.ch,g[g.length-1]);r=1;for(ba=g.length-1;r<ba;++r)P.push(new s(g[r]));V.splice.apply(V,P)}r=b.line;for(ba=r+g.length;r<ba;++r){B=V[r].text;if(B.length>p){Eb=B;p=B.length;n=false}}if(n){r=p=0;for(ba=V.length;r<ba;++r){B=V[r].text;if(B.length>p){p=B.length;Eb=B}}}n=[];w=g.length-w-1;r=0;for(B=cb.length;r<B;++r){p=
cb[r];if(p<b.line)n.push(p);else p>e.line&&n.push(p+w)}g.length&&n.push(b.line);cb=n;Kb(100);Ua.push({from:b.line,to:e.line+1,diff:w});pb={from:b,to:e,text:g};xb(i,k,N.from.line<=Math.min(e.line,e.line+w)?N.from.line:N.from.line+w,N.to.line<=Math.min(e.line,e.line+w)?N.to.line:N.to.line+w);Ab.style.height=V.length*ab()+2*Ya.offsetTop+"px"}function Na(b,e,g){function i(n){if(l(n,e))return n;if(!l(g,n))return k;var p=n.line+b.length-(g.line-e.line)-1,r=n.ch;if(n.line==g.line)r+=b[b.length-1].length-
(g.ch-(g.line==e.line?e.ch:0));return{line:p,ch:r}}e=Ka(e);g=g?Ka(g):e;b=X(b);var k;ea(b,e,g,function(n){k=n;return{from:i(N.from),to:i(N.to)}});return k}function G(b,e){ea(X(b),N.from,N.to,function(g){return e=="end"?{from:g,to:g}:e=="start"?{from:N.from,to:N.from}:{from:N.from,to:g}})}function ea(b,e,g,i){i=i({line:e.line+b.length-1,ch:b.length==1?b[0].length+e.ch:b[b.length-1].length});ja(e,g,b,i.from,i.to)}function aa(b,e){var g=b.line,i=e.line;if(g==i)return V[g].text.slice(b.ch,e.ch);var k=
[V[g].text.slice(b.ch)];for(g=g+1;g<i;++g)k.push(V[g].text);k.push(V[i].text.slice(0,e.ch));return k.join("\n")}function ha(){return aa(N.from,N.to)}function sa(){Pb||ac.set(2E3,function(){Yb();La();Wa&&sa();Zb()})}function ta(b){function e(){Yb();var i=La();if(i=="moved"&&b)Oa[b]=true;if(!i&&!g){g=true;ac.set(80,e)}else{Pb=false;sa()}Zb()}var g=false;Pb=true;ac.set(20,e)}function La(){function b(Ba,Ca){for(var o=0;;){var u=g.indexOf("\n",o);if(u==-1||(g.charAt(u-1)=="\r"?u-1:u)>=Ba)return{line:Ca,
ch:Ba-o};++Ca;o=u+1}}if(!Xa){var e=false,g=Ea.value,i=O(Ea);if(!i)return false;e=Pa.text!=g;var k=ub,n=e||i.start!=Pa.start||i.end!=(k?Pa.start:Pa.end);if(!n&&!k)return false;if(e){hb=ub=null;if(ma.readOnly){bb=true;return"changed"}}var p=b(i.start,Pa.from),r=b(i.end,Pa.from);if(k){p=i.start==k.anchor?r:p;r=hb?N.to:i.start==k.anchor?p:r;if(!l(p,r)){ub=null;N.inverted=false;k=p;p=r;r=k}}if(p.line==r.line&&p.line==N.from.line&&p.line==N.to.line&&!hb)bb=false;if(e){k=0;for(var w=g.length,B=Math.min(w,
Pa.text.length),P,ba=Pa.from,ka=-1;k<B&&(P=g.charAt(k))==Pa.text.charAt(k);){++k;if(P=="\n"){ba++;ka=k}}B=ka>-1?k-ka:k;for(var Ia=Pa.to-1,za=Pa.text.length;;){P=Pa.text.charAt(za);P=="\n"&&Ia--;if(g.charAt(w)!=P){++w;++za;break}if(za<=k||w<=k)break;--w;--za}ka=Pa.text.lastIndexOf("\n",za-1);ja({line:ba,ch:B},{line:Ia,ch:ka==-1?za:za-ka-1},X(g.slice(k,w)),p,r);if(ba!=Ia||p.line!=ba)bb=true}else xb(p,r);Pa.text=g;Pa.start=i.start;Pa.end=i.end;return e?"changed":n?"moved":false}}function gb(){for(var b=
[],e=Math.max(0,N.from.line-1),g=Math.min(V.length,N.to.line+2),i=e;i<g;++i)b.push(V[i].text);b=Ea.value=b.join(fa);var k=N.from.ch,n=N.to.ch;for(i=e;i<N.from.line;++i)k+=fa.length+V[i].text.length;for(i=e;i<N.to.line;++i)n+=fa.length+V[i].text.length;Pa={text:b,from:e,to:g,start:k,end:n};U(Ea,k,ub?k:n)}function kb(){ma.readOnly!="nocursor"&&Ea.focus()}function Fb(){var b=Wb(N.inverted?N.from:N.to);return Rb(b.x,b.y,b.x,b.yBot)}function Rb(b,e,g,i){var k=Ya.offsetLeft,n=Ya.offsetTop,p=ab();e+=n;i+=
n;b+=k;g+=k;var r=va.clientHeight,w=va.scrollTop;k=false;n=true;if(e<w){va.scrollTop=Math.max(0,e-2*p);k=true}else if(i>w+r){va.scrollTop=i+p-r;k=true}e=va.clientWidth;i=va.scrollLeft;if(b<i){va.scrollLeft=Math.max(0,b-10);k=true}else if(g>e+i){va.scrollLeft=g+10-e;k=true;if(g>Ab.clientWidth)n=false}k&&ma.onScroll&&ma.onScroll($a);return n}function Sb(){var b=ab(),e=va.scrollTop-Ya.offsetTop;return{from:Math.min(V.length,Math.max(0,Math.floor(e/b))),to:Math.min(V.length,Math.ceil((e+va.clientHeight)/
b))}}function lb(b){if(va.clientWidth){for(var e=b===true?[]:[{from:Ha,to:ib,domStart:0}],g=0,i=b.length||0;g<i;++g){for(var k=b[g],n=[],p=k.diff||0,r=0,w=e.length;r<w;++r){var B=e[r];if(k.to<=B.from)n.push({from:B.from+p,to:B.to+p,domStart:B.domStart});else if(B.to<=k.from)n.push(B);else{k.from>B.from&&n.push({from:B.from,to:k.from,domStart:B.domStart});k.to<B.to&&n.push({from:k.to+p,to:B.to+p,domStart:B.domStart+(k.to-B.from)})}}e=n}p=Sb();k=Math.min(Ha,Math.max(p.from-3,0));n=Math.min(V.length,
Math.max(ib,p.to+3));b=[];r=0;w=ib-Ha;var P=k,ba=0;g=0;for(i=e.length;g<i;++g){B=e[g];if(!(B.to<=k)){if(B.from>=n)break;if(B.domStart>r||B.from>P){b.push({from:P,to:B.from,domSize:B.domStart-r,domStart:r});ba+=B.from-P}P=B.to;r=B.domStart+(B.to-B.from)}}if(r!=w||P!=n){ba+=Math.abs(n-P);b.push({from:P,to:n,domSize:w-r,domStart:r})}if(b.length){Qa.style.display="none";if(ba>(p.to-p.from)*0.3){B=k=Math.max(p.from-10,0);e=n=Math.min(p.to+7,V.length);g=[];i={line:B,ch:0};i=l(N.from,i)&&!l(N.to,i);for(B=
B;B<e;++B){r=p=null;if(i){p=0;if(N.to.line==B){i=false;r=N.to.ch}}else if(N.from.line==B)if(N.to.line==B){p=N.from.ch;r=N.to.ch}else{i=true;p=N.from.ch}g.push(V[B].getHTML(p,r,true))}Qa.innerHTML=g.join("")}else{e=N.from.line;g=N.to.line;i=0;B=na&&mb.createElement("div");p=0;for(r=b.length;p<r;++p){w=b[p];P=w.to-w.from-w.domSize;ba=Qa.childNodes[w.domStart+w.domSize+i]||null;if(na)for(var ka=Math.max(-P,w.domSize);ka>0;--ka)Qa.removeChild(ba?ba.previousSibling:Qa.lastChild);else if(P){for(ka=Math.max(0,
P);ka>0;--ka)Qa.insertBefore(mb.createElement("pre"),ba);for(ka=Math.max(0,-P);ka>0;--ka)Qa.removeChild(ba?ba.previousSibling:Qa.lastChild)}var Ia=Qa.childNodes[w.domStart+i],za=e<w.from&&g>=w.from;for(ka=w.from;ka<w.to;++ka){var Ba=null,Ca=null;if(za){Ba=0;if(g==ka){za=false;Ca=N.to.ch}}else if(e==ka)if(g==ka){Ba=N.from.ch;Ca=N.to.ch}else{za=true;Ba=N.from.ch}if(na){B.innerHTML=V[ka].getHTML(Ba,Ca,true);Qa.insertBefore(B.firstChild,ba)}else{Ia.innerHTML=V[ka].getHTML(Ba,Ca,false);Ia.className=V[ka].className||
"";Ia=Ia.nextSibling}}i+=P}}Qa.style.display="";e=k!=Ha||n!=ib||kc!=va.clientHeight;Ha=k;ib=n;Lb.style.top=k*ab()+"px";if(e){kc=va.clientHeight;Ab.style.height=V.length*ab()+2*Ya.offsetTop+"px";Gb()}k=Jb(Eb);Ya.style.width=k>va.clientWidth?k+"px":"";if(Qa.childNodes.length!=ib-Ha)throw new Error("BAD PATCH! "+JSON.stringify(b)+" size="+(ib-Ha)+" nodes="+Qa.childNodes.length);Hb()}}else Ha=ib=0}function Gb(){if(ma.gutter||ma.lineNumbers){var b=Lb.offsetHeight,e=va.clientHeight;nb.style.height=(b-e<
2?e:b)+"px";b=[];for(e=Ha;e<ib;++e){var g=V[e].gutterMarker,i=ma.lineNumbers?e+ma.firstLineNumber:null;if(g&&g.text)i=g.text.replace("%N%",i!=null?i:"");else if(i==null)i="\u00a0";b.push(g&&g.style?'<pre class="'+g.style+'">':"<pre>",i,"</pre>")}nb.style.display="none";Mb.innerHTML=b.join("");b=String(V.length).length;e=Mb.firstChild;g=e.textContent||e.innerText||e.nodeValue||"";for(i="";g.length+i.length<b;)i+="\u00a0";i&&e.insertBefore(mb.createTextNode(i),e.firstChild);nb.style.display="";Ya.style.marginLeft=
nb.offsetWidth+"px"}}function Hb(){var b=N.inverted?N.from:N.to,e=Ub(b.line,b.ch)+"px";b=(b.line-Ha)*ab()+"px";$b.style.top=b;if(oa(N.from,N.to)){ob.style.top=b;ob.style.left=e;ob.style.display=""}else ob.style.display="none"}function rb(b,e){var g=hb&&Ka(hb);if(g)if(l(g,b))b=g;else if(l(e,g))e=g;xb(b,e)}function xb(b,e,g,i){if(!(oa(N.from,b)&&oa(N.to,e))){if(l(e,b)){var k=e;e=b;b=k}k=oa(N.to,e);var n=oa(N.from,b);if(oa(b,e))N.inverted=false;else if(k&&!n)N.inverted=true;else if(n&&!k)N.inverted=
false;if(g==null){g=N.from.line;i=N.to.line}if(oa(b,e))oa(N.from,N.to)||Ua.push({from:g,to:i+1});else if(oa(N.from,N.to))Ua.push({from:b.line,to:e.line+1});else{oa(b,N.from)||(b.line<g?Ua.push({from:b.line,to:Math.min(e.line,g)+1}):Ua.push({from:g,to:Math.min(i,b.line)+1}));oa(e,N.to)||(e.line<i?Ua.push({from:Math.max(g,b.line),to:i+1}):Ua.push({from:Math.max(b.line,i),to:e.line+1}))}N.from=b;N.to=e;db=true}}function yb(b,e,g){b=Ka({line:b,ch:e||0});(g?rb:xb)(b,b)}function zb(b){return Math.max(0,
Math.min(b,V.length-1))}function Ka(b){if(b.line<0)return{line:0,ch:0};if(b.line>=V.length)return{line:V.length-1,ch:V[V.length-1].text.length};var e=b.ch,g=V[b.line].text.length;return e==null||e>g?{line:b.line,ch:g}:e<0?{line:b.line,ch:0}:b}function lc(b){rb({line:b,ch:0},{line:b,ch:V[b].text.length})}function sb(b,e){if(e=="smart")if(Ta.indent)var g=hc(b);else e="prev";var i=V[b],k=i.indentation(),n=i.text.match(/^\s*/)[0],p;if(e=="prev")p=b?V[b-1].indentation():0;else if(e=="smart")p=Ta.indent(g,
i.text.slice(n.length));else if(e=="add")p=k+ma.indentUnit;else if(e=="subtract")p=k-ma.indentUnit;p=Math.max(0,p);if(p-k){k="";g=0;if(ma.indentWithTabs)for(i=Math.floor(p/ga);i;--i){g+=ga;k+="\t"}for(;g<p;){++g;k+=" "}}else{if(N.from.line!=b&&N.to.line!=b)return;k=n}Na(k,{line:b,ch:0},{line:b,ch:n.length})}function ec(){Ta=h.getMode(ma,ma.mode);for(var b=0,e=V.length;b<e;++b)V[b].stateAfter=null;cb=[0];Kb()}function Tb(b,e,g){function i(r,w,B,P){r=V[r];w=r.addMark(w,B,P);w.line=r;k.push(w)}b=Ka(b);
e=Ka(e);var k=[];if(b.line==e.line)i(b.line,b.ch,e.ch,g);else{i(b.line,b.ch,null,g);for(var n=b.line+1,p=e.line;n<p;++n)i(n,0,null,g);i(e.line,0,e.ch,g)}Ua.push({from:b.line,to:e.line+1});return function(){for(var r,w,B=0;B<k.length;++B){var P=k[B],ba=x(V,P.line);P.line.removeMark(P);if(ba>-1){if(r==null)r=ba;w=ba}}r!=null&&Ua.push({from:r,to:w+1})}}function Jb(b){eb.innerHTML="<pre><span>x</span></pre>";eb.firstChild.firstChild.firstChild.nodeValue=b;return eb.firstChild.firstChild.offsetWidth||
10}function Ub(b,e){if(e==0)return 0;eb.innerHTML="<pre><span>"+V[b].getHTML(null,null,false,e)+"</span></pre>";return eb.firstChild.firstChild.offsetWidth}function Vb(b,e){function g(P){eb.innerHTML="<pre><span>"+i.getHTML(null,null,false,P)+"</span></pre>";return eb.firstChild.firstChild.offsetWidth}if(e<=0)return 0;for(var i=V[b],k=0,n=0,p=i.text.length,r,w=Math.min(p,Math.ceil(e/Jb("x")));;){var B=g(w);if(B<=e&&w<p)w=Math.min(p,Math.ceil(w*1.2));else{r=B;p=w;break}}if(e>r)return p;w=Math.floor(p*
0.8);B=g(w);if(B<e){k=w;n=B}for(;;){if(p-k<=1)return r-e>e-n?k:p;w=Math.ceil((k+p)/2);B=g(w);if(B>e){p=w;r=B}else{k=w;n=B}}}function Wb(b,e){var g=ab(),i=b.line-(e?Ha:0);return{x:Ub(b.line,b.ch),y:i*g,yBot:(i+1)*g}}function fc(b){b=Wb(b,true);var e=pa(Ya);return{x:e.left+b.x,y:e.top+b.y,yBot:e.top+b.yBot}}function ab(){var b=Qa.childNodes.length;if(b)return Qa.offsetHeight/b||1;eb.innerHTML="<pre>x</pre>";return eb.firstChild.offsetHeight||1}function tb(b,e){var g=pa(va,true),i=b.e.clientX,k=b.e.clientY;
if(!e&&(i-g.left>va.clientWidth||k-g.top>va.clientHeight))return null;g=pa(Ya,true);k=Ha+Math.floor((k-g.top)/ab());return Ka({line:k,ch:Vb(zb(k),i-g.left)})}function gc(b){function e(){Ea.value!=k&&ya(G)(Ea.value,"end");Ea.style.cssText=i;Xa=false;gb();sa()}var g=tb(b);if(!(!g||window.opera)){if(oa(N.from,N.to)||l(g,N.from)||!l(g,N.to))yb(g.line,g.ch);var i=Ea.style.cssText;Ea.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.pageY()-1)+"px; left: "+(b.pageX()-1)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden;";
var k=Ea.value=ha();kb();U(Ea,0,Ea.value.length);Xa=true;if(S){b.stop();var n=Q(window,"mouseup",function(){n();setTimeout(e,20)},true)}else setTimeout(e,50)}}function dc(){clearInterval(bc);var b=true;ob.style.visibility="";bc=setInterval(function(){ob.style.visibility=(b=!b)?"":"hidden"},650)}function Va(b){function e(Ca,o,u){if(Ca.text){var F=Ca.styles;Ca=p?0:Ca.text.length-1;for(var H,D=p?0:F.length-2,I=p?F.length:-2;D!=I;D+=2*r){var T=F[D];if(F[D+1]!=null&&F[D+1]!=ba)Ca+=r*T.length;else for(var Z=
p?0:T.length-1,ra=p?T.length:-1;Z!=ra;Z+=r,Ca+=r)if(Ca>=o&&Ca<u&&Ia.test(H=T.charAt(Z))){var Ma=a[H];if(Ma.charAt(1)==">"==p)ka.push(H);else if(ka.pop()!=Ma.charAt(0))return{pos:Ca,match:false};else if(!ka.length)return{pos:Ca,match:true}}}}}var g=N.inverted?N.from:N.to,i=V[g.line],k=g.ch-1,n=k>=0&&a[i.text.charAt(k)]||a[i.text.charAt(++k)];if(n){n.charAt(0);var p=n.charAt(1)==">",r=p?1:-1,w=i.styles,B=k+1;n=0;for(var P=w.length;n<P;n+=2)if((B-=w[n].length)<=0){var ba=w[n+1];break}var ka=[i.text.charAt(k)],
Ia=/[(){}[\]]/;n=g.line;for(P=p?Math.min(n+50,V.length):Math.max(-1,n-50);n!=P;n+=r){i=V[n];w=n==g.line;if(i=e(i,w&&p?k+1:0,w&&!p?k:i.text.length)){ba=i.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var za=Tb({line:g.line,ch:k},{line:g.line,ch:k+1},ba),Ba=Tb({line:n,ch:i.pos},{line:n,ch:i.pos+1},ba);g=ya(function(){za();Ba()});if(b)setTimeout(g,800);else qb=g;break}}}}function Xb(b){for(var e,g,i=b;i>b-40;--i){if(i==0)return 0;var k=V[i-1];if(k.stateAfter)return i;k=k.indentation();
if(g==null||e>k){g=i;e=k}}return g}function hc(b){var e=Xb(b),g=e&&V[e-1].stateAfter;g=g?f(Ta,g):j(Ta);for(e=e;e<b;++e){var i=V[e];i.highlight(Ta,g);i.stateAfter=f(Ta,g)}V[b].stateAfter||cb.push(b);return g}function mc(){for(var b=+new Date+ma.workTime,e=false;cb.length;){var g=V[Ha].stateAfter?cb.pop():Ha;if(!(g>=V.length)){e=true;var i=Xb(g),k=i&&V[i-1].stateAfter;k=k?f(Ta,k):j(Ta);i=i;for(var n=V.length;i<n;++i){var p=V[i],r=p.stateAfter;if(+new Date>b){cb.push(i);Kb(ma.workDelay);Ua.push({from:g,
to:i});return}var w=p.highlight(Ta,k);p.stateAfter=f(Ta,k);if(r&&!w&&p.text)break}Ua.push({from:g,to:i})}}e&&ma.onHighlightComplete&&ma.onHighlightComplete($a)}function Kb(b){cb.length&&cc.set(b,ya(mc))}function Yb(){bb=null;Ua=[];pb=db=false}function Zb(){var b=false;if(db)b=!Fb();if(Ua.length)lb(Ua);else db&&Hb();b&&Fb();db&&dc();if(!Xa&&(bb===true||bb!==false&&db))gb();db&&ma.matchBrackets&&setTimeout(ya(function(){if(qb){qb();qb=null}Va(false)}),20);b=pb;db&&ma.onCursorActivity&&ma.onCursorActivity($a);
b&&ma.onChange&&$a&&ma.onChange($a,b)}function ya(b){return function(){d++||Yb();try{var e=b.apply(this,arguments)}finally{--d||Zb()}return e}}function ic(b,e,g){this.atOccurrence=false;if(g==null)g=typeof b=="string"&&b==b.toLowerCase();e=e&&typeof e=="object"?Ka(e):{line:0,ch:0};this.pos={from:e,to:e};if(typeof b!="string")this.matches=function(n,p){if(n)for(var r=V[p.line].text.slice(0,p.ch),w=r.match(b),B=0;w;){var P=r.indexOf(w[0]);B+=P;r=r.slice(P+1);if(P=r.match(b))w=P;else break;B++}else{r=
V[p.line].text.slice(p.ch);B=(w=r.match(b))&&p.ch+r.indexOf(w[0])}if(w)return{from:{line:p.line,ch:B},to:{line:p.line,ch:B+w[0].length},match:w}};else{if(g)b=b.toLowerCase();var i=g?function(n){return n.toLowerCase()}:function(n){return n},k=b.split("\n");this.matches=k.length==1?function(n,p){var r=i(V[p.line].text),w=b.length,B;if(n?p.ch>=w&&(B=r.lastIndexOf(b,p.ch-w))!=-1:(B=r.indexOf(b,p.ch))!=-1)return{from:{line:p.line,ch:B},to:{line:p.line,ch:B+w}}}:function(n,p){var r=p.line,w=n?k.length-
1:0,B=k[w],P=i(V[r].text),ba=n?P.indexOf(B)+B.length:P.lastIndexOf(B);if(!(n?ba>=p.ch||ba!=B.length:ba<=p.ch||ba!=P.length-B.length))for(;;){if(n?!r:r==V.length-1)return;P=i(V[r+=n?-1:1].text);B=k[n?--w:++w];if(w>0&&w<k.length-1)if(P!=B)return;else continue;w=n?P.lastIndexOf(B):P.indexOf(B)+B.length;if(n?w!=P.length-B.length:w!=B.length)return;B={line:p.line,ch:ba};r={line:r,ch:w};return{from:n?r:B,to:n?B:r}}}}}var ma={},Qb=h.defaults;for(var fb in Qb)if(Qb.hasOwnProperty(fb))ma[fb]=(A&&A.hasOwnProperty(fb)?
A:Qb)[fb];var mb=ma.document,va=mb.createElement("div");va.className="CodeMirror";if(window.ActiveXObject&&/MSIE [1-7]\b/.test(navigator.userAgent))va.style.position="relative";va.innerHTML='<div style="position: relative"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"></div><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div style="overflow: hidden; position: absolute; width: 1px; height: 0; left: 0"><textarea style="position: absolute; width: 100000px;" wrap="off"></textarea></div><div class="CodeMirror-lines"><div style="position: relative"><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div>';
c.appendChild?c.appendChild(va):c(va);var Ab=va.firstChild,eb=Ab.firstChild,Lb=eb.nextSibling,nb=Lb.firstChild,Mb=nb.firstChild,$b=nb.nextSibling,Ea=$b.firstChild,Ya=$b.nextSibling.firstChild,ob=Ya.firstChild,Qa=ob.nextSibling;if(ma.tabindex!=null)Ea.tabindex=ma.tabindex;if(!ma.gutter&&!ma.lineNumbers)nb.style.display="none";var ac=new W,cc=new W,bc,Ta,V=[new s("")],cb,Za=new z,Wa;ec();var N={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false},hb,ub,Db,bb,Ua,pb,db,Xa,Ha=0,ib=0,kc=0,jb=null,Pa,qb,
Eb="";ya(function(){L(ma.value||"");bb=false})();setTimeout(gb,20);Q(va,"mousedown",ya(function(b){function e(B){var P=tb(B,true);if(P&&!oa(P,n)){Wa||M();n=P;rb(k,P);bb=false;var ba=Sb();if(P.line>=ba.to||P.line<ba.from)p=setTimeout(ya(function(){e(B)}),150)}}var g=Db;Db=null;for(var i=b.target();i!=va;i=i.parentNode)if(i.parentNode==Mb){ma.onGutterClick&&ma.onGutterClick($a,x(Mb.childNodes,i)+Ha);return b.stop()}S&&b.button()==3&&gc(b);if(b.button()==1){var k=tb(b),n=k,p;if(k){Wa||M();b.stop();if(g&&
+new Date-g<400)return lc(k.line);yb(k.line,k.ch,true);var r=Q(mb,"mousemove",ya(function(B){clearTimeout(p);B.stop();e(B)}),true),w=Q(mb,"mouseup",ya(function(B){clearTimeout(p);var P=tb(B);P&&rb(k,P);B.stop();kb();bb=true;r();w()}),true)}else b.target()==va&&b.stop()}}));S||Q(va,"contextmenu",ya(gc));Q(Ab,"dblclick",ya(function(b){var e=tb(b);if(e){for(var g=V[e.line].text,i=e.ch,k=e.ch;i>0&&/\w/.test(g.charAt(i-1));)--i;for(;k<g.length&&/\w/.test(g.charAt(k));)++k;rb({line:e.line,ch:i},{line:e.line,
ch:k});b.stop();Db=+new Date}}));Q(va,"scroll",function(){lb([]);ma.onScroll&&ma.onScroll($a)});Q(window,"resize",function(){lb(true)});Q(Ea,"keyup",ya(function(b){if(!(ma.onKeyEvent&&ma.onKeyEvent($a,C(b.e)))){if(ub){ub=null;bb=true}if(b.e.keyCode==16)hb=null}}));Q(Ea,"keydown",ya(function(b){Wa||M();var e=b.e.keyCode,g=(xa?b.e.metaKey:b.e.ctrlKey)&&!b.e.altKey,i=b.e.ctrlKey||b.e.altKey||b.e.metaKey;hb=e==16||b.e.shiftKey?hb||(N.inverted?N.to:N.from):null;if(!(ma.onKeyEvent&&ma.onKeyEvent($a,C(b.e)))){if(e==
33||e==34){e=e==34;g=Math.floor(va.clientHeight/ab());i=N.inverted?N.from:N.to;yb(i.line+Math.max(g-1,1)*(e?1:-1),i.ch,true);return b.stop()}if(g&&(e==36||e==35||xa&&(e==38||e==40))){yb(e==36||e==38?0:V.length-1,true);return b.stop()}if(g&&e==65){e=V.length-1;xb({line:0,ch:0},{line:e,ch:V[e].text.length});return b.stop()}if(!ma.readOnly){if(!i&&e==13)return;if(i=!i){if(i=e==9)a:{i=b.e.shiftKey;hb=null;switch(ma.tabMode){case "default":i=false;break a;case "indent":for(var k=N.from.line,n=N.to.line;k<=
n;++k)sb(k,"smart");break;case "classic":if(oa(N.from,N.to)){i?sb(N.from.line,"smart"):G("\t","end");break}case "shift":k=N.from.line;for(n=N.to.line;k<=n;++k)sb(k,i?"subtract":"add");break}i=true}i=i}if(i)return b.stop();if(g&&e==90){wa();return b.stop()}if(g&&(b.e.shiftKey&&e==90||e==89)){Ga();return b.stop()}}jb=(g?"c":"")+e;if(N.inverted&&Oa.hasOwnProperty(jb))if(b=O(Ea)){ub={anchor:b.start};U(Ea,b.start,b.start)}ta(jb)}}));Q(Ea,"keypress",ya(function(b){if(!(ma.onKeyEvent&&ma.onKeyEvent($a,C(b.e)))){if(ma.electricChars&&
Ta.electricChars){var e=String.fromCharCode(b.e.charCode==null?b.e.keyCode:b.e.charCode);Ta.electricChars.indexOf(e)>-1&&setTimeout(ya(function(){sb(N.to.line,"smart")}),50)}e=b.e.keyCode;if(e==13){if(!ma.readOnly){G("\n","end");if(ma.enterMode!="flat")sb(N.from.line,ma.enterMode=="keep"?"prev":"smart")}b.stop()}else!b.e.ctrlKey&&!b.e.altKey&&!b.e.metaKey&&e==9&&ma.tabMode!="default"?b.stop():ta(jb)}}));Q(Ea,"focus",M);Q(Ea,"blur",R);Q(va,"dragenter",function(b){b.stop()});Q(va,"dragover",function(b){b.stop()});
Q(va,"drop",ya(function(b){var e=tb(b,true),g=b.e.dataTransfer.files;if(!(!e||ma.readOnly))if(g&&g.length&&window.FileReader&&window.File){var i=g.length,k=Array(i),n=0;for(b=0;b<i;++b)p(g[b],b);var p=function(w,B){var P=new FileReader;P.onload=function(){k[B]=P.result;++n==i&&Na(k.join(""),Ka(e),Ka(e))};P.readAsText(w)}}else try{(k=b.e.dataTransfer.getData("Text"))&&Na(k,e,e)}catch(r){}}));Q(va,"paste",function(){kb();ta()});Q(Ea,"paste",function(){ta()});Q(Ea,"cut",function(){ta()});mb.activeElement==
Ea?M():R();var $a={getValue:function(){for(var b=[],e=0,g=V.length;e<g;++e)b.push(V[e].text);return b.join("\n")},setValue:ya(L),getSelection:ha,replaceSelection:ya(G),focus:function(){kb();M();ta()},setOption:function(b,e){ma[b]=e;if(b=="lineNumbers"||b=="gutter"){var g=ma.gutter||ma.lineNumbers;nb.style.display=g?"":"none";if(g)Gb();else Qa.parentNode.style.marginLeft=0}else if(b=="mode"||b=="indentUnit")ec();else b=="readOnly"&&e=="nocursor"&&Ea.blur()},getOption:function(b){return ma[b]},undo:ya(wa),
redo:ya(Ga),indentLine:ya(function(b){b>=0&&b<V.length&&sb(b,"smart")}),historySize:function(){return{undo:Za.done.length,redo:Za.undone.length}},matchBrackets:ya(function(){Va(true)}),getTokenAt:function(b){b=Ka(b);return V[b.line].getTokenAt(Ta,hc(b.line),b.ch)},cursorCoords:function(b){if(b==null)b=N.inverted;return fc(b?N.from:N.to)},charCoords:function(b){return fc(Ka(b))},coordsChar:function(b){var e=pa(Ya),g=zb(Math.min(V.length-1,Ha+Math.floor((b.y-e.top)/ab())));return Ka({line:g,ch:Vb(zb(g),
b.x-e.left)})},getSearchCursor:function(b,e,g){return new ic(b,e,g)},markText:ya(function(b,e,g){return ya(Tb(b,e,g))}),setMarker:function(b,e,g){if(typeof b=="number")b=V[zb(b)];b.gutterMarker={text:e,style:g};Gb();return b},clearMarker:function(b){if(typeof b=="number")b=V[zb(b)];b.gutterMarker=null;Gb()},setLineClass:ya(function(b,e){if(typeof b=="number"){var g=b;b=V[zb(b)]}else{g=x(V,b);if(g==-1)return null}if(b.className!=e){b.className=e;Ua.push({from:g,to:g+1})}return b}),lineInfo:function(b){if(typeof b==
"number"){var e=b;b=V[b];if(!b)return null}else{e=x(V,b);if(e==-1)return null}var g=b.gutterMarker;return{line:e,text:b.text,markerText:g&&g.text,markerClass:g&&g.style}},addWidget:function(b,e,g){b=Wb(Ka(b),true);e.style.top=Ha*ab()+b.yBot+Ya.offsetTop+"px";e.style.left=b.x+Ya.offsetLeft+"px";Ab.appendChild(e);g&&Rb(b.x,b.yBot,b.x+e.offsetWidth,b.yBot+e.offsetHeight)},lineCount:function(){return V.length},getCursor:function(b){if(b==null)b=N.inverted;return{line:(b?N.from:N.to).line,ch:(b?N.from:
N.to).ch}},somethingSelected:function(){return!oa(N.from,N.to)},setCursor:ya(function(b,e){e==null&&typeof b.line=="number"?yb(b.line,b.ch):yb(b,e)}),setSelection:ya(function(b,e){xb(Ka(b),Ka(e||b))}),getLine:function(b){if(b>=0&&b<V.length)return V[b].text},setLine:ya(function(b,e){b>=0&&b<V.length&&Na(e,{line:b,ch:0},{line:b,ch:V[b].text.length})}),removeLine:ya(function(b){b>=0&&b<V.length&&Na("",{line:b,ch:0},Ka({line:b+1,ch:0}))}),replaceRange:ya(Na),getRange:function(b,e){return aa(Ka(b),Ka(e))},
operation:function(b){return ya(b)()},refresh:function(){lb(true)},getInputField:function(){return Ea},getWrapperElement:function(){return va}},Pb=false,a={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},d=0;ic.prototype={findNext:function(){return this.find(false)},findPrevious:function(){return this.find(true)},find:function(b){function e(k){k={line:k,ch:0};g.pos={from:k,to:k};return g.atOccurrence=false}for(var g=this,i=Ka(b?this.pos.from:this.pos.to);;){if(this.pos=this.matches(b,i)){this.atOccurrence=
true;return this.pos.match||true}if(b){if(!i.line)return e(0);i={line:i.line-1,ch:V[i.line-1].text.length}}else{if(i.line==V.length-1)return e(V.length);i={line:i.line+1,ch:0}}}},from:function(){if(this.atOccurrence)return{line:this.pos.from.line,ch:this.pos.from.ch}},to:function(){if(this.atOccurrence)return{line:this.pos.to.line,ch:this.pos.to.ch}}};return $a}function f(c,A){if(A===true)return A;if(c.copyState)return c.copyState(A);var L={};for(var M in A){var R=A[M];if(R instanceof Array)R=R.concat([]);
L[M]=R}return L}function j(c,A,L){return c.startState?c.startState(A,L):true}function m(c){this.pos=this.start=0;this.string=c}function s(c,A){this.styles=A||[c,null];this.stateAfter=null;this.text=c;this.marked=this.gutterMarker=this.className=null}function t(c,A,L,M){for(var R=0,ja=0,ia=0;ja<A;R+=2){var wa=L[R],Ga=ja+wa.length;if(ia==0){Ga>c&&M.push(wa.slice(c-ja,Math.min(wa.length,A-ja)),L[R+1]);if(Ga>=c)ia=1}else if(ia==1)Ga>A?M.push(wa.slice(0,A-ja),L[R+1]):M.push(wa,L[R+1]);ja=Ga}}function z(){this.time=
0;this.done=[];this.undone=[]}function J(){if(this.preventDefault){this.preventDefault();this.stopPropagation()}else{this.returnValue=false;this.cancelBubble=true}}function C(c){if(!c.stop)c.stop=J;return c}function y(c){this.e=c}function Q(c,A,L,M){function R(ja){L(new y(ja||window.event))}if(typeof c.addEventListener=="function"){c.addEventListener(A,R,false);if(M)return function(){c.removeEventListener(A,R,false)}}else{c.attachEvent("on"+A,R);if(M)return function(){c.detachEvent("on"+A,R)}}}function W(){this.id=
null}function la(c,A){if(A==null){A=c.search(/[^\s\u00a0]/);if(A==-1)A=c.length}for(var L=0,M=0;L<A;++L)if(c.charAt(L)=="\t")M+=ga-M%ga;else++M;return M}function pa(c,A){for(var L=c.ownerDocument.body,M=0,R=0,ja=false,ia=c;ia;ia=ia.offsetParent){M+=ia.offsetLeft;R+=ia.offsetTop;if(ia==L)ja=true}for(ia=c.parentNode;ia!=(A&&ja?null:L);ia=ia.parentNode)if(ia.scrollLeft!=null){M-=ia.scrollLeft;R-=ia.scrollTop}return{left:M,top:R}}function oa(c,A){return c.line==A.line&&c.ch==A.ch}function l(c,A){return c.line<
A.line||c.line==A.line&&c.ch<A.ch}function q(c){return c.replace(/[<>&]/g,function(A){return A=="&"?"&amp;":A=="<"?"&lt;":"&gt;"})}function x(c,A){if(c.indexOf)return c.indexOf(A);for(var L=0,M=c.length;L<M;++L)if(c[L]==A)return L;return-1}h.defaults={value:"",mode:null,indentUnit:2,indentWithTabs:false,tabMode:"classic",enterMode:"indent",electricChars:true,onKeyEvent:null,lineNumbers:false,gutter:false,firstLineNumber:1,readOnly:false,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,
onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,workTime:100,workDelay:200,undoDepth:40,tabindex:null,document:window.document};var E={},ca={};h.defineMode=function(c,A){if(!h.defaults.mode&&c!="null")h.defaults.mode=c;E[c]=A};h.defineMIME=function(c,A){ca[c]=A};h.getMode=function(c,A){if(typeof A=="string"&&ca.hasOwnProperty(A))A=ca[A];if(typeof A=="string")var L=A,M={};else if(A!=null){L=A.name;M=A}var R=E[L];if(!R){window.console&&console.warn("No mode "+L+" found, falling back to plain text.");
return h.getMode(c,"text/plain")}return R(c,M||{})};h.listModes=function(){var c=[];for(var A in E)E.propertyIsEnumerable(A)&&c.push(A);return c};h.listMIMEs=function(){var c=[];for(var A in ca)ca.propertyIsEnumerable(A)&&c.push(A);return c};h.fromTextArea=function(c,A){function L(){c.value=ia.getValue()}A||(A={});A.value=c.value;if(!A.tabindex&&c.tabindex)A.tabindex=c.tabindex;if(c.form){var M=Q(c.form,"submit",L,true);if(typeof c.form.submit=="function"){var R=c.form.submit,ja=function(){L();c.form.submit=
R;c.form.submit();c.form.submit=ja};c.form.submit=ja}}c.style.display="none";var ia=h(function(wa){c.parentNode.insertBefore(wa,c.nextSibling)},A);ia.save=L;ia.toTextArea=function(){L();c.parentNode.removeChild(ia.getWrapperElement());c.style.display="";if(c.form){M();if(typeof c.form.submit=="function")c.form.submit=R}};return ia};h.startState=j;h.copyState=f;m.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},
next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(c){var A=this.string.charAt(this.pos);if(typeof c=="string"?A==c:A&&(c.test?c.test(A):c(A))){++this.pos;return A}},eatWhile:function(c){for(var A=this.start;this.eat(c););return this.pos>A},eatSpace:function(){for(var c=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>c},skipToEnd:function(){this.pos=this.string.length},skipTo:function(c){c=this.string.indexOf(c,this.pos);
if(c>-1){this.pos=c;return true}},backUp:function(c){this.pos-=c},column:function(){return la(this.string,this.start)},indentation:function(){return la(this.string)},match:function(c,A,L){if(typeof c=="string"){if((L?this.string.toLowerCase():this.string).indexOf(L?c.toLowerCase():c,this.pos)==this.pos){if(A!==false)this.pos+=c.length;return true}}else{if((c=this.string.slice(this.pos).match(c))&&A!==false)this.pos+=c[0].length;return c}},current:function(){return this.string.slice(this.start,this.pos)}};
s.prototype={replace:function(c,A,L){var M=[],R=this.marked;t(0,c,this.styles,M);L&&M.push(L,null);t(A,this.text.length,this.styles,M);this.styles=M;this.text=this.text.slice(0,c)+L+this.text.slice(A);this.stateAfter=null;if(R){c=L.length-(A-c);L=this.text.length;for(M=0;M<R.length;++M){var ja=R[M],ia=false;if(ja.from>=L)ia=true;else{ja.from=ja.from<=Math.min(A,A+c)?ja.from:ja.from+c;if(ja.to!=null)ja.to=ja.to<=Math.min(A,A+c)?ja.to:ja.to+c}if(ia||ja.from>=ja.to){R.splice(M,1);M--}}}},split:function(c,
A){var L=[A,null];t(c,this.text.length,this.styles,L);return new s(A+this.text.slice(c),L)},addMark:function(c,A,L){c={from:c,to:A,style:L};if(this.marked==null)this.marked=[];this.marked.push(c);this.marked.sort(function(M,R){return M.from-R.from});return c},removeMark:function(c){var A=this.marked;if(A)for(var L=0;L<A.length;++L)if(A[L]==c){A.splice(L,1);break}},highlight:function(c,A){var L=new m(this.text),M=this.styles,R=0,ja=false,ia=M[0],wa;for(this.text==""&&c.blankLine&&c.blankLine(A);!L.eol();){var Ga=
c.token(L,A),ua=this.text.slice(L.start,L.pos);L.start=L.pos;if(R&&M[R-1]==Ga)M[R-2]+=ua;else if(ua){if(!ja&&(M[R+1]!=Ga||R&&M[R-2]!=wa))ja=true;M[R++]=ua;M[R++]=Ga;wa=ia;ia=M[R]}if(L.pos>5E3){M[R++]=this.text.slice(L.pos);M[R++]=null;break}}if(M.length!=R){M.length=R;ja=true}if(R&&M[R-2]!=wa)ja=true;return ja},getTokenAt:function(c,A,L){for(var M=new m(this.text);M.pos<L&&!M.eol();){M.start=M.pos;var R=c.token(M,A)}return{start:M.start,end:M.pos,string:M.current(),className:R||null,state:A}},indentation:function(){return la(this.text)},
getHTML:function(c,A,L,M){function R(kb,Fb){if(kb)Fb?ja.push('<span class="',Fb,'">',q(kb),"</span>"):ja.push(q(kb))}var ja=[];if(L)ja.push(this.className?'<pre class="'+this.className+'">':"<pre>");var ia=this.styles,wa=this.text,Ga=this.marked;if(c==A)c=null;var ua=wa.length;if(M!=null)ua=Math.min(M,ua);if(!wa&&M==null)R(" ",c!=null&&A==null?"CodeMirror-selected":null);else if(!Ga&&c==null)for(c=M=0;c<ua;M+=2){A=ia[M];var Na=A.length;if(c+Na>ua)A=A.slice(0,ua-c);c+=Na;R(A,ia[M+1])}else{M=wa=0;var G=
"",ea=-1,aa=null,ha=function(){if(Ga){ea+=1;aa=ea<Ga.length?Ga[ea]:null}};for(ha();wa<ua;){var sa=ua,ta="";if(c!=null)if(c>wa)sa=c;else if(A==null||A>wa){ta=" CodeMirror-selected";if(A!=null)sa=Math.min(sa,A)}for(;aa&&aa.to!=null&&aa.to<=wa;)ha();if(aa)if(aa.from>wa)sa=Math.min(sa,aa.from);else{ta+=" "+aa.style;if(aa.to!=null)sa=Math.min(sa,aa.to)}for(;;){var La=wa+G.length,gb=Na;if(ta)gb=Na?Na+ta:ta;R(La>sa?G.slice(0,sa-wa):G,gb);if(La>=sa){G=G.slice(sa-wa);wa=sa;break}wa=La;G=ia[M++];Na=ia[M++]}}c!=
null&&A==null&&R(" ","CodeMirror-selected")}L&&ja.push("</pre>");return ja.join("")}};z.prototype={addChange:function(c,A,L){this.undone.length=0;var M=+new Date,R=this.done[this.done.length-1];if(M-this.time>400||!R||R.start>c+A||R.start+R.added<c-R.added+R.old.length)this.done.push({start:c,added:A,old:L});else{var ja=0;if(c<R.start){for(var ia=R.start-c-1;ia>=0;--ia)R.old.unshift(L[ia]);R.added+=R.start-c;R.start=c}else if(R.start<c){ja=c-R.start;A+=ja}ia=R.added-ja;for(c=L.length;ia<c;++ia)R.old.push(L[ia]);
if(R.added<A)R.added=A}this.time=M}};y.prototype={stop:function(){J.call(this.e)},target:function(){return this.e.target||this.e.srcElement},button:function(){if(this.e.which)return this.e.which;else if(this.e.button&1)return 1;else if(this.e.button&2)return 3;else if(this.e.button&4)return 2},pageX:function(){if(this.e.pageX!=null)return this.e.pageX;var c=this.target().ownerDocument;return this.e.clientX+c.body.scrollLeft+c.documentElement.scrollLeft},pageY:function(){if(this.e.pageY!=null)return this.e.pageY;
var c=this.target().ownerDocument;return this.e.clientY+c.body.scrollTop+c.documentElement.scrollTop}};W.prototype={set:function(c,A){clearTimeout(this.id);this.id=setTimeout(A,c)}};var na=function(){var c=document.createElement("pre");c.innerHTML=" ";return!c.innerHTML}(),S=/gecko\/\d{7}/i.test(navigator.userAgent),fa="\n";(function(){var c=document.createElement("textarea");c.value="foo\nbar";if(c.value.indexOf("\r")>-1)fa="\r\n"})();for(var ga=8,xa=/Mac/.test(navigator.platform),Oa={},Ra=35;Ra<=
40;++Ra)Oa[Ra]=Oa["c"+Ra]=true;var X="\n\nb".split(/\n/).length!=3?function(c){for(var A=0,L,M=[];(L=c.indexOf("\n",A))>-1;){M.push(c.slice(A,c.charAt(L-1)=="\r"?L-1:L));A=L+1}M.push(c.slice(A));return M}:function(c){return c.split(/\r?\n/)};if(window.getSelection)var O=function(c){try{return{start:c.selectionStart,end:c.selectionEnd}}catch(A){return null}},U=function(c,A,L){try{c.setSelectionRange(A,L)}catch(M){}};else{O=function(c){try{var A=c.ownerDocument.selection.createRange()}catch(L){return null}if(!A||
A.parentElement()!=c)return null;var M=c.value,R=M.length,ja=c.createTextRange();ja.moveToBookmark(A.getBookmark());var ia=c.createTextRange();ia.collapse(false);if(ja.compareEndPoints("StartToEnd",ia)>-1)return{start:R,end:R};c=-ja.moveStart("character",-R);for(A=M.indexOf("\r");A>-1&&A<c;A=M.indexOf("\r",A+1),c++);if(ja.compareEndPoints("EndToEnd",ia)>-1)return{start:c,end:R};R=-ja.moveEnd("character",-R);for(A=M.indexOf("\r");A>-1&&A<R;A=M.indexOf("\r",A+1),R++);return{start:c,end:R}};U=function(c,
A,L){var M=c.createTextRange();M.collapse(true);var R=M.duplicate(),ja=0;c=c.value;for(var ia=c.indexOf("\n");ia>-1&&ia<A;ia=c.indexOf("\n",ia+1))++ja;for(M.move("character",A-ja);ia>-1&&ia<L;ia=c.indexOf("\n",ia+1))++ja;R.move("character",L-ja);M.setEndPoint("EndToEnd",R);M.select()}}h.defineMode("null",function(){return{token:function(c){c.skipToEnd()}}});h.defineMIME("text/plain","null");return h}();
jQuery.cookie=function(h,f,j){if(typeof f!="undefined"){j=j||{};if(f===null){f="";j.expires=-1}var m="";if(j.expires&&(typeof j.expires=="number"||j.expires.toUTCString)){if(typeof j.expires=="number"){m=new Date;m.setTime(m.getTime()+j.expires*24*60*60*1E3)}else m=j.expires;m="; expires="+m.toUTCString()}var s=j.path?"; path="+j.path:"",t=j.domain?"; domain="+j.domain:"";j=j.secure?"; secure":"";document.cookie=[h,"=",encodeURIComponent(f),m,s,t,j].join("")}else{f=null;if(document.cookie&&document.cookie!=
""){j=document.cookie.split(";");for(m=0;m<j.length;m++){s=jQuery.trim(j[m]);if(s.substring(0,h.length+1)==h+"="){f=decodeURIComponent(s.substring(h.length+1));break}}}return f}};
function Sanskrit(h,f){this.options=f||{};this.textarea=h;this.form=h.form;this.container=document.createElement("div");this.iframe=document.createElement("iframe");this.hiddenInput=document.createElement("input");this.hiddenInput.type="hidden";this.callbacks=Sanskrit.inherit(Sanskrit.prototype.callbacks);for(var j in Sanskrit.prototype.callbacks)if(Sanskrit.prototype.callbacks.hasOwnProperty(j)&&typeof this.options[j]==="function")this.callbacks[j]=this.options[j];this.replaceTextarea();var m=this;
this.onReady(function(){m.findContentDocument();if(m.richTextIsAvailable()){m.applyClassNames();m.enableEditor();m.addStyle(Sanskrit.defaultStyle);m.createToolbar();m.hijackForm()}else m.unreplaceTextarea()});Sanskrit.editors.push(this)}Sanskrit.inherit=function(h){function f(){}f.prototype=h;return new f};Sanskrit.getClassName=function(h){return h.getAttribute("class")||h.getAttribute("className")};Sanskrit.setClassName=function(h,f){h.setAttribute("class",f);h.className=f};
Sanskrit.hasClassName=function(h,f){if(!Sanskrit.getClassName(h))return false;for(var j=Sanskrit.getClassName(h).split(" "),m=0;m<j.length;m++)if(j[m]==f)return true;return false};Sanskrit.addClassName=function(h,f){if(Sanskrit.hasClassName(h,f))return false;var j=Sanskrit.getClassName(h)||"";Sanskrit.setClassName(h,j==""?f:j+" "+f);return true};
Sanskrit.removeClassName=function(h,f){for(var j=(Sanskrit.getClassName(h)||"").split(" "),m=[],s=0;s<j.length;s++)j[s]!=f&&m.push(j[s]);m=m.join(" ");Sanskrit.setClassName(h,m);return m};Sanskrit.defaultStyle="html { padding:0; cursor:text; } body { font-size:90%; margin:0; padding:0.5em; cursor:text; } p { margin: 0.5em 0; }";Sanskrit.editors=[];
Sanskrit.prototype={onReady:function(h){setTimeout(h,250)},findContentDocument:function(){if(this.iframe.contentDocument){this.internetExplorer=false;this.contentDocument=this.iframe.contentDocument}else{this.internetExplorer=true;this.contentDocument=this.iframe.contentWindow.document}return this.contentDocument},replaceTextarea:function(){this.container.appendChild(this.iframe);this.hiddenInput.value=this.textarea.value;this.hiddenInput.name=this.textarea.name;this.hiddenInput.id=this.textarea.id;
this.container.insertBefore(this.hiddenInput,this.iframe);this.textarea.parentNode.insertBefore(this.container,this.textarea);this.textarea.parentNode.removeChild(this.textarea)},unreplaceTextarea:function(){this.container.parentNode.insertBefore(this.textarea,this.container);this.container.parentNode.removeChild(this.container)},toggleTextarea:function(){if(this.iframe.parentNode){this.textarea.value=this.textilize(this.getContents());this.iframe.parentNode.insertBefore(this.textarea,this.iframe);
this.iframe.parentNode.removeChild(this.iframe);return true}else{this.textarea.parentNode.insertBefore(this.iframe,this.textarea);this.textarea.parentNode.removeChild(this.textarea);var h=this;this.onReady(function(){h.findContentDocument();h.hiddenInput.value=h.textarea.value;h.enableEditor();h.toolbar.observeEditor()});return false}},enableEditor:function(){this.contentDocument.designMode="on";try{this.execCommand("styleWithCSS",false)}catch(h){}this.setContents(this.htmlize(this.hiddenInput.value))},
focusEditor:function(){this.iframe.contentWindow.focus()},createToolbar:function(){this.toolbar=new SanskritToolbar(this,this.options.toolbar||{})},insertToolbar:function(h){this.container.insertBefore(h,this.iframe)},getContents:function(){return this.contentDocument.getElementsByTagName("body")[0].innerHTML},setContents:function(h){var f=this;setTimeout(function(){f.contentDocument.getElementsByTagName("body")[0].innerHTML=h},250)},getSelection:function(){return this.iframe.contentWindow.document.selection?
this.iframe.contentWindow.document.selection:this.iframe.contentWindow.getSelection()},getCurrentAncestors:function(){var h=this.getSelection();if(h.createRange){h=h.createRange();h=h.parentElement()}else{h=h.getRangeAt(0);h=h.commonAncestorContainer}for(var f=[];h.nodeType!==1||h.nodeName.toLowerCase()!=="body";){h.nodeType===1&&f.push(h);h=h.parentNode}return f},includeAncestor:function(h,f){f=f||this.getCurrentAncestors();for(var j=false,m=0;m<f.length;m++)if(f[m].nodeName.toLowerCase()==h.toLowerCase())j=
true;return j},applyClassNames:function(){Sanskrit.addClassName(this.container,this.options.className||"sanskrit")},hijackForm:function(){var h=this,f=this.form.onsubmit||function(){};this.form.onsubmit=function(){f();h.hiddenInput.value=h.textilize(h.iframe.parentNode?h.getContents():h.textarea.value);return h.callbacks.onSubmit.call(h)}},addStyle:function(h){var f=this;setTimeout(function(){if(document.createStyleSheet){var j=f.contentDocument.createStyleSheet(),m=h.split("}"),s,t;for(s=0;s<m.length-
1;s++){t=m[s].split("{");j.addRule(t[0],t[1])}}else{j=document.createElement("style");j.appendChild(document.createTextNode(h));f.contentDocument.getElementsByTagName("head")[0].appendChild(j)}},250)},textilize:function(h,f){h=h.replace(/\s*<p>((.|[\r\n])*?)<\/p>\s*/gi,"\n\n$1\n\n");h=h.replace(/<br ?\/?>/gi,"\n");h=h.replace(/<(?:b|strong)>((.|[\r\n])*?)<\/(?:b|strong)>/gi,"*$1*");h=h.replace(/<(?:i|em)>((.|[\r\n])*?)<\/(?:i|em)>/gi,"_$1_");h=h.replace(/<(?:strike|del)>((.|[\r\n])*?)<\/(?:strike|del)>/gi,
"-$1-");h=h.replace(/<(?:u|ins)>((.|[\r\n])*?)<\/(?:u|ins)>/gi,"+$1+");h=h.replace(/<a href="(.*?)">((.|[\r\n])*?)<\/a>/gi,'"$2":$1');h=h.replace(/<code.*?>((.|[\r\n])*?)<\/code>/gi,"@$1@");if(f)h=h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");h=h.replace(/(\r\n|\n){3,}/g,"\n\n");return h=h.replace(/^[\r\n]+|[\r\n]+$/g,"")},htmlize:function(h,f){for(var j=h.split("\n\n"),m=0;m<j.length;m++){j[m]=j[m].replace(/(^|\r\n|\n|\r)\* (.*)/g,"$1###LI### $2");j[m]=j[m].replace(/\n/gi,"<br/>");
j[m]=j[m].replace(/@((.|[\r\n])*?)@/gi,"<code>$1</code>");j[m]=j[m].replace(/\*(.+?)\*/gi,this.internetExplorer?"<strong>$1</strong>":"<b>$1</b>");j[m]=j[m].replace(/_(.+?)_/gi,this.internetExplorer?"<em>$1</em>":"<i>$1</i>");j[m]=j[m].replace(/\+(.+?)\+/gi,"<u>$1</u>");j[m]=j[m].replace(/-(.+?)-/gi,"<strike>$1</strike>");j[m]=j[m].replace(/"(.+?)":([^\s\n<]+)/gi,'<a href="$2">$1</a>');j[m]=j[m].replace(/###LI###/gi,"*");j[m]="<p>"+j[m]+"</p>"}h=j.join("\n");h=h.replace(/<p>[\s\n]*<\/p>/g,"");if(f)h=
h.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");return h},execCommand:function(h,f){if(typeof f=="undefined")f=null;this.contentDocument.execCommand(h,false,f)},richTextIsAvailable:function(){return typeof this.contentDocument.execCommand!="undefined"},callbacks:{onSubmit:function(){return true}}};
function SanskritToolbar(h,f){this.options=f||{};this.editor=h;this.list=document.createElement("ul");this.listItems=[];this.listItemCallbacks={};this.availableActions={strong:"strong",em:"em",ins:"ins",del:"del",link:"link",unlink:"unlink",textile:"textile"};this.callbacks=Sanskrit.inherit(SanskritToolbar.prototype.callbacks);for(var j in this.actions){var m="on"+j.slice(0,1).toUpperCase()+j.slice(1);if(typeof this.options[m]==="function")this.callbacks[m]=this.options[m]}this.addListItems();this.applyClassNames();
this.injectListIntoEditor();this.observeEditor()}
SanskritToolbar.prototype={actions:{strong:function(h){h.execCommand("Bold")},em:function(h){h.execCommand("Italic")},link:function(h){var f=prompt("Enter link address:");if(typeof f==="string"){f.match(/^[a-zA-Z]+:\/\//)||(f="http://"+f);h.execCommand("createLink",f)}else return false},unlink:function(h){h.execCommand("unlink");h.toolbar.deactivateListItem("link");h.toolbar.activateListItem("unlink")},del:function(h){h.execCommand("strikeThrough")},ins:function(h){h.execCommand("underline")},textile:function(h){h.toolbar.resetListStatus();
var f=h.toolbar;(h=h.toggleTextarea())?f.activateListItem("textile"):f.deactivateListItem("textile");for(var j in f.actions)if(f.actions.hasOwnProperty(j)&&j!=="textile")h?f.hideListItem(j):f.showListItem(j);return false}},callbacks:{},createAction:function(h,f){var j=this,m=h.onclick||function(){};return function(){m();if(j.actions[f](j.editor)!==false){var s="on"+f.slice(0,1).toUpperCase()+f.slice(1);typeof j.callbacks[s]==="function"&&j.callbacks[s].call(j.editor);j.updateListStatus(j.editor.getCurrentAncestors());
j.editor.focusEditor()}return false}},addListItems:function(){var h=this.options.actions||this.availableActions;for(var f in h)if(h.hasOwnProperty(f)){var j=document.createElement("li"),m=document.createElement("a");m.setAttribute("href","#");Sanskrit.addClassName(j,f);m.appendChild(typeof h[f]=="string"?document.createTextNode(h[f]):h[f]);m.onclick=this.createAction(m,f);j.appendChild(m);this.listItems.push(j);this.list.appendChild(j)}},applyClassNames:function(){Sanskrit.addClassName(this.list,
"toolbar")},injectListIntoEditor:function(){this.editor.insertToolbar(this.list)},observeEditor:function(){var h=this;setTimeout(function(){if(h.editor.contentDocument.addEventListener){h.editor.contentDocument.addEventListener("mouseup",function(){h.updateListStatus(h.editor.getCurrentAncestors())},false);h.editor.contentDocument.addEventListener("keyup",function(){h.updateListStatus(h.editor.getCurrentAncestors())},false);h.editor.contentDocument.addEventListener("keydown",function(){h.updateListStatus(h.editor.getCurrentAncestors())},
false);h.editor.contentDocument.addEventListener("blur",function(){h.resetListStatus()},false)}else{h.editor.contentDocument.attachEvent("onmouseup",function(){h.updateListStatus(h.editor.getCurrentAncestors())});h.editor.contentDocument.attachEvent("onkeyup",function(){h.updateListStatus(h.editor.getCurrentAncestors())});h.editor.contentDocument.attachEvent("onkeydown",function(){h.updateListStatus(h.editor.getCurrentAncestors())},false);h.editor.contentDocument.attachEvent("onblur",function(){h.resetListStatus()},
false)}},100)},getListItem:function(h){if(typeof h!="string")return h;for(var f=0;f<this.listItems.length;f++)if(Sanskrit.hasClassName(this.listItems[f],h))return this.listItems[f];return document.createElement("li")},activateListItem:function(h){Sanskrit.addClassName(this.getListItem(h),"active")},deactivateListItem:function(h){Sanskrit.removeClassName(this.getListItem(h),"active")},toggleListItem:function(h){h=this.getListItem(h);Sanskrit.hasClassName(h,"active")?Sanskrit.removeClassName(h,"active"):
Sanskrit.addClassName(h,"active")},hideListItem:function(h){h=this.getListItem(h);h.previousDisplayValue=h.style.display;h.style.display="none"},showListItem:function(h){h=this.getListItem(h);h.style.display=h.previousDisplayValue||""},resetListStatus:function(){for(var h=0;h<this.listItems.length;h++)this.deactivateListItem(this.listItems[h])},updateListStatus:function(h){this.resetListStatus();for(var f=0;f<h.length;f++)switch(h[f].nodeName.toLowerCase()){case "b":this.activateListItem("strong");
break;case "strong":this.activateListItem("strong");break;case "i":this.activateListItem("em");break;case "em":this.activateListItem("em");break;case "u":this.activateListItem("ins");break;case "strike":this.activateListItem("del");break;case "a":this.activateListItem("link");break}}};Sanskrit.onLoadFunction=function(){for(var h=[],f=document.getElementsByTagName("textarea"),j=0;j<f.length;j++)h.push(f[j]);for(j=0;j<h.length;j++)Sanskrit.hasClassName(h[j],"sanskrit")&&new Sanskrit(h[j])};
if(typeof Event!="undefined"&&Event.onReady)Event.onReady(Sanskrit.onLoadFunction);else if(typeof Event!="undefined"&&Event.observe)Event.observe(window,"load",Sanskrit.onLoadFunction);else if(window.addEventListener)window.addEventListener("load",Sanskrit.onLoadFunction,false);else if(window.attachEvent)window.attachEvent("onload",Sanskrit.onLoadFunction,false);else{var old=window.onload;window.onload=function(){old();Sanskrit.onLoadFunction()}}
CodeMirror.defineMode("javascript",function(h,f){function j(G,ea){for(var aa=false,ha;(ha=G.next())!=null;){if(ha==ea&&!aa)return false;aa=!aa&&ha=="\\"}return aa}function m(G,ea,aa){ia=G;wa=aa;return ea}function s(G,ea){var aa=G.next();if(aa=='"'||aa=="'"){aa=t(aa);ea.tokenize=aa;return aa(G,ea)}else if(/[\[\]{}\(\),;\:\.]/.test(aa))return m(aa);else if(aa=="0"&&G.eat(/x/i)){G.eatWhile(/[\da-f]/i);return m("number","js-atom")}else if(/\d/.test(aa)){G.match(/^\d*(?:\.\d*)?(?:e[+\-]?\d+)?/);return m("number",
"js-atom")}else if(aa=="/")if(G.eat("*")){aa=z;ea.tokenize=aa;return aa(G,ea)}else if(G.eat("/")){G.skipToEnd();return m("comment","js-comment")}else if(ea.reAllowed){j(G,"/");G.eatWhile(/[gimy]/);return m("regexp","js-string")}else{G.eatWhile(ja);return m("operator",null,G.current())}else if(ja.test(aa)){G.eatWhile(ja);return m("operator",null,G.current())}else{G.eatWhile(/[\w\$_]/);aa=G.current();var ha=R.propertyIsEnumerable(aa)&&R[aa];return ha?m(ha.type,ha.style,aa):m("variable","js-variable",
aa)}}function t(G){return function(ea,aa){if(!j(ea,G))aa.tokenize=s;return m("string","js-string")}}function z(G,ea){for(var aa=false,ha;ha=G.next();){if(ha=="/"&&aa){ea.tokenize=s;break}aa=ha=="*"}return m("comment","js-comment")}function J(G,ea,aa,ha,sa,ta){this.indented=G;this.column=ea;this.type=aa;this.prev=sa;this.info=ta;if(ha!=null)this.align=ha}function C(){for(var G=arguments.length-1;G>=0;G--)ua.cc.push(arguments[G])}function y(){C.apply(null,arguments);return true}function Q(G){var ea=
ua.state;if(ea.context){ua.marked="js-variabledef";for(var aa=ea.localVars;aa;aa=aa.next)if(aa.name==G)return;ea.localVars={name:G,next:ea.localVars}}}function W(){if(!ua.state.context)ua.state.localVars=Na;ua.state.context={prev:ua.state.context,vars:ua.state.localVars}}function la(){ua.state.localVars=ua.state.context.vars;ua.state.context=ua.state.context.prev}function pa(G,ea){var aa=function(){var ha=ua.state;ha.lexical=new J(ha.indented,ua.stream.column(),G,null,ha.lexical,ea)};aa.lex=true;
return aa}function oa(){var G=ua.state;if(G.lexical.prev){if(G.lexical.type==")")G.indented=G.lexical.indented;G.lexical=G.lexical.prev}}function l(G){return function(ea){return ea==G?y():G==";"?C():y(arguments.callee)}}function q(G){if(G=="var")return y(pa("vardef"),xa,l(";"),oa);if(G=="keyword a")return y(pa("form"),x,q,oa);if(G=="keyword b")return y(pa("form"),q,oa);if(G=="{")return y(pa("}"),ga,oa);if(G==";")return y();if(G=="function")return y(c);if(G=="for")return y(pa("form"),l("("),pa(")"),
Ra,l(")"),oa,q,oa);if(G=="variable")return y(pa("stat"),ca);if(G=="switch")return y(pa("form"),x,pa("}","switch"),l("{"),ga,oa,oa);if(G=="case")return y(x,l(":"));if(G=="default")return y(l(":"));if(G=="catch")return y(pa("form"),W,l("("),A,l(")"),q,oa,la);return C(pa("stat"),x,l(";"),oa)}function x(G){if(Ga.hasOwnProperty(G))return y(E);if(G=="function")return y(c);if(G=="keyword c")return y(x);if(G=="(")return y(pa(")"),x,l(")"),oa,E);if(G=="operator")return y(x);if(G=="[")return y(pa("]"),fa(x,
"]"),oa,E);if(G=="{")return y(pa("}"),fa(S,"}"),oa,E);return y()}function E(G,ea){if(G=="operator"&&/\+\+|--/.test(ea))return y(E);if(G=="operator")return y(x);if(G!=";"){if(G=="(")return y(pa(")"),fa(x,")"),oa,E);if(G==".")return y(na,E);if(G=="[")return y(pa("]"),x,l("]"),oa,E)}}function ca(G){if(G==":")return y(oa,q);return C(E,l(";"),oa)}function na(G){if(G=="variable"){ua.marked="js-property";return y()}}function S(G){if(G=="variable")ua.marked="js-property";if(Ga.hasOwnProperty(G))return y(l(":"),
x)}function fa(G,ea){function aa(ha){if(ha==",")return y(G,aa);if(ha==ea)return y();return y(l(ea))}return function(ha){return ha==ea?y():C(G,aa)}}function ga(G){if(G=="}")return y();return C(q,ga)}function xa(G,ea){if(G=="variable"){Q(ea);return y(Oa)}return y()}function Oa(G,ea){if(ea=="=")return y(x,Oa);if(G==",")return y(xa)}function Ra(G){if(G=="var")return y(xa,O);if(G==";")return C(O);if(G=="variable")return y(X);return C(O)}function X(G,ea){if(ea=="in")return y(x);return y(E,O)}function O(G,
ea){if(G==";")return y(U);if(ea=="in")return y(x);return y(x,l(";"),U)}function U(G){G!=")"&&y(x)}function c(G,ea){if(G=="variable"){Q(ea);return y(c)}if(G=="(")return y(pa(")"),W,fa(A,")"),oa,q,la)}function A(G,ea){if(G=="variable"){Q(ea);return y()}}var L=h.indentUnit,M=f.json,R=function(){function G(La){return{type:La,style:"js-keyword"}}var ea=G("keyword a"),aa=G("keyword b"),ha=G("keyword c"),sa=G("operator"),ta={type:"atom",style:"js-atom"};return{"if":ea,"while":ea,"with":ea,"else":aa,"do":aa,
"try":aa,"finally":aa,"return":ha,"break":ha,"continue":ha,"new":ha,"delete":ha,"throw":ha,"var":G("var"),"function":G("function"),"catch":G("catch"),"for":G("for"),"switch":G("switch"),"case":G("case"),"default":G("default"),"in":sa,"typeof":sa,"instanceof":sa,"true":ta,"false":ta,"null":ta,undefined:ta,NaN:ta,Infinity:ta}}(),ja=/[+\-*&%=<>!?|]/,ia,wa,Ga={atom:true,number:true,variable:true,string:true,regexp:true},ua={state:null,column:null,marked:null,cc:null},Na={name:"this",next:{name:"arguments"}};
oa.lex=true;return{startState:function(G){return{tokenize:s,reAllowed:true,cc:[],lexical:new J((G||0)-L,0,"block",false),localVars:null,context:null,indented:0}},token:function(G,ea){if(G.sol()){if(!ea.lexical.hasOwnProperty("align"))ea.lexical.align=false;ea.indented=G.indentation()}if(G.eatSpace())return null;var aa=ea.tokenize(G,ea);if(ia=="comment")return aa;ea.reAllowed=ia=="operator"||ia=="keyword c"||ia.match(/^[\[{}\(,;:]$/);var ha;a:{var sa=ia,ta=wa,La=ea.cc;ua.state=ea;ua.stream=G;ua.marked=
null;ua.cc=La;if(!ea.lexical.hasOwnProperty("align"))ea.lexical.align=true;for(;;)if((La.length?La.pop():M?x:q)(sa,ta)){for(;La.length&&La[La.length-1].lex;)La.pop()();if(ua.marked){ha=ua.marked;break a}if(ha=sa=="variable")b:{for(ha=ea.localVars;ha;ha=ha.next)if(ha.name==ta){ha=true;break b}ha=void 0}if(ha){ha="js-localvariable";break a}ha=aa;break a}}return ha},indent:function(G,ea){if(G.tokenize!=s)return 0;var aa=ea&&ea.charAt(0),ha=G.lexical,sa=ha.type,ta=aa==sa;return sa=="vardef"?ha.indented+
4:sa=="form"&&aa=="{"?ha.indented:sa=="stat"||sa=="form"?ha.indented+L:ha.info=="switch"&&!ta?ha.indented+(/^(?:case|default)\b/.test(ea)?L:2*L):ha.align?ha.column+(ta?0:1):ha.indented+(ta?0:L)},electricChars:":{}"}});CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:true});
CodeMirror.defineMode("xml",function(h,f){function j(S,fa){function ga(Oa){fa.tokenize=Oa;return Oa(S,fa)}var xa=S.next();if(xa=="<")if(S.eat("!"))if(S.eat("["))return S.match("CDATA[")?ga(t("xml-cdata","]]\>")):null;else if(S.match("--"))return ga(t("xml-comment","--\>"));else if(S.match("DOCTYPE")){S.eatWhile(/[\w\._\-]/);return ga(t("xml-doctype",">"))}else return null;else if(S.eat("?")){S.eatWhile(/[\w\._\-]/);fa.tokenize=t("xml-processing","?>");return"xml-processing"}else{E=S.eat("/")?"closeTag":
"openTag";S.eatSpace();for(x="";xa=S.eat(/[^\s\u00a0=<>\"\'\/?]/);)x+=xa;fa.tokenize=m;return"xml-tag"}else if(xa=="&"){S.eatWhile(/[^;]/);S.eat(";");return"xml-entity"}else{S.eatWhile(/[^&<]/);return null}}function m(S,fa){var ga=S.next();if(ga==">"||ga=="/"&&S.eat(">")){fa.tokenize=j;E=ga==">"?"endTag":"selfcloseTag";return"xml-tag"}else if(ga=="="){E="equals";return null}else if(/[\'\"]/.test(ga)){fa.tokenize=s(ga);return fa.tokenize(S,fa)}else{S.eatWhile(/[^\s\u00a0=<>\"\'\/?]/);return"xml-word"}}
function s(S){return function(fa,ga){for(;!fa.eol();)if(fa.next()==S){ga.tokenize=m;break}return"xml-attribute"}}function t(S,fa){return function(ga,xa){for(;!ga.eol();){if(ga.match(fa)){xa.tokenize=j;break}ga.next()}return S}}function z(){for(var S=arguments.length-1;S>=0;S--)ca.cc.push(arguments[S])}function J(){z.apply(null,arguments);return true}function C(S,fa){var ga=l.doNotIndent.hasOwnProperty(S)||ca.context&&ca.context.noIndent;ca.context={prev:ca.context,tagName:S,indent:ca.indented,startOfLine:fa,
noIndent:ga}}function y(S){if(S=="openTag"){ca.tagName=x;return J(la,Q(ca.startOfLine))}else if(S=="closeTag"){if(ca.context)ca.context=ca.context.prev;return J(W)}else{if(S=="xml-cdata"){if(!ca.context||ca.context.name!="!cdata")C("!cdata");if(ca.tokenize==j)if(ca.context)ca.context=ca.context.prev}return J()}}function Q(S){return function(fa){if(fa=="selfcloseTag"||fa=="endTag"&&l.autoSelfClosers.hasOwnProperty(ca.tagName.toLowerCase()))return J();if(fa=="endTag"){C(ca.tagName,S);return J()}return J()}}
function W(S){if(S=="endTag")return J();return z()}function la(S){if(S=="xml-word"){na="xml-attname";return J(la)}if(S=="equals")return J(pa,la);return z()}function pa(S){if(S=="xml-word"&&l.allowUnquoted){na="xml-attribute";return J()}if(S=="xml-attribute")return J();return z()}var oa=h.indentUnit,l=f.htmlMode?{autoSelfClosers:{br:true,img:true,hr:true,link:true,input:true,meta:true,col:true,frame:true,base:true,area:true},doNotIndent:{pre:true,"!cdata":true},allowUnquoted:true}:{autoSelfClosers:{},
doNotIndent:{"!cdata":true},allowUnquoted:false},q=f.alignCDATA,x,E,ca,na;return{startState:function(){return{tokenize:j,cc:[],indented:0,startOfLine:true,tagName:null,context:null}},token:function(S,fa){if(S.sol()){fa.startOfLine=true;fa.indented=S.indentation()}if(S.eatSpace())return null;na=E=x=null;var ga=fa.tokenize(S,fa);if((ga||E)&&ga!="xml-comment")for(ca=fa;;)if((fa.cc.pop()||y)(E||ga))break;fa.startOfLine=false;return na||ga},indent:function(S,fa){var ga=S.context;if(ga&&ga.noIndent)return 0;
if(q&&/<!\[CDATA\[/.test(fa))return 0;if(ga&&/^<\//.test(fa))ga=ga.prev;for(;ga&&!ga.startOfLine;)ga=ga.prev;return ga?ga.indent+oa:0},electricChars:"/"}});CodeMirror.defineMIME("application/xml","xml");CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:true});
CodeMirror.defineMode("css",function(h){function f(C,y){J=y;return C}function j(C,y){var Q=C.next();if(Q=="@"){C.eatWhile(/\w/);return f("css-at",C.current())}else if(Q=="/"&&C.eat("*")){y.tokenize=m;return m(C,y)}else if(Q=="<"&&C.eat("!")){y.tokenize=s;return s(C,y)}else if(Q=="=")f(null,"compare");else if((Q=="~"||Q=="|")&&C.eat("="))return f(null,"compare");else if(Q=='"'||Q=="'"){y.tokenize=t(Q);return y.tokenize(C,y)}else if(Q=="#"){C.eatWhile(/\w/);return f("css-selector","hash")}else if(Q==
"!"){C.match(/^\s*\w*/);return f("css-important","important")}else if(/\d/.test(Q)){C.eatWhile(/[\w.%]/);return f("css-unit","unit")}else if(/[,.+>*\/]/.test(Q))return f(null,"select-op");else if(/[;{}:\[\]]/.test(Q))return f(null,Q);else{C.eatWhile(/[\w\\\-_]/);return f("css-identifier","identifier")}}function m(C,y){for(var Q=false,W;(W=C.next())!=null;){if(Q&&W=="/"){y.tokenize=j;break}Q=W=="*"}return f("css-comment","comment")}function s(C,y){for(var Q=0,W;(W=C.next())!=null;){if(Q>=2&&W==">"){y.tokenize=
j;break}Q=W=="-"?Q+1:0}return f("css-comment","comment")}function t(C){return function(y,Q){for(var W=false,la;(la=y.next())!=null;){if(la==C&&!W)break;W=!W&&la=="\\"}if(!W)Q.tokenize=j;return f("css-string","string")}}var z=h.indentUnit,J;return{startState:function(C){return{tokenize:j,baseIndent:C||0,stack:[]}},token:function(C,y){if(C.eatSpace())return null;var Q=y.tokenize(C,y),W=y.stack[y.stack.length-1];if(J=="hash"&&W=="rule")Q="css-colorcode";else if(Q=="css-identifier")if(W=="rule")Q="css-value";
else if(!W||W=="@media{")Q="css-selector";W=="rule"&&/^[\{\};]$/.test(J)&&y.stack.pop();if(J=="{")if(W=="@media")y.stack[y.stack.length-1]="@media{";else y.stack.push("{");else if(J=="}")y.stack.pop();else if(J=="@media")y.stack.push("@media");else W!="rule"&&W!="@media"&&J!="comment"&&y.stack.push("rule");return Q},indent:function(C,y){var Q=C.stack.length;if(/^\}/.test(y))Q-=C.stack[C.stack.length-1]=="rule"?2:1;return C.baseIndent+Q*z},electricChars:"}"}});CodeMirror.defineMIME("text/css","css");
CodeMirror.defineMode("liquid",function(h){function f(C,y){var Q=t.token(C,y.htmlState);if(Q=="xml-tag"&&C.current()==">"&&y.htmlState.context)if(/^script$/i.test(y.htmlState.context.tagName)){y.token=m;y.localState=z.startState(t.indent(y.htmlState,""))}else if(/^style$/i.test(y.htmlState.context.tagName)){y.token=s;y.localState=J.startState(t.indent(y.htmlState,""))}return Q}function j(C,y,Q){var W=C.current();y=W.search(y);y>-1&&C.backUp(W.length-y);return Q}function m(C,y){if(C.match(/^<\/\s*script\s*>/i,
false)){y.token=f;y.curState=null;return f(C,y)}return j(C,/<\/\s*script\s*>/,z.token(C,y.localState))}function s(C,y){if(C.match(/^<\/\s*style\s*>/i,false)){y.token=f;y.localState=null;return f(C,y)}return j(C,/<\/\s*style\s*>/,J.token(C,y.localState))}var t=CodeMirror.getMode(h,{name:"xml",htmlMode:true}),z=CodeMirror.getMode(h,"javascript"),J=CodeMirror.getMode(h,"css");return{startState:function(){var C=t.startState();return{token:f,localState:null,htmlState:C}},copyState:function(C){if(C.localState)var y=
CodeMirror.copyState(C.token==s?J:z,C.localState);return{token:C.token,localState:y,htmlState:CodeMirror.copyState(t,C.htmlState)}},token:function(C,y){return y.token(C,y)},indent:function(C,y){return C.token==f||/^\s*<\//.test(y)?t.indent(C.htmlState,y):C.token==m?z.indent(C.localState,y):J.indent(C.localState,y)},electricChars:"/{}:"}});CodeMirror.defineMIME("text/html","htmlmixed");
var Asset=Model("asset",function(){this.persistence(Model.REST,"/admin/assets");this.include({toMustache:function(h){this.merge({query_path:h?"?"+decodeURIComponent(jQuery.param({query:h})):"",query:h});return this.attr()},toMustacheWithNeighbors:function(h){var f=Asset.all(),j=f.indexOf(this),m=this.toMustache(h),s=f[j+1]?Asset.all()[j+1].toMustache(h):null;h=f[j-1]?Asset.all()[j-1].toMustache(h):null;jQuery("<img />")[0].src="/images/large/"+m.id+"/"+m.file_name;if(s)jQuery("<img />")[0].src="/images/large/"+
s.id+"/"+s.file_name;if(h)jQuery("<img />")[0].src="/images/large/"+h.id+"/"+h.file_name;return{asset:m,next:s,previous:h}}});this.extend({toMustache:function(h){var f=h?"?"+decodeURIComponent(jQuery.param({query:h})):"";return{assets:this.map(function(j){j.merge({query_path:f,query:h});return j.attr()}),query:h}},asJSON:function(){return Asset.map(function(h){return h.attr()})},tags:function(){tags=[];Asset.map(function(){tags=tags.concat(this.attr("tags"))});return tags},searchRemote:function(h,
f){var j=h!=null?decodeURIComponent(jQuery.param({query:h})):"";Asset.each(function(){Asset.remove(this)});jQuery.ajax({type:"get",url:"/search.json",contentType:"application/json",dataType:"json",data:j,success:function(m){jQuery.each(m,function(s,t){var z=new Asset({id:t.id});z.merge(t);Asset.add(z)});f.call(this)}})},searchAdmin:function(h,f){Asset.each(function(){Asset.remove(this)});jQuery.ajax({type:"get",url:"/admin/assets.json",contentType:"application/json",dataType:"json",data:h,success:function(j){$.each(j,
function(m,s){var t=new Asset({id:s.id});t.merge(s);Asset.add(t)});f.call(this)}})},keys:{},create:function(h,f){Asset.callback=f;var j=new XMLHttpRequest,m=Asset.generate_uuid();j.upload.uuid=m;j.upload.filename=h.name;j.upload.addEventListener("loadstart",Asset.onloadstartHandler,false);j.upload.addEventListener("progress",Asset.onprogressHandler);j.upload.addEventListener("load",Asset.onloadHandler,false);j.addEventListener("readystatechange",Asset.onreadystatechangeHandler,false);j.open("POST",
"/admin/assets.json",true);j.setRequestHeader("Content-Type","application/octet-stream");j.setRequestHeader("X-File-Name",h.name);j.setRequestHeader("X-File-Upload","true");j.send(h);f.before&&f.before.call(this,m)},onloadstartHandler:function(){},onloadHandler:function(){},onprogressHandler:function(h){var f=Math.round(h.loaded/h.total*100);Asset.callback.progress&&Asset.callback.progress.call(this,h.target.uuid,f)},onreadystatechangeHandler:function(h){var f=null;try{f=h.target.status}catch(j){return}if(f==
"200"&&h.target.readyState==4&&h.target.responseText){h=JSON.parse(h.target.responseText);f=new Asset({id:h.id});f.merge(h);Asset.add(f);Asset.callback.success&&Asset.callback.success.call(this,f)}},generate_uuid:function(){for(var h=[],f=0;f<32;f++)h[f]="0123456789ABCDEF".substr(Math.floor(Math.random()*16),1);h[12]="4";h[16]="0123456789ABCDEF".substr(h[16]&3|8,1);return h.join("")}})}),Page=Model("page",function(){this.persistence(Model.SinatraREST,"/admin/pages");this.include({children:function(){return Page.find_all_by_parent_id(this.id())},
has_children:function(){if(this.children().all().length>0)return true},assets:function(){for(var h=this.attr("assets"),f=0,j=h.length;f<j;++f){var m=h[f],s=new Asset({id:m.id});s.merge(m);Asset.add(s)}return Asset},parts:function(){var h=this.attr("parts"),f=h.length;Part.each(function(){Part.remove(this)});for(var j=0;j<f;++j){var m=h[j],s=new Part({id:m.id});s.merge(m);s.attr("page_id",this.id());Part.add(s)}return Part},load:function(h){var f=this,j="/admin/pages/"+f.id()+".json";jQuery.ajax({type:"GET",
url:j,dataType:"json",success:function(m){f.merge(m);h.call(this)}})},saveRemote:function(h,f){var j=this,m="/admin/pages/"+this.id()+".json";jQuery.ajax({type:"PUT",url:m,data:h,dataType:"json",success:function(s){if(s.errors){alert(JSON.stringify(s.errors));f.error&&f.error.call(this)}else{j.merge(s);f.success&&f.success.call(this)}}})}});this.extend({toMustache:function(){return{pages:this.map(function(h){return h.attr()})}},asJSON:function(){return Page.map(function(h){return h.attr()})},root:function(){return this.detect(function(){return this.attr("parent_id")==
null})},find_by_parent_id:function(h){return this.detect(function(){return this.attr("parent_id")==h})},find_all_by_parent_id:function(h){return this.select(function(){return this.attr("parent_id")==h})},find_by_path:function(h){return this.detect(function(){return this.attr("path")==h})},load_by_id:function(h,f){jQuery.ajax({type:"GET",url:"/admin/pages/"+h+".json",dataType:"json",success:function(j){var m=Page.find(j.id);m||(m=new Page({id:j.id}));m.merge(j);Page.add(m);f&&f.call(this,j)}})},create:function(h,
f){jQuery.ajax({type:"post",url:"/admin/pages.json",dataType:"json",data:{page:h},success:function(j){var m=new Page({id:j.id});m.merge(j);Page.add(m);f.call(this,j)}})}})}),Layout=Model("template",function(){this.persistence(Model.SinatraREST,"/admin/templates");this.include({load:function(h){var f=this,j="/admin/templates/"+f.id()+".json";jQuery.ajax({type:"GET",url:j,dataType:"json",success:function(m){f.merge(m);h.call(this,m)}})}});this.extend({toMustache:function(){return{layouts:this.map(function(h){return h.attr()})}},
asLayoutJSON:function(h){return Layout.find_all_by_class("Layout").map(function(f){h==f.id()?f.attr("selected",'selected="selected"'):f.attr("selected","");return f.attr()})},find_by_class:function(h){return this.detect(function(){return this.attr("klass")==h})},find_all_by_class:function(h){return this.select(function(){return this.attr("klass")==h})},asJSON_by_class:function(h){return this.find_all_by_class(function(){return h.map(function(f){return f.attributes})})}})}),Part=Model("part",function(){this.include({deleteRemote:function(h,
f){var j="/admin/pages/"+h.id()+"/parts/"+this.id()+".json";jQuery.ajax({type:"DELETE",url:j,dataType:"json",success:function(m){h.merge(m);f.call(this)}})}});this.extend({toMustache:function(){return{parts:this.map(function(h){return h.attr()})}},create:function(h,f){var j="/admin/templates/"+h.template_id+"/parts.json",m=Layout.find(h.template_id);jQuery.ajax({type:"post",url:j,dataType:"json",data:{part:h},success:function(s){m.merge(s);f.call(this)}})}})}),Site=Model("site",function(){this.persistence(Model.SinatraREST,
"/admin/sites");this.include({});this.extend({toMustache:function(){return{sites:this.map(function(h){return h.attr()})}}})}),User=Model("user",function(){this.persistence(Model.SinatraREST,"/admin/users");this.include({});this.extend({toMustache:function(){return{users:this.map(function(h){return h.attr()})}}})}),Galerie={open:function(h,f){$("body").append('<div id="overlay"></div>').append('<div id="modal_wrapper"><div id="modal"></div></div>');var j=$("#modal");j.html(h);var m=$("#modal_wrapper"),
s=$(window).height();j=j.height()+42;j=(s-j)/2;$("#overlay").css({height:s}).hide().fadeIn("fast");m.hide().fadeIn("fast").css({top:j});f&&f.call(this)},close:function(){$("#modal_wrapper").fadeOut("fast",function(){$(this).remove();$("#overlay").fadeOut("fast",function(){$(this).remove()})})}},logger={info:function(h){window.console&&console.log(h)},debug:function(h){window.console&&console.log(h)}},Utilities={notice:function(h){var f=jQuery(".notice");f.text(h);f.slideDown("slow",function(){setTimeout(function(){f.slideUp("slow")},
1E3)})},keyboard_nav:function(){jQuery("body").keydown(function(h){switch(h.keyCode){case 37:$("a.previous").click();break;case 39:$("a.next").click();break}})},check_browser_version:function(){if(!Modernizr.history){jQuery("a").live("click",function(f){f.preventDefault();document.location.hash=$(this).attr("href")});var h=jQuery("form#search-form");h.attr("action","#"+h.attr("action"))}},formObserver:function(h){jQuery(h).keyup(function(){delay(function(){jQuery(h).parents("form:first").submit()},
800)})}},iFramer={initialize:function(h,f){var j=jQuery(h),m=this;j.length&&j.load(function(){var s=$(this),t=s.contents(),z=t.find("span.part-editor"),J=z.find("a");m.setEditFlags(z);s.fadeIn("fast");t.find('a[href^="/preview"]').click(function(C){var y=$(this).attr("href").split("?")[0].replace("/preview","");if(y=Page.find_by_path(y)){C.preventDefault();y.id();document.location.hash=y.attr("admin_path")}});J.click(function(){window.top.trigger=$(this);window.top.location.hash=$(this).attr("href");
return false});f&&f.call(this)})},setEditFlags:function(h){h.css({position:"relative",display:"block",height:"0",width:"0","text-decoration":"none"}).find("span").css({display:"block",position:"absolute",top:"-24px",left:"12px",padding:"4px 8px",width:"100px",background:"rgba(255, 255, 0, 0.7)"})}},TabControl={initialize:function(h){if(h=jQuery(h)){h.each(function(f,j){$(j).hide()});h.first().show();this.tabControl(jQuery(".tab-control"))}},tabControl:function(h){h.click(function(){var f="tab-"+$(this).find("label").attr("for").split("-")[1];
jQuery(".tab").hide();jQuery("#"+f).show()})}},delay=function(){var h=0;return function(f,j){clearTimeout(h);h=setTimeout(f,j)}}(),Sites=Sammy(function(){var h=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.helpers({loadSites:function(f){if(Site.all().length==0)Site.load(function(){f&&f.call(this)});else f&&f.call(this)},renderSiteIndex:function(){this.load(jQuery("#admin-sites-index")).interpolate(Site.toMustache(),
"mustache").replace("#sidebar")}});this.bind("run",function(){h.modal=false;h.refresh_pages=true});this.get("#/preview",function(){alert(document.location.hostname);window.open("/","preview")});this.get("#/sites",function(f){h.refresh_pages=true;Galerie.close();jQuery("#editor").html('<h1 class="section">Sites</div>');f.loadSites(function(){f.renderSiteIndex()})});this.get("#/sites/new",function(f){f.loadSites(function(){$("#modal").length==0&&Galerie.open();f.load(jQuery("#admin-sites-new")).interpolate({},
"mustache").replace("#modal");f.renderSiteIndex(Site.all())})});this.post("#/sites",function(f){(new Site(f.params.site)).save(function(j,m){var s=JSON.parse(m.responseText);s.errors?alert(JSON.stringify(s)):f.redirect("#/sites")})});this.get("#/sites/:id/edit",function(f){Galerie.close();f.loadSites(function(){site=Site.find(f.params.id);f.load(jQuery("#admin-sites-edit")).interpolate({site:site.asJSON()},"mustache").replace("#editor");f.renderSiteIndex(Site.all())})});this.put("#/sites/:id",function(f){var j=
Site.find(f.params.id);j.attr(f.params.site);j.save(function(m,s){var t=JSON.parse(s.responseText);t.errors?alert(JSON.stringify(t)):f.redirect("#/sites")})});this.get("#/sites/:id/remove",function(f){Galerie.open();f.loadSites(function(){site=Site.find(f.params.id);f.load(jQuery("#admin-sites-remove")).interpolate({site:site.asJSON()},"mustache").replace("#modal");f.renderSiteIndex(Site.all())})});this.del("#/sites/:id",function(f){site.destroy(function(j){j?f.redirect("#/sites"):alert("there were issues")})})}),
Layouts=Sammy(function(){var h=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.helpers({loadLayouts:function(f){if(Layout.all().length==0)Layout.load(function(){f&&f.call(this)});else f&&f.call(this)},renderLayoutIndex:function(){this.load(jQuery("#admin-templates-index")).interpolate({layouts:Layout.find_all_by_class("Layout").map(function(f){return f.attributes}),partials:Layout.find_all_by_class("Partial").map(function(f){return f.attributes}),
javascripts:Layout.find_all_by_class("Javascript").map(function(f){return f.attributes}),stylesheets:Layout.find_all_by_class("Stylesheet").map(function(f){return f.attributes})},"mustache").replace("#sidebar")},renderLayout:function(f){this.load(jQuery("#admin-templates-edit")).interpolate({layout:f.asJSON(),filters:[{name:"none",value:"none",selected:f.attr("filter")=="css"?'selected="selected"':""},{name:"Sass",value:"sass",selected:f.attr("filter")=="sass"?'selected="selected"':""},{name:"Scss",
value:"scss",selected:f.attr("filter")=="scss"?'selected="selected"':""}]},"mustache").replace("#editor").then(function(){var j=jQuery("#layout_content");j.attr("value",f.attr("content"));j=j.attr("class");jQuery("#layout_content").length>0&&CodeMirror.fromTextArea(document.getElementById("layout_content"),{mode:j,lineNumbers:true})})}});this.bind("run",function(){h.refresh_templates=true;h.refresh_pages=true;h.modal=false});this.get("#/templates",function(f){Galerie.close();h.refresh_templates=false;
h.refresh_pages=true;jQuery("#editor").html('<h1 class="section">Templates</div>');f.loadLayouts(function(){f.renderLayoutIndex(Layout.all())})});this.get("#/templates/new/:klass",function(f){this.loadLayouts(function(){var j=$("<div />").attr({id:"new-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(j);f.load(jQuery("#admin-templates-new")).interpolate({klass:f.params.klass},"mustache").replace("#new-page-container");f.renderLayoutIndex(Layout.all())})});this.post("#/templates",
function(f){(new Layout(f.params.template)).save(function(j,m){var s=JSON.parse(m.responseText);if(s.errors)Utilities.notice(JSON.stringify(s));else{f.redirect("#/templates");Utilities.notice("Successfully saved template")}})});this.get("#/templates/:id/edit",function(f){Galerie.close();h.refresh_pages=true;this.loadLayouts(function(){var j=Layout.find(f.params.id);f.renderLayout(j);f.renderLayoutIndex(Layout.all())})});this.put("#/templates/:id",function(f){var j=Layout.find(f.params.id);j.attr(f.params.layout);
j.save(function(m){if(m){f.renderLayoutIndex();Utilities.notice("Successfully saved template")}})});this.get("#/templates/:id/remove",function(f){this.loadLayouts(function(){var j=Layout.find(f.params.id);Galerie.open();f.load(jQuery("#admin-templates-remove")).interpolate({layout:j.asJSON()},"mustache").replace("#modal");f.renderLayoutIndex(Layout.all())})});this.del("/templates/:id",function(f){Layout.find(f.params.id).destroy(function(j){if(j){f.renderLayoutIndex();Utilities.notice("Successfully deleted template");
f.redirect("#/templates")}})});this.post("/layouts/:id/parts",function(f){this.loadLayouts(function(){var j=f.params.id;Part.create(f.params.part,function(){f.redirect("#/templates/"+j+"/edit")})})})}),Assets=Sammy(function(){var h=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.swap=function(f){jQuery("#editor").html(f)};this.helpers({loadAssets:function(f,j){if(Asset.all().length==0)Asset.searchAdmin(f,function(){j&&
j.call(this)});else j&&j.call(this)},send_files:function(f,j,m){for(var s=0,t=0;t<f.length;t++){var z=f[t];Asset.create(z,{before:function(J){jQuery(".progress").append('<p id="progress-'+J+'">'+z.name+'<span class="percentage"></span></p>')},progress:function(J,C){jQuery("#progress-"+J+" .percentage").text(" "+C+"%")},success:function(){s+=1;s==f.length&&Asset.searchAdmin(j,function(){m&&m.call(this)})}})}}});this.bind("run",function(){h.modal=false;h.first_run=true});this.get("#/assets",function(f){var j=
f.params.query,m=j?{query:j}:{};m.limit=f.params.limit||48;m.page=f.params.page||1;Galerie.close();h.modal||Asset.searchAdmin(m,function(){f.load(jQuery("#admin-assets-index")).interpolate(Asset.toMustache(j),"mustache").replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple","multiple")})});h.modal=false;h.first_run=false});this.get("#/assets/new",function(f){f.load(jQuery("#admin-assets-new")).interpolate({},"mustache").replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple",
"multiple")});h.first_run=false});this.post("/admin/assets",function(f){var j=this,m=document.getElementById("ajax_uploader").files,s=f.params.query?f.params.query:null;jQuery("form#new_asset");var t=s?{query:s}:{};t.limit=f.params.limit||48;t.page=f.params.page||1;this.send_files(m,t,function(){j.render("/templates/admin/assets/index.mustache",Asset.toMustache(t.query)).replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple","multiple")})});return false});this.get("#/assets/:id/edit",
function(f){var j=f.params.query?f.params.query:null;this.loadAssets(j?{query:f.params.query}:{},function(){var m=Asset.find(f.params.id);f.load(jQuery("#admin-assets-edit")).interpolate(m.toMustacheWithNeighbors(j),"mustache").replace("#editor").then(function(){setTimeout(function(){$("img.fade-in").fadeIn("slow")},100);Utilities.formObserver(".image-info input[type=text], .image-info textarea")})});h.modal=false});this.put("#/assets/:id",function(f){var j=Asset.find(f.params.id);j.attr(f.params.asset);
j.save(function(m){m&&Utilities.notice("Successfully saved asset")})});this.get("#/assets/:id/remove",function(f){var j=f.params.query?f.params.query:null,m=j?{query:f.params.query}:null;jQuery(".modal-strip").remove();this.loadAssets(m,function(){var s=Asset.find(f.params.id);if(h.first_run){var t=f.load(jQuery("#admin-assets-edit")).interpolate(Asset.toMustache(j),"mustache"),z=f.load(jQuery("#admin-assets-remove")).interpolate({asset:s.toMustache(j)},"mustache");t.replace("#editor").then(function(){var J=
jQuery("#asset-"+s.id());z.appendTo(J).then(function(){jQuery(".modal-strip").fadeIn("fast").css({})})})}else{t=jQuery("#asset-"+s.id());z=f.load(jQuery("#admin-assets-remove")).interpolate({asset:s.toMustache(j)},"mustache");z.appendTo(t).then(function(){jQuery(".modal-strip").fadeIn("fast").css({})})}})});this.del("#/assets/:id",function(f){var j=f.params.query?f.params.query:null,m=j?"?"+decodeURIComponent(jQuery.param({query:j})):"";Asset.find(f.params.id).destroy(function(s){if(s){Galerie.close();
Utilities.notice("Successfully saved asset");f.redirect("#/assets"+m)}})})}),Pages=Sammy(function(h){var f=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);h.helpers({loadPages:function(j){if(Page.all().length==0)Page.load(function(){Layout.load(function(){j&&j.call(this)})});else j&&j.call(this)},renderTree:function(j,m){var s=this;s.load(jQuery("#admin-pages-node")).interpolate({pages:[j.asJSON()]},"mustache").replace("#sidebar").then(function(){s.renderNode(j,
m);j.id()==m.id()&&jQuery("li#page-"+j.id()).addClass("active")})},renderNode:function(j,m){var s=this;s.load(jQuery("#admin-pages-node")).interpolate(j.children().toMustache(),"mustache").appendTo("#page-"+j.id()).then(function(){j.children().each(function(t){t.id()==m.id()&&jQuery("li#page-"+t.id()).addClass("active");if(t.has_children()==true){jQuery("#page-"+t.id()).addClass("open");s.renderNode(t,m)}})})},renderPagePreview:function(j,m){f.modal||this.load(jQuery("#admin-pages-show")).interpolate({page:j.asJSON(),
layouts:Layout.asLayoutJSON(j.attr("layout_id")),base_page_id:j.id()},"mustache").replace("#editor").then(function(){iFramer.initialize(".preview iframe",function(){m&&m.call(this)});jQuery("li.node").removeClass("active");jQuery("#page-"+j.id()).addClass("active")})},open_page_editor:function(){var j=jQuery("#page-editor"),m=jQuery("#page-title");j.addClass("open").animate({height:"200px"},300);m.removeAttr("disabled").focus()},close_page_editor:function(){var j=jQuery("#page-editor"),m=jQuery("#page-title");
j.removeClass("open").animate({height:"0"},300);m.attr("disabled","disabled")}});this.bind("page-index",function(){var j=this;jQuery(".page-children").length||j.loadPages(function(){j.renderTree(Page.root(),Page.root())})});this.bind("run",function(){f.application=this;f.refresh_pages=true;f.modal=false;jQuery(".add-asset").live("click",function(){f.application.trigger("add-asset");return false});jQuery("#sidebar .opener").live("click",function(){var j=(new Date).getTime();j=$(this).parents("li:first");
var m=this.id.split("-")[2],s=Page.find(m),t=jQuery.cookie("active_page_ids");t=t?t.split(","):[];if(j.hasClass("open")){j.toggleClass("open");t=jQuery.grep(t,function(z){return z!=m});jQuery.cookie("active_page_ids",t.join(","),{path:"/admin"});s.children().each(function(z){Page.remove(z)});jQuery("#page-"+m+" ul").remove()}else{t.push(m);j.toggleClass("open");j=(new Date).getTime();jQuery.cookie("active_page_ids",t.join(","),{path:"/admin"});Page.load(function(){f.application.renderNode(s)})}f.refresh_pages=
false;return f.modal=false})});this.get("#/pages/?",function(j){Galerie.close();j.trigger("page-index");jQuery("#editor").html('<h1 class="section">Pages</div>');f.do_not_refresh=false});this.get("#/pages/:id/new/?",function(j){this.loadPages(function(){var m=Page.find(j.params.id),s=$("<div />").attr({id:"new-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(s);j.trigger("page-index");j.load(jQuery("#admin-pages-new")).interpolate({parent:m.asJSON(),layouts:Layout.asLayoutJSON(m.attr("layout_id"))},
"mustache").replace("#new-page-container")})});this.post("#/pages/:page_id",function(j){Page.find(j.params.page_id);(new Page(j.params.page)).save(function(m,s){var t=JSON.parse(s.responseText);if(t.errors)alert(JSON.stringify(t));else{f.refresh_pages=true;Utilities.notice("Successfully saved page");j.redirect("#/pages/"+t.id)}})});this.get("#/pages/:id/?",function(j){var m=this;Galerie.close();jQuery(".modal-editor").remove();this.loadPages(function(){var s=j.params.id,t=Page.find(s);if(f.do_not_refresh)m.close_page_editor();
else{if(t)j.renderPagePreview(t);else{t=new Page({id:s});t.load(function(){j.renderPagePreview(t)})}f.modal=false;f.do_not_refresh=false;j.trigger("page-index")}});f.do_not_refresh=false});this.get("#/pages/:id/edit/?",function(j){var m=this;Galerie.close();f.modal=false;this.loadPages(function(){var s=Page.find(j.params.id);if(jQuery("#preview-"+s.id()).length)m.open_page_editor();else{j.renderPagePreview(s,function(){m.open_page_editor()});j.trigger("page-index")}});f.do_not_refresh=true});this.put("#/pages/:page_id",
function(j){var m=Page.find(j.params.page_id);m.attr(j.params.page);m.save(function(s){if(s){f.modal=false;Utilities.notice("Successfully saved page");j.renderTree(Page.root(),m)}})});this.get("#/pages/:id/remove",function(j){this.loadPages(function(){var m=Page.find(j.params.id),s=$("<div />").attr({id:"remove-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(s);j.trigger("page-index");j.load(jQuery("#admin-pages-remove")).interpolate({page:m.asJSON()},"mustache").replace("#remove-page-container")})});
this.del("/pages/:id",function(j){var m=j.params.id;Page.find(m).destroy(function(s){if(s){jQuery("#page-"+m).remove();f.refresh_pages=false;j.redirect("#/pages")}})})}),Parts=Sammy(function(h){var f=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);h.helpers({render_part:function(j,m,s){var t=this;t.load(jQuery("#admin-"+s+"-edit")).interpolate({part:j.asJSON(),page:m.asJSON(),assets:Asset.asJSON()},"mustache").appendTo(jQuery("body")).then(function(){var z=
jQuery(".modal-editor"),J=$("iframe").contents(),C=J.find("#editor-"+j.id());z.fadeIn("fast").css({top:C.offset().top-J.find("body").scrollTop()+"px",left:C.offset().left+400+"px"});t.set_asset_links(j,m);jQuery("#ajax_uploader").attr("multiple","multiple").change(function(){var y=jQuery(this).parents("form:first");jQuery(".progress").slideDown("slow",function(){y.submit()})});t.trigger("page-index");f.modal=true})},set_asset_links:function(j,m){jQuery("#search-results-container li.asset").each(function(s,
t){var z=jQuery(t).find("a"),J=jQuery(t).attr("id").split("-")[1];z.click(function(C){C.preventDefault();C=m.attr("parts");for(var y=0,Q=C.length;y<Q;++y){var W=C[y];if(j.id()==W.id){W.asset_id=J;j.attr("asset_id",J);j.save()}}m.save(function(){jQuery(".modal-editor").remove();f.modal=false;document.location.hash="#"+m.attr("admin_path")})})})}});this.get("#/pages/:page_id/parts/:id/edit",function(j){jQuery(".modal-editor").remove();var m=$("iframe");this.loadPages(function(){Page.load_by_id(j.params.page_id,
function(){var s=Page.find(j.params.page_id),t=s.parts().find(j.params.id),z=jQuery("#page-updated_at").attr("value");if(m.length)if(z!=s.attr("updated_at")){var J=jQuery(".preview iframe");J.hide().attr("src",J.attr("src"));J.load(function(){J.fadeIn("fast");j.render_part(t,s,"parts")})}else j.render_part(t,s,"parts");else j.renderPagePreview(s,function(){j.render_part(t,s,"parts")})})})});this.get("#/pages/:page_id/image_parts/:id/edit",function(j){var m=this;jQuery(".modal-editor").remove();m.loadPages(function(){var s=
Page.find(j.params.page_id),t=s.parts().find(j.params.id),z=$("iframe");Asset.searchAdmin({limit:"8"},function(){z.length?m.render_part(t,s,"image_parts"):j.renderPagePreview(s,function(){m.render_part(t,s,"image_parts")})})})});this.get("/pages/:page_id/parts/:id/results",function(j){var m=this;this.loadPages(function(){var s=Page.find(j.params.page_id),t=Part.find(j.params.id),z=j.params.query?j.params.query:null;Asset.searchAdmin(z?{query:z}:{},function(){j.render("/templates/admin/pages/search_results.mustache",
Asset.toMustache()).replace("#search-results-container").then(function(){m.set_asset_links(t,s)})})})});this.put("#/pages/:page_id/parts/:id",function(j){var m=j.params.id,s=j.params.page_id,t=Page.find(s),z=t.parts().find(m);logger.info(j.params.part);for(var J=t.attr("parts"),C=0,y=J.length;C<y;++C){z=J[C];if(m==z.id){var Q=j.params.part.content;z.content=Q;z=Part.find(z.id);z.attr("content",Q);z.save()}}t.save(function(W){if(W){f.modal=false;j.redirect("#/pages/"+s)}})});this.post("#/pages/:page_id/image_parts/:id/assets",
function(j){var m=this,s=Page.find(j.params.page_id),t=s.parts().find(j.params.id),z=document.getElementById("ajax_uploader").files,J=j.params.query?j.params.query:null;jQuery("form#new_asset");J=J?{query:J}:{};J.limit=j.params.limit||48;J.page=j.params.page||1;this.send_files(z,J,function(){j.render("/templates/admin/pages/search_results.mustache",Asset.toMustache()).replace("#search-results-container").then(function(){jQuery("#ajax_uploader").attr("files",null);jQuery(".progress").slideUp("slow",
function(){jQuery(this).html("")});m.set_asset_links(t,s)})})})}),Users=Sammy(function(){var h=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.helpers({loadUsers:function(f){if(User.all().length==0)User.load(function(){f&&f.call(this)});else f&&f.call(this)},renderUserIndex:function(f){this.load(jQuery("#admin-users-index")).interpolate(User.toMustache(),"mustache").replace("#editor").then(function(){f&&f.call(this)})}});
this.bind("run",function(){h.modal=false;h.refresh_pages=true});this.get("#/users",function(f){Galerie.close();jQuery("#editor").html('<h1 class="section">Users</div>');f.loadUsers(function(){f.renderUserIndex()})});this.get("#/users/new",function(f){f.loadUsers(function(){jQuery("#modal").length||Galerie.open();f.load(jQuery("#admin-users-new")).interpolate({},"mustache").replace("#modal");f.renderUserIndex()})});this.post("#/users",function(f){(new User(f.params.user)).save(function(j,m){var s=
JSON.parse(m.responseText);s.errors?alert(JSON.stringify(s)):f.redirect("#/users")})});this.get("#/users/:id/edit",function(f){f.loadUsers(function(){user=User.find(f.params.id);if(jQuery("#users").length){jQuery(".user-form").html("");f.load(jQuery("#admin-users-edit")).interpolate({user:user.asJSON()},"mustache").replace("#user-form-"+user.id())}else f.renderUserIndex(function(){jQuery(".user-form").html("");f.load(jQuery("#admin-users-edit")).interpolate({user:user.asJSON()},"mustache").replace("#user-form-"+
user.id())})})});this.put("#/users/:id",function(f){var j=User.find(f.params.id);j.attr(f.params.user);j.save(function(m,s){var t=JSON.parse(s.responseText);t.errors?alert(JSON.stringify(t)):f.redirect("#/users")})})});
jQuery(document).ready(function(){jQuery("body").ajaxStart(function(){logger.info("starting")});jQuery("body").ajaxSuccess(function(){logger.info("success!")});jQuery("#login").length||jQuery.ajax({url:"/templates",success:function(h){jQuery("head").append(h);Pages.run("#/pages")}});Utilities.keyboard_nav();Utilities.check_browser_version()});
