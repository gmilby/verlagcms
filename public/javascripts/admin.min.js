define("ace/theme/textmate",["require","exports","module"],function(a,b){a("pilot/dom").importCssString(".ace-tm .ace_editor {  border: 2px solid rgb(159, 159, 159);}.ace-tm .ace_editor.ace_focus {  border: 2px solid #327fbd;}.ace-tm .ace_gutter {  width: 50px;  background: #e8e8e8;  color: #333;  overflow : hidden;}.ace-tm .ace_gutter-layer {  width: 100%;  text-align: right;}.ace-tm .ace_gutter-layer .ace_gutter-cell {  padding-right: 6px;}.ace-tm .ace_print_margin {  width: 1px;  background: #e8e8e8;}.ace-tm .ace_text-layer {  cursor: text;}.ace-tm .ace_cursor {  border-left: 2px solid black;}.ace-tm .ace_cursor.ace_overwrite {  border-left: 0px;  border-bottom: 1px solid black;}        .ace-tm .ace_line .ace_invisible {  color: rgb(191, 191, 191);}.ace-tm .ace_line .ace_keyword {  color: blue;}.ace-tm .ace_line .ace_constant.ace_buildin {  color: rgb(88, 72, 246);}.ace-tm .ace_line .ace_constant.ace_language {  color: rgb(88, 92, 246);}.ace-tm .ace_line .ace_constant.ace_library {  color: rgb(6, 150, 14);}.ace-tm .ace_line .ace_invalid {  background-color: rgb(153, 0, 0);  color: white;}.ace-tm .ace_line .ace_fold {    background-color: #E4E4E4;    border-radius: 3px;}.ace-tm .ace_line .ace_support.ace_function {  color: rgb(60, 76, 114);}.ace-tm .ace_line .ace_support.ace_constant {  color: rgb(6, 150, 14);}.ace-tm .ace_line .ace_support.ace_type,.ace-tm .ace_line .ace_support.ace_class {  color: rgb(109, 121, 222);}.ace-tm .ace_line .ace_keyword.ace_operator {  color: rgb(104, 118, 135);}.ace-tm .ace_line .ace_string {  color: rgb(3, 106, 7);}.ace-tm .ace_line .ace_comment {  color: rgb(76, 136, 107);}.ace-tm .ace_line .ace_comment.ace_doc {  color: rgb(0, 102, 255);}.ace-tm .ace_line .ace_comment.ace_doc.ace_tag {  color: rgb(128, 159, 191);}.ace-tm .ace_line .ace_constant.ace_numeric {  color: rgb(0, 0, 205);}.ace-tm .ace_line .ace_variable {  color: rgb(49, 132, 149);}.ace-tm .ace_line .ace_xml_pe {  color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {  color: #0000A2;}.ace-tm .ace_markup.ace_markupine {    text-decoration:underline;}.ace-tm .ace_markup.ace_heading {  color: rgb(12, 7, 255);}.ace-tm .ace_markup.ace_list {  color:rgb(185, 6, 144);}.ace-tm .ace_marker-layer .ace_selection {  background: rgb(181, 213, 255);}.ace-tm .ace_marker-layer .ace_step {  background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {  background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {  margin: -1px 0 0 -1px;  border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active_line {  background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_marker-layer .ace_selected_word {  background: rgb(250, 250, 255);  border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_meta.ace_tag {  color:rgb(28, 2, 255);}.ace-tm .ace_string.ace_regex {  color: rgb(255, 0, 0)}");
b.cssClass="ace-tm"});
define("ace/mode/javascript",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/worker/worker_client","ace/mode/behaviour/cstyle"],function(a,b){var d=a("pilot/oop"),f=a("ace/mode/text").Mode,h=a("ace/tokenizer").Tokenizer,j=a("ace/mode/javascript_highlight_rules").JavaScriptHighlightRules,m=a("ace/mode/matching_brace_outdent").MatchingBraceOutdent,p=a("ace/range").Range,v=a("ace/worker/worker_client").WorkerClient,
s=a("ace/mode/behaviour/cstyle").CstyleBehaviour,z=function(){this.$tokenizer=new h((new j).getRules());this.$outdent=new m;this.$behaviour=new s};d.inherits(z,f);(function(){this.toggleCommentLines=function(D,F,J,O){var q=true;D=/^(\s*)\/\//;for(var r=J;r<=O;r++)if(!D.test(F.getLine(r))){q=false;break}if(q){q=new p(0,0,0,0);for(r=J;r<=O;r++){J=F.getLine(r).match(D);q.start.row=r;q.end.row=r;q.end.column=J[0].length;F.replace(q,J[1])}}else F.indentRows(J,O,"//")};this.getNextLineIndent=function(D,
F,J){var O=this.$getIndent(F),q=this.$tokenizer.getLineTokens(F,D),r=q.tokens;q=q.state;if(r.length&&r[r.length-1].type=="comment")return O;if(D=="start"||D=="regex_allowed")(D=F.match(/^.*[\{\(\[\:]\s*$/))&&(O+=J);else if(D=="doc-start"){if(q=="start"||D=="regex_allowed")return"";(D=F.match(/^\s*(\/?)\*/))&&(D[1]&&(O+=" "),O+="* ")}return O};this.checkOutdent=function(D,F,J){return this.$outdent.checkOutdent(F,J)};this.autoOutdent=function(D,F,J){this.$outdent.autoOutdent(F,J)};this.createWorker=
function(D){var F=D.getDocument(),J=new v(["ace","pilot"],"worker-javascript.js","ace/mode/javascript_worker","JavaScriptWorker");return J.call("setValue",[F.getValue()]),F.on("change",function(O){O.range={start:O.data.range.start,end:O.data.range.end};J.emit("change",O)}),J.on("jslint",function(O){for(var q=[],r=0;r<O.data.length;r++){var C=O.data[r];C&&q.push({row:C.line-1,column:C.character-1,text:C.reason,type:"warning",lint:C})}D.setAnnotations(q)}),J.on("narcissus",function(O){D.setAnnotations([O.data])}),
J.on("terminate",function(){D.clearAnnotations()}),J}}).call(z.prototype);b.Mode=z});
define("ace/mode/javascript_highlight_rules",["require","exports","module","pilot/oop","pilot/lang","ace/unicode","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(a,b){var d=a("pilot/oop"),f=a("pilot/lang"),h=a("ace/unicode"),j=a("ace/mode/doc_comment_highlight_rules").DocCommentHighlightRules,m=a("ace/mode/text_highlight_rules").TextHighlightRules,p=function(){var v=f.arrayToMap("break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|const|yield|import|get|set".split("|")),s=
f.arrayToMap("null|Infinity|NaN|undefined".split("|")),z=f.arrayToMap("class|enum|extends|super|export|implements|private|public|interface|package|protected|static".split("|")),D="["+h.packages.L+"\\$_]["+h.packages.L+h.packages.Mn+h.packages.Mc+h.packages.Nd+h.packages.Pc+"\\$_]*\\b";this.$rules={start:[{token:"comment",regex:"\\/\\/.*$"},(new j).getStartRule("doc-start"),{token:"comment",merge:true,regex:"\\/\\*",next:"comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",
merge:true,regex:'["].*\\\\$',next:"qqstring"},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"string",merge:true,regex:"['].*\\\\$",next:"qstring"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:["keyword","text","entity.name.function"],regex:"(function)(\\s+)("+D+")"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"keyword",regex:"(?:case|do|else|finally|in|instanceof|return|throw|try|typeof|yield)\\b",
next:"regex_allowed"},{token:function(F){return F=="this"?"variable.language":v.hasOwnProperty(F)?"keyword":s.hasOwnProperty(F)?"constant.language":z.hasOwnProperty(F)?"invalid.illegal":F=="debugger"?"invalid.deprecated":"identifier"},regex:D},{token:"keyword.operator",regex:"!|\\$|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|delete|typeof|void)",next:"regex_allowed"},{token:"lparen",regex:"[[({]",next:"regex_allowed"},
{token:"rparen",regex:"[\\])}]"},{token:"keyword.operator",regex:"\\/=?",next:"regex_allowed"},{token:"comment",regex:"^#!.*$"},{token:"text",regex:"\\s+"}],regex_allowed:[{token:"comment",merge:true,regex:"\\/\\*",next:"comment_regex_allowed"},{token:"comment",regex:"\\/\\/.*$"},{token:"string.regexp",regex:"\\/(?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*",next:"start"},{token:"text",regex:"\\s+"},{token:"empty",regex:"",next:"start"}],comment_regex_allowed:[{token:"comment",regex:".*?\\*\\/",
merge:true,next:"regex_allowed"},{token:"comment",merge:true,regex:".+"}],comment:[{token:"comment",regex:".*?\\*\\/",merge:true,next:"start"},{token:"comment",merge:true,regex:".+"}],qqstring:[{token:"string",regex:'(?:(?:\\\\.)|(?:[^"\\\\]))*?"',next:"start"},{token:"string",merge:true,regex:".+"}],qstring:[{token:"string",regex:"(?:(?:\\\\.)|(?:[^'\\\\]))*?'",next:"start"},{token:"string",merge:true,regex:".+"}]};this.embedRules(j,"doc-",[(new j).getEndRule("start")])};d.inherits(p,m);b.JavaScriptHighlightRules=
p});
define("ace/mode/doc_comment_highlight_rules",["require","exports","module","pilot/oop","ace/mode/text_highlight_rules"],function(a,b){var d=a("pilot/oop"),f=a("ace/mode/text_highlight_rules").TextHighlightRules,h=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc",merge:true,regex:"\\s+"},{token:"comment.doc",merge:true,regex:"TODO"},{token:"comment.doc",merge:true,regex:"[^@\\*]+"},{token:"comment.doc",merge:true,regex:"."}]}};d.inherits(h,f);(function(){this.getStartRule=function(j){return{token:"comment.doc",
merge:true,regex:"\\/\\*(?=\\*)",next:j}};this.getEndRule=function(j){return{token:"comment.doc",merge:true,regex:"\\*\\/",next:j}}}).call(h.prototype);b.DocCommentHighlightRules=h});
define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(a,b){var d=a("ace/range").Range,f=function(){};(function(){this.checkOutdent=function(h,j){return/^\s+$/.test(h)?/^\s*\}/.test(j):false};this.autoOutdent=function(h,j){var m=h.getLine(j).match(/^(\s*\})/);if(!m)return 0;m=m[1].length;var p=h.findMatchingBracket({row:j,column:m});if(!p||p.row==j)return 0;p=this.$getIndent(h.getLine(p.row));h.replace(new d(j,0,j,m-1),p)};this.$getIndent=function(h){return(h=
h.match(/^(\s+)/))?h[1]:""}}).call(f.prototype);b.MatchingBraceOutdent=f});
define("ace/worker/worker_client",["require","exports","module","pilot/oop","pilot/event_emitter"],function(a,b){var d=a("pilot/oop"),f=a("pilot/event_emitter").EventEmitter,h=function(j,m,p,v){this.callbacks=[];if(a.packaged){j=this.$guessBasePath();m=this.$worker=new Worker(j+m)}else{var s=this.$normalizePath(a.nameToUrl("ace/worker/worker",null,"_"));m=this.$worker=new Worker(s);s={};for(m=0;m<j.length;m++){var z=j[m],D=this.$normalizePath(a.nameToUrl(z,null,"_").replace(/.js$/,""));s[z]=D}}this.$worker.postMessage({init:true,
tlns:s,module:p,classname:v});this.callbackId=1;this.callbacks={};var F=this;this.$worker.onerror=function(J){throw window.console&&console.log&&console.log(J),J;};this.$worker.onmessage=function(J){J=J.data;switch(J.type){case "log":window.console&&console.log&&console.log(J.data);break;case "event":F._dispatchEvent(J.name,{data:J.data});break;case "call":var O=F.callbacks[J.id];O&&(O(J.data),delete F.callbacks[J.id])}}};(function(){d.implement(this,f);this.$normalizePath=function(j){return j.match(/^\w+:/)||
(j=location.protocol+"//"+location.host+(j.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+j.replace(/^[\/]+/,"")),j};this.$guessBasePath=function(){if(a.aceBaseUrl)return a.aceBaseUrl;for(var j=document.getElementsByTagName("script"),m=0;m<j.length;m++){var p=j[m],v=p.getAttribute("data-ace-base");if(v)return v.replace(/\/*$/,"/");if(p=p.src||p.getAttribute("src"))if(p=p.match(/^(?:(.*\/)ace\.js|(.*\/)ace-uncompressed\.js)(?:\?|$)/))return p[1]||p[2]}return""};this.terminate=function(){this._dispatchEvent("terminate",
{});this.$worker.terminate()};this.send=function(j,m){this.$worker.postMessage({command:j,args:m})};this.call=function(j,m,p){if(p){var v=this.callbackId++;this.callbacks[v]=p;m.push(v)}this.send(j,m)};this.emit=function(j,m){try{this.$worker.postMessage({event:j,data:m})}catch(p){}}}).call(h.prototype);b.WorkerClient=h});
define("ace/mode/behaviour/cstyle",["require","exports","module","pilot/oop","ace/mode/behaviour"],function(a,b){var d=a("pilot/oop"),f=a("ace/mode/behaviour").Behaviour,h=function(){this.add("braces","insertion",function(j,m,p,v,s){if(s=="{"){j=p.getSelectionRange();v=v.doc.getTextRange(j);return v!==""?{text:"{"+v+"}",selection:false}:{text:"{}",selection:[1,1]}}if(s=="}"){p=p.getCursorPosition();m=v.doc.getLine(p.row);s=m.substring(p.column,p.column+1);if(s=="}")if(v.$findOpeningBracket("}",{column:p.column+
1,row:p.row})!==null)return{text:"",selection:[1,1]}}else if(s=="\n"){p=p.getCursorPosition();m=v.doc.getLine(p.row);s=m.substring(p.column,p.column+1);if(s=="}"){p=v.findMatchingBracket({row:p.row,column:p.column+1});if(!p)return false;j=this.getNextLineIndent(j,m.substring(0,m.length-1),v.getTabString());v=this.$getIndent(v.doc.getLine(p.row));return{text:"\n"+j+"\n"+v,selection:[1,j.length,1,j.length]}}}return false});this.add("braces","deletion",function(j,m,p,v,s){j=v.doc.getTextRange(s);if(!s.isMultiLine()&&
j=="{")if(v.doc.getLine(s.start.row).substring(s.end.column,s.end.column+1)=="}")return s.end.column++,s;return false});this.add("parens","insertion",function(j,m,p,v,s){if(s=="("){j=p.getSelectionRange();v=v.doc.getTextRange(j);return v!==""?{text:"("+v+")",selection:false}:{text:"()",selection:[1,1]}}if(s==")"){j=p.getCursorPosition();if(v.doc.getLine(j.row).substring(j.column,j.column+1)==")")if(v.$findOpeningBracket(")",{column:j.column+1,row:j.row})!==null)return{text:"",selection:[1,1]}}return false});
this.add("parens","deletion",function(j,m,p,v,s){j=v.doc.getTextRange(s);if(!s.isMultiLine()&&j=="(")if(v.doc.getLine(s.start.row).substring(s.start.column+1,s.start.column+2)==")")return s.end.column++,s;return false});this.add("string_dquotes","insertion",function(j,m,p,v,s){if(s=='"'){j=p.getSelectionRange();m=v.doc.getTextRange(j);if(m!=="")return{text:'"'+m+'"',selection:false};p=p.getCursorPosition();m=v.doc.getLine(p.row);if(m.substring(p.column-1,p.column)=="\\")return false;v=v.getTokens(j.start.row,
j.start.row)[0].tokens;s=0;for(var z,D=-1,F=0;F<v.length;F++){z=v[F];z.type=="string"?(D=-1):D<0&&(D=z.value.indexOf('"'));if(z.value.length+s>j.start.column)break;s+=v[F].value.length}if(!z||D<0&&z.type!=="comment"&&(z.type!=="string"||j.start.column!==z.value.length+s-1&&z.value.lastIndexOf('"')===z.value.length-1))return{text:'""',selection:[1,1]};if(z&&z.type==="string")if(m.substring(p.column,p.column+1)=='"')return{text:"",selection:[1,1]}}return false});this.add("string_dquotes","deletion",
function(j,m,p,v,s){j=v.doc.getTextRange(s);if(!s.isMultiLine()&&j=='"')if(v.doc.getLine(s.start.row).substring(s.start.column+1,s.start.column+2)=='"')return s.end.column++,s;return false})};d.inherits(h,f);b.CstyleBehaviour=h});
define("ace/mode/html",["require","exports","module","pilot/oop","ace/mode/text","ace/mode/javascript","ace/mode/css","ace/tokenizer","ace/mode/html_highlight_rules","ace/mode/behaviour/xml"],function(a,b){var d=a("pilot/oop"),f=a("ace/mode/text").Mode,h=a("ace/mode/javascript").Mode,j=a("ace/mode/css").Mode,m=a("ace/tokenizer").Tokenizer,p=a("ace/mode/html_highlight_rules").HtmlHighlightRules,v=a("ace/mode/behaviour/xml").XmlBehaviour,s=function(){var z=new p;this.$tokenizer=new m(z.getRules());
this.$behaviour=new v;this.$embeds=z.getEmbeds();this.createModeDelegates({"js-":h,"css-":j})};d.inherits(s,f);(function(){this.toggleCommentLines=function(){return 0};this.getNextLineIndent=function(z,D){return this.$getIndent(D)};this.checkOutdent=function(){return false}}).call(s.prototype);b.Mode=s});
define("ace/mode/javascript",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/worker/worker_client","ace/mode/behaviour/cstyle"],function(a,b){var d=a("pilot/oop"),f=a("ace/mode/text").Mode,h=a("ace/tokenizer").Tokenizer,j=a("ace/mode/javascript_highlight_rules").JavaScriptHighlightRules,m=a("ace/mode/matching_brace_outdent").MatchingBraceOutdent,p=a("ace/range").Range,v=a("ace/worker/worker_client").WorkerClient,
s=a("ace/mode/behaviour/cstyle").CstyleBehaviour,z=function(){this.$tokenizer=new h((new j).getRules());this.$outdent=new m;this.$behaviour=new s};d.inherits(z,f);(function(){this.toggleCommentLines=function(D,F,J,O){var q=true;D=/^(\s*)\/\//;for(var r=J;r<=O;r++)if(!D.test(F.getLine(r))){q=false;break}if(q){q=new p(0,0,0,0);for(r=J;r<=O;r++){J=F.getLine(r).match(D);q.start.row=r;q.end.row=r;q.end.column=J[0].length;F.replace(q,J[1])}}else F.indentRows(J,O,"//")};this.getNextLineIndent=function(D,
F,J){var O=this.$getIndent(F),q=this.$tokenizer.getLineTokens(F,D),r=q.tokens;q=q.state;if(r.length&&r[r.length-1].type=="comment")return O;if(D=="start"||D=="regex_allowed")(D=F.match(/^.*[\{\(\[\:]\s*$/))&&(O+=J);else if(D=="doc-start"){if(q=="start"||D=="regex_allowed")return"";(D=F.match(/^\s*(\/?)\*/))&&(D[1]&&(O+=" "),O+="* ")}return O};this.checkOutdent=function(D,F,J){return this.$outdent.checkOutdent(F,J)};this.autoOutdent=function(D,F,J){this.$outdent.autoOutdent(F,J)};this.createWorker=
function(D){var F=D.getDocument(),J=new v(["ace","pilot"],"worker-javascript.js","ace/mode/javascript_worker","JavaScriptWorker");return J.call("setValue",[F.getValue()]),F.on("change",function(O){O.range={start:O.data.range.start,end:O.data.range.end};J.emit("change",O)}),J.on("jslint",function(O){for(var q=[],r=0;r<O.data.length;r++){var C=O.data[r];C&&q.push({row:C.line-1,column:C.character-1,text:C.reason,type:"warning",lint:C})}D.setAnnotations(q)}),J.on("narcissus",function(O){D.setAnnotations([O.data])}),
J.on("terminate",function(){D.clearAnnotations()}),J}}).call(z.prototype);b.Mode=z});
define("ace/mode/javascript_highlight_rules",["require","exports","module","pilot/oop","pilot/lang","ace/unicode","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(a,b){var d=a("pilot/oop"),f=a("pilot/lang"),h=a("ace/unicode"),j=a("ace/mode/doc_comment_highlight_rules").DocCommentHighlightRules,m=a("ace/mode/text_highlight_rules").TextHighlightRules,p=function(){var v=f.arrayToMap("break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|const|yield|import|get|set".split("|")),s=
f.arrayToMap("null|Infinity|NaN|undefined".split("|")),z=f.arrayToMap("class|enum|extends|super|export|implements|private|public|interface|package|protected|static".split("|")),D="["+h.packages.L+"\\$_]["+h.packages.L+h.packages.Mn+h.packages.Mc+h.packages.Nd+h.packages.Pc+"\\$_]*\\b";this.$rules={start:[{token:"comment",regex:"\\/\\/.*$"},(new j).getStartRule("doc-start"),{token:"comment",merge:true,regex:"\\/\\*",next:"comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",
merge:true,regex:'["].*\\\\$',next:"qqstring"},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"string",merge:true,regex:"['].*\\\\$",next:"qstring"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:["keyword","text","entity.name.function"],regex:"(function)(\\s+)("+D+")"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"keyword",regex:"(?:case|do|else|finally|in|instanceof|return|throw|try|typeof|yield)\\b",
next:"regex_allowed"},{token:function(F){return F=="this"?"variable.language":v.hasOwnProperty(F)?"keyword":s.hasOwnProperty(F)?"constant.language":z.hasOwnProperty(F)?"invalid.illegal":F=="debugger"?"invalid.deprecated":"identifier"},regex:D},{token:"keyword.operator",regex:"!|\\$|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|delete|typeof|void)",next:"regex_allowed"},{token:"lparen",regex:"[[({]",next:"regex_allowed"},
{token:"rparen",regex:"[\\])}]"},{token:"keyword.operator",regex:"\\/=?",next:"regex_allowed"},{token:"comment",regex:"^#!.*$"},{token:"text",regex:"\\s+"}],regex_allowed:[{token:"comment",merge:true,regex:"\\/\\*",next:"comment_regex_allowed"},{token:"comment",regex:"\\/\\/.*$"},{token:"string.regexp",regex:"\\/(?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*",next:"start"},{token:"text",regex:"\\s+"},{token:"empty",regex:"",next:"start"}],comment_regex_allowed:[{token:"comment",regex:".*?\\*\\/",
merge:true,next:"regex_allowed"},{token:"comment",merge:true,regex:".+"}],comment:[{token:"comment",regex:".*?\\*\\/",merge:true,next:"start"},{token:"comment",merge:true,regex:".+"}],qqstring:[{token:"string",regex:'(?:(?:\\\\.)|(?:[^"\\\\]))*?"',next:"start"},{token:"string",merge:true,regex:".+"}],qstring:[{token:"string",regex:"(?:(?:\\\\.)|(?:[^'\\\\]))*?'",next:"start"},{token:"string",merge:true,regex:".+"}]};this.embedRules(j,"doc-",[(new j).getEndRule("start")])};d.inherits(p,m);b.JavaScriptHighlightRules=
p});
define("ace/mode/doc_comment_highlight_rules",["require","exports","module","pilot/oop","ace/mode/text_highlight_rules"],function(a,b){var d=a("pilot/oop"),f=a("ace/mode/text_highlight_rules").TextHighlightRules,h=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc",merge:true,regex:"\\s+"},{token:"comment.doc",merge:true,regex:"TODO"},{token:"comment.doc",merge:true,regex:"[^@\\*]+"},{token:"comment.doc",merge:true,regex:"."}]}};d.inherits(h,f);(function(){this.getStartRule=function(j){return{token:"comment.doc",
merge:true,regex:"\\/\\*(?=\\*)",next:j}};this.getEndRule=function(j){return{token:"comment.doc",merge:true,regex:"\\*\\/",next:j}}}).call(h.prototype);b.DocCommentHighlightRules=h});
define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(a,b){var d=a("ace/range").Range,f=function(){};(function(){this.checkOutdent=function(h,j){return/^\s+$/.test(h)?/^\s*\}/.test(j):false};this.autoOutdent=function(h,j){var m=h.getLine(j).match(/^(\s*\})/);if(!m)return 0;m=m[1].length;var p=h.findMatchingBracket({row:j,column:m});if(!p||p.row==j)return 0;p=this.$getIndent(h.getLine(p.row));h.replace(new d(j,0,j,m-1),p)};this.$getIndent=function(h){return(h=
h.match(/^(\s+)/))?h[1]:""}}).call(f.prototype);b.MatchingBraceOutdent=f});
define("ace/worker/worker_client",["require","exports","module","pilot/oop","pilot/event_emitter"],function(a,b){var d=a("pilot/oop"),f=a("pilot/event_emitter").EventEmitter,h=function(j,m,p,v){this.callbacks=[];if(a.packaged){j=this.$guessBasePath();m=this.$worker=new Worker(j+m)}else{var s=this.$normalizePath(a.nameToUrl("ace/worker/worker",null,"_"));m=this.$worker=new Worker(s);s={};for(m=0;m<j.length;m++){var z=j[m],D=this.$normalizePath(a.nameToUrl(z,null,"_").replace(/.js$/,""));s[z]=D}}this.$worker.postMessage({init:true,
tlns:s,module:p,classname:v});this.callbackId=1;this.callbacks={};var F=this;this.$worker.onerror=function(J){throw window.console&&console.log&&console.log(J),J;};this.$worker.onmessage=function(J){J=J.data;switch(J.type){case "log":window.console&&console.log&&console.log(J.data);break;case "event":F._dispatchEvent(J.name,{data:J.data});break;case "call":var O=F.callbacks[J.id];O&&(O(J.data),delete F.callbacks[J.id])}}};(function(){d.implement(this,f);this.$normalizePath=function(j){return j.match(/^\w+:/)||
(j=location.protocol+"//"+location.host+(j.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+j.replace(/^[\/]+/,"")),j};this.$guessBasePath=function(){if(a.aceBaseUrl)return a.aceBaseUrl;for(var j=document.getElementsByTagName("script"),m=0;m<j.length;m++){var p=j[m],v=p.getAttribute("data-ace-base");if(v)return v.replace(/\/*$/,"/");if(p=p.src||p.getAttribute("src"))if(p=p.match(/^(?:(.*\/)ace\.js|(.*\/)ace-uncompressed\.js)(?:\?|$)/))return p[1]||p[2]}return""};this.terminate=function(){this._dispatchEvent("terminate",
{});this.$worker.terminate()};this.send=function(j,m){this.$worker.postMessage({command:j,args:m})};this.call=function(j,m,p){if(p){var v=this.callbackId++;this.callbacks[v]=p;m.push(v)}this.send(j,m)};this.emit=function(j,m){try{this.$worker.postMessage({event:j,data:m})}catch(p){}}}).call(h.prototype);b.WorkerClient=h});
define("ace/mode/behaviour/cstyle",["require","exports","module","pilot/oop","ace/mode/behaviour"],function(a,b){var d=a("pilot/oop"),f=a("ace/mode/behaviour").Behaviour,h=function(){this.add("braces","insertion",function(j,m,p,v,s){if(s=="{"){j=p.getSelectionRange();v=v.doc.getTextRange(j);return v!==""?{text:"{"+v+"}",selection:false}:{text:"{}",selection:[1,1]}}if(s=="}"){p=p.getCursorPosition();m=v.doc.getLine(p.row);s=m.substring(p.column,p.column+1);if(s=="}")if(v.$findOpeningBracket("}",{column:p.column+
1,row:p.row})!==null)return{text:"",selection:[1,1]}}else if(s=="\n"){p=p.getCursorPosition();m=v.doc.getLine(p.row);s=m.substring(p.column,p.column+1);if(s=="}"){p=v.findMatchingBracket({row:p.row,column:p.column+1});if(!p)return false;j=this.getNextLineIndent(j,m.substring(0,m.length-1),v.getTabString());v=this.$getIndent(v.doc.getLine(p.row));return{text:"\n"+j+"\n"+v,selection:[1,j.length,1,j.length]}}}return false});this.add("braces","deletion",function(j,m,p,v,s){j=v.doc.getTextRange(s);if(!s.isMultiLine()&&
j=="{")if(v.doc.getLine(s.start.row).substring(s.end.column,s.end.column+1)=="}")return s.end.column++,s;return false});this.add("parens","insertion",function(j,m,p,v,s){if(s=="("){j=p.getSelectionRange();v=v.doc.getTextRange(j);return v!==""?{text:"("+v+")",selection:false}:{text:"()",selection:[1,1]}}if(s==")"){j=p.getCursorPosition();if(v.doc.getLine(j.row).substring(j.column,j.column+1)==")")if(v.$findOpeningBracket(")",{column:j.column+1,row:j.row})!==null)return{text:"",selection:[1,1]}}return false});
this.add("parens","deletion",function(j,m,p,v,s){j=v.doc.getTextRange(s);if(!s.isMultiLine()&&j=="(")if(v.doc.getLine(s.start.row).substring(s.start.column+1,s.start.column+2)==")")return s.end.column++,s;return false});this.add("string_dquotes","insertion",function(j,m,p,v,s){if(s=='"'){j=p.getSelectionRange();m=v.doc.getTextRange(j);if(m!=="")return{text:'"'+m+'"',selection:false};p=p.getCursorPosition();m=v.doc.getLine(p.row);if(m.substring(p.column-1,p.column)=="\\")return false;v=v.getTokens(j.start.row,
j.start.row)[0].tokens;s=0;for(var z,D=-1,F=0;F<v.length;F++){z=v[F];z.type=="string"?(D=-1):D<0&&(D=z.value.indexOf('"'));if(z.value.length+s>j.start.column)break;s+=v[F].value.length}if(!z||D<0&&z.type!=="comment"&&(z.type!=="string"||j.start.column!==z.value.length+s-1&&z.value.lastIndexOf('"')===z.value.length-1))return{text:'""',selection:[1,1]};if(z&&z.type==="string")if(m.substring(p.column,p.column+1)=='"')return{text:"",selection:[1,1]}}return false});this.add("string_dquotes","deletion",
function(j,m,p,v,s){j=v.doc.getTextRange(s);if(!s.isMultiLine()&&j=='"')if(v.doc.getLine(s.start.row).substring(s.start.column+1,s.start.column+2)=='"')return s.end.column++,s;return false})};d.inherits(h,f);b.CstyleBehaviour=h});
define("ace/mode/css",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/css_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client"],function(a,b){var d=a("pilot/oop"),f=a("ace/mode/text").Mode,h=a("ace/tokenizer").Tokenizer,j=a("ace/mode/css_highlight_rules").CssHighlightRules,m=a("ace/mode/matching_brace_outdent").MatchingBraceOutdent,p=a("ace/worker/worker_client").WorkerClient,v=function(){this.$tokenizer=new h((new j).getRules());this.$outdent=
new m};d.inherits(v,f);(function(){this.getNextLineIndent=function(s,z,D){var F=this.$getIndent(z);s=this.$tokenizer.getLineTokens(z,s).tokens;if(s.length&&s[s.length-1].type=="comment")return F;return z.match(/^.*\{\s*$/)&&(F+=D),F};this.checkOutdent=function(s,z,D){return this.$outdent.checkOutdent(z,D)};this.autoOutdent=function(s,z,D){this.$outdent.autoOutdent(z,D)};this.createWorker=function(s){var z=s.getDocument(),D=new p(["ace","pilot"],"worker-css.js","ace/mode/css_worker","Worker");D.call("setValue",
[z.getValue()]);z.on("change",function(F){F.range={start:F.data.range.start,end:F.data.range.end};D.emit("change",F)});D.on("csslint",function(F){var J=[];F.data.forEach(function(O){J.push({row:O.line-1,column:O.col-1,text:O.message,type:O.type,lint:O})});s.setAnnotations(J)})}}).call(v.prototype);b.Mode=v});
define("ace/mode/css_highlight_rules",["require","exports","module","pilot/oop","pilot/lang","ace/mode/text_highlight_rules"],function(a,b){var d=a("pilot/oop"),f=a("pilot/lang"),h=a("ace/mode/text_highlight_rules").TextHighlightRules,j=function(){function m(r){var C=[];r=r.split("");for(var G=0;G<r.length;G++)C.push("[",r[G].toLowerCase(),r[G].toUpperCase(),"]");return C.join("")}var p=f.arrayToMap("-moz-box-sizing|-webkit-box-sizing|appearance|azimuth|background-attachment|background-color|background-image|background-position|background-repeat|background|border-bottom-color|border-bottom-style|border-bottom-width|border-bottom|border-collapse|border-color|border-left-color|border-left-style|border-left-width|border-left|border-right-color|border-right-style|border-right-width|border-right|border-spacing|border-style|border-top-color|border-top-style|border-top-width|border-top|border-width|border|bottom|box-sizing|caption-side|clear|clip|color|content|counter-increment|counter-reset|cue-after|cue-before|cue|cursor|direction|display|elevation|empty-cells|float|font-family|font-size-adjust|font-size|font-stretch|font-style|font-variant|font-weight|font|height|left|letter-spacing|line-height|list-style-image|list-style-position|list-style-type|list-style|margin-bottom|margin-left|margin-right|margin-top|marker-offset|margin|marks|max-height|max-width|min-height|min-width|-moz-border-radius|opacity|orphans|outline-color|outline-style|outline-width|outline|overflow|overflow-x|overflow-y|padding-bottom|padding-left|padding-right|padding-top|padding|page-break-after|page-break-before|page-break-inside|page|pause-after|pause-before|pause|pitch-range|pitch|play-during|position|quotes|richness|right|size|speak-header|speak-numeral|speak-punctuation|speech-rate|speak|stress|table-layout|text-align|text-decoration|text-indent|text-shadow|text-transform|top|unicode-bidi|vertical-align|visibility|voice-family|volume|white-space|widows|width|word-spacing|z-index".split("|")),
v=f.arrayToMap("rgb|rgba|url|attr|counter|counters".split("|")),s=f.arrayToMap("absolute|all-scroll|always|armenian|auto|baseline|below|bidi-override|block|bold|bolder|border-box|both|bottom|break-all|break-word|capitalize|center|char|circle|cjk-ideographic|col-resize|collapse|content-box|crosshair|dashed|decimal-leading-zero|decimal|default|disabled|disc|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ellipsis|fixed|georgian|groove|hand|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|inactive|inherit|inline-block|inline|inset|inside|inter-ideograph|inter-word|italic|justify|katakana-iroha|katakana|keep-all|left|lighter|line-edge|line-through|line|list-item|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|medium|middle|move|n-resize|ne-resize|newspaper|no-drop|no-repeat|nw-resize|none|normal|not-allowed|nowrap|oblique|outset|outside|overline|pointer|progress|relative|repeat-x|repeat-y|repeat|right|ridge|row-resize|rtl|s-resize|scroll|se-resize|separate|small-caps|solid|square|static|strict|super|sw-resize|table-footer-group|table-header-group|tb-rl|text-bottom|text-top|text|thick|thin|top|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|zero".split("|")),
z=f.arrayToMap("aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow".split("|")),D=[{token:"comment",merge:true,regex:"\\/\\*",next:"ruleset_comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("em")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("ex")},{token:"constant.numeric",
regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("px")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("cm")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("mm")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("in")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("pt")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("pc")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+
m("deg")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("rad")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("grad")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("ms")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("s")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("hz")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("khz")},
{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))%"},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"},{token:"constant.numeric",regex:"#[a-fA-F0-9]{6}"},{token:"constant.numeric",regex:"#[a-fA-F0-9]{3}"},{token:function(r){return p.hasOwnProperty(r.toLowerCase())?"support.type":v.hasOwnProperty(r.toLowerCase())?"support.function":s.hasOwnProperty(r.toLowerCase())?"support.constant":z.hasOwnProperty(r.toLowerCase())?"support.constant.color":"text"},regex:"\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"}],
F=f.copyArray(D);F.unshift({token:"rparen",regex:"\\}",next:"start"});D=f.copyArray(D);D.unshift({token:"rparen",regex:"\\}",next:"media"});var J=[{token:"comment",merge:true,regex:".+"}],O=f.copyArray(J);O.unshift({token:"comment",regex:".*?\\*\\/",next:"start"});var q=f.copyArray(J);q.unshift({token:"comment",regex:".*?\\*\\/",next:"media"});J=f.copyArray(J);J.unshift({token:"comment",regex:".*?\\*\\/",next:"ruleset"});this.$rules={start:[{token:"comment",merge:true,regex:"\\/\\*",next:"comment"},
{token:"lparen",regex:"\\{",next:"ruleset"},{token:"string",regex:"@media.*?{",next:"media"},{token:"keyword",regex:"#[a-zA-Z0-9-_]+"},{token:"variable",regex:"\\.[a-zA-Z0-9-_]+"},{token:"string",regex:":[a-zA-Z0-9-_]+"},{token:"constant",regex:"[a-zA-Z0-9-_]+"}],media:[{token:"comment",merge:true,regex:"\\/\\*",next:"media_comment"},{token:"lparen",regex:"\\{",next:"media_ruleset"},{token:"string",regex:"\\}",next:"start"},{token:"keyword",regex:"#[a-zA-Z0-9-_]+"},{token:"variable",regex:"\\.[a-zA-Z0-9-_]+"},
{token:"string",regex:":[a-zA-Z0-9-_]+"},{token:"constant",regex:"[a-zA-Z0-9-_]+"}],comment:O,ruleset:F,ruleset_comment:J,media_ruleset:D,media_comment:q}};d.inherits(j,h);b.CssHighlightRules=j});
define("ace/mode/html_highlight_rules",["require","exports","module","pilot/oop","ace/mode/css_highlight_rules","ace/mode/javascript_highlight_rules","ace/mode/text_highlight_rules"],function(a,b){var d=a("pilot/oop"),f=a("ace/mode/css_highlight_rules").CssHighlightRules,h=a("ace/mode/javascript_highlight_rules").JavaScriptHighlightRules,j=a("ace/mode/text_highlight_rules").TextHighlightRules,m=function(){function p(s,z){return[{token:"string",merge:true,regex:".*"+s,next:z},{token:"string",merge:true,
regex:".+"}]}function v(s,z,D){s[z]=[{token:"text",regex:"\\s+"},{token:"meta.tag",regex:"[-_a-zA-Z0-9:]+",next:z+"-attribute-list"},{token:"empty",regex:"",next:z+"-attribute-list"}];s[z+"-qstring"]=p("'",z);s[z+"-qqstring"]=p('"',z);s[z+"-attribute-list"]=[{token:"text",regex:">",next:D},{token:"entity.other.attribute-name",regex:"[-_a-zA-Z0-9:]+"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"text",regex:"\\s+"}].concat([{token:"string",regex:'".*?"'},
{token:"string",merge:true,regex:'["].*$',next:z+"-qqstring"},{token:"string",regex:"'.*?'"},{token:"string",merge:true,regex:"['].*$",next:z+"-qstring"}])}this.$rules={start:[{token:"text",merge:true,regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:"xml_pe",regex:"<\\?.*?\\?>"},{token:"comment",merge:true,regex:"<\\!--",next:"comment"},{token:"text",regex:"<(?=s*script)",next:"script"},{token:"text",regex:"<(?=s*style)",next:"css"},{token:"text",regex:"<\\/?",next:"tag"},{token:"text",regex:"\\s+"},
{token:"text",regex:"[^<]+"}],cdata:[{token:"text",regex:"\\]\\]>",next:"start"},{token:"text",merge:true,regex:"\\s+"},{token:"text",merge:true,regex:".+"}],comment:[{token:"comment",regex:".*?--\>",next:"start"},{token:"comment",merge:true,regex:".+"}]};v(this.$rules,"tag","start");v(this.$rules,"css","css-start");v(this.$rules,"script","js-start");this.embedRules(h,"js-",[{token:"comment",regex:"\\/\\/.*(?=<\\/script>)",next:"tag"},{token:"text",regex:"<\\/(?=script)",next:"tag"}]);this.embedRules(f,
"css-",[{token:"text",regex:"<\\/(?=style)",next:"tag"}])};d.inherits(m,j);b.HtmlHighlightRules=m});
define("ace/mode/behaviour/xml",["require","exports","module","pilot/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle"],function(a,b){var d=a("pilot/oop"),f=a("ace/mode/behaviour").Behaviour,h=a("ace/mode/behaviour/cstyle").CstyleBehaviour,j=function(){this.inherit(h,["string_dquotes"]);this.add("brackets","insertion",function(m,p,v,s,z){if(z=="<"){m=v.getSelectionRange();return s.doc.getTextRange(m)!==""?false:{text:"<>",selection:[1,1]}}if(z==">"){m=v.getCursorPosition();p=s.doc.getLine(m.row);
if(p.substring(m.column,m.column+1)==">")return{text:"",selection:[1,1]}}else if(z=="\n"){m=v.getCursorPosition();p=s.doc.getLine(m.row);if(p.substring(m.column,m.column+2)=="</"){p=this.$getIndent(s.doc.getLine(m.row))+s.getTabString();s=this.$getIndent(s.doc.getLine(m.row));return{text:"\n"+p+"\n"+s,selection:[1,p.length,1,p.length]}}}return false})};d.inherits(j,f);b.XmlBehaviour=j});
define("ace/mode/css",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/css_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client"],function(a,b){var d=a("pilot/oop"),f=a("ace/mode/text").Mode,h=a("ace/tokenizer").Tokenizer,j=a("ace/mode/css_highlight_rules").CssHighlightRules,m=a("ace/mode/matching_brace_outdent").MatchingBraceOutdent,p=a("ace/worker/worker_client").WorkerClient,v=function(){this.$tokenizer=new h((new j).getRules());this.$outdent=
new m};d.inherits(v,f);(function(){this.getNextLineIndent=function(s,z,D){var F=this.$getIndent(z);s=this.$tokenizer.getLineTokens(z,s).tokens;if(s.length&&s[s.length-1].type=="comment")return F;return z.match(/^.*\{\s*$/)&&(F+=D),F};this.checkOutdent=function(s,z,D){return this.$outdent.checkOutdent(z,D)};this.autoOutdent=function(s,z,D){this.$outdent.autoOutdent(z,D)};this.createWorker=function(s){var z=s.getDocument(),D=new p(["ace","pilot"],"worker-css.js","ace/mode/css_worker","Worker");D.call("setValue",
[z.getValue()]);z.on("change",function(F){F.range={start:F.data.range.start,end:F.data.range.end};D.emit("change",F)});D.on("csslint",function(F){var J=[];F.data.forEach(function(O){J.push({row:O.line-1,column:O.col-1,text:O.message,type:O.type,lint:O})});s.setAnnotations(J)})}}).call(v.prototype);b.Mode=v});
define("ace/mode/css_highlight_rules",["require","exports","module","pilot/oop","pilot/lang","ace/mode/text_highlight_rules"],function(a,b){var d=a("pilot/oop"),f=a("pilot/lang"),h=a("ace/mode/text_highlight_rules").TextHighlightRules,j=function(){function m(r){var C=[];r=r.split("");for(var G=0;G<r.length;G++)C.push("[",r[G].toLowerCase(),r[G].toUpperCase(),"]");return C.join("")}var p=f.arrayToMap("-moz-box-sizing|-webkit-box-sizing|appearance|azimuth|background-attachment|background-color|background-image|background-position|background-repeat|background|border-bottom-color|border-bottom-style|border-bottom-width|border-bottom|border-collapse|border-color|border-left-color|border-left-style|border-left-width|border-left|border-right-color|border-right-style|border-right-width|border-right|border-spacing|border-style|border-top-color|border-top-style|border-top-width|border-top|border-width|border|bottom|box-sizing|caption-side|clear|clip|color|content|counter-increment|counter-reset|cue-after|cue-before|cue|cursor|direction|display|elevation|empty-cells|float|font-family|font-size-adjust|font-size|font-stretch|font-style|font-variant|font-weight|font|height|left|letter-spacing|line-height|list-style-image|list-style-position|list-style-type|list-style|margin-bottom|margin-left|margin-right|margin-top|marker-offset|margin|marks|max-height|max-width|min-height|min-width|-moz-border-radius|opacity|orphans|outline-color|outline-style|outline-width|outline|overflow|overflow-x|overflow-y|padding-bottom|padding-left|padding-right|padding-top|padding|page-break-after|page-break-before|page-break-inside|page|pause-after|pause-before|pause|pitch-range|pitch|play-during|position|quotes|richness|right|size|speak-header|speak-numeral|speak-punctuation|speech-rate|speak|stress|table-layout|text-align|text-decoration|text-indent|text-shadow|text-transform|top|unicode-bidi|vertical-align|visibility|voice-family|volume|white-space|widows|width|word-spacing|z-index".split("|")),
v=f.arrayToMap("rgb|rgba|url|attr|counter|counters".split("|")),s=f.arrayToMap("absolute|all-scroll|always|armenian|auto|baseline|below|bidi-override|block|bold|bolder|border-box|both|bottom|break-all|break-word|capitalize|center|char|circle|cjk-ideographic|col-resize|collapse|content-box|crosshair|dashed|decimal-leading-zero|decimal|default|disabled|disc|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ellipsis|fixed|georgian|groove|hand|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|inactive|inherit|inline-block|inline|inset|inside|inter-ideograph|inter-word|italic|justify|katakana-iroha|katakana|keep-all|left|lighter|line-edge|line-through|line|list-item|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|medium|middle|move|n-resize|ne-resize|newspaper|no-drop|no-repeat|nw-resize|none|normal|not-allowed|nowrap|oblique|outset|outside|overline|pointer|progress|relative|repeat-x|repeat-y|repeat|right|ridge|row-resize|rtl|s-resize|scroll|se-resize|separate|small-caps|solid|square|static|strict|super|sw-resize|table-footer-group|table-header-group|tb-rl|text-bottom|text-top|text|thick|thin|top|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|zero".split("|")),
z=f.arrayToMap("aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow".split("|")),D=[{token:"comment",merge:true,regex:"\\/\\*",next:"ruleset_comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("em")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("ex")},{token:"constant.numeric",
regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("px")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("cm")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("mm")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("in")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("pt")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("pc")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+
m("deg")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("rad")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("grad")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("ms")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("s")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("hz")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("khz")},
{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))%"},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"},{token:"constant.numeric",regex:"#[a-fA-F0-9]{6}"},{token:"constant.numeric",regex:"#[a-fA-F0-9]{3}"},{token:function(r){return p.hasOwnProperty(r.toLowerCase())?"support.type":v.hasOwnProperty(r.toLowerCase())?"support.function":s.hasOwnProperty(r.toLowerCase())?"support.constant":z.hasOwnProperty(r.toLowerCase())?"support.constant.color":"text"},regex:"\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"}],
F=f.copyArray(D);F.unshift({token:"rparen",regex:"\\}",next:"start"});D=f.copyArray(D);D.unshift({token:"rparen",regex:"\\}",next:"media"});var J=[{token:"comment",merge:true,regex:".+"}],O=f.copyArray(J);O.unshift({token:"comment",regex:".*?\\*\\/",next:"start"});var q=f.copyArray(J);q.unshift({token:"comment",regex:".*?\\*\\/",next:"media"});J=f.copyArray(J);J.unshift({token:"comment",regex:".*?\\*\\/",next:"ruleset"});this.$rules={start:[{token:"comment",merge:true,regex:"\\/\\*",next:"comment"},
{token:"lparen",regex:"\\{",next:"ruleset"},{token:"string",regex:"@media.*?{",next:"media"},{token:"keyword",regex:"#[a-zA-Z0-9-_]+"},{token:"variable",regex:"\\.[a-zA-Z0-9-_]+"},{token:"string",regex:":[a-zA-Z0-9-_]+"},{token:"constant",regex:"[a-zA-Z0-9-_]+"}],media:[{token:"comment",merge:true,regex:"\\/\\*",next:"media_comment"},{token:"lparen",regex:"\\{",next:"media_ruleset"},{token:"string",regex:"\\}",next:"start"},{token:"keyword",regex:"#[a-zA-Z0-9-_]+"},{token:"variable",regex:"\\.[a-zA-Z0-9-_]+"},
{token:"string",regex:":[a-zA-Z0-9-_]+"},{token:"constant",regex:"[a-zA-Z0-9-_]+"}],comment:O,ruleset:F,ruleset_comment:J,media_ruleset:D,media_comment:q}};d.inherits(j,h);b.CssHighlightRules=j});
define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(a,b){var d=a("ace/range").Range,f=function(){};(function(){this.checkOutdent=function(h,j){return/^\s+$/.test(h)?/^\s*\}/.test(j):false};this.autoOutdent=function(h,j){var m=h.getLine(j).match(/^(\s*\})/);if(!m)return 0;m=m[1].length;var p=h.findMatchingBracket({row:j,column:m});if(!p||p.row==j)return 0;p=this.$getIndent(h.getLine(p.row));h.replace(new d(j,0,j,m-1),p)};this.$getIndent=function(h){return(h=
h.match(/^(\s+)/))?h[1]:""}}).call(f.prototype);b.MatchingBraceOutdent=f});
define("ace/worker/worker_client",["require","exports","module","pilot/oop","pilot/event_emitter"],function(a,b){var d=a("pilot/oop"),f=a("pilot/event_emitter").EventEmitter,h=function(j,m,p,v){this.callbacks=[];if(a.packaged){j=this.$guessBasePath();m=this.$worker=new Worker(j+m)}else{var s=this.$normalizePath(a.nameToUrl("ace/worker/worker",null,"_"));m=this.$worker=new Worker(s);s={};for(m=0;m<j.length;m++){var z=j[m],D=this.$normalizePath(a.nameToUrl(z,null,"_").replace(/.js$/,""));s[z]=D}}this.$worker.postMessage({init:true,
tlns:s,module:p,classname:v});this.callbackId=1;this.callbacks={};var F=this;this.$worker.onerror=function(J){throw window.console&&console.log&&console.log(J),J;};this.$worker.onmessage=function(J){J=J.data;switch(J.type){case "log":window.console&&console.log&&console.log(J.data);break;case "event":F._dispatchEvent(J.name,{data:J.data});break;case "call":var O=F.callbacks[J.id];O&&(O(J.data),delete F.callbacks[J.id])}}};(function(){d.implement(this,f);this.$normalizePath=function(j){return j.match(/^\w+:/)||
(j=location.protocol+"//"+location.host+(j.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+j.replace(/^[\/]+/,"")),j};this.$guessBasePath=function(){if(a.aceBaseUrl)return a.aceBaseUrl;for(var j=document.getElementsByTagName("script"),m=0;m<j.length;m++){var p=j[m],v=p.getAttribute("data-ace-base");if(v)return v.replace(/\/*$/,"/");if(p=p.src||p.getAttribute("src"))if(p=p.match(/^(?:(.*\/)ace\.js|(.*\/)ace-uncompressed\.js)(?:\?|$)/))return p[1]||p[2]}return""};this.terminate=function(){this._dispatchEvent("terminate",
{});this.$worker.terminate()};this.send=function(j,m){this.$worker.postMessage({command:j,args:m})};this.call=function(j,m,p){if(p){var v=this.callbackId++;this.callbacks[v]=p;m.push(v)}this.send(j,m)};this.emit=function(j,m){try{this.$worker.postMessage({event:j,data:m})}catch(p){}}}).call(h.prototype);b.WorkerClient=h});
define("ace/mode/scss",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/scss_highlight_rules","ace/mode/matching_brace_outdent"],function(a,b){var d=a("pilot/oop"),f=a("ace/mode/text").Mode,h=a("ace/tokenizer").Tokenizer,j=a("ace/mode/scss_highlight_rules").ScssHighlightRules,m=a("ace/mode/matching_brace_outdent").MatchingBraceOutdent,p=function(){this.$tokenizer=new h((new j).getRules());this.$outdent=new m};d.inherits(p,f);(function(){this.getNextLineIndent=function(v,
s,z){var D=this.$getIndent(s);v=this.$tokenizer.getLineTokens(s,v).tokens;if(v.length&&v[v.length-1].type=="comment")return D;return s.match(/^.*\{\s*$/)&&(D+=z),D};this.checkOutdent=function(v,s,z){return this.$outdent.checkOutdent(s,z)};this.autoOutdent=function(v,s,z){this.$outdent.autoOutdent(s,z)}}).call(p.prototype);b.Mode=p});
define("ace/mode/scss_highlight_rules",["require","exports","module","pilot/oop","pilot/lang","ace/mode/text_highlight_rules"],function(a,b){var d=a("pilot/oop"),f=a("pilot/lang"),h=a("ace/mode/text_highlight_rules").TextHighlightRules,j=function(){function m(J){var O=[];J=J.split("");for(var q=0;q<J.length;q++)O.push("[",J[q].toLowerCase(),J[q].toUpperCase(),"]");return O.join("")}var p=f.arrayToMap(function(){for(var J="-webkit-|-moz-|-o-|-ms-|-svg-|-pie-|-khtml-".split("|"),O="appearance|background-clip|background-inline-policy|background-origin|background-size|binding|border-bottom-colors|border-left-colors|border-right-colors|border-top-colors|border-end|border-end-color|border-end-style|border-end-width|border-image|border-start|border-start-color|border-start-style|border-start-width|box-align|box-direction|box-flex|box-flexgroup|box-ordinal-group|box-orient|box-pack|box-sizing|column-count|column-gap|column-width|column-rule|column-rule-width|column-rule-style|column-rule-color|float-edge|font-feature-settings|font-language-override|force-broken-image-icon|image-region|margin-end|margin-start|opacity|outline|outline-color|outline-offset|outline-radius|outline-radius-bottomleft|outline-radius-bottomright|outline-radius-topleft|outline-radius-topright|outline-style|outline-width|padding-end|padding-start|stack-sizing|tab-size|text-blink|text-decoration-color|text-decoration-line|text-decoration-style|transform|transform-origin|transition|transition-delay|transition-duration|transition-property|transition-timing-function|user-focus|user-input|user-modify|user-select|window-shadow|border-radius".split("|"),
q="azimuth|background-attachment|background-color|background-image|background-position|background-repeat|background|border-bottom-color|border-bottom-style|border-bottom-width|border-bottom|border-collapse|border-color|border-left-color|border-left-style|border-left-width|border-left|border-right-color|border-right-style|border-right-width|border-right|border-spacing|border-style|border-top-color|border-top-style|border-top-width|border-top|border-width|border|bottom|box-sizing|caption-side|clear|clip|color|content|counter-increment|counter-reset|cue-after|cue-before|cue|cursor|direction|display|elevation|empty-cells|float|font-family|font-size-adjust|font-size|font-stretch|font-style|font-variant|font-weight|font|height|left|letter-spacing|line-height|list-style-image|list-style-position|list-style-type|list-style|margin-bottom|margin-left|margin-right|margin-top|marker-offset|margin|marks|max-height|max-width|min-height|min-width|opacity|orphans|outline-color|outline-style|outline-width|outline|overflow|overflow-x|overflow-y|padding-bottom|padding-left|padding-right|padding-top|padding|page-break-after|page-break-before|page-break-inside|page|pause-after|pause-before|pause|pitch-range|pitch|play-during|position|quotes|richness|right|size|speak-header|speak-numeral|speak-punctuation|speech-rate|speak|stress|table-layout|text-align|text-decoration|text-indent|text-shadow|text-transform|top|unicode-bidi|vertical-align|visibility|voice-family|volume|white-space|widows|width|word-spacing|z-index".split("|"),
r=[],C=0,G=J.length;C<G;C++)Array.prototype.push.apply(r,(J[C]+O.join("|"+J[C])).split("|"));return Array.prototype.push.apply(r,O),Array.prototype.push.apply(r,q),r}()),v=f.arrayToMap("hsl|hsla|rgb|rgba|url|attr|counter|counters|abs|adjust_color|adjust_hue|alpha|join|blue|ceil|change_color|comparable|complement|darken|desaturate|floor|grayscale|green|hue|if|invert|join|length|lighten|lightness|mix|nth|opacify|opacity|percentage|quote|red|round|saturate|saturation|scale_color|transparentize|type_of|unit|unitless|unqoute".split("|")),
s=f.arrayToMap("absolute|all-scroll|always|armenian|auto|baseline|below|bidi-override|block|bold|bolder|border-box|both|bottom|break-all|break-word|capitalize|center|char|circle|cjk-ideographic|col-resize|collapse|content-box|crosshair|dashed|decimal-leading-zero|decimal|default|disabled|disc|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ellipsis|fixed|georgian|groove|hand|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|inactive|inherit|inline-block|inline|inset|inside|inter-ideograph|inter-word|italic|justify|katakana-iroha|katakana|keep-all|left|lighter|line-edge|line-through|line|list-item|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|medium|middle|move|n-resize|ne-resize|newspaper|no-drop|no-repeat|nw-resize|none|normal|not-allowed|nowrap|oblique|outset|outside|overline|pointer|progress|relative|repeat-x|repeat-y|repeat|right|ridge|row-resize|rtl|s-resize|scroll|se-resize|separate|small-caps|solid|square|static|strict|super|sw-resize|table-footer-group|table-header-group|tb-rl|text-bottom|text-top|text|thick|thin|top|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|zero".split("|")),
z=f.arrayToMap("aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow".split("|")),D=f.arrayToMap("@mixin|@extend|@include|@import|@media|@debug|@warn|@if|@for|@each|@while|@else|@font-face|@-webkit-keyframes|if|and|!default|module|def|end|declare".split("|")),F=f.arrayToMap("a|abbr|acronym|address|applet|area|article|aside|audio|b|base|basefont|bdo|big|blockquote|body|br|button|canvas|caption|center|cite|code|col|colgroup|command|datalist|dd|del|details|dfn|dir|div|dl|dt|em|embed|fieldset|figcaption|figure|font|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hgroup|hr|html|i|iframe|img|input|ins|keygen|kbd|label|legend|li|link|map|mark|menu|meta|meter|nav|noframes|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|rp|rt|ruby|s|samp|script|section|select|small|source|span|strike|strong|style|sub|summary|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|tt|u|ul|var|video|wbr|xmp".split("|"));
this.$rules={start:[{token:"comment",regex:"\\/\\/.*$"},{token:"comment",merge:true,regex:"\\/\\*",next:"comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",merge:true,regex:'["].*\\\\$',next:"qqstring"},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"string",merge:true,regex:"['].*\\\\$",next:"qstring"},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("em")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+
m("ex")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("px")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("cm")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("mm")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("in")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("pt")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("pc")},
{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("deg")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("rad")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("grad")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("ms")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("s")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("hz")},{token:"constant.numeric",
regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"+m("khz")},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))%"},{token:"constant.numeric",regex:"#[a-fA-F0-9]{6}"},{token:"constant.numeric",regex:"#[a-fA-F0-9]{3}"},{token:"constant.numeric",regex:"\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"},{token:function(J){return p.hasOwnProperty(J.toLowerCase())?"support.type":D.hasOwnProperty(J)?"keyword":s.hasOwnProperty(J)?"constant.language":v.hasOwnProperty(J)?"support.function":z.hasOwnProperty(J.toLowerCase())?
"support.constant.color":F.hasOwnProperty(J.toLowerCase())?"variable.language":"text"},regex:"\\-?[@a-zA-Z_][@a-zA-Z0-9_\\-]*"},{token:"variable",regex:"[a-zA-Z_\\-$][a-zA-Z0-9_\\-$]*\\b"},{token:"variable.language",regex:"#[a-zA-Z0-9-_]+"},{token:"variable.language",regex:"\\.[a-zA-Z0-9-_]+"},{token:"variable.language",regex:":[a-zA-Z0-9-_]+"},{token:"constant",regex:"[a-zA-Z0-9-_]+"},{token:"keyword.operator",regex:"<|>|<=|>=|==|!=|-|%|#|\\+|\\$|\\+|\\*"},{token:"lparen",regex:"[[({]"},{token:"rparen",
regex:"[\\])}]"},{token:"text",regex:"\\s+"}],comment:[{token:"comment",regex:".*?\\*\\/",next:"start"},{token:"comment",merge:true,regex:".+"}],qqstring:[{token:"string",regex:'(?:(?:\\\\.)|(?:[^"\\\\]))*?"',next:"start"},{token:"string",merge:true,regex:".+"}],qstring:[{token:"string",regex:"(?:(?:\\\\.)|(?:[^'\\\\]))*?'",next:"start"},{token:"string",merge:true,regex:".+"}]}};d.inherits(j,h);b.ScssHighlightRules=j});
define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(a,b){var d=a("ace/range").Range,f=function(){};(function(){this.checkOutdent=function(h,j){return/^\s+$/.test(h)?/^\s*\}/.test(j):false};this.autoOutdent=function(h,j){var m=h.getLine(j).match(/^(\s*\})/);if(!m)return 0;m=m[1].length;var p=h.findMatchingBracket({row:j,column:m});if(!p||p.row==j)return 0;p=this.$getIndent(h.getLine(p.row));h.replace(new d(j,0,j,m-1),p)};this.$getIndent=function(h){return(h=
h.match(/^(\s+)/))?h[1]:""}}).call(f.prototype);b.MatchingBraceOutdent=f});
define("ace/mode/textile",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/textile_highlight_rules","ace/mode/matching_brace_outdent","ace/range"],function(a,b){var d=a("pilot/oop"),f=a("ace/mode/text").Mode,h=a("ace/tokenizer").Tokenizer,j=a("ace/mode/textile_highlight_rules").TextileHighlightRules,m=a("ace/mode/matching_brace_outdent").MatchingBraceOutdent;a("ace/range");var p=function(){this.$tokenizer=new h((new j).getRules());this.$outdent=new m};d.inherits(p,
f);(function(){this.getNextLineIndent=function(v,s,z){return v=="intag"?z:""};this.checkOutdent=function(v,s,z){return this.$outdent.checkOutdent(s,z)};this.autoOutdent=function(v,s,z){this.$outdent.autoOutdent(s,z)}}).call(p.prototype);b.Mode=p});
define("ace/mode/textile_highlight_rules",["require","exports","module","pilot/oop","ace/mode/text_highlight_rules"],function(a,b){var d=a("pilot/oop"),f=a("ace/mode/text_highlight_rules").TextHighlightRules,h=function(){this.$rules={start:[{token:"keyword",token:function(j){return j.match(/^h\d$/)?"markup.heading."+j.charAt(1):"markup.heading"},regex:"h1|h2|h3|h4|h5|h6|bq|p|bc|pre",next:"blocktag"},{token:"keyword",regex:"[\\*]+|[#]+"},{token:"text",regex:".+"}],blocktag:[{token:"keyword",regex:"\\. ",
next:"start"},{token:"keyword",regex:"\\(",next:"blocktagproperties"}],blocktagproperties:[{token:"keyword",regex:"\\)",next:"blocktag"},{token:"string",regex:"[a-zA-Z0-9\\-_]+"},{token:"keyword",regex:"#"}]}};d.inherits(h,f);b.TextileHighlightRules=h});
define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(a,b){var d=a("ace/range").Range,f=function(){};(function(){this.checkOutdent=function(h,j){return/^\s+$/.test(h)?/^\s*\}/.test(j):false};this.autoOutdent=function(h,j){var m=h.getLine(j).match(/^(\s*\})/);if(!m)return 0;m=m[1].length;var p=h.findMatchingBracket({row:j,column:m});if(!p||p.row==j)return 0;p=this.$getIndent(h.getLine(p.row));h.replace(new d(j,0,j,m-1),p)};this.$getIndent=function(h){return(h=
h.match(/^(\s+)/))?h[1]:""}}).call(f.prototype);b.MatchingBraceOutdent=f})(function(a,b){function d(c){return g.isWindow(c)?c:c.nodeType===9?c.defaultView||c.parentWindow:false}function f(c){if(!db[c]){var i=Y.body,e=g("<"+c+">").appendTo(i),k=e.css("display");e.remove();if(k==="none"||k===""){Ta||(Ta=Y.createElement("iframe"),Ta.frameBorder=Ta.width=Ta.height=0);i.appendChild(Ta);if(!Ba||!Ta.createElement){Ba=(Ta.contentWindow||Ta.contentDocument).document;Ba.write((Y.compatMode==="CSS1Compat"?"<!doctype html>":
"")+"<html><body>");Ba.close()}e=Ba.createElement(c);Ba.body.appendChild(e);k=g.css(e,"display");i.removeChild(Ta)}db[c]=k}return db[c]}function h(c,i){var e={};g.each(Ka.concat.apply([],Ka.slice(0,i)),function(){e[this]=c});return e}function j(){qb=b}function m(){setTimeout(j,0);return qb=g.now()}function p(){try{return new a.XMLHttpRequest}catch(c){}}function v(c,i,e,k){if(g.isArray(i))g.each(i,function(n,o){e||eb.test(c)?k(c,o):v(c+"["+(typeof o=="object"||g.isArray(o)?n:"")+"]",o,e,k)});else if(!e&&
i!=null&&typeof i=="object")for(var l in i)v(c+"["+l+"]",i[l],e,k);else k(c,i)}function s(c,i,e,k,l,n){l=l||i.dataTypes[0];n=n||{};n[l]=true;l=c[l];for(var o=0,t=l?l.length:0,w=c===bb,x;o<t&&(w||!x);o++){x=l[o](i,e,k);typeof x=="string"&&(!w||n[x]?(x=b):(i.dataTypes.unshift(x),x=s(c,i,e,k,x,n)))}(w||!x)&&!n["*"]&&(x=s(c,i,e,k,"*",n));return x}function z(c){return function(i,e){typeof i!="string"&&(e=i,i="*");if(g.isFunction(e))for(var k=i.toLowerCase().split(cc),l=0,n=k.length,o,t;l<n;l++){o=k[l];
(t=/^\+/.test(o))&&(o=o.substr(1)||"*");o=c[o]=c[o]||[];o[t?"unshift":"push"](e)}}}function D(c,i,e){var k=i==="width"?c.offsetWidth:c.offsetHeight,l=i==="width"?ha:Qb;if(k>0){e!=="border"&&g.each(l,function(){e||(k-=parseFloat(g.css(c,"padding"+this))||0);e==="margin"?(k+=parseFloat(g.css(c,e+this))||0):(k-=parseFloat(g.css(c,"border"+this+"Width"))||0)});return k+"px"}k=fb(c,i,i);if(k<0||k==null)k=c.style[i]||0;k=parseFloat(k)||0;e&&g.each(l,function(){k+=parseFloat(g.css(c,"padding"+this))||0;
e!=="padding"&&(k+=parseFloat(g.css(c,"border"+this+"Width"))||0);e==="margin"&&(k+=parseFloat(g.css(c,e+this))||0)});return k+"px"}function F(c,i){i.src?g.ajax({url:i.src,async:false,dataType:"script"}):g.globalEval((i.text||i.textContent||i.innerHTML||"").replace(dc,"/*$0*/"));i.parentNode&&i.parentNode.removeChild(i)}function J(c){g.nodeName(c,"input")?O(c):"getElementsByTagName"in c&&g.grep(c.getElementsByTagName("input"),O)}function O(c){if(c.type==="checkbox"||c.type==="radio")c.defaultChecked=
c.checked}function q(c){return"getElementsByTagName"in c?c.getElementsByTagName("*"):"querySelectorAll"in c?c.querySelectorAll("*"):[]}function r(c,i){var e;if(i.nodeType===1){i.clearAttributes&&i.clearAttributes();i.mergeAttributes&&i.mergeAttributes(c);e=i.nodeName.toLowerCase();if(e==="object")i.outerHTML=c.outerHTML;else if(e!=="input"||c.type!=="checkbox"&&c.type!=="radio")if(e==="option")i.selected=c.defaultSelected;else{if(e==="input"||e==="textarea")i.defaultValue=c.defaultValue}else{c.checked&&
(i.defaultChecked=i.checked=c.checked);i.value!==c.value&&(i.value=c.value)}i.removeAttribute(g.expando)}}function C(c,i){if(i.nodeType===1&&g.hasData(c)){var e=g.expando,k=g.data(c),l=g.data(i,k);if(k=k[e]){var n=k.events;l=l[e]=g.extend({},k);if(n){delete l.handle;l.events={};for(var o in n){e=0;for(k=n[o].length;e<k;e++)g.event.add(i,o+(n[o][e].namespace?".":"")+n[o][e].namespace,n[o][e],n[o][e].data)}}}}}function G(c,i,e){i=i||0;if(g.isFunction(i))return g.grep(c,function(l,n){return!!i.call(l,
n,l)===e});if(i.nodeType)return g.grep(c,function(l){return l===i===e});if(typeof i=="string"){var k=g.grep(c,function(l){return l.nodeType===1});if(Fa.test(i))return g.filter(i,k,!e);i=g.filter(i,k)}return g.grep(c,function(l){return g.inArray(l,i)>=0===e})}function da(c,i){return(c&&c!=="*"?c+".":"")+i.replace(cb,"`").replace(gb,"&")}function ia(c){var i,e,k,l,n,o,t,w,x,B,H,S=[];l=[];n=g._data(this,"events");if(!(c.liveFired===this||!n||!n.live||c.target.disabled||c.button&&c.type==="click")){c.namespace&&
(H=new RegExp("(^|\\.)"+c.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)"));c.liveFired=this;var ba=n.live.slice(0);for(t=0;t<ba.length;t++){n=ba[t];n.origType.replace(ua,"")===c.type?l.push(n.selector):ba.splice(t--,1)}l=g(c.target).closest(l,c.currentTarget);w=0;for(x=l.length;w<x;w++){B=l[w];for(t=0;t<ba.length;t++){n=ba[t];if(B.selector===n.selector&&(!H||H.test(n.namespace))&&!B.elem.disabled){o=B.elem;k=null;if(n.preType==="mouseenter"||n.preType==="mouseleave"){c.type=n.preType;(k=g(c.relatedTarget).closest(n.selector)[0])&&
g.contains(o,k)&&(k=o)}(!k||k!==o)&&S.push({elem:o,handleObj:n,level:B.level})}}}w=0;for(x=S.length;w<x;w++){l=S[w];if(e&&l.level>e)break;c.currentTarget=l.elem;c.data=l.handleObj.data;c.handleObj=l.handleObj;H=l.handleObj.origHandler.apply(l.elem,arguments);if(H===false||c.isPropagationStopped()){e=l.level;H===false&&(i=false);if(c.isImmediatePropagationStopped())break}}return i}}function la(c,i,e){var k=g.extend({},e[0]);k.type=c;k.originalEvent={};k.liveFired=b;g.event.handle.call(i,k);k.isDefaultPrevented()&&
e[0].preventDefault()}function na(){return true}function oa(){return false}function Ca(c,i,e){var k=i+"defer",l=i+"queue",n=i+"mark",o=g.data(c,k,b,true);o&&(e==="queue"||!g.data(c,l,b,true))&&(e==="mark"||!g.data(c,n,b,true))&&setTimeout(function(){!g.data(c,l,b,true)&&!g.data(c,n,b,true)&&(g.removeData(c,k,true),o.resolve())},0)}function Ua(c){for(var i in c)if(i!=="toJSON")return false;return true}function Va(c,i,e){if(e===b&&c.nodeType===1){e="data-"+i.replace(V,"$1-$2").toLowerCase();e=c.getAttribute(e);
if(typeof e=="string"){try{e=e==="true"?true:e==="false"?false:e==="null"?null:g.isNaN(e)?P.test(e)?g.parseJSON(e):e:parseFloat(e)}catch(k){}g.data(c,i,e)}else e=b}return e}var Y=a.document,T=a.navigator,X=a.location,g=function(){function c(){if(!i.isReady){try{Y.documentElement.doScroll("left")}catch(A){setTimeout(c,1);return}i.ready()}}var i=function(A,N){return new i.fn.init(A,N,l)},e=a.jQuery,k=a.$,l,n=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,o=/\S/,t=/^\s+/,w=/\s+$/,x=/\d/,B=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,
H=/^[\],:{}\s]*$/,S=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,ba=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ea=/(?:^|:|,)(?:\s*\[)+/g,Da=/(webkit)[ \/]([\w.]+)/,ra=/(opera)(?:.*version)?[ \/]([\w.]+)/,va=/(msie) ([\w.]+)/,wa=/(mozilla)(?:.*? rv:([\w.]+))?/,u=/-([a-z])/ig,y=function(A,N){return N.toUpperCase()},K=T.userAgent,L,I,M=Object.prototype.toString,U=Object.prototype.hasOwnProperty,aa=Array.prototype.push,ka=Array.prototype.slice,Ga=String.prototype.trim,Ea=Array.prototype.indexOf,
Oa={};i.fn=i.prototype={constructor:i,init:function(A,N,ca){var Z,ja;if(!A)return this;if(A.nodeType){this.context=this[0]=A;this.length=1;return this}if(A==="body"&&!N&&Y.body){this.context=Y;this[0]=Y.body;this.selector=A;this.length=1;return this}if(typeof A=="string"){A.charAt(0)!=="<"||A.charAt(A.length-1)!==">"||A.length<3?(Z=n.exec(A)):(Z=[null,A,null]);if(Z&&(Z[1]||!N)){if(Z[1]){ja=(N=N instanceof i?N[0]:N)?N.ownerDocument||N:Y;(ca=B.exec(A))?i.isPlainObject(N)?(A=[Y.createElement(ca[1])],
i.fn.attr.call(A,N,true)):(A=[ja.createElement(ca[1])]):(ca=i.buildFragment([Z[1]],[ja]),A=(ca.cacheable?i.clone(ca.fragment):ca.fragment).childNodes);return i.merge(this,A)}if((N=Y.getElementById(Z[2]))&&N.parentNode){if(N.id!==Z[2])return ca.find(A);this.length=1;this[0]=N}this.context=Y;this.selector=A;return this}return!N||N.jquery?(N||ca).find(A):this.constructor(N).find(A)}if(i.isFunction(A))return ca.ready(A);A.selector!==b&&(this.selector=A.selector,this.context=A.context);return i.makeArray(A,
this)},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},toArray:function(){return ka.call(this,0)},get:function(A){return A==null?this.toArray():A<0?this[this.length+A]:this[A]},pushStack:function(A,N,ca){var Z=this.constructor();i.isArray(A)?aa.apply(Z,A):i.merge(Z,A);Z.prevObject=this;Z.context=this.context;N==="find"?(Z.selector=this.selector+(this.selector?" ":"")+ca):N&&(Z.selector=this.selector+"."+N+"("+ca+")");return Z},each:function(A,N){return i.each(this,A,N)},ready:function(A){i.bindReady();
L.done(A);return this},eq:function(A){return A===-1?this.slice(A):this.slice(A,+A+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(ka.apply(this,arguments),"slice",ka.call(arguments).join(","))},map:function(A){return this.pushStack(i.map(this,function(N,ca){return A.call(N,ca,N)}))},end:function(){return this.prevObject||this.constructor(null)},push:aa,sort:[].sort,splice:[].splice};i.fn.init.prototype=i.fn;i.extend=i.fn.extend=function(){var A,
N,ca,Z,ja,sa,xa=arguments[0]||{},Aa=1,vb=arguments.length,wb=false;typeof xa=="boolean"&&(wb=xa,xa=arguments[1]||{},Aa=2);typeof xa!="object"&&!i.isFunction(xa)&&(xa={});for(vb===Aa&&(xa=this,--Aa);Aa<vb;Aa++)if((A=arguments[Aa])!=null)for(N in A){ca=xa[N];Z=A[N];if(xa!==Z)wb&&Z&&(i.isPlainObject(Z)||(ja=i.isArray(Z)))?(ja?(ja=false,sa=ca&&i.isArray(ca)?ca:[]):(sa=ca&&i.isPlainObject(ca)?ca:{}),xa[N]=i.extend(wb,sa,Z)):Z!==b&&(xa[N]=Z)}return xa};i.extend({noConflict:function(A){a.$===i&&(a.$=k);
A&&a.jQuery===i&&(a.jQuery=e);return i},isReady:false,readyWait:1,holdReady:function(A){A?i.readyWait++:i.ready(true)},ready:function(A){if(A===true&&!--i.readyWait||A!==true&&!i.isReady){if(!Y.body)return setTimeout(i.ready,1);i.isReady=true;if(!(A!==true&&--i.readyWait>0)){L.resolveWith(Y,[i]);i.fn.trigger&&i(Y).trigger("ready").unbind("ready")}}},bindReady:function(){if(!L){L=i._Deferred();if(Y.readyState==="complete")return setTimeout(i.ready,1);if(Y.addEventListener){Y.addEventListener("DOMContentLoaded",
I,false);a.addEventListener("load",i.ready,false)}else if(Y.attachEvent){Y.attachEvent("onreadystatechange",I);a.attachEvent("onload",i.ready);var A=false;try{A=a.frameElement==null}catch(N){}Y.documentElement.doScroll&&A&&c()}}},isFunction:function(A){return i.type(A)==="function"},isArray:Array.isArray||function(A){return i.type(A)==="array"},isWindow:function(A){return A&&typeof A=="object"&&"setInterval"in A},isNaN:function(A){return A==null||!x.test(A)||isNaN(A)},type:function(A){return A==null?
String(A):Oa[M.call(A)]||"object"},isPlainObject:function(A){if(!A||i.type(A)!=="object"||A.nodeType||i.isWindow(A))return false;if(A.constructor&&!U.call(A,"constructor")&&!U.call(A.constructor.prototype,"isPrototypeOf"))return false;var N;for(N in A);return N===b||U.call(A,N)},isEmptyObject:function(A){for(var N in A)return false;return true},error:function(A){throw A;},parseJSON:function(A){if(typeof A!="string"||!A)return null;A=i.trim(A);if(a.JSON&&a.JSON.parse)return a.JSON.parse(A);if(H.test(A.replace(S,
"@").replace(ba,"]").replace(ea,"")))return(new Function("return "+A))();i.error("Invalid JSON: "+A)},parseXML:function(A,N,ca){a.DOMParser?(ca=new DOMParser,N=ca.parseFromString(A,"text/xml")):(N=new ActiveXObject("Microsoft.XMLDOM"),N.async="false",N.loadXML(A));ca=N.documentElement;(!ca||!ca.nodeName||ca.nodeName==="parsererror")&&i.error("Invalid XML: "+A);return N},noop:function(){},globalEval:function(A){A&&o.test(A)&&(a.execScript||function(N){a.eval.call(a,N)})(A)},camelCase:function(A){return A.replace(u,
y)},nodeName:function(A,N){return A.nodeName&&A.nodeName.toUpperCase()===N.toUpperCase()},each:function(A,N,ca){var Z,ja=0,sa=A.length,xa=sa===b||i.isFunction(A);if(ca)if(xa)for(Z in A){if(N.apply(A[Z],ca)===false)break}else for(;ja<sa;){if(N.apply(A[ja++],ca)===false)break}else if(xa)for(Z in A){if(N.call(A[Z],Z,A[Z])===false)break}else for(;ja<sa;)if(N.call(A[ja],ja,A[ja++])===false)break;return A},trim:Ga?function(A){return A==null?"":Ga.call(A)}:function(A){return A==null?"":(A+"").replace(t,
"").replace(w,"")},makeArray:function(A,N){var ca=N||[];if(A!=null){var Z=i.type(A);A.length==null||Z==="string"||Z==="function"||Z==="regexp"||i.isWindow(A)?aa.call(ca,A):i.merge(ca,A)}return ca},inArray:function(A,N){if(Ea)return Ea.call(N,A);for(var ca=0,Z=N.length;ca<Z;ca++)if(N[ca]===A)return ca;return-1},merge:function(A,N){var ca=A.length,Z=0;if(typeof N.length=="number")for(var ja=N.length;Z<ja;Z++)A[ca++]=N[Z];else for(;N[Z]!==b;)A[ca++]=N[Z++];A.length=ca;return A},grep:function(A,N,ca){var Z=
[],ja;ca=!!ca;for(var sa=0,xa=A.length;sa<xa;sa++){ja=!!N(A[sa],sa);ca!==ja&&Z.push(A[sa])}return Z},map:function(A,N,ca){var Z,ja,sa=[],xa=0,Aa=A.length;if(A instanceof i||Aa!==b&&typeof Aa=="number"&&(Aa>0&&A[0]&&A[Aa-1]||Aa===0||i.isArray(A)))for(;xa<Aa;xa++){Z=N(A[xa],xa,ca);Z!=null&&(sa[sa.length]=Z)}else for(ja in A){Z=N(A[ja],ja,ca);Z!=null&&(sa[sa.length]=Z)}return sa.concat.apply([],sa)},guid:1,proxy:function(A,N){if(typeof N=="string"){var ca=A[N];N=A;A=ca}if(!i.isFunction(A))return b;var Z=
ka.call(arguments,2);ca=function(){return A.apply(N,Z.concat(ka.call(arguments)))};ca.guid=A.guid=A.guid||ca.guid||i.guid++;return ca},access:function(A,N,ca,Z,ja,sa){var xa=A.length;if(typeof N=="object"){for(var Aa in N)i.access(A,Aa,N[Aa],Z,ja,ca);return A}if(ca!==b){Z=!sa&&Z&&i.isFunction(ca);for(Aa=0;Aa<xa;Aa++)ja(A[Aa],N,Z?ca.call(A[Aa],Aa,ja(A[Aa],N)):ca,sa);return A}return xa?ja(A[0],N):b},now:function(){return(new Date).getTime()},uaMatch:function(A){A=A.toLowerCase();A=Da.exec(A)||ra.exec(A)||
va.exec(A)||A.indexOf("compatible")<0&&wa.exec(A)||[];return{browser:A[1]||"",version:A[2]||"0"}},sub:function(){function A(ca,Z){return new A.fn.init(ca,Z)}i.extend(true,A,this);A.superclass=this;A.fn=A.prototype=this();A.fn.constructor=A;A.sub=this.sub;A.fn.init=function(ca,Z){Z&&Z instanceof i&&!(Z instanceof A)&&(Z=A(Z));return i.fn.init.call(this,ca,Z,N)};A.fn.init.prototype=A.fn;var N=A(Y);return A},browser:{}});i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(A,
N){Oa["[object "+N+"]"]=N.toLowerCase()});K=i.uaMatch(K);K.browser&&(i.browser[K.browser]=true,i.browser.version=K.version);i.browser.webkit&&(i.browser.safari=true);o.test("\u00a0")&&(t=/^[\s\xA0]+/,w=/[\s\xA0]+$/);l=i(Y);Y.addEventListener?(I=function(){Y.removeEventListener("DOMContentLoaded",I,false);i.ready()}):Y.attachEvent&&(I=function(){Y.readyState==="complete"&&(Y.detachEvent("onreadystatechange",I),i.ready())});return i}(),E="done fail isResolved isRejected promise then always pipe".split(" "),
Q=[].slice;g.extend({_Deferred:function(){var c=[],i,e,k,l={done:function(){if(!k){var n=arguments,o,t,w,x,B;i&&(B=i,i=0);o=0;for(t=n.length;o<t;o++){w=n[o];x=g.type(w);x==="array"?l.done.apply(l,w):x==="function"&&c.push(w)}B&&l.resolveWith(B[0],B[1])}return this},resolveWith:function(n,o){if(!k&&!i&&!e){o=o||[];e=1;try{for(;c[0];)c.shift().apply(n,o)}finally{i=[n,o];e=0}}return this},resolve:function(){l.resolveWith(this,arguments);return this},isResolved:function(){return!!e||!!i},cancel:function(){k=
1;c=[];return this}};return l},Deferred:function(c){var i=g._Deferred(),e=g._Deferred(),k;g.extend(i,{then:function(l,n){i.done(l).fail(n);return this},always:function(){return i.done.apply(i,arguments).fail.apply(this,arguments)},fail:e.done,rejectWith:e.resolveWith,reject:e.resolve,isRejected:e.isResolved,pipe:function(l,n){return g.Deferred(function(o){g.each({done:[l,"resolve"],fail:[n,"reject"]},function(t,w){var x=w[0],B=w[1],H;g.isFunction(x)?i[t](function(){(H=x.apply(this,arguments))&&g.isFunction(H.promise)?
H.promise().then(o.resolve,o.reject):o[B](H)}):i[t](o[B])})}).promise()},promise:function(l){if(l==null){if(k)return k;k=l={}}for(var n=E.length;n--;)l[E[n]]=i[E[n]];return l}});i.done(e.cancel).fail(i.cancel);delete i.cancel;c&&c.call(i,i);return i},when:function(c){function i(t){return function(w){e[t]=arguments.length>1?Q.call(arguments,0):w;--n||o.resolveWith(o,Q.call(e,0))}}var e=arguments,k=0,l=e.length,n=l,o=l<=1&&c&&g.isFunction(c.promise)?c:g.Deferred();if(l>1){for(;k<l;k++)e[k]&&g.isFunction(e[k].promise)?
e[k].promise().then(i(k),o.reject):--n;n||o.resolveWith(o,e)}else o!==c&&o.resolveWith(o,l?[c]:[]);return o.promise()}});g.support=function(){var c=Y.createElement("div"),i=Y.documentElement,e,k,l,n,o,t,w;c.setAttribute("className","t");c.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";e=c.getElementsByTagName("*");k=c.getElementsByTagName("a")[0];if(!e||!e.length||!k)return{};l=Y.createElement("select");n=l.appendChild(Y.createElement("option"));
e=c.getElementsByTagName("input")[0];t={leadingWhitespace:c.firstChild.nodeType===3,tbody:!c.getElementsByTagName("tbody").length,htmlSerialize:!!c.getElementsByTagName("link").length,style:/top/.test(k.getAttribute("style")),hrefNormalized:k.getAttribute("href")==="/a",opacity:/^0.55$/.test(k.style.opacity),cssFloat:!!k.style.cssFloat,checkOn:e.value==="on",optSelected:n.selected,getSetAttribute:c.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,
inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};e.checked=true;t.noCloneChecked=e.cloneNode(true).checked;l.disabled=true;t.optDisabled=!n.disabled;try{delete c.test}catch(x){t.deleteExpando=false}!c.addEventListener&&c.attachEvent&&c.fireEvent&&(c.attachEvent("onclick",function(){t.noCloneEvent=false}),c.cloneNode(true).fireEvent("onclick"));e=Y.createElement("input");e.value="t";e.setAttribute("type","radio");t.radioValue=e.value==="t";e.setAttribute("checked","checked");
c.appendChild(e);k=Y.createDocumentFragment();k.appendChild(c.firstChild);t.checkClone=k.cloneNode(true).cloneNode(true).lastChild.checked;c.innerHTML="";c.style.width=c.style.paddingLeft="1px";l=Y.getElementsByTagName("body")[0];k=Y.createElement(l?"div":"body");n={visibility:"hidden",width:0,height:0,border:0,margin:0};l&&g.extend(n,{position:"absolute",left:-1000,top:-1000});for(w in n)k.style[w]=n[w];k.appendChild(c);i=l||i;i.insertBefore(k,i.firstChild);t.appendChecked=e.checked;t.boxModel=c.offsetWidth===
2;"zoom"in c.style&&(c.style.display="inline",c.style.zoom=1,t.inlineBlockNeedsLayout=c.offsetWidth===2,c.style.display="",c.innerHTML="<div style='width:4px;'></div>",t.shrinkWrapBlocks=c.offsetWidth!==2);c.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";l=c.getElementsByTagName("td");e=l[0].offsetHeight===0;l[0].style.display="";l[1].style.display="none";t.reliableHiddenOffsets=e&&l[0].offsetHeight===0;c.innerHTML="";Y.defaultView&&Y.defaultView.getComputedStyle&&
(o=Y.createElement("div"),o.style.width="0",o.style.marginRight="0",c.appendChild(o),t.reliableMarginRight=(parseInt((Y.defaultView.getComputedStyle(o,null)||{marginRight:0}).marginRight,10)||0)===0);k.innerHTML="";i.removeChild(k);if(c.attachEvent)for(w in{submit:1,change:1,focusin:1}){o="on"+w;(e=o in c)||(c.setAttribute(o,"return;"),e=typeof c[o]=="function");t[w+"Bubbles"]=e}k=k=l=n=l=o=c=e=null;return t}();g.boxModel=g.support.boxModel;var P=/^(?:\{.*\}|\[.*\])$/,V=/([a-z])([A-Z])/g;g.extend({cache:{},
uuid:0,expando:"jQuery"+(g.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(c){c=c.nodeType?g.cache[c[g.expando]]:c[g.expando];return!!c&&!Ua(c)},data:function(c,i,e,k){if(g.acceptData(c)){var l=g.expando,n=typeof i=="string",o=c.nodeType,t=o?g.cache:c,w=o?c[g.expando]:c[g.expando]&&g.expando;if(!((!w||k&&w&&!t[w][l])&&n&&e===b)){w||(o?(c[g.expando]=w=++g.uuid):(w=g.expando));t[w]||(t[w]={},o||(t[w].toJSON=
g.noop));if(typeof i=="object"||typeof i=="function")k?(t[w][l]=g.extend(t[w][l],i)):(t[w]=g.extend(t[w],i));c=t[w];k&&(c[l]||(c[l]={}),c=c[l]);e!==b&&(c[g.camelCase(i)]=e);if(i==="events"&&!c[i])return c[l]&&c[l].events;return n?c[g.camelCase(i)]||c[i]:c}}},removeData:function(c,i,e){if(g.acceptData(c)){var k=g.expando,l=c.nodeType,n=l?g.cache:c,o=l?c[g.expando]:g.expando;if(n[o]){if(i){var t=e?n[o][k]:n[o];if(t){delete t[i];if(!Ua(t))return}}if(e){delete n[o][k];if(!Ua(n[o]))return}i=n[o][k];g.support.deleteExpando||
n!=a?delete n[o]:(n[o]=null);i?(n[o]={},l||(n[o].toJSON=g.noop),n[o][k]=i):l&&(g.support.deleteExpando?delete c[g.expando]:c.removeAttribute?c.removeAttribute(g.expando):(c[g.expando]=null))}}},_data:function(c,i,e){return g.data(c,i,e,true)},acceptData:function(c){if(c.nodeName){var i=g.noData[c.nodeName.toLowerCase()];if(i)return i!==true&&c.getAttribute("classid")===i}return true}});g.fn.extend({data:function(c,i){var e=null;if(typeof c=="undefined"){if(this.length){e=g.data(this[0]);if(this[0].nodeType===
1)for(var k=this[0].attributes,l,n=0,o=k.length;n<o;n++){l=k[n].name;l.indexOf("data-")===0&&(l=g.camelCase(l.substring(5)),Va(this[0],l,e[l]))}}return e}if(typeof c=="object")return this.each(function(){g.data(this,c)});var t=c.split(".");t[1]=t[1]?"."+t[1]:"";if(i===b){e=this.triggerHandler("getData"+t[1]+"!",[t[0]]);e===b&&this.length&&(e=g.data(this[0],c),e=Va(this[0],c,e));return e===b&&t[1]?this.data(t[0]):e}return this.each(function(){var w=g(this),x=[t[0],i];w.triggerHandler("setData"+t[1]+
"!",x);g.data(this,c,i);w.triggerHandler("changeData"+t[1]+"!",x)})},removeData:function(c){return this.each(function(){g.removeData(this,c)})}});g.extend({_mark:function(c,i){c&&(i=(i||"fx")+"mark",g.data(c,i,(g.data(c,i,b,true)||0)+1,true))},_unmark:function(c,i,e){c!==true&&(e=i,i=c,c=false);if(i){e=e||"fx";var k=e+"mark";(c=c?0:(g.data(i,k,b,true)||1)-1)?g.data(i,k,c,true):(g.removeData(i,k,true),Ca(i,e,"mark"))}},queue:function(c,i,e){if(c){i=(i||"fx")+"queue";var k=g.data(c,i,b,true);e&&(!k||
g.isArray(e)?(k=g.data(c,i,g.makeArray(e),true)):k.push(e));return k||[]}},dequeue:function(c,i){i=i||"fx";var e=g.queue(c,i),k=e.shift();k==="inprogress"&&(k=e.shift());k&&(i==="fx"&&e.unshift("inprogress"),k.call(c,function(){g.dequeue(c,i)}));e.length||(g.removeData(c,i+"queue",true),Ca(c,i,"queue"))}});g.fn.extend({queue:function(c,i){typeof c!="string"&&(i=c,c="fx");if(i===b)return g.queue(this[0],c);return this.each(function(){var e=g.queue(this,c,i);c==="fx"&&e[0]!=="inprogress"&&g.dequeue(this,
c)})},dequeue:function(c){return this.each(function(){g.dequeue(this,c)})},delay:function(c,i){c=g.fx?g.fx.speeds[c]||c:c;i=i||"fx";return this.queue(i,function(){var e=this;setTimeout(function(){g.dequeue(e,i)},c)})},clearQueue:function(c){return this.queue(c||"fx",[])},promise:function(c,i){function e(){--o||k.resolveWith(l,[l])}typeof c!="string"&&(i=c,c=b);c=c||"fx";for(var k=g.Deferred(),l=this,n=l.length,o=1,t=c+"defer",w=c+"queue",x=c+"mark",B;n--;)if(B=g.data(l[n],t,b,true)||(g.data(l[n],
w,b,true)||g.data(l[n],x,b,true))&&g.data(l[n],t,g._Deferred(),true)){o++;B.done(e)}e();return k.promise()}});var ga=/[\n\t\r]/g,fa=/\s+/,pa=/\r/g,Ha=/^(?:button|input)$/i,La=/^(?:button|input|object|select|textarea)$/i,Ia=/^a(?:rea)?$/i,Ma=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Wa=/\:|^on/,ta,Ja;g.fn.extend({attr:function(c,i){return g.access(this,c,i,true,g.attr)},removeAttr:function(c){return this.each(function(){g.removeAttr(this,
c)})},prop:function(c,i){return g.access(this,c,i,true,g.prop)},removeProp:function(c){c=g.propFix[c]||c;return this.each(function(){try{this[c]=b;delete this[c]}catch(i){}})},addClass:function(c){var i,e,k,l,n,o,t;if(g.isFunction(c))return this.each(function(w){g(this).addClass(c.call(this,w,this.className))});if(c&&typeof c=="string"){i=c.split(fa);e=0;for(k=this.length;e<k;e++){l=this[e];if(l.nodeType===1)if(!l.className&&i.length===1)l.className=c;else{n=" "+l.className+" ";o=0;for(t=i.length;o<
t;o++)~n.indexOf(" "+i[o]+" ")||(n+=i[o]+" ");l.className=g.trim(n)}}}return this},removeClass:function(c){var i,e,k,l,n,o,t;if(g.isFunction(c))return this.each(function(w){g(this).removeClass(c.call(this,w,this.className))});if(c&&typeof c=="string"||c===b){i=(c||"").split(fa);e=0;for(k=this.length;e<k;e++){l=this[e];if(l.nodeType===1&&l.className)if(c){n=(" "+l.className+" ").replace(ga," ");o=0;for(t=i.length;o<t;o++)n=n.replace(" "+i[o]+" "," ");l.className=g.trim(n)}else l.className=""}}return this},
toggleClass:function(c,i){var e=typeof c,k=typeof i=="boolean";if(g.isFunction(c))return this.each(function(l){g(this).toggleClass(c.call(this,l,this.className,i),i)});return this.each(function(){if(e==="string")for(var l,n=0,o=g(this),t=i,w=c.split(fa);l=w[n++];){t=k?t:!o.hasClass(l);o[t?"addClass":"removeClass"](l)}else if(e==="undefined"||e==="boolean"){this.className&&g._data(this,"__className__",this.className);this.className=this.className||c===false?"":g._data(this,"__className__")||""}})},
hasClass:function(c){for(var i=0,e=this.length;i<e;i++)if((" "+this[i].className+" ").replace(ga," ").indexOf(" "+c+" ")>-1)return true;return false},val:function(c){var i,e,k=this[0];if(!arguments.length){if(k){if((i=g.valHooks[k.nodeName.toLowerCase()]||g.valHooks[k.type])&&"get"in i&&(e=i.get(k,"value"))!==b)return e;e=k.value;return typeof e=="string"?e.replace(pa,""):e==null?"":e}return b}var l=g.isFunction(c);return this.each(function(n){var o=g(this),t;if(this.nodeType===1){l?(t=c.call(this,
n,o.val())):(t=c);t==null?(t=""):typeof t=="number"?(t+=""):g.isArray(t)&&(t=g.map(t,function(w){return w==null?"":w+""}));i=g.valHooks[this.nodeName.toLowerCase()]||g.valHooks[this.type];if(!i||!("set"in i)||i.set(this,t,"value")===b)this.value=t}})}});g.extend({valHooks:{option:{get:function(c){var i=c.attributes.value;return!i||i.specified?c.value:c.text}},select:{get:function(c){var i,e=c.selectedIndex,k=[],l=c.options;c=c.type==="select-one";if(e<0)return null;for(var n=c?e:0,o=c?e+1:l.length;n<
o;n++){i=l[n];if(i.selected&&(g.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!g.nodeName(i.parentNode,"optgroup"))){i=g(i).val();if(c)return i;k.push(i)}}if(c&&!k.length&&l.length)return g(l[e]).val();return k},set:function(c,i){var e=g.makeArray(i);g(c).find("option").each(function(){this.selected=g.inArray(g(this).val(),e)>=0});e.length||(c.selectedIndex=-1);return e}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,
offset:true},attrFix:{tabindex:"tabIndex"},attr:function(c,i,e,k){var l=c.nodeType;if(!c||l===3||l===8||l===2)return b;if(k&&i in g.attrFn)return g(c)[i](e);if(!("getAttribute"in c))return g.prop(c,i,e);var n,o;(k=l!==1||!g.isXMLDoc(c))&&(i=g.attrFix[i]||i,o=g.attrHooks[i],o||(Ma.test(i)?(o=Ja):ta&&i!=="className"&&(g.nodeName(c,"form")||Wa.test(i))&&(o=ta)));if(e!==b){if(e===null){g.removeAttr(c,i);return b}if(o&&"set"in o&&k&&(n=o.set(c,e,i))!==b)return n;c.setAttribute(i,""+e);return e}if(o&&"get"in
o&&k&&(n=o.get(c,i))!==null)return n;n=c.getAttribute(i);return n===null?b:n},removeAttr:function(c,i){var e;c.nodeType===1&&(i=g.attrFix[i]||i,g.support.getSetAttribute?c.removeAttribute(i):(g.attr(c,i,""),c.removeAttributeNode(c.getAttributeNode(i))),Ma.test(i)&&(e=g.propFix[i]||i)in c&&(c[e]=false))},attrHooks:{type:{set:function(c,i){if(Ha.test(c.nodeName)&&c.parentNode)g.error("type property can't be changed");else if(!g.support.radioValue&&i==="radio"&&g.nodeName(c,"input")){var e=c.value;c.setAttribute("type",
i);e&&(c.value=e);return i}}},tabIndex:{get:function(c){var i=c.getAttributeNode("tabIndex");return i&&i.specified?parseInt(i.value,10):La.test(c.nodeName)||Ia.test(c.nodeName)&&c.href?0:b}},value:{get:function(c,i){if(ta&&g.nodeName(c,"button"))return ta.get(c,i);return i in c?c.value:null},set:function(c,i,e){if(ta&&g.nodeName(c,"button"))return ta.set(c,i,e);c.value=i}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",
cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(c,i,e){var k=c.nodeType;if(!c||k===3||k===8||k===2)return b;var l,n;(k!==1||!g.isXMLDoc(c))&&(i=g.propFix[i]||i,n=g.propHooks[i]);return e!==b?n&&"set"in n&&(l=n.set(c,e,i))!==b?l:(c[i]=e):n&&"get"in n&&(l=n.get(c,i))!==b?l:c[i]},propHooks:{}});Ja={get:function(c,i){return g.prop(c,i)?i.toLowerCase():b},set:function(c,i,e){var k;i===false?g.removeAttr(c,
e):(k=g.propFix[e]||e,k in c&&(c[k]=true),c.setAttribute(e,e.toLowerCase()));return e}};g.support.getSetAttribute||(g.attrFix=g.propFix,ta=g.attrHooks.name=g.attrHooks.title=g.valHooks.button={get:function(c,i){var e;return(e=c.getAttributeNode(i))&&e.nodeValue!==""?e.nodeValue:b},set:function(c,i,e){if(c=c.getAttributeNode(e))return c.nodeValue=i}},g.each(["width","height"],function(c,i){g.attrHooks[i]=g.extend(g.attrHooks[i],{set:function(e,k){if(k===""){e.setAttribute(i,"auto");return k}}})}));
g.support.hrefNormalized||g.each(["href","src","width","height"],function(c,i){g.attrHooks[i]=g.extend(g.attrHooks[i],{get:function(e){e=e.getAttribute(i,2);return e===null?b:e}})});g.support.style||(g.attrHooks.style={get:function(c){return c.style.cssText.toLowerCase()||b},set:function(c,i){return c.style.cssText=""+i}});g.support.optSelected||(g.propHooks.selected=g.extend(g.propHooks.selected,{get:function(){}}));g.support.checkOn||g.each(["radio","checkbox"],function(){g.valHooks[this]={get:function(c){return c.getAttribute("value")===
null?"on":c.value}}});g.each(["radio","checkbox"],function(){g.valHooks[this]=g.extend(g.valHooks[this],{set:function(c,i){if(g.isArray(i))return c.checked=g.inArray(g(c).val(),i)>=0}})});var ua=/\.(.*)$/,ya=/^(?:textarea|input|select)$/i,cb=/\./g,gb=/ /g,kb=/[^\w\s.|`]/g,Fb=function(c){return c.replace(kb,"\\$&")};g.event={add:function(c,i,e,k){if(c.nodeType!==3&&c.nodeType!==8){if(e===false)e=oa;else if(!e)return;var l,n;e.handler&&(l=e,e=l.handler);e.guid||(e.guid=g.guid++);if(n=g._data(c)){var o=
n.events,t=n.handle;o||(n.events=o={});t||(n.handle=t=function(ba){return typeof g!="undefined"&&(!ba||g.event.triggered!==ba.type)?g.event.handle.apply(t.elem,arguments):b});t.elem=c;i=i.split(" ");for(var w,x=0,B;w=i[x++];){n=l?g.extend({},l):{handler:e,data:k};w.indexOf(".")>-1?(B=w.split("."),w=B.shift(),n.namespace=B.slice(0).sort().join(".")):(B=[],n.namespace="");n.type=w;n.guid||(n.guid=e.guid);var H=o[w],S=g.event.special[w]||{};if(!H){H=o[w]=[];if(!S.setup||S.setup.call(c,k,B,t)===false)c.addEventListener?
c.addEventListener(w,t,false):c.attachEvent&&c.attachEvent("on"+w,t)}S.add&&(S.add.call(c,n),n.handler.guid||(n.handler.guid=e.guid));H.push(n);g.event.global[w]=true}c=null}}},global:{},remove:function(c,i,e,k){if(c.nodeType!==3&&c.nodeType!==8){e===false&&(e=oa);var l,n,o=0,t,w,x,B,H,S,ba=g.hasData(c)&&g._data(c),ea=ba&&ba.events;if(ba&&ea){i&&i.type&&(e=i.handler,i=i.type);if(!i||typeof i=="string"&&i.charAt(0)===".")for(l in ea)g.event.remove(c,l+(i||""));else{for(i=i.split(" ");l=i[o++];){B=
l;t=l.indexOf(".")<0;w=[];t||(w=l.split("."),l=w.shift(),x=new RegExp("(^|\\.)"+g.map(w.slice(0).sort(),Fb).join("\\.(?:.*\\.)?")+"(\\.|$)"));if(H=ea[l])if(e){B=g.event.special[l]||{};for(n=k||0;n<H.length;n++){S=H[n];if(e.guid===S.guid){if(t||x.test(S.namespace)){k==null&&H.splice(n--,1);B.remove&&B.remove.call(c,S)}if(k!=null)break}}if(H.length===0||k!=null&&H.length===1){(!B.teardown||B.teardown.call(c,w)===false)&&g.removeEvent(c,l,ba.handle);delete ea[l]}}else for(n=0;n<H.length;n++){S=H[n];
if(t||x.test(S.namespace)){g.event.remove(c,B,S.handler,n);H.splice(n--,1)}}}if(g.isEmptyObject(ea)){(i=ba.handle)&&(i.elem=null);delete ba.events;delete ba.handle;g.isEmptyObject(ba)&&g.removeData(c,b,true)}}}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(c,i,e,k){var l=c.type||c,n=[],o;l.indexOf("!")>=0&&(l=l.slice(0,-1),o=true);l.indexOf(".")>=0&&(n=l.split("."),l=n.shift(),n.sort());if(e&&!g.event.customEvent[l]||g.event.global[l]){c=typeof c=="object"?c[g.expando]?
c:new g.Event(l,c):new g.Event(l);c.type=l;c.exclusive=o;c.namespace=n.join(".");c.namespace_re=new RegExp("(^|\\.)"+n.join("\\.(?:.*\\.)?")+"(\\.|$)");if(k||!e){c.preventDefault();c.stopPropagation()}if(e){if(!(e.nodeType===3||e.nodeType===8)){c.result=b;c.target=e;i=i!=null?g.makeArray(i):[];i.unshift(c);n=e;k=l.indexOf(":")<0?"on"+l:"";do{o=g._data(n,"handle");c.currentTarget=n;o&&o.apply(n,i);k&&g.acceptData(n)&&n[k]&&n[k].apply(n,i)===false&&(c.result=false,c.preventDefault());n=n.parentNode||
n.ownerDocument||n===c.target.ownerDocument&&a}while(n&&!c.isPropagationStopped());if(!c.isDefaultPrevented()){var t;n=g.event.special[l]||{};if((!n._default||n._default.call(e.ownerDocument,c)===false)&&(l!=="click"||!g.nodeName(e,"a"))&&g.acceptData(e)){try{k&&e[l]&&(t=e[k],t&&(e[k]=null),g.event.triggered=l,e[l]())}catch(w){}t&&(e[k]=t);g.event.triggered=b}}return c.result}}else g.each(g.cache,function(){var x=this[g.expando];x&&x.events&&x.events[l]&&g.event.trigger(c,i,x.handle.elem)})}},handle:function(c){c=
g.event.fix(c||a.event);var i=((g._data(this,"events")||{})[c.type]||[]).slice(0),e=!c.exclusive&&!c.namespace,k=Array.prototype.slice.call(arguments,0);k[0]=c;c.currentTarget=this;for(var l=0,n=i.length;l<n;l++){var o=i[l];if(e||c.namespace_re.test(o.namespace)){c.handler=o.handler;c.data=o.data;c.handleObj=o;o=o.handler.apply(this,k);o!==b&&(c.result=o,o===false&&(c.preventDefault(),c.stopPropagation()));if(c.isImmediatePropagationStopped())break}}return c.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(c){if(c[g.expando])return c;var i=c;c=g.Event(i);for(var e=this.props.length,k;e;){k=this.props[--e];c[k]=i[k]}c.target||(c.target=c.srcElement||Y);c.target.nodeType===3&&(c.target=c.target.parentNode);!c.relatedTarget&&c.fromElement&&(c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement);if(c.pageX==null&&c.clientX!=null){e=c.target.ownerDocument||Y;i=e.documentElement;e=e.body;c.pageX=c.clientX+(i&&i.scrollLeft||e&&e.scrollLeft||0)-(i&&i.clientLeft||e&&e.clientLeft||0);
c.pageY=c.clientY+(i&&i.scrollTop||e&&e.scrollTop||0)-(i&&i.clientTop||e&&e.clientTop||0)}c.which==null&&(c.charCode!=null||c.keyCode!=null)&&(c.which=c.charCode!=null?c.charCode:c.keyCode);!c.metaKey&&c.ctrlKey&&(c.metaKey=c.ctrlKey);!c.which&&c.button!==b&&(c.which=c.button&1?1:c.button&2?3:c.button&4?2:0);return c},guid:1E8,proxy:g.proxy,special:{ready:{setup:g.bindReady,teardown:g.noop},live:{add:function(c){g.event.add(this,da(c.origType,c.selector),g.extend({},c,{handler:ia,guid:c.handler.guid}))},
remove:function(c){g.event.remove(this,da(c.origType,c.selector),c)}},beforeunload:{setup:function(c,i,e){g.isWindow(this)&&(this.onbeforeunload=e)},teardown:function(c,i){this.onbeforeunload===i&&(this.onbeforeunload=null)}}}};g.removeEvent=Y.removeEventListener?function(c,i,e){c.removeEventListener&&c.removeEventListener(i,e,false)}:function(c,i,e){c.detachEvent&&c.detachEvent("on"+i,e)};g.Event=function(c,i){if(!this.preventDefault)return new g.Event(c,i);c&&c.type?(this.originalEvent=c,this.type=
c.type,this.isDefaultPrevented=c.defaultPrevented||c.returnValue===false||c.getPreventDefault&&c.getPreventDefault()?na:oa):(this.type=c);i&&g.extend(this,i);this.timeStamp=g.now();this[g.expando]=true};g.Event.prototype={preventDefault:function(){this.isDefaultPrevented=na;var c=this.originalEvent;!c||(c.preventDefault?c.preventDefault():(c.returnValue=false))},stopPropagation:function(){this.isPropagationStopped=na;var c=this.originalEvent;!c||(c.stopPropagation&&c.stopPropagation(),c.cancelBubble=
true)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=na;this.stopPropagation()},isDefaultPrevented:oa,isPropagationStopped:oa,isImmediatePropagationStopped:oa};var Rb=function(c){var i=c.relatedTarget,e=false,k=c.type;c.type=c.data;i!==this&&(i&&(e=g.contains(this,i)),e||(g.event.handle.apply(this,arguments),c.type=k))},Sb=function(c){c.type=c.data;g.event.handle.apply(this,arguments)};g.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(c,i){g.event.special[c]=
{setup:function(e){g.event.add(this,i,e&&e.selector?Sb:Rb,c)},teardown:function(e){g.event.remove(this,i,e&&e.selector?Sb:Rb)}}});g.support.submitBubbles||(g.event.special.submit={setup:function(){if(g.nodeName(this,"form"))return false;else{g.event.add(this,"click.specialSubmit",function(c){var i=c.target,e=i.type;(e==="submit"||e==="image")&&g(i).closest("form").length&&la("submit",this,arguments)});g.event.add(this,"keypress.specialSubmit",function(c){var i=c.target,e=i.type;(e==="text"||e==="password")&&
g(i).closest("form").length&&c.keyCode===13&&la("submit",this,arguments)})}},teardown:function(){g.event.remove(this,".specialSubmit")}});if(!g.support.changeBubbles){var lb,Gb=function(c){var i=c.type,e=c.value;i==="radio"||i==="checkbox"?(e=c.checked):i==="select-multiple"?(e=c.selectedIndex>-1?g.map(c.options,function(k){return k.selected}).join("-"):""):g.nodeName(c,"select")&&(e=c.selectedIndex);return e},Hb=function(c,i){var e=c.target,k,l;if(ya.test(e.nodeName)&&!e.readOnly){k=g._data(e,"_change_data");
l=Gb(e);(c.type!=="focusout"||e.type!=="radio")&&g._data(e,"_change_data",l);if(!(k===b||l===k))if(k!=null||l){c.type="change";c.liveFired=b;g.event.trigger(c,i,e)}}};g.event.special.change={filters:{focusout:Hb,beforedeactivate:Hb,click:function(c){var i=c.target,e=g.nodeName(i,"input")?i.type:"";(e==="radio"||e==="checkbox"||g.nodeName(i,"select"))&&Hb.call(this,c)},keydown:function(c){var i=c.target,e=g.nodeName(i,"input")?i.type:"";(c.keyCode===13&&!g.nodeName(i,"textarea")||c.keyCode===32&&(e===
"checkbox"||e==="radio")||e==="select-multiple")&&Hb.call(this,c)},beforeactivate:function(c){c=c.target;g._data(c,"_change_data",Gb(c))}},setup:function(){if(this.type==="file")return false;for(var c in lb)g.event.add(this,c+".specialChange",lb[c]);return ya.test(this.nodeName)},teardown:function(){g.event.remove(this,".specialChange");return ya.test(this.nodeName)}};lb=g.event.special.change.filters;lb.focus=lb.beforeactivate}g.support.focusinBubbles||g.each({focus:"focusin",blur:"focusout"},function(c,
i){function e(l){var n=g.event.fix(l);n.type=i;n.originalEvent={};g.event.trigger(n,null,n.target);n.isDefaultPrevented()&&l.preventDefault()}var k=0;g.event.special[i]={setup:function(){k++===0&&Y.addEventListener(c,e,true)},teardown:function(){--k===0&&Y.removeEventListener(c,e,true)}}});g.each(["bind","one"],function(c,i){g.fn[i]=function(e,k,l){var n;if(typeof e=="object"){for(var o in e)this[i](o,k,e[o],l);return this}if(arguments.length===2||k===false){l=k;k=b}i==="one"?(n=function(w){g(this).unbind(w,
n);return l.apply(this,arguments)},n.guid=l.guid||g.guid++):(n=l);if(e==="unload"&&i!=="one")this.one(e,k,l);else{o=0;for(var t=this.length;o<t;o++)g.event.add(this[o],e,n,k)}return this}});g.fn.extend({unbind:function(c,i){if(typeof c=="object"&&!c.preventDefault)for(var e in c)this.unbind(e,c[e]);else{e=0;for(var k=this.length;e<k;e++)g.event.remove(this[e],c,i)}return this},delegate:function(c,i,e,k){return this.live(i,e,k,c)},undelegate:function(c,i,e){return arguments.length===0?this.unbind("live"):
this.die(i,null,e,c)},trigger:function(c,i){return this.each(function(){g.event.trigger(c,i,this)})},triggerHandler:function(c,i){if(this[0])return g.event.trigger(c,i,this[0],true)},toggle:function(c){var i=arguments,e=c.guid||g.guid++,k=0,l=function(n){var o=(g.data(this,"lastToggle"+c.guid)||0)%k;g.data(this,"lastToggle"+c.guid,o+1);n.preventDefault();return i[o].apply(this,arguments)||false};for(l.guid=e;k<i.length;)i[k++].guid=e;return this.click(l)},hover:function(c,i){return this.mouseenter(c).mouseleave(i||
c)}});var rb={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};g.each(["live","die"],function(c,i){g.fn[i]=function(e,k,l,n){var o=0,t,w,x=n||this.selector,B=n?this:g(this.context);if(typeof e=="object"&&!e.preventDefault){for(t in e)B[i](t,k,e[t],x);return this}if(i==="die"&&!e&&n&&n.charAt(0)==="."){B.unbind(n);return this}if(k===false||g.isFunction(k)){l=k||oa;k=b}for(e=(e||"").split(" ");(n=e[o++])!=null;){t=ua.exec(n);w="";t&&(w=t[0],n=n.replace(ua,""));if(n==="hover")e.push("mouseenter"+
w,"mouseleave"+w);else{t=n;rb[n]?(e.push(rb[n]+w),n+=w):(n=(rb[n]||n)+w);if(i==="live"){w=0;for(var H=B.length;w<H;w++)g.event.add(B[w],"live."+da(n,x),{data:k,selector:x,handler:l,origType:n,origHandler:l,preType:t})}else B.unbind("live."+da(n,x),l)}}return this}});g.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(c,i){g.fn[i]=function(e,
k){k==null&&(k=e,e=null);return arguments.length>0?this.bind(i,e,k):this.trigger(i)};g.attrFn&&(g.attrFn[i]=true)});(function(){function c(u,y,K,L,I,M){I=0;for(var U=L.length;I<U;I++){var aa=L[I];if(aa){var ka=false;for(aa=aa[u];aa;){if(aa.sizcache===K){ka=L[aa.sizset];break}if(aa.nodeType===1){M||(aa.sizcache=K,aa.sizset=I);if(typeof y!="string"){if(aa===y){ka=true;break}}else if(x.filter(y,[aa]).length>0){ka=aa;break}}aa=aa[u]}L[I]=ka}}}function i(u,y,K,L,I,M){I=0;for(var U=L.length;I<U;I++){var aa=
L[I];if(aa){var ka=false;for(aa=aa[u];aa;){if(aa.sizcache===K){ka=L[aa.sizset];break}aa.nodeType===1&&!M&&(aa.sizcache=K,aa.sizset=I);if(aa.nodeName.toLowerCase()===y){ka=aa;break}aa=aa[u]}L[I]=ka}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,k=0,l=Object.prototype.toString,n=false,o=true,t=/\\/g,w=/\W/;[0,0].sort(function(){o=false;return 0});var x=function(u,y,K,L){K=K||[];var I=y=y||Y;if(y.nodeType!==
1&&y.nodeType!==9)return[];if(!u||typeof u!="string")return K;var M,U,aa,ka,Ga,Ea,Oa=true,A=x.isXML(y),N=[],ca=u;do{e.exec("");if(M=e.exec(ca)){ca=M[3];N.push(M[1]);if(M[2]){ka=M[3];break}}}while(M);if(N.length>1&&H.exec(u))if(N.length===2&&B.relative[N[0]])U=wa(N[0]+N[1],y);else for(U=B.relative[N[0]]?[y]:x(N.shift(),y);N.length;){u=N.shift();B.relative[u]&&(u+=N.shift());U=wa(u,U)}else{!L&&N.length>1&&y.nodeType===9&&!A&&B.match.ID.test(N[0])&&!B.match.ID.test(N[N.length-1])&&(Ga=x.find(N.shift(),
y,A),y=Ga.expr?x.filter(Ga.expr,Ga.set)[0]:Ga.set[0]);if(y){Ga=L?{expr:N.pop(),set:ea(L)}:x.find(N.pop(),N.length===1&&(N[0]==="~"||N[0]==="+")&&y.parentNode?y.parentNode:y,A);U=Ga.expr?x.filter(Ga.expr,Ga.set):Ga.set;for(N.length>0?(aa=ea(U)):(Oa=false);N.length;){M=Ea=N.pop();B.relative[Ea]?(M=N.pop()):(Ea="");M==null&&(M=y);B.relative[Ea](aa,M,A)}}else aa=[]}aa||(aa=U);aa||x.error(Ea||u);if(l.call(aa)==="[object Array]")if(Oa)if(y&&y.nodeType===1)for(u=0;aa[u]!=null;u++)aa[u]&&(aa[u]===true||aa[u].nodeType===
1&&x.contains(y,aa[u]))&&K.push(U[u]);else for(u=0;aa[u]!=null;u++)aa[u]&&aa[u].nodeType===1&&K.push(U[u]);else K.push.apply(K,aa);else ea(aa,K);ka&&(x(ka,I,K,L),x.uniqueSort(K));return K};x.uniqueSort=function(u){if(ra){n=o;u.sort(ra);if(n)for(var y=1;y<u.length;y++)u[y]===u[y-1]&&u.splice(y--,1)}return u};x.matches=function(u,y){return x(u,null,null,y)};x.matchesSelector=function(u,y){return x(y,null,null,[u]).length>0};x.find=function(u,y,K){var L;if(!u)return[];for(var I=0,M=B.order.length;I<
M;I++){var U,aa=B.order[I];if(U=B.leftMatch[aa].exec(u)){var ka=U[1];U.splice(1,1);if(ka.substr(ka.length-1)!=="\\"){U[1]=(U[1]||"").replace(t,"");L=B.find[aa](U,y,K);if(L!=null){u=u.replace(B.match[aa],"");break}}}}L||(L=typeof y.getElementsByTagName!="undefined"?y.getElementsByTagName("*"):[]);return{set:L,expr:u}};x.filter=function(u,y,K,L){for(var I,M,U=u,aa=[],ka=y,Ga=y&&y[0]&&x.isXML(y[0]);u&&y.length;){for(var Ea in B.filter)if((I=B.leftMatch[Ea].exec(u))!=null&&I[2]){var Oa,A,N=B.filter[Ea];
A=I[1];M=false;I.splice(1,1);if(A.substr(A.length-1)!=="\\"){ka===aa&&(aa=[]);if(B.preFilter[Ea])if(I=B.preFilter[Ea](I,ka,K,aa,L,Ga)){if(I===true)continue}else M=Oa=true;if(I)for(var ca=0;(A=ka[ca])!=null;ca++)if(A){Oa=N(A,I,ca,ka);var Z=L^!!Oa;K&&Oa!=null?Z?(M=true):(ka[ca]=false):Z&&(aa.push(A),M=true)}if(Oa!==b){K||(ka=aa);u=u.replace(B.match[Ea],"");if(!M)return[];break}}}if(u===U)if(M==null)x.error(u);else break;U=u}return ka};x.error=function(u){throw"Syntax error, unrecognized expression: "+
u;};var B=x.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(u){return u.getAttribute("href")},type:function(u){return u.getAttribute("type")}},relative:{"+":function(u,y){var K=typeof y=="string",L=K&&!w.test(y);K=K&&!L;L&&(y=y.toLowerCase());L=0;for(var I=u.length,M;L<I;L++)if(M=u[L]){for(;(M=M.previousSibling)&&M.nodeType!==1;);u[L]=K||M&&M.nodeName.toLowerCase()===y?M||false:M===y}K&&
x.filter(y,u,true)},">":function(u,y){var K,L=typeof y=="string",I=0,M=u.length;if(L&&!w.test(y))for(y=y.toLowerCase();I<M;I++){if(K=u[I]){K=K.parentNode;u[I]=K.nodeName.toLowerCase()===y?K:false}}else{for(;I<M;I++)(K=u[I])&&(u[I]=L?K.parentNode:K.parentNode===y);L&&x.filter(y,u,true)}},"":function(u,y,K){var L,I=k++,M=c;typeof y=="string"&&!w.test(y)&&(y=y.toLowerCase(),L=y,M=i);M("parentNode",y,I,u,L,K)},"~":function(u,y,K){var L,I=k++,M=c;typeof y=="string"&&!w.test(y)&&(y=y.toLowerCase(),L=y,
M=i);M("previousSibling",y,I,u,L,K)}},find:{ID:function(u,y,K){if(typeof y.getElementById!="undefined"&&!K)return(u=y.getElementById(u[1]))&&u.parentNode?[u]:[]},NAME:function(u,y){if(typeof y.getElementsByName!="undefined"){for(var K=[],L=y.getElementsByName(u[1]),I=0,M=L.length;I<M;I++)L[I].getAttribute("name")===u[1]&&K.push(L[I]);return K.length===0?null:K}},TAG:function(u,y){if(typeof y.getElementsByTagName!="undefined")return y.getElementsByTagName(u[1])}},preFilter:{CLASS:function(u,y,K,L,
I,M){u=" "+u[1].replace(t,"")+" ";if(M)return u;M=0;for(var U;(U=y[M])!=null;M++)U&&(I^(U.className&&(" "+U.className+" ").replace(/[\t\n\r]/g," ").indexOf(u)>=0)?K||L.push(U):K&&(y[M]=false));return false},ID:function(u){return u[1].replace(t,"")},TAG:function(u){return u[1].replace(t,"").toLowerCase()},CHILD:function(u){if(u[1]==="nth"){u[2]||x.error(u[0]);u[2]=u[2].replace(/^\+|\s*/g,"");var y=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(u[2]==="even"&&"2n"||u[2]==="odd"&&"2n+1"||!/\D/.test(u[2])&&"0n+"+
u[2]||u[2]);u[2]=y[1]+(y[2]||1)-0;u[3]=y[3]-0}else u[2]&&x.error(u[0]);u[0]=k++;return u},ATTR:function(u,y,K,L,I,M){y=u[1]=u[1].replace(t,"");!M&&B.attrMap[y]&&(u[1]=B.attrMap[y]);u[4]=(u[4]||u[5]||"").replace(t,"");u[2]==="~="&&(u[4]=" "+u[4]+" ");return u},PSEUDO:function(u,y,K,L,I){if(u[1]==="not")if((e.exec(u[3])||"").length>1||/^\w/.test(u[3]))u[3]=x(u[3],null,null,y);else{u=x.filter(u[3],y,K,true^I);K||L.push.apply(L,u);return false}else if(B.match.POS.test(u[0])||B.match.CHILD.test(u[0]))return true;
return u},POS:function(u){u.unshift(true);return u}},filters:{enabled:function(u){return u.disabled===false&&u.type!=="hidden"},disabled:function(u){return u.disabled===true},checked:function(u){return u.checked===true},selected:function(u){return u.selected===true},parent:function(u){return!!u.firstChild},empty:function(u){return!u.firstChild},has:function(u,y,K){return!!x(K[3],u).length},header:function(u){return/h\d/i.test(u.nodeName)},text:function(u){var y=u.getAttribute("type"),K=u.type;return u.nodeName.toLowerCase()===
"input"&&"text"===K&&(y===K||y===null)},radio:function(u){return u.nodeName.toLowerCase()==="input"&&"radio"===u.type},checkbox:function(u){return u.nodeName.toLowerCase()==="input"&&"checkbox"===u.type},file:function(u){return u.nodeName.toLowerCase()==="input"&&"file"===u.type},password:function(u){return u.nodeName.toLowerCase()==="input"&&"password"===u.type},submit:function(u){var y=u.nodeName.toLowerCase();return(y==="input"||y==="button")&&"submit"===u.type},image:function(u){return u.nodeName.toLowerCase()===
"input"&&"image"===u.type},reset:function(u){var y=u.nodeName.toLowerCase();return(y==="input"||y==="button")&&"reset"===u.type},button:function(u){var y=u.nodeName.toLowerCase();return y==="input"&&"button"===u.type||y==="button"},input:function(u){return/input|select|textarea|button/i.test(u.nodeName)},focus:function(u){return u===u.ownerDocument.activeElement}},setFilters:{first:function(u,y){return y===0},last:function(u,y,K,L){return y===L.length-1},even:function(u,y){return y%2===0},odd:function(u,
y){return y%2===1},lt:function(u,y,K){return y<K[3]-0},gt:function(u,y,K){return y>K[3]-0},nth:function(u,y,K){return K[3]-0===y},eq:function(u,y,K){return K[3]-0===y}},filter:{PSEUDO:function(u,y,K,L){var I=y[1],M=B.filters[I];if(M)return M(u,K,y,L);if(I==="contains")return(u.textContent||u.innerText||x.getText([u])||"").indexOf(y[3])>=0;if(I==="not"){y=y[3];K=0;for(L=y.length;K<L;K++)if(y[K]===u)return false;return true}x.error(I)},CHILD:function(u,y){var K=y[1],L=u;switch(K){case "only":case "first":for(;L=
L.previousSibling;)if(L.nodeType===1)return false;if(K==="first")return true;L=u;case "last":for(;L=L.nextSibling;)if(L.nodeType===1)return false;return true;case "nth":K=y[2];var I=y[3];if(K===1&&I===0)return true;var M=y[0],U=u.parentNode;if(U&&(U.sizcache!==M||!u.nodeIndex)){var aa=0;for(L=U.firstChild;L;L=L.nextSibling)L.nodeType===1&&(L.nodeIndex=++aa);U.sizcache=M}L=u.nodeIndex-I;return K===0?L===0:L%K===0&&L/K>=0}},ID:function(u,y){return u.nodeType===1&&u.getAttribute("id")===y},TAG:function(u,
y){return y==="*"&&u.nodeType===1||u.nodeName.toLowerCase()===y},CLASS:function(u,y){return(" "+(u.className||u.getAttribute("class"))+" ").indexOf(y)>-1},ATTR:function(u,y){var K=y[1];K=B.attrHandle[K]?B.attrHandle[K](u):u[K]!=null?u[K]:u.getAttribute(K);var L=K+"",I=y[2],M=y[4];return K==null?I==="!=":I==="="?L===M:I==="*="?L.indexOf(M)>=0:I==="~="?(" "+L+" ").indexOf(M)>=0:M?I==="!="?L!==M:I==="^="?L.indexOf(M)===0:I==="$="?L.substr(L.length-M.length)===M:I==="|="?L===M||L.substr(0,M.length+1)===
M+"-":false:L&&K!==false},POS:function(u,y,K,L){var I=B.setFilters[y[2]];if(I)return I(u,K,y,L)}}},H=B.match.POS,S=function(u,y){return"\\"+(y-0+1)};for(var ba in B.match){B.match[ba]=new RegExp(B.match[ba].source+/(?![^\[]*\])(?![^\(]*\))/.source);B.leftMatch[ba]=new RegExp(/(^(?:.|\r|\n)*?)/.source+B.match[ba].source.replace(/\\(\d+)/g,S))}var ea=function(u,y){u=Array.prototype.slice.call(u,0);if(y){y.push.apply(y,u);return y}return u};try{Array.prototype.slice.call(Y.documentElement.childNodes,
0)}catch(Da){ea=function(u,y){var K=0,L=y||[];if(l.call(u)==="[object Array]")Array.prototype.push.apply(L,u);else if(typeof u.length=="number")for(var I=u.length;K<I;K++)L.push(u[K]);else for(;u[K];K++)L.push(u[K]);return L}}var ra,va;Y.documentElement.compareDocumentPosition?(ra=function(u,y){if(u===y){n=true;return 0}if(!u.compareDocumentPosition||!y.compareDocumentPosition)return u.compareDocumentPosition?-1:1;return u.compareDocumentPosition(y)&4?-1:1}):(ra=function(u,y){if(u===y){n=true;return 0}if(u.sourceIndex&&
y.sourceIndex)return u.sourceIndex-y.sourceIndex;var K,L,I=[],M=[];K=u.parentNode;L=y.parentNode;var U=K;if(K===L)return va(u,y);if(!K)return-1;if(!L)return 1;for(;U;){I.unshift(U);U=U.parentNode}for(U=L;U;){M.unshift(U);U=U.parentNode}K=I.length;L=M.length;for(U=0;U<K&&U<L;U++)if(I[U]!==M[U])return va(I[U],M[U]);return U===K?va(u,M[U],-1):va(I[U],y,1)},va=function(u,y,K){if(u===y)return K;for(u=u.nextSibling;u;){if(u===y)return-1;u=u.nextSibling}return 1});x.getText=function(u){for(var y="",K,L=
0;u[L];L++){K=u[L];K.nodeType===3||K.nodeType===4?(y+=K.nodeValue):K.nodeType!==8&&(y+=x.getText(K.childNodes))}return y};(function(){var u=Y.createElement("div"),y="script"+(new Date).getTime(),K=Y.documentElement;u.innerHTML="<a name='"+y+"'/>";K.insertBefore(u,K.firstChild);Y.getElementById(y)&&(B.find.ID=function(L,I,M){if(typeof I.getElementById!="undefined"&&!M)return(I=I.getElementById(L[1]))?I.id===L[1]||typeof I.getAttributeNode!="undefined"&&I.getAttributeNode("id").nodeValue===L[1]?[I]:
b:[]},B.filter.ID=function(L,I){var M=typeof L.getAttributeNode!="undefined"&&L.getAttributeNode("id");return L.nodeType===1&&M&&M.nodeValue===I});K.removeChild(u);K=u=null})();(function(){var u=Y.createElement("div");u.appendChild(Y.createComment(""));u.getElementsByTagName("*").length>0&&(B.find.TAG=function(y,K){var L=K.getElementsByTagName(y[1]);if(y[1]==="*"){for(var I=[],M=0;L[M];M++)L[M].nodeType===1&&I.push(L[M]);L=I}return L});u.innerHTML="<a href='#'></a>";u.firstChild&&typeof u.firstChild.getAttribute!=
"undefined"&&u.firstChild.getAttribute("href")!=="#"&&(B.attrHandle.href=function(y){return y.getAttribute("href",2)});u=null})();Y.querySelectorAll&&function(){var u=x,y=Y.createElement("div");y.innerHTML="<p class='TEST'></p>";if(!y.querySelectorAll||y.querySelectorAll(".TEST").length!==0){x=function(L,I,M,U){I=I||Y;if(!U&&!x.isXML(I)){var aa=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(L);if(aa&&(I.nodeType===1||I.nodeType===9)){if(aa[1])return ea(I.getElementsByTagName(L),M);if(aa[2]&&B.find.CLASS&&
I.getElementsByClassName)return ea(I.getElementsByClassName(aa[2]),M)}if(I.nodeType===9){if(L==="body"&&I.body)return ea([I.body],M);if(aa&&aa[3]){var ka=I.getElementById(aa[3]);if(!ka||!ka.parentNode)return ea([],M);if(ka.id===aa[3])return ea([ka],M)}try{return ea(I.querySelectorAll(L),M)}catch(Ga){}}else if(I.nodeType===1&&I.nodeName.toLowerCase()!=="object"){aa=I;var Ea=(ka=I.getAttribute("id"))||"__sizzle__",Oa=I.parentNode,A=/^\s*[+~]/.test(L);ka?(Ea=Ea.replace(/'/g,"\\$&")):I.setAttribute("id",
Ea);A&&Oa&&(I=I.parentNode);try{if(!A||Oa)return ea(I.querySelectorAll("[id='"+Ea+"'] "+L),M)}catch(N){}finally{ka||aa.removeAttribute("id")}}}return u(L,I,M,U)};for(var K in u)x[K]=u[K];y=null}}();(function(){var u=Y.documentElement,y=u.matchesSelector||u.mozMatchesSelector||u.webkitMatchesSelector||u.msMatchesSelector;if(y){var K=!y.call(Y.createElement("div"),"div"),L=false;try{y.call(Y.documentElement,"[test!='']:sizzle")}catch(I){L=true}x.matchesSelector=function(M,U){U=U.replace(/\=\s*([^'"\]]*)\s*\]/g,
"='$1']");if(!x.isXML(M))try{if(L||!B.match.PSEUDO.test(U)&&!/!=/.test(U)){var aa=y.call(M,U);if(aa||!K||M.document&&M.document.nodeType!==11)return aa}}catch(ka){}return x(U,null,null,[M]).length>0}}})();(function(){var u=Y.createElement("div");u.innerHTML="<div class='test e'></div><div class='test'></div>";if(u.getElementsByClassName&&u.getElementsByClassName("e").length!==0){u.lastChild.className="e";if(u.getElementsByClassName("e").length!==1){B.order.splice(1,0,"CLASS");B.find.CLASS=function(y,
K,L){if(typeof K.getElementsByClassName!="undefined"&&!L)return K.getElementsByClassName(y[1])};u=null}}})();Y.documentElement.contains?(x.contains=function(u,y){return u!==y&&(u.contains?u.contains(y):true)}):Y.documentElement.compareDocumentPosition?(x.contains=function(u,y){return!!(u.compareDocumentPosition(y)&16)}):(x.contains=function(){return false});x.isXML=function(u){return(u=(u?u.ownerDocument||u:0).documentElement)?u.nodeName!=="HTML":false};var wa=function(u,y){for(var K,L=[],I="",M=
y.nodeType?[y]:y;K=B.match.PSEUDO.exec(u);){I+=K[0];u=u.replace(B.match.PSEUDO,"")}u=B.relative[u]?u+"*":u;K=0;for(var U=M.length;K<U;K++)x(u,M[K],L);return x.filter(I,L)};g.find=x;g.expr=x.selectors;g.expr[":"]=g.expr.filters;g.unique=x.uniqueSort;g.text=x.getText;g.isXMLDoc=x.isXML;g.contains=x.contains})();var xb=/Until$/,yb=/^(?:parents|prevUntil|prevAll)/,zb=/,/,Fa=/^.[^:#\[\.,]*$/,lc=Array.prototype.slice,sb=g.expr.match.POS,ec={children:true,contents:true,next:true,prev:true};g.fn.extend({find:function(c){var i=
this,e,k;if(typeof c!="string")return g(c).filter(function(){e=0;for(k=i.length;e<k;e++)if(g.contains(i[e],this))return true});var l=this.pushStack("","find",c),n,o,t;e=0;for(k=this.length;e<k;e++){n=l.length;g.find(c,this[e],l);if(e>0)for(o=n;o<l.length;o++)for(t=0;t<n;t++)if(l[t]===l[o]){l.splice(o--,1);break}}return l},has:function(c){var i=g(c);return this.filter(function(){for(var e=0,k=i.length;e<k;e++)if(g.contains(this,i[e]))return true})},not:function(c){return this.pushStack(G(this,c,false),
"not",c)},filter:function(c){return this.pushStack(G(this,c,true),"filter",c)},is:function(c){return!!c&&(typeof c=="string"?g.filter(c,this).length>0:this.filter(c).length>0)},closest:function(c,i){var e=[],k,l,n=this[0];if(g.isArray(c)){var o,t={},w=1;if(n&&c.length){k=0;for(l=c.length;k<l;k++){o=c[k];t[o]||(t[o]=sb.test(o)?g(o,i||this.context):o)}for(;n&&n.ownerDocument&&n!==i;){for(o in t){k=t[o];(k.jquery?k.index(n)>-1:g(n).is(k))&&e.push({selector:o,elem:n,level:w})}n=n.parentNode;w++}}return e}o=
sb.test(c)||typeof c!="string"?g(c,i||this.context):0;k=0;for(l=this.length;k<l;k++)for(n=this[k];n;){if(o?o.index(n)>-1:g.find.matchesSelector(n,c)){e.push(n);break}n=n.parentNode;if(!n||!n.ownerDocument||n===i||n.nodeType===11)break}e=e.length>1?g.unique(e):e;return this.pushStack(e,"closest",c)},index:function(c){if(!c||typeof c=="string")return g.inArray(this[0],c?g(c):this.parent().children());return g.inArray(c.jquery?c[0]:c,this)},add:function(c,i){var e=typeof c=="string"?g(c,i):g.makeArray(c&&
c.nodeType?[c]:c),k=g.merge(this.get(),e);return this.pushStack(!e[0]||!e[0].parentNode||e[0].parentNode.nodeType===11||!k[0]||!k[0].parentNode||k[0].parentNode.nodeType===11?k:g.unique(k))},andSelf:function(){return this.add(this.prevObject)}});g.each({parent:function(c){return(c=c.parentNode)&&c.nodeType!==11?c:null},parents:function(c){return g.dir(c,"parentNode")},parentsUntil:function(c,i,e){return g.dir(c,"parentNode",e)},next:function(c){return g.nth(c,2,"nextSibling")},prev:function(c){return g.nth(c,
2,"previousSibling")},nextAll:function(c){return g.dir(c,"nextSibling")},prevAll:function(c){return g.dir(c,"previousSibling")},nextUntil:function(c,i,e){return g.dir(c,"nextSibling",e)},prevUntil:function(c,i,e){return g.dir(c,"previousSibling",e)},siblings:function(c){return g.sibling(c.parentNode.firstChild,c)},children:function(c){return g.sibling(c.firstChild)},contents:function(c){return g.nodeName(c,"iframe")?c.contentDocument||c.contentWindow.document:g.makeArray(c.childNodes)}},function(c,
i){g.fn[c]=function(e,k){var l=g.map(this,i,e),n=lc.call(arguments);xb.test(c)||(k=e);k&&typeof k=="string"&&(l=g.filter(k,l));l=this.length>1&&!ec[c]?g.unique(l):l;(this.length>1||zb.test(k))&&yb.test(c)&&(l=l.reverse());return this.pushStack(l,c,n.join(","))}});g.extend({filter:function(c,i,e){e&&(c=":not("+c+")");return i.length===1?g.find.matchesSelector(i[0],c)?[i[0]]:[]:g.find.matches(c,i)},dir:function(c,i,e){var k=[];for(c=c[i];c&&c.nodeType!==9&&(e===b||c.nodeType!==1||!g(c).is(e));){c.nodeType===
1&&k.push(c);c=c[i]}return k},nth:function(c,i,e){for(var k=0;c;c=c[e])if(c.nodeType===1&&++k===(i||1))break;return c},sibling:function(c,i){for(var e=[];c;c=c.nextSibling)c.nodeType===1&&c!==i&&e.push(c);return e}});var Tb=/ jQuery\d+="(?:\d+|null)"/g,Jb=/^\s+/,Ub=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Vb=/<([\w:]+)/,Wb=/<tbody/i,fc=/<|&#?\w+;/,$a=/<(?:script|object|embed|option|style)/i,tb=/checked\s*(?:[^=]|=\s*.checked.)/i,gc=/\/(java|ecma)script/i,dc=/^\s*<!(?:\[CDATA\[|\-\-)/,
Ra={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};Ra.optgroup=Ra.option;Ra.tbody=Ra.tfoot=Ra.colgroup=Ra.caption=Ra.thead;Ra.th=Ra.td;g.support.htmlSerialize||(Ra._default=[1,"div<div>","</div>"]);g.fn.extend({text:function(c){if(g.isFunction(c))return this.each(function(i){var e=
g(this);e.text(c.call(this,i,e.text()))});if(typeof c!="object"&&c!==b)return this.empty().append((this[0]&&this[0].ownerDocument||Y).createTextNode(c));return g.text(this)},wrapAll:function(c){if(g.isFunction(c))return this.each(function(e){g(this).wrapAll(c.call(this,e))});if(this[0]){var i=g(c,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&i.insertBefore(this[0]);i.map(function(){for(var e=this;e.firstChild&&e.firstChild.nodeType===1;)e=e.firstChild;return e}).append(this)}return this},
wrapInner:function(c){if(g.isFunction(c))return this.each(function(i){g(this).wrapInner(c.call(this,i))});return this.each(function(){var i=g(this),e=i.contents();e.length?e.wrapAll(c):i.append(c)})},wrap:function(c){return this.each(function(){g(this).wrapAll(c)})},unwrap:function(){return this.parent().each(function(){g.nodeName(this,"body")||g(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.appendChild(c)})},
prepend:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.insertBefore(c,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(i){this.parentNode.insertBefore(i,this)});if(arguments.length){var c=g(arguments[0]);c.push.apply(c,this.toArray());return this.pushStack(c,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(i){this.parentNode.insertBefore(i,
this.nextSibling)});if(arguments.length){var c=this.pushStack(this,"after",arguments);c.push.apply(c,g(arguments[0]).toArray());return c}},remove:function(c,i){for(var e=0,k;(k=this[e])!=null;e++)if(!c||g.filter(c,[k]).length){!i&&k.nodeType===1&&(g.cleanData(k.getElementsByTagName("*")),g.cleanData([k]));k.parentNode&&k.parentNode.removeChild(k)}return this},empty:function(){for(var c=0,i;(i=this[c])!=null;c++)for(i.nodeType===1&&g.cleanData(i.getElementsByTagName("*"));i.firstChild;)i.removeChild(i.firstChild);
return this},clone:function(c,i){c=c==null?false:c;i=i==null?c:i;return this.map(function(){return g.clone(this,c,i)})},html:function(c){if(c===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Tb,""):null;if(typeof c=="string"&&!$a.test(c)&&(g.support.leadingWhitespace||!Jb.test(c))&&!Ra[(Vb.exec(c)||["",""])[1].toLowerCase()]){c=c.replace(Ub,"<$1></$2>");try{for(var i=0,e=this.length;i<e;i++)this[i].nodeType===1&&(g.cleanData(this[i].getElementsByTagName("*")),this[i].innerHTML=c)}catch(k){this.empty().append(c)}}else g.isFunction(c)?
this.each(function(l){var n=g(this);n.html(c.call(this,l,n.html()))}):this.empty().append(c);return this},replaceWith:function(c){if(this[0]&&this[0].parentNode){if(g.isFunction(c))return this.each(function(i){var e=g(this),k=e.html();e.replaceWith(c.call(this,i,k))});typeof c!="string"&&(c=g(c).detach());return this.each(function(){var i=this.nextSibling,e=this.parentNode;g(this).remove();i?g(i).before(c):g(e).append(c)})}return this.length?this.pushStack(g(g.isFunction(c)?c():c),"replaceWith",c):
this},detach:function(c){return this.remove(c,true)},domManip:function(c,i,e){var k,l,n,o=c[0],t=[];if(!g.support.checkClone&&arguments.length===3&&typeof o=="string"&&tb.test(o))return this.each(function(){g(this).domManip(c,i,e,true)});if(g.isFunction(o))return this.each(function(B){var H=g(this);c[0]=o.call(this,B,i?H.html():b);H.domManip(c,i,e)});if(this[0]){n=o&&o.parentNode;g.support.parentNode&&n&&n.nodeType===11&&n.childNodes.length===this.length?(k={fragment:n}):(k=g.buildFragment(c,this,
t));n=k.fragment;n.childNodes.length===1?(l=n=n.firstChild):(l=n.firstChild);if(l){i=i&&g.nodeName(l,"tr");l=0;for(var w=this.length,x=w-1;l<w;l++)e.call(i?g.nodeName(this[l],"table")?this[l].getElementsByTagName("tbody")[0]||this[l].appendChild(this[l].ownerDocument.createElement("tbody")):this[l]:this[l],k.cacheable||w>1&&l<x?g.clone(n,true,true):n)}t.length&&g.each(t,F)}return this}});g.buildFragment=function(c,i,e){var k,l,n,o;i&&i[0]&&(o=i[0].ownerDocument||i[0]);o.createDocumentFragment||(o=
Y);c.length===1&&typeof c[0]=="string"&&c[0].length<512&&o===Y&&c[0].charAt(0)==="<"&&!$a.test(c[0])&&(g.support.checkClone||!tb.test(c[0]))&&(l=true,n=g.fragments[c[0]],n&&n!==1&&(k=n));k||(k=o.createDocumentFragment(),g.clean(c,o,k,e));l&&(g.fragments[c[0]]=n?k:1);return{fragment:k,cacheable:l}};g.fragments={};g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(c,i){g.fn[c]=function(e){var k=[];e=g(e);var l=this.length===1&&
this[0].parentNode;if(l&&l.nodeType===11&&l.childNodes.length===1&&e.length===1){e[i](this[0]);return this}l=0;for(var n=e.length;l<n;l++){var o=(l>0?this.clone(true):this).get();g(e[l])[i](o);k=k.concat(o)}return this.pushStack(k,c,e.selector)}});g.extend({clone:function(c,i,e){var k=c.cloneNode(true),l,n,o;if((!g.support.noCloneEvent||!g.support.noCloneChecked)&&(c.nodeType===1||c.nodeType===11)&&!g.isXMLDoc(c)){r(c,k);l=q(c);n=q(k);for(o=0;l[o];++o)r(l[o],n[o])}if(i){C(c,k);if(e){l=q(c);n=q(k);
for(o=0;l[o];++o)C(l[o],n[o])}}return k},clean:function(c,i,e,k){i=i||Y;typeof i.createElement=="undefined"&&(i=i.ownerDocument||i[0]&&i[0].ownerDocument||Y);for(var l=[],n,o=0,t;(t=c[o])!=null;o++){typeof t=="number"&&(t+="");if(t){if(typeof t=="string")if(fc.test(t)){t=t.replace(Ub,"<$1></$2>");n=(Vb.exec(t)||["",""])[1].toLowerCase();var w=Ra[n]||Ra._default,x=w[0],B=i.createElement("div");for(B.innerHTML=w[1]+t+w[2];x--;)B=B.lastChild;if(!g.support.tbody){x=Wb.test(t);w=n==="table"&&!x?B.firstChild&&
B.firstChild.childNodes:w[1]==="<table>"&&!x?B.childNodes:[];for(n=w.length-1;n>=0;--n)g.nodeName(w[n],"tbody")&&!w[n].childNodes.length&&w[n].parentNode.removeChild(w[n])}!g.support.leadingWhitespace&&Jb.test(t)&&B.insertBefore(i.createTextNode(Jb.exec(t)[0]),B.firstChild);t=B.childNodes}else t=i.createTextNode(t);var H;if(!g.support.appendChecked)if(t[0]&&typeof(H=t.length)=="number")for(n=0;n<H;n++)J(t[n]);else J(t);t.nodeType?l.push(t):(l=g.merge(l,t))}}if(e){c=function(S){return!S.type||gc.test(S.type)};
for(o=0;l[o];o++)if(k&&g.nodeName(l[o],"script")&&(!l[o].type||l[o].type.toLowerCase()==="text/javascript"))k.push(l[o].parentNode?l[o].parentNode.removeChild(l[o]):l[o]);else{if(l[o].nodeType===1){i=g.grep(l[o].getElementsByTagName("script"),c);l.splice.apply(l,[o+1,0].concat(i))}e.appendChild(l[o])}}return l},cleanData:function(c){for(var i,e,k=g.cache,l=g.expando,n=g.event.special,o=g.support.deleteExpando,t=0,w;(w=c[t])!=null;t++)if(!(w.nodeName&&g.noData[w.nodeName.toLowerCase()]))if(e=w[g.expando]){if((i=
k[e]&&k[e][l])&&i.events){for(var x in i.events)n[x]?g.event.remove(w,x):g.removeEvent(w,x,i.handle);i.handle&&(i.handle.elem=null)}o?delete w[g.expando]:w.removeAttribute&&w.removeAttribute(g.expando);delete k[e]}}});var Xb=/alpha\([^)]*\)/i,hc=/opacity=([^)]*)/,mc=/([A-Z]|^ms)/g,Kb=/^-?\d+(?:px)?$/i,Yb=/^-?\d/,Zb=/^[+\-]=/,qa=/[^+\-\.\de]+/g,ic={position:"absolute",visibility:"hidden",display:"block"},ha=["Left","Right"],Qb=["Top","Bottom"],fb,mb,ma;g.fn.css=function(c,i){if(arguments.length===
2&&i===b)return this;return g.access(this,c,i,true,function(e,k,l){return l!==b?g.style(e,k,l):g.css(e,k)})};g.extend({cssHooks:{opacity:{get:function(c,i){if(i){var e=fb(c,"opacity","opacity");return e===""?"1":e}return c.style.opacity}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":g.support.cssFloat?"cssFloat":"styleFloat"},style:function(c,i,e,k){if(c&&c.nodeType!==3&&c.nodeType!==8&&c.style){var l,n=
g.camelCase(i),o=c.style,t=g.cssHooks[n];i=g.cssProps[n]||n;if(e===b){if(t&&"get"in t&&(l=t.get(c,false,k))!==b)return l;return o[i]}k=typeof e;if(!(k==="number"&&isNaN(e)||e==null)){k==="string"&&Zb.test(e)&&(e=+e.replace(qa,"")+parseFloat(g.css(c,i)),k="number");k==="number"&&!g.cssNumber[n]&&(e+="px");if(!t||!("set"in t)||(e=t.set(c,e))!==b)try{o[i]=e}catch(w){}}}},css:function(c,i,e){var k,l;i=g.camelCase(i);l=g.cssHooks[i];i=g.cssProps[i]||i;i==="cssFloat"&&(i="float");if(l&&"get"in l&&(k=l.get(c,
true,e))!==b)return k;if(fb)return fb(c,i)},swap:function(c,i,e){var k={};for(var l in i){k[l]=c.style[l];c.style[l]=i[l]}e.call(c);for(l in i)c.style[l]=k[l]}});g.curCSS=g.css;g.each(["height","width"],function(c,i){g.cssHooks[i]={get:function(e,k,l){var n;if(k){if(e.offsetWidth!==0)return D(e,i,l);g.swap(e,ic,function(){n=D(e,i,l)});return n}},set:function(e,k){if(!Kb.test(k))return k;k=parseFloat(k);if(k>=0)return k+"px"}}});g.support.opacity||(g.cssHooks.opacity={get:function(c,i){return hc.test((i&&
c.currentStyle?c.currentStyle.filter:c.style.filter)||"")?parseFloat(RegExp.$1)/100+"":i?"1":""},set:function(c,i){var e=c.style,k=c.currentStyle;e.zoom=1;var l=g.isNaN(i)?"":"alpha(opacity="+i*100+")";k=k&&k.filter||e.filter||"";e.filter=Xb.test(k)?k.replace(Xb,l):k+" "+l}});g(function(){g.support.reliableMarginRight||(g.cssHooks.marginRight={get:function(c,i){var e;g.swap(c,{display:"inline-block"},function(){i?(e=fb(c,"margin-right","marginRight")):(e=c.style.marginRight)});return e}})});Y.defaultView&&
Y.defaultView.getComputedStyle&&(mb=function(c,i){var e,k;i=i.replace(mc,"-$1").toLowerCase();if(!(k=c.ownerDocument.defaultView))return b;if(k=k.getComputedStyle(c,null)){e=k.getPropertyValue(i);e===""&&!g.contains(c.ownerDocument.documentElement,c)&&(e=g.style(c,i))}return e});Y.documentElement.currentStyle&&(ma=function(c,i){var e,k=c.currentStyle&&c.currentStyle[i],l=c.runtimeStyle&&c.runtimeStyle[i],n=c.style;!Kb.test(k)&&Yb.test(k)&&(e=n.left,l&&(c.runtimeStyle.left=c.currentStyle.left),n.left=
i==="fontSize"?"1em":k||0,k=n.pixelLeft+"px",n.left=e,l&&(c.runtimeStyle.left=l));return k===""?"auto":k});fb=mb||ma;g.expr&&g.expr.filters&&(g.expr.filters.hidden=function(c){var i=c.offsetHeight;return c.offsetWidth===0&&i===0||!g.support.reliableHiddenOffsets&&(c.style.display||g.css(c,"display"))==="none"},g.expr.filters.visible=function(c){return!g.expr.filters.hidden(c)});var Ab=/%20/g,eb=/\[\]$/,Lb=/\r?\n/g,nb=/#.*$/,Mb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,$b=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
za=/^(?:GET|HEAD)$/,Xa=/^\/\//,ob=/\?/,Na=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ac=/^(?:select|textarea)/i,cc=/\s+/,bc=/([?&])_=[^&]*/,Pa=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,W=g.fn.load,bb={},Ya={},Sa,R;try{Sa=X.href}catch(hb){Sa=Y.createElement("a");Sa.href="";Sa=Sa.href}R=Pa.exec(Sa.toLowerCase())||[];g.fn.extend({load:function(c,i,e){if(typeof c!="string"&&W)return W.apply(this,arguments);if(!this.length)return this;var k=c.indexOf(" ");if(k>=0){var l=c.slice(k,c.length);
c=c.slice(0,k)}k="GET";i&&(g.isFunction(i)?(e=i,i=b):typeof i=="object"&&(i=g.param(i,g.ajaxSettings.traditional),k="POST"));var n=this;g.ajax({url:c,type:k,dataType:"html",data:i,complete:function(o,t,w){w=o.responseText;o.isResolved()&&(o.done(function(x){w=x}),n.html(l?g("<div>").append(w.replace(Na,"")).find(l):w));e&&n.each(e,[w,t,o])}});return this},serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?g.makeArray(this.elements):
this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ac.test(this.nodeName)||$b.test(this.type))}).map(function(c,i){var e=g(this).val();return e==null?null:g.isArray(e)?g.map(e,function(k){return{name:i.name,value:k.replace(Lb,"\r\n")}}):{name:i.name,value:e.replace(Lb,"\r\n")}}).get()}});g.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(c,i){g.fn[i]=function(e){return this.bind(i,e)}});g.each(["get","post"],function(c,i){g[i]=function(e,
k,l,n){g.isFunction(k)&&(n=n||l,l=k,k=b);return g.ajax({type:i,url:e,data:k,success:l,dataType:n})}});g.extend({getScript:function(c,i){return g.get(c,b,i,"script")},getJSON:function(c,i,e){return g.get(c,i,e,"json")},ajaxSetup:function(c,i){i?g.extend(true,c,g.ajaxSettings,i):(i=c,c=g.extend(true,g.ajaxSettings,i));for(var e in{context:1,url:1})e in i?(c[e]=i[e]):e in g.ajaxSettings&&(c[e]=g.ajaxSettings[e]);return c},ajaxSettings:{url:Sa,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|widget):$/.test(R[1]),
global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":true,"text json":g.parseJSON,"text xml":g.parseXML}},ajaxPrefilter:z(bb),ajaxTransport:z(Ya),ajax:function(c,i){function e(I,M,U,aa){if(va!==
2){va=2;Da&&clearTimeout(Da);ea=b;S=aa||"";y.readyState=I?4:0;var ka,Ga,Ea;if(U){aa=k;var Oa=y,A=aa.contents,N=aa.dataTypes,ca=aa.responseFields,Z,ja,sa,xa;for(ja in ca)ja in U&&(Oa[ca[ja]]=U[ja]);for(;N[0]==="*";){N.shift();Z===b&&(Z=aa.mimeType||Oa.getResponseHeader("content-type"))}if(Z)for(ja in A)if(A[ja]&&A[ja].test(Z)){N.unshift(ja);break}if(N[0]in U)sa=N[0];else{for(ja in U){if(!N[0]||aa.converters[ja+" "+N[0]]){sa=ja;break}xa||(xa=ja)}sa=sa||xa}if(sa){sa!==N[0]&&N.unshift(sa);U=U[sa]}else U=
void 0}else U=b;U=U;if(I>=200&&I<300||I===304){if(k.ifModified){if(Z=y.getResponseHeader("Last-Modified"))g.lastModified[x]=Z;if(Z=y.getResponseHeader("Etag"))g.etag[x]=Z}if(I===304){M="notmodified";ka=true}else try{Z=k;U=U;Z.dataFilter&&(U=Z.dataFilter(U,Z.dataType));var Aa=Z.dataTypes;ja={};var vb,wb,oc=Aa.length,jc,Bb=Aa[0],Nb,nc,Cb,Ib,Ob;for(vb=1;vb<oc;vb++){if(vb===1)for(wb in Z.converters)typeof wb=="string"&&(ja[wb.toLowerCase()]=Z.converters[wb]);Nb=Bb;Bb=Aa[vb];if(Bb==="*")Bb=Nb;else if(Nb!==
"*"&&Nb!==Bb){nc=Nb+" "+Bb;Cb=ja[nc]||ja["* "+Bb];if(!Cb){Ob=b;for(Ib in ja){jc=Ib.split(" ");if(jc[0]===Nb||jc[0]==="*")if(Ob=ja[jc[1]+" "+Bb]){Ib=ja[Ib];Ib===true?(Cb=Ob):Ob===true&&(Cb=Ib);break}}}!Cb&&!Ob&&g.error("No conversion from "+nc.replace(" "," to "));Cb!==true&&(U=Cb?Cb(U):Ob(Ib(U)))}}Ga=U;M="success";ka=true}catch(pc){M="parsererror";Ea=pc}}else{Ea=M;if(!M||I){M="error";I<0&&(I=0)}}y.status=I;y.statusText=M;ka?o.resolveWith(l,[Ga,M,y]):o.rejectWith(l,[y,M,Ea]);y.statusCode(w);w=b;wa&&
n.trigger("ajax"+(ka?"Success":"Error"),[y,k,ka?Ga:Ea]);t.resolveWith(l,[y,M]);wa&&(n.trigger("ajaxComplete",[y,k]),--g.active||g.event.trigger("ajaxStop"))}}typeof c=="object"&&(i=c,c=b);i=i||{};var k=g.ajaxSetup({},i),l=k.context||k,n=l!==k&&(l.nodeType||l instanceof g)?g(l):g.event,o=g.Deferred(),t=g._Deferred(),w=k.statusCode||{},x,B={},H={},S,ba,ea,Da,ra,va=0,wa,u,y={readyState:0,setRequestHeader:function(I,M){if(!va){var U=I.toLowerCase();I=H[U]=H[U]||I;B[I]=M}return this},getAllResponseHeaders:function(){return va===
2?S:null},getResponseHeader:function(I){var M;if(va===2){if(!ba)for(ba={};M=Mb.exec(S);)ba[M[1].toLowerCase()]=M[2];M=ba[I.toLowerCase()]}return M===b?null:M},overrideMimeType:function(I){va||(k.mimeType=I);return this},abort:function(I){I=I||"abort";ea&&ea.abort(I);e(0,I);return this}};o.promise(y);y.success=y.done;y.error=y.fail;y.complete=t.done;y.statusCode=function(I){if(I){var M;if(va<2)for(M in I)w[M]=[w[M],I[M]];else{M=I[y.status];y.then(M,M)}}return this};k.url=((c||k.url)+"").replace(nb,
"").replace(Xa,R[1]+"//");k.dataTypes=g.trim(k.dataType||"*").toLowerCase().split(cc);k.crossDomain==null&&(ra=Pa.exec(k.url.toLowerCase()),k.crossDomain=!(!ra||ra[1]==R[1]&&ra[2]==R[2]&&(ra[3]||(ra[1]==="http:"?80:443))==(R[3]||(R[1]==="http:"?80:443))));k.data&&k.processData&&typeof k.data!="string"&&(k.data=g.param(k.data,k.traditional));s(bb,k,i,y);if(va===2)return false;wa=k.global;k.type=k.type.toUpperCase();k.hasContent=!za.test(k.type);wa&&g.active++===0&&g.event.trigger("ajaxStart");if(!k.hasContent){k.data&&
(k.url+=(ob.test(k.url)?"&":"?")+k.data);x=k.url;if(k.cache===false){ra=g.now();var K=k.url.replace(bc,"$1_="+ra);k.url=K+(K===k.url?(ob.test(k.url)?"&":"?")+"_="+ra:"")}}(k.data&&k.hasContent&&k.contentType!==false||i.contentType)&&y.setRequestHeader("Content-Type",k.contentType);k.ifModified&&(x=x||k.url,g.lastModified[x]&&y.setRequestHeader("If-Modified-Since",g.lastModified[x]),g.etag[x]&&y.setRequestHeader("If-None-Match",g.etag[x]));y.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?
k.accepts[k.dataTypes[0]]+(k.dataTypes[0]!=="*"?", */*; q=0.01":""):k.accepts["*"]);for(u in k.headers)y.setRequestHeader(u,k.headers[u]);if(k.beforeSend&&(k.beforeSend.call(l,y,k)===false||va===2)){y.abort();return false}for(u in{success:1,error:1,complete:1})y[u](k[u]);if(ea=s(Ya,k,i,y)){y.readyState=1;wa&&n.trigger("ajaxSend",[y,k]);k.async&&k.timeout>0&&(Da=setTimeout(function(){y.abort("timeout")},k.timeout));try{va=1;ea.send(B,e)}catch(L){status<2?e(-1,L):g.error(L)}}else e(-1,"No Transport");
return y},param:function(c,i){var e=[],k=function(n,o){o=g.isFunction(o)?o():o;e[e.length]=encodeURIComponent(n)+"="+encodeURIComponent(o)};i===b&&(i=g.ajaxSettings.traditional);if(g.isArray(c)||c.jquery&&!g.isPlainObject(c))g.each(c,function(){k(this.name,this.value)});else for(var l in c)v(l,c[l],i,k);return e.join("&").replace(Ab,"+")}});g.extend({active:0,lastModified:{},etag:{}});var ub=g.now(),Db=/(\=)\?(&|$)|\?\?/i;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return g.expando+"_"+
ub++}});g.ajaxPrefilter("json jsonp",function(c,i,e){i=c.contentType==="application/x-www-form-urlencoded"&&typeof c.data=="string";if(c.dataTypes[0]==="jsonp"||c.jsonp!==false&&(Db.test(c.url)||i&&Db.test(c.data))){var k,l=c.jsonpCallback=g.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,n=a[l],o=c.url,t=c.data,w="$1"+l+"$2";c.jsonp!==false&&(o=o.replace(Db,w),c.url===o&&(i&&(t=t.replace(Db,w)),c.data===t&&(o+=(/\?/.test(o)?"&":"?")+c.jsonp+"="+l)));c.url=o;c.data=t;a[l]=function(x){k=
[x]};e.always(function(){a[l]=n;k&&g.isFunction(n)&&a[l](k[0])});c.converters["script json"]=function(){k||g.error(l+" was not called");return k[0]};c.dataTypes[0]="json";return"script"}});g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(c){g.globalEval(c);return c}}});g.ajaxPrefilter("script",function(c){c.cache===b&&(c.cache=false);c.crossDomain&&
(c.type="GET",c.global=false)});g.ajaxTransport("script",function(c){if(c.crossDomain){var i,e=Y.head||Y.getElementsByTagName("head")[0]||Y.documentElement;return{send:function(k,l){i=Y.createElement("script");i.async="async";c.scriptCharset&&(i.charset=c.scriptCharset);i.src=c.url;i.onload=i.onreadystatechange=function(n,o){if(o||!i.readyState||/loaded|complete/.test(i.readyState)){i.onload=i.onreadystatechange=null;e&&i.parentNode&&e.removeChild(i);i=b;o||l(200,"success")}};e.insertBefore(i,e.firstChild)},
abort:function(){i&&i.onload(0,1)}}}});var ab=a.ActiveXObject?function(){for(var c in pb)pb[c](0,1)}:false,Qa=0,pb;g.ajaxSettings.xhr=a.ActiveXObject?function(){var c;if(!(c=!this.isLocal&&p()))a:{try{c=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(i){}c=void 0}return c}:p;(function(c){g.extend(g.support,{ajax:!!c,cors:!!c&&"withCredentials"in c})})(g.ajaxSettings.xhr());g.support.ajax&&g.ajaxTransport(function(c){if(!c.crossDomain||g.support.cors){var i;return{send:function(e,k){var l=c.xhr(),
n,o;c.username?l.open(c.type,c.url,c.async,c.username,c.password):l.open(c.type,c.url,c.async);if(c.xhrFields)for(o in c.xhrFields)l[o]=c.xhrFields[o];c.mimeType&&l.overrideMimeType&&l.overrideMimeType(c.mimeType);!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(o in e)l.setRequestHeader(o,e[o])}catch(t){}l.send(c.hasContent&&c.data||null);i=function(w,x){var B,H,S,ba,ea;try{if(i&&(x||l.readyState===4)){i=b;n&&(l.onreadystatechange=g.noop,ab&&delete pb[n]);
if(x)l.readyState!==4&&l.abort();else{B=l.status;S=l.getAllResponseHeaders();ba={};(ea=l.responseXML)&&ea.documentElement&&(ba.xml=ea);ba.text=l.responseText;try{H=l.statusText}catch(Da){H=""}!B&&c.isLocal&&!c.crossDomain?(B=ba.text?200:404):B===1223&&(B=204)}}}catch(ra){x||k(-1,ra)}ba&&k(B,H,ba,S)};!c.async||l.readyState===4?i():(n=++Qa,ab&&(pb||(pb={},g(a).unload(ab)),pb[n]=i),l.onreadystatechange=i)},abort:function(){i&&i(0,1)}}}});var db={},Ta,Ba,ib=/^(?:toggle|show|hide)$/,kc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,
jb,Ka=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],qb,Eb=a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame;g.fn.extend({show:function(c,i,e){var k;if(c||c===0)return this.animate(h("show",3),c,i,e);i=0;for(e=this.length;i<e;i++){c=this[i];c.style&&(k=c.style.display,!g._data(c,"olddisplay")&&k==="none"&&(k=c.style.display=""),k===""&&g.css(c,"display")==="none"&&
g._data(c,"olddisplay",f(c.nodeName)))}for(i=0;i<e;i++){c=this[i];if(c.style){k=c.style.display;if(k===""||k==="none")c.style.display=g._data(c,"olddisplay")||""}}return this},hide:function(c,i,e){if(c||c===0)return this.animate(h("hide",3),c,i,e);c=0;for(i=this.length;c<i;c++)if(this[c].style){e=g.css(this[c],"display");e!=="none"&&!g._data(this[c],"olddisplay")&&g._data(this[c],"olddisplay",e)}for(c=0;c<i;c++)this[c].style&&(this[c].style.display="none");return this},_toggle:g.fn.toggle,toggle:function(c,
i,e){var k=typeof c=="boolean";g.isFunction(c)&&g.isFunction(i)?this._toggle.apply(this,arguments):c==null||k?this.each(function(){var l=k?c:g(this).is(":hidden");g(this)[l?"show":"hide"]()}):this.animate(h("toggle",3),c,i,e);return this},fadeTo:function(c,i,e,k){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:i},c,e,k)},animate:function(c,i,e,k){var l=g.speed(i,e,k);if(g.isEmptyObject(c))return this.each(l.complete,[false]);c=g.extend({},c);return this[l.queue===false?
"each":"queue"](function(){l.queue===false&&g._mark(this);var n=g.extend({},l),o=this.nodeType===1,t=o&&g(this).is(":hidden"),w,x,B,H,S,ba,ea,Da;n.animatedProperties={};for(B in c){w=g.camelCase(B);B!==w&&(c[w]=c[B],delete c[B]);x=c[w];g.isArray(x)?(n.animatedProperties[w]=x[1],x=c[w]=x[0]):(n.animatedProperties[w]=n.specialEasing&&n.specialEasing[w]||n.easing||"swing");if(x==="hide"&&t||x==="show"&&!t)return n.complete.call(this);o&&(w==="height"||w==="width")&&(n.overflow=[this.style.overflow,this.style.overflowX,
this.style.overflowY],g.css(this,"display")==="inline"&&g.css(this,"float")==="none"&&(g.support.inlineBlockNeedsLayout?(H=f(this.nodeName),H==="inline"?(this.style.display="inline-block"):(this.style.display="inline",this.style.zoom=1)):(this.style.display="inline-block")))}n.overflow!=null&&(this.style.overflow="hidden");for(B in c){o=new g.fx(this,n,B);x=c[B];ib.test(x)?o[x==="toggle"?t?"show":"hide":x]():(S=kc.exec(x),ba=o.cur(),S?(ea=parseFloat(S[2]),Da=S[3]||(g.cssNumber[B]?"":"px"),Da!=="px"&&
(g.style(this,B,(ea||1)+Da),ba=(ea||1)/o.cur()*ba,g.style(this,B,ba+Da)),S[1]&&(ea=(S[1]==="-="?-1:1)*ea+ba),o.custom(ba,ea,Da)):o.custom(ba,x,""))}return true})},stop:function(c,i){c&&this.queue([]);this.each(function(){var e=g.timers,k=e.length;for(i||g._unmark(true,this);k--;)e[k].elem===this&&(i&&e[k](true),e.splice(k,1))});i||this.dequeue();return this}});g.each({slideDown:h("show",1),slideUp:h("hide",1),slideToggle:h("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},
function(c,i){g.fn[c]=function(e,k,l){return this.animate(i,e,k,l)}});g.extend({speed:function(c,i,e){var k=c&&typeof c=="object"?g.extend({},c):{complete:e||!e&&i||g.isFunction(c)&&c,duration:c,easing:e&&i||i&&!g.isFunction(i)&&i};k.duration=g.fx.off?0:typeof k.duration=="number"?k.duration:k.duration in g.fx.speeds?g.fx.speeds[k.duration]:g.fx.speeds._default;k.old=k.complete;k.complete=function(l){g.isFunction(k.old)&&k.old.call(this);k.queue!==false?g.dequeue(this):l!==false&&g._unmark(this)};
return k},easing:{linear:function(c,i,e,k){return e+k*c},swing:function(c,i,e,k){return(-Math.cos(c*Math.PI)/2+0.5)*k+e}},timers:[],fx:function(c,i,e){this.options=i;this.elem=c;this.prop=e;i.orig=i.orig||{}}});g.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(g.fx.step[this.prop]||g.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var c,i=g.css(this.elem,
this.prop);return isNaN(c=parseFloat(i))?!i||i==="auto"?0:i:c},custom:function(c,i,e){function k(t){return l.step(t)}var l=this,n=g.fx,o;this.startTime=qb||m();this.start=c;this.end=i;this.unit=e||this.unit||(g.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;k.elem=this.elem;k()&&g.timers.push(k)&&!jb&&(Eb?(jb=true,o=function(){jb&&(Eb(o),n.tick())},Eb(o)):(jb=setInterval(n.tick,n.interval)))},show:function(){this.options.orig[this.prop]=g.style(this.elem,this.prop);this.options.show=
true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());g(this.elem).show()},hide:function(){this.options.orig[this.prop]=g.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(c){var i=qb||m(),e=true,k=this.elem,l=this.options,n,o;if(c||i>=l.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();l.animatedProperties[this.prop]=true;for(n in l.animatedProperties)l.animatedProperties[n]!==true&&(e=false);if(e){l.overflow!=
null&&!g.support.shrinkWrapBlocks&&g.each(["","X","Y"],function(w,x){k.style["overflow"+x]=l.overflow[w]});l.hide&&g(k).hide();if(l.hide||l.show)for(var t in l.animatedProperties)g.style(k,t,l.orig[t]);l.complete.call(k)}return false}l.duration==Infinity?(this.now=i):(o=i-this.startTime,this.state=o/l.duration,this.pos=g.easing[l.animatedProperties[this.prop]](this.state,o,0,1,l.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return true}};g.extend(g.fx,{tick:function(){for(var c=
g.timers,i=0;i<c.length;++i)c[i]()||c.splice(i--,1);c.length||g.fx.stop()},interval:13,stop:function(){clearInterval(jb);jb=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(c){g.style(c.elem,"opacity",c.now)},_default:function(c){c.elem.style&&c.elem.style[c.prop]!=null?(c.elem.style[c.prop]=(c.prop==="width"||c.prop==="height"?Math.max(0,c.now):c.now)+c.unit):(c.elem[c.prop]=c.now)}}});g.expr&&g.expr.filters&&(g.expr.filters.animated=function(c){return g.grep(g.timers,function(i){return c===
i.elem}).length});var Za=/^t(?:able|d|h)$/i,Pb=/^(?:body|html)$/i;"getBoundingClientRect"in Y.documentElement?(g.fn.offset=function(c){var i=this[0],e;if(c)return this.each(function(o){g.offset.setOffset(this,c,o)});if(!i||!i.ownerDocument)return null;if(i===i.ownerDocument.body)return g.offset.bodyOffset(i);try{e=i.getBoundingClientRect()}catch(k){}var l=i.ownerDocument,n=l.documentElement;if(!e||!g.contains(n,i))return e?{top:e.top,left:e.left}:{top:0,left:0};i=l.body;l=d(l);return{top:e.top+(l.pageYOffset||
g.support.boxModel&&n.scrollTop||i.scrollTop)-(n.clientTop||i.clientTop||0),left:e.left+(l.pageXOffset||g.support.boxModel&&n.scrollLeft||i.scrollLeft)-(n.clientLeft||i.clientLeft||0)}}):(g.fn.offset=function(c){var i=this[0];if(c)return this.each(function(B){g.offset.setOffset(this,c,B)});if(!i||!i.ownerDocument)return null;if(i===i.ownerDocument.body)return g.offset.bodyOffset(i);g.offset.initialize();var e,k=i.offsetParent,l=i,n=i.ownerDocument,o=n.documentElement,t=n.body;e=(n=n.defaultView)?
n.getComputedStyle(i,null):i.currentStyle;for(var w=i.offsetTop,x=i.offsetLeft;(i=i.parentNode)&&i!==t&&i!==o;){if(g.offset.supportsFixedPosition&&e.position==="fixed")break;e=n?n.getComputedStyle(i,null):i.currentStyle;w-=i.scrollTop;x-=i.scrollLeft;i===k&&(w+=i.offsetTop,x+=i.offsetLeft,g.offset.doesNotAddBorder&&(!g.offset.doesAddBorderForTableAndCells||!Za.test(i.nodeName))&&(w+=parseFloat(e.borderTopWidth)||0,x+=parseFloat(e.borderLeftWidth)||0),l=k,k=i.offsetParent);g.offset.subtractsBorderForOverflowNotVisible&&
e.overflow!=="visible"&&(w+=parseFloat(e.borderTopWidth)||0,x+=parseFloat(e.borderLeftWidth)||0);e=e}if(e.position==="relative"||e.position==="static"){w+=t.offsetTop;x+=t.offsetLeft}g.offset.supportsFixedPosition&&e.position==="fixed"&&(w+=Math.max(o.scrollTop,t.scrollTop),x+=Math.max(o.scrollLeft,t.scrollLeft));return{top:w,left:x}});g.offset={initialize:function(){var c=Y.body,i=Y.createElement("div"),e,k,l,n=parseFloat(g.css(c,"marginTop"))||0;g.extend(i.style,{position:"absolute",top:0,left:0,
margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});i.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";c.insertBefore(i,c.firstChild);e=i.firstChild;k=e.firstChild;l=e.nextSibling.firstChild.firstChild;this.doesNotAddBorder=k.offsetTop!==
5;this.doesAddBorderForTableAndCells=l.offsetTop===5;k.style.position="fixed";k.style.top="20px";this.supportsFixedPosition=k.offsetTop===20||k.offsetTop===15;k.style.position=k.style.top="";e.style.overflow="hidden";e.style.position="relative";this.subtractsBorderForOverflowNotVisible=k.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=c.offsetTop!==n;c.removeChild(i);g.offset.initialize=g.noop},bodyOffset:function(c){var i=c.offsetTop,e=c.offsetLeft;g.offset.initialize();g.offset.doesNotIncludeMarginInBodyOffset&&
(i+=parseFloat(g.css(c,"marginTop"))||0,e+=parseFloat(g.css(c,"marginLeft"))||0);return{top:i,left:e}},setOffset:function(c,i,e){var k=g.css(c,"position");k==="static"&&(c.style.position="relative");var l=g(c),n=l.offset(),o=g.css(c,"top"),t=g.css(c,"left"),w={},x={},B,H;(k==="absolute"||k==="fixed")&&g.inArray("auto",[o,t])>-1?(x=l.position(),B=x.top,H=x.left):(B=parseFloat(o)||0,H=parseFloat(t)||0);g.isFunction(i)&&(i=i.call(c,e,n));i.top!=null&&(w.top=i.top-n.top+B);i.left!=null&&(w.left=i.left-
n.left+H);"using"in i?i.using.call(c,w):l.css(w)}};g.fn.extend({position:function(){if(!this[0])return null;var c=this[0],i=this.offsetParent(),e=this.offset(),k=Pb.test(i[0].nodeName)?{top:0,left:0}:i.offset();e.top-=parseFloat(g.css(c,"marginTop"))||0;e.left-=parseFloat(g.css(c,"marginLeft"))||0;k.top+=parseFloat(g.css(i[0],"borderTopWidth"))||0;k.left+=parseFloat(g.css(i[0],"borderLeftWidth"))||0;return{top:e.top-k.top,left:e.left-k.left}},offsetParent:function(){return this.map(function(){for(var c=
this.offsetParent||Y.body;c&&!Pb.test(c.nodeName)&&g.css(c,"position")==="static";)c=c.offsetParent;return c})}});g.each(["Left","Top"],function(c,i){var e="scroll"+i;g.fn[e]=function(k){var l,n;if(k===b){l=this[0];if(!l)return null;return(n=d(l))?"pageXOffset"in n?n[c?"pageYOffset":"pageXOffset"]:g.support.boxModel&&n.document.documentElement[e]||n.document.body[e]:l[e]}return this.each(function(){(n=d(this))?n.scrollTo(c?g(n).scrollLeft():k,c?k:g(n).scrollTop()):(this[e]=k)})}});g.each(["Height",
"Width"],function(c,i){var e=i.toLowerCase();g.fn["inner"+i]=function(){var k=this[0];return k&&k.style?parseFloat(g.css(k,e,"padding")):null};g.fn["outer"+i]=function(k){var l=this[0];return l&&l.style?parseFloat(g.css(l,e,k?"margin":"border")):null};g.fn[e]=function(k){var l=this[0];if(!l)return k==null?null:this;if(g.isFunction(k))return this.each(function(o){var t=g(this);t[e](k.call(this,o,t[e]()))});if(g.isWindow(l)){var n=l.document.documentElement["client"+i];return l.document.compatMode===
"CSS1Compat"&&n||l.document.body["client"+i]||n}if(l.nodeType===9)return Math.max(l.documentElement["client"+i],l.body["scroll"+i],l.documentElement["scroll"+i],l.body["offset"+i],l.documentElement["offset"+i]);if(k===b){l=g.css(l,e);n=parseFloat(l);return g.isNaN(n)?l:n}return this.css(e,typeof k=="string"?k:k+"px")}});a.jQuery=a.$=g})(window);
(function(a,b){function d(h,j){var m=h.nodeName.toLowerCase();if("area"===m){m=h.parentNode;var p=m.name;if(!h.href||!p||m.nodeName.toLowerCase()!=="map")return false;m=a("img[usemap=#"+p+"]")[0];return!!m&&f(m)}return(/input|select|textarea|button|object/.test(m)?!h.disabled:"a"==m?h.href||j:j)&&f(h)}function f(h){return!a(h).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.16",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(h,j){return typeof h==="number"?this.each(function(){var m=
this;setTimeout(function(){a(m).focus();j&&j.call(m)},h)}):this._focus.apply(this,arguments)},scrollParent:function(){var h;h=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,
"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!h.length?a(document):h},zIndex:function(h){if(h!==b)return this.css("zIndex",h);if(this.length){h=a(this[0]);for(var j;h.length&&h[0]!==document;){j=h.css("position");if(j==="absolute"||j==="relative"||j==="fixed"){j=parseInt(h.css("zIndex"),10);if(!isNaN(j)&&j!==0)return j}h=h.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(h){h.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(h,j){function m(z,D,F,J){a.each(p,function(){D-=parseFloat(a.curCSS(z,"padding"+this,true))||0;if(F)D-=parseFloat(a.curCSS(z,"border"+this+"Width",true))||0;if(J)D-=parseFloat(a.curCSS(z,"margin"+this,true))||0});return D}var p=j==="Width"?["Left","Right"]:["Top","Bottom"],v=j.toLowerCase(),s={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,
outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+j]=function(z){if(z===b)return s["inner"+j].call(this);return this.each(function(){a(this).css(v,m(this,z)+"px")})};a.fn["outer"+j]=function(z,D){if(typeof z!=="number")return s["outer"+j].call(this,z);return this.each(function(){a(this).css(v,m(this,z,true,D)+"px")})}});a.extend(a.expr[":"],{data:function(h,j,m){return!!a.data(h,m[3])},focusable:function(h){return d(h,!isNaN(a.attr(h,"tabindex")))},tabbable:function(h){var j=a.attr(h,
"tabindex"),m=isNaN(j);return(m||j>=0)&&d(h,!m)}});a(function(){var h=document.body,j=h.appendChild(j=document.createElement("div"));a.extend(j.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=j.offsetHeight===100;a.support.selectstart="onselectstart"in j;h.removeChild(j).style.display="none"});a.extend(a.ui,{plugin:{add:function(h,j,m){h=a.ui[h].prototype;for(var p in m){h.plugins[p]=h.plugins[p]||[];h.plugins[p].push([j,m[p]])}},call:function(h,j,m){if((j=h.plugins[j])&&
h.element[0].parentNode)for(var p=0;p<j.length;p++)h.options[j[p][0]]&&j[p][1].apply(h.element,m)}},contains:function(h,j){return document.compareDocumentPosition?h.compareDocumentPosition(j)&16:h!==j&&h.contains(j)},hasScroll:function(h,j){if(a(h).css("overflow")==="hidden")return false;var m=j&&j==="left"?"scrollLeft":"scrollTop",p=false;if(h[m]>0)return true;h[m]=1;p=h[m]>0;h[m]=0;return p},isOverAxis:function(h,j,m){return h>j&&h<j+m},isOver:function(h,j,m,p,v,s){return a.ui.isOverAxis(h,m,v)&&
a.ui.isOverAxis(j,p,s)}})}})(jQuery);
(function(a,b){if(a.cleanData){var d=a.cleanData;a.cleanData=function(h){for(var j=0,m;(m=h[j])!=null;j++)try{a(m).triggerHandler("remove")}catch(p){}d(h)}}else{var f=a.fn.remove;a.fn.remove=function(h,j){return this.each(function(){if(!j)if(!h||a.filter(h,[this]).length)a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(m){}});return f.call(a(this),h,j)})}}a.widget=function(h,j,m){var p=h.split(".")[0],v;h=h.split(".")[1];v=p+"-"+h;if(!m){m=j;j=a.Widget}a.expr[":"][v]=
function(s){return!!a.data(s,h)};a[p]=a[p]||{};a[p][h]=function(s,z){arguments.length&&this._createWidget(s,z)};j=new j;j.options=a.extend(true,{},j.options);a[p][h].prototype=a.extend(true,j,{namespace:p,widgetName:h,widgetEventPrefix:a[p][h].prototype.widgetEventPrefix||h,widgetBaseClass:v},m);a.widget.bridge(h,a[p][h])};a.widget.bridge=function(h,j){a.fn[h]=function(m){var p=typeof m==="string",v=Array.prototype.slice.call(arguments,1),s=this;m=!p&&v.length?a.extend.apply(null,[true,m].concat(v)):
m;if(p&&m.charAt(0)==="_")return s;p?this.each(function(){var z=a.data(this,h),D=z&&a.isFunction(z[m])?z[m].apply(z,v):z;if(D!==z&&D!==b){s=D;return false}}):this.each(function(){var z=a.data(this,h);z?z.option(m||{})._init():a.data(this,h,new j(m,this))});return s}};a.Widget=function(h,j){arguments.length&&this._createWidget(h,j)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(h,j){a.data(j,this.widgetName,this);this.element=a(j);this.options=
a.extend(true,{},this.options,this._getCreateOptions(),h);var m=this;this.element.bind("remove."+this.widgetName,function(){m.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(h,j){var m=h;if(arguments.length===0)return a.extend({},this.options);if(typeof h==="string"){if(j===b)return this.options[h];m={};m[h]=j}this._setOptions(m);return this},_setOptions:function(h){var j=this;a.each(h,function(m,p){j._setOption(m,p)});return this},_setOption:function(h,j){this.options[h]=j;if(h==="disabled")this.widget()[j?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
j);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(h,j,m){var p=this.options[h];j=a.Event(j);j.type=(h===this.widgetEventPrefix?h:this.widgetEventPrefix+h).toLowerCase();m=m||{};if(j.originalEvent){h=a.event.props.length;for(var v;h;){v=a.event.props[--h];j[v]=j.originalEvent[v]}}this.element.trigger(j,m);return!(a.isFunction(p)&&p.call(this.element[0],j,m)===false||j.isDefaultPrevented())}}})(jQuery);
(function(a){var b=false;a(document).mouseup(function(){b=false});a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(f){return d._mouseDown(f)}).bind("click."+this.widgetName,function(f){if(true===a.data(f.target,d.widgetName+".preventClickEvent")){a.removeData(f.target,d.widgetName+".preventClickEvent");f.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(d){if(!b){this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var f=this,h=d.which==1,j=typeof this.options.cancel=="string"&&d.target.nodeName?a(d.target).closest(this.options.cancel).length:false;if(!h||j||!this._mouseCapture(d))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){f.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=
this._mouseStart(d)!==false;if(!this._mouseStarted){d.preventDefault();return true}}true===a.data(d.target,this.widgetName+".preventClickEvent")&&a.removeData(d.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(m){return f._mouseMove(m)};this._mouseUpDelegate=function(m){return f._mouseUp(m)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);d.preventDefault();return b=true}},_mouseMove:function(d){if(a.browser.msie&&
!(document.documentMode>=9)&&!d.button)return this._mouseUp(d);if(this._mouseStarted){this._mouseDrag(d);return d.preventDefault()}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,d)!==false)?this._mouseDrag(d):this._mouseUp(d);return!this._mouseStarted},_mouseUp:function(d){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=
false;d.target==this._mouseDownEvent.target&&a.data(d.target,this.widgetName+".preventClickEvent",true);this._mouseStop(d)}return false},_mouseDistanceMet:function(d){return Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(b){var d=
this.options;if(this.helper||d.disabled||a(b.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(b);if(!this.handle)return false;if(d.iframeFix)a(d.iframeFix===true?"iframe":d.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return true},_mouseStart:function(b){var d=this.options;
this.helper=this._createHelper(b);this._cacheHelperProportions();if(a.ui.ddmanager)a.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});
this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);d.containment&&this._setContainment();if(this._trigger("start",b)===false){this._clear();return false}this._cacheHelperProportions();a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(b,true);a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b);return true},
_mouseDrag:function(b,d){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!d){var f=this._uiHash();if(this._trigger("drag",b,f)===false){this._mouseUp({});return false}this.position=f.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return false},_mouseStop:function(b){var d=
false;if(a.ui.ddmanager&&!this.options.dropBehaviour)d=a.ui.ddmanager.drop(this,b);if(this.dropped){d=this.dropped;this.dropped=false}if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return false;if(this.options.revert=="invalid"&&!d||this.options.revert=="valid"&&d||this.options.revert===true||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,
10),function(){f._trigger("stop",b)!==false&&f._clear()})}else this._trigger("stop",b)!==false&&this._clear();return false},_mouseUp:function(b){this.options.iframeFix===true&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b);return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){var d=!this.options.handle||
!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==b.target)d=true});return d},_createHelper:function(b){var d=this.options;b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],[b])):d.helper=="clone"?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo(d.appendTo=="parent"?this.element[0].parentNode:d.appendTo);b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&
b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){if(typeof b=="string")b=b.split(" ");if(a.isArray(b))b={left:+b[0],top:+b[1]||0};if("left"in b)this.offset.click.left=b.left+this.margins.left;if("right"in b)this.offset.click.left=this.helperProportions.width-b.right+this.margins.left;if("top"in b)this.offset.click.top=b.top+this.margins.top;if("bottom"in b)this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=
this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),
10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if(b.containment=="parent")b.containment=this.helper[0].parentNode;if(b.containment=="document"||b.containment=="window")this.containment=[b.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,
(b.containment=="document"?0:a(window).scrollLeft())+a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b.containment=="document"?0:a(window).scrollTop())+(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){b=a(b.containment);var d=b[0];if(d){b.offset();var f=a(d).css("overflow")!=
"hidden";this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),
10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=b}}else if(b.containment.constructor==Array)this.containment=b.containment},_convertPositionTo:function(b,d){if(!d)d=this.position;var f=b=="absolute"?1:-1,h=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=/(html|body)/i.test(h[0].tagName);return{top:d.top+
this.offset.relative.top*f+this.offset.parent.top*f-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():j?0:h.scrollTop())*f),left:d.left+this.offset.relative.left*f+this.offset.parent.left*f-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:h.scrollLeft())*f)}},_generatePosition:function(b){var d=this.options,f=this.cssPosition=="absolute"&&
!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(f[0].tagName),j=b.pageX,m=b.pageY;if(this.originalPosition){var p;if(this.containment){if(this.relative_container){p=this.relative_container.offset();p=[this.containment[0]+p.left,this.containment[1]+p.top,this.containment[2]+p.left,this.containment[3]+p.top]}else p=this.containment;if(b.pageX-this.offset.click.left<p[0])j=p[0]+this.offset.click.left;
if(b.pageY-this.offset.click.top<p[1])m=p[1]+this.offset.click.top;if(b.pageX-this.offset.click.left>p[2])j=p[2]+this.offset.click.left;if(b.pageY-this.offset.click.top>p[3])m=p[3]+this.offset.click.top}if(d.grid){m=d.grid[1]?this.originalPageY+Math.round((m-this.originalPageY)/d.grid[1])*d.grid[1]:this.originalPageY;m=p?!(m-this.offset.click.top<p[1]||m-this.offset.click.top>p[3])?m:!(m-this.offset.click.top<p[1])?m-d.grid[1]:m+d.grid[1]:m;j=d.grid[0]?this.originalPageX+Math.round((j-this.originalPageX)/
d.grid[0])*d.grid[0]:this.originalPageX;j=p?!(j-this.offset.click.left<p[0]||j-this.offset.click.left>p[2])?j:!(j-this.offset.click.left<p[0])?j-d.grid[0]:j+d.grid[0]:j}}return{top:m-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():h?0:f.scrollTop()),left:j-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<
526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:f.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(b,d,f){f=f||this._uiHash();a.ui.plugin.call(this,b,[d,f]);if(b=="drag")this.positionAbs=this._convertPositionTo("absolute");return a.Widget.prototype._trigger.call(this,b,d,
f)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8.16"});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,d){var f=a(this).data("draggable"),h=f.options,j=a.extend({},d,{item:f.element});f.sortables=[];a(h.connectToSortable).each(function(){var m=a.data(this,"sortable");if(m&&!m.options.disabled){f.sortables.push({instance:m,shouldRevert:m.options.revert});
m.refreshPositions();m._trigger("activate",b,j)}})},stop:function(b,d){var f=a(this).data("draggable"),h=a.extend({},d,{item:f.element});a.each(f.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;f.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(b);this.instance.options.helper=this.instance.options._helper;f.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=
false;this.instance._trigger("deactivate",b,h)}})},drag:function(b,d){var f=a(this).data("draggable"),h=this;a.each(f.sortables,function(){this.instance.positionAbs=f.positionAbs;this.instance.helperProportions=f.helperProportions;this.instance.offset.click=f.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(h).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);
this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return d.helper[0]};b.target=this.instance.currentItem[0];this.instance._mouseCapture(b,true);this.instance._mouseStart(b,true,true);this.instance.offset.click.top=f.offset.click.top;this.instance.offset.click.left=f.offset.click.left;this.instance.offset.parent.left-=f.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=f.offset.parent.top-this.instance.offset.parent.top;
f._trigger("toSortable",b);f.dropped=this.instance.element;f.currentItem=f.element;this.instance.fromOutside=f}this.instance.currentItem&&this.instance._mouseDrag(b)}else if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",b,this.instance._uiHash(this.instance));this.instance._mouseStop(b,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&
this.instance.placeholder.remove();f._trigger("fromSortable",b);f.dropped=false}})}});a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),d=a(this).data("draggable").options;if(b.css("cursor"))d._cursor=b.css("cursor");b.css("cursor",d.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(b,d){var f=a(d.helper),h=a(this).data("draggable").options;if(f.css("opacity"))h._opacity=
f.css("opacity");f.css("opacity",h.opacity)},stop:function(b,d){var f=a(this).data("draggable").options;f._opacity&&a(d.helper).css("opacity",f._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML")b.overflowOffset=b.scrollParent.offset()},drag:function(b){var d=a(this).data("draggable"),f=d.options,h=false;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!f.axis||f.axis!=
"x")if(d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<f.scrollSensitivity)d.scrollParent[0].scrollTop=h=d.scrollParent[0].scrollTop+f.scrollSpeed;else if(b.pageY-d.overflowOffset.top<f.scrollSensitivity)d.scrollParent[0].scrollTop=h=d.scrollParent[0].scrollTop-f.scrollSpeed;if(!f.axis||f.axis!="y")if(d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<f.scrollSensitivity)d.scrollParent[0].scrollLeft=h=d.scrollParent[0].scrollLeft+f.scrollSpeed;else if(b.pageX-d.overflowOffset.left<
f.scrollSensitivity)d.scrollParent[0].scrollLeft=h=d.scrollParent[0].scrollLeft-f.scrollSpeed}else{if(!f.axis||f.axis!="x")if(b.pageY-a(document).scrollTop()<f.scrollSensitivity)h=a(document).scrollTop(a(document).scrollTop()-f.scrollSpeed);else if(a(window).height()-(b.pageY-a(document).scrollTop())<f.scrollSensitivity)h=a(document).scrollTop(a(document).scrollTop()+f.scrollSpeed);if(!f.axis||f.axis!="y")if(b.pageX-a(document).scrollLeft()<f.scrollSensitivity)h=a(document).scrollLeft(a(document).scrollLeft()-
f.scrollSpeed);else if(a(window).width()-(b.pageX-a(document).scrollLeft())<f.scrollSensitivity)h=a(document).scrollLeft(a(document).scrollLeft()+f.scrollSpeed)}h!==false&&a.ui.ddmanager&&!f.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}});a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("draggable"),d=b.options;b.snapElements=[];a(d.snap.constructor!=String?d.snap.items||":data(draggable)":d.snap).each(function(){var f=a(this),h=f.offset();this!=b.element[0]&&b.snapElements.push({item:this,
width:f.outerWidth(),height:f.outerHeight(),top:h.top,left:h.left})})},drag:function(b,d){for(var f=a(this).data("draggable"),h=f.options,j=h.snapTolerance,m=d.offset.left,p=m+f.helperProportions.width,v=d.offset.top,s=v+f.helperProportions.height,z=f.snapElements.length-1;z>=0;z--){var D=f.snapElements[z].left,F=D+f.snapElements[z].width,J=f.snapElements[z].top,O=J+f.snapElements[z].height;if(D-j<m&&m<F+j&&J-j<v&&v<O+j||D-j<m&&m<F+j&&J-j<s&&s<O+j||D-j<p&&p<F+j&&J-j<v&&v<O+j||D-j<p&&p<F+j&&J-j<s&&
s<O+j){if(h.snapMode!="inner"){var q=Math.abs(J-s)<=j,r=Math.abs(O-v)<=j,C=Math.abs(D-p)<=j,G=Math.abs(F-m)<=j;if(q)d.position.top=f._convertPositionTo("relative",{top:J-f.helperProportions.height,left:0}).top-f.margins.top;if(r)d.position.top=f._convertPositionTo("relative",{top:O,left:0}).top-f.margins.top;if(C)d.position.left=f._convertPositionTo("relative",{top:0,left:D-f.helperProportions.width}).left-f.margins.left;if(G)d.position.left=f._convertPositionTo("relative",{top:0,left:F}).left-f.margins.left}var da=
q||r||C||G;if(h.snapMode!="outer"){q=Math.abs(J-v)<=j;r=Math.abs(O-s)<=j;C=Math.abs(D-m)<=j;G=Math.abs(F-p)<=j;if(q)d.position.top=f._convertPositionTo("relative",{top:J,left:0}).top-f.margins.top;if(r)d.position.top=f._convertPositionTo("relative",{top:O-f.helperProportions.height,left:0}).top-f.margins.top;if(C)d.position.left=f._convertPositionTo("relative",{top:0,left:D}).left-f.margins.left;if(G)d.position.left=f._convertPositionTo("relative",{top:0,left:F-f.helperProportions.width}).left-f.margins.left}if(!f.snapElements[z].snapping&&
(q||r||C||G||da))f.options.snap.snap&&f.options.snap.snap.call(f.element,b,a.extend(f._uiHash(),{snapItem:f.snapElements[z].item}));f.snapElements[z].snapping=q||r||C||G||da}else{f.snapElements[z].snapping&&f.options.snap.release&&f.options.snap.release.call(f.element,b,a.extend(f._uiHash(),{snapItem:f.snapElements[z].item}));f.snapElements[z].snapping=false}}}});a.ui.plugin.add("draggable","stack",{start:function(){var b=a(this).data("draggable").options;b=a.makeArray(a(b.stack)).sort(function(f,
h){return(parseInt(a(f).css("zIndex"),10)||0)-(parseInt(a(h).css("zIndex"),10)||0)});if(b.length){var d=parseInt(b[0].style.zIndex)||0;a(b).each(function(f){this.style.zIndex=d+f});this[0].style.zIndex=d+b.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(b,d){var f=a(d.helper),h=a(this).data("draggable").options;if(f.css("zIndex"))h._zIndex=f.css("zIndex");f.css("zIndex",h.zIndex)},stop:function(b,d){var f=a(this).data("draggable").options;f._zIndex&&a(d.helper).css("zIndex",f._zIndex)}})})(jQuery);
(function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,d=b.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(d)?d:function(f){return f.is(d)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[];a.ui.ddmanager.droppables[b.scope].push(this);
b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],d=0;d<b.length;d++)b[d]==this&&b.splice(d,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(b,d){if(b=="accept")this.accept=a.isFunction(d)?d:function(f){return f.is(d)};a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var d=a.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);d&&this._trigger("activate",b,this.ui(d))},_deactivate:function(b){var d=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);d&&this._trigger("deactivate",b,this.ui(d))},_over:function(b){var d=a.ui.ddmanager.current;if(!(!d||(d.currentItem||d.element)[0]==this.element[0]))if(this.accept.call(this.element[0],d.currentItem||d.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);
this._trigger("over",b,this.ui(d))}},_out:function(b){var d=a.ui.ddmanager.current;if(!(!d||(d.currentItem||d.element)[0]==this.element[0]))if(this.accept.call(this.element[0],d.currentItem||d.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("out",b,this.ui(d))}},_drop:function(b,d){var f=d||a.ui.ddmanager.current;if(!f||(f.currentItem||f.element)[0]==this.element[0])return false;var h=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var j=
a.data(this,"droppable");if(j.options.greedy&&!j.options.disabled&&j.options.scope==f.options.scope&&j.accept.call(j.element[0],f.currentItem||f.element)&&a.ui.intersect(f,a.extend(j,{offset:j.element.offset()}),j.options.tolerance)){h=true;return false}});if(h)return false;if(this.accept.call(this.element[0],f.currentItem||f.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",
b,this.ui(f));return this.element}return false},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}});a.extend(a.ui.droppable,{version:"1.8.16"});a.ui.intersect=function(b,d,f){if(!d.offset)return false;var h=(b.positionAbs||b.position.absolute).left,j=h+b.helperProportions.width,m=(b.positionAbs||b.position.absolute).top,p=m+b.helperProportions.height,v=d.offset.left,s=v+d.proportions.width,z=d.offset.top,D=z+d.proportions.height;switch(f){case "fit":return v<=
h&&j<=s&&z<=m&&p<=D;case "intersect":return v<h+b.helperProportions.width/2&&j-b.helperProportions.width/2<s&&z<m+b.helperProportions.height/2&&p-b.helperProportions.height/2<D;case "pointer":return a.ui.isOver((b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,z,v,d.proportions.height,d.proportions.width);case "touch":return(m>=z&&m<=D||p>=z&&p<=D||m<z&&p>D)&&(h>=v&&h<=s||j>=v&&j<=s||h<v&&j>s);
default:return false}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,d){var f=a.ui.ddmanager.droppables[b.options.scope]||[],h=d?d.type:null,j=(b.currentItem||b.element).find(":data(droppable)").andSelf(),m=0;a:for(;m<f.length;m++)if(!(f[m].options.disabled||b&&!f[m].accept.call(f[m].element[0],b.currentItem||b.element))){for(var p=0;p<j.length;p++)if(j[p]==f[m].element[0]){f[m].proportions.height=0;continue a}f[m].visible=f[m].element.css("display")!="none";if(f[m].visible){h==
"mousedown"&&f[m]._activate.call(f[m],d);f[m].offset=f[m].element.offset();f[m].proportions={width:f[m].element[0].offsetWidth,height:f[m].element[0].offsetHeight}}}},drop:function(b,d){var f=false;a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance))f=f||this._drop.call(this,d);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)){this.isout=
1;this.isover=0;this._deactivate.call(this,d)}}});return f},dragStart:function(b,d){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,d)})},drag:function(b,d){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,d);a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var f=a.ui.intersect(b,this,this.options.tolerance);if(f=!f&&this.isover==
1?"isout":f&&this.isover==0?"isover":null){var h;if(this.options.greedy){var j=this.element.parents(":data(droppable):eq(0)");if(j.length){h=a.data(j[0],"droppable");h.greedyChild=f=="isover"?1:0}}if(h&&f=="isover"){h.isover=0;h.isout=1;h._out.call(h,d)}this[f]=1;this[f=="isout"?"isover":"isout"]=0;this[f=="isover"?"_over":"_out"].call(this,d);if(h&&f=="isout"){h.isout=0;h.isover=1;h._over.call(h,d)}}}})},dragStop:function(b,d){b.element.parents(":not(body,html)").unbind("scroll.droppable");b.options.refreshPositions||
a.ui.ddmanager.prepareOffsets(b,d)}}})(jQuery);
(function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var f=this,h=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){/relative/.test(this.element.css("position"))&&a.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),
top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=
this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=h.handles||(!a(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",
nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var j=this.handles.split(",");this.handles={};for(var m=0;m<j.length;m++){var p=a.trim(j[m]),v=a('<div class="ui-resizable-handle '+("ui-resizable-"+p)+'"></div>');/sw|se|ne|nw/.test(p)&&v.css({zIndex:++h.zIndex});"se"==p&&v.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[p]=".ui-resizable-"+p;this.element.append(v)}}this._renderAxis=function(s){s=s||this.element;for(var z in this.handles){if(this.handles[z].constructor==
String)this.handles[z]=a(this.handles[z],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var D=a(this.handles[z],this.element),F=0;F=/sw|ne|nw|se|n|s/.test(z)?D.outerHeight():D.outerWidth();D=["padding",/ne|nw|n/.test(z)?"Top":/se|sw|s/.test(z)?"Bottom":/^e$/.test(z)?"Right":"Left"].join("");s.css(D,F);this._proportionallyResize()}a(this.handles[z])}};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){if(!f.resizing){if(this.className)var s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);f.axis=s&&s[1]?s[1]:"se"}});if(h.autoHide){this._handles.hide();a(this.element).addClass("ui-resizable-autohide").hover(function(){if(!h.disabled){a(this).removeClass("ui-resizable-autohide");f._handles.show()}},function(){if(!h.disabled)if(!f.resizing){a(this).addClass("ui-resizable-autohide");f._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();
var f=function(j){a(j).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){f(this.element);var h=this.element;h.after(this.originalElement.css({position:h.css("position"),width:h.outerWidth(),height:h.outerHeight(),top:h.css("top"),left:h.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);f(this.originalElement);return this},_mouseCapture:function(f){var h=
false;for(var j in this.handles)if(a(this.handles[j])[0]==f.target)h=true;return!this.options.disabled&&h},_mouseStart:function(f){var h=this.options,j=this.element.position(),m=this.element;this.resizing=true;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};if(m.is(".ui-draggable")||/absolute/.test(m.css("position")))m.css({position:"absolute",top:j.top,left:j.left});a.browser.opera&&/relative/.test(m.css("position"))&&m.css({position:"relative",top:"auto",left:"auto"});
this._renderProxy();j=b(this.helper.css("left"));var p=b(this.helper.css("top"));if(h.containment){j+=a(h.containment).scrollLeft()||0;p+=a(h.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:j,top:p};this.size=this._helper?{width:m.outerWidth(),height:m.outerHeight()}:{width:m.width(),height:m.height()};this.originalSize=this._helper?{width:m.outerWidth(),height:m.outerHeight()}:{width:m.width(),height:m.height()};this.originalPosition={left:j,top:p};this.sizeDiff=
{width:m.outerWidth()-m.width(),height:m.outerHeight()-m.height()};this.originalMousePosition={left:f.pageX,top:f.pageY};this.aspectRatio=typeof h.aspectRatio=="number"?h.aspectRatio:this.originalSize.width/this.originalSize.height||1;h=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor",h=="auto"?this.axis+"-resize":h);m.addClass("ui-resizable-resizing");this._propagate("start",f);return true},_mouseDrag:function(f){var h=this.helper,j=this.originalMousePosition,m=this._change[this.axis];
if(!m)return false;j=m.apply(this,[f,f.pageX-j.left||0,f.pageY-j.top||0]);this._updateVirtualBoundaries(f.shiftKey);if(this._aspectRatio||f.shiftKey)j=this._updateRatio(j,f);j=this._respectSize(j,f);this._propagate("resize",f);h.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(j);this._trigger("resize",f,this.ui());return false},
_mouseStop:function(f){this.resizing=false;var h=this.options;if(this._helper){var j=this._proportionallyResizeElements,m=j.length&&/textarea/i.test(j[0].nodeName);j=m&&a.ui.hasScroll(j[0],"left")?0:this.sizeDiff.height;m=m?0:this.sizeDiff.width;m={width:this.helper.width()-m,height:this.helper.height()-j};j=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null;var p=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;h.animate||
this.element.css(a.extend(m,{top:p,left:j}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!h.animate&&this._proportionallyResize()}a("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",f);this._helper&&this.helper.remove();return false},_updateVirtualBoundaries:function(f){var h=this.options,j,m,p;h={minWidth:d(h.minWidth)?h.minWidth:0,maxWidth:d(h.maxWidth)?h.maxWidth:Infinity,minHeight:d(h.minHeight)?h.minHeight:
0,maxHeight:d(h.maxHeight)?h.maxHeight:Infinity};if(this._aspectRatio||f){f=h.minHeight*this.aspectRatio;m=h.minWidth/this.aspectRatio;j=h.maxHeight*this.aspectRatio;p=h.maxWidth/this.aspectRatio;if(f>h.minWidth)h.minWidth=f;if(m>h.minHeight)h.minHeight=m;if(j<h.maxWidth)h.maxWidth=j;if(p<h.maxHeight)h.maxHeight=p}this._vBoundaries=h},_updateCache:function(f){this.offset=this.helper.offset();if(d(f.left))this.position.left=f.left;if(d(f.top))this.position.top=f.top;if(d(f.height))this.size.height=
f.height;if(d(f.width))this.size.width=f.width},_updateRatio:function(f){var h=this.position,j=this.size,m=this.axis;if(d(f.height))f.width=f.height*this.aspectRatio;else if(d(f.width))f.height=f.width/this.aspectRatio;if(m=="sw"){f.left=h.left+(j.width-f.width);f.top=null}if(m=="nw"){f.top=h.top+(j.height-f.height);f.left=h.left+(j.width-f.width)}return f},_respectSize:function(f){var h=this._vBoundaries,j=this.axis,m=d(f.width)&&h.maxWidth&&h.maxWidth<f.width,p=d(f.height)&&h.maxHeight&&h.maxHeight<
f.height,v=d(f.width)&&h.minWidth&&h.minWidth>f.width,s=d(f.height)&&h.minHeight&&h.minHeight>f.height;if(v)f.width=h.minWidth;if(s)f.height=h.minHeight;if(m)f.width=h.maxWidth;if(p)f.height=h.maxHeight;var z=this.originalPosition.left+this.originalSize.width,D=this.position.top+this.size.height,F=/sw|nw|w/.test(j);j=/nw|ne|n/.test(j);if(v&&F)f.left=z-h.minWidth;if(m&&F)f.left=z-h.maxWidth;if(s&&j)f.top=D-h.minHeight;if(p&&j)f.top=D-h.maxHeight;if((h=!f.width&&!f.height)&&!f.left&&f.top)f.top=null;
else if(h&&!f.top&&f.left)f.left=null;return f},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var f=this.helper||this.element,h=0;h<this._proportionallyResizeElements.length;h++){var j=this._proportionallyResizeElements[h];if(!this.borderDif){var m=[j.css("borderTopWidth"),j.css("borderRightWidth"),j.css("borderBottomWidth"),j.css("borderLeftWidth")],p=[j.css("paddingTop"),j.css("paddingRight"),j.css("paddingBottom"),j.css("paddingLeft")];this.borderDif=a.map(m,
function(v,s){var z=parseInt(v,10)||0,D=parseInt(p[s],10)||0;return z+D})}a.browser.msie&&(a(f).is(":hidden")||a(f).parents(":hidden").length)||j.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var f=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var h=a.browser.msie&&a.browser.version<7,j=h?1:0;h=h?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+
h,height:this.element.outerHeight()+h,position:"absolute",left:this.elementOffset.left-j+"px",top:this.elementOffset.top-j+"px",zIndex:++f.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(f,h){return{width:this.originalSize.width+h}},w:function(f,h){return{left:this.originalPosition.left+h,width:this.originalSize.width-h}},n:function(f,h,j){return{top:this.originalPosition.top+j,height:this.originalSize.height-j}},s:function(f,h,j){return{height:this.originalSize.height+
j}},se:function(f,h,j){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[f,h,j]))},sw:function(f,h,j){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[f,h,j]))},ne:function(f,h,j){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[f,h,j]))},nw:function(f,h,j){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[f,h,j]))}},_propagate:function(f,h){a.ui.plugin.call(this,f,[h,this.ui()]);
f!="resize"&&this._trigger(f,h,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.extend(a.ui.resizable,{version:"1.8.16"});a.ui.plugin.add("resizable","alsoResize",{start:function(){var f=a(this).data("resizable").options,h=function(j){a(j).each(function(){var m=a(this);m.data("resizable-alsoresize",{width:parseInt(m.width(),
10),height:parseInt(m.height(),10),left:parseInt(m.css("left"),10),top:parseInt(m.css("top"),10),position:m.css("position")})})};if(typeof f.alsoResize=="object"&&!f.alsoResize.parentNode)if(f.alsoResize.length){f.alsoResize=f.alsoResize[0];h(f.alsoResize)}else a.each(f.alsoResize,function(j){h(j)});else h(f.alsoResize)},resize:function(f,h){var j=a(this).data("resizable"),m=j.options,p=j.originalSize,v=j.originalPosition,s={height:j.size.height-p.height||0,width:j.size.width-p.width||0,top:j.position.top-
v.top||0,left:j.position.left-v.left||0},z=function(D,F){a(D).each(function(){var J=a(this),O=a(this).data("resizable-alsoresize"),q={},r=F&&F.length?F:J.parents(h.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(r,function(C,G){var da=(O[G]||0)+(s[G]||0);if(da&&da>=0)q[G]=da||null});if(a.browser.opera&&/relative/.test(J.css("position"))){j._revertToRelativePosition=true;J.css({position:"absolute",top:"auto",left:"auto"})}J.css(q)})};typeof m.alsoResize=="object"&&
!m.alsoResize.nodeType?a.each(m.alsoResize,function(D,F){z(D,F)}):z(m.alsoResize)},stop:function(){var f=a(this).data("resizable"),h=f.options,j=function(m){a(m).each(function(){var p=a(this);p.css({position:p.data("resizable-alsoresize").position})})};if(f._revertToRelativePosition){f._revertToRelativePosition=false;typeof h.alsoResize=="object"&&!h.alsoResize.nodeType?a.each(h.alsoResize,function(m){j(m)}):j(h.alsoResize)}a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable",
"animate",{stop:function(f){var h=a(this).data("resizable"),j=h.options,m=h._proportionallyResizeElements,p=m.length&&/textarea/i.test(m[0].nodeName),v=p&&a.ui.hasScroll(m[0],"left")?0:h.sizeDiff.height;p={width:h.size.width-(p?0:h.sizeDiff.width),height:h.size.height-v};v=parseInt(h.element.css("left"),10)+(h.position.left-h.originalPosition.left)||null;var s=parseInt(h.element.css("top"),10)+(h.position.top-h.originalPosition.top)||null;h.element.animate(a.extend(p,s&&v?{top:s,left:v}:{}),{duration:j.animateDuration,
easing:j.animateEasing,step:function(){var z={width:parseInt(h.element.css("width"),10),height:parseInt(h.element.css("height"),10),top:parseInt(h.element.css("top"),10),left:parseInt(h.element.css("left"),10)};m&&m.length&&a(m[0]).css({width:z.width,height:z.height});h._updateCache(z);h._propagate("resize",f)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var f=a(this).data("resizable"),h=f.element,j=f.options.containment;if(h=j instanceof a?j.get(0):/parent/.test(j)?h.parent().get(0):
j){f.containerElement=a(h);if(/document/.test(j)||j==document){f.containerOffset={left:0,top:0};f.containerPosition={left:0,top:0};f.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}}else{var m=a(h),p=[];a(["Top","Right","Left","Bottom"]).each(function(z,D){p[z]=b(m.css("padding"+D))});f.containerOffset=m.offset();f.containerPosition=m.position();f.containerSize={height:m.innerHeight()-p[3],width:m.innerWidth()-
p[1]};j=f.containerOffset;var v=f.containerSize.height,s=f.containerSize.width;s=a.ui.hasScroll(h,"left")?h.scrollWidth:s;v=a.ui.hasScroll(h)?h.scrollHeight:v;f.parentData={element:h,left:j.left,top:j.top,width:s,height:v}}}},resize:function(f){var h=a(this).data("resizable"),j=h.options,m=h.containerOffset,p=h.position;f=h._aspectRatio||f.shiftKey;var v={top:0,left:0},s=h.containerElement;if(s[0]!=document&&/static/.test(s.css("position")))v=m;if(p.left<(h._helper?m.left:0)){h.size.width+=h._helper?
h.position.left-m.left:h.position.left-v.left;if(f)h.size.height=h.size.width/j.aspectRatio;h.position.left=j.helper?m.left:0}if(p.top<(h._helper?m.top:0)){h.size.height+=h._helper?h.position.top-m.top:h.position.top;if(f)h.size.width=h.size.height*j.aspectRatio;h.position.top=h._helper?m.top:0}h.offset.left=h.parentData.left+h.position.left;h.offset.top=h.parentData.top+h.position.top;j=Math.abs((h._helper?h.offset.left-v.left:h.offset.left-v.left)+h.sizeDiff.width);m=Math.abs((h._helper?h.offset.top-
v.top:h.offset.top-m.top)+h.sizeDiff.height);p=h.containerElement.get(0)==h.element.parent().get(0);v=/relative|absolute/.test(h.containerElement.css("position"));if(p&&v)j-=h.parentData.left;if(j+h.size.width>=h.parentData.width){h.size.width=h.parentData.width-j;if(f)h.size.height=h.size.width/h.aspectRatio}if(m+h.size.height>=h.parentData.height){h.size.height=h.parentData.height-m;if(f)h.size.width=h.size.height*h.aspectRatio}},stop:function(){var f=a(this).data("resizable"),h=f.options,j=f.containerOffset,
m=f.containerPosition,p=f.containerElement,v=a(f.helper),s=v.offset(),z=v.outerWidth()-f.sizeDiff.width;v=v.outerHeight()-f.sizeDiff.height;f._helper&&!h.animate&&/relative/.test(p.css("position"))&&a(this).css({left:s.left-m.left-j.left,width:z,height:v});f._helper&&!h.animate&&/static/.test(p.css("position"))&&a(this).css({left:s.left-m.left-j.left,width:z,height:v})}});a.ui.plugin.add("resizable","ghost",{start:function(){var f=a(this).data("resizable"),h=f.options,j=f.size;f.ghost=f.originalElement.clone();
f.ghost.css({opacity:0.25,display:"block",position:"relative",height:j.height,width:j.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof h.ghost=="string"?h.ghost:"");f.ghost.appendTo(f.helper)},resize:function(){var f=a(this).data("resizable");f.ghost&&f.ghost.css({position:"relative",height:f.size.height,width:f.size.width})},stop:function(){var f=a(this).data("resizable");f.ghost&&f.helper&&f.helper.get(0).removeChild(f.ghost.get(0))}});a.ui.plugin.add("resizable","grid",
{resize:function(){var f=a(this).data("resizable"),h=f.options,j=f.size,m=f.originalSize,p=f.originalPosition,v=f.axis;h.grid=typeof h.grid=="number"?[h.grid,h.grid]:h.grid;var s=Math.round((j.width-m.width)/(h.grid[0]||1))*(h.grid[0]||1);h=Math.round((j.height-m.height)/(h.grid[1]||1))*(h.grid[1]||1);if(/^(se|s|e)$/.test(v)){f.size.width=m.width+s;f.size.height=m.height+h}else if(/^(ne)$/.test(v)){f.size.width=m.width+s;f.size.height=m.height+h;f.position.top=p.top-h}else{if(/^(sw)$/.test(v)){f.size.width=
m.width+s;f.size.height=m.height+h}else{f.size.width=m.width+s;f.size.height=m.height+h;f.position.top=p.top-h}f.position.left=p.left-s}}});var b=function(f){return parseInt(f,10)||0},d=function(f){return!isNaN(parseInt(f,10))}})(jQuery);
(function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=false;var d;this.refresh=function(){d=a(b.options.filter,b.element[0]);d.each(function(){var f=a(this),h=f.offset();a.data(this,"selectable-item",{element:this,$element:f,left:h.left,top:h.top,right:h.left+f.outerWidth(),bottom:h.top+f.outerHeight(),startselected:false,selected:f.hasClass("ui-selected"),
selecting:f.hasClass("ui-selecting"),unselecting:f.hasClass("ui-unselecting")})})};this.refresh();this.selectees=d.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(b){var d=this;this.opos=[b.pageX,
b.pageY];if(!this.options.disabled){var f=this.options;this.selectees=a(f.filter,this.element[0]);this._trigger("start",b);a(f.appendTo).append(this.helper);this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0});f.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var h=a.data(this,"selectable-item");h.startselected=true;if(!b.metaKey){h.$element.removeClass("ui-selected");h.selected=false;h.$element.addClass("ui-unselecting");h.unselecting=true;d._trigger("unselecting",
b,{unselecting:h.element})}});a(b.target).parents().andSelf().each(function(){var h=a.data(this,"selectable-item");if(h){var j=!b.metaKey||!h.$element.hasClass("ui-selected");h.$element.removeClass(j?"ui-unselecting":"ui-selected").addClass(j?"ui-selecting":"ui-unselecting");h.unselecting=!j;h.selecting=j;(h.selected=j)?d._trigger("selecting",b,{selecting:h.element}):d._trigger("unselecting",b,{unselecting:h.element});return false}})}},_mouseDrag:function(b){var d=this;this.dragged=true;if(!this.options.disabled){var f=
this.options,h=this.opos[0],j=this.opos[1],m=b.pageX,p=b.pageY;if(h>m){var v=m;m=h;h=v}if(j>p){v=p;p=j;j=v}this.helper.css({left:h,top:j,width:m-h,height:p-j});this.selectees.each(function(){var s=a.data(this,"selectable-item");if(!(!s||s.element==d.element[0])){var z=false;if(f.tolerance=="touch")z=!(s.left>m||s.right<h||s.top>p||s.bottom<j);else if(f.tolerance=="fit")z=s.left>h&&s.right<m&&s.top>j&&s.bottom<p;if(z){if(s.selected){s.$element.removeClass("ui-selected");s.selected=false}if(s.unselecting){s.$element.removeClass("ui-unselecting");
s.unselecting=false}if(!s.selecting){s.$element.addClass("ui-selecting");s.selecting=true;d._trigger("selecting",b,{selecting:s.element})}}else{if(s.selecting)if(b.metaKey&&s.startselected){s.$element.removeClass("ui-selecting");s.selecting=false;s.$element.addClass("ui-selected");s.selected=true}else{s.$element.removeClass("ui-selecting");s.selecting=false;if(s.startselected){s.$element.addClass("ui-unselecting");s.unselecting=true}d._trigger("unselecting",b,{unselecting:s.element})}if(s.selected)if(!b.metaKey&&
!s.startselected){s.$element.removeClass("ui-selected");s.selected=false;s.$element.addClass("ui-unselecting");s.unselecting=true;d._trigger("unselecting",b,{unselecting:s.element})}}}});return false}},_mouseStop:function(b){var d=this;this.dragged=false;a(".ui-unselecting",this.element[0]).each(function(){var f=a.data(this,"selectable-item");f.$element.removeClass("ui-unselecting");f.unselecting=false;f.startselected=false;d._trigger("unselected",b,{unselected:f.element})});a(".ui-selecting",this.element[0]).each(function(){var f=
a.data(this,"selectable-item");f.$element.removeClass("ui-selecting").addClass("ui-selected");f.selecting=false;f.selected=true;f.startselected=true;d._trigger("selected",b,{selected:f.element})});this._trigger("stop",b);this.helper.remove();return false}});a.extend(a.ui.selectable,{version:"1.8.16"})})(jQuery);
(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var b=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?b.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--)this.items[b].item.removeData("sortable-item");return this},_setOption:function(b,d){if(b===
"disabled"){this.options[b]=d;this.widget()[d?"addClass":"removeClass"]("ui-sortable-disabled")}else a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,d){if(this.reverting)return false;if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(b);var f=null,h=this;a(b.target).parents().each(function(){if(a.data(this,"sortable-item")==h){f=a(this);return false}});if(a.data(b.target,"sortable-item")==h)f=a(b.target);if(!f)return false;if(this.options.handle&&
!d){var j=false;a(this.options.handle,f).find("*").andSelf().each(function(){if(this==b.target)j=true});if(!j)return false}this.currentItem=f;this._removeCurrentsFromItems();return true},_mouseStart:function(b,d,f){d=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-
this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();d.containment&&this._setContainment();if(d.cursor){if(a("body").css("cursor"))this._storedCursor=a("body").css("cursor");a("body").css("cursor",d.cursor)}if(d.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",d.opacity)}if(d.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",d.zIndex)}if(this.scrollParent[0]!=
document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",b,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!f)for(f=this.containers.length-1;f>=0;f--)this.containers[f]._trigger("activate",b,this._uiHash(this));if(a.ui.ddmanager)a.ui.ddmanager.current=this;a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(b);
return true},_mouseDrag:function(b){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var d=this.options,f=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity)this.scrollParent[0].scrollTop=f=this.scrollParent[0].scrollTop+d.scrollSpeed;else if(b.pageY-this.overflowOffset.top<
d.scrollSensitivity)this.scrollParent[0].scrollTop=f=this.scrollParent[0].scrollTop-d.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity)this.scrollParent[0].scrollLeft=f=this.scrollParent[0].scrollLeft+d.scrollSpeed;else if(b.pageX-this.overflowOffset.left<d.scrollSensitivity)this.scrollParent[0].scrollLeft=f=this.scrollParent[0].scrollLeft-d.scrollSpeed}else{if(b.pageY-a(document).scrollTop()<d.scrollSensitivity)f=a(document).scrollTop(a(document).scrollTop()-
d.scrollSpeed);else if(a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity)f=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed);if(b.pageX-a(document).scrollLeft()<d.scrollSensitivity)f=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed);else if(a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity)f=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)}f!==false&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,
b)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(d=this.items.length-1;d>=0;d--){f=this.items[d];var h=f.item[0],j=this._intersectsWithPointer(f);if(j)if(h!=this.currentItem[0]&&this.placeholder[j==1?"next":"prev"]()[0]!=h&&!a.ui.contains(this.placeholder[0],h)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],
h):true)){this.direction=j==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(f))this._rearrange(b,f);else break;this._trigger("change",b,this._uiHash());break}}this._contactContainers(b);a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);this._trigger("sort",b,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(b,d){if(b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var f=this,h=f.placeholder.offset();
f.reverting=true;a(this.helper).animate({left:h.left-this.offset.parent.left-f.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:h.top-this.offset.parent.top-f.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){f._clear(b)})}else this._clear(b,d);return false}},cancel:function(){if(this.dragging){this._mouseUp({target:null});this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):
this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--){this.containers[b]._trigger("deactivate",null,this._uiHash(this));if(this.containers[b].containerCache.over){this.containers[b]._trigger("out",null,this._uiHash(this));this.containers[b].containerCache.over=0}}}if(this.placeholder){this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();a.extend(this,
{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(b){var d=this._getItemsAsjQuery(b&&b.connected),f=[];b=b||{};a(d).each(function(){var h=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);if(h)f.push((b.key||h[1]+"[]")+"="+(b.key&&b.expression?h[1]:h[2]))});!f.length&&b.key&&f.push(b.key+"=");return f.join("&")},
toArray:function(b){var d=this._getItemsAsjQuery(b&&b.connected),f=[];b=b||{};d.each(function(){f.push(a(b.item||this).attr(b.attribute||"id")||"")});return f},_intersectsWith:function(b){var d=this.positionAbs.left,f=d+this.helperProportions.width,h=this.positionAbs.top,j=h+this.helperProportions.height,m=b.left,p=m+b.width,v=b.top,s=v+b.height,z=this.offset.click.top,D=this.offset.click.left;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=
"pointer"&&this.helperProportions[this.floating?"width":"height"]>b[this.floating?"width":"height"]?h+z>v&&h+z<s&&d+D>m&&d+D<p:m<d+this.helperProportions.width/2&&f-this.helperProportions.width/2<p&&v<h+this.helperProportions.height/2&&j-this.helperProportions.height/2<s},_intersectsWithPointer:function(b){var d=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height);b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width);d=d&&b;b=this._getDragVerticalDirection();
var f=this._getDragHorizontalDirection();if(!d)return false;return this.floating?f&&f=="right"||b=="down"?2:1:b&&(b=="down"?2:1)},_intersectsWithSides:function(b){var d=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height);b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width);var f=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();return this.floating&&h?h=="right"&&b||h=="left"&&!b:f&&(f=="down"&&d||f=="up"&&!d)},
_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){this._refreshItems(b);this.refreshPositions();return this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(b){var d=[],f=[],h=this._connectWith();
if(h&&b)for(b=h.length-1;b>=0;b--)for(var j=a(h[b]),m=j.length-1;m>=0;m--){var p=a.data(j[m],"sortable");if(p&&p!=this&&!p.options.disabled)f.push([a.isFunction(p.options.items)?p.options.items.call(p.element):a(p.options.items,p.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),p])}f.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
this]);for(b=f.length-1;b>=0;b--)f[b][0].each(function(){d.push(this)});return a(d)},_removeCurrentsFromItems:function(){for(var b=this.currentItem.find(":data(sortable-item)"),d=0;d<this.items.length;d++)for(var f=0;f<b.length;f++)b[f]==this.items[d].item[0]&&this.items.splice(d,1)},_refreshItems:function(b){this.items=[];this.containers=[this];var d=this.items,f=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),
this]],h=this._connectWith();if(h)for(var j=h.length-1;j>=0;j--)for(var m=a(h[j]),p=m.length-1;p>=0;p--){var v=a.data(m[p],"sortable");if(v&&v!=this&&!v.options.disabled){f.push([a.isFunction(v.options.items)?v.options.items.call(v.element[0],b,{item:this.currentItem}):a(v.options.items,v.element),v]);this.containers.push(v)}}for(j=f.length-1;j>=0;j--){b=f[j][1];h=f[j][0];p=0;for(m=h.length;p<m;p++){v=a(h[p]);v.data("sortable-item",b);d.push({item:v,instance:b,width:0,height:0,left:0,top:0})}}},refreshPositions:function(b){if(this.offsetParent&&
this.helper)this.offset.parent=this._getParentOffset();for(var d=this.items.length-1;d>=0;d--){var f=this.items[d];if(!(f.instance!=this.currentContainer&&this.currentContainer&&f.item[0]!=this.currentItem[0])){var h=this.options.toleranceElement?a(this.options.toleranceElement,f.item):f.item;if(!b){f.width=h.outerWidth();f.height=h.outerHeight()}h=h.offset();f.left=h.left;f.top=h.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(d=
this.containers.length-1;d>=0;d--){h=this.containers[d].element.offset();this.containers[d].containerCache.left=h.left;this.containers[d].containerCache.top=h.top;this.containers[d].containerCache.width=this.containers[d].element.outerWidth();this.containers[d].containerCache.height=this.containers[d].element.outerHeight()}return this},_createPlaceholder:function(b){var d=b||this,f=d.options;if(!f.placeholder||f.placeholder.constructor==String){var h=f.placeholder;f.placeholder={element:function(){var j=
a(document.createElement(d.currentItem[0].nodeName)).addClass(h||d.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!h)j.style.visibility="hidden";return j},update:function(j,m){if(!(h&&!f.forcePlaceholderSize)){m.height()||m.height(d.currentItem.innerHeight()-parseInt(d.currentItem.css("paddingTop")||0,10)-parseInt(d.currentItem.css("paddingBottom")||0,10));m.width()||m.width(d.currentItem.innerWidth()-parseInt(d.currentItem.css("paddingLeft")||0,10)-parseInt(d.currentItem.css("paddingRight")||
0,10))}}}}d.placeholder=a(f.placeholder.element.call(d.element,d.currentItem));d.currentItem.after(d.placeholder);f.placeholder.update(d,d.placeholder)},_contactContainers:function(b){for(var d=null,f=null,h=this.containers.length-1;h>=0;h--)if(!a.ui.contains(this.currentItem[0],this.containers[h].element[0]))if(this._intersectsWith(this.containers[h].containerCache)){if(!(d&&a.ui.contains(this.containers[h].element[0],d.element[0]))){d=this.containers[h];f=h}}else if(this.containers[h].containerCache.over){this.containers[h]._trigger("out",
b,this._uiHash(this));this.containers[h].containerCache.over=0}if(d)if(this.containers.length===1){this.containers[f]._trigger("over",b,this._uiHash(this));this.containers[f].containerCache.over=1}else if(this.currentContainer!=this.containers[f]){d=1E4;h=null;for(var j=this.positionAbs[this.containers[f].floating?"left":"top"],m=this.items.length-1;m>=0;m--)if(a.ui.contains(this.containers[f].element[0],this.items[m].item[0])){var p=this.items[m][this.containers[f].floating?"left":"top"];if(Math.abs(p-
j)<d){d=Math.abs(p-j);h=this.items[m]}}if(h||this.options.dropOnEmpty){this.currentContainer=this.containers[f];h?this._rearrange(b,h,null,true):this._rearrange(b,null,this.containers[f].element,true);this._trigger("change",b,this._uiHash());this.containers[f]._trigger("change",b,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[f]._trigger("over",b,this._uiHash(this));this.containers[f].containerCache.over=1}}},_createHelper:function(b){var d=
this.options;b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],[b,this.currentItem])):d.helper=="clone"?this.currentItem.clone():this.currentItem;b.parents("body").length||a(d.appendTo!="parent"?d.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]);if(b[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(b[0].style.width==
""||d.forceHelperSize)b.width(this.currentItem.width());if(b[0].style.height==""||d.forceHelperSize)b.height(this.currentItem.height());return b},_adjustOffsetFromHelper:function(b){if(typeof b=="string")b=b.split(" ");if(a.isArray(b))b={left:+b[0],top:+b[1]||0};if("left"in b)this.offset.click.left=b.left+this.margins.left;if("right"in b)this.offset.click.left=this.helperProportions.width-b.right+this.margins.left;if("top"in b)this.offset.click.top=b.top+this.margins.top;if("bottom"in b)this.offset.click.top=
this.helperProportions.height-b.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b=
{top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),
10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if(b.containment=="parent")b.containment=this.helper[0].parentNode;if(b.containment=="document"||b.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment=="document"?
document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var d=a(b.containment)[0];b=a(b.containment).offset();var f=a(d).css("overflow")!="hidden";this.containment=[b.left+(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(d).css("borderTopWidth"),
10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,b.left+(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,d){if(!d)d=
this.position;var f=b=="absolute"?1:-1,h=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=/(html|body)/i.test(h[0].tagName);return{top:d.top+this.offset.relative.top*f+this.offset.parent.top*f-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():j?0:h.scrollTop())*f),left:d.left+this.offset.relative.left*f+this.offset.parent.left*f-(a.browser.safari&&
this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:h.scrollLeft())*f)}},_generatePosition:function(b){var d=this.options,f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(f[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();
var j=b.pageX,m=b.pageY;if(this.originalPosition){if(this.containment){if(b.pageX-this.offset.click.left<this.containment[0])j=this.containment[0]+this.offset.click.left;if(b.pageY-this.offset.click.top<this.containment[1])m=this.containment[1]+this.offset.click.top;if(b.pageX-this.offset.click.left>this.containment[2])j=this.containment[2]+this.offset.click.left;if(b.pageY-this.offset.click.top>this.containment[3])m=this.containment[3]+this.offset.click.top}if(d.grid){m=this.originalPageY+Math.round((m-
this.originalPageY)/d.grid[1])*d.grid[1];m=this.containment?!(m-this.offset.click.top<this.containment[1]||m-this.offset.click.top>this.containment[3])?m:!(m-this.offset.click.top<this.containment[1])?m-d.grid[1]:m+d.grid[1]:m;j=this.originalPageX+Math.round((j-this.originalPageX)/d.grid[0])*d.grid[0];j=this.containment?!(j-this.offset.click.left<this.containment[0]||j-this.offset.click.left>this.containment[2])?j:!(j-this.offset.click.left<this.containment[0])?j-d.grid[0]:j+d.grid[0]:j}}return{top:m-
this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():h?0:f.scrollTop()),left:j-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:f.scrollLeft())}},_rearrange:function(b,d,f,h){f?f[0].appendChild(this.placeholder[0]):d.item[0].parentNode.insertBefore(this.placeholder[0],
this.direction=="down"?d.item[0]:d.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var j=this,m=this.counter;window.setTimeout(function(){m==j.counter&&j.refreshPositions(!h)},0)},_clear:function(b,d){this.reverting=false;var f=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var h in this._storedCSS)if(this._storedCSS[h]=="auto"||this._storedCSS[h]=="static")this._storedCSS[h]=
"";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!d&&f.push(function(j){this._trigger("receive",j,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!d)f.push(function(j){this._trigger("update",j,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){d||f.push(function(j){this._trigger("remove",
j,this._uiHash())});for(h=this.containers.length-1;h>=0;h--)if(a.ui.contains(this.containers[h].element[0],this.currentItem[0])&&!d){f.push(function(j){return function(m){j._trigger("receive",m,this._uiHash(this))}}.call(this,this.containers[h]));f.push(function(j){return function(m){j._trigger("update",m,this._uiHash(this))}}.call(this,this.containers[h]))}}for(h=this.containers.length-1;h>=0;h--){d||f.push(function(j){return function(m){j._trigger("deactivate",m,this._uiHash(this))}}.call(this,
this.containers[h]));if(this.containers[h].containerCache.over){f.push(function(j){return function(m){j._trigger("out",m,this._uiHash(this))}}.call(this,this.containers[h]));this.containers[h].containerCache.over=0}}this._storedCursor&&a("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!d){this._trigger("beforeStop",
b,this._uiHash());for(h=0;h<f.length;h++)f[h].call(this,b);this._trigger("stop",b,this._uiHash())}return false}d||this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!d){for(h=0;h<f.length;h++)f[h].call(this,b);this._trigger("stop",b,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},
_uiHash:function(b){var d=b||this;return{helper:d.helper,placeholder:d.placeholder||a([]),position:d.position,originalPosition:d.originalPosition,offset:d.positionAbs,item:d.currentItem,sender:b?b.element:null}}});a.extend(a.ui.sortable,{version:"1.8.16"})})(jQuery);
(function(a,b){var d,f=/:([\w\d]+)/g,h=/\?([^#]*)$/,j=function(q){return Array.prototype.slice.call(q)},m=function(q){return Object.prototype.toString.call(q)==="[object Function]"},p=function(q){return Object.prototype.toString.call(q)==="[object Array]"},v=function(q){return decodeURIComponent((q||"").replace(/\+/g," "))},s=encodeURIComponent,z=function(q){return String(q).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},D=function(q){return function(r,
C){return this.route.apply(this,[q,r,C])}},F={},J=!!(b.history&&history.pushState),O=[];d=function(){var q=j(arguments),r,C;d.apps=d.apps||{};if(q.length===0||q[0]&&m(q[0]))return d.apply(d,["body"].concat(q));else if(typeof(C=q.shift())=="string"){r=d.apps[C]||new d.Application;r.element_selector=C;q.length>0&&a.each(q,function(G,da){r.use(da)});r.element_selector!=C&&delete d.apps[C];return d.apps[r.element_selector]=r}};d.VERSION="0.7.0";d.addLogger=function(q){O.push(q)};d.log=function(){var q=
j(arguments);q.unshift("["+Date()+"]");a.each(O,function(r,C){C.apply(d,q)})};if(typeof b.console!="undefined")m(b.console.log.apply)?d.addLogger(function(){b.console.log.apply(b.console,arguments)}):d.addLogger(function(){b.console.log(arguments)});else typeof console!="undefined"&&d.addLogger(function(){console.log.apply(console,arguments)});a.extend(d,{makeArray:j,isFunction:m,isArray:p});d.Object=function(q){return a.extend(this,q||{})};a.extend(d.Object.prototype,{escapeHTML:z,h:z,toHash:function(){var q=
{};a.each(this,function(r,C){m(C)||(q[r]=C)});return q},toHTML:function(){var q="";a.each(this,function(r,C){m(C)||(q+="<strong>"+r+"</strong> "+C+"<br />")});return q},keys:function(q){var r=[];for(var C in this)if(!m(this[C])||!q)r.push(C);return r},has:function(q){return this[q]&&a.trim(this[q].toString())!==""},join:function(){var q=j(arguments),r=q.shift();return q.join(r)},log:function(){d.log.apply(d,arguments)},toString:function(q){var r=[];a.each(this,function(C,G){if(!m(G)||q)r.push('"'+
C+'": '+G.toString())});return"Sammy.Object: {"+r.join(",")+"}"}});d.DefaultLocationProxy=function(q,r){this.app=q;this.is_native=false;this.has_history=J;this._startPolling(r)};d.DefaultLocationProxy.fullPath=function(q){var r=q.toString().match(/^[^#]*(#.+)$/);return[q.pathname,q.search,r?r[1]:""].join("")};d.DefaultLocationProxy.prototype={bind:function(){var q=this,r=this.app,C=d.DefaultLocationProxy;a(b).bind("hashchange."+this.app.eventNamespace(),function(G,da){if(q.is_native===false&&!da){q.is_native=
true;b.clearInterval(C._interval)}r.trigger("location-changed")});if(J&&!r.disable_push_state){a(b).bind("popstate."+this.app.eventNamespace(),function(){r.trigger("location-changed")});a("a").live("click.history-"+this.app.eventNamespace(),function(G){var da=C.fullPath(this);if(this.hostname==b.location.hostname&&r.lookupRoute("get",da)){G.preventDefault();q.setLocation(da);return false}})}if(!C._bindings)C._bindings=0;C._bindings++},unbind:function(){a(b).unbind("hashchange."+this.app.eventNamespace());
a(b).unbind("popstate."+this.app.eventNamespace());a("a").die("click.history-"+this.app.eventNamespace());d.DefaultLocationProxy._bindings--;d.DefaultLocationProxy._bindings<=0&&b.clearInterval(d.DefaultLocationProxy._interval)},getLocation:function(){return d.DefaultLocationProxy.fullPath(b.location)},setLocation:function(q){if(/^([^#\/]|$)/.test(q))q=J?"/"+q:"#!/"+q;if(q!=this.getLocation())if(J&&/^\//.test(q)){history.pushState({path:q},b.title,q);this.app.trigger("location-changed")}else return b.location=
q},_startPolling:function(q){var r=this;if(!d.DefaultLocationProxy._interval){q||(q=10);var C=function(){var G=r.getLocation();if(typeof d.DefaultLocationProxy._last_location=="undefined"||G!=d.DefaultLocationProxy._last_location)b.setTimeout(function(){a(b).trigger("hashchange",[true])},0);d.DefaultLocationProxy._last_location=G};C();d.DefaultLocationProxy._interval=b.setInterval(C,q)}}};d.Application=function(q){var r=this;this.routes={};this.listeners=new d.Object({});this.arounds=[];this.befores=
[];this.namespace=(new Date).getTime()+"-"+parseInt(Math.random()*1E3,10);this.context_prototype=function(){d.EventContext.apply(this,arguments)};this.context_prototype.prototype=new d.EventContext;m(q)&&q.apply(this,[this]);this._location_proxy||this.setLocationProxy(new d.DefaultLocationProxy(this,this.run_interval_every));this.debug&&this.bindToAllEvents(function(C,G){r.log(r.toString(),C.cleaned_type,G||{})})};d.Application.prototype=a.extend({},d.Object.prototype,{ROUTE_VERBS:["get","post","put",
"delete"],APP_EVENTS:["run","unload","lookup-route","run-route","route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect","location-changed"],_last_route:null,_location_proxy:null,_running:false,element_selector:"body",debug:false,raise_errors:false,run_interval_every:50,disable_push_state:false,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(q){return q?a(this.element_selector).find(q):
a(this.element_selector)},use:function(){var q=j(arguments),r=q.shift(),C=r||"";try{q.unshift(this);if(typeof r=="string"){C="Sammy."+r;r=d[r]}r.apply(this,q)}catch(G){if(typeof r==="undefined")this.error("Plugin Error: called use() but plugin ("+C.toString()+") is not defined",G);else m(r)?this.error("Plugin Error",G):this.error("Plugin Error: called use() but '"+C.toString()+"' is not a function",G)}return this},setLocationProxy:function(q){var r=this._location_proxy;this._location_proxy=q;if(this.isRunning()){r&&
r.unbind();this._location_proxy.bind()}},route:function(q,r,C){var G=this,da=[],ia,la;if(!C&&m(r)){C=r=q;q="any"}q=q.toLowerCase();if(r.constructor==String){for(f.lastIndex=0;(la=f.exec(r))!==null;)da.push(la[1]);r=new RegExp(r.replace(f,"([^/]+)")+"$")}if(typeof C=="string")C=G[C];ia=function(na){var oa={verb:na,path:r,callback:C,param_names:da};G.routes[na]=G.routes[na]||[];G.routes[na].push(oa)};q==="any"?a.each(this.ROUTE_VERBS,function(na,oa){ia(oa)}):ia(q);return this},get:D("get"),post:D("post"),
put:D("put"),del:D("delete"),any:D("any"),mapRoutes:function(q){var r=this;a.each(q,function(C,G){r.route.apply(r,G)});return this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(q,r,C){var G=this;if(typeof C=="undefined")C=r;r=function(da,ia){var la;if(ia&&ia.context){la=ia.context;delete ia.context}else la=new G.context_prototype(G,"bind",da.type,ia,da.target);da.cleaned_type=da.type.replace(G.eventNamespace(),"");C.apply(la,[da,ia])};this.listeners[q]||(this.listeners[q]=
[]);this.listeners[q].push(r);this.isRunning()&&this._listen(q,r);return this},trigger:function(q,r){this.$element().trigger([q,this.eventNamespace()].join("."),[r]);return this},refresh:function(){this.last_location=null;this.trigger("location-changed");return this},before:function(q,r){if(m(q)){r=q;q={}}this.befores.push([q,r]);return this},after:function(q){return this.bind("event-context-after",q)},around:function(q){this.arounds.push(q);return this},isRunning:function(){return this._running},
helpers:function(q){a.extend(this.context_prototype.prototype,q);return this},helper:function(q,r){this.context_prototype.prototype[q]=r;return this},run:function(q){if(this.isRunning())return false;var r=this;a.each(this.listeners.toHash(),function(C,G){a.each(G,function(da,ia){r._listen(C,ia)})});this.trigger("run",{start_url:q});this._running=true;this.last_location=null;!/\#(.+)/.test(this.getLocation())&&typeof q!="undefined"&&this.setLocation(q);this._checkLocation();this._location_proxy.bind();
this.bind("location-changed",function(){r._checkLocation()});this.bind("submit",function(C){return r._checkFormSubmission(a(C.target).closest("form"))===false?C.preventDefault():false});a(b).bind("beforeunload",function(){r.unload()});return this.trigger("changed")},unload:function(){if(!this.isRunning())return false;var q=this;this.trigger("unload");this._location_proxy.unbind();this.$element().unbind("submit").removeClass(q.eventNamespace());a.each(this.listeners.toHash(),function(r,C){a.each(C,
function(G,da){q._unlisten(r,da)})});this._running=false;return this},bindToAllEvents:function(q){var r=this;a.each(this.APP_EVENTS,function(C,G){r.bind(G,q)});a.each(this.listeners.keys(true),function(C,G){a.inArray(G,r.APP_EVENTS)==-1&&r.bind(G,q)});return this},routablePath:function(q){return q.replace(h,"")},lookupRoute:function(q,r){var C=false,G=0,da,ia;if(typeof this.routes[q]!="undefined")for(da=this.routes[q].length;G<da;G++){ia=this.routes[q][G];if(this.routablePath(r).match(ia.path)){C=
ia;break}}return C},runRoute:function(q,r,C,G){var da=this,ia=this.lookupRoute(q,r),la,na,oa,Ca,Ua,Va,Y;this.log("runRoute",[q,r].join(" "));this.trigger("run-route",{verb:q,path:r,params:C});if(typeof C=="undefined")C={};a.extend(C,this._parseQueryString(r));if(ia){this.trigger("route-found",{route:ia});if((Va=ia.path.exec(this.routablePath(r)))!==null){Va.shift();a.each(Va,function(X,g){if(ia.param_names[X])C[ia.param_names[X]]=v(g);else{if(!C.splat)C.splat=[];C.splat.push(v(g))}})}la=new this.context_prototype(this,
q,r,C,G);G=this.arounds.slice(0);oa=this.befores.slice(0);Ua=[la].concat(C.splat);na=function(){for(var X;oa.length>0;){Ca=oa.shift();if(da.contextMatchesOptions(la,Ca[0])){X=Ca[1].apply(la,[la]);if(X===false)return false}}da.last_route=ia;la.trigger("event-context-before",{context:la});X=ia.callback.apply(la,Ua);la.trigger("event-context-after",{context:la});return X};a.each(G.reverse(),function(X,g){var E=na;na=function(){return g.apply(la,[E])}});try{Y=na()}catch(T){this.error(["500 Error",q,r].join(" "),
T)}return Y}else return this.notFound(q,r)},contextMatchesOptions:function(q,r,C){r=r;if(typeof r==="undefined"||r=={})return true;if(typeof C==="undefined")C=true;if(typeof r==="string"||m(r.test))r={path:r};if(r.only)return this.contextMatchesOptions(q,r.only,true);else if(r.except)return this.contextMatchesOptions(q,r.except,false);var G=true,da=true;if(r.path){if(!m(r.path.test))r.path=new RegExp(r.path.toString()+"$");G=r.path.test(q.path)}if(r.verb)da=typeof r.verb==="string"?r.verb===q.verb:
r.verb.indexOf(q.verb)>-1;return C?da&&G:!(da&&G)},getLocation:function(){return this._location_proxy.getLocation()},setLocation:function(q){return this._location_proxy.setLocation(q)},swap:function(q){return this.$element().html(q)},templateCache:function(q,r){return typeof r!="undefined"?(F[q]=r):F[q]},clearTemplateCache:function(){return F={}},notFound:function(q,r){var C=this.error(["404 Not Found",q,r].join(" "));return q==="get"?C:true},error:function(q,r){r||(r=new Error);r.message=[q,r.message].join(" ");
this.trigger("error",{message:r.message,error:r});if(this.raise_errors)throw r;else this.log(r.message,r)},_checkLocation:function(){var q,r;q=this.getLocation();if(!this.last_location||this.last_location[0]!="get"||this.last_location[1]!=q){this.last_location=["get",q];r=this.runRoute("get",q)}return r},_getFormVerb:function(q){q=a(q);var r,C;C=q.find('input[name="_method"]');if(C.length>0)r=C.val();r||(r=q[0].getAttribute("method"));if(!r||r=="")r="get";return a.trim(r.toString().toLowerCase())},
_checkFormSubmission:function(q){var r,C,G;this.trigger("check-form-submission",{form:q});r=a(q);C=r.attr("action")||"";G=this._getFormVerb(r);this.log("_checkFormSubmission",r,C,G);if(G==="get"){this.setLocation(C+"?"+this._serializeFormParams(r));q=false}else{r=a.extend({},this._parseFormParams(r));q=this.runRoute(G,C,r,q.get(0))}return typeof q=="undefined"?false:q},_serializeFormParams:function(q){var r="";q=q.serializeArray();var C;if(q.length>0){r=this._encodeFormPair(q[0].name,q[0].value);
for(C=1;C<q.length;C++)r=r+"&"+this._encodeFormPair(q[C].name,q[C].value)}return r},_encodeFormPair:function(q,r){return s(q)+"="+s(r)},_parseFormParams:function(q){var r={};q=q.serializeArray();var C;for(C=0;C<q.length;C++)r=this._parseParamPair(r,q[C].name,q[C].value);return r},_parseQueryString:function(q){var r={},C,G;if(q=q.match(h)){q=q[1].split("&");for(G=0;G<q.length;G++){C=q[G].split("=");r=this._parseParamPair(r,v(C[0]),v(C[1]||""))}}return r},_parseParamPair:function(q,r,C){if(q[r])if(p(q[r]))q[r].push(C);
else q[r]=[q[r],C];else q[r]=C;return q},_listen:function(q,r){return this.$element().bind([q,this.eventNamespace()].join("."),r)},_unlisten:function(q,r){return this.$element().unbind([q,this.eventNamespace()].join("."),r)}});d.RenderContext=function(q){this.event_context=q;this.callbacks=[];this.content=this.previous_content=null;this.waiting=this.next_engine=false};d.RenderContext.prototype=a.extend({},d.Object.prototype,{then:function(q){if(!m(q))if(typeof q==="string"&&q in this.event_context){var r=
this.event_context[q];q=function(G){return r.apply(this.event_context,[G])}}else return this;var C=this;if(this.waiting)this.callbacks.push(q);else{this.wait();b.setTimeout(function(){var G=q.apply(C,[C.content,C.previous_content]);G!==false&&C.next(G)},0)}return this},wait:function(){this.waiting=true},next:function(q){this.waiting=false;if(typeof q!=="undefined"){this.previous_content=this.content;this.content=q}this.callbacks.length>0&&this.then(this.callbacks.shift())},load:function(q,r,C){var G=
this;return this.then(function(){var da,ia,la;if(m(r)){C=r;r={}}else r=a.extend({},r);C&&this.then(C);if(typeof q==="string"){da=(la=q.match(/\.json$/)||r.json)&&r.cache===true||r.cache!==false;G.next_engine=G.event_context.engineFor(q);delete r.cache;delete r.json;if(r.engine){G.next_engine=r.engine;delete r.engine}if(da&&(ia=this.event_context.app.templateCache(q)))return ia;this.wait();a.ajax(a.extend({url:q,data:{},dataType:la?"json":null,type:"get",success:function(na){da&&G.event_context.app.templateCache(q,
na);G.next(na)}},r));return false}else{if(q.nodeType)return q.innerHTML;if(q.selector){G.next_engine=q.attr("data-engine");return r.clone===false?q.remove()[0].innerHTML.toString():q[0].innerHTML.toString()}}})},loadPartials:function(q){if(q){this.partials=this.partials||{};for(name in q)this.load(q[name]).then(function(r){this.partials[name]=r})}return this},render:function(q,r,C,G){return m(q)&&!r?this.then(q):this.loadPartials(G).load(q).interpolate(r,q).then(C)},partial:function(q,r){return this.render(q,
r).swap()},send:function(){var q=this,r=j(arguments),C=r.shift();if(p(r[0]))r=r[0];return this.then(function(){r.push(function(G){q.next(G)});q.wait();C.apply(C,r);return false})},collect:function(q,r,C){var G=this,da=function(){if(m(q)){r=q;q=this.content}var ia=[],la=false;a.each(q,function(na,oa){var Ca=r.apply(G,[na,oa]);if(Ca.jquery&&Ca.length==1){Ca=Ca[0];la=true}ia.push(Ca);return Ca});return la?ia:ia.join("")};return C?da():this.then(da)},renderEach:function(q,r,C,G){if(p(r)){G=C;C=r;r=null}return this.load(q).then(function(da){var ia=
this;C||(C=p(this.previous_content)?this.previous_content:[]);if(G)a.each(C,function(la,na){var oa={},Ca=this.next_engine||q;r?(oa[r]=na):(oa=na);G(na,ia.event_context.interpolate(da,oa,Ca))});else return this.collect(C,function(la,na){var oa={},Ca=this.next_engine||q;r?(oa[r]=na):(oa=na);return this.event_context.interpolate(da,oa,Ca)},true)})},interpolate:function(q,r,C){var G=this;return this.then(function(da,ia){if(!q&&ia)q=ia;if(this.next_engine){r=this.next_engine;this.next_engine=false}var la=
G.event_context.interpolate(da,q,r,this.partials);return C?ia+la:la})},swap:function(){return this.then(function(q){this.event_context.swap(q)}).trigger("changed",{})},appendTo:function(q){return this.then(function(r){a(q).append(r)}).trigger("changed",{})},prependTo:function(q){return this.then(function(r){a(q).prepend(r)}).trigger("changed",{})},replace:function(q){return this.then(function(r){a(q).html(r)}).trigger("changed",{})},trigger:function(q,r){return this.then(function(C){if(typeof r==
"undefined")r={content:C};this.event_context.trigger(q,r)})}});d.EventContext=function(q,r,C,G,da){this.app=q;this.verb=r;this.path=C;this.params=new d.Object(G);this.target=da};d.EventContext.prototype=a.extend({},d.Object.prototype,{$element:function(){return this.app.$element(j(arguments).shift())},engineFor:function(q){var r;if(m(q))return q;q=(q||this.app.template_engine).toString();if(r=q.match(/\.([^\.\?\#]+)$/))q=r[1];if(q&&m(this[q]))return this[q];if(this.app.template_engine)return this.engineFor(this.app.template_engine);
return function(C){return C}},interpolate:function(q,r,C,G){return this.engineFor(C).apply(this,[q,r,G])},render:function(q,r,C,G){return(new d.RenderContext(this)).render(q,r,C,G)},renderEach:function(q,r,C,G){return(new d.RenderContext(this)).renderEach(q,r,C,G)},load:function(q,r,C){return(new d.RenderContext(this)).load(q,r,C)},partial:function(q,r){return(new d.RenderContext(this)).partial(q,r)},send:function(){var q=new d.RenderContext(this);return q.send.apply(q,arguments)},redirect:function(){var q;
q=j(arguments);var r=this.app.getLocation(),C=q.length;if(C>1){for(var G=0,da=[],ia=[],la={},na=false;G<C;G++)if(typeof q[G]=="string")da.push(q[G]);else{a.extend(la,q[G]);na=true}q=da.join("/");if(na){for(var oa in la)ia.push(this.app._encodeFormPair(oa,la[oa]));q+="?"+ia.join("&")}}else q=q[0];this.trigger("redirect",{to:q});this.app.last_location=[this.verb,this.path];this.app.setLocation(q);(new RegExp(q)).test(r)&&this.app.trigger("location-changed")},trigger:function(q,r){if(typeof r=="undefined")r=
{};if(!r.context)r.context=this;return this.app.trigger(q,r)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(q){return this.app.swap(q)},notFound:function(){return this.app.notFound(this.verb,this.path)},json:function(q){return a.parseJSON(q)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}});a.sammy=b.Sammy=d})(jQuery,window);
(function(a){Sammy=Sammy||{};Sammy.Title=function(){this.setTitle=function(b){this.title_function=a.isFunction(b)?b:function(d){return[b,d].join(" ")}};this.helper("title",function(){var b=a.makeArray(arguments).join(" ");if(this.app.title_function)b=this.app.title_function(b);document.title=b})}})(jQuery);
(function(a){function b(f){f=unescape(f);return f==="true"?true:f==="false"?false:f}function d(f,h,j){var m;if(h.match(/^[^\[]+$/))f[h]=b(j);else if(m=h.match(/^([^\[]+)\[\](.*)$/)){h=m[1];m=m[2];if(f[h]&&!a.isArray(f[h]))throw"400 Bad Request";if(m){m=m.match(/^\[([^\]]+)\](.*)$/);if(!m)throw"400 Bad Request";if(f[h])f[h][f[h].length-1][m[1]]?f[h].push(d({},m[1]+m[2],j)):a.extend(true,f[h][f[h].length-1],d({},m[1]+m[2],j));else f[h]=[d({},m[1]+m[2],j)]}else if(f[h])f[h].push(b(j));else f[h]=[b(j)]}else if(m=
h.match(/^([^\[]+)\[([^\[]+)\](.*)$/)){h=m[1];m=m[2]+m[3];if(f[h]&&a.isArray(f[h]))throw"400 Bad Request";if(f[h])a.extend(true,f[h],d(f[h],m,j));else f[h]=d({},m,j)}return f}Sammy=Sammy||{};Sammy.NestedParams=function(f){f._parseParamPair=d}})(jQuery);
(function(){if(!window.JSON)window.JSON={};(function(){function a(s){return s<10?"0"+s:s}function b(s){h.lastIndex=0;return h.test(s)?'"'+s.replace(h,function(z){var D=p[z];return typeof D==="string"?D:"\\u"+("0000"+z.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+s+'"'}function d(s,z){var D,F,J,O,q=j,r,C=z[s];if(C&&typeof C==="object"&&typeof C.toJSON==="function")C=C.toJSON(s);if(typeof v==="function")C=v.call(z,s,C);switch(typeof C){case "string":return b(C);case "number":return isFinite(C)?String(C):
"null";case "boolean":case "null":return String(C);case "object":if(!C)return"null";j+=m;r=[];if(Object.prototype.toString.apply(C)==="[object Array]"){O=C.length;for(D=0;D<O;D+=1)r[D]=d(D,C)||"null";J=r.length===0?"[]":j?"[\n"+j+r.join(",\n"+j)+"\n"+q+"]":"["+r.join(",")+"]";j=q;return J}if(v&&typeof v==="object"){O=v.length;for(D=0;D<O;D+=1){F=v[D];if(typeof F==="string")if(J=d(F,C))r.push(b(F)+(j?": ":":")+J)}}else for(F in C)if(Object.hasOwnProperty.call(C,F))if(J=d(F,C))r.push(b(F)+(j?": ":":")+
J);J=r.length===0?"{}":j?"{\n"+j+r.join(",\n"+j)+"\n"+q+"}":"{"+r.join(",")+"}";j=q;return J}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z"};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j,m,p={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},v;if(typeof JSON.stringify!=="function")JSON.stringify=function(s,z,D){var F;m=j="";if(typeof D==="number")for(F=0;F<D;F+=1)m+=" ";else if(typeof D==="string")m=D;if((v=z)&&typeof z!=="function"&&(typeof z!=="object"||typeof z.length!=="number"))throw new Error("JSON.stringify");return d("",
{"":s})};if(typeof JSON.parse!=="function")JSON.parse=function(s,z){function D(J,O){var q,r,C=J[O];if(C&&typeof C==="object")for(q in C)if(Object.hasOwnProperty.call(C,q)){r=D(C,q);if(r!==undefined)C[q]=r;else delete C[q]}return z.call(J,O,C)}var F;f.lastIndex=0;if(f.test(s))s=s.replace(f,function(J){return"\\u"+("0000"+J.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(s.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){F=eval("("+s+")");return typeof z==="function"?D({"":F},""):F}throw new SyntaxError("JSON.parse");}})();Sammy=Sammy||{};Sammy.JSON=function(a){a.helpers({json:function(b){return typeof b=="string"?JSON.parse(b):JSON.stringify(b)}})}})(jQuery);
var Mustache=function(){var a=function(){};a.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":true},context:{},render:function(b,d,f,h){if(!h){this.context=d;this.buffer=[]}if(!this.includes("",b))if(h)return b;else{this.send(b);return}b=this.render_pragmas(b);b=this.render_section(b,d,f);if(h)return this.render_tags(b,d,f,h);this.render_tags(b,d,f,h)},send:function(b){b!==""&&this.buffer.push(b)},render_pragmas:function(b){if(!this.includes("%",b))return b;
var d=this;return b.replace(new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag,"g"),function(f,h,j){if(!d.pragmas_implemented[h])throw{message:"This implementation of mustache doesn't understand the '"+h+"' pragma"};d.pragmas[h]={};if(j){f=j.split("=");d.pragmas[h][f[0]]=f[1]}return""})},render_partial:function(b,d,f){b=this.trim(b);if(!f||f[b]===undefined)throw{message:"unknown_partial '"+b+"'"};if(typeof d[b]!="object")return this.render(f[b],d,f,true);return this.render(f[b],d[b],f,
true)},render_section:function(b,d,f){if(!this.includes("#",b)&&!this.includes("^",b))return b;var h=this;return b.replace(new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg"),function(j,m,p,v){j=h.find(p,d);if(m=="^")return!j||h.is_array(j)&&j.length===0?h.render(v,d,f,true):"";else if(m=="#")return h.is_array(j)?h.map(j,function(s){return h.render(v,h.create_context(s),f,true)}).join(""):h.is_object(j)?h.render(v,h.create_context(j),
f,true):typeof j==="function"?j.call(d,v,function(s){return h.render(s,d,f,true)}):j?h.render(v,d,f,true):""})},render_tags:function(b,d,f,h){var j=this,m=function(){return new RegExp(j.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+j.ctag+"+","g")},p=m(),v=function(z,D,F){switch(D){case "!":return"";case "=":j.set_delimiters(F);p=m();return"";case ">":return j.render_partial(F,d,f);case "{":return j.find(F,d);default:return j.escape(j.find(F,d))}};b=b.split("\n");for(var s=0;s<b.length;s++){b[s]=b[s].replace(p,
v,this);h||this.send(b[s])}if(h)return b.join("\n")},set_delimiters:function(b){b=b.split(" ");this.otag=this.escape_regex(b[0]);this.ctag=this.escape_regex(b[1])},escape_regex:function(b){if(!arguments.callee.sRE)arguments.callee.sRE=new RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");return b.replace(arguments.callee.sRE,"\\$1")},find:function(b,d){b=this.trim(b);var f;if(d[b]===false||d[b]===0||d[b])f=d[b];else if(this.context[b]===false||this.context[b]===0||this.context[b])f=
this.context[b];if(typeof f==="function")return f.apply(d);if(f!==undefined)return f;return""},includes:function(b,d){return d.indexOf(this.otag+b)!=-1},escape:function(b){return String(b===null?"":b).replace(/&(?!\w+;)|["'<>\\]/g,function(d){switch(d){case "&":return"&amp;";case "\\":return"\\\\";case '"':return"&quot;";case "'":return"&#39;";case "<":return"&lt;";case ">":return"&gt;";default:return d}})},create_context:function(b){if(this.is_object(b))return b;else{var d=".";if(this.pragmas["IMPLICIT-ITERATOR"])d=
this.pragmas["IMPLICIT-ITERATOR"].iterator;var f={};f[d]=b;return f}},is_object:function(b){return b&&typeof b=="object"},is_array:function(b){return Object.prototype.toString.call(b)==="[object Array]"},trim:function(b){return b.replace(/^\s*|\s*$/g,"")},map:function(b,d){if(typeof b.map=="function")return b.map(d);else{for(var f=[],h=b.length,j=0;j<h;j++)f.push(d(b[j]));return f}}};return{name:"mustache.js",version:"0.3.1-dev",to_html:function(b,d,f,h){var j=new a;if(h)j.send=h;j.render(b,d,f);
if(!h)return j.buffer.join("\n")}}}();(function(a){Sammy=Sammy||{};Sammy.Mustache=function(b,d){d||(d="mustache");b.helper(d,function(f,h,j){h=a.extend({},this,h);j=a.extend({},h.partials,j);return Mustache.to_html(f,h,j)})}})(jQuery);
window.Modernizr=function(a,b,d){function f(){p.input=function(T){for(var X=0,g=T.length;X<g;X++)ia[T[X]]=!!(T[X]in F);return ia}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));p.inputtypes=function(T){for(var X=0,g,E,Q,P=T.length;X<P;X++){F.setAttribute("type",E=T[X]);(g=F.type!=="text")&&(F.value=J,F.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(E)&&F.style.WebkitAppearance!==d?(v.appendChild(F),Q=b.defaultView,g=Q.getComputedStyle&&
Q.getComputedStyle(F,null).WebkitAppearance!=="textfield"&&F.offsetHeight!==0,v.removeChild(F)):/^(search|tel)$/.test(E)||(/^(url|email)$/.test(E)?(g=F.checkValidity&&F.checkValidity()===false):/^color$/.test(E)?(v.appendChild(F),g=F.value!=J,v.removeChild(F)):(g=F.value!=J)));da[T[X]]=!!g}return da}("search tel url email datetime date month week time datetime-local number range color".split(" "))}function h(T,X){var g=T.charAt(0).toUpperCase()+T.substr(1);g=(T+" "+r.join(g+" ")+g).split(" ");return!!j(g,
X)}function j(T,X){for(var g in T)if(D[T[g]]!==d&&(!X||X(T[g],z)))return true}function m(T,X){return typeof T===X}var p={},v=b.documentElement,s=b.head||b.getElementsByTagName("head")[0],z=b.createElement("modernizr"),D=z.style,F=b.createElement("input"),J=":)",O=Object.prototype.toString,q=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),r="Webkit Moz O ms Khtml".split(" "),C={svg:"http://www.w3.org/2000/svg"},G={},da={},ia={},la=[],na,oa=function(T){var X=b.createElement("style"),g=b.createElement("div");
X.textContent=T+"{#modernizr{height:3px}}";s.appendChild(X);g.id="modernizr";v.appendChild(g);T=g.offsetHeight===3;X.parentNode.removeChild(X);g.parentNode.removeChild(g);return!!T},Ca=function(){var T={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(X,g){g=g||b.createElement(T[X]||"div");var E=(X="on"+X)in g;E||(g.setAttribute||(g=b.createElement("div")),g.setAttribute&&g.removeAttribute&&(g.setAttribute(X,""),E=m(g[X],"function"),m(g[X],
d)||(g[X]=d),g.removeAttribute(X)));return E}}(),Ua={}.hasOwnProperty,Va;m(Ua,d)||m(Ua.call,d)?(Va=function(T,X){return X in T&&m(T.constructor.prototype[X],d)}):(Va=function(T,X){return Ua.call(T,X)});G.flexbox=function(){var T=b.createElement("div"),X=b.createElement("div");(function(E,Q,P,V){Q+=":";E.style.cssText=(Q+q.join(P+";"+Q)).slice(0,-Q.length)+(V||"")})(T,"display","box","width:42px;padding:0;");X.style.cssText=q.join("box-flex:1;")+"width:10px;";T.appendChild(X);v.appendChild(T);var g=
X.offsetWidth===42;T.removeChild(X);v.removeChild(T);return g};G.canvas=function(){var T=b.createElement("canvas");return T.getContext&&T.getContext("2d")};G.canvastext=function(){return p.canvas&&m(b.createElement("canvas").getContext("2d").fillText,"function")};G.webgl=function(){return!!a.WebGLRenderingContext};G.touch=function(){return"ontouchstart"in a||oa("@media ("+q.join("touch-enabled),(")+"modernizr)")};G.geolocation=function(){return!!navigator.geolocation};G.postmessage=function(){return!!a.postMessage};
G.websqldatabase=function(){return!!a.openDatabase};G.indexedDB=function(){for(var T=-1,X=r.length;++T<X;){var g=r[T].toLowerCase();if(a[g+"_indexedDB"]||a[g+"IndexedDB"])return true}return false};G.hashchange=function(){return Ca("hashchange",a)&&(b.documentMode===d||b.documentMode>7)};G.history=function(){return!!(a.history&&history.pushState)};G.draganddrop=function(){return Ca("dragstart")&&Ca("drop")};G.websockets=function(){return"WebSocket"in a};G.rgba=function(){D.cssText="background-color:rgba(150,255,150,.5)";
return(""+D.backgroundColor).indexOf("rgba")!==-1};G.hsla=function(){D.cssText="background-color:hsla(120,40%,100%,.5)";return(""+D.backgroundColor).indexOf("rgba")!==-1||(""+D.backgroundColor).indexOf("hsla")!==-1};G.multiplebgs=function(){D.cssText="background:url(//:),url(//:),red url(//:)";return/(url\s*\(.*?){3}/.test(D.background)};G.backgroundsize=function(){return h("backgroundSize")};G.borderimage=function(){return h("borderImage")};G.borderradius=function(){return h("borderRadius","",function(T){return(""+
T).indexOf("orderRadius")!==-1})};G.boxshadow=function(){return h("boxShadow")};G.textshadow=function(){return b.createElement("div").style.textShadow===""};G.opacity=function(){var T=q.join("opacity:.55;")+"";D.cssText=T;return/^0.55$/.test(D.opacity)};G.cssanimations=function(){return h("animationName")};G.csscolumns=function(){return h("columnCount")};G.cssgradients=function(){var T=("background-image:"+q.join("gradient(linear,left top,right bottom,from(#9f9),to(white));background-image:")+q.join("linear-gradient(left top,#9f9, white);background-image:")).slice(0,
-17);D.cssText=T;return(""+D.backgroundImage).indexOf("gradient")!==-1};G.cssreflections=function(){return h("boxReflect")};G.csstransforms=function(){return!!j(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])};G.csstransforms3d=function(){var T=!!j(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);T&&"webkitPerspective"in v.style&&(T=oa("@media ("+q.join("transform-3d),(")+"modernizr)"));return T};G.csstransitions=function(){return h("transitionProperty")};
G.fontface=function(){var T,X,g=s||v,E=b.createElement("style");X=b.implementation||{hasFeature:function(){return false}};E.type="text/css";g.insertBefore(E,g.firstChild);T=E.sheet||E.styleSheet;X=(X.hasFeature("CSS2","")?function(Q){if(!T||!Q)return false;var P=false;try{T.insertRule(Q,0);P=/src/i.test(T.cssRules[0].cssText);T.deleteRule(T.cssRules.length-1)}catch(V){}return P}:function(Q){if(!T||!Q)return false;T.cssText=Q;return T.cssText.length!==0&&/src/i.test(T.cssText)&&T.cssText.replace(/\r+|\n+/g,
"").indexOf(Q.split(" ")[0])===0})('@font-face { font-family: "font"; src: url(data:,); }');g.removeChild(E);return X};G.video=function(){var T=b.createElement("video"),X=!!T.canPlayType;if(X){X=new Boolean(X);X.ogg=T.canPlayType('video/ogg; codecs="theora"');X.h264=T.canPlayType('video/mp4; codecs="avc1.42E01E"')||T.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');X.webm=T.canPlayType('video/webm; codecs="vp8, vorbis"')}return X};G.audio=function(){var T=b.createElement("audio"),X=!!T.canPlayType;
X&&(X=new Boolean(X),X.ogg=T.canPlayType('audio/ogg; codecs="vorbis"'),X.mp3=T.canPlayType("audio/mpeg;"),X.wav=T.canPlayType('audio/wav; codecs="1"'),X.m4a=T.canPlayType("audio/x-m4a;")||T.canPlayType("audio/aac;"));return X};G.localstorage=function(){try{return!!localStorage.getItem}catch(T){return false}};G.sessionstorage=function(){try{return!!sessionStorage.getItem}catch(T){return false}};G.webWorkers=function(){return!!a.Worker};G.applicationcache=function(){return!!a.applicationCache};G.svg=
function(){return!!b.createElementNS&&!!b.createElementNS(C.svg,"svg").createSVGRect};G.inlinesvg=function(){var T=b.createElement("div");T.innerHTML="<svg/>";return(T.firstChild&&T.firstChild.namespaceURI)==C.svg};G.smil=function(){return!!b.createElementNS&&/SVG/.test(O.call(b.createElementNS(C.svg,"animate")))};G.svgclippaths=function(){return!!b.createElementNS&&/SVG/.test(O.call(b.createElementNS(C.svg,"clipPath")))};for(var Y in G)Va(G,Y)&&(na=Y.toLowerCase(),p[na]=G[Y](),la.push((p[na]?"":
"no-")+na));p.input||f();p.crosswindowmessaging=p.postmessage;p.historymanagement=p.history;p.addTest=function(T,X){T=T.toLowerCase();if(!p[T]){X=!!X();v.className+=" "+(X?"":"no-")+T;p[T]=X;return p}};D.cssText="";z=F=null;a.attachEvent&&function(){var T=b.createElement("div");T.innerHTML="<elem></elem>";return T.childNodes.length!==1}()&&function(T,X){function g(ta,Ja){for(var ua=-1,ya=ta.length,cb,gb=[];++ua<ya;){cb=ta[ua];(Ja=cb.media||Ja)!="screen"&&gb.push(g(cb.imports,Ja),cb.cssText)}return gb.join("")}
function E(ta){for(var Ja=-1;++Ja<P;)ta.createElement(Q[Ja])}var Q="abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video".split("|"),P=Q.length,V=new RegExp("(^|\\s)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)","gi"),ga=new RegExp("<(/*)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)",
"gi"),fa=new RegExp("(^|[^\\n]*?\\s)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)([^\\n]*)({[\\n\\w\\W]*?})","gi"),pa=X.createDocumentFragment(),Ha=X.documentElement,La=Ha.firstChild,Ia=X.createElement("body"),Ma=X.createElement("style"),Wa;E(X);E(pa);La.insertBefore(Ma,La.firstChild);Ma.media="print";T.attachEvent("onbeforeprint",function(){var ta=-1,Ja=g(X.styleSheets,"all"),ua=[],ya;for(Wa=Wa||X.body;(ya=
fa.exec(Ja))!=null;)ua.push((ya[1]+ya[2]+ya[3]).replace(V,"$1.iepp_$2")+ya[4]);for(Ma.styleSheet.cssText=ua.join("\n");++ta<P;){Ja=X.getElementsByTagName(Q[ta]);ua=Ja.length;for(ya=-1;++ya<ua;)Ja[ya].className.indexOf("iepp_")<0&&(Ja[ya].className+=" iepp_"+Q[ta])}pa.appendChild(Wa);Ha.appendChild(Ia);Ia.className=Wa.className;Ia.innerHTML=Wa.innerHTML.replace(ga,"<$1font")});T.attachEvent("onafterprint",function(){Ia.innerHTML="";Ha.removeChild(Ia);Ha.appendChild(Wa);Ma.styleSheet.cssText=""})}(a,
b);p._enableHTML5=true;p._version="1.7";v.className=v.className.replace(/\bno-js\b/,"")+" js "+la.join(" ");return p}(this,this.document);
var Model=function(a,b){var d=function(f){this.attributes=jQuery.extend({},f);this.changes={};this.errors=new Model.Errors(this);this.uid=[a,Model.UID.generate()].join("-");jQuery.isFunction(this.initialize)&&this.initialize()};Model.Module.extend.call(d,Model.Module);d._name=a;d.collection=[];d.unique_key="id";d.extend(Model.Callbacks).extend(Model.ClassMethods);d.prototype=new Model.Base;d.prototype.constructor=d;jQuery.isFunction(b)&&b.call(d,d,d.prototype);return d};
Model.Callbacks={bind:function(a,b){this.callbacks=this.callbacks||{};this.callbacks[a]=this.callbacks[a]||[];this.callbacks[a].push(b);return this},trigger:function(a,b){this.callbacks=this.callbacks||{};var d=this.callbacks[a];if(d)for(var f=0;f<d.length;f++)d[f].apply(this,b||[]);return this},unbind:function(a,b){this.callbacks=this.callbacks||{};if(b)for(var d=this.callbacks[a]||[],f=0;f<d.length;f++)d[f]===b&&this.callbacks[a].splice(f,1);else delete this.callbacks[a];return this}};
Model.ClassMethods={add:function(a){var b=a.id();if(jQuery.inArray(a,this.collection)===-1&&!(b&&this.find(b))){this.collection.push(a);this.trigger("add",[a])}return this},all:function(){return this.collection.slice()},chain:function(a){return jQuery.extend({},this,{collection:a})},count:function(){return this.all().length},detect:function(a){for(var b=this.all(),d,f=0,h=b.length;f<h;f++){d=b[f];if(a.call(d,d,f))return d}},each:function(a,b){for(var d=this.all(),f=0,h=d.length;f<h;f++)a.call(b||
d[f],d[f],f,d);return this},find:function(a){return this.detect(function(){return this.id()==a})},first:function(){return this.all()[0]},load:function(a){if(this._persistence){var b=this;this._persistence.read(function(d){for(var f=0,h=d.length;f<h;f++)b.add(d[f]);a&&a.call(b,d)})}return this},last:function(){var a=this.all();return a[a.length-1]},map:function(a,b){for(var d=this.all(),f=[],h=0,j=d.length;h<j;h++)f.push(a.call(b||d[h],d[h],h,d));return f},persistence:function(a){if(arguments.length==
0)return this._persistence;else{var b=Array.prototype.slice.call(arguments,1);b.unshift(this);this._persistence=a.apply(a,b);return this}},pluck:function(a){for(var b=this.all(),d=[],f=0,h=b.length;f<h;f++)d.push(b[f].attr(a));return d},remove:function(a){for(var b,d=0,f=this.collection.length;d<f;d++)if(this.collection[d]===a){b=d;break}if(b!=undefined){this.collection.splice(b,1);this.trigger("remove",[a]);return true}else return false},reverse:function(){return this.chain(this.all().reverse())},
select:function(a,b){for(var d=this.all(),f=[],h,j=0,m=d.length;j<m;j++){h=d[j];if(a.call(b||h,h,j,d))f.push(h)}return this.chain(f)},sort:function(a){return this.chain(this.all().sort(a))},sortBy:function(a){var b=jQuery.isFunction(a);return this.sort(function(d,f){var h=b?a.call(d):d.attr(a),j=b?a.call(f):f.attr(a);return h<j?-1:h>j?1:0})},use:function(a){var b=Array.prototype.slice.call(arguments,1);b.unshift(this);a.apply(this,b);return this}};
Model.Errors=function(a){this.errors={};this.model=a};Model.Errors.prototype={add:function(a,b){this.errors[a]||(this.errors[a]=[]);this.errors[a].push(b);return this},all:function(){return this.errors},clear:function(){this.errors={};return this},each:function(a){for(var b in this.errors)for(var d=0;d<this.errors[b].length;d++)a.call(this,b,this.errors[b][d]);return this},on:function(a){return this.errors[a]||[]},size:function(){var a=0;this.each(function(){a++});return a}};
Model.InstanceMethods={asJSON:function(){return this.attr()},attr:function(a,b){if(arguments.length===0)return jQuery.extend({},this.attributes,this.changes);else if(arguments.length===2){if(this.attributes[a]===b)delete this.changes[a];else this.changes[a]=b;return this}else if(typeof a==="object"){for(var d in a)this.attr(d,a[d]);return this}else return a in this.changes?this.changes[a]:this.attributes[a]},callPersistMethod:function(a,b){var d=this,f=function(h){if(h){d.merge(d.changes).reset();
a==="destroy"?d.constructor.remove(d):d.constructor.add(d);d.trigger(a)}var j;if(b)j=b.apply(d,arguments);return j};this.constructor._persistence?this.constructor._persistence[a](this,f):f.call(this,true)},destroy:function(a){this.callPersistMethod("destroy",a);return this},id:function(){return this.attributes[this.constructor.unique_key]},merge:function(a){jQuery.extend(this.attributes,a);return this},newRecord:function(){return this.id()===undefined},reset:function(){this.errors.clear();this.changes=
{};return this},save:function(a){if(this.valid())this.callPersistMethod(this.newRecord()?"create":"update",a);else a&&a(false);return this},valid:function(){this.errors.clear();this.validate();return this.errors.size()===0},validate:function(){return this}};
Model.localStorage=function(a){if(!window.localStorage)return{create:function(h,j){j(true)},destroy:function(h,j){j(true)},read:function(h){h([])},update:function(h,j){j(true)}};var b=[a._name,"collection"].join("-"),d=function(){var h=localStorage[b];return h?JSON.parse(h):[]},f=function(h){localStorage.setItem(h.uid,JSON.stringify(h.asJSON()));h=h.uid;var j=d();if(jQuery.inArray(h,j)===-1){j.push(h);localStorage.setItem(b,JSON.stringify(j))}};return{create:function(h,j){f(h);j(true)},destroy:function(h,
j){localStorage.removeItem(h.uid);var m=h.uid,p=d();m=jQuery.inArray(m,p);if(m>-1){p.splice(m,1);localStorage.setItem(b,JSON.stringify(p))}j(true)},read:function(h){if(!h)return false;for(var j=a.map(function(){return this.uid}),m=d(),p=[],v,s,z=0,D=m.length;z<D;z++){s=m[z];if(jQuery.inArray(s,j)==-1){v=JSON.parse(localStorage[s]);v=new a(v);v.uid=s;p.push(v)}}h(p)},update:function(h,j){f(h);j(true)}}};Model.Log=function(){window.console&&window.console.log.apply(window.console,arguments)};
Model.Module={extend:function(a){jQuery.extend(this,a);return this},include:function(a){jQuery.extend(this.prototype,a);return this}};
Model.REST=function(a,b,d){var f=/:([\w\d]+)/g,h=function(){for(var j=[],m;(m=f.exec(b))!==null;)j.push(m[1]);return j}();return jQuery.extend({path:function(j){var m=b;jQuery.each(h,function(p,v){m=m.replace(":"+v,j.attributes[v])});return m},create:function(j,m){return this.xhr("POST",this.create_path(j),j,m)},create_path:function(j){return this.path(j)},destroy:function(j,m){return this.xhr("DELETE",this.destroy_path(j),j,m)},destroy_path:function(j){return this.update_path(j)},params:function(j){var m;
if(j){var p=j.asJSON();delete p[j.constructor.unique_key];m={};m[j.constructor._name.toLowerCase()]=p}else m=null;if(jQuery.ajaxSettings.data)m=jQuery.extend({},jQuery.ajaxSettings.data,m);return m},read:function(j){return this.xhr("GET",this.read_path(),null,function(m,p,v){v=jQuery.makeArray(v);m=[];p=0;for(var s=v.length;p<s;p++)m.push(new a(v[p]));j(m)})},read_path:function(){return b},update:function(j,m){return this.xhr("PUT",this.update_path(j),j,m)},update_path:function(j){return[this.path(j),
j.id()].join("/")},xhr:function(j,m,p,v){var s=this,z=j=="GET"?undefined:this.params(p);return jQuery.ajax({type:j,url:m+".json",dataType:"json",data:z,dataFilter:function(D){return/\S/.test(D)?D:undefined},complete:function(D,F){s.xhrComplete(D,F,p,v)}})},xhrComplete:function(j,m,p,v){var s=Model.REST["handle"+j.status];s&&s.call(this,j,m,p);m=m==="success";s=Model.REST.parseResponseData(j);m&&p&&s&&p.attr(s);v&&v.call(p,m,j,s)}},d)};Model.RestPersistence=Model.REST;
Model.REST.handle422=function(a,b,d){if(a=Model.REST.parseResponseData(a)){d.errors.clear();for(var f in a)for(b=0;b<a[f].length;b++)d.errors.add(f,a[f][b])}};Model.REST.parseResponseData=function(a){try{return/\S/.test(a.responseText)?jQuery.parseJSON(a.responseText):undefined}catch(b){Model.Log(b)}};Model.UID={counter:0,generate:function(){return[(new Date).valueOf(),this.counter++].join("-")},reset:function(){this.counter=0;return this}};Model.VERSION="0.10.1";
Model.Base=function(){function a(){}a.prototype=jQuery.extend({},Model.Callbacks,Model.InstanceMethods);return a}();
Model.SinatraREST=function(a,b,d){var f=/:([\w\d]+)/g,h=function(){for(var j=[],m;(m=f.exec(b))!==null;)j.push(m[1]);return j}();return jQuery.extend({path:function(j){var m=b;jQuery.each(h,function(p,v){m=m.replace(":"+v,j.attributes[v])});return m},create:function(j,m){return this.xhr("POST",this.create_path(j),j,m)},create_path:function(j){return this.path(j)},destroy:function(j,m){return this.xhr("DELETE",this.destroy_path(j),j,m)},destroy_path:function(j){return this.update_path(j)},params:function(j){var m;
if(j){var p=j.asJSON();delete p[j.constructor.unique_key];m={};m[j.constructor._name.toLowerCase()]=p}else m=null;if(jQuery.ajaxSettings.data)m=jQuery.extend({},jQuery.ajaxSettings.data,m);return m},read:function(j){return this.xhr("GET",this.read_path(),null,function(m,p,v){v=jQuery.makeArray(v);m=[];p=0;for(var s=v.length;p<s;p++)m.push(new a(v[p]));j(m)})},read_path:function(){return b},update:function(j,m){return this.xhr("PUT",this.update_path(j),j,m)},update_path:function(j){return[this.path(j),
j.id()].join("/")},xhr:function(j,m,p,v){var s=this,z=j=="GET"?undefined:this.params(p);return jQuery.ajax({type:j,url:m+".json",dataType:"json",data:z,complete:function(D,F){s.xhrComplete(D,F,p,v)}})},xhrComplete:function(j,m,p,v){var s=Model.REST["handle"+j.status];s&&s.call(this,j,m,p);m=m==="success";s=Model.REST.parseResponseData(j);m&&p&&s&&p.attr(s);v&&v.call(p,m,j,s)}},d)};
var CodeMirror=function(){function a(g,E){function Q(e){Ya=null;var k={line:0,ch:0};ga(k,{line:W.length-1,ch:W[W.length-1].text.length},Y(e),k,k);Ya=new m}function P(){if(ha.readOnly!="nocursor"){!Sa&&ha.onFocus&&ha.onFocus(Za);Sa=true;ua();if(ma.className.search(/\bCodeMirror-focused\b/)==-1)ma.className+=" CodeMirror-focused";dc()}}function V(){Sa&&ha.onBlur&&ha.onBlur(Za);clearInterval(bc);hb=null;Sa=false;ma.className=ma.className.replace(" CodeMirror-focused","")}function ga(e,k,l,n,o){if(Ya){for(var t=
[],w=e.line,x=k.line+1;w<x;++w)t.push(W[w].text);for(Ya.addChange(e.line,l.length,t);Ya.done.length>ha.undoDepth;)Ya.done.shift()}La(e,k,l,n,o)}function fa(e,k){var l=e.pop();if(l){for(var n=[],o=l.start+l.added,t=l.start;t<o;++t)n.push(W[t].text);k.push({start:l.start,added:l.old.length,old:n});t=l.start+l.old.length-1;n=n[n.length-1];var w=l.old[l.old.length-1];if(w)if(n){for(var x=n.length,B=w.length;x>=0&&B>=0;--x,--B)if(n.charAt(x)!=w.charAt(B))break;n=B+1}else n=w.length;else n=n?n.length:0;
t=Fa({line:t,ch:n});La({line:l.start,ch:0},{line:o-1,ch:W[o-1].text.length},l.old,t,t)}}function pa(){fa(Ya.done,Ya.undone)}function Ha(){fa(Ya.undone,Ya.done)}function La(e,k,l,n,o){for(var t=false,w=Eb.length,x=e.line;x<k.line;++x)if(W[x].text.length==w){t=true;break}var B=k.line-e.line;x=W[e.line];var H=W[k.line];if(x==H)if(l.length==1)x.replace(e.ch,k.ch,l[0]);else{H=x.split(k.ch,l[l.length-1]);var S=[e.line+1,B];x.replace(e.ch,x.text.length,l[0]);x=1;for(var ba=l.length-1;x<ba;++x)S.push(new h(l[x]));
S.push(H);W.splice.apply(W,S)}else if(l.length==1){x.replace(e.ch,x.text.length,l[0]+H.text.slice(k.ch));W.splice(e.line+1,B)}else{S=[e.line+1,B-1];x.replace(e.ch,x.text.length,l[0]);H.replace(0,k.ch,l[l.length-1]);x=1;for(ba=l.length-1;x<ba;++x)S.push(new h(l[x]));W.splice.apply(W,S)}x=e.line;for(ba=x+l.length;x<ba;++x){H=W[x].text;if(H.length>w){Eb=H;w=H.length;t=false}}if(t){x=w=0;for(ba=W.length;x<ba;++x){H=W[x].text;if(H.length>w){w=H.length;Eb=H}}}t=[];B=l.length-B-1;x=0;for(H=bb.length;x<H;++x){w=
bb[x];if(w<e.line)t.push(w);else w>k.line&&t.push(w+B)}l.length&&t.push(e.line);bb=t;Kb(100);Qa.push({from:e.line,to:k.line+1,diff:B});pb={from:e,to:k,text:l};xb(n,o,R.from.line<=Math.min(k.line,k.line+B)?R.from.line:R.from.line+B,R.to.line<=Math.min(k.line,k.line+B)?R.to.line:R.to.line+B);Ab.style.height=W.length*$a()+2*Xa.offsetTop+"px"}function Ia(e,k,l){function n(t){if(q(t,k))return t;if(!q(l,t))return o;var w=t.line+e.length-(l.line-k.line)-1,x=t.ch;if(t.line==l.line)x+=e[e.length-1].length-
(l.ch-(l.line==k.line?k.ch:0));return{line:w,ch:x}}k=Fa(k);l=l?Fa(l):k;e=Y(e);var o;Wa(e,k,l,function(t){o=t;return{from:n(R.from),to:n(R.to)}});return o}function Ma(e,k){Wa(Y(e),R.from,R.to,function(l){return k=="end"?{from:l,to:l}:k=="start"?{from:R.from,to:R.from}:{from:R.from,to:l}})}function Wa(e,k,l,n){n=n({line:k.line+e.length-1,ch:e.length==1?e[0].length+k.ch:e[e.length-1].length});ga(k,l,e,n.from,n.to)}function ta(e,k){var l=e.line,n=k.line;if(l==n)return W[l].text.slice(e.ch,k.ch);var o=
[W[l].text.slice(e.ch)];for(l=l+1;l<n;++l)o.push(W[l].text);o.push(W[n].text.slice(0,k.ch));return o.join("\n")}function Ja(){return ta(R.from,R.to)}function ua(){Pb||ac.set(2E3,function(){Yb();cb();Sa&&ua();Zb()})}function ya(e){function k(){Yb();var n=cb();if(n=="moved"&&e)Ua[e]=true;if(!n&&!l){l=true;ac.set(80,k)}else{Pb=false;ua()}Zb()}var l=false;Pb=true;ac.set(20,k)}function cb(){function e(va,wa){for(var u=0;;){var y=l.indexOf("\n",u);if(y==-1||(l.charAt(y-1)=="\r"?y-1:y)>=va)return{line:wa,
ch:va-u};++wa;u=y+1}}if(!Ta){var k=false,l=za.value,n=T(za);if(!n)return false;k=Ka.text!=l;var o=ub,t=k||n.start!=Ka.start||n.end!=(o?Ka.start:Ka.end);if(!t&&!o)return false;if(k){hb=ub=null;if(ha.readOnly){ab=true;return"changed"}}var w=e(n.start,Ka.from),x=e(n.end,Ka.from);if(o){w=n.start==o.anchor?x:w;x=hb?R.to:n.start==o.anchor?w:x;if(!q(w,x)){ub=null;R.inverted=false;o=w;w=x;x=o}}if(w.line==x.line&&w.line==R.from.line&&w.line==R.to.line&&!hb)ab=false;if(k){o=0;for(var B=l.length,H=Math.min(B,
Ka.text.length),S,ba=Ka.from,ea=-1;o<H&&(S=l.charAt(o))==Ka.text.charAt(o);){++o;if(S=="\n"){ba++;ea=o}}H=ea>-1?o-ea:o;for(var Da=Ka.to-1,ra=Ka.text.length;;){S=Ka.text.charAt(ra);S=="\n"&&Da--;if(l.charAt(B)!=S){++B;++ra;break}if(ra<=o||B<=o)break;--B;--ra}ea=Ka.text.lastIndexOf("\n",ra-1);ga({line:ba,ch:H},{line:Da,ch:ea==-1?ra:ra-ea-1},Y(l.slice(o,B)),w,x);if(ba!=Da||w.line!=ba)ab=true}else xb(w,x);Ka.text=l;Ka.start=n.start;Ka.end=n.end;return k?"changed":t?"moved":false}}function gb(){for(var e=
[],k=Math.max(0,R.from.line-1),l=Math.min(W.length,R.to.line+2),n=k;n<l;++n)e.push(W[n].text);e=za.value=e.join(na);var o=R.from.ch,t=R.to.ch;for(n=k;n<R.from.line;++n)o+=na.length+W[n].text.length;for(n=k;n<R.to.line;++n)t+=na.length+W[n].text.length;Ka={text:e,from:k,to:l,start:o,end:t};X(za,o,ub?o:t)}function kb(){ha.readOnly!="nocursor"&&za.focus()}function Fb(){var e=Wb(R.inverted?R.from:R.to);return Rb(e.x,e.y,e.x,e.yBot)}function Rb(e,k,l,n){var o=Xa.offsetLeft,t=Xa.offsetTop,w=$a();k+=t;n+=
t;e+=o;l+=o;var x=ma.clientHeight,B=ma.scrollTop;o=false;t=true;if(k<B){ma.scrollTop=Math.max(0,k-2*w);o=true}else if(n>B+x){ma.scrollTop=n+w-x;o=true}k=ma.clientWidth;n=ma.scrollLeft;if(e<n){ma.scrollLeft=Math.max(0,e-10);o=true}else if(l>k+n){ma.scrollLeft=l+10-k;o=true;if(l>Ab.clientWidth)t=false}o&&ha.onScroll&&ha.onScroll(Za);return t}function Sb(){var e=$a(),k=ma.scrollTop-Xa.offsetTop;return{from:Math.min(W.length,Math.max(0,Math.floor(k/e))),to:Math.min(W.length,Math.ceil((k+ma.clientHeight)/
e))}}function lb(e){if(ma.clientWidth){for(var k=e===true?[]:[{from:Ba,to:ib,domStart:0}],l=0,n=e.length||0;l<n;++l){for(var o=e[l],t=[],w=o.diff||0,x=0,B=k.length;x<B;++x){var H=k[x];if(o.to<=H.from)t.push({from:H.from+w,to:H.to+w,domStart:H.domStart});else if(H.to<=o.from)t.push(H);else{o.from>H.from&&t.push({from:H.from,to:o.from,domStart:H.domStart});o.to<H.to&&t.push({from:o.to+w,to:H.to+w,domStart:H.domStart+(o.to-H.from)})}}k=t}w=Sb();o=Math.min(Ba,Math.max(w.from-3,0));t=Math.min(W.length,
Math.max(ib,w.to+3));e=[];x=0;B=ib-Ba;var S=o,ba=0;l=0;for(n=k.length;l<n;++l){H=k[l];if(!(H.to<=o)){if(H.from>=t)break;if(H.domStart>x||H.from>S){e.push({from:S,to:H.from,domSize:H.domStart-x,domStart:x});ba+=H.from-S}S=H.to;x=H.domStart+(H.to-H.from)}}if(x!=B||S!=t){ba+=Math.abs(t-S);e.push({from:S,to:t,domSize:B-x,domStart:x})}if(e.length){Na.style.display="none";if(ba>(w.to-w.from)*0.3){H=o=Math.max(w.from-10,0);k=t=Math.min(w.to+7,W.length);l=[];n={line:H,ch:0};n=q(R.from,n)&&!q(R.to,n);for(H=
H;H<k;++H){x=w=null;if(n){w=0;if(R.to.line==H){n=false;x=R.to.ch}}else if(R.from.line==H)if(R.to.line==H){w=R.from.ch;x=R.to.ch}else{n=true;w=R.from.ch}l.push(W[H].getHTML(w,x,true))}Na.innerHTML=l.join("")}else{k=R.from.line;l=R.to.line;n=0;H=ia&&mb.createElement("div");w=0;for(x=e.length;w<x;++w){B=e[w];S=B.to-B.from-B.domSize;ba=Na.childNodes[B.domStart+B.domSize+n]||null;if(ia)for(var ea=Math.max(-S,B.domSize);ea>0;--ea)Na.removeChild(ba?ba.previousSibling:Na.lastChild);else if(S){for(ea=Math.max(0,
S);ea>0;--ea)Na.insertBefore(mb.createElement("pre"),ba);for(ea=Math.max(0,-S);ea>0;--ea)Na.removeChild(ba?ba.previousSibling:Na.lastChild)}var Da=Na.childNodes[B.domStart+n],ra=k<B.from&&l>=B.from;for(ea=B.from;ea<B.to;++ea){var va=null,wa=null;if(ra){va=0;if(l==ea){ra=false;wa=R.to.ch}}else if(k==ea)if(l==ea){va=R.from.ch;wa=R.to.ch}else{ra=true;va=R.from.ch}if(ia){H.innerHTML=W[ea].getHTML(va,wa,true);Na.insertBefore(H.firstChild,ba)}else{Da.innerHTML=W[ea].getHTML(va,wa,false);Da.className=W[ea].className||
"";Da=Da.nextSibling}}n+=S}}Na.style.display="";k=o!=Ba||t!=ib||kc!=ma.clientHeight;Ba=o;ib=t;Lb.style.top=o*$a()+"px";if(k){kc=ma.clientHeight;Ab.style.height=W.length*$a()+2*Xa.offsetTop+"px";Gb()}o=Jb(Eb);Xa.style.width=o>ma.clientWidth?o+"px":"";if(Na.childNodes.length!=ib-Ba)throw new Error("BAD PATCH! "+JSON.stringify(e)+" size="+(ib-Ba)+" nodes="+Na.childNodes.length);Hb()}}else Ba=ib=0}function Gb(){if(ha.gutter||ha.lineNumbers){var e=Lb.offsetHeight,k=ma.clientHeight;nb.style.height=(e-k<
2?k:e)+"px";e=[];for(k=Ba;k<ib;++k){var l=W[k].gutterMarker,n=ha.lineNumbers?k+ha.firstLineNumber:null;if(l&&l.text)n=l.text.replace("%N%",n!=null?n:"");else if(n==null)n="\u00a0";e.push(l&&l.style?'<pre class="'+l.style+'">':"<pre>",n,"</pre>")}nb.style.display="none";Mb.innerHTML=e.join("");e=String(W.length).length;k=Mb.firstChild;l=k.textContent||k.innerText||k.nodeValue||"";for(n="";l.length+n.length<e;)n+="\u00a0";n&&k.insertBefore(mb.createTextNode(n),k.firstChild);nb.style.display="";Xa.style.marginLeft=
nb.offsetWidth+"px"}}function Hb(){var e=R.inverted?R.from:R.to,k=Ub(e.line,e.ch)+"px";e=(e.line-Ba)*$a()+"px";$b.style.top=e;if(O(R.from,R.to)){ob.style.top=e;ob.style.left=k;ob.style.display=""}else ob.style.display="none"}function rb(e,k){var l=hb&&Fa(hb);if(l)if(q(l,e))e=l;else if(q(k,l))k=l;xb(e,k)}function xb(e,k,l,n){if(!(O(R.from,e)&&O(R.to,k))){if(q(k,e)){var o=k;k=e;e=o}o=O(R.to,k);var t=O(R.from,e);if(O(e,k))R.inverted=false;else if(o&&!t)R.inverted=true;else if(t&&!o)R.inverted=false;
if(l==null){l=R.from.line;n=R.to.line}if(O(e,k))O(R.from,R.to)||Qa.push({from:l,to:n+1});else if(O(R.from,R.to))Qa.push({from:e.line,to:k.line+1});else{O(e,R.from)||(e.line<l?Qa.push({from:e.line,to:Math.min(k.line,l)+1}):Qa.push({from:l,to:Math.min(n,e.line)+1}));O(k,R.to)||(k.line<n?Qa.push({from:Math.max(l,e.line),to:n+1}):Qa.push({from:Math.max(e.line,n),to:k.line+1}))}R.from=e;R.to=k;db=true}}function yb(e,k,l){e=Fa({line:e,ch:k||0});(l?rb:xb)(e,e)}function zb(e){return Math.max(0,Math.min(e,
W.length-1))}function Fa(e){if(e.line<0)return{line:0,ch:0};if(e.line>=W.length)return{line:W.length-1,ch:W[W.length-1].text.length};var k=e.ch,l=W[e.line].text.length;return k==null||k>l?{line:e.line,ch:l}:k<0?{line:e.line,ch:0}:e}function lc(e){rb({line:e,ch:0},{line:e,ch:W[e].text.length})}function sb(e,k){if(k=="smart")if(Pa.indent)var l=hc(e);else k="prev";var n=W[e],o=n.indentation(),t=n.text.match(/^\s*/)[0],w;if(k=="prev")w=e?W[e-1].indentation():0;else if(k=="smart")w=Pa.indent(l,n.text.slice(t.length));
else if(k=="add")w=o+ha.indentUnit;else if(k=="subtract")w=o-ha.indentUnit;w=Math.max(0,w);if(w-o){o="";l=0;if(ha.indentWithTabs)for(n=Math.floor(w/oa);n;--n){l+=oa;o+="\t"}for(;l<w;){++l;o+=" "}}else{if(R.from.line!=e&&R.to.line!=e)return;o=t}Ia(o,{line:e,ch:0},{line:e,ch:t.length})}function ec(){Pa=a.getMode(ha,ha.mode);for(var e=0,k=W.length;e<k;++e)W[e].stateAfter=null;bb=[0];Kb()}function Tb(e,k,l){function n(x,B,H,S){x=W[x];B=x.addMark(B,H,S);B.line=x;o.push(B)}e=Fa(e);k=Fa(k);var o=[];if(e.line==
k.line)n(e.line,e.ch,k.ch,l);else{n(e.line,e.ch,null,l);for(var t=e.line+1,w=k.line;t<w;++t)n(t,0,null,l);n(k.line,0,k.ch,l)}Qa.push({from:e.line,to:k.line+1});return function(){for(var x,B,H=0;H<o.length;++H){var S=o[H],ba=C(W,S.line);S.line.removeMark(S);if(ba>-1){if(x==null)x=ba;B=ba}}x!=null&&Qa.push({from:x,to:B+1})}}function Jb(e){eb.innerHTML="<pre><span>x</span></pre>";eb.firstChild.firstChild.firstChild.nodeValue=e;return eb.firstChild.firstChild.offsetWidth||10}function Ub(e,k){if(k==0)return 0;
eb.innerHTML="<pre><span>"+W[e].getHTML(null,null,false,k)+"</span></pre>";return eb.firstChild.firstChild.offsetWidth}function Vb(e,k){function l(S){eb.innerHTML="<pre><span>"+n.getHTML(null,null,false,S)+"</span></pre>";return eb.firstChild.firstChild.offsetWidth}if(k<=0)return 0;for(var n=W[e],o=0,t=0,w=n.text.length,x,B=Math.min(w,Math.ceil(k/Jb("x")));;){var H=l(B);if(H<=k&&B<w)B=Math.min(w,Math.ceil(B*1.2));else{x=H;w=B;break}}if(k>x)return w;B=Math.floor(w*0.8);H=l(B);if(H<k){o=B;t=H}for(;;){if(w-
o<=1)return x-k>k-t?o:w;B=Math.ceil((o+w)/2);H=l(B);if(H>k){w=B;x=H}else{o=B;t=H}}}function Wb(e,k){var l=$a(),n=e.line-(k?Ba:0);return{x:Ub(e.line,e.ch),y:n*l,yBot:(n+1)*l}}function fc(e){e=Wb(e,true);var k=J(Xa);return{x:k.left+e.x,y:k.top+e.y,yBot:k.top+e.yBot}}function $a(){var e=Na.childNodes.length;if(e)return Na.offsetHeight/e||1;eb.innerHTML="<pre>x</pre>";return eb.firstChild.offsetHeight||1}function tb(e,k){var l=J(ma,true),n=e.e.clientX,o=e.e.clientY;if(!k&&(n-l.left>ma.clientWidth||o-
l.top>ma.clientHeight))return null;l=J(Xa,true);o=Ba+Math.floor((o-l.top)/$a());return Fa({line:o,ch:Vb(zb(o),n-l.left)})}function gc(e){function k(){za.value!=o&&qa(Ma)(za.value,"end");za.style.cssText=n;Ta=false;gb();ua()}var l=tb(e);if(!(!l||window.opera)){if(O(R.from,R.to)||q(l,R.from)||!q(l,R.to))yb(l.line,l.ch);var n=za.style.cssText;za.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.pageY()-1)+"px; left: "+(e.pageX()-1)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden;";
var o=za.value=Ja();kb();X(za,0,za.value.length);Ta=true;if(la){e.stop();var t=z(window,"mouseup",function(){t();setTimeout(k,20)},true)}else setTimeout(k,50)}}function dc(){clearInterval(bc);var e=true;ob.style.visibility="";bc=setInterval(function(){ob.style.visibility=(e=!e)?"":"hidden"},650)}function Ra(e){function k(wa,u,y){if(wa.text){var K=wa.styles;wa=w?0:wa.text.length-1;for(var L,I=w?0:K.length-2,M=w?K.length:-2;I!=M;I+=2*x){var U=K[I];if(K[I+1]!=null&&K[I+1]!=ba)wa+=x*U.length;else for(var aa=
w?0:U.length-1,ka=w?U.length:-1;aa!=ka;aa+=x,wa+=x)if(wa>=u&&wa<y&&Da.test(L=U.charAt(aa))){var Ga=c[L];if(Ga.charAt(1)==">"==w)ea.push(L);else if(ea.pop()!=Ga.charAt(0))return{pos:wa,match:false};else if(!ea.length)return{pos:wa,match:true}}}}}var l=R.inverted?R.from:R.to,n=W[l.line],o=l.ch-1,t=o>=0&&c[n.text.charAt(o)]||c[n.text.charAt(++o)];if(t){t.charAt(0);var w=t.charAt(1)==">",x=w?1:-1,B=n.styles,H=o+1;t=0;for(var S=B.length;t<S;t+=2)if((H-=B[t].length)<=0){var ba=B[t+1];break}var ea=[n.text.charAt(o)],
Da=/[(){}[\]]/;t=l.line;for(S=w?Math.min(t+50,W.length):Math.max(-1,t-50);t!=S;t+=x){n=W[t];B=t==l.line;if(n=k(n,B&&w?o+1:0,B&&!w?o:n.text.length)){ba=n.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var ra=Tb({line:l.line,ch:o},{line:l.line,ch:o+1},ba),va=Tb({line:t,ch:n.pos},{line:t,ch:n.pos+1},ba);l=qa(function(){ra();va()});if(e)setTimeout(l,800);else qb=l;break}}}}function Xb(e){for(var k,l,n=e;n>e-40;--n){if(n==0)return 0;var o=W[n-1];if(o.stateAfter)return n;o=o.indentation();
if(l==null||k>o){l=n;k=o}}return l}function hc(e){var k=Xb(e),l=k&&W[k-1].stateAfter;l=l?b(Pa,l):d(Pa);for(k=k;k<e;++k){var n=W[k];n.highlight(Pa,l);n.stateAfter=b(Pa,l)}W[e].stateAfter||bb.push(e);return l}function mc(){for(var e=+new Date+ha.workTime,k=false;bb.length;){var l=W[Ba].stateAfter?bb.pop():Ba;if(!(l>=W.length)){k=true;var n=Xb(l),o=n&&W[n-1].stateAfter;o=o?b(Pa,o):d(Pa);n=n;for(var t=W.length;n<t;++n){var w=W[n],x=w.stateAfter;if(+new Date>e){bb.push(n);Kb(ha.workDelay);Qa.push({from:l,
to:n});return}var B=w.highlight(Pa,o);w.stateAfter=b(Pa,o);if(x&&!B&&w.text)break}Qa.push({from:l,to:n})}}k&&ha.onHighlightComplete&&ha.onHighlightComplete(Za)}function Kb(e){bb.length&&cc.set(e,qa(mc))}function Yb(){ab=null;Qa=[];pb=db=false}function Zb(){var e=false;if(db)e=!Fb();if(Qa.length)lb(Qa);else db&&Hb();e&&Fb();db&&dc();if(!Ta&&(ab===true||ab!==false&&db))gb();db&&ha.matchBrackets&&setTimeout(qa(function(){if(qb){qb();qb=null}Ra(false)}),20);e=pb;db&&ha.onCursorActivity&&ha.onCursorActivity(Za);
e&&ha.onChange&&Za&&ha.onChange(Za,e)}function qa(e){return function(){i++||Yb();try{var k=e.apply(this,arguments)}finally{--i||Zb()}return k}}function ic(e,k,l){this.atOccurrence=false;if(l==null)l=typeof e=="string"&&e==e.toLowerCase();k=k&&typeof k=="object"?Fa(k):{line:0,ch:0};this.pos={from:k,to:k};if(typeof e!="string")this.matches=function(t,w){if(t)for(var x=W[w.line].text.slice(0,w.ch),B=x.match(e),H=0;B;){var S=x.indexOf(B[0]);H+=S;x=x.slice(S+1);if(S=x.match(e))B=S;else break;H++}else{x=
W[w.line].text.slice(w.ch);H=(B=x.match(e))&&w.ch+x.indexOf(B[0])}if(B)return{from:{line:w.line,ch:H},to:{line:w.line,ch:H+B[0].length},match:B}};else{if(l)e=e.toLowerCase();var n=l?function(t){return t.toLowerCase()}:function(t){return t},o=e.split("\n");this.matches=o.length==1?function(t,w){var x=n(W[w.line].text),B=e.length,H;if(t?w.ch>=B&&(H=x.lastIndexOf(e,w.ch-B))!=-1:(H=x.indexOf(e,w.ch))!=-1)return{from:{line:w.line,ch:H},to:{line:w.line,ch:H+B}}}:function(t,w){var x=w.line,B=t?o.length-
1:0,H=o[B],S=n(W[x].text),ba=t?S.indexOf(H)+H.length:S.lastIndexOf(H);if(!(t?ba>=w.ch||ba!=H.length:ba<=w.ch||ba!=S.length-H.length))for(;;){if(t?!x:x==W.length-1)return;S=n(W[x+=t?-1:1].text);H=o[t?--B:++B];if(B>0&&B<o.length-1)if(S!=H)return;else continue;B=t?S.lastIndexOf(H):S.indexOf(H)+H.length;if(t?B!=S.length-H.length:B!=H.length)return;H={line:w.line,ch:ba};x={line:x,ch:B};return{from:t?x:H,to:t?H:x}}}}}var ha={},Qb=a.defaults;for(var fb in Qb)if(Qb.hasOwnProperty(fb))ha[fb]=(E&&E.hasOwnProperty(fb)?
E:Qb)[fb];var mb=ha.document,ma=mb.createElement("div");ma.className="CodeMirror";if(window.ActiveXObject&&/MSIE [1-7]\b/.test(navigator.userAgent))ma.style.position="relative";ma.innerHTML='<div style="position: relative"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"></div><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div style="overflow: hidden; position: absolute; width: 1px; height: 0; left: 0"><textarea style="position: absolute; width: 100000px;" wrap="off"></textarea></div><div class="CodeMirror-lines"><div style="position: relative"><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div>';
g.appendChild?g.appendChild(ma):g(ma);var Ab=ma.firstChild,eb=Ab.firstChild,Lb=eb.nextSibling,nb=Lb.firstChild,Mb=nb.firstChild,$b=nb.nextSibling,za=$b.firstChild,Xa=$b.nextSibling.firstChild,ob=Xa.firstChild,Na=ob.nextSibling;if(ha.tabindex!=null)za.tabindex=ha.tabindex;if(!ha.gutter&&!ha.lineNumbers)nb.style.display="none";var ac=new D,cc=new D,bc,Pa,W=[new h("")],bb,Ya=new m,Sa;ec();var R={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false},hb,ub,Db,ab,Qa,pb,db,Ta,Ba=0,ib=0,kc=0,jb=null,Ka,qb,
Eb="";qa(function(){Q(ha.value||"");ab=false})();setTimeout(gb,20);z(ma,"mousedown",qa(function(e){function k(H){var S=tb(H,true);if(S&&!O(S,t)){Sa||P();t=S;rb(o,S);ab=false;var ba=Sb();if(S.line>=ba.to||S.line<ba.from)w=setTimeout(qa(function(){k(H)}),150)}}var l=Db;Db=null;for(var n=e.target();n!=ma;n=n.parentNode)if(n.parentNode==Mb){ha.onGutterClick&&ha.onGutterClick(Za,C(Mb.childNodes,n)+Ba);return e.stop()}la&&e.button()==3&&gc(e);if(e.button()==1){var o=tb(e),t=o,w;if(o){Sa||P();e.stop();if(l&&
+new Date-l<400)return lc(o.line);yb(o.line,o.ch,true);var x=z(mb,"mousemove",qa(function(H){clearTimeout(w);H.stop();k(H)}),true),B=z(mb,"mouseup",qa(function(H){clearTimeout(w);var S=tb(H);S&&rb(o,S);H.stop();kb();ab=true;x();B()}),true)}else e.target()==ma&&e.stop()}}));la||z(ma,"contextmenu",qa(gc));z(Ab,"dblclick",qa(function(e){var k=tb(e);if(k){for(var l=W[k.line].text,n=k.ch,o=k.ch;n>0&&/\w/.test(l.charAt(n-1));)--n;for(;o<l.length&&/\w/.test(l.charAt(o));)++o;rb({line:k.line,ch:n},{line:k.line,
ch:o});e.stop();Db=+new Date}}));z(ma,"scroll",function(){lb([]);ha.onScroll&&ha.onScroll(Za)});z(window,"resize",function(){lb(true)});z(za,"keyup",qa(function(e){if(!(ha.onKeyEvent&&ha.onKeyEvent(Za,v(e.e)))){if(ub){ub=null;ab=true}if(e.e.keyCode==16)hb=null}}));z(za,"keydown",qa(function(e){Sa||P();var k=e.e.keyCode,l=(Ca?e.e.metaKey:e.e.ctrlKey)&&!e.e.altKey,n=e.e.ctrlKey||e.e.altKey||e.e.metaKey;hb=k==16||e.e.shiftKey?hb||(R.inverted?R.to:R.from):null;if(!(ha.onKeyEvent&&ha.onKeyEvent(Za,v(e.e)))){if(k==
33||k==34){k=k==34;l=Math.floor(ma.clientHeight/$a());n=R.inverted?R.from:R.to;yb(n.line+Math.max(l-1,1)*(k?1:-1),n.ch,true);return e.stop()}if(l&&(k==36||k==35||Ca&&(k==38||k==40))){yb(k==36||k==38?0:W.length-1,true);return e.stop()}if(l&&k==65){k=W.length-1;xb({line:0,ch:0},{line:k,ch:W[k].text.length});return e.stop()}if(!ha.readOnly){if(!n&&k==13)return;if(n=!n){if(n=k==9)a:{n=e.e.shiftKey;hb=null;switch(ha.tabMode){case "default":n=false;break a;case "indent":for(var o=R.from.line,t=R.to.line;o<=
t;++o)sb(o,"smart");break;case "classic":if(O(R.from,R.to)){n?sb(R.from.line,"smart"):Ma("\t","end");break}case "shift":o=R.from.line;for(t=R.to.line;o<=t;++o)sb(o,n?"subtract":"add");break}n=true}n=n}if(n)return e.stop();if(l&&k==90){pa();return e.stop()}if(l&&(e.e.shiftKey&&k==90||k==89)){Ha();return e.stop()}}jb=(l?"c":"")+k;if(R.inverted&&Ua.hasOwnProperty(jb))if(e=T(za)){ub={anchor:e.start};X(za,e.start,e.start)}ya(jb)}}));z(za,"keypress",qa(function(e){if(!(ha.onKeyEvent&&ha.onKeyEvent(Za,v(e.e)))){if(ha.electricChars&&
Pa.electricChars){var k=String.fromCharCode(e.e.charCode==null?e.e.keyCode:e.e.charCode);Pa.electricChars.indexOf(k)>-1&&setTimeout(qa(function(){sb(R.to.line,"smart")}),50)}k=e.e.keyCode;if(k==13){if(!ha.readOnly){Ma("\n","end");if(ha.enterMode!="flat")sb(R.from.line,ha.enterMode=="keep"?"prev":"smart")}e.stop()}else!e.e.ctrlKey&&!e.e.altKey&&!e.e.metaKey&&k==9&&ha.tabMode!="default"?e.stop():ya(jb)}}));z(za,"focus",P);z(za,"blur",V);z(ma,"dragenter",function(e){e.stop()});z(ma,"dragover",function(e){e.stop()});
z(ma,"drop",qa(function(e){var k=tb(e,true),l=e.e.dataTransfer.files;if(!(!k||ha.readOnly))if(l&&l.length&&window.FileReader&&window.File){var n=l.length,o=Array(n),t=0;for(e=0;e<n;++e)w(l[e],e);var w=function(B,H){var S=new FileReader;S.onload=function(){o[H]=S.result;++t==n&&Ia(o.join(""),Fa(k),Fa(k))};S.readAsText(B)}}else try{(o=e.e.dataTransfer.getData("Text"))&&Ia(o,k,k)}catch(x){}}));z(ma,"paste",function(){kb();ya()});z(za,"paste",function(){ya()});z(za,"cut",function(){ya()});mb.activeElement==
za?P():V();var Za={getValue:function(){for(var e=[],k=0,l=W.length;k<l;++k)e.push(W[k].text);return e.join("\n")},setValue:qa(Q),getSelection:Ja,replaceSelection:qa(Ma),focus:function(){kb();P();ya()},setOption:function(e,k){ha[e]=k;if(e=="lineNumbers"||e=="gutter"){var l=ha.gutter||ha.lineNumbers;nb.style.display=l?"":"none";if(l)Gb();else Na.parentNode.style.marginLeft=0}else if(e=="mode"||e=="indentUnit")ec();else e=="readOnly"&&k=="nocursor"&&za.blur()},getOption:function(e){return ha[e]},undo:qa(pa),
redo:qa(Ha),indentLine:qa(function(e){e>=0&&e<W.length&&sb(e,"smart")}),historySize:function(){return{undo:Ya.done.length,redo:Ya.undone.length}},matchBrackets:qa(function(){Ra(true)}),getTokenAt:function(e){e=Fa(e);return W[e.line].getTokenAt(Pa,hc(e.line),e.ch)},cursorCoords:function(e){if(e==null)e=R.inverted;return fc(e?R.from:R.to)},charCoords:function(e){return fc(Fa(e))},coordsChar:function(e){var k=J(Xa),l=zb(Math.min(W.length-1,Ba+Math.floor((e.y-k.top)/$a())));return Fa({line:l,ch:Vb(zb(l),
e.x-k.left)})},getSearchCursor:function(e,k,l){return new ic(e,k,l)},markText:qa(function(e,k,l){return qa(Tb(e,k,l))}),setMarker:function(e,k,l){if(typeof e=="number")e=W[zb(e)];e.gutterMarker={text:k,style:l};Gb();return e},clearMarker:function(e){if(typeof e=="number")e=W[zb(e)];e.gutterMarker=null;Gb()},setLineClass:qa(function(e,k){if(typeof e=="number"){var l=e;e=W[zb(e)]}else{l=C(W,e);if(l==-1)return null}if(e.className!=k){e.className=k;Qa.push({from:l,to:l+1})}return e}),lineInfo:function(e){if(typeof e==
"number"){var k=e;e=W[e];if(!e)return null}else{k=C(W,e);if(k==-1)return null}var l=e.gutterMarker;return{line:k,text:e.text,markerText:l&&l.text,markerClass:l&&l.style}},addWidget:function(e,k,l){e=Wb(Fa(e),true);k.style.top=Ba*$a()+e.yBot+Xa.offsetTop+"px";k.style.left=e.x+Xa.offsetLeft+"px";Ab.appendChild(k);l&&Rb(e.x,e.yBot,e.x+k.offsetWidth,e.yBot+k.offsetHeight)},lineCount:function(){return W.length},getCursor:function(e){if(e==null)e=R.inverted;return{line:(e?R.from:R.to).line,ch:(e?R.from:
R.to).ch}},somethingSelected:function(){return!O(R.from,R.to)},setCursor:qa(function(e,k){k==null&&typeof e.line=="number"?yb(e.line,e.ch):yb(e,k)}),setSelection:qa(function(e,k){xb(Fa(e),Fa(k||e))}),getLine:function(e){if(e>=0&&e<W.length)return W[e].text},setLine:qa(function(e,k){e>=0&&e<W.length&&Ia(k,{line:e,ch:0},{line:e,ch:W[e].text.length})}),removeLine:qa(function(e){e>=0&&e<W.length&&Ia("",{line:e,ch:0},Fa({line:e+1,ch:0}))}),replaceRange:qa(Ia),getRange:function(e,k){return ta(Fa(e),Fa(k))},
operation:function(e){return qa(e)()},refresh:function(){lb(true)},getInputField:function(){return za},getWrapperElement:function(){return ma}},Pb=false,c={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},i=0;ic.prototype={findNext:function(){return this.find(false)},findPrevious:function(){return this.find(true)},find:function(e){function k(o){o={line:o,ch:0};l.pos={from:o,to:o};return l.atOccurrence=false}for(var l=this,n=Fa(e?this.pos.from:this.pos.to);;){if(this.pos=this.matches(e,n)){this.atOccurrence=
true;return this.pos.match||true}if(e){if(!n.line)return k(0);n={line:n.line-1,ch:W[n.line-1].text.length}}else{if(n.line==W.length-1)return k(W.length);n={line:n.line+1,ch:0}}}},from:function(){if(this.atOccurrence)return{line:this.pos.from.line,ch:this.pos.from.ch}},to:function(){if(this.atOccurrence)return{line:this.pos.to.line,ch:this.pos.to.ch}}};return Za}function b(g,E){if(E===true)return E;if(g.copyState)return g.copyState(E);var Q={};for(var P in E){var V=E[P];if(V instanceof Array)V=V.concat([]);
Q[P]=V}return Q}function d(g,E,Q){return g.startState?g.startState(E,Q):true}function f(g){this.pos=this.start=0;this.string=g}function h(g,E){this.styles=E||[g,null];this.stateAfter=null;this.text=g;this.marked=this.gutterMarker=this.className=null}function j(g,E,Q,P){for(var V=0,ga=0,fa=0;ga<E;V+=2){var pa=Q[V],Ha=ga+pa.length;if(fa==0){Ha>g&&P.push(pa.slice(g-ga,Math.min(pa.length,E-ga)),Q[V+1]);if(Ha>=g)fa=1}else if(fa==1)Ha>E?P.push(pa.slice(0,E-ga),Q[V+1]):P.push(pa,Q[V+1]);ga=Ha}}function m(){this.time=
0;this.done=[];this.undone=[]}function p(){if(this.preventDefault){this.preventDefault();this.stopPropagation()}else{this.returnValue=false;this.cancelBubble=true}}function v(g){if(!g.stop)g.stop=p;return g}function s(g){this.e=g}function z(g,E,Q,P){function V(ga){Q(new s(ga||window.event))}if(typeof g.addEventListener=="function"){g.addEventListener(E,V,false);if(P)return function(){g.removeEventListener(E,V,false)}}else{g.attachEvent("on"+E,V);if(P)return function(){g.detachEvent("on"+E,V)}}}function D(){this.id=
null}function F(g,E){if(E==null){E=g.search(/[^\s\u00a0]/);if(E==-1)E=g.length}for(var Q=0,P=0;Q<E;++Q)if(g.charAt(Q)=="\t")P+=oa-P%oa;else++P;return P}function J(g,E){for(var Q=g.ownerDocument.body,P=0,V=0,ga=false,fa=g;fa;fa=fa.offsetParent){P+=fa.offsetLeft;V+=fa.offsetTop;if(fa==Q)ga=true}for(fa=g.parentNode;fa!=(E&&ga?null:Q);fa=fa.parentNode)if(fa.scrollLeft!=null){P-=fa.scrollLeft;V-=fa.scrollTop}return{left:P,top:V}}function O(g,E){return g.line==E.line&&g.ch==E.ch}function q(g,E){return g.line<
E.line||g.line==E.line&&g.ch<E.ch}function r(g){return g.replace(/[<>&]/g,function(E){return E=="&"?"&amp;":E=="<"?"&lt;":"&gt;"})}function C(g,E){if(g.indexOf)return g.indexOf(E);for(var Q=0,P=g.length;Q<P;++Q)if(g[Q]==E)return Q;return-1}a.defaults={value:"",mode:null,indentUnit:2,indentWithTabs:false,tabMode:"classic",enterMode:"indent",electricChars:true,onKeyEvent:null,lineNumbers:false,gutter:false,firstLineNumber:1,readOnly:false,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,
onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,workTime:100,workDelay:200,undoDepth:40,tabindex:null,document:window.document};var G={},da={};a.defineMode=function(g,E){if(!a.defaults.mode&&g!="null")a.defaults.mode=g;G[g]=E};a.defineMIME=function(g,E){da[g]=E};a.getMode=function(g,E){if(typeof E=="string"&&da.hasOwnProperty(E))E=da[E];if(typeof E=="string")var Q=E,P={};else if(E!=null){Q=E.name;P=E}var V=G[Q];if(!V){window.console&&console.warn("No mode "+Q+" found, falling back to plain text.");
return a.getMode(g,"text/plain")}return V(g,P||{})};a.listModes=function(){var g=[];for(var E in G)G.propertyIsEnumerable(E)&&g.push(E);return g};a.listMIMEs=function(){var g=[];for(var E in da)da.propertyIsEnumerable(E)&&g.push(E);return g};a.fromTextArea=function(g,E){function Q(){g.value=fa.getValue()}E||(E={});E.value=g.value;if(!E.tabindex&&g.tabindex)E.tabindex=g.tabindex;if(g.form){var P=z(g.form,"submit",Q,true);if(typeof g.form.submit=="function"){var V=g.form.submit,ga=function(){Q();g.form.submit=
V;g.form.submit();g.form.submit=ga};g.form.submit=ga}}g.style.display="none";var fa=a(function(pa){g.parentNode.insertBefore(pa,g.nextSibling)},E);fa.save=Q;fa.toTextArea=function(){Q();g.parentNode.removeChild(fa.getWrapperElement());g.style.display="";if(g.form){P();if(typeof g.form.submit=="function")g.form.submit=V}};return fa};a.startState=d;a.copyState=b;f.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},
next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(g){var E=this.string.charAt(this.pos);if(typeof g=="string"?E==g:E&&(g.test?g.test(E):g(E))){++this.pos;return E}},eatWhile:function(g){for(var E=this.start;this.eat(g););return this.pos>E},eatSpace:function(){for(var g=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>g},skipToEnd:function(){this.pos=this.string.length},skipTo:function(g){g=this.string.indexOf(g,this.pos);
if(g>-1){this.pos=g;return true}},backUp:function(g){this.pos-=g},column:function(){return F(this.string,this.start)},indentation:function(){return F(this.string)},match:function(g,E,Q){if(typeof g=="string"){if((Q?this.string.toLowerCase():this.string).indexOf(Q?g.toLowerCase():g,this.pos)==this.pos){if(E!==false)this.pos+=g.length;return true}}else{if((g=this.string.slice(this.pos).match(g))&&E!==false)this.pos+=g[0].length;return g}},current:function(){return this.string.slice(this.start,this.pos)}};
h.prototype={replace:function(g,E,Q){var P=[],V=this.marked;j(0,g,this.styles,P);Q&&P.push(Q,null);j(E,this.text.length,this.styles,P);this.styles=P;this.text=this.text.slice(0,g)+Q+this.text.slice(E);this.stateAfter=null;if(V){g=Q.length-(E-g);Q=this.text.length;for(P=0;P<V.length;++P){var ga=V[P],fa=false;if(ga.from>=Q)fa=true;else{ga.from=ga.from<=Math.min(E,E+g)?ga.from:ga.from+g;if(ga.to!=null)ga.to=ga.to<=Math.min(E,E+g)?ga.to:ga.to+g}if(fa||ga.from>=ga.to){V.splice(P,1);P--}}}},split:function(g,
E){var Q=[E,null];j(g,this.text.length,this.styles,Q);return new h(E+this.text.slice(g),Q)},addMark:function(g,E,Q){g={from:g,to:E,style:Q};if(this.marked==null)this.marked=[];this.marked.push(g);this.marked.sort(function(P,V){return P.from-V.from});return g},removeMark:function(g){var E=this.marked;if(E)for(var Q=0;Q<E.length;++Q)if(E[Q]==g){E.splice(Q,1);break}},highlight:function(g,E){var Q=new f(this.text),P=this.styles,V=0,ga=false,fa=P[0],pa;for(this.text==""&&g.blankLine&&g.blankLine(E);!Q.eol();){var Ha=
g.token(Q,E),La=this.text.slice(Q.start,Q.pos);Q.start=Q.pos;if(V&&P[V-1]==Ha)P[V-2]+=La;else if(La){if(!ga&&(P[V+1]!=Ha||V&&P[V-2]!=pa))ga=true;P[V++]=La;P[V++]=Ha;pa=fa;fa=P[V]}if(Q.pos>5E3){P[V++]=this.text.slice(Q.pos);P[V++]=null;break}}if(P.length!=V){P.length=V;ga=true}if(V&&P[V-2]!=pa)ga=true;return ga},getTokenAt:function(g,E,Q){for(var P=new f(this.text);P.pos<Q&&!P.eol();){P.start=P.pos;var V=g.token(P,E)}return{start:P.start,end:P.pos,string:P.current(),className:V||null,state:E}},indentation:function(){return F(this.text)},
getHTML:function(g,E,Q,P){function V(kb,Fb){if(kb)Fb?ga.push('<span class="',Fb,'">',r(kb),"</span>"):ga.push(r(kb))}var ga=[];if(Q)ga.push(this.className?'<pre class="'+this.className+'">':"<pre>");var fa=this.styles,pa=this.text,Ha=this.marked;if(g==E)g=null;var La=pa.length;if(P!=null)La=Math.min(P,La);if(!pa&&P==null)V(" ",g!=null&&E==null?"CodeMirror-selected":null);else if(!Ha&&g==null)for(g=P=0;g<La;P+=2){E=fa[P];var Ia=E.length;if(g+Ia>La)E=E.slice(0,La-g);g+=Ia;V(E,fa[P+1])}else{P=pa=0;var Ma=
"",Wa=-1,ta=null,Ja=function(){if(Ha){Wa+=1;ta=Wa<Ha.length?Ha[Wa]:null}};for(Ja();pa<La;){var ua=La,ya="";if(g!=null)if(g>pa)ua=g;else if(E==null||E>pa){ya=" CodeMirror-selected";if(E!=null)ua=Math.min(ua,E)}for(;ta&&ta.to!=null&&ta.to<=pa;)Ja();if(ta)if(ta.from>pa)ua=Math.min(ua,ta.from);else{ya+=" "+ta.style;if(ta.to!=null)ua=Math.min(ua,ta.to)}for(;;){var cb=pa+Ma.length,gb=Ia;if(ya)gb=Ia?Ia+ya:ya;V(cb>ua?Ma.slice(0,ua-pa):Ma,gb);if(cb>=ua){Ma=Ma.slice(ua-pa);pa=ua;break}pa=cb;Ma=fa[P++];Ia=fa[P++]}}g!=
null&&E==null&&V(" ","CodeMirror-selected")}Q&&ga.push("</pre>");return ga.join("")}};m.prototype={addChange:function(g,E,Q){this.undone.length=0;var P=+new Date,V=this.done[this.done.length-1];if(P-this.time>400||!V||V.start>g+E||V.start+V.added<g-V.added+V.old.length)this.done.push({start:g,added:E,old:Q});else{var ga=0;if(g<V.start){for(var fa=V.start-g-1;fa>=0;--fa)V.old.unshift(Q[fa]);V.added+=V.start-g;V.start=g}else if(V.start<g){ga=g-V.start;E+=ga}fa=V.added-ga;for(g=Q.length;fa<g;++fa)V.old.push(Q[fa]);
if(V.added<E)V.added=E}this.time=P}};s.prototype={stop:function(){p.call(this.e)},target:function(){return this.e.target||this.e.srcElement},button:function(){if(this.e.which)return this.e.which;else if(this.e.button&1)return 1;else if(this.e.button&2)return 3;else if(this.e.button&4)return 2},pageX:function(){if(this.e.pageX!=null)return this.e.pageX;var g=this.target().ownerDocument;return this.e.clientX+g.body.scrollLeft+g.documentElement.scrollLeft},pageY:function(){if(this.e.pageY!=null)return this.e.pageY;
var g=this.target().ownerDocument;return this.e.clientY+g.body.scrollTop+g.documentElement.scrollTop}};D.prototype={set:function(g,E){clearTimeout(this.id);this.id=setTimeout(E,g)}};var ia=function(){var g=document.createElement("pre");g.innerHTML=" ";return!g.innerHTML}(),la=/gecko\/\d{7}/i.test(navigator.userAgent),na="\n";(function(){var g=document.createElement("textarea");g.value="foo\nbar";if(g.value.indexOf("\r")>-1)na="\r\n"})();for(var oa=8,Ca=/Mac/.test(navigator.platform),Ua={},Va=35;Va<=
40;++Va)Ua[Va]=Ua["c"+Va]=true;var Y="\n\nb".split(/\n/).length!=3?function(g){for(var E=0,Q,P=[];(Q=g.indexOf("\n",E))>-1;){P.push(g.slice(E,g.charAt(Q-1)=="\r"?Q-1:Q));E=Q+1}P.push(g.slice(E));return P}:function(g){return g.split(/\r?\n/)};if(window.getSelection)var T=function(g){try{return{start:g.selectionStart,end:g.selectionEnd}}catch(E){return null}},X=function(g,E,Q){try{g.setSelectionRange(E,Q)}catch(P){}};else{T=function(g){try{var E=g.ownerDocument.selection.createRange()}catch(Q){return null}if(!E||
E.parentElement()!=g)return null;var P=g.value,V=P.length,ga=g.createTextRange();ga.moveToBookmark(E.getBookmark());var fa=g.createTextRange();fa.collapse(false);if(ga.compareEndPoints("StartToEnd",fa)>-1)return{start:V,end:V};g=-ga.moveStart("character",-V);for(E=P.indexOf("\r");E>-1&&E<g;E=P.indexOf("\r",E+1),g++);if(ga.compareEndPoints("EndToEnd",fa)>-1)return{start:g,end:V};V=-ga.moveEnd("character",-V);for(E=P.indexOf("\r");E>-1&&E<V;E=P.indexOf("\r",E+1),V++);return{start:g,end:V}};X=function(g,
E,Q){var P=g.createTextRange();P.collapse(true);var V=P.duplicate(),ga=0;g=g.value;for(var fa=g.indexOf("\n");fa>-1&&fa<E;fa=g.indexOf("\n",fa+1))++ga;for(P.move("character",E-ga);fa>-1&&fa<Q;fa=g.indexOf("\n",fa+1))++ga;V.move("character",Q-ga);P.setEndPoint("EndToEnd",V);P.select()}}a.defineMode("null",function(){return{token:function(g){g.skipToEnd()}}});a.defineMIME("text/plain","null");return a}();
jQuery.cookie=function(a,b,d){if(typeof b!="undefined"){d=d||{};if(b===null){b="";d.expires=-1}var f="";if(d.expires&&(typeof d.expires=="number"||d.expires.toUTCString)){if(typeof d.expires=="number"){f=new Date;f.setTime(f.getTime()+d.expires*24*60*60*1E3)}else f=d.expires;f="; expires="+f.toUTCString()}var h=d.path?"; path="+d.path:"",j=d.domain?"; domain="+d.domain:"";d=d.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(b),f,h,j,d].join("")}else{b=null;if(document.cookie&&document.cookie!=
""){d=document.cookie.split(";");for(f=0;f<d.length;f++){h=jQuery.trim(d[f]);if(h.substring(0,a.length+1)==a+"="){b=decodeURIComponent(h.substring(a.length+1));break}}}return b}};
function Sanskrit(a,b){this.options=b||{};this.textarea=a;this.form=a.form;this.container=document.createElement("div");this.iframe=document.createElement("iframe");this.hiddenInput=document.createElement("input");this.hiddenInput.type="hidden";this.callbacks=Sanskrit.inherit(Sanskrit.prototype.callbacks);for(var d in Sanskrit.prototype.callbacks)if(Sanskrit.prototype.callbacks.hasOwnProperty(d)&&typeof this.options[d]==="function")this.callbacks[d]=this.options[d];this.replaceTextarea();var f=this;
this.onReady(function(){f.findContentDocument();if(f.richTextIsAvailable()){f.applyClassNames();f.enableEditor();f.addStyle(Sanskrit.defaultStyle);f.createToolbar();f.hijackForm()}else f.unreplaceTextarea()});Sanskrit.editors.push(this)}Sanskrit.inherit=function(a){function b(){}b.prototype=a;return new b};Sanskrit.getClassName=function(a){return a.getAttribute("class")||a.getAttribute("className")};Sanskrit.setClassName=function(a,b){a.setAttribute("class",b);a.className=b};
Sanskrit.hasClassName=function(a,b){if(!Sanskrit.getClassName(a))return false;for(var d=Sanskrit.getClassName(a).split(" "),f=0;f<d.length;f++)if(d[f]==b)return true;return false};Sanskrit.addClassName=function(a,b){if(Sanskrit.hasClassName(a,b))return false;var d=Sanskrit.getClassName(a)||"";Sanskrit.setClassName(a,d==""?b:d+" "+b);return true};
Sanskrit.removeClassName=function(a,b){for(var d=(Sanskrit.getClassName(a)||"").split(" "),f=[],h=0;h<d.length;h++)d[h]!=b&&f.push(d[h]);f=f.join(" ");Sanskrit.setClassName(a,f);return f};Sanskrit.defaultStyle="html { padding:0; cursor:text; } body { font-size:90%; margin:0; padding:0.5em; cursor:text; } p { margin: 0.5em 0; }";Sanskrit.editors=[];
Sanskrit.prototype={onReady:function(a){setTimeout(a,250)},findContentDocument:function(){if(this.iframe.contentDocument){this.internetExplorer=false;this.contentDocument=this.iframe.contentDocument}else{this.internetExplorer=true;this.contentDocument=this.iframe.contentWindow.document}return this.contentDocument},replaceTextarea:function(){this.container.appendChild(this.iframe);this.hiddenInput.value=this.textarea.value;this.hiddenInput.name=this.textarea.name;this.hiddenInput.id=this.textarea.id;
this.container.insertBefore(this.hiddenInput,this.iframe);this.textarea.parentNode.insertBefore(this.container,this.textarea);this.textarea.parentNode.removeChild(this.textarea)},unreplaceTextarea:function(){this.container.parentNode.insertBefore(this.textarea,this.container);this.container.parentNode.removeChild(this.container)},toggleTextarea:function(){if(this.iframe.parentNode){this.textarea.value=this.textilize(this.getContents());this.iframe.parentNode.insertBefore(this.textarea,this.iframe);
this.iframe.parentNode.removeChild(this.iframe);return true}else{this.textarea.parentNode.insertBefore(this.iframe,this.textarea);this.textarea.parentNode.removeChild(this.textarea);var a=this;this.onReady(function(){a.findContentDocument();a.hiddenInput.value=a.textarea.value;a.enableEditor();a.toolbar.observeEditor()});return false}},enableEditor:function(){this.contentDocument.designMode="on";try{this.execCommand("styleWithCSS",false)}catch(a){}this.setContents(this.htmlize(this.hiddenInput.value))},
focusEditor:function(){this.iframe.contentWindow.focus()},createToolbar:function(){this.toolbar=new SanskritToolbar(this,this.options.toolbar||{})},insertToolbar:function(a){this.container.insertBefore(a,this.iframe)},getContents:function(){return this.contentDocument.getElementsByTagName("body")[0].innerHTML},setContents:function(a){var b=this;setTimeout(function(){b.contentDocument.getElementsByTagName("body")[0].innerHTML=a},250)},getSelection:function(){return this.iframe.contentWindow.document.selection?
this.iframe.contentWindow.document.selection:this.iframe.contentWindow.getSelection()},getCurrentAncestors:function(){var a=this.getSelection();if(a.createRange){a=a.createRange();a=a.parentElement()}else{a=a.getRangeAt(0);a=a.commonAncestorContainer}for(var b=[];a.nodeType!==1||a.nodeName.toLowerCase()!=="body";){a.nodeType===1&&b.push(a);a=a.parentNode}return b},includeAncestor:function(a,b){b=b||this.getCurrentAncestors();for(var d=false,f=0;f<b.length;f++)if(b[f].nodeName.toLowerCase()==a.toLowerCase())d=
true;return d},applyClassNames:function(){Sanskrit.addClassName(this.container,this.options.className||"sanskrit")},hijackForm:function(){var a=this,b=this.form.onsubmit||function(){};this.form.onsubmit=function(){b();a.hiddenInput.value=a.textilize(a.iframe.parentNode?a.getContents():a.textarea.value);return a.callbacks.onSubmit.call(a)}},addStyle:function(a){var b=this;setTimeout(function(){if(document.createStyleSheet){var d=b.contentDocument.createStyleSheet(),f=a.split("}"),h,j;for(h=0;h<f.length-
1;h++){j=f[h].split("{");d.addRule(j[0],j[1])}}else{d=document.createElement("style");d.appendChild(document.createTextNode(a));b.contentDocument.getElementsByTagName("head")[0].appendChild(d)}},250)},textilize:function(a,b){a=a.replace(/\s*<p>((.|[\r\n])*?)<\/p>\s*/gi,"\n\n$1\n\n");a=a.replace(/<br ?\/?>/gi,"\n");a=a.replace(/<(?:b|strong)>((.|[\r\n])*?)<\/(?:b|strong)>/gi,"*$1*");a=a.replace(/<(?:i|em)>((.|[\r\n])*?)<\/(?:i|em)>/gi,"_$1_");a=a.replace(/<(?:strike|del)>((.|[\r\n])*?)<\/(?:strike|del)>/gi,
"-$1-");a=a.replace(/<(?:u|ins)>((.|[\r\n])*?)<\/(?:u|ins)>/gi,"+$1+");a=a.replace(/<a href="(.*?)">((.|[\r\n])*?)<\/a>/gi,'"$2":$1');a=a.replace(/<code.*?>((.|[\r\n])*?)<\/code>/gi,"@$1@");if(b)a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a=a.replace(/(\r\n|\n){3,}/g,"\n\n");return a=a.replace(/^[\r\n]+|[\r\n]+$/g,"")},htmlize:function(a,b){for(var d=a.split("\n\n"),f=0;f<d.length;f++){d[f]=d[f].replace(/(^|\r\n|\n|\r)\* (.*)/g,"$1###LI### $2");d[f]=d[f].replace(/\n/gi,"<br/>");
d[f]=d[f].replace(/@((.|[\r\n])*?)@/gi,"<code>$1</code>");d[f]=d[f].replace(/\*(.+?)\*/gi,this.internetExplorer?"<strong>$1</strong>":"<b>$1</b>");d[f]=d[f].replace(/_(.+?)_/gi,this.internetExplorer?"<em>$1</em>":"<i>$1</i>");d[f]=d[f].replace(/\+(.+?)\+/gi,"<u>$1</u>");d[f]=d[f].replace(/-(.+?)-/gi,"<strike>$1</strike>");d[f]=d[f].replace(/"(.+?)":([^\s\n<]+)/gi,'<a href="$2">$1</a>');d[f]=d[f].replace(/###LI###/gi,"*");d[f]="<p>"+d[f]+"</p>"}a=d.join("\n");a=a.replace(/<p>[\s\n]*<\/p>/g,"");if(b)a=
a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");return a},execCommand:function(a,b){if(typeof b=="undefined")b=null;this.contentDocument.execCommand(a,false,b)},richTextIsAvailable:function(){return typeof this.contentDocument.execCommand!="undefined"},callbacks:{onSubmit:function(){return true}}};
function SanskritToolbar(a,b){this.options=b||{};this.editor=a;this.list=document.createElement("ul");this.listItems=[];this.listItemCallbacks={};this.availableActions={strong:"strong",em:"em",ins:"ins",del:"del",link:"link",unlink:"unlink",textile:"textile"};this.callbacks=Sanskrit.inherit(SanskritToolbar.prototype.callbacks);for(var d in this.actions){var f="on"+d.slice(0,1).toUpperCase()+d.slice(1);if(typeof this.options[f]==="function")this.callbacks[f]=this.options[f]}this.addListItems();this.applyClassNames();
this.injectListIntoEditor();this.observeEditor()}
SanskritToolbar.prototype={actions:{strong:function(a){a.execCommand("Bold")},em:function(a){a.execCommand("Italic")},link:function(a){var b=prompt("Enter link address:");if(typeof b==="string"){b.match(/^[a-zA-Z]+:\/\//)||(b="http://"+b);a.execCommand("createLink",b)}else return false},unlink:function(a){a.execCommand("unlink");a.toolbar.deactivateListItem("link");a.toolbar.activateListItem("unlink")},del:function(a){a.execCommand("strikeThrough")},ins:function(a){a.execCommand("underline")},textile:function(a){a.toolbar.resetListStatus();
var b=a.toolbar;(a=a.toggleTextarea())?b.activateListItem("textile"):b.deactivateListItem("textile");for(var d in b.actions)if(b.actions.hasOwnProperty(d)&&d!=="textile")a?b.hideListItem(d):b.showListItem(d);return false}},callbacks:{},createAction:function(a,b){var d=this,f=a.onclick||function(){};return function(){f();if(d.actions[b](d.editor)!==false){var h="on"+b.slice(0,1).toUpperCase()+b.slice(1);typeof d.callbacks[h]==="function"&&d.callbacks[h].call(d.editor);d.updateListStatus(d.editor.getCurrentAncestors());
d.editor.focusEditor()}return false}},addListItems:function(){var a=this.options.actions||this.availableActions;for(var b in a)if(a.hasOwnProperty(b)){var d=document.createElement("li"),f=document.createElement("span");Sanskrit.addClassName(d,b);f.appendChild(typeof a[b]=="string"?document.createTextNode(a[b]):a[b]);f.onclick=this.createAction(f,b);d.appendChild(f);this.listItems.push(d);this.list.appendChild(d)}},applyClassNames:function(){Sanskrit.addClassName(this.list,"toolbar")},injectListIntoEditor:function(){this.editor.insertToolbar(this.list)},
observeEditor:function(){var a=this;setTimeout(function(){if(a.editor.contentDocument.addEventListener){a.editor.contentDocument.addEventListener("mouseup",function(){a.updateListStatus(a.editor.getCurrentAncestors())},false);a.editor.contentDocument.addEventListener("keyup",function(){a.updateListStatus(a.editor.getCurrentAncestors())},false);a.editor.contentDocument.addEventListener("keydown",function(){a.updateListStatus(a.editor.getCurrentAncestors())},false);a.editor.contentDocument.addEventListener("blur",
function(){a.resetListStatus()},false)}else{a.editor.contentDocument.attachEvent("onmouseup",function(){a.updateListStatus(a.editor.getCurrentAncestors())});a.editor.contentDocument.attachEvent("onkeyup",function(){a.updateListStatus(a.editor.getCurrentAncestors())});a.editor.contentDocument.attachEvent("onkeydown",function(){a.updateListStatus(a.editor.getCurrentAncestors())},false);a.editor.contentDocument.attachEvent("onblur",function(){a.resetListStatus()},false)}},100)},getListItem:function(a){if(typeof a!=
"string")return a;for(var b=0;b<this.listItems.length;b++)if(Sanskrit.hasClassName(this.listItems[b],a))return this.listItems[b];return document.createElement("li")},activateListItem:function(a){Sanskrit.addClassName(this.getListItem(a),"active")},deactivateListItem:function(a){Sanskrit.removeClassName(this.getListItem(a),"active")},toggleListItem:function(a){a=this.getListItem(a);Sanskrit.hasClassName(a,"active")?Sanskrit.removeClassName(a,"active"):Sanskrit.addClassName(a,"active")},hideListItem:function(a){a=
this.getListItem(a);a.previousDisplayValue=a.style.display;a.style.display="none"},showListItem:function(a){a=this.getListItem(a);a.style.display=a.previousDisplayValue||""},resetListStatus:function(){for(var a=0;a<this.listItems.length;a++)this.deactivateListItem(this.listItems[a])},updateListStatus:function(a){this.resetListStatus();for(var b=0;b<a.length;b++)switch(a[b].nodeName.toLowerCase()){case "b":this.activateListItem("strong");break;case "strong":this.activateListItem("strong");break;case "i":this.activateListItem("em");
break;case "em":this.activateListItem("em");break;case "u":this.activateListItem("ins");break;case "strike":this.activateListItem("del");break;case "a":this.activateListItem("link");break}}};Sanskrit.onLoadFunction=function(){for(var a=[],b=document.getElementsByTagName("textarea"),d=0;d<b.length;d++)a.push(b[d]);for(d=0;d<a.length;d++)Sanskrit.hasClassName(a[d],"sanskrit")&&new Sanskrit(a[d])};
if(typeof Event!="undefined"&&Event.onReady)Event.onReady(Sanskrit.onLoadFunction);else if(typeof Event!="undefined"&&Event.observe)Event.observe(window,"load",Sanskrit.onLoadFunction);else if(window.addEventListener)window.addEventListener("load",Sanskrit.onLoadFunction,false);else if(window.attachEvent)window.attachEvent("onload",Sanskrit.onLoadFunction,false);else{var old=window.onload;window.onload=function(){old();Sanskrit.onLoadFunction()}}
var Asset=Model("asset",function(){this.persistence(Model.REST,"/admin/assets");this.include({load:function(a){var b=this,d="/admin/assets/"+b.id()+".json";jQuery.ajax({type:"GET",url:d,dataType:"json",success:function(f){b.merge(f);a.call(this)}})},toMustache:function(a){this.merge({query_path:a?"?"+decodeURIComponent(jQuery.param({query:a})):"",query:a});return this.attr()},toMustacheWithNeighbors:function(a){var b=Asset.all(),d=b.indexOf(this),f=this.toMustache(a),h=b[d+1]?Asset.all()[d+1].toMustache(a):
null;a=b[d-1]?Asset.all()[d-1].toMustache(a):null;jQuery("<img />")[0].src="/images/large/"+f.id+"/"+f.file_name;if(h)jQuery("<img />")[0].src="/images/large/"+h.id+"/"+h.file_name;if(a)jQuery("<img />")[0].src="/images/large/"+a.id+"/"+a.file_name;return{asset:f,next:h,previous:a}}});this.extend({find_all_by_folder_id:function(a){return this.select(function(){return this.attr("folder_id")==a})},toMustache:function(a){var b=a?"?"+decodeURIComponent(jQuery.param({query:a})):"";return{assets:this.map(function(d){d.merge({query_path:b,
query:a});return d.attr()}),query:a}},asJSON:function(){return Asset.map(function(a){return a.attr()})},tags:function(){tags=[];Asset.map(function(){tags=tags.concat(this.attr("tags"))});return tags},searchRemote:function(a,b){var d=a!=null?decodeURIComponent(jQuery.param({query:a})):"";Asset.each(function(){Asset.remove(this)});jQuery.ajax({type:"get",url:"/search.json",contentType:"application/json",dataType:"json",data:d,success:function(f){jQuery.each(f,function(h,j){var m=new Asset({id:j.id});
m.merge(j);Asset.add(m)});b.call(this)}})},searchAdmin:function(a,b){Asset.each(function(){Asset.remove(this)});jQuery.ajax({type:"get",url:"/admin/assets.json",contentType:"application/json",dataType:"json",data:a,success:function(d){$.each(d,function(f,h){var j=new Asset({id:h.id});j.merge(h);Asset.add(j)});b.call(this)}})},keys:{},create:function(a,b){Asset.callback=b;var d=new XMLHttpRequest,f=Asset.generate_uuid();d.upload.uuid=f;d.upload.filename=a.name;d.upload.addEventListener("loadstart",
Asset.onloadstartHandler,false);d.upload.addEventListener("progress",Asset.onprogressHandler);d.upload.addEventListener("load",Asset.onloadHandler,false);d.addEventListener("readystatechange",Asset.onreadystatechangeHandler,false);d.open("POST","/admin/assets.json",true);d.setRequestHeader("Content-Type","application/octet-stream");d.setRequestHeader("X-File-Name",a.name);d.setRequestHeader("X-File-Upload","true");d.send(a);b.before&&b.before.call(this,f)},onloadstartHandler:function(){},onloadHandler:function(){},
onprogressHandler:function(a){var b=Math.round(a.loaded/a.total*100);Asset.callback.progress&&Asset.callback.progress.call(this,a.target.uuid,b)},onreadystatechangeHandler:function(a){var b=null;try{b=a.target.status}catch(d){return}if(b=="200"&&a.target.readyState==4&&a.target.responseText){a=JSON.parse(a.target.responseText);b=new Asset({id:a.id});b.merge(a);Asset.add(b);Asset.callback.success&&Asset.callback.success.call(this,b)}},generate_uuid:function(){for(var a=[],b=0;b<32;b++)a[b]="0123456789ABCDEF".substr(Math.floor(Math.random()*
16),1);a[12]="4";a[16]="0123456789ABCDEF".substr(a[16]&3|8,1);return a.join("")}})}),Folder=Model("folder",function(){this.persistence(Model.SinatraREST,"/admin/folders");this.include({loadAssets:function(a){Asset.each(function(){Asset.remove(this)});var b="/admin/folders/"+this.attr("id")+"/assets.json";jQuery.ajax({type:"get",url:b,contentType:"application/json",dataType:"json",success:function(d){jQuery.each(d,function(f,h){var j=new Asset({id:h.id});j.merge(h);Asset.add(j)});a&&a.call(this)}})}});
this.extend({asJSON:function(){return Folder.map(function(a){return a.attr()})}})}),Page=Model("page",function(){this.persistence(Model.SinatraREST,"/admin/pages");this.include({initialize:function(){},children:function(){return Page.find_all_by_parent_id(this.id())},childrenAsJSON:function(){return this.children().map(function(a){return a.attr()})},setPartContent:function(a,b){var d=this.attr("contents"),f;jQuery.each(d,function(h,j){if(a==j.name){j.content=b;f=j}});return f},getChildren:function(a){var b=
"/admin/pages/"+this.id()+"/children.json";jQuery.ajax({type:"GET",url:b,dataType:"json",success:function(d){$.each(d,function(f,h){var j=new Page({id:h.id});j.merge(h);Page.add(j)});a&&a.call(this,d)}})},has_children:function(){if(this.children().all().length>0)return true},parent:function(){return Page.find(this.attr("parent_id"))},assets:function(){for(var a=this.attr("assets"),b=0,d=a.length;b<d;++b){var f=a[b],h=new Asset({id:f.id});h.merge(f);Asset.add(h)}return Asset},parts:function(){var a=
this.attr("contents"),b=a.length;Part.each(function(){Part.remove(this)});for(var d=0;d<b;++d){var f=a[d],h=new Part({id:f.id});h.merge(f);h.attr("page_id",this.id());Part.add(h)}return Part},load:function(a){var b=this,d="/admin/pages/"+b.id()+".json";jQuery.ajax({type:"GET",url:d,dataType:"json",success:function(f){b.merge(f);a.call(this)}})}});this.extend({toMustache:function(){return{pages:this.map(function(a){return a.attr()})}},root:function(){return this.detect(function(){return this.attr("parent_id")==
null})},find_by_parent_id:function(a){return this.detect(function(){return this.attr("parent_id")==a})},find_all_by_parent_id:function(a){return this.select(function(){return this.attr("parent_id")==a})},find_by_path:function(a){return this.detect(function(){return this.attr("path")==a})},load_by_id:function(a,b){jQuery.ajax({type:"GET",url:"/admin/pages/"+a+".json",dataType:"json",success:function(d){var f=Page.find(d.id);f||(f=new Page({id:d.id}));f.merge(d);Page.add(f);b&&b.call(this,d)}})},create:function(a,
b){jQuery.ajax({type:"post",url:"/admin/pages.json",dataType:"json",data:{page:a},success:function(d){var f=new Page({id:d.id});f.merge(d);Page.add(f);b.call(this,d)}})}})}),Layout=Model("layout",function(){this.persistence(Model.SinatraREST,"/admin/templates");this.include({load:function(a){var b=this,d="/admin/templates/"+b.id()+".json";jQuery.ajax({type:"GET",url:d,dataType:"json",success:function(f){b.merge(f);a.call(this,f)}})}});this.extend({toMustache:function(){return{layouts:this.map(function(a){return a.attr()})}},
asLayoutJSON:function(a){return Layout.find_all_by_class("Layout").map(function(b){a==b.id()?b.attr("selected",'selected="selected"'):b.attr("selected","");return b.attr()})},find_by_class:function(a){return this.detect(function(){return this.attr("klass")==a})},find_all_by_class:function(a){return this.select(function(){return this.attr("klass")==a})},asJSON_by_class:function(a){return this.find_all_by_class(function(){return a.map(function(b){return b.attributes})})}})}),Part=Model("part",function(){this.include({deleteRemote:function(a,
b){var d="/admin/pages/"+a.id()+"/parts/"+this.id()+".json";jQuery.ajax({type:"DELETE",url:d,dataType:"json",success:function(f){a.merge(f);b.call(this)}})}});this.extend({toMustache:function(){return{parts:this.map(function(a){return a.attr()})}},create:function(a,b){var d="/admin/templates/"+a.template_id+"/parts.json",f=Layout.find(a.template_id);jQuery.ajax({type:"post",url:d,dataType:"json",data:{part:a},success:function(h){f.merge(h);b.call(this)}})}})}),Site=Model("site",function(){this.persistence(Model.SinatraREST,
"/admin/sites");this.include({});this.extend({toMustache:function(){return{sites:this.map(function(a){return a.attr()})}}})}),User=Model("user",function(){this.persistence(Model.SinatraREST,"/admin/users");this.include({});this.extend({toMustache:function(){return{users:this.map(function(a){return a.attr()})}}})}),Galerie={open:function(a,b){$("body").append('<div id="overlay"></div>').append('<div id="modal_wrapper"><div id="modal"></div></div>');var d=$("#modal");d.html(a);var f=$("#modal_wrapper"),
h=$(window).height();d=d.height()+42;d=(h-d)/2;$("#overlay").css({height:h}).hide().fadeIn("fast");f.hide().fadeIn("fast").css({top:d});b&&b.call(this)},close:function(){$("#modal_wrapper").fadeOut("fast",function(){$(this).remove();$("#overlay").fadeOut("fast",function(){$(this).remove()})})}},logger={info:function(a){window.console&&console.log(a)},debug:function(a){window.console&&console.log(a)}},Utilities={setNonHistoryLinks:function(){Modernizr.history||jQuery("a").click(function(a){a.preventDefault();
if((a=jQuery(this).attr("href"))&&!a.match("http://")&&!a.match(/^#/)){console.log("#"+a);document.location.hash=$(this).attr("#href")}})},loadModal:function(a,b){var d=this,f=jQuery(a);if(f.length){Loader.start();var h=f.find("img");setTimeout(function(){f.height()<20?h.load(function(){d.resizeModal(f,b)}):d.resizeModal(f,b)},13)}},resizeModal:function(a,b){var d=a.width(),f=a.height();d=d/f;jQuery(window).width();var h=jQuery(window).height();f>h-40?a.height(h-40).width((h-40)*d):a.css({"margin-top":(h-
f)/2});Loader.stop();b&&b.call(this)},notice:function(a,b){b=b||{};var d=jQuery(".notice"),f=b["class"]||"message";d.html(a).addClass(f).fadeIn("fast",function(){setTimeout(function(){b.persist||d.fadeOut("slow")},1800)})},hideNotice:function(){jQuery(".notice").fadeOut("slow")},setTimestamp:function(){window.timestamp=(new Date).getTime()},keyboard_nav:function(){jQuery("body").keydown(function(a){switch(a.keyCode){case 37:$("a.previous").click();break;case 39:$("a.next").click();break}})},check_browser_version:function(){},
formObserver:function(){}},Loader={start:function(a){a=jQuery("#loader");if(a.length){a.show();Loader.timer=setInterval(function(){var b=a.css("background-position-y").replace("px","");a.css({"background-position-y":b-40+"px"})},67)}},stop:function(a){a=jQuery("#loader");if(a.length){a.hide();clearInterval(Loader.timer)}}},Updater={setup:function(a,b){jQuery.each(a,function(d,f){var h=new b({id:f.id});h.merge(f);b.add(h)})},update:function(){window.ninja=true;jQuery.ajax({url:"/admin/activity.json",
type:"POST",data:{updated:window.timestamp},success:function(a){jQuery.each(a.models,function(b,d){Page.find(d.id).merge(d);Utilities.setTimestamp()});window.ninja=false}})}},aceModes={javascript:require("ace/mode/javascript").Mode,html:require("ace/mode/html").Mode,css:require("ace/mode/css").Mode,scss:require("ace/mode/scss").Mode,sass:require("ace/mode/scss").Mode,none:require("ace/mode/text").Mode},delay=function(){var a=0;return function(b,d){clearTimeout(a);a=setTimeout(b,d)}}(),Editor={initialize:function(){var a=
jQuery("#testForm input[type=button]"),b=jQuery("#testForm input#save");a.click(function(){var d=jQuery(this).data("cmd"),f=jQuery(this).data("value");if(f=="promptUser")f=prompt(jQuery(this).data("text"));var h=jQuery("iframe")[0];d&&h.contentDocument.execCommand(d,false,f)});b.click(function(){var d=document.location.pathname.split("/"),f=Page.find(d[d.length-1]),h={};jQuery("iframe").contents().find("div.editable").each(function(){var j=jQuery(this),m=j.attr("id").split("_")[0];h[m]=j.html()});
jQuery.each(h,function(j,m){m=Editor.textilize(m);f.setPartContent(j,m);console.log(m)});f.save()})},textilize:function(a,b){a=a.replace(/\s*<p>((.|[\r\n])*?)<\/p>\s*/gi,"\n\n$1\n\n\n");a=a.replace(/\s*<h1>((.|[\r\n])*?)<\/h1>\s*/gi,"h1. $1\n\n");a=a.replace(/\s*<h2>((.|[\r\n])*?)<\/h2>\s*/gi,"h2. $1\n\n");a=a.replace(/\s*<h3>((.|[\r\n])*?)<\/h3>\s*/gi,"h3. $1\n\n");a=a.replace(/\s*<h4>((.|[\r\n])*?)<\/h4>\s*/gi,"h4. $1\n\n");a=a.replace(/\s*<h5>((.|[\r\n])*?)<\/h5>\s*/gi,"h5. $1\n\n");a=a.replace(/\s*<h6>((.|[\r\n])*?)<\/h6>\s*/gi,
"h6. $1\n\n");a=a.replace(/<(?:b|strong)>((.|[\r\n])*?)<\/(?:b|strong)>/gi,"*$1*");a=a.replace(/<(?:i|em)>((.|[\r\n])*?)<\/(?:i|em)>/gi,"_$1_");a=a.replace(/<(?:strike|del)>((.|[\r\n])*?)<\/(?:strike|del)>/gi,"-$1-");a=a.replace(/<(?:u|ins)>((.|[\r\n])*?)<\/(?:u|ins)>/gi,"+$1+");a=a.replace(/<a href="(.*?)">((.|[\r\n])*?)<\/a>/gi,'"$2":$1');a=a.replace(/<code.*?>((.|[\r\n])*?)<\/code>/gi,"@$1@");if(b)a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a=a.replace(/(\r\n|\n){3,}/g,
"\n\n");return a=a.replace(/^[\r\n]+|[\r\n]+$/g,"")}},iFramer={initialize:function(a,b){var d=jQuery(a);jQuery("#loader");if(d.length){Loader.start();d.load(function(){var f=$(this),h=f.contents();h.find("div.editable").attr("contenteditable","true").css({background:"hsla(30, 17.7%, 61%, 0.3)"});Loader.stop();f.fadeIn("fast");h.find("a").click(function(j){var m=jQuery(this).attr("href").split("?")[0].replace("/preview","");if(m=Page.find_by_path(m)){j.preventDefault();history.pushState({path:m.attr("title")},
m.attr("title"),m.attr("admin_path"))}});b&&b.call(this)})}},setEditFlags:function(a){a.css({position:"relative",display:"block",height:"0",width:"0","text-decoration":"none"}).find("span").css({display:"block",position:"absolute",top:"-24px",left:"12px",padding:"4px 8px",width:"100px",background:"rgba(255, 255, 0, 0.7)"})}},Base=Sammy(function(a){a.debug=false;a.use(Sammy.JSON);a.use(Sammy.Mustache);a.use(Sammy.NestedParams);a.template_engine="mustache";a.helpers({setup:function(b,d){jQuery.each(b,
function(f,h){var j=new d({id:h.id});j.merge(h);d.add(j)})},update:function(){var b=this;window.ninja=true;jQuery.ajax({url:"/admin/activity.json",type:"POST",data:{updated:window.timestamp},success:function(d){jQuery.each(d.models,function(f,h){h.class_name=="Page"&&b.trigger("update-page",h);h.class_name=="Layout"&&b.trigger("update-layout",h);Utilities.setTimestamp()});window.ninja=false}})}});a.bind("run",function(){var b=this;jQuery("#sidebar .opener").live("click",function(){b.trigger("toggle-children",
this);return false});b.trigger("toggle-sidebar")});a.bind("set-active-tab",function(b,d){var f=jQuery("div#tabs a.tab"),h=d.split("?")[0].split("/")[2];h=jQuery("#"+h+"-tab");f.removeClass("active");h.addClass("active")});a.bind("update-page",function(b,d){var f=Page.find(d.id);f.merge(d);f.save();jQuery("li#page-"+d.id).find("span.title a").text(f.attr("title"));jQuery("h1#page-title-"+f.id()).text(f.attr("title"));jQuery("#page-iframe-"+f.id()).length&&Utilities.notice('<a class="page-reload" href="'+
f.attr("admin_path")+'">This page has been changed. Click here to reload.</span>',{persist:true,"class":"warning"})});a.bind("update-layout",function(b,d){var f=Layout.find(d.id);f.merge(d);f.save();jQuery("li#layout-"+d.id).find("span.title a").text(f.attr("name"))});a.bind("sanskrit",function(b,d){if(d.length){var f=d.find("textarea.sanskrit");f.each(function(h,j){new Sanskrit(j,{toolbar:{actions:{strong:"B",em:"I",ins:"ins",del:"del",link:"link",unlink:"unlink",textile:"Textile"}}})});setTimeout(function(){f.fadeIn("fast")},
420)}});a.bind("toggle-sidebar",function(){var b=jQuery("div#sidebar"),d=jQuery("div#editor"),f=jQuery("p#toggle");f.find("a").click(function(h){h.preventDefault();if(b.hasClass("closed")){h="300";jQuery.cookie("sidebar_toggled","")}else{h="24";jQuery.cookie("sidebar_toggled","closed")}Modernizr.cssanimations&&console.log("Move.js goes here");b.animate({width:h},200).toggleClass("closed");d.animate({left:h},200).toggleClass("open");f.animate({left:h},200).toggleClass("open")})});a.before(function(){Galerie.close()});
a.before(function(b){var d=b.path;b&&b.verb=="get"&&b.trigger("set-active-tab",d)})}),Sites=Sammy(function(){var a=this;this.helpers({loadSites:function(b){if(Site.all().length==0)Site.load(function(){b&&b.call(this)});else b&&b.call(this)},renderSiteIndex:function(b){this.load(jQuery("script#admin-sites-index")).interpolate(Site.toMustache(),"mustache").replace("#editor").then(function(){b&&b.call(this)})}});this.bind("run",function(){a.modal=false;a.refresh_pages=true});this.get("#/preview",function(){alert(document.location.hostname);
window.open("/","preview")});this.get("/admin/sites",function(b){a.refresh_pages=true;jQuery("#editor").html('<h1 class="section">Sites</div>');b.loadSites(function(){b.renderSiteIndex()})});this.get("/admin/sites/new",function(b){b.loadSites(function(){$("#modal").length==0&&Galerie.open();b.load(jQuery("script#admin-sites-new")).interpolate({},"mustache").replace("#modal");b.renderSiteIndex(Site.all())})});this.post("/admin/sites",function(b){(new Site(b.params.site)).save(function(d,f){var h=JSON.parse(f.responseText);
h.errors?alert(JSON.stringify(h)):b.redirect("#/sites")})});this.get("/admin/sites/:id/edit",function(b){b.loadSites(function(){site=Site.find(b.params.id);if(jQuery("#sites").length){jQuery(".site-form").html("");b.load(jQuery("script#admin-sites-edit")).interpolate({site:site.asJSON()},"mustache").replace("#site-form-"+site.id())}else b.renderSiteIndex(function(){jQuery(".site-form").html("");b.load(jQuery("script#admin-sites-edit")).interpolate({site:site.asJSON()},"mustache").replace("#site-form-"+
site.id())})})});this.put("/admin/sites/:id",function(b){var d=Site.find(b.params.id);d.attr(b.params.site);d.save(function(f,h){var j=JSON.parse(h.responseText);j.errors?alert(JSON.stringify(j)):b.redirect("#/sites")})});this.get("/admin/sites/:id/remove",function(b){Galerie.open();b.loadSites(function(){site=Site.find(b.params.id);b.load(jQuery("script#admin-sites-remove")).interpolate({site:site.asJSON()},"mustache").replace("#modal");b.renderSiteIndex(Site.all())})});this.del("/admin/sites/:id",
function(b){site.destroy(function(d){d?b.redirect("#/sites"):alert("there were issues")})})}),Layouts=Sammy(function(){var a=this;this.helpers({loadLayouts:function(b){b&&b.call(this)},renderLayoutIndex:function(){this.load(jQuery("script#admin-templates-index")).interpolate({layouts:Layout.find_all_by_class("Layout").map(function(b){return b.attributes}),partials:Layout.find_all_by_class("Partial").map(function(b){return b.attributes}),javascripts:Layout.find_all_by_class("Javascript").map(function(b){return b.attributes}),
stylesheets:Layout.find_all_by_class("Stylesheet").map(function(b){return b.attributes})},"mustache").replace("#sidebar")},renderLayout:function(b){this.load(jQuery("script#admin-templates-edit")).interpolate({layout:b.asJSON(),filters:[{name:"none",value:"none",selected:b.attr("filter")=="css"?'selected="selected"':""},{name:"Sass",value:"sass",selected:b.attr("filter")=="sass"?'selected="selected"':""},{name:"Scss",value:"scss",selected:b.attr("filter")=="scss"?'selected="selected"':""}]},"mustache").replace("#editor").then(function(){var d=
b.attr("mode");d=aceModes[d];window.editor=ace.edit("layout_content");window.editor.setTheme("ace/theme/textmate");window.editor.getSession().setMode(new d);window.editor.session.setUseWrapMode(true);window.editor.getSession().setValue(b.attr("content"))})}});this.bind("run",function(){a.refresh_templates=true;a.refresh_pages=true;a.modal=false});this.get("/admin/templates",function(b){a.refresh_templates=false;jQuery("#editor").html('<h1 class="section">Templates</div>');b.renderLayoutIndex(Layout.all())});
this.get("/admin/templates/new/:klass",function(b){var d=$("<div />").attr({id:"new-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(d);b.load(jQuery("#admin-templates-new")).interpolate({klass:b.params.klass},"mustache").replace("#new-page-container");b.renderLayoutIndex(Layout.all())});this.post("/admin/templates",function(b){(new Layout(b.params.template)).save(function(d,f){var h=JSON.parse(f.responseText);if(h.errors)Utilities.notice(JSON.stringify(h));else{b.redirect("/admin/templates");
Utilities.notice("Successfully saved template")}})});this.get("/admin/templates/:id/edit",function(b){a.refresh_pages=true;var d=Layout.find(b.params.id);b.renderLayout(d);b.renderLayoutIndex(Layout.all())});this.put("/admin/templates/:id",function(b){var d=Layout.find(b.params.id);b.params.layout.content=window.editor.getSession().getValue();d.attr(b.params.layout);d.save(function(f){if(f){b.renderLayoutIndex();Utilities.notice("Successfully saved template");f=aceModes[d.attr("mode")];window.editor.getSession().setUseSoftTabs(true);
window.editor.getSession().setTabSize(2);window.editor.getSession().setMode(new f)}})});this.get("/admin/templates/:id/remove",function(b){var d=Layout.find(b.params.id);Galerie.open();b.load(jQuery("#admin-templates-remove")).interpolate({layout:d.asJSON()},"mustache").replace("#modal");b.renderLayoutIndex(Layout.all())});this.del("/templates/:id",function(b){Layout.find(b.params.id).destroy(function(d){if(d){b.renderLayoutIndex();Utilities.notice("Successfully deleted template");b.redirect("/admin/templates")}})});
this.post("/layouts/:id/parts",function(b){this.loadLayouts(function(){var d=b.params.id;Part.create(b.params.part,function(){b.redirect("/admin/templates/"+d+"/edit")})})})}),Assets=Sammy(function(a){var b=this;a.helpers({renderFolderTree:function(d){if(jQuery("ul#folders").length)d&&d.call(this);else this.load(jQuery("script#admin-folders-index")).interpolate({folders:Folder.asJSON()},"mustache").replace("#sidebar").then(function(){d&&d.call(this)})},send_files:function(d,f,h){for(var j=0,m=0;m<
d.length;m++){var p=d[m];Asset.create(p,{before:function(v){jQuery(".progress").append('<p id="progress-'+v+'">'+p.name+'<span class="percentage"></span></p>')},progress:function(v,s){jQuery("#progress-"+v+" .percentage").text(" "+s+"%")},success:function(){j+=1;j==d.length&&Asset.searchAdmin(f,function(){h&&h.call(this)})}})}}});a.bind("render-asset",function(d,f,h){this.load(jQuery("script#admin-assets-edit")).interpolate(f.toMustacheWithNeighbors(h),"mustache").appendTo("body").then(function(){Utilities.loadModal("div#asset-editor",
function(){jQuery("div#asset-editor").fadeIn("fast")})})});a.bind("render-index",function(d,f){var h=this;h.load(jQuery("script#admin-assets-index")).interpolate(Asset.toMustache(f),"mustache").replace("#editor").then(function(){jQuery("a.info-icon").click(function(j){j.preventDefault();current_asset_id=this.id.split("-")[2];h.trigger("show_info",{current_asset_id:current_asset_id})});jQuery("#ajax_uploader").attr("multiple","multiple").change(function(){jQuery(this).parents("form:first").submit()});
jQuery("a.remove-icon").click(function(j){j.preventDefault();current_asset_id=this.id.split("-")[2];h.trigger("show_remove_dialog",{current_asset_id:current_asset_id})})})});a.bind("show_info",function(d,f){var h=Asset.find(f.current_asset_id),j=jQuery("#asset-"+h.id()),m=j.find(".info");jQuery(".modal-strip").remove();m.length||this.load(jQuery("#admin-assets-info")).interpolate({asset:h.toMustache()},"mustache").appendTo(j).then(function(){jQuery(".modal-strip").fadeIn("fast")})});a.bind("show_remove_dialog",
function(d,f){var h=Asset.find(f.current_asset_id),j=jQuery("#asset-"+h.id()),m=j.find(".remove");jQuery(".modal-strip").remove();m.length||this.load(jQuery("script#admin-assets-remove")).interpolate({asset:h.toMustache()},"mustache").appendTo(j).then(function(){jQuery(".modal-strip").fadeIn("fast")})});a.get("/admin/assets",function(d){jQuery("#overlay").remove();var f=d.params.query?d.params.query:"",h={query:f};h.limit=d.params.limit||48;h.page=d.params.page||1;d.renderFolderTree();Asset.searchAdmin(h,
function(){d.trigger("render-index",f)})});a.get("/admin/folders/:id",function(d){jQuery("#overlay").remove();var f=d.params.id,h=Folder.find(f);d.renderFolderTree(function(){jQuery("ul#folders li").removeClass("active");jQuery("#folder-"+f).addClass("active")});h.loadAssets(function(){d.trigger("render-index","")})});a.get("/admin/assets/new",function(d){d.load(jQuery("script#admin-assets-new")).interpolate({},"mustache").replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple",
"multiple")});b.first_run=false});a.post("/admin/assets",function(d){var f=document.getElementById("ajax_uploader").files,h=d.params.query?d.params.query:null;jQuery("form#new_asset");var j=h?{query:h}:{};j.limit=d.params.limit||48;j.page=d.params.page||1;this.send_files(f,j,function(){d.trigger("render-index",h)});return false});a.get("/admin/assets/:id/edit",function(d){jQuery("#overlay").remove();var f=d.params.query?d.params.query:"",h=f?{query:d.params.query}:{},j=Asset.find(d.params.id);j?d.trigger("render-asset",
j,f):Asset.searchAdmin(h,function(){var m=Asset.find(d.params.id);d.trigger("render-index",f);d.renderFolderTree();d.trigger("render-asset",m,f)})});a.put("/admin/assets/:id",function(d){var f=Asset.find(d.params.id);if(f){f.attr(d.params.asset);f.save(function(h){h&&Utilities.notice("Successfully saved asset")})}else{f=new Asset({id:d.params.id});f.load(function(){f.attr(d.params.asset);f.save(function(h){h&&Utilities.notice("Successfully saved asset")})})}});a.del("/admin/assets/:id",function(d){var f=
d.params.query?d.params.query:null,h=f?"?"+decodeURIComponent(jQuery.param({query:f})):"";Asset.find(d.params.id).destroy(function(j){if(j){Utilities.notice("Successfully saved asset");d.redirect("/admin/assets"+h)}})})}),Pages=Sammy(function(a){a.helpers({renderPagePreview:function(b,d){var f=this;jQuery("div#preview-"+b.id()).length?f.trigger("set-active-page",b):f.load(jQuery("script#admin-pages-show")).interpolate({page:b.asJSON(),layouts:Layout.asLayoutJSON(b.attr("layout_id")),base_page_id:b.id()},
"mustache").replace("#editor").then(function(){iFramer.initialize(".preview iframe",function(){d&&d.call(this)});f.trigger("set-active-page",b);Editor.initialize()})},renderPageEditor:function(b,d){var f=this;if(jQuery("#page-editor").length){d&&d.call(this);f.trigger("set-active-page",b)}else f.load(jQuery("script#admin-pages-edit")).interpolate({page:b.asJSON()},"mustache").replace("#editor").then(function(){jQuery("li.node").removeClass("active");jQuery("#page-"+b.id()).addClass("active");d&&d.call(this);
f.trigger("set-active-page",b)})},renderPageProperties:function(b,d){this.load(jQuery("script#admin-pages-form")).interpolate({page:b.asJSON(),layouts:Layout.asLayoutJSON(b.attr("layout_id")),base_page_id:b.id(),timestamp:window.timestamp},"mustache").replace("#page-tabs-"+b.id()).then(function(){d&&d.call(this)})},renderPageMenu:function(b){this.load(jQuery("script#admin-pages-index")).interpolate({pages:[b.asJSON()],children:b.childrenAsJSON()},"mustache").replace("#sidebar")}});a.bind("show-page-menu",
function(b,d){var f=this;if(d.children().count()==0&&d.attr("child_count")!=0){console.log("ajax");d.getChildren(function(){f.renderPageMenu(d)})}else{if(d.attr("child_count")==0)d=d.parent();f.renderPageMenu(d)}});a.bind("set-active-page",function(b,d){jQuery("li.node").removeClass("active");jQuery("li#page-"+d.id()).addClass("active")});a.bind("reload-page",function(b,d){var f=d.id(),h=jQuery("iframe#page-iframe-"+f);jQuery("li#page-"+f).find("span.title a").text(d.attr("title"));jQuery("h1#page-title-"+
f).text(d.attr("title"));h.attr("src",h.attr("src"))});this.get("/admin/pages/?",function(b){var d=Page.first();b.redirect(d.attr("admin_path"))});this.get("/admin/pages/:id/new/?",function(b){var d=Page.find(b.params.id),f=$("<div />").attr({id:"new-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(f);b.trigger("page-index");b.load(jQuery("#admin-pages-new")).interpolate({parent:d.asJSON(),layouts:Layout.asLayoutJSON(d.attr("layout_id"))},"mustache").replace("#new-page-container")});
this.post("/admin/pages/:page_id/?",function(b){Page.find(b.params.page_id);(new Page(b.params.page)).save(function(d,f){var h=JSON.parse(f.responseText);if(h.errors)alert(JSON.stringify(h));else{Utilities.notice("Successfully created page");b.redirect(h.admin_path)}})});this.get("/admin/pages/:id/?",function(b){jQuery("#overlay").remove();jQuery(".modal-editor").remove();var d=Page.find(b.params.id);if(d)b.renderPagePreview(d);else{d=new Page({id:b.params.id});d.load(function(){b.renderPagePreview(d)})}b.trigger("show-page-menu",
d)});this.get("/admin/pages/:id/edit/?",function(b){var d=Page.find(b.params.id);b.renderPageEditor(d,function(){b.renderPageProperties(d)});b.trigger("show-page-menu",d)});this.put("/admin/pages/:page_id",function(b){var d=Page.find(b.params.page_id);d.attr(b.params.page);jQuery("span.timestamp").text()<window.timestamp?alert("Someone else has edited this page, please reload and try again"):d.save(function(f){if(f){Utilities.setTimestamp();Utilities.notice("Successfully saved page");b.trigger("reload-page",
d);b.redirect(d.attr("admin_path"))}})});this.get("/admin/pages/:id/remove",function(b){var d=Page.find(b.params.id),f=$("<div />").attr({id:"remove-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(f);b.trigger("page-index");b.load(jQuery("#admin-pages-remove")).interpolate({page:d.asJSON()},"mustache").replace("#remove-page-container")});this.del("/admin/pages/:id",function(b){var d=Page.find(b.params.id);d.destroy(function(f){if(f){jQuery("#page-"+d.id()).remove();b.redirect("/admin/pages")}})})}),
Parts=Sammy(function(a){a.helpers({renderPart:function(b,d,f){var h=this;h.load(jQuery("script#admin-"+f+"-edit")).interpolate({part:b.asJSON(),page:d.asJSON(),assets:Asset.asJSON(),timestamp:window.timestamp},"mustache").replace("#page-tabs-"+d.id()).then(function(){jQuery(".modal-editor").fadeIn("fast");h.trigger("set_asset_links");jQuery("#ajax_uploader").attr("multiple","multiple").change(function(){var j=jQuery(this).parents("form:first");jQuery(".progress").slideDown("slow",function(){j.submit()})});
h.trigger("page-index")})}});this.bind("set_asset_links",function(){jQuery("#search-results-container li.asset").each(function(b,d){var f=jQuery(d).find("a"),h=jQuery(d).attr("id").split("-")[1],j=f.find("img").attr("src");f.click(function(m){m.preventDefault();jQuery("input#part-asset-id").attr("value",h);jQuery("form#edit-part img.preview").attr("src",j.replace("icon","thumbnail"))})})});this.get("/admin/pages/:page_id/parts/:id/edit",function(b){jQuery(".modal-editor").remove();$("iframe");var d=
Page.find(b.params.page_id);console.log(d);var f=d.parts().find(b.params.id);console.log(f);b.trigger("show-page-menu",d);b.renderPageEditor(d,function(){b.renderPart(f,d,"parts")})});this.get("/admin/pages/:page_id/image_parts/:id/edit",function(b){var d=Page.find(b.params.page_id),f=d.parts().find(b.params.id);$("iframe");Asset.searchAdmin({limit:"24"},function(){b.trigger("show-page-menu",d);b.renderPageEditor(d,function(){b.renderPart(f,d,"image_parts")})})});this.get("/admin/pages/:page_id/parts/:id/results",
function(b){Page.find(b.params.page_id);Part.find(b.params.id);var d=b.params.query?b.params.query:null;Asset.searchAdmin(d?{query:d}:{},function(){b.load(jQuery("#admin-pages-search_results")).interpolate(Asset.toMustache(),"mustache").replace("#search-results-container").then(function(){b.trigger("set_asset_links")})})});this.put("#/pages/:page_id/parts/:id",function(b){for(var d=Page.find(b.params.page_id),f=d.parts().find(b.params.id),h=d.attr("contents"),j=0,m=h.length;j<m;++j){f=h[j];if(b.params.id==
f.id){f.content=b.params.part.content;f.asset_id=b.params.part.asset_id;var p=Part.find(f.id);p.attr({asset_id:b.params.part.asset_id,content:b.params.part.content});p.save()}}d.save(function(v){if(v){Utilities.setTimestamp();Utilities.notice(p.attr("name")+" saved");b.trigger("reload-page",d);b.redirect(d.attr("admin_path"))}})});this.post("#/pages/:page_id/image_parts/:id/assets",function(b){Page.find(b.params.page_id).parts().find(b.params.id);var d=document.getElementById("ajax_uploader").files,
f=b.params.query?b.params.query:null;jQuery("form#new_asset");f=f?{query:f}:{};f.limit=b.params.limit||48;f.page=b.params.page||1;this.send_files(d,f,function(){b.load(jQuery("#admin-pages-search_results")).interpolate(Asset.toMustache(),"mustache").replace("#search-results-container").then(function(){jQuery("#ajax_uploader").attr("files",null);jQuery(".progress").slideUp("slow",function(){jQuery(this).html("")});b.trigger("set_asset_links")})})})}),Users=Sammy(function(){var a=this;this.helpers({loadUsers:function(b){if(User.all().length==
0)User.load(function(){b&&b.call(this)});else b&&b.call(this)},renderUserIndex:function(b){this.load(jQuery("script#admin-users-index")).interpolate(User.toMustache(),"mustache").replace("#editor").then(function(){b&&b.call(this)})}});this.bind("run",function(){a.modal=false;a.refresh_pages=true});this.get("/admin/users",function(b){jQuery("#editor").html('<h1 class="section">Users</div>');b.loadUsers(function(){b.renderUserIndex()})});this.get("/admin/users/new",function(b){b.loadUsers(function(){jQuery("#modal").length||
Galerie.open();b.load(jQuery("script#admin-users-new")).interpolate({},"mustache").replace("#modal");b.renderUserIndex()})});this.post("/admin/users",function(b){(new User(b.params.user)).save(function(d,f){var h=JSON.parse(f.responseText);h.errors?alert(JSON.stringify(h)):b.redirect("/admin/users")})});this.get("/admin/users/:id/edit",function(b){b.loadUsers(function(){user=User.find(b.params.id);if(jQuery("#users").length){jQuery(".user-form").html("");b.load(jQuery("script#admin-users-edit")).interpolate({user:user.asJSON()},
"mustache").replace("#user-form-"+user.id())}else b.renderUserIndex(function(){jQuery(".user-form").html("");b.load(jQuery("script#admin-users-edit")).interpolate({user:user.asJSON()},"mustache").replace("#user-form-"+user.id())})})});this.put("/admin/users/:id",function(b){var d=User.find(b.params.id);d.attr(b.params.user);d.save(function(f,h){var j=JSON.parse(h.responseText);j.errors?alert(JSON.stringify(j)):b.redirect("/admin/users")})})});
jQuery(document).ready(function(){var a=jQuery("#loader");jQuery("<img />",{src:"/images/loader.png"});jQuery("body").ajaxStart(function(){window.ninja||Loader.start(a)}).ajaxSuccess(function(){Loader.stop(a)});if(!jQuery("#login").length){jQuery.ajax({url:"/templates",success:function(b){jQuery("head").append(b)}});jQuery.ajax({url:"/admin/sites/current.json",success:function(b){Updater.setup(b.pages,Page);Updater.setup(b.templates,Layout);Updater.setup(b.folders,Folder);Base.run();window.timestamp=
b.now}})}Utilities.setNonHistoryLinks();require("pilot/canon").addCommand({name:"save",bindKey:{win:"Ctrl-S",mac:"Command-S",sender:"editor"},exec:function(){jQuery("form.command-save").submit()}});jQuery("a.page-reload").live("click",function(){var b=jQuery(this).attr("href").split("/")[3];b=jQuery("iframe#page-iframe-"+b);b.attr("src",b.attr("src"));Utilities.hideNotice()});jQuery("div#sidebar a").live("click",function(){Utilities.hideNotice()});jQuery(window).resize(function(){var b=jQuery("div#asset-editor");
Utilities.loadModal(b)})});Sanskrit.defaultStyle='html { padding:0; cursor:text; } body { font-family: "Helvetica Neue", Arial, helvetica; color: #333; background: #fff; font-size: 100%; margin:0; padding:0.5em; cursor:text; } p { margin: 0.5em 0; }';
