(function(k,h){function j(a){return c.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:false}function m(a){if(!db[a]){var d=X.body,b=c("<"+a+">").appendTo(d),e=b.css("display");b.remove();if(e==="none"||e===""){Xa||(Xa=X.createElement("iframe"),Xa.frameBorder=Xa.width=Xa.height=0);d.appendChild(Xa);if(!Ha||!Xa.createElement){Ha=(Xa.contentWindow||Xa.contentDocument).document;Ha.write((X.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");Ha.close()}b=Ha.createElement(a);Ha.body.appendChild(b);
e=c.css(b,"display");d.removeChild(Xa)}db[a]=e}return db[a]}function r(a,d){var b={};c.each(Pa.concat.apply([],Pa.slice(0,d)),function(){b[this]=a});return b}function t(){qb=h}function w(){setTimeout(t,0);return qb=c.now()}function F(){try{return new k.XMLHttpRequest}catch(a){}}function B(a,d,b,e){if(c.isArray(d))c.each(d,function(g,i){b||eb.test(a)?e(a,i):B(a+"["+(typeof i=="object"||c.isArray(i)?g:"")+"]",i,b,e)});else if(!b&&d!=null&&typeof d=="object")for(var f in d)B(a+"["+f+"]",d[f],b,e);else e(a,
d)}function z(a,d,b,e,f,g){f=f||d.dataTypes[0];g=g||{};g[f]=true;f=a[f];for(var i=0,n=f?f.length:0,p=a===cb,s;i<n&&(p||!s);i++){s=f[i](d,b,e);typeof s=="string"&&(!p||g[s]?(s=h):(d.dataTypes.unshift(s),s=z(a,d,b,e,s,g)))}(p||!s)&&!g["*"]&&(s=z(a,d,b,e,"*",g));return s}function N(a){return function(d,b){typeof d!="string"&&(b=d,d="*");if(c.isFunction(b))for(var e=d.toLowerCase().split(cc),f=0,g=e.length,i,n;f<g;f++){i=e[f];(n=/^\+/.test(i))&&(i=i.substr(1)||"*");i=a[i]=a[i]||[];i[n?"unshift":"push"](b)}}}
function P(a,d,b){var e=d==="width"?a.offsetWidth:a.offsetHeight,f=d==="width"?ma:Qb;if(e>0){b!=="border"&&c.each(f,function(){b||(e-=parseFloat(c.css(a,"padding"+this))||0);b==="margin"?(e+=parseFloat(c.css(a,b+this))||0):(e-=parseFloat(c.css(a,"border"+this+"Width"))||0)});return e+"px"}e=fb(a,d,d);if(e<0||e==null)e=a.style[d]||0;e=parseFloat(e)||0;b&&c.each(f,function(){e+=parseFloat(c.css(a,"padding"+this))||0;b!=="padding"&&(e+=parseFloat(c.css(a,"border"+this+"Width"))||0);b==="margin"&&(e+=
parseFloat(c.css(a,b+this))||0)});return e+"px"}function la(a,d){d.src?c.ajax({url:d.src,async:false,dataType:"script"}):c.globalEval((d.text||d.textContent||d.innerHTML||"").replace(dc,"/*$0*/"));d.parentNode&&d.parentNode.removeChild(d)}function pa(a){c.nodeName(a,"input")?na(a):"getElementsByTagName"in a&&c.grep(a.getElementsByTagName("input"),na)}function na(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function l(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):
"querySelectorAll"in a?a.querySelectorAll("*"):[]}function q(a,d){var b;if(d.nodeType===1){d.clearAttributes&&d.clearAttributes();d.mergeAttributes&&d.mergeAttributes(a);b=d.nodeName.toLowerCase();if(b==="object")d.outerHTML=a.outerHTML;else if(b!=="input"||a.type!=="checkbox"&&a.type!=="radio")if(b==="option")d.selected=a.defaultSelected;else{if(b==="input"||b==="textarea")d.defaultValue=a.defaultValue}else{a.checked&&(d.defaultChecked=d.checked=a.checked);d.value!==a.value&&(d.value=a.value)}d.removeAttribute(c.expando)}}
function y(a,d){if(d.nodeType===1&&c.hasData(a)){var b=c.expando,e=c.data(a),f=c.data(d,e);if(e=e[b]){var g=e.events;f=f[b]=c.extend({},e);if(g){delete f.handle;f.events={};for(var i in g){b=0;for(e=g[i].length;b<e;b++)c.event.add(d,i+(g[i][b].namespace?".":"")+g[i][b].namespace,g[i][b],g[i][b].data)}}}}}function E(a,d,b){d=d||0;if(c.isFunction(d))return c.grep(a,function(f,g){return!!d.call(f,g,f)===b});if(d.nodeType)return c.grep(a,function(f){return f===d===b});if(typeof d=="string"){var e=c.grep(a,
function(f){return f.nodeType===1});if(Ka.test(d))return c.filter(d,e,!b);d=c.filter(d,e)}return c.grep(a,function(f){return c.inArray(f,d)>=0===b})}function ca(a,d){return(a&&a!=="*"?a+".":"")+d.replace(La,"`").replace(gb,"&")}function oa(a){var d,b,e,f,g,i,n,p,s,x,C,R=[];f=[];g=c._data(this,"events");if(!(a.liveFired===this||!g||!g.live||a.target.disabled||a.button&&a.type==="click")){a.namespace&&(C=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)"));a.liveFired=this;
var ba=g.live.slice(0);for(n=0;n<ba.length;n++){g=ba[n];g.origType.replace(sa,"")===a.type?f.push(g.selector):ba.splice(n--,1)}f=c(a.target).closest(f,a.currentTarget);p=0;for(s=f.length;p<s;p++){x=f[p];for(n=0;n<ba.length;n++){g=ba[n];if(x.selector===g.selector&&(!C||C.test(g.namespace))&&!x.elem.disabled){i=x.elem;e=null;if(g.preType==="mouseenter"||g.preType==="mouseleave"){a.type=g.preType;(e=c(a.relatedTarget).closest(g.selector)[0])&&c.contains(i,e)&&(e=i)}(!e||e!==i)&&R.push({elem:i,handleObj:g,
level:x.level})}}}p=0;for(s=R.length;p<s;p++){f=R[p];if(b&&f.level>b)break;a.currentTarget=f.elem;a.data=f.handleObj.data;a.handleObj=f.handleObj;C=f.handleObj.origHandler.apply(f.elem,arguments);if(C===false||a.isPropagationStopped()){b=f.level;C===false&&(d=false);if(a.isImmediatePropagationStopped())break}}return d}}function T(a,d,b){var e=c.extend({},b[0]);e.type=a;e.originalEvent={};e.liveFired=h;c.event.handle.call(d,e);e.isDefaultPrevented()&&b[0].preventDefault()}function fa(){return true}
function ga(){return false}function xa(a,d,b){var e=d+"defer",f=d+"queue",g=d+"mark",i=c.data(a,e,h,true);i&&(b==="queue"||!c.data(a,f,h,true))&&(b==="mark"||!c.data(a,g,h,true))&&setTimeout(function(){!c.data(a,f,h,true)&&!c.data(a,g,h,true)&&(c.removeData(a,e,true),i.resolve())},0)}function Oa(a){for(var d in a)if(d!=="toJSON")return false;return true}function Ra(a,d,b){if(b===h&&a.nodeType===1){b="data-"+d.replace(S,"$1-$2").toLowerCase();b=a.getAttribute(b);if(typeof b=="string"){try{b=b==="true"?
true:b==="false"?false:b==="null"?null:c.isNaN(b)?M.test(b)?c.parseJSON(b):b:parseFloat(b)}catch(e){}c.data(a,d,b)}else b=h}return b}var X=k.document,Q=k.navigator,V=k.location,c=function(){function a(){if(!d.isReady){try{X.documentElement.doScroll("left")}catch(v){setTimeout(a,1);return}d.ready()}}var d=function(v,K){return new d.fn.init(v,K,f)},b=k.jQuery,e=k.$,f,g=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,i=/\S/,n=/^\s+/,p=/\s+$/,s=/\d/,x=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,C=/^[\],:{}\s]*$/,R=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
ba=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ka=/(?:^|:|,)(?:\s*\[)+/g,Ia=/(webkit)[ \/]([\w.]+)/,za=/(opera)(?:.*version)?[ \/]([\w.]+)/,Ba=/(msie) ([\w.]+)/,Ca=/(mozilla)(?:.*? rv:([\w.]+))?/,o=/-([a-z])/ig,u=function(v,K){return K.toUpperCase()},G=Q.userAgent,I,D,J=Object.prototype.toString,U=Object.prototype.hasOwnProperty,Z=Array.prototype.push,ra=Array.prototype.slice,Ma=String.prototype.trim,Ja=Array.prototype.indexOf,Sa={};d.fn=d.prototype={constructor:d,init:function(v,
K,da){var Y,qa;if(!v)return this;if(v.nodeType){this.context=this[0]=v;this.length=1;return this}if(v==="body"&&!K&&X.body){this.context=X;this[0]=X.body;this.selector=v;this.length=1;return this}if(typeof v=="string"){v.charAt(0)!=="<"||v.charAt(v.length-1)!==">"||v.length<3?(Y=g.exec(v)):(Y=[null,v,null]);if(Y&&(Y[1]||!K)){if(Y[1]){qa=(K=K instanceof d?K[0]:K)?K.ownerDocument||K:X;(da=x.exec(v))?d.isPlainObject(K)?(v=[X.createElement(da[1])],d.fn.attr.call(v,K,true)):(v=[qa.createElement(da[1])]):
(da=d.buildFragment([Y[1]],[qa]),v=(da.cacheable?d.clone(da.fragment):da.fragment).childNodes);return d.merge(this,v)}if((K=X.getElementById(Y[2]))&&K.parentNode){if(K.id!==Y[2])return da.find(v);this.length=1;this[0]=K}this.context=X;this.selector=v;return this}return!K||K.jquery?(K||da).find(v):this.constructor(K).find(v)}if(d.isFunction(v))return da.ready(v);v.selector!==h&&(this.selector=v.selector,this.context=v.context);return d.makeArray(v,this)},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},
toArray:function(){return ra.call(this,0)},get:function(v){return v==null?this.toArray():v<0?this[this.length+v]:this[v]},pushStack:function(v,K,da){var Y=this.constructor();d.isArray(v)?Z.apply(Y,v):d.merge(Y,v);Y.prevObject=this;Y.context=this.context;K==="find"?(Y.selector=this.selector+(this.selector?" ":"")+da):K&&(Y.selector=this.selector+"."+K+"("+da+")");return Y},each:function(v,K){return d.each(this,v,K)},ready:function(v){d.bindReady();I.done(v);return this},eq:function(v){return v===-1?
this.slice(v):this.slice(v,+v+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(ra.apply(this,arguments),"slice",ra.call(arguments).join(","))},map:function(v){return this.pushStack(d.map(this,function(K,da){return v.call(K,da,K)}))},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:[].sort,splice:[].splice};d.fn.init.prototype=d.fn;d.extend=d.fn.extend=function(){var v,K,da,Y,qa,Aa,Da=arguments[0]||{},Fa=1,
vb=arguments.length,wb=false;typeof Da=="boolean"&&(wb=Da,Da=arguments[1]||{},Fa=2);typeof Da!="object"&&!d.isFunction(Da)&&(Da={});for(vb===Fa&&(Da=this,--Fa);Fa<vb;Fa++)if((v=arguments[Fa])!=null)for(K in v){da=Da[K];Y=v[K];if(Da!==Y)wb&&Y&&(d.isPlainObject(Y)||(qa=d.isArray(Y)))?(qa?(qa=false,Aa=da&&d.isArray(da)?da:[]):(Aa=da&&d.isPlainObject(da)?da:{}),Da[K]=d.extend(wb,Aa,Y)):Y!==h&&(Da[K]=Y)}return Da};d.extend({noConflict:function(v){k.$===d&&(k.$=e);v&&k.jQuery===d&&(k.jQuery=b);return d},
isReady:false,readyWait:1,holdReady:function(v){v?d.readyWait++:d.ready(true)},ready:function(v){if(v===true&&!--d.readyWait||v!==true&&!d.isReady){if(!X.body)return setTimeout(d.ready,1);d.isReady=true;if(!(v!==true&&--d.readyWait>0)){I.resolveWith(X,[d]);d.fn.trigger&&d(X).trigger("ready").unbind("ready")}}},bindReady:function(){if(!I){I=d._Deferred();if(X.readyState==="complete")return setTimeout(d.ready,1);if(X.addEventListener){X.addEventListener("DOMContentLoaded",D,false);k.addEventListener("load",
d.ready,false)}else if(X.attachEvent){X.attachEvent("onreadystatechange",D);k.attachEvent("onload",d.ready);var v=false;try{v=k.frameElement==null}catch(K){}X.documentElement.doScroll&&v&&a()}}},isFunction:function(v){return d.type(v)==="function"},isArray:Array.isArray||function(v){return d.type(v)==="array"},isWindow:function(v){return v&&typeof v=="object"&&"setInterval"in v},isNaN:function(v){return v==null||!s.test(v)||isNaN(v)},type:function(v){return v==null?String(v):Sa[J.call(v)]||"object"},
isPlainObject:function(v){if(!v||d.type(v)!=="object"||v.nodeType||d.isWindow(v))return false;if(v.constructor&&!U.call(v,"constructor")&&!U.call(v.constructor.prototype,"isPrototypeOf"))return false;var K;for(K in v);return K===h||U.call(v,K)},isEmptyObject:function(v){for(var K in v)return false;return true},error:function(v){throw v;},parseJSON:function(v){if(typeof v!="string"||!v)return null;v=d.trim(v);if(k.JSON&&k.JSON.parse)return k.JSON.parse(v);if(C.test(v.replace(R,"@").replace(ba,"]").replace(ka,
"")))return(new Function("return "+v))();d.error("Invalid JSON: "+v)},parseXML:function(v,K,da){k.DOMParser?(da=new DOMParser,K=da.parseFromString(v,"text/xml")):(K=new ActiveXObject("Microsoft.XMLDOM"),K.async="false",K.loadXML(v));da=K.documentElement;(!da||!da.nodeName||da.nodeName==="parsererror")&&d.error("Invalid XML: "+v);return K},noop:function(){},globalEval:function(v){v&&i.test(v)&&(k.execScript||function(K){k.eval.call(k,K)})(v)},camelCase:function(v){return v.replace(o,u)},nodeName:function(v,
K){return v.nodeName&&v.nodeName.toUpperCase()===K.toUpperCase()},each:function(v,K,da){var Y,qa=0,Aa=v.length,Da=Aa===h||d.isFunction(v);if(da)if(Da)for(Y in v){if(K.apply(v[Y],da)===false)break}else for(;qa<Aa;){if(K.apply(v[qa++],da)===false)break}else if(Da)for(Y in v){if(K.call(v[Y],Y,v[Y])===false)break}else for(;qa<Aa;)if(K.call(v[qa],qa,v[qa++])===false)break;return v},trim:Ma?function(v){return v==null?"":Ma.call(v)}:function(v){return v==null?"":(v+"").replace(n,"").replace(p,"")},makeArray:function(v,
K){var da=K||[];if(v!=null){var Y=d.type(v);v.length==null||Y==="string"||Y==="function"||Y==="regexp"||d.isWindow(v)?Z.call(da,v):d.merge(da,v)}return da},inArray:function(v,K){if(Ja)return Ja.call(K,v);for(var da=0,Y=K.length;da<Y;da++)if(K[da]===v)return da;return-1},merge:function(v,K){var da=v.length,Y=0;if(typeof K.length=="number")for(var qa=K.length;Y<qa;Y++)v[da++]=K[Y];else for(;K[Y]!==h;)v[da++]=K[Y++];v.length=da;return v},grep:function(v,K,da){var Y=[],qa;da=!!da;for(var Aa=0,Da=v.length;Aa<
Da;Aa++){qa=!!K(v[Aa],Aa);da!==qa&&Y.push(v[Aa])}return Y},map:function(v,K,da){var Y,qa,Aa=[],Da=0,Fa=v.length;if(v instanceof d||Fa!==h&&typeof Fa=="number"&&(Fa>0&&v[0]&&v[Fa-1]||Fa===0||d.isArray(v)))for(;Da<Fa;Da++){Y=K(v[Da],Da,da);Y!=null&&(Aa[Aa.length]=Y)}else for(qa in v){Y=K(v[qa],qa,da);Y!=null&&(Aa[Aa.length]=Y)}return Aa.concat.apply([],Aa)},guid:1,proxy:function(v,K){if(typeof K=="string"){var da=v[K];K=v;v=da}if(!d.isFunction(v))return h;var Y=ra.call(arguments,2);da=function(){return v.apply(K,
Y.concat(ra.call(arguments)))};da.guid=v.guid=v.guid||da.guid||d.guid++;return da},access:function(v,K,da,Y,qa,Aa){var Da=v.length;if(typeof K=="object"){for(var Fa in K)d.access(v,Fa,K[Fa],Y,qa,da);return v}if(da!==h){Y=!Aa&&Y&&d.isFunction(da);for(Fa=0;Fa<Da;Fa++)qa(v[Fa],K,Y?da.call(v[Fa],Fa,qa(v[Fa],K)):da,Aa);return v}return Da?qa(v[0],K):h},now:function(){return(new Date).getTime()},uaMatch:function(v){v=v.toLowerCase();v=Ia.exec(v)||za.exec(v)||Ba.exec(v)||v.indexOf("compatible")<0&&Ca.exec(v)||
[];return{browser:v[1]||"",version:v[2]||"0"}},sub:function(){function v(da,Y){return new v.fn.init(da,Y)}d.extend(true,v,this);v.superclass=this;v.fn=v.prototype=this();v.fn.constructor=v;v.sub=this.sub;v.fn.init=function(da,Y){Y&&Y instanceof d&&!(Y instanceof v)&&(Y=v(Y));return d.fn.init.call(this,da,Y,K)};v.fn.init.prototype=v.fn;var K=v(X);return v},browser:{}});d.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(v,K){Sa["[object "+K+"]"]=K.toLowerCase()});G=
d.uaMatch(G);G.browser&&(d.browser[G.browser]=true,d.browser.version=G.version);d.browser.webkit&&(d.browser.safari=true);i.test("\u00a0")&&(n=/^[\s\xA0]+/,p=/[\s\xA0]+$/);f=d(X);X.addEventListener?(D=function(){X.removeEventListener("DOMContentLoaded",D,false);d.ready()}):X.attachEvent&&(D=function(){X.readyState==="complete"&&(X.detachEvent("onreadystatechange",D),d.ready())});return d}(),A="done fail isResolved isRejected promise then always pipe".split(" "),L=[].slice;c.extend({_Deferred:function(){var a=
[],d,b,e,f={done:function(){if(!e){var g=arguments,i,n,p,s,x;d&&(x=d,d=0);i=0;for(n=g.length;i<n;i++){p=g[i];s=c.type(p);s==="array"?f.done.apply(f,p):s==="function"&&a.push(p)}x&&f.resolveWith(x[0],x[1])}return this},resolveWith:function(g,i){if(!e&&!d&&!b){i=i||[];b=1;try{for(;a[0];)a.shift().apply(g,i)}finally{d=[g,i];b=0}}return this},resolve:function(){f.resolveWith(this,arguments);return this},isResolved:function(){return!!b||!!d},cancel:function(){e=1;a=[];return this}};return f},Deferred:function(a){var d=
c._Deferred(),b=c._Deferred(),e;c.extend(d,{then:function(f,g){d.done(f).fail(g);return this},always:function(){return d.done.apply(d,arguments).fail.apply(this,arguments)},fail:b.done,rejectWith:b.resolveWith,reject:b.resolve,isRejected:b.isResolved,pipe:function(f,g){return c.Deferred(function(i){c.each({done:[f,"resolve"],fail:[g,"reject"]},function(n,p){var s=p[0],x=p[1],C;c.isFunction(s)?d[n](function(){(C=s.apply(this,arguments))&&c.isFunction(C.promise)?C.promise().then(i.resolve,i.reject):
i[x](C)}):d[n](i[x])})}).promise()},promise:function(f){if(f==null){if(e)return e;e=f={}}for(var g=A.length;g--;)f[A[g]]=d[A[g]];return f}});d.done(b.cancel).fail(d.cancel);delete d.cancel;a&&a.call(d,d);return d},when:function(a){function d(n){return function(p){b[n]=arguments.length>1?L.call(arguments,0):p;--g||i.resolveWith(i,L.call(b,0))}}var b=arguments,e=0,f=b.length,g=f,i=f<=1&&a&&c.isFunction(a.promise)?a:c.Deferred();if(f>1){for(;e<f;e++)b[e]&&c.isFunction(b[e].promise)?b[e].promise().then(d(e),
i.reject):--g;g||i.resolveWith(i,b)}else i!==a&&i.resolveWith(i,f?[a]:[]);return i.promise()}});c.support=function(){var a=X.createElement("div"),d=X.documentElement,b,e,f,g,i,n,p;a.setAttribute("className","t");a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";b=a.getElementsByTagName("*");e=a.getElementsByTagName("a")[0];if(!b||!b.length||!e)return{};f=X.createElement("select");g=f.appendChild(X.createElement("option"));b=a.getElementsByTagName("input")[0];
n={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55$/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:b.value==="on",optSelected:g.selected,getSetAttribute:a.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,
shrinkWrapBlocks:false,reliableMarginRight:true};b.checked=true;n.noCloneChecked=b.cloneNode(true).checked;f.disabled=true;n.optDisabled=!g.disabled;try{delete a.test}catch(s){n.deleteExpando=false}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){n.noCloneEvent=false}),a.cloneNode(true).fireEvent("onclick"));b=X.createElement("input");b.value="t";b.setAttribute("type","radio");n.radioValue=b.value==="t";b.setAttribute("checked","checked");a.appendChild(b);e=X.createDocumentFragment();
e.appendChild(a.firstChild);n.checkClone=e.cloneNode(true).cloneNode(true).lastChild.checked;a.innerHTML="";a.style.width=a.style.paddingLeft="1px";f=X.getElementsByTagName("body")[0];e=X.createElement(f?"div":"body");g={visibility:"hidden",width:0,height:0,border:0,margin:0};f&&c.extend(g,{position:"absolute",left:-1000,top:-1000});for(p in g)e.style[p]=g[p];e.appendChild(a);d=f||d;d.insertBefore(e,d.firstChild);n.appendChecked=b.checked;n.boxModel=a.offsetWidth===2;"zoom"in a.style&&(a.style.display=
"inline",a.style.zoom=1,n.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",n.shrinkWrapBlocks=a.offsetWidth!==2);a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";f=a.getElementsByTagName("td");b=f[0].offsetHeight===0;f[0].style.display="";f[1].style.display="none";n.reliableHiddenOffsets=b&&f[0].offsetHeight===0;a.innerHTML="";X.defaultView&&X.defaultView.getComputedStyle&&(i=X.createElement("div"),
i.style.width="0",i.style.marginRight="0",a.appendChild(i),n.reliableMarginRight=(parseInt((X.defaultView.getComputedStyle(i,null)||{marginRight:0}).marginRight,10)||0)===0);e.innerHTML="";d.removeChild(e);if(a.attachEvent)for(p in{submit:1,change:1,focusin:1}){i="on"+p;(b=i in a)||(a.setAttribute(i,"return;"),b=typeof a[i]=="function");n[p+"Bubbles"]=b}e=e=f=g=f=i=a=b=null;return n}();c.boxModel=c.support.boxModel;var M=/^(?:\{.*\}|\[.*\])$/,S=/([a-z])([A-Z])/g;c.extend({cache:{},uuid:0,expando:"jQuery"+
(c.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(a){a=a.nodeType?c.cache[a[c.expando]]:a[c.expando];return!!a&&!Oa(a)},data:function(a,d,b,e){if(c.acceptData(a)){var f=c.expando,g=typeof d=="string",i=a.nodeType,n=i?c.cache:a,p=i?a[c.expando]:a[c.expando]&&c.expando;if(!((!p||e&&p&&!n[p][f])&&g&&b===h)){p||(i?(a[c.expando]=p=++c.uuid):(p=c.expando));n[p]||(n[p]={},i||(n[p].toJSON=c.noop));if(typeof d==
"object"||typeof d=="function")e?(n[p][f]=c.extend(n[p][f],d)):(n[p]=c.extend(n[p],d));a=n[p];e&&(a[f]||(a[f]={}),a=a[f]);b!==h&&(a[c.camelCase(d)]=b);if(d==="events"&&!a[d])return a[f]&&a[f].events;return g?a[c.camelCase(d)]||a[d]:a}}},removeData:function(a,d,b){if(c.acceptData(a)){var e=c.expando,f=a.nodeType,g=f?c.cache:a,i=f?a[c.expando]:c.expando;if(g[i]){if(d){var n=b?g[i][e]:g[i];if(n){delete n[d];if(!Oa(n))return}}if(b){delete g[i][e];if(!Oa(g[i]))return}d=g[i][e];c.support.deleteExpando||
g!=k?delete g[i]:(g[i]=null);d?(g[i]={},f||(g[i].toJSON=c.noop),g[i][e]=d):f&&(c.support.deleteExpando?delete a[c.expando]:a.removeAttribute?a.removeAttribute(c.expando):(a[c.expando]=null))}}},_data:function(a,d,b){return c.data(a,d,b,true)},acceptData:function(a){if(a.nodeName){var d=c.noData[a.nodeName.toLowerCase()];if(d)return d!==true&&a.getAttribute("classid")===d}return true}});c.fn.extend({data:function(a,d){var b=null;if(typeof a=="undefined"){if(this.length){b=c.data(this[0]);if(this[0].nodeType===
1)for(var e=this[0].attributes,f,g=0,i=e.length;g<i;g++){f=e[g].name;f.indexOf("data-")===0&&(f=c.camelCase(f.substring(5)),Ra(this[0],f,b[f]))}}return b}if(typeof a=="object")return this.each(function(){c.data(this,a)});var n=a.split(".");n[1]=n[1]?"."+n[1]:"";if(d===h){b=this.triggerHandler("getData"+n[1]+"!",[n[0]]);b===h&&this.length&&(b=c.data(this[0],a),b=Ra(this[0],a,b));return b===h&&n[1]?this.data(n[0]):b}return this.each(function(){var p=c(this),s=[n[0],d];p.triggerHandler("setData"+n[1]+
"!",s);c.data(this,a,d);p.triggerHandler("changeData"+n[1]+"!",s)})},removeData:function(a){return this.each(function(){c.removeData(this,a)})}});c.extend({_mark:function(a,d){a&&(d=(d||"fx")+"mark",c.data(a,d,(c.data(a,d,h,true)||0)+1,true))},_unmark:function(a,d,b){a!==true&&(b=d,d=a,a=false);if(d){b=b||"fx";var e=b+"mark";(a=a?0:(c.data(d,e,h,true)||1)-1)?c.data(d,e,a,true):(c.removeData(d,e,true),xa(d,b,"mark"))}},queue:function(a,d,b){if(a){d=(d||"fx")+"queue";var e=c.data(a,d,h,true);b&&(!e||
c.isArray(b)?(e=c.data(a,d,c.makeArray(b),true)):e.push(b));return e||[]}},dequeue:function(a,d){d=d||"fx";var b=c.queue(a,d),e=b.shift();e==="inprogress"&&(e=b.shift());e&&(d==="fx"&&b.unshift("inprogress"),e.call(a,function(){c.dequeue(a,d)}));b.length||(c.removeData(a,d+"queue",true),xa(a,d,"queue"))}});c.fn.extend({queue:function(a,d){typeof a!="string"&&(d=a,a="fx");if(d===h)return c.queue(this[0],a);return this.each(function(){var b=c.queue(this,a,d);a==="fx"&&b[0]!=="inprogress"&&c.dequeue(this,
a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,a)})},delay:function(a,d){a=c.fx?c.fx.speeds[a]||a:a;d=d||"fx";return this.queue(d,function(){var b=this;setTimeout(function(){c.dequeue(b,d)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,d){function b(){--i||e.resolveWith(f,[f])}typeof a!="string"&&(d=a,a=h);a=a||"fx";for(var e=c.Deferred(),f=this,g=f.length,i=1,n=a+"defer",p=a+"queue",s=a+"mark",x;g--;)if(x=c.data(f[g],n,h,true)||(c.data(f[g],
p,h,true)||c.data(f[g],s,h,true))&&c.data(f[g],n,c._Deferred(),true)){i++;x.done(b)}b();return e.promise()}});var ja=/[\n\t\r]/g,ia=/\s+/,wa=/\r/g,Ga=/^(?:button|input)$/i,ua=/^(?:button|input|object|select|textarea)$/i,Na=/^a(?:rea)?$/i,H=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ea=/\:|^on/,aa,ha;c.fn.extend({attr:function(a,d){return c.access(this,a,d,true,c.attr)},removeAttr:function(a){return this.each(function(){c.removeAttr(this,
a)})},prop:function(a,d){return c.access(this,a,d,true,c.prop)},removeProp:function(a){a=c.propFix[a]||a;return this.each(function(){try{this[a]=h;delete this[a]}catch(d){}})},addClass:function(a){var d,b,e,f,g,i,n;if(c.isFunction(a))return this.each(function(p){c(this).addClass(a.call(this,p,this.className))});if(a&&typeof a=="string"){d=a.split(ia);b=0;for(e=this.length;b<e;b++){f=this[b];if(f.nodeType===1)if(!f.className&&d.length===1)f.className=a;else{g=" "+f.className+" ";i=0;for(n=d.length;i<
n;i++)~g.indexOf(" "+d[i]+" ")||(g+=d[i]+" ");f.className=c.trim(g)}}}return this},removeClass:function(a){var d,b,e,f,g,i,n;if(c.isFunction(a))return this.each(function(p){c(this).removeClass(a.call(this,p,this.className))});if(a&&typeof a=="string"||a===h){d=(a||"").split(ia);b=0;for(e=this.length;b<e;b++){f=this[b];if(f.nodeType===1&&f.className)if(a){g=(" "+f.className+" ").replace(ja," ");i=0;for(n=d.length;i<n;i++)g=g.replace(" "+d[i]+" "," ");f.className=c.trim(g)}else f.className=""}}return this},
toggleClass:function(a,d){var b=typeof a,e=typeof d=="boolean";if(c.isFunction(a))return this.each(function(f){c(this).toggleClass(a.call(this,f,this.className,d),d)});return this.each(function(){if(b==="string")for(var f,g=0,i=c(this),n=d,p=a.split(ia);f=p[g++];){n=e?n:!i.hasClass(f);i[n?"addClass":"removeClass"](f)}else if(b==="undefined"||b==="boolean"){this.className&&c._data(this,"__className__",this.className);this.className=this.className||a===false?"":c._data(this,"__className__")||""}})},
hasClass:function(a){for(var d=0,b=this.length;d<b;d++)if((" "+this[d].className+" ").replace(ja," ").indexOf(" "+a+" ")>-1)return true;return false},val:function(a){var d,b,e=this[0];if(!arguments.length){if(e){if((d=c.valHooks[e.nodeName.toLowerCase()]||c.valHooks[e.type])&&"get"in d&&(b=d.get(e,"value"))!==h)return b;b=e.value;return typeof b=="string"?b.replace(wa,""):b==null?"":b}return h}var f=c.isFunction(a);return this.each(function(g){var i=c(this),n;if(this.nodeType===1){f?(n=a.call(this,
g,i.val())):(n=a);n==null?(n=""):typeof n=="number"?(n+=""):c.isArray(n)&&(n=c.map(n,function(p){return p==null?"":p+""}));d=c.valHooks[this.nodeName.toLowerCase()]||c.valHooks[this.type];if(!d||!("set"in d)||d.set(this,n,"value")===h)this.value=n}})}});c.extend({valHooks:{option:{get:function(a){var d=a.attributes.value;return!d||d.specified?a.value:a.text}},select:{get:function(a){var d,b=a.selectedIndex,e=[],f=a.options;a=a.type==="select-one";if(b<0)return null;for(var g=a?b:0,i=a?b+1:f.length;g<
i;g++){d=f[g];if(d.selected&&(c.support.optDisabled?!d.disabled:d.getAttribute("disabled")===null)&&(!d.parentNode.disabled||!c.nodeName(d.parentNode,"optgroup"))){d=c(d).val();if(a)return d;e.push(d)}}if(a&&!e.length&&f.length)return c(f[b]).val();return e},set:function(a,d){var b=c.makeArray(d);c(a).find("option").each(function(){this.selected=c.inArray(c(this).val(),b)>=0});b.length||(a.selectedIndex=-1);return b}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,
offset:true},attrFix:{tabindex:"tabIndex"},attr:function(a,d,b,e){var f=a.nodeType;if(!a||f===3||f===8||f===2)return h;if(e&&d in c.attrFn)return c(a)[d](b);if(!("getAttribute"in a))return c.prop(a,d,b);var g,i;(e=f!==1||!c.isXMLDoc(a))&&(d=c.attrFix[d]||d,i=c.attrHooks[d],i||(H.test(d)?(i=ha):aa&&d!=="className"&&(c.nodeName(a,"form")||ea.test(d))&&(i=aa)));if(b!==h){if(b===null){c.removeAttr(a,d);return h}if(i&&"set"in i&&e&&(g=i.set(a,b,d))!==h)return g;a.setAttribute(d,""+b);return b}if(i&&"get"in
i&&e&&(g=i.get(a,d))!==null)return g;g=a.getAttribute(d);return g===null?h:g},removeAttr:function(a,d){var b;a.nodeType===1&&(d=c.attrFix[d]||d,c.support.getSetAttribute?a.removeAttribute(d):(c.attr(a,d,""),a.removeAttributeNode(a.getAttributeNode(d))),H.test(d)&&(b=c.propFix[d]||d)in a&&(a[b]=false))},attrHooks:{type:{set:function(a,d){if(Ga.test(a.nodeName)&&a.parentNode)c.error("type property can't be changed");else if(!c.support.radioValue&&d==="radio"&&c.nodeName(a,"input")){var b=a.value;a.setAttribute("type",
d);b&&(a.value=b);return d}}},tabIndex:{get:function(a){var d=a.getAttributeNode("tabIndex");return d&&d.specified?parseInt(d.value,10):ua.test(a.nodeName)||Na.test(a.nodeName)&&a.href?0:h}},value:{get:function(a,d){if(aa&&c.nodeName(a,"button"))return aa.get(a,d);return d in a?a.value:null},set:function(a,d,b){if(aa&&c.nodeName(a,"button"))return aa.set(a,d,b);a.value=d}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",
cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,d,b){var e=a.nodeType;if(!a||e===3||e===8||e===2)return h;var f,g;(e!==1||!c.isXMLDoc(a))&&(d=c.propFix[d]||d,g=c.propHooks[d]);return b!==h?g&&"set"in g&&(f=g.set(a,b,d))!==h?f:(a[d]=b):g&&"get"in g&&(f=g.get(a,d))!==h?f:a[d]},propHooks:{}});ha={get:function(a,d){return c.prop(a,d)?d.toLowerCase():h},set:function(a,d,b){var e;d===false?c.removeAttr(a,
b):(e=c.propFix[b]||b,e in a&&(a[e]=true),a.setAttribute(b,b.toLowerCase()));return b}};c.support.getSetAttribute||(c.attrFix=c.propFix,aa=c.attrHooks.name=c.attrHooks.title=c.valHooks.button={get:function(a,d){var b;return(b=a.getAttributeNode(d))&&b.nodeValue!==""?b.nodeValue:h},set:function(a,d,b){if(a=a.getAttributeNode(b))return a.nodeValue=d}},c.each(["width","height"],function(a,d){c.attrHooks[d]=c.extend(c.attrHooks[d],{set:function(b,e){if(e===""){b.setAttribute(d,"auto");return e}}})}));
c.support.hrefNormalized||c.each(["href","src","width","height"],function(a,d){c.attrHooks[d]=c.extend(c.attrHooks[d],{get:function(b){b=b.getAttribute(d,2);return b===null?h:b}})});c.support.style||(c.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||h},set:function(a,d){return a.style.cssText=""+d}});c.support.optSelected||(c.propHooks.selected=c.extend(c.propHooks.selected,{get:function(){}}));c.support.checkOn||c.each(["radio","checkbox"],function(){c.valHooks[this]={get:function(a){return a.getAttribute("value")===
null?"on":a.value}}});c.each(["radio","checkbox"],function(){c.valHooks[this]=c.extend(c.valHooks[this],{set:function(a,d){if(c.isArray(d))return a.checked=c.inArray(c(a).val(),d)>=0}})});var sa=/\.(.*)$/,ta=/^(?:textarea|input|select)$/i,La=/\./g,gb=/ /g,kb=/[^\w\s.|`]/g,Fb=function(a){return a.replace(kb,"\\$&")};c.event={add:function(a,d,b,e){if(a.nodeType!==3&&a.nodeType!==8){if(b===false)b=ga;else if(!b)return;var f,g;b.handler&&(f=b,b=f.handler);b.guid||(b.guid=c.guid++);if(g=c._data(a)){var i=
g.events,n=g.handle;i||(g.events=i={});n||(g.handle=n=function(ba){return typeof c!="undefined"&&(!ba||c.event.triggered!==ba.type)?c.event.handle.apply(n.elem,arguments):h});n.elem=a;d=d.split(" ");for(var p,s=0,x;p=d[s++];){g=f?c.extend({},f):{handler:b,data:e};p.indexOf(".")>-1?(x=p.split("."),p=x.shift(),g.namespace=x.slice(0).sort().join(".")):(x=[],g.namespace="");g.type=p;g.guid||(g.guid=b.guid);var C=i[p],R=c.event.special[p]||{};if(!C){C=i[p]=[];if(!R.setup||R.setup.call(a,e,x,n)===false)a.addEventListener?
a.addEventListener(p,n,false):a.attachEvent&&a.attachEvent("on"+p,n)}R.add&&(R.add.call(a,g),g.handler.guid||(g.handler.guid=b.guid));C.push(g);c.event.global[p]=true}a=null}}},global:{},remove:function(a,d,b,e){if(a.nodeType!==3&&a.nodeType!==8){b===false&&(b=ga);var f,g,i=0,n,p,s,x,C,R,ba=c.hasData(a)&&c._data(a),ka=ba&&ba.events;if(ba&&ka){d&&d.type&&(b=d.handler,d=d.type);if(!d||typeof d=="string"&&d.charAt(0)===".")for(f in ka)c.event.remove(a,f+(d||""));else{for(d=d.split(" ");f=d[i++];){x=
f;n=f.indexOf(".")<0;p=[];n||(p=f.split("."),f=p.shift(),s=new RegExp("(^|\\.)"+c.map(p.slice(0).sort(),Fb).join("\\.(?:.*\\.)?")+"(\\.|$)"));if(C=ka[f])if(b){x=c.event.special[f]||{};for(g=e||0;g<C.length;g++){R=C[g];if(b.guid===R.guid){if(n||s.test(R.namespace)){e==null&&C.splice(g--,1);x.remove&&x.remove.call(a,R)}if(e!=null)break}}if(C.length===0||e!=null&&C.length===1){(!x.teardown||x.teardown.call(a,p)===false)&&c.removeEvent(a,f,ba.handle);delete ka[f]}}else for(g=0;g<C.length;g++){R=C[g];
if(n||s.test(R.namespace)){c.event.remove(a,x,R.handler,g);C.splice(g--,1)}}}if(c.isEmptyObject(ka)){(d=ba.handle)&&(d.elem=null);delete ba.events;delete ba.handle;c.isEmptyObject(ba)&&c.removeData(a,h,true)}}}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(a,d,b,e){var f=a.type||a,g=[],i;f.indexOf("!")>=0&&(f=f.slice(0,-1),i=true);f.indexOf(".")>=0&&(g=f.split("."),f=g.shift(),g.sort());if(b&&!c.event.customEvent[f]||c.event.global[f]){a=typeof a=="object"?a[c.expando]?
a:new c.Event(f,a):new c.Event(f);a.type=f;a.exclusive=i;a.namespace=g.join(".");a.namespace_re=new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.)?")+"(\\.|$)");if(e||!b){a.preventDefault();a.stopPropagation()}if(b){if(!(b.nodeType===3||b.nodeType===8)){a.result=h;a.target=b;d=d!=null?c.makeArray(d):[];d.unshift(a);g=b;e=f.indexOf(":")<0?"on"+f:"";do{i=c._data(g,"handle");a.currentTarget=g;i&&i.apply(g,d);e&&c.acceptData(g)&&g[e]&&g[e].apply(g,d)===false&&(a.result=false,a.preventDefault());g=g.parentNode||
g.ownerDocument||g===a.target.ownerDocument&&k}while(g&&!a.isPropagationStopped());if(!a.isDefaultPrevented()){var n;g=c.event.special[f]||{};if((!g._default||g._default.call(b.ownerDocument,a)===false)&&(f!=="click"||!c.nodeName(b,"a"))&&c.acceptData(b)){try{e&&b[f]&&(n=b[e],n&&(b[e]=null),c.event.triggered=f,b[f]())}catch(p){}n&&(b[e]=n);c.event.triggered=h}}return a.result}}else c.each(c.cache,function(){var s=this[c.expando];s&&s.events&&s.events[f]&&c.event.trigger(a,d,s.handle.elem)})}},handle:function(a){a=
c.event.fix(a||k.event);var d=((c._data(this,"events")||{})[a.type]||[]).slice(0),b=!a.exclusive&&!a.namespace,e=Array.prototype.slice.call(arguments,0);e[0]=a;a.currentTarget=this;for(var f=0,g=d.length;f<g;f++){var i=d[f];if(b||a.namespace_re.test(i.namespace)){a.handler=i.handler;a.data=i.data;a.handleObj=i;i=i.handler.apply(this,e);i!==h&&(a.result=i,i===false&&(a.preventDefault(),a.stopPropagation()));if(a.isImmediatePropagationStopped())break}}return a.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(a){if(a[c.expando])return a;var d=a;a=c.Event(d);for(var b=this.props.length,e;b;){e=this.props[--b];a[e]=d[e]}a.target||(a.target=a.srcElement||X);a.target.nodeType===3&&(a.target=a.target.parentNode);!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){b=a.target.ownerDocument||X;d=b.documentElement;b=b.body;a.pageX=a.clientX+(d&&d.scrollLeft||b&&b.scrollLeft||0)-(d&&d.clientLeft||b&&b.clientLeft||0);
a.pageY=a.clientY+(d&&d.scrollTop||b&&b.scrollTop||0)-(d&&d.clientTop||b&&b.clientTop||0)}a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode);!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey);!a.which&&a.button!==h&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0);return a},guid:1E8,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,ca(a.origType,a.selector),c.extend({},a,{handler:oa,guid:a.handler.guid}))},
remove:function(a){c.event.remove(this,ca(a.origType,a.selector),a)}},beforeunload:{setup:function(a,d,b){c.isWindow(this)&&(this.onbeforeunload=b)},teardown:function(a,d){this.onbeforeunload===d&&(this.onbeforeunload=null)}}}};c.removeEvent=X.removeEventListener?function(a,d,b){a.removeEventListener&&a.removeEventListener(d,b,false)}:function(a,d,b){a.detachEvent&&a.detachEvent("on"+d,b)};c.Event=function(a,d){if(!this.preventDefault)return new c.Event(a,d);a&&a.type?(this.originalEvent=a,this.type=
a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===false||a.getPreventDefault&&a.getPreventDefault()?fa:ga):(this.type=a);d&&c.extend(this,d);this.timeStamp=c.now();this[c.expando]=true};c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=fa;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():(a.returnValue=false))},stopPropagation:function(){this.isPropagationStopped=fa;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=
true)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=fa;this.stopPropagation()},isDefaultPrevented:ga,isPropagationStopped:ga,isImmediatePropagationStopped:ga};var Rb=function(a){var d=a.relatedTarget,b=false,e=a.type;a.type=a.data;d!==this&&(d&&(b=c.contains(this,d)),b||(c.event.handle.apply(this,arguments),a.type=e))},Sb=function(a){a.type=a.data;c.event.handle.apply(this,arguments)};c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,d){c.event.special[a]=
{setup:function(b){c.event.add(this,d,b&&b.selector?Sb:Rb,a)},teardown:function(b){c.event.remove(this,d,b&&b.selector?Sb:Rb)}}});c.support.submitBubbles||(c.event.special.submit={setup:function(){if(c.nodeName(this,"form"))return false;else{c.event.add(this,"click.specialSubmit",function(a){var d=a.target,b=d.type;(b==="submit"||b==="image")&&c(d).closest("form").length&&T("submit",this,arguments)});c.event.add(this,"keypress.specialSubmit",function(a){var d=a.target,b=d.type;(b==="text"||b==="password")&&
c(d).closest("form").length&&a.keyCode===13&&T("submit",this,arguments)})}},teardown:function(){c.event.remove(this,".specialSubmit")}});if(!c.support.changeBubbles){var lb,Gb=function(a){var d=a.type,b=a.value;d==="radio"||d==="checkbox"?(b=a.checked):d==="select-multiple"?(b=a.selectedIndex>-1?c.map(a.options,function(e){return e.selected}).join("-"):""):c.nodeName(a,"select")&&(b=a.selectedIndex);return b},Hb=function(a,d){var b=a.target,e,f;if(ta.test(b.nodeName)&&!b.readOnly){e=c._data(b,"_change_data");
f=Gb(b);(a.type!=="focusout"||b.type!=="radio")&&c._data(b,"_change_data",f);if(!(e===h||f===e))if(e!=null||f){a.type="change";a.liveFired=h;c.event.trigger(a,d,b)}}};c.event.special.change={filters:{focusout:Hb,beforedeactivate:Hb,click:function(a){var d=a.target,b=c.nodeName(d,"input")?d.type:"";(b==="radio"||b==="checkbox"||c.nodeName(d,"select"))&&Hb.call(this,a)},keydown:function(a){var d=a.target,b=c.nodeName(d,"input")?d.type:"";(a.keyCode===13&&!c.nodeName(d,"textarea")||a.keyCode===32&&(b===
"checkbox"||b==="radio")||b==="select-multiple")&&Hb.call(this,a)},beforeactivate:function(a){a=a.target;c._data(a,"_change_data",Gb(a))}},setup:function(){if(this.type==="file")return false;for(var a in lb)c.event.add(this,a+".specialChange",lb[a]);return ta.test(this.nodeName)},teardown:function(){c.event.remove(this,".specialChange");return ta.test(this.nodeName)}};lb=c.event.special.change.filters;lb.focus=lb.beforeactivate}c.support.focusinBubbles||c.each({focus:"focusin",blur:"focusout"},function(a,
d){function b(f){var g=c.event.fix(f);g.type=d;g.originalEvent={};c.event.trigger(g,null,g.target);g.isDefaultPrevented()&&f.preventDefault()}var e=0;c.event.special[d]={setup:function(){e++===0&&X.addEventListener(a,b,true)},teardown:function(){--e===0&&X.removeEventListener(a,b,true)}}});c.each(["bind","one"],function(a,d){c.fn[d]=function(b,e,f){var g;if(typeof b=="object"){for(var i in b)this[d](i,e,b[i],f);return this}if(arguments.length===2||e===false){f=e;e=h}d==="one"?(g=function(p){c(this).unbind(p,
g);return f.apply(this,arguments)},g.guid=f.guid||c.guid++):(g=f);if(b==="unload"&&d!=="one")this.one(b,e,f);else{i=0;for(var n=this.length;i<n;i++)c.event.add(this[i],b,g,e)}return this}});c.fn.extend({unbind:function(a,d){if(typeof a=="object"&&!a.preventDefault)for(var b in a)this.unbind(b,a[b]);else{b=0;for(var e=this.length;b<e;b++)c.event.remove(this[b],a,d)}return this},delegate:function(a,d,b,e){return this.live(d,b,e,a)},undelegate:function(a,d,b){return arguments.length===0?this.unbind("live"):
this.die(d,null,b,a)},trigger:function(a,d){return this.each(function(){c.event.trigger(a,d,this)})},triggerHandler:function(a,d){if(this[0])return c.event.trigger(a,d,this[0],true)},toggle:function(a){var d=arguments,b=a.guid||c.guid++,e=0,f=function(g){var i=(c.data(this,"lastToggle"+a.guid)||0)%e;c.data(this,"lastToggle"+a.guid,i+1);g.preventDefault();return d[i].apply(this,arguments)||false};for(f.guid=b;e<d.length;)d[e++].guid=b;return this.click(f)},hover:function(a,d){return this.mouseenter(a).mouseleave(d||
a)}});var rb={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};c.each(["live","die"],function(a,d){c.fn[d]=function(b,e,f,g){var i=0,n,p,s=g||this.selector,x=g?this:c(this.context);if(typeof b=="object"&&!b.preventDefault){for(n in b)x[d](n,e,b[n],s);return this}if(d==="die"&&!b&&g&&g.charAt(0)==="."){x.unbind(g);return this}if(e===false||c.isFunction(e)){f=e||ga;e=h}for(b=(b||"").split(" ");(g=b[i++])!=null;){n=sa.exec(g);p="";n&&(p=n[0],g=g.replace(sa,""));if(g==="hover")b.push("mouseenter"+
p,"mouseleave"+p);else{n=g;rb[g]?(b.push(rb[g]+p),g+=p):(g=(rb[g]||g)+p);if(d==="live"){p=0;for(var C=x.length;p<C;p++)c.event.add(x[p],"live."+ca(g,s),{data:e,selector:s,handler:f,origType:g,origHandler:f,preType:n})}else x.unbind("live."+ca(g,s),f)}}return this}});c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,d){c.fn[d]=function(b,
e){e==null&&(e=b,b=null);return arguments.length>0?this.bind(d,b,e):this.trigger(d)};c.attrFn&&(c.attrFn[d]=true)});(function(){function a(o,u,G,I,D,J){D=0;for(var U=I.length;D<U;D++){var Z=I[D];if(Z){var ra=false;for(Z=Z[o];Z;){if(Z.sizcache===G){ra=I[Z.sizset];break}if(Z.nodeType===1){J||(Z.sizcache=G,Z.sizset=D);if(typeof u!="string"){if(Z===u){ra=true;break}}else if(s.filter(u,[Z]).length>0){ra=Z;break}}Z=Z[o]}I[D]=ra}}}function d(o,u,G,I,D,J){D=0;for(var U=I.length;D<U;D++){var Z=I[D];if(Z){var ra=
false;for(Z=Z[o];Z;){if(Z.sizcache===G){ra=I[Z.sizset];break}Z.nodeType===1&&!J&&(Z.sizcache=G,Z.sizset=D);if(Z.nodeName.toLowerCase()===u){ra=Z;break}Z=Z[o]}I[D]=ra}}}var b=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,f=Object.prototype.toString,g=false,i=true,n=/\\/g,p=/\W/;[0,0].sort(function(){i=false;return 0});var s=function(o,u,G,I){G=G||[];var D=u=u||X;if(u.nodeType!==1&&u.nodeType!==9)return[];if(!o||
typeof o!="string")return G;var J,U,Z,ra,Ma,Ja,Sa=true,v=s.isXML(u),K=[],da=o;do{b.exec("");if(J=b.exec(da)){da=J[3];K.push(J[1]);if(J[2]){ra=J[3];break}}}while(J);if(K.length>1&&C.exec(o))if(K.length===2&&x.relative[K[0]])U=Ca(K[0]+K[1],u);else for(U=x.relative[K[0]]?[u]:s(K.shift(),u);K.length;){o=K.shift();x.relative[o]&&(o+=K.shift());U=Ca(o,U)}else{!I&&K.length>1&&u.nodeType===9&&!v&&x.match.ID.test(K[0])&&!x.match.ID.test(K[K.length-1])&&(Ma=s.find(K.shift(),u,v),u=Ma.expr?s.filter(Ma.expr,
Ma.set)[0]:Ma.set[0]);if(u){Ma=I?{expr:K.pop(),set:ka(I)}:s.find(K.pop(),K.length===1&&(K[0]==="~"||K[0]==="+")&&u.parentNode?u.parentNode:u,v);U=Ma.expr?s.filter(Ma.expr,Ma.set):Ma.set;for(K.length>0?(Z=ka(U)):(Sa=false);K.length;){J=Ja=K.pop();x.relative[Ja]?(J=K.pop()):(Ja="");J==null&&(J=u);x.relative[Ja](Z,J,v)}}else Z=[]}Z||(Z=U);Z||s.error(Ja||o);if(f.call(Z)==="[object Array]")if(Sa)if(u&&u.nodeType===1)for(o=0;Z[o]!=null;o++)Z[o]&&(Z[o]===true||Z[o].nodeType===1&&s.contains(u,Z[o]))&&G.push(U[o]);
else for(o=0;Z[o]!=null;o++)Z[o]&&Z[o].nodeType===1&&G.push(U[o]);else G.push.apply(G,Z);else ka(Z,G);ra&&(s(ra,D,G,I),s.uniqueSort(G));return G};s.uniqueSort=function(o){if(za){g=i;o.sort(za);if(g)for(var u=1;u<o.length;u++)o[u]===o[u-1]&&o.splice(u--,1)}return o};s.matches=function(o,u){return s(o,null,null,u)};s.matchesSelector=function(o,u){return s(u,null,null,[o]).length>0};s.find=function(o,u,G){var I;if(!o)return[];for(var D=0,J=x.order.length;D<J;D++){var U,Z=x.order[D];if(U=x.leftMatch[Z].exec(o)){var ra=
U[1];U.splice(1,1);if(ra.substr(ra.length-1)!=="\\"){U[1]=(U[1]||"").replace(n,"");I=x.find[Z](U,u,G);if(I!=null){o=o.replace(x.match[Z],"");break}}}}I||(I=typeof u.getElementsByTagName!="undefined"?u.getElementsByTagName("*"):[]);return{set:I,expr:o}};s.filter=function(o,u,G,I){for(var D,J,U=o,Z=[],ra=u,Ma=u&&u[0]&&s.isXML(u[0]);o&&u.length;){for(var Ja in x.filter)if((D=x.leftMatch[Ja].exec(o))!=null&&D[2]){var Sa,v,K=x.filter[Ja];v=D[1];J=false;D.splice(1,1);if(v.substr(v.length-1)!=="\\"){ra===
Z&&(Z=[]);if(x.preFilter[Ja])if(D=x.preFilter[Ja](D,ra,G,Z,I,Ma)){if(D===true)continue}else J=Sa=true;if(D)for(var da=0;(v=ra[da])!=null;da++)if(v){Sa=K(v,D,da,ra);var Y=I^!!Sa;G&&Sa!=null?Y?(J=true):(ra[da]=false):Y&&(Z.push(v),J=true)}if(Sa!==h){G||(ra=Z);o=o.replace(x.match[Ja],"");if(!J)return[];break}}}if(o===U)if(J==null)s.error(o);else break;U=o}return ra};s.error=function(o){throw"Syntax error, unrecognized expression: "+o;};var x=s.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},
leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(o){return o.getAttribute("href")},type:function(o){return o.getAttribute("type")}},relative:{"+":function(o,u){var G=typeof u=="string",I=G&&!p.test(u);G=G&&!I;I&&(u=u.toLowerCase());I=0;for(var D=o.length,J;I<D;I++)if(J=o[I]){for(;(J=J.previousSibling)&&J.nodeType!==1;);o[I]=G||J&&J.nodeName.toLowerCase()===u?J||false:J===u}G&&s.filter(u,o,true)},">":function(o,u){var G,I=typeof u=="string",D=0,J=o.length;if(I&&
!p.test(u))for(u=u.toLowerCase();D<J;D++){if(G=o[D]){G=G.parentNode;o[D]=G.nodeName.toLowerCase()===u?G:false}}else{for(;D<J;D++)(G=o[D])&&(o[D]=I?G.parentNode:G.parentNode===u);I&&s.filter(u,o,true)}},"":function(o,u,G){var I,D=e++,J=a;typeof u=="string"&&!p.test(u)&&(u=u.toLowerCase(),I=u,J=d);J("parentNode",u,D,o,I,G)},"~":function(o,u,G){var I,D=e++,J=a;typeof u=="string"&&!p.test(u)&&(u=u.toLowerCase(),I=u,J=d);J("previousSibling",u,D,o,I,G)}},find:{ID:function(o,u,G){if(typeof u.getElementById!=
"undefined"&&!G)return(o=u.getElementById(o[1]))&&o.parentNode?[o]:[]},NAME:function(o,u){if(typeof u.getElementsByName!="undefined"){for(var G=[],I=u.getElementsByName(o[1]),D=0,J=I.length;D<J;D++)I[D].getAttribute("name")===o[1]&&G.push(I[D]);return G.length===0?null:G}},TAG:function(o,u){if(typeof u.getElementsByTagName!="undefined")return u.getElementsByTagName(o[1])}},preFilter:{CLASS:function(o,u,G,I,D,J){o=" "+o[1].replace(n,"")+" ";if(J)return o;J=0;for(var U;(U=u[J])!=null;J++)U&&(D^(U.className&&
(" "+U.className+" ").replace(/[\t\n\r]/g," ").indexOf(o)>=0)?G||I.push(U):G&&(u[J]=false));return false},ID:function(o){return o[1].replace(n,"")},TAG:function(o){return o[1].replace(n,"").toLowerCase()},CHILD:function(o){if(o[1]==="nth"){o[2]||s.error(o[0]);o[2]=o[2].replace(/^\+|\s*/g,"");var u=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(o[2]==="even"&&"2n"||o[2]==="odd"&&"2n+1"||!/\D/.test(o[2])&&"0n+"+o[2]||o[2]);o[2]=u[1]+(u[2]||1)-0;o[3]=u[3]-0}else o[2]&&s.error(o[0]);o[0]=e++;return o},ATTR:function(o,
u,G,I,D,J){u=o[1]=o[1].replace(n,"");!J&&x.attrMap[u]&&(o[1]=x.attrMap[u]);o[4]=(o[4]||o[5]||"").replace(n,"");o[2]==="~="&&(o[4]=" "+o[4]+" ");return o},PSEUDO:function(o,u,G,I,D){if(o[1]==="not")if((b.exec(o[3])||"").length>1||/^\w/.test(o[3]))o[3]=s(o[3],null,null,u);else{o=s.filter(o[3],u,G,true^D);G||I.push.apply(I,o);return false}else if(x.match.POS.test(o[0])||x.match.CHILD.test(o[0]))return true;return o},POS:function(o){o.unshift(true);return o}},filters:{enabled:function(o){return o.disabled===
false&&o.type!=="hidden"},disabled:function(o){return o.disabled===true},checked:function(o){return o.checked===true},selected:function(o){return o.selected===true},parent:function(o){return!!o.firstChild},empty:function(o){return!o.firstChild},has:function(o,u,G){return!!s(G[3],o).length},header:function(o){return/h\d/i.test(o.nodeName)},text:function(o){var u=o.getAttribute("type"),G=o.type;return o.nodeName.toLowerCase()==="input"&&"text"===G&&(u===G||u===null)},radio:function(o){return o.nodeName.toLowerCase()===
"input"&&"radio"===o.type},checkbox:function(o){return o.nodeName.toLowerCase()==="input"&&"checkbox"===o.type},file:function(o){return o.nodeName.toLowerCase()==="input"&&"file"===o.type},password:function(o){return o.nodeName.toLowerCase()==="input"&&"password"===o.type},submit:function(o){var u=o.nodeName.toLowerCase();return(u==="input"||u==="button")&&"submit"===o.type},image:function(o){return o.nodeName.toLowerCase()==="input"&&"image"===o.type},reset:function(o){var u=o.nodeName.toLowerCase();
return(u==="input"||u==="button")&&"reset"===o.type},button:function(o){var u=o.nodeName.toLowerCase();return u==="input"&&"button"===o.type||u==="button"},input:function(o){return/input|select|textarea|button/i.test(o.nodeName)},focus:function(o){return o===o.ownerDocument.activeElement}},setFilters:{first:function(o,u){return u===0},last:function(o,u,G,I){return u===I.length-1},even:function(o,u){return u%2===0},odd:function(o,u){return u%2===1},lt:function(o,u,G){return u<G[3]-0},gt:function(o,
u,G){return u>G[3]-0},nth:function(o,u,G){return G[3]-0===u},eq:function(o,u,G){return G[3]-0===u}},filter:{PSEUDO:function(o,u,G,I){var D=u[1],J=x.filters[D];if(J)return J(o,G,u,I);if(D==="contains")return(o.textContent||o.innerText||s.getText([o])||"").indexOf(u[3])>=0;if(D==="not"){u=u[3];G=0;for(I=u.length;G<I;G++)if(u[G]===o)return false;return true}s.error(D)},CHILD:function(o,u){var G=u[1],I=o;switch(G){case "only":case "first":for(;I=I.previousSibling;)if(I.nodeType===1)return false;if(G===
"first")return true;I=o;case "last":for(;I=I.nextSibling;)if(I.nodeType===1)return false;return true;case "nth":G=u[2];var D=u[3];if(G===1&&D===0)return true;var J=u[0],U=o.parentNode;if(U&&(U.sizcache!==J||!o.nodeIndex)){var Z=0;for(I=U.firstChild;I;I=I.nextSibling)I.nodeType===1&&(I.nodeIndex=++Z);U.sizcache=J}I=o.nodeIndex-D;return G===0?I===0:I%G===0&&I/G>=0}},ID:function(o,u){return o.nodeType===1&&o.getAttribute("id")===u},TAG:function(o,u){return u==="*"&&o.nodeType===1||o.nodeName.toLowerCase()===
u},CLASS:function(o,u){return(" "+(o.className||o.getAttribute("class"))+" ").indexOf(u)>-1},ATTR:function(o,u){var G=u[1];G=x.attrHandle[G]?x.attrHandle[G](o):o[G]!=null?o[G]:o.getAttribute(G);var I=G+"",D=u[2],J=u[4];return G==null?D==="!=":D==="="?I===J:D==="*="?I.indexOf(J)>=0:D==="~="?(" "+I+" ").indexOf(J)>=0:J?D==="!="?I!==J:D==="^="?I.indexOf(J)===0:D==="$="?I.substr(I.length-J.length)===J:D==="|="?I===J||I.substr(0,J.length+1)===J+"-":false:I&&G!==false},POS:function(o,u,G,I){var D=x.setFilters[u[2]];
if(D)return D(o,G,u,I)}}},C=x.match.POS,R=function(o,u){return"\\"+(u-0+1)};for(var ba in x.match){x.match[ba]=new RegExp(x.match[ba].source+/(?![^\[]*\])(?![^\(]*\))/.source);x.leftMatch[ba]=new RegExp(/(^(?:.|\r|\n)*?)/.source+x.match[ba].source.replace(/\\(\d+)/g,R))}var ka=function(o,u){o=Array.prototype.slice.call(o,0);if(u){u.push.apply(u,o);return u}return o};try{Array.prototype.slice.call(X.documentElement.childNodes,0)}catch(Ia){ka=function(o,u){var G=0,I=u||[];if(f.call(o)==="[object Array]")Array.prototype.push.apply(I,
o);else if(typeof o.length=="number")for(var D=o.length;G<D;G++)I.push(o[G]);else for(;o[G];G++)I.push(o[G]);return I}}var za,Ba;X.documentElement.compareDocumentPosition?(za=function(o,u){if(o===u){g=true;return 0}if(!o.compareDocumentPosition||!u.compareDocumentPosition)return o.compareDocumentPosition?-1:1;return o.compareDocumentPosition(u)&4?-1:1}):(za=function(o,u){if(o===u){g=true;return 0}if(o.sourceIndex&&u.sourceIndex)return o.sourceIndex-u.sourceIndex;var G,I,D=[],J=[];G=o.parentNode;I=
u.parentNode;var U=G;if(G===I)return Ba(o,u);if(!G)return-1;if(!I)return 1;for(;U;){D.unshift(U);U=U.parentNode}for(U=I;U;){J.unshift(U);U=U.parentNode}G=D.length;I=J.length;for(U=0;U<G&&U<I;U++)if(D[U]!==J[U])return Ba(D[U],J[U]);return U===G?Ba(o,J[U],-1):Ba(D[U],u,1)},Ba=function(o,u,G){if(o===u)return G;for(o=o.nextSibling;o;){if(o===u)return-1;o=o.nextSibling}return 1});s.getText=function(o){for(var u="",G,I=0;o[I];I++){G=o[I];G.nodeType===3||G.nodeType===4?(u+=G.nodeValue):G.nodeType!==8&&(u+=
s.getText(G.childNodes))}return u};(function(){var o=X.createElement("div"),u="script"+(new Date).getTime(),G=X.documentElement;o.innerHTML="<a name='"+u+"'/>";G.insertBefore(o,G.firstChild);X.getElementById(u)&&(x.find.ID=function(I,D,J){if(typeof D.getElementById!="undefined"&&!J)return(D=D.getElementById(I[1]))?D.id===I[1]||typeof D.getAttributeNode!="undefined"&&D.getAttributeNode("id").nodeValue===I[1]?[D]:h:[]},x.filter.ID=function(I,D){var J=typeof I.getAttributeNode!="undefined"&&I.getAttributeNode("id");
return I.nodeType===1&&J&&J.nodeValue===D});G.removeChild(o);G=o=null})();(function(){var o=X.createElement("div");o.appendChild(X.createComment(""));o.getElementsByTagName("*").length>0&&(x.find.TAG=function(u,G){var I=G.getElementsByTagName(u[1]);if(u[1]==="*"){for(var D=[],J=0;I[J];J++)I[J].nodeType===1&&D.push(I[J]);I=D}return I});o.innerHTML="<a href='#'></a>";o.firstChild&&typeof o.firstChild.getAttribute!="undefined"&&o.firstChild.getAttribute("href")!=="#"&&(x.attrHandle.href=function(u){return u.getAttribute("href",
2)});o=null})();X.querySelectorAll&&function(){var o=s,u=X.createElement("div");u.innerHTML="<p class='TEST'></p>";if(!u.querySelectorAll||u.querySelectorAll(".TEST").length!==0){s=function(I,D,J,U){D=D||X;if(!U&&!s.isXML(D)){var Z=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(I);if(Z&&(D.nodeType===1||D.nodeType===9)){if(Z[1])return ka(D.getElementsByTagName(I),J);if(Z[2]&&x.find.CLASS&&D.getElementsByClassName)return ka(D.getElementsByClassName(Z[2]),J)}if(D.nodeType===9){if(I==="body"&&D.body)return ka([D.body],
J);if(Z&&Z[3]){var ra=D.getElementById(Z[3]);if(!ra||!ra.parentNode)return ka([],J);if(ra.id===Z[3])return ka([ra],J)}try{return ka(D.querySelectorAll(I),J)}catch(Ma){}}else if(D.nodeType===1&&D.nodeName.toLowerCase()!=="object"){Z=D;var Ja=(ra=D.getAttribute("id"))||"__sizzle__",Sa=D.parentNode,v=/^\s*[+~]/.test(I);ra?(Ja=Ja.replace(/'/g,"\\$&")):D.setAttribute("id",Ja);v&&Sa&&(D=D.parentNode);try{if(!v||Sa)return ka(D.querySelectorAll("[id='"+Ja+"'] "+I),J)}catch(K){}finally{ra||Z.removeAttribute("id")}}}return o(I,
D,J,U)};for(var G in o)s[G]=o[G];u=null}}();(function(){var o=X.documentElement,u=o.matchesSelector||o.mozMatchesSelector||o.webkitMatchesSelector||o.msMatchesSelector;if(u){var G=!u.call(X.createElement("div"),"div"),I=false;try{u.call(X.documentElement,"[test!='']:sizzle")}catch(D){I=true}s.matchesSelector=function(J,U){U=U.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!s.isXML(J))try{if(I||!x.match.PSEUDO.test(U)&&!/!=/.test(U)){var Z=u.call(J,U);if(Z||!G||J.document&&J.document.nodeType!==11)return Z}}catch(ra){}return s(U,
null,null,[J]).length>0}}})();(function(){var o=X.createElement("div");o.innerHTML="<div class='test e'></div><div class='test'></div>";if(o.getElementsByClassName&&o.getElementsByClassName("e").length!==0){o.lastChild.className="e";if(o.getElementsByClassName("e").length!==1){x.order.splice(1,0,"CLASS");x.find.CLASS=function(u,G,I){if(typeof G.getElementsByClassName!="undefined"&&!I)return G.getElementsByClassName(u[1])};o=null}}})();X.documentElement.contains?(s.contains=function(o,u){return o!==
u&&(o.contains?o.contains(u):true)}):X.documentElement.compareDocumentPosition?(s.contains=function(o,u){return!!(o.compareDocumentPosition(u)&16)}):(s.contains=function(){return false});s.isXML=function(o){return(o=(o?o.ownerDocument||o:0).documentElement)?o.nodeName!=="HTML":false};var Ca=function(o,u){for(var G,I=[],D="",J=u.nodeType?[u]:u;G=x.match.PSEUDO.exec(o);){D+=G[0];o=o.replace(x.match.PSEUDO,"")}o=x.relative[o]?o+"*":o;G=0;for(var U=J.length;G<U;G++)s(o,J[G],I);return s.filter(D,I)};c.find=
s;c.expr=s.selectors;c.expr[":"]=c.expr.filters;c.unique=s.uniqueSort;c.text=s.getText;c.isXMLDoc=s.isXML;c.contains=s.contains})();var xb=/Until$/,yb=/^(?:parents|prevUntil|prevAll)/,zb=/,/,Ka=/^.[^:#\[\.,]*$/,lc=Array.prototype.slice,sb=c.expr.match.POS,ec={children:true,contents:true,next:true,prev:true};c.fn.extend({find:function(a){var d=this,b,e;if(typeof a!="string")return c(a).filter(function(){b=0;for(e=d.length;b<e;b++)if(c.contains(d[b],this))return true});var f=this.pushStack("","find",
a),g,i,n;b=0;for(e=this.length;b<e;b++){g=f.length;c.find(a,this[b],f);if(b>0)for(i=g;i<f.length;i++)for(n=0;n<g;n++)if(f[n]===f[i]){f.splice(i--,1);break}}return f},has:function(a){var d=c(a);return this.filter(function(){for(var b=0,e=d.length;b<e;b++)if(c.contains(this,d[b]))return true})},not:function(a){return this.pushStack(E(this,a,false),"not",a)},filter:function(a){return this.pushStack(E(this,a,true),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?c.filter(a,this).length>0:this.filter(a).length>
0)},closest:function(a,d){var b=[],e,f,g=this[0];if(c.isArray(a)){var i,n={},p=1;if(g&&a.length){e=0;for(f=a.length;e<f;e++){i=a[e];n[i]||(n[i]=sb.test(i)?c(i,d||this.context):i)}for(;g&&g.ownerDocument&&g!==d;){for(i in n){e=n[i];(e.jquery?e.index(g)>-1:c(g).is(e))&&b.push({selector:i,elem:g,level:p})}g=g.parentNode;p++}}return b}i=sb.test(a)||typeof a!="string"?c(a,d||this.context):0;e=0;for(f=this.length;e<f;e++)for(g=this[e];g;){if(i?i.index(g)>-1:c.find.matchesSelector(g,a)){b.push(g);break}g=
g.parentNode;if(!g||!g.ownerDocument||g===d||g.nodeType===11)break}b=b.length>1?c.unique(b):b;return this.pushStack(b,"closest",a)},index:function(a){if(!a||typeof a=="string")return c.inArray(this[0],a?c(a):this.parent().children());return c.inArray(a.jquery?a[0]:a,this)},add:function(a,d){var b=typeof a=="string"?c(a,d):c.makeArray(a&&a.nodeType?[a]:a),e=c.merge(this.get(),b);return this.pushStack(!b[0]||!b[0].parentNode||b[0].parentNode.nodeType===11||!e[0]||!e[0].parentNode||e[0].parentNode.nodeType===
11?e:c.unique(e))},andSelf:function(){return this.add(this.prevObject)}});c.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return c.dir(a,"parentNode")},parentsUntil:function(a,d,b){return c.dir(a,"parentNode",b)},next:function(a){return c.nth(a,2,"nextSibling")},prev:function(a){return c.nth(a,2,"previousSibling")},nextAll:function(a){return c.dir(a,"nextSibling")},prevAll:function(a){return c.dir(a,"previousSibling")},nextUntil:function(a,d,b){return c.dir(a,
"nextSibling",b)},prevUntil:function(a,d,b){return c.dir(a,"previousSibling",b)},siblings:function(a){return c.sibling(a.parentNode.firstChild,a)},children:function(a){return c.sibling(a.firstChild)},contents:function(a){return c.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes)}},function(a,d){c.fn[a]=function(b,e){var f=c.map(this,d,b),g=lc.call(arguments);xb.test(a)||(e=b);e&&typeof e=="string"&&(f=c.filter(e,f));f=this.length>1&&!ec[a]?c.unique(f):f;(this.length>
1||zb.test(e))&&yb.test(a)&&(f=f.reverse());return this.pushStack(f,a,g.join(","))}});c.extend({filter:function(a,d,b){b&&(a=":not("+a+")");return d.length===1?c.find.matchesSelector(d[0],a)?[d[0]]:[]:c.find.matches(a,d)},dir:function(a,d,b){var e=[];for(a=a[d];a&&a.nodeType!==9&&(b===h||a.nodeType!==1||!c(a).is(b));){a.nodeType===1&&e.push(a);a=a[d]}return e},nth:function(a,d,b){for(var e=0;a;a=a[b])if(a.nodeType===1&&++e===(d||1))break;return a},sibling:function(a,d){for(var b=[];a;a=a.nextSibling)a.nodeType===
1&&a!==d&&b.push(a);return b}});var Tb=/ jQuery\d+="(?:\d+|null)"/g,Jb=/^\s+/,Ub=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Vb=/<([\w:]+)/,Wb=/<tbody/i,fc=/<|&#?\w+;/,ab=/<(?:script|object|embed|option|style)/i,tb=/checked\s*(?:[^=]|=\s*.checked.)/i,gc=/\/(java|ecma)script/i,dc=/^\s*<!(?:\[CDATA\[|\-\-)/,Va={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};Va.optgroup=Va.option;Va.tbody=Va.tfoot=Va.colgroup=Va.caption=Va.thead;Va.th=Va.td;c.support.htmlSerialize||(Va._default=[1,"div<div>","</div>"]);c.fn.extend({text:function(a){if(c.isFunction(a))return this.each(function(d){var b=c(this);b.text(a.call(this,d,b.text()))});if(typeof a!="object"&&a!==h)return this.empty().append((this[0]&&
this[0].ownerDocument||X).createTextNode(a));return c.text(this)},wrapAll:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapAll(a.call(this,b))});if(this[0]){var d=c(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&d.insertBefore(this[0]);d.map(function(){for(var b=this;b.firstChild&&b.firstChild.nodeType===1;)b=b.firstChild;return b}).append(this)}return this},wrapInner:function(a){if(c.isFunction(a))return this.each(function(d){c(this).wrapInner(a.call(this,d))});
return this.each(function(){var d=c(this),b=d.contents();b.length?b.wrapAll(a):d.append(a)})},wrap:function(a){return this.each(function(){c(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,
this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(d){this.parentNode.insertBefore(d,this)});if(arguments.length){var a=c(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(d){this.parentNode.insertBefore(d,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,
c(arguments[0]).toArray());return a}},remove:function(a,d){for(var b=0,e;(e=this[b])!=null;b++)if(!a||c.filter(a,[e]).length){!d&&e.nodeType===1&&(c.cleanData(e.getElementsByTagName("*")),c.cleanData([e]));e.parentNode&&e.parentNode.removeChild(e)}return this},empty:function(){for(var a=0,d;(d=this[a])!=null;a++)for(d.nodeType===1&&c.cleanData(d.getElementsByTagName("*"));d.firstChild;)d.removeChild(d.firstChild);return this},clone:function(a,d){a=a==null?false:a;d=d==null?a:d;return this.map(function(){return c.clone(this,
a,d)})},html:function(a){if(a===h)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Tb,""):null;if(typeof a=="string"&&!ab.test(a)&&(c.support.leadingWhitespace||!Jb.test(a))&&!Va[(Vb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ub,"<$1></$2>");try{for(var d=0,b=this.length;d<b;d++)this[d].nodeType===1&&(c.cleanData(this[d].getElementsByTagName("*")),this[d].innerHTML=a)}catch(e){this.empty().append(a)}}else c.isFunction(a)?this.each(function(f){var g=c(this);g.html(a.call(this,f,
g.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(c.isFunction(a))return this.each(function(d){var b=c(this),e=b.html();b.replaceWith(a.call(this,d,e))});typeof a!="string"&&(a=c(a).detach());return this.each(function(){var d=this.nextSibling,b=this.parentNode;c(this).remove();d?c(d).before(a):c(b).append(a)})}return this.length?this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,true)},domManip:function(a,
d,b){var e,f,g,i=a[0],n=[];if(!c.support.checkClone&&arguments.length===3&&typeof i=="string"&&tb.test(i))return this.each(function(){c(this).domManip(a,d,b,true)});if(c.isFunction(i))return this.each(function(x){var C=c(this);a[0]=i.call(this,x,d?C.html():h);C.domManip(a,d,b)});if(this[0]){g=i&&i.parentNode;c.support.parentNode&&g&&g.nodeType===11&&g.childNodes.length===this.length?(e={fragment:g}):(e=c.buildFragment(a,this,n));g=e.fragment;g.childNodes.length===1?(f=g=g.firstChild):(f=g.firstChild);
if(f){d=d&&c.nodeName(f,"tr");f=0;for(var p=this.length,s=p-1;f<p;f++)b.call(d?c.nodeName(this[f],"table")?this[f].getElementsByTagName("tbody")[0]||this[f].appendChild(this[f].ownerDocument.createElement("tbody")):this[f]:this[f],e.cacheable||p>1&&f<s?c.clone(g,true,true):g)}n.length&&c.each(n,la)}return this}});c.buildFragment=function(a,d,b){var e,f,g,i;d&&d[0]&&(i=d[0].ownerDocument||d[0]);i.createDocumentFragment||(i=X);a.length===1&&typeof a[0]=="string"&&a[0].length<512&&i===X&&a[0].charAt(0)===
"<"&&!ab.test(a[0])&&(c.support.checkClone||!tb.test(a[0]))&&(f=true,g=c.fragments[a[0]],g&&g!==1&&(e=g));e||(e=i.createDocumentFragment(),c.clean(a,i,e,b));f&&(c.fragments[a[0]]=g?e:1);return{fragment:e,cacheable:f}};c.fragments={};c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,d){c.fn[a]=function(b){var e=[];b=c(b);var f=this.length===1&&this[0].parentNode;if(f&&f.nodeType===11&&f.childNodes.length===1&&b.length===1){b[d](this[0]);
return this}f=0;for(var g=b.length;f<g;f++){var i=(f>0?this.clone(true):this).get();c(b[f])[d](i);e=e.concat(i)}return this.pushStack(e,a,b.selector)}});c.extend({clone:function(a,d,b){var e=a.cloneNode(true),f,g,i;if((!c.support.noCloneEvent||!c.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!c.isXMLDoc(a)){q(a,e);f=l(a);g=l(e);for(i=0;f[i];++i)q(f[i],g[i])}if(d){y(a,e);if(b){f=l(a);g=l(e);for(i=0;f[i];++i)y(f[i],g[i])}}return e},clean:function(a,d,b,e){d=d||X;typeof d.createElement==
"undefined"&&(d=d.ownerDocument||d[0]&&d[0].ownerDocument||X);for(var f=[],g,i=0,n;(n=a[i])!=null;i++){typeof n=="number"&&(n+="");if(n){if(typeof n=="string")if(fc.test(n)){n=n.replace(Ub,"<$1></$2>");g=(Vb.exec(n)||["",""])[1].toLowerCase();var p=Va[g]||Va._default,s=p[0],x=d.createElement("div");for(x.innerHTML=p[1]+n+p[2];s--;)x=x.lastChild;if(!c.support.tbody){s=Wb.test(n);p=g==="table"&&!s?x.firstChild&&x.firstChild.childNodes:p[1]==="<table>"&&!s?x.childNodes:[];for(g=p.length-1;g>=0;--g)c.nodeName(p[g],
"tbody")&&!p[g].childNodes.length&&p[g].parentNode.removeChild(p[g])}!c.support.leadingWhitespace&&Jb.test(n)&&x.insertBefore(d.createTextNode(Jb.exec(n)[0]),x.firstChild);n=x.childNodes}else n=d.createTextNode(n);var C;if(!c.support.appendChecked)if(n[0]&&typeof(C=n.length)=="number")for(g=0;g<C;g++)pa(n[g]);else pa(n);n.nodeType?f.push(n):(f=c.merge(f,n))}}if(b){a=function(R){return!R.type||gc.test(R.type)};for(i=0;f[i];i++)if(e&&c.nodeName(f[i],"script")&&(!f[i].type||f[i].type.toLowerCase()===
"text/javascript"))e.push(f[i].parentNode?f[i].parentNode.removeChild(f[i]):f[i]);else{if(f[i].nodeType===1){d=c.grep(f[i].getElementsByTagName("script"),a);f.splice.apply(f,[i+1,0].concat(d))}b.appendChild(f[i])}}return f},cleanData:function(a){for(var d,b,e=c.cache,f=c.expando,g=c.event.special,i=c.support.deleteExpando,n=0,p;(p=a[n])!=null;n++)if(!(p.nodeName&&c.noData[p.nodeName.toLowerCase()]))if(b=p[c.expando]){if((d=e[b]&&e[b][f])&&d.events){for(var s in d.events)g[s]?c.event.remove(p,s):c.removeEvent(p,
s,d.handle);d.handle&&(d.handle.elem=null)}i?delete p[c.expando]:p.removeAttribute&&p.removeAttribute(c.expando);delete e[b]}}});var Xb=/alpha\([^)]*\)/i,hc=/opacity=([^)]*)/,mc=/([A-Z]|^ms)/g,Kb=/^-?\d+(?:px)?$/i,Yb=/^-?\d/,Zb=/^[+\-]=/,ya=/[^+\-\.\de]+/g,ic={position:"absolute",visibility:"hidden",display:"block"},ma=["Left","Right"],Qb=["Top","Bottom"],fb,mb,va;c.fn.css=function(a,d){if(arguments.length===2&&d===h)return this;return c.access(this,a,d,true,function(b,e,f){return f!==h?c.style(b,
e,f):c.css(b,e)})};c.extend({cssHooks:{opacity:{get:function(a,d){if(d){var b=fb(a,"opacity","opacity");return b===""?"1":b}return a.style.opacity}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":c.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,d,b,e){if(a&&a.nodeType!==3&&a.nodeType!==8&&a.style){var f,g=c.camelCase(d),i=a.style,n=c.cssHooks[g];d=c.cssProps[g]||g;if(b===h){if(n&&"get"in n&&(f=
n.get(a,false,e))!==h)return f;return i[d]}e=typeof b;if(!(e==="number"&&isNaN(b)||b==null)){e==="string"&&Zb.test(b)&&(b=+b.replace(ya,"")+parseFloat(c.css(a,d)),e="number");e==="number"&&!c.cssNumber[g]&&(b+="px");if(!n||!("set"in n)||(b=n.set(a,b))!==h)try{i[d]=b}catch(p){}}}},css:function(a,d,b){var e,f;d=c.camelCase(d);f=c.cssHooks[d];d=c.cssProps[d]||d;d==="cssFloat"&&(d="float");if(f&&"get"in f&&(e=f.get(a,true,b))!==h)return e;if(fb)return fb(a,d)},swap:function(a,d,b){var e={};for(var f in d){e[f]=
a.style[f];a.style[f]=d[f]}b.call(a);for(f in d)a.style[f]=e[f]}});c.curCSS=c.css;c.each(["height","width"],function(a,d){c.cssHooks[d]={get:function(b,e,f){var g;if(e){if(b.offsetWidth!==0)return P(b,d,f);c.swap(b,ic,function(){g=P(b,d,f)});return g}},set:function(b,e){if(!Kb.test(e))return e;e=parseFloat(e);if(e>=0)return e+"px"}}});c.support.opacity||(c.cssHooks.opacity={get:function(a,d){return hc.test((d&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":
d?"1":""},set:function(a,d){var b=a.style,e=a.currentStyle;b.zoom=1;var f=c.isNaN(d)?"":"alpha(opacity="+d*100+")";e=e&&e.filter||b.filter||"";b.filter=Xb.test(e)?e.replace(Xb,f):e+" "+f}});c(function(){c.support.reliableMarginRight||(c.cssHooks.marginRight={get:function(a,d){var b;c.swap(a,{display:"inline-block"},function(){d?(b=fb(a,"margin-right","marginRight")):(b=a.style.marginRight)});return b}})});X.defaultView&&X.defaultView.getComputedStyle&&(mb=function(a,d){var b,e;d=d.replace(mc,"-$1").toLowerCase();
if(!(e=a.ownerDocument.defaultView))return h;if(e=e.getComputedStyle(a,null)){b=e.getPropertyValue(d);b===""&&!c.contains(a.ownerDocument.documentElement,a)&&(b=c.style(a,d))}return b});X.documentElement.currentStyle&&(va=function(a,d){var b,e=a.currentStyle&&a.currentStyle[d],f=a.runtimeStyle&&a.runtimeStyle[d],g=a.style;!Kb.test(e)&&Yb.test(e)&&(b=g.left,f&&(a.runtimeStyle.left=a.currentStyle.left),g.left=d==="fontSize"?"1em":e||0,e=g.pixelLeft+"px",g.left=b,f&&(a.runtimeStyle.left=f));return e===
""?"auto":e});fb=mb||va;c.expr&&c.expr.filters&&(c.expr.filters.hidden=function(a){var d=a.offsetHeight;return a.offsetWidth===0&&d===0||!c.support.reliableHiddenOffsets&&(a.style.display||c.css(a,"display"))==="none"},c.expr.filters.visible=function(a){return!c.expr.filters.hidden(a)});var Ab=/%20/g,eb=/\[\]$/,Lb=/\r?\n/g,nb=/#.*$/,Mb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,$b=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ea=/^(?:GET|HEAD)$/,Ya=/^\/\//,
ob=/\?/,Qa=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ac=/^(?:select|textarea)/i,cc=/\s+/,bc=/([?&])_=[^&]*/,Ta=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,W=c.fn.load,cb={},Za={},Wa,O;try{Wa=V.href}catch(hb){Wa=X.createElement("a");Wa.href="";Wa=Wa.href}O=Ta.exec(Wa.toLowerCase())||[];c.fn.extend({load:function(a,d,b){if(typeof a!="string"&&W)return W.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}e="GET";d&&
(c.isFunction(d)?(b=d,d=h):typeof d=="object"&&(d=c.param(d,c.ajaxSettings.traditional),e="POST"));var g=this;c.ajax({url:a,type:e,dataType:"html",data:d,complete:function(i,n,p){p=i.responseText;i.isResolved()&&(i.done(function(s){p=s}),g.html(f?c("<div>").append(p.replace(Qa,"")).find(f):p));b&&g.each(b,[p,n,i])}});return this},serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this}).filter(function(){return this.name&&
!this.disabled&&(this.checked||ac.test(this.nodeName)||$b.test(this.type))}).map(function(a,d){var b=c(this).val();return b==null?null:c.isArray(b)?c.map(b,function(e){return{name:d.name,value:e.replace(Lb,"\r\n")}}):{name:d.name,value:b.replace(Lb,"\r\n")}}).get()}});c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,d){c.fn[d]=function(b){return this.bind(d,b)}});c.each(["get","post"],function(a,d){c[d]=function(b,e,f,g){c.isFunction(e)&&(g=g||f,f=e,e=
h);return c.ajax({type:d,url:b,data:e,success:f,dataType:g})}});c.extend({getScript:function(a,d){return c.get(a,h,d,"script")},getJSON:function(a,d,b){return c.get(a,d,b,"json")},ajaxSetup:function(a,d){d?c.extend(true,a,c.ajaxSettings,d):(d=a,a=c.extend(true,c.ajaxSettings,d));for(var b in{context:1,url:1})b in d?(a[b]=d[b]):b in c.ajaxSettings&&(a[b]=c.ajaxSettings[b]);return a},ajaxSettings:{url:Wa,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|widget):$/.test(O[1]),global:true,type:"GET",
contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":k.String,"text html":true,"text json":c.parseJSON,"text xml":c.parseXML}},ajaxPrefilter:N(cb),ajaxTransport:N(Za),ajax:function(a,d){function b(D,J,U,Z){if(Ba!==2){Ba=2;Ia&&clearTimeout(Ia);
ka=h;R=Z||"";u.readyState=D?4:0;var ra,Ma,Ja;if(U){Z=e;var Sa=u,v=Z.contents,K=Z.dataTypes,da=Z.responseFields,Y,qa,Aa,Da;for(qa in da)qa in U&&(Sa[da[qa]]=U[qa]);for(;K[0]==="*";){K.shift();Y===h&&(Y=Z.mimeType||Sa.getResponseHeader("content-type"))}if(Y)for(qa in v)if(v[qa]&&v[qa].test(Y)){K.unshift(qa);break}if(K[0]in U)Aa=K[0];else{for(qa in U){if(!K[0]||Z.converters[qa+" "+K[0]]){Aa=qa;break}Da||(Da=qa)}Aa=Aa||Da}if(Aa){Aa!==K[0]&&K.unshift(Aa);U=U[Aa]}else U=void 0}else U=h;U=U;if(D>=200&&D<
300||D===304){if(e.ifModified){if(Y=u.getResponseHeader("Last-Modified"))c.lastModified[s]=Y;if(Y=u.getResponseHeader("Etag"))c.etag[s]=Y}if(D===304){J="notmodified";ra=true}else try{Y=e;U=U;Y.dataFilter&&(U=Y.dataFilter(U,Y.dataType));var Fa=Y.dataTypes;qa={};var vb,wb,oc=Fa.length,jc,Bb=Fa[0],Nb,nc,Cb,Ib,Ob;for(vb=1;vb<oc;vb++){if(vb===1)for(wb in Y.converters)typeof wb=="string"&&(qa[wb.toLowerCase()]=Y.converters[wb]);Nb=Bb;Bb=Fa[vb];if(Bb==="*")Bb=Nb;else if(Nb!=="*"&&Nb!==Bb){nc=Nb+" "+Bb;Cb=
qa[nc]||qa["* "+Bb];if(!Cb){Ob=h;for(Ib in qa){jc=Ib.split(" ");if(jc[0]===Nb||jc[0]==="*")if(Ob=qa[jc[1]+" "+Bb]){Ib=qa[Ib];Ib===true?(Cb=Ob):Ob===true&&(Cb=Ib);break}}}!Cb&&!Ob&&c.error("No conversion from "+nc.replace(" "," to "));Cb!==true&&(U=Cb?Cb(U):Ob(Ib(U)))}}Ma=U;J="success";ra=true}catch(pc){J="parsererror";Ja=pc}}else{Ja=J;if(!J||D){J="error";D<0&&(D=0)}}u.status=D;u.statusText=J;ra?i.resolveWith(f,[Ma,J,u]):i.rejectWith(f,[u,J,Ja]);u.statusCode(p);p=h;Ca&&g.trigger("ajax"+(ra?"Success":
"Error"),[u,e,ra?Ma:Ja]);n.resolveWith(f,[u,J]);Ca&&(g.trigger("ajaxComplete",[u,e]),--c.active||c.event.trigger("ajaxStop"))}}typeof a=="object"&&(d=a,a=h);d=d||{};var e=c.ajaxSetup({},d),f=e.context||e,g=f!==e&&(f.nodeType||f instanceof c)?c(f):c.event,i=c.Deferred(),n=c._Deferred(),p=e.statusCode||{},s,x={},C={},R,ba,ka,Ia,za,Ba=0,Ca,o,u={readyState:0,setRequestHeader:function(D,J){if(!Ba){var U=D.toLowerCase();D=C[U]=C[U]||D;x[D]=J}return this},getAllResponseHeaders:function(){return Ba===2?R:
null},getResponseHeader:function(D){var J;if(Ba===2){if(!ba)for(ba={};J=Mb.exec(R);)ba[J[1].toLowerCase()]=J[2];J=ba[D.toLowerCase()]}return J===h?null:J},overrideMimeType:function(D){Ba||(e.mimeType=D);return this},abort:function(D){D=D||"abort";ka&&ka.abort(D);b(0,D);return this}};i.promise(u);u.success=u.done;u.error=u.fail;u.complete=n.done;u.statusCode=function(D){if(D){var J;if(Ba<2)for(J in D)p[J]=[p[J],D[J]];else{J=D[u.status];u.then(J,J)}}return this};e.url=((a||e.url)+"").replace(nb,"").replace(Ya,
O[1]+"//");e.dataTypes=c.trim(e.dataType||"*").toLowerCase().split(cc);e.crossDomain==null&&(za=Ta.exec(e.url.toLowerCase()),e.crossDomain=!(!za||za[1]==O[1]&&za[2]==O[2]&&(za[3]||(za[1]==="http:"?80:443))==(O[3]||(O[1]==="http:"?80:443))));e.data&&e.processData&&typeof e.data!="string"&&(e.data=c.param(e.data,e.traditional));z(cb,e,d,u);if(Ba===2)return false;Ca=e.global;e.type=e.type.toUpperCase();e.hasContent=!Ea.test(e.type);Ca&&c.active++===0&&c.event.trigger("ajaxStart");if(!e.hasContent){e.data&&
(e.url+=(ob.test(e.url)?"&":"?")+e.data);s=e.url;if(e.cache===false){za=c.now();var G=e.url.replace(bc,"$1_="+za);e.url=G+(G===e.url?(ob.test(e.url)?"&":"?")+"_="+za:"")}}(e.data&&e.hasContent&&e.contentType!==false||d.contentType)&&u.setRequestHeader("Content-Type",e.contentType);e.ifModified&&(s=s||e.url,c.lastModified[s]&&u.setRequestHeader("If-Modified-Since",c.lastModified[s]),c.etag[s]&&u.setRequestHeader("If-None-Match",c.etag[s]));u.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?
e.accepts[e.dataTypes[0]]+(e.dataTypes[0]!=="*"?", */*; q=0.01":""):e.accepts["*"]);for(o in e.headers)u.setRequestHeader(o,e.headers[o]);if(e.beforeSend&&(e.beforeSend.call(f,u,e)===false||Ba===2)){u.abort();return false}for(o in{success:1,error:1,complete:1})u[o](e[o]);if(ka=z(Za,e,d,u)){u.readyState=1;Ca&&g.trigger("ajaxSend",[u,e]);e.async&&e.timeout>0&&(Ia=setTimeout(function(){u.abort("timeout")},e.timeout));try{Ba=1;ka.send(x,b)}catch(I){status<2?b(-1,I):c.error(I)}}else b(-1,"No Transport");
return u},param:function(a,d){var b=[],e=function(g,i){i=c.isFunction(i)?i():i;b[b.length]=encodeURIComponent(g)+"="+encodeURIComponent(i)};d===h&&(d=c.ajaxSettings.traditional);if(c.isArray(a)||a.jquery&&!c.isPlainObject(a))c.each(a,function(){e(this.name,this.value)});else for(var f in a)B(f,a[f],d,e);return b.join("&").replace(Ab,"+")}});c.extend({active:0,lastModified:{},etag:{}});var ub=c.now(),Db=/(\=)\?(&|$)|\?\?/i;c.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return c.expando+"_"+
ub++}});c.ajaxPrefilter("json jsonp",function(a,d,b){d=a.contentType==="application/x-www-form-urlencoded"&&typeof a.data=="string";if(a.dataTypes[0]==="jsonp"||a.jsonp!==false&&(Db.test(a.url)||d&&Db.test(a.data))){var e,f=a.jsonpCallback=c.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,g=k[f],i=a.url,n=a.data,p="$1"+f+"$2";a.jsonp!==false&&(i=i.replace(Db,p),a.url===i&&(d&&(n=n.replace(Db,p)),a.data===n&&(i+=(/\?/.test(i)?"&":"?")+a.jsonp+"="+f)));a.url=i;a.data=n;k[f]=function(s){e=
[s]};b.always(function(){k[f]=g;e&&c.isFunction(g)&&k[f](e[0])});a.converters["script json"]=function(){e||c.error(f+" was not called");return e[0]};a.dataTypes[0]="json";return"script"}});c.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){c.globalEval(a);return a}}});c.ajaxPrefilter("script",function(a){a.cache===h&&(a.cache=false);a.crossDomain&&
(a.type="GET",a.global=false)});c.ajaxTransport("script",function(a){if(a.crossDomain){var d,b=X.head||X.getElementsByTagName("head")[0]||X.documentElement;return{send:function(e,f){d=X.createElement("script");d.async="async";a.scriptCharset&&(d.charset=a.scriptCharset);d.src=a.url;d.onload=d.onreadystatechange=function(g,i){if(i||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null;b&&d.parentNode&&b.removeChild(d);d=h;i||f(200,"success")}};b.insertBefore(d,b.firstChild)},
abort:function(){d&&d.onload(0,1)}}}});var bb=k.ActiveXObject?function(){for(var a in pb)pb[a](0,1)}:false,Ua=0,pb;c.ajaxSettings.xhr=k.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&F()))a:{try{a=new k.ActiveXObject("Microsoft.XMLHTTP");break a}catch(d){}a=void 0}return a}:F;(function(a){c.extend(c.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})})(c.ajaxSettings.xhr());c.support.ajax&&c.ajaxTransport(function(a){if(!a.crossDomain||c.support.cors){var d;return{send:function(b,e){var f=a.xhr(),
g,i;a.username?f.open(a.type,a.url,a.async,a.username,a.password):f.open(a.type,a.url,a.async);if(a.xhrFields)for(i in a.xhrFields)f[i]=a.xhrFields[i];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType);!a.crossDomain&&!b["X-Requested-With"]&&(b["X-Requested-With"]="XMLHttpRequest");try{for(i in b)f.setRequestHeader(i,b[i])}catch(n){}f.send(a.hasContent&&a.data||null);d=function(p,s){var x,C,R,ba,ka;try{if(d&&(s||f.readyState===4)){d=h;g&&(f.onreadystatechange=c.noop,bb&&delete pb[g]);
if(s)f.readyState!==4&&f.abort();else{x=f.status;R=f.getAllResponseHeaders();ba={};(ka=f.responseXML)&&ka.documentElement&&(ba.xml=ka);ba.text=f.responseText;try{C=f.statusText}catch(Ia){C=""}!x&&a.isLocal&&!a.crossDomain?(x=ba.text?200:404):x===1223&&(x=204)}}}catch(za){s||e(-1,za)}ba&&e(x,C,ba,R)};!a.async||f.readyState===4?d():(g=++Ua,bb&&(pb||(pb={},c(k).unload(bb)),pb[g]=d),f.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var db={},Xa,Ha,ib=/^(?:toggle|show|hide)$/,kc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,
jb,Pa=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],qb,Eb=k.webkitRequestAnimationFrame||k.mozRequestAnimationFrame||k.oRequestAnimationFrame;c.fn.extend({show:function(a,d,b){var e;if(a||a===0)return this.animate(r("show",3),a,d,b);d=0;for(b=this.length;d<b;d++){a=this[d];a.style&&(e=a.style.display,!c._data(a,"olddisplay")&&e==="none"&&(e=a.style.display=""),e===""&&c.css(a,"display")==="none"&&
c._data(a,"olddisplay",m(a.nodeName)))}for(d=0;d<b;d++){a=this[d];if(a.style){e=a.style.display;if(e===""||e==="none")a.style.display=c._data(a,"olddisplay")||""}}return this},hide:function(a,d,b){if(a||a===0)return this.animate(r("hide",3),a,d,b);a=0;for(d=this.length;a<d;a++)if(this[a].style){b=c.css(this[a],"display");b!=="none"&&!c._data(this[a],"olddisplay")&&c._data(this[a],"olddisplay",b)}for(a=0;a<d;a++)this[a].style&&(this[a].style.display="none");return this},_toggle:c.fn.toggle,toggle:function(a,
d,b){var e=typeof a=="boolean";c.isFunction(a)&&c.isFunction(d)?this._toggle.apply(this,arguments):a==null||e?this.each(function(){var f=e?a:c(this).is(":hidden");c(this)[f?"show":"hide"]()}):this.animate(r("toggle",3),a,d,b);return this},fadeTo:function(a,d,b,e){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:d},a,b,e)},animate:function(a,d,b,e){var f=c.speed(d,b,e);if(c.isEmptyObject(a))return this.each(f.complete,[false]);a=c.extend({},a);return this[f.queue===false?
"each":"queue"](function(){f.queue===false&&c._mark(this);var g=c.extend({},f),i=this.nodeType===1,n=i&&c(this).is(":hidden"),p,s,x,C,R,ba,ka,Ia;g.animatedProperties={};for(x in a){p=c.camelCase(x);x!==p&&(a[p]=a[x],delete a[x]);s=a[p];c.isArray(s)?(g.animatedProperties[p]=s[1],s=a[p]=s[0]):(g.animatedProperties[p]=g.specialEasing&&g.specialEasing[p]||g.easing||"swing");if(s==="hide"&&n||s==="show"&&!n)return g.complete.call(this);i&&(p==="height"||p==="width")&&(g.overflow=[this.style.overflow,this.style.overflowX,
this.style.overflowY],c.css(this,"display")==="inline"&&c.css(this,"float")==="none"&&(c.support.inlineBlockNeedsLayout?(C=m(this.nodeName),C==="inline"?(this.style.display="inline-block"):(this.style.display="inline",this.style.zoom=1)):(this.style.display="inline-block")))}g.overflow!=null&&(this.style.overflow="hidden");for(x in a){i=new c.fx(this,g,x);s=a[x];ib.test(s)?i[s==="toggle"?n?"show":"hide":s]():(R=kc.exec(s),ba=i.cur(),R?(ka=parseFloat(R[2]),Ia=R[3]||(c.cssNumber[x]?"":"px"),Ia!=="px"&&
(c.style(this,x,(ka||1)+Ia),ba=(ka||1)/i.cur()*ba,c.style(this,x,ba+Ia)),R[1]&&(ka=(R[1]==="-="?-1:1)*ka+ba),i.custom(ba,ka,Ia)):i.custom(ba,s,""))}return true})},stop:function(a,d){a&&this.queue([]);this.each(function(){var b=c.timers,e=b.length;for(d||c._unmark(true,this);e--;)b[e].elem===this&&(d&&b[e](true),b.splice(e,1))});d||this.dequeue();return this}});c.each({slideDown:r("show",1),slideUp:r("hide",1),slideToggle:r("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},
function(a,d){c.fn[a]=function(b,e,f){return this.animate(d,b,e,f)}});c.extend({speed:function(a,d,b){var e=a&&typeof a=="object"?c.extend({},a):{complete:b||!b&&d||c.isFunction(a)&&a,duration:a,easing:b&&d||d&&!c.isFunction(d)&&d};e.duration=c.fx.off?0:typeof e.duration=="number"?e.duration:e.duration in c.fx.speeds?c.fx.speeds[e.duration]:c.fx.speeds._default;e.old=e.complete;e.complete=function(f){c.isFunction(e.old)&&e.old.call(this);e.queue!==false?c.dequeue(this):f!==false&&c._unmark(this)};
return e},easing:{linear:function(a,d,b,e){return b+e*a},swing:function(a,d,b,e){return(-Math.cos(a*Math.PI)/2+0.5)*e+b}},timers:[],fx:function(a,d,b){this.options=d;this.elem=a;this.prop=b;d.orig=d.orig||{}}});c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(c.fx.step[this.prop]||c.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,d=c.css(this.elem,
this.prop);return isNaN(a=parseFloat(d))?!d||d==="auto"?0:d:a},custom:function(a,d,b){function e(n){return f.step(n)}var f=this,g=c.fx,i;this.startTime=qb||w();this.start=a;this.end=d;this.unit=b||this.unit||(c.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;e.elem=this.elem;e()&&c.timers.push(e)&&!jb&&(Eb?(jb=true,i=function(){jb&&(Eb(i),g.tick())},Eb(i)):(jb=setInterval(g.tick,g.interval)))},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.show=
true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());c(this.elem).show()},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a){var d=qb||w(),b=true,e=this.elem,f=this.options,g,i;if(a||d>=f.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();f.animatedProperties[this.prop]=true;for(g in f.animatedProperties)f.animatedProperties[g]!==true&&(b=false);if(b){f.overflow!=
null&&!c.support.shrinkWrapBlocks&&c.each(["","X","Y"],function(p,s){e.style["overflow"+s]=f.overflow[p]});f.hide&&c(e).hide();if(f.hide||f.show)for(var n in f.animatedProperties)c.style(e,n,f.orig[n]);f.complete.call(e)}return false}f.duration==Infinity?(this.now=d):(i=d-this.startTime,this.state=i/f.duration,this.pos=c.easing[f.animatedProperties[this.prop]](this.state,i,0,1,f.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return true}};c.extend(c.fx,{tick:function(){for(var a=
c.timers,d=0;d<a.length;++d)a[d]()||a.splice(d--,1);a.length||c.fx.stop()},interval:13,stop:function(){clearInterval(jb);jb=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?(a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit):(a.elem[a.prop]=a.now)}}});c.expr&&c.expr.filters&&(c.expr.filters.animated=function(a){return c.grep(c.timers,function(d){return a===
d.elem}).length});var $a=/^t(?:able|d|h)$/i,Pb=/^(?:body|html)$/i;"getBoundingClientRect"in X.documentElement?(c.fn.offset=function(a){var d=this[0],b;if(a)return this.each(function(i){c.offset.setOffset(this,a,i)});if(!d||!d.ownerDocument)return null;if(d===d.ownerDocument.body)return c.offset.bodyOffset(d);try{b=d.getBoundingClientRect()}catch(e){}var f=d.ownerDocument,g=f.documentElement;if(!b||!c.contains(g,d))return b?{top:b.top,left:b.left}:{top:0,left:0};d=f.body;f=j(f);return{top:b.top+(f.pageYOffset||
c.support.boxModel&&g.scrollTop||d.scrollTop)-(g.clientTop||d.clientTop||0),left:b.left+(f.pageXOffset||c.support.boxModel&&g.scrollLeft||d.scrollLeft)-(g.clientLeft||d.clientLeft||0)}}):(c.fn.offset=function(a){var d=this[0];if(a)return this.each(function(x){c.offset.setOffset(this,a,x)});if(!d||!d.ownerDocument)return null;if(d===d.ownerDocument.body)return c.offset.bodyOffset(d);c.offset.initialize();var b,e=d.offsetParent,f=d,g=d.ownerDocument,i=g.documentElement,n=g.body;b=(g=g.defaultView)?
g.getComputedStyle(d,null):d.currentStyle;for(var p=d.offsetTop,s=d.offsetLeft;(d=d.parentNode)&&d!==n&&d!==i;){if(c.offset.supportsFixedPosition&&b.position==="fixed")break;b=g?g.getComputedStyle(d,null):d.currentStyle;p-=d.scrollTop;s-=d.scrollLeft;d===e&&(p+=d.offsetTop,s+=d.offsetLeft,c.offset.doesNotAddBorder&&(!c.offset.doesAddBorderForTableAndCells||!$a.test(d.nodeName))&&(p+=parseFloat(b.borderTopWidth)||0,s+=parseFloat(b.borderLeftWidth)||0),f=e,e=d.offsetParent);c.offset.subtractsBorderForOverflowNotVisible&&
b.overflow!=="visible"&&(p+=parseFloat(b.borderTopWidth)||0,s+=parseFloat(b.borderLeftWidth)||0);b=b}if(b.position==="relative"||b.position==="static"){p+=n.offsetTop;s+=n.offsetLeft}c.offset.supportsFixedPosition&&b.position==="fixed"&&(p+=Math.max(i.scrollTop,n.scrollTop),s+=Math.max(i.scrollLeft,n.scrollLeft));return{top:p,left:s}});c.offset={initialize:function(){var a=X.body,d=X.createElement("div"),b,e,f,g=parseFloat(c.css(a,"marginTop"))||0;c.extend(d.style,{position:"absolute",top:0,left:0,
margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});d.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";a.insertBefore(d,a.firstChild);b=d.firstChild;e=b.firstChild;f=b.nextSibling.firstChild.firstChild;this.doesNotAddBorder=e.offsetTop!==
5;this.doesAddBorderForTableAndCells=f.offsetTop===5;e.style.position="fixed";e.style.top="20px";this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15;e.style.position=e.style.top="";b.style.overflow="hidden";b.style.position="relative";this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==g;a.removeChild(d);c.offset.initialize=c.noop},bodyOffset:function(a){var d=a.offsetTop,b=a.offsetLeft;c.offset.initialize();c.offset.doesNotIncludeMarginInBodyOffset&&
(d+=parseFloat(c.css(a,"marginTop"))||0,b+=parseFloat(c.css(a,"marginLeft"))||0);return{top:d,left:b}},setOffset:function(a,d,b){var e=c.css(a,"position");e==="static"&&(a.style.position="relative");var f=c(a),g=f.offset(),i=c.css(a,"top"),n=c.css(a,"left"),p={},s={},x,C;(e==="absolute"||e==="fixed")&&c.inArray("auto",[i,n])>-1?(s=f.position(),x=s.top,C=s.left):(x=parseFloat(i)||0,C=parseFloat(n)||0);c.isFunction(d)&&(d=d.call(a,b,g));d.top!=null&&(p.top=d.top-g.top+x);d.left!=null&&(p.left=d.left-
g.left+C);"using"in d?d.using.call(a,p):f.css(p)}};c.fn.extend({position:function(){if(!this[0])return null;var a=this[0],d=this.offsetParent(),b=this.offset(),e=Pb.test(d[0].nodeName)?{top:0,left:0}:d.offset();b.top-=parseFloat(c.css(a,"marginTop"))||0;b.left-=parseFloat(c.css(a,"marginLeft"))||0;e.top+=parseFloat(c.css(d[0],"borderTopWidth"))||0;e.left+=parseFloat(c.css(d[0],"borderLeftWidth"))||0;return{top:b.top-e.top,left:b.left-e.left}},offsetParent:function(){return this.map(function(){for(var a=
this.offsetParent||X.body;a&&!Pb.test(a.nodeName)&&c.css(a,"position")==="static";)a=a.offsetParent;return a})}});c.each(["Left","Top"],function(a,d){var b="scroll"+d;c.fn[b]=function(e){var f,g;if(e===h){f=this[0];if(!f)return null;return(g=j(f))?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:c.support.boxModel&&g.document.documentElement[b]||g.document.body[b]:f[b]}return this.each(function(){(g=j(this))?g.scrollTo(a?c(g).scrollLeft():e,a?e:c(g).scrollTop()):(this[b]=e)})}});c.each(["Height",
"Width"],function(a,d){var b=d.toLowerCase();c.fn["inner"+d]=function(){var e=this[0];return e&&e.style?parseFloat(c.css(e,b,"padding")):null};c.fn["outer"+d]=function(e){var f=this[0];return f&&f.style?parseFloat(c.css(f,b,e?"margin":"border")):null};c.fn[b]=function(e){var f=this[0];if(!f)return e==null?null:this;if(c.isFunction(e))return this.each(function(i){var n=c(this);n[b](e.call(this,i,n[b]()))});if(c.isWindow(f)){var g=f.document.documentElement["client"+d];return f.document.compatMode===
"CSS1Compat"&&g||f.document.body["client"+d]||g}if(f.nodeType===9)return Math.max(f.documentElement["client"+d],f.body["scroll"+d],f.documentElement["scroll"+d],f.body["offset"+d],f.documentElement["offset"+d]);if(e===h){f=c.css(f,b);g=parseFloat(f);return c.isNaN(g)?f:g}return this.css(b,typeof e=="string"?e:e+"px")}});k.jQuery=k.$=c})(window);
(function(k,h){var j,m=/:([\w\d]+)/g,r=/\?([^#]*)$/,t=function(l){return Array.prototype.slice.call(l)},w=function(l){return Object.prototype.toString.call(l)==="[object Function]"},F=function(l){return Object.prototype.toString.call(l)==="[object Array]"},B=function(l){return decodeURIComponent((l||"").replace(/\+/g," "))},z=encodeURIComponent,N=function(l){return String(l).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},P=function(l){return function(q,
y){return this.route.apply(this,[l,q,y])}},la={},pa=!!(h.history&&history.pushState),na=[];j=function(){var l=t(arguments),q,y;j.apps=j.apps||{};if(l.length===0||l[0]&&w(l[0]))return j.apply(j,["body"].concat(l));else if(typeof(y=l.shift())=="string"){q=j.apps[y]||new j.Application;q.element_selector=y;l.length>0&&k.each(l,function(E,ca){q.use(ca)});q.element_selector!=y&&delete j.apps[y];return j.apps[q.element_selector]=q}};j.VERSION="0.7.0";j.addLogger=function(l){na.push(l)};j.log=function(){var l=
t(arguments);l.unshift("["+Date()+"]");k.each(na,function(q,y){y.apply(j,l)})};if(typeof h.console!="undefined")w(h.console.log.apply)?j.addLogger(function(){h.console.log.apply(h.console,arguments)}):j.addLogger(function(){h.console.log(arguments)});else typeof console!="undefined"&&j.addLogger(function(){console.log.apply(console,arguments)});k.extend(j,{makeArray:t,isFunction:w,isArray:F});j.Object=function(l){return k.extend(this,l||{})};k.extend(j.Object.prototype,{escapeHTML:N,h:N,toHash:function(){var l=
{};k.each(this,function(q,y){w(y)||(l[q]=y)});return l},toHTML:function(){var l="";k.each(this,function(q,y){w(y)||(l+="<strong>"+q+"</strong> "+y+"<br />")});return l},keys:function(l){var q=[];for(var y in this)if(!w(this[y])||!l)q.push(y);return q},has:function(l){return this[l]&&k.trim(this[l].toString())!==""},join:function(){var l=t(arguments),q=l.shift();return l.join(q)},log:function(){j.log.apply(j,arguments)},toString:function(l){var q=[];k.each(this,function(y,E){if(!w(E)||l)q.push('"'+
y+'": '+E.toString())});return"Sammy.Object: {"+q.join(",")+"}"}});j.DefaultLocationProxy=function(l,q){this.app=l;this.is_native=false;this.has_history=pa;this._startPolling(q)};j.DefaultLocationProxy.fullPath=function(l){var q=l.toString().match(/^[^#]*(#.+)$/);return[l.pathname,l.search,q?q[1]:""].join("")};j.DefaultLocationProxy.prototype={bind:function(){var l=this,q=this.app,y=j.DefaultLocationProxy;k(h).bind("hashchange."+this.app.eventNamespace(),function(E,ca){if(l.is_native===false&&!ca){l.is_native=
true;h.clearInterval(y._interval)}q.trigger("location-changed")});if(pa&&!q.disable_push_state){k(h).bind("popstate."+this.app.eventNamespace(),function(){q.trigger("location-changed")});k("a").live("click.history-"+this.app.eventNamespace(),function(E){var ca=y.fullPath(this);if(this.hostname==h.location.hostname&&q.lookupRoute("get",ca)){E.preventDefault();l.setLocation(ca);return false}})}if(!y._bindings)y._bindings=0;y._bindings++},unbind:function(){k(h).unbind("hashchange."+this.app.eventNamespace());
k(h).unbind("popstate."+this.app.eventNamespace());k("a").die("click.history-"+this.app.eventNamespace());j.DefaultLocationProxy._bindings--;j.DefaultLocationProxy._bindings<=0&&h.clearInterval(j.DefaultLocationProxy._interval)},getLocation:function(){return j.DefaultLocationProxy.fullPath(h.location)},setLocation:function(l){if(/^([^#\/]|$)/.test(l))l=pa?"/"+l:"#!/"+l;if(l!=this.getLocation())if(pa&&/^\//.test(l)){history.pushState({path:l},h.title,l);this.app.trigger("location-changed")}else return h.location=
l},_startPolling:function(l){var q=this;if(!j.DefaultLocationProxy._interval){l||(l=10);var y=function(){var E=q.getLocation();if(typeof j.DefaultLocationProxy._last_location=="undefined"||E!=j.DefaultLocationProxy._last_location)h.setTimeout(function(){k(h).trigger("hashchange",[true])},0);j.DefaultLocationProxy._last_location=E};y();j.DefaultLocationProxy._interval=h.setInterval(y,l)}}};j.Application=function(l){var q=this;this.routes={};this.listeners=new j.Object({});this.arounds=[];this.befores=
[];this.namespace=(new Date).getTime()+"-"+parseInt(Math.random()*1E3,10);this.context_prototype=function(){j.EventContext.apply(this,arguments)};this.context_prototype.prototype=new j.EventContext;w(l)&&l.apply(this,[this]);this._location_proxy||this.setLocationProxy(new j.DefaultLocationProxy(this,this.run_interval_every));this.debug&&this.bindToAllEvents(function(y,E){q.log(q.toString(),y.cleaned_type,E||{})})};j.Application.prototype=k.extend({},j.Object.prototype,{ROUTE_VERBS:["get","post","put",
"delete"],APP_EVENTS:["run","unload","lookup-route","run-route","route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect","location-changed"],_last_route:null,_location_proxy:null,_running:false,element_selector:"body",debug:false,raise_errors:false,run_interval_every:50,disable_push_state:false,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(l){return l?k(this.element_selector).find(l):
k(this.element_selector)},use:function(){var l=t(arguments),q=l.shift(),y=q||"";try{l.unshift(this);if(typeof q=="string"){y="Sammy."+q;q=j[q]}q.apply(this,l)}catch(E){if(typeof q==="undefined")this.error("Plugin Error: called use() but plugin ("+y.toString()+") is not defined",E);else w(q)?this.error("Plugin Error",E):this.error("Plugin Error: called use() but '"+y.toString()+"' is not a function",E)}return this},setLocationProxy:function(l){var q=this._location_proxy;this._location_proxy=l;if(this.isRunning()){q&&
q.unbind();this._location_proxy.bind()}},route:function(l,q,y){var E=this,ca=[],oa,T;if(!y&&w(q)){y=q=l;l="any"}l=l.toLowerCase();if(q.constructor==String){for(m.lastIndex=0;(T=m.exec(q))!==null;)ca.push(T[1]);q=new RegExp(q.replace(m,"([^/]+)")+"$")}if(typeof y=="string")y=E[y];oa=function(fa){var ga={verb:fa,path:q,callback:y,param_names:ca};E.routes[fa]=E.routes[fa]||[];E.routes[fa].push(ga)};l==="any"?k.each(this.ROUTE_VERBS,function(fa,ga){oa(ga)}):oa(l);return this},get:P("get"),post:P("post"),
put:P("put"),del:P("delete"),any:P("any"),mapRoutes:function(l){var q=this;k.each(l,function(y,E){q.route.apply(q,E)});return this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(l,q,y){var E=this;if(typeof y=="undefined")y=q;q=function(ca,oa){var T;if(oa&&oa.context){T=oa.context;delete oa.context}else T=new E.context_prototype(E,"bind",ca.type,oa,ca.target);ca.cleaned_type=ca.type.replace(E.eventNamespace(),"");y.apply(T,[ca,oa])};this.listeners[l]||(this.listeners[l]=
[]);this.listeners[l].push(q);this.isRunning()&&this._listen(l,q);return this},trigger:function(l,q){this.$element().trigger([l,this.eventNamespace()].join("."),[q]);return this},refresh:function(){this.last_location=null;this.trigger("location-changed");return this},before:function(l,q){if(w(l)){q=l;l={}}this.befores.push([l,q]);return this},after:function(l){return this.bind("event-context-after",l)},around:function(l){this.arounds.push(l);return this},isRunning:function(){return this._running},
helpers:function(l){k.extend(this.context_prototype.prototype,l);return this},helper:function(l,q){this.context_prototype.prototype[l]=q;return this},run:function(l){if(this.isRunning())return false;var q=this;k.each(this.listeners.toHash(),function(y,E){k.each(E,function(ca,oa){q._listen(y,oa)})});this.trigger("run",{start_url:l});this._running=true;this.last_location=null;!/\#(.+)/.test(this.getLocation())&&typeof l!="undefined"&&this.setLocation(l);this._checkLocation();this._location_proxy.bind();
this.bind("location-changed",function(){q._checkLocation()});this.bind("submit",function(y){return q._checkFormSubmission(k(y.target).closest("form"))===false?y.preventDefault():false});k(h).bind("beforeunload",function(){q.unload()});return this.trigger("changed")},unload:function(){if(!this.isRunning())return false;var l=this;this.trigger("unload");this._location_proxy.unbind();this.$element().unbind("submit").removeClass(l.eventNamespace());k.each(this.listeners.toHash(),function(q,y){k.each(y,
function(E,ca){l._unlisten(q,ca)})});this._running=false;return this},bindToAllEvents:function(l){var q=this;k.each(this.APP_EVENTS,function(y,E){q.bind(E,l)});k.each(this.listeners.keys(true),function(y,E){k.inArray(E,q.APP_EVENTS)==-1&&q.bind(E,l)});return this},routablePath:function(l){return l.replace(r,"")},lookupRoute:function(l,q){var y=false,E=0,ca,oa;if(typeof this.routes[l]!="undefined")for(ca=this.routes[l].length;E<ca;E++){oa=this.routes[l][E];if(this.routablePath(q).match(oa.path)){y=
oa;break}}return y},runRoute:function(l,q,y,E){var ca=this,oa=this.lookupRoute(l,q),T,fa,ga,xa,Oa,Ra,X;this.log("runRoute",[l,q].join(" "));this.trigger("run-route",{verb:l,path:q,params:y});if(typeof y=="undefined")y={};k.extend(y,this._parseQueryString(q));if(oa){this.trigger("route-found",{route:oa});if((Ra=oa.path.exec(this.routablePath(q)))!==null){Ra.shift();k.each(Ra,function(V,c){if(oa.param_names[V])y[oa.param_names[V]]=B(c);else{if(!y.splat)y.splat=[];y.splat.push(B(c))}})}T=new this.context_prototype(this,
l,q,y,E);E=this.arounds.slice(0);ga=this.befores.slice(0);Oa=[T].concat(y.splat);fa=function(){for(var V;ga.length>0;){xa=ga.shift();if(ca.contextMatchesOptions(T,xa[0])){V=xa[1].apply(T,[T]);if(V===false)return false}}ca.last_route=oa;T.trigger("event-context-before",{context:T});V=oa.callback.apply(T,Oa);T.trigger("event-context-after",{context:T});return V};k.each(E.reverse(),function(V,c){var A=fa;fa=function(){return c.apply(T,[A])}});try{X=fa()}catch(Q){this.error(["500 Error",l,q].join(" "),
Q)}return X}else return this.notFound(l,q)},contextMatchesOptions:function(l,q,y){q=q;if(typeof q==="undefined"||q=={})return true;if(typeof y==="undefined")y=true;if(typeof q==="string"||w(q.test))q={path:q};if(q.only)return this.contextMatchesOptions(l,q.only,true);else if(q.except)return this.contextMatchesOptions(l,q.except,false);var E=true,ca=true;if(q.path){if(!w(q.path.test))q.path=new RegExp(q.path.toString()+"$");E=q.path.test(l.path)}if(q.verb)ca=typeof q.verb==="string"?q.verb===l.verb:
q.verb.indexOf(l.verb)>-1;return y?ca&&E:!(ca&&E)},getLocation:function(){return this._location_proxy.getLocation()},setLocation:function(l){return this._location_proxy.setLocation(l)},swap:function(l){return this.$element().html(l)},templateCache:function(l,q){return typeof q!="undefined"?(la[l]=q):la[l]},clearTemplateCache:function(){return la={}},notFound:function(l,q){var y=this.error(["404 Not Found",l,q].join(" "));return l==="get"?y:true},error:function(l,q){q||(q=new Error);q.message=[l,q.message].join(" ");
this.trigger("error",{message:q.message,error:q});if(this.raise_errors)throw q;else this.log(q.message,q)},_checkLocation:function(){var l,q;l=this.getLocation();if(!this.last_location||this.last_location[0]!="get"||this.last_location[1]!=l){this.last_location=["get",l];q=this.runRoute("get",l)}return q},_getFormVerb:function(l){l=k(l);var q,y;y=l.find('input[name="_method"]');if(y.length>0)q=y.val();q||(q=l[0].getAttribute("method"));if(!q||q=="")q="get";return k.trim(q.toString().toLowerCase())},
_checkFormSubmission:function(l){var q,y,E;this.trigger("check-form-submission",{form:l});q=k(l);y=q.attr("action")||"";E=this._getFormVerb(q);this.log("_checkFormSubmission",q,y,E);if(E==="get"){this.setLocation(y+"?"+this._serializeFormParams(q));l=false}else{q=k.extend({},this._parseFormParams(q));l=this.runRoute(E,y,q,l.get(0))}return typeof l=="undefined"?false:l},_serializeFormParams:function(l){var q="";l=l.serializeArray();var y;if(l.length>0){q=this._encodeFormPair(l[0].name,l[0].value);
for(y=1;y<l.length;y++)q=q+"&"+this._encodeFormPair(l[y].name,l[y].value)}return q},_encodeFormPair:function(l,q){return z(l)+"="+z(q)},_parseFormParams:function(l){var q={};l=l.serializeArray();var y;for(y=0;y<l.length;y++)q=this._parseParamPair(q,l[y].name,l[y].value);return q},_parseQueryString:function(l){var q={},y,E;if(l=l.match(r)){l=l[1].split("&");for(E=0;E<l.length;E++){y=l[E].split("=");q=this._parseParamPair(q,B(y[0]),B(y[1]||""))}}return q},_parseParamPair:function(l,q,y){if(l[q])if(F(l[q]))l[q].push(y);
else l[q]=[l[q],y];else l[q]=y;return l},_listen:function(l,q){return this.$element().bind([l,this.eventNamespace()].join("."),q)},_unlisten:function(l,q){return this.$element().unbind([l,this.eventNamespace()].join("."),q)}});j.RenderContext=function(l){this.event_context=l;this.callbacks=[];this.content=this.previous_content=null;this.waiting=this.next_engine=false};j.RenderContext.prototype=k.extend({},j.Object.prototype,{then:function(l){if(!w(l))if(typeof l==="string"&&l in this.event_context){var q=
this.event_context[l];l=function(E){return q.apply(this.event_context,[E])}}else return this;var y=this;if(this.waiting)this.callbacks.push(l);else{this.wait();h.setTimeout(function(){var E=l.apply(y,[y.content,y.previous_content]);E!==false&&y.next(E)},0)}return this},wait:function(){this.waiting=true},next:function(l){this.waiting=false;if(typeof l!=="undefined"){this.previous_content=this.content;this.content=l}this.callbacks.length>0&&this.then(this.callbacks.shift())},load:function(l,q,y){var E=
this;return this.then(function(){var ca,oa,T;if(w(q)){y=q;q={}}else q=k.extend({},q);y&&this.then(y);if(typeof l==="string"){ca=(T=l.match(/\.json$/)||q.json)&&q.cache===true||q.cache!==false;E.next_engine=E.event_context.engineFor(l);delete q.cache;delete q.json;if(q.engine){E.next_engine=q.engine;delete q.engine}if(ca&&(oa=this.event_context.app.templateCache(l)))return oa;this.wait();k.ajax(k.extend({url:l,data:{},dataType:T?"json":null,type:"get",success:function(fa){ca&&E.event_context.app.templateCache(l,
fa);E.next(fa)}},q));return false}else{if(l.nodeType)return l.innerHTML;if(l.selector){E.next_engine=l.attr("data-engine");return q.clone===false?l.remove()[0].innerHTML.toString():l[0].innerHTML.toString()}}})},loadPartials:function(l){if(l){this.partials=this.partials||{};for(name in l)this.load(l[name]).then(function(q){this.partials[name]=q})}return this},render:function(l,q,y,E){return w(l)&&!q?this.then(l):this.loadPartials(E).load(l).interpolate(q,l).then(y)},partial:function(l,q){return this.render(l,
q).swap()},send:function(){var l=this,q=t(arguments),y=q.shift();if(F(q[0]))q=q[0];return this.then(function(){q.push(function(E){l.next(E)});l.wait();y.apply(y,q);return false})},collect:function(l,q,y){var E=this,ca=function(){if(w(l)){q=l;l=this.content}var oa=[],T=false;k.each(l,function(fa,ga){var xa=q.apply(E,[fa,ga]);if(xa.jquery&&xa.length==1){xa=xa[0];T=true}oa.push(xa);return xa});return T?oa:oa.join("")};return y?ca():this.then(ca)},renderEach:function(l,q,y,E){if(F(q)){E=y;y=q;q=null}return this.load(l).then(function(ca){var oa=
this;y||(y=F(this.previous_content)?this.previous_content:[]);if(E)k.each(y,function(T,fa){var ga={},xa=this.next_engine||l;q?(ga[q]=fa):(ga=fa);E(fa,oa.event_context.interpolate(ca,ga,xa))});else return this.collect(y,function(T,fa){var ga={},xa=this.next_engine||l;q?(ga[q]=fa):(ga=fa);return this.event_context.interpolate(ca,ga,xa)},true)})},interpolate:function(l,q,y){var E=this;return this.then(function(ca,oa){if(!l&&oa)l=oa;if(this.next_engine){q=this.next_engine;this.next_engine=false}var T=
E.event_context.interpolate(ca,l,q,this.partials);return y?oa+T:T})},swap:function(){return this.then(function(l){this.event_context.swap(l)}).trigger("changed",{})},appendTo:function(l){return this.then(function(q){k(l).append(q)}).trigger("changed",{})},prependTo:function(l){return this.then(function(q){k(l).prepend(q)}).trigger("changed",{})},replace:function(l){return this.then(function(q){k(l).html(q)}).trigger("changed",{})},trigger:function(l,q){return this.then(function(y){if(typeof q=="undefined")q=
{content:y};this.event_context.trigger(l,q)})}});j.EventContext=function(l,q,y,E,ca){this.app=l;this.verb=q;this.path=y;this.params=new j.Object(E);this.target=ca};j.EventContext.prototype=k.extend({},j.Object.prototype,{$element:function(){return this.app.$element(t(arguments).shift())},engineFor:function(l){var q;if(w(l))return l;l=(l||this.app.template_engine).toString();if(q=l.match(/\.([^\.\?\#]+)$/))l=q[1];if(l&&w(this[l]))return this[l];if(this.app.template_engine)return this.engineFor(this.app.template_engine);
return function(y){return y}},interpolate:function(l,q,y,E){return this.engineFor(y).apply(this,[l,q,E])},render:function(l,q,y,E){return(new j.RenderContext(this)).render(l,q,y,E)},renderEach:function(l,q,y,E){return(new j.RenderContext(this)).renderEach(l,q,y,E)},load:function(l,q,y){return(new j.RenderContext(this)).load(l,q,y)},partial:function(l,q){return(new j.RenderContext(this)).partial(l,q)},send:function(){var l=new j.RenderContext(this);return l.send.apply(l,arguments)},redirect:function(){var l;
l=t(arguments);var q=this.app.getLocation(),y=l.length;if(y>1){for(var E=0,ca=[],oa=[],T={},fa=false;E<y;E++)if(typeof l[E]=="string")ca.push(l[E]);else{k.extend(T,l[E]);fa=true}l=ca.join("/");if(fa){for(var ga in T)oa.push(this.app._encodeFormPair(ga,T[ga]));l+="?"+oa.join("&")}}else l=l[0];this.trigger("redirect",{to:l});this.app.last_location=[this.verb,this.path];this.app.setLocation(l);(new RegExp(l)).test(q)&&this.app.trigger("location-changed")},trigger:function(l,q){if(typeof q=="undefined")q=
{};if(!q.context)q.context=this;return this.app.trigger(l,q)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(l){return this.app.swap(l)},notFound:function(){return this.app.notFound(this.verb,this.path)},json:function(l){return k.parseJSON(l)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}});k.sammy=h.Sammy=j})(jQuery,window);
(function(k){Sammy=Sammy||{};Sammy.Title=function(){this.setTitle=function(h){this.title_function=k.isFunction(h)?h:function(j){return[h,j].join(" ")}};this.helper("title",function(){var h=k.makeArray(arguments).join(" ");if(this.app.title_function)h=this.app.title_function(h);document.title=h})}})(jQuery);
(function(k){function h(m){m=unescape(m);return m==="true"?true:m==="false"?false:m}function j(m,r,t){var w;if(r.match(/^[^\[]+$/))m[r]=h(t);else if(w=r.match(/^([^\[]+)\[\](.*)$/)){r=w[1];w=w[2];if(m[r]&&!k.isArray(m[r]))throw"400 Bad Request";if(w){w=w.match(/^\[([^\]]+)\](.*)$/);if(!w)throw"400 Bad Request";if(m[r])m[r][m[r].length-1][w[1]]?m[r].push(j({},w[1]+w[2],t)):k.extend(true,m[r][m[r].length-1],j({},w[1]+w[2],t));else m[r]=[j({},w[1]+w[2],t)]}else if(m[r])m[r].push(h(t));else m[r]=[h(t)]}else if(w=
r.match(/^([^\[]+)\[([^\[]+)\](.*)$/)){r=w[1];w=w[2]+w[3];if(m[r]&&k.isArray(m[r]))throw"400 Bad Request";if(m[r])k.extend(true,m[r],j(m[r],w,t));else m[r]=j({},w,t)}return m}Sammy=Sammy||{};Sammy.NestedParams=function(m){m._parseParamPair=j}})(jQuery);
(function(){if(!window.JSON)window.JSON={};(function(){function k(z){return z<10?"0"+z:z}function h(z){r.lastIndex=0;return r.test(z)?'"'+z.replace(r,function(N){var P=F[N];return typeof P==="string"?P:"\\u"+("0000"+N.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+z+'"'}function j(z,N){var P,la,pa,na,l=t,q,y=N[z];if(y&&typeof y==="object"&&typeof y.toJSON==="function")y=y.toJSON(z);if(typeof B==="function")y=B.call(N,z,y);switch(typeof y){case "string":return h(y);case "number":return isFinite(y)?
String(y):"null";case "boolean":case "null":return String(y);case "object":if(!y)return"null";t+=w;q=[];if(Object.prototype.toString.apply(y)==="[object Array]"){na=y.length;for(P=0;P<na;P+=1)q[P]=j(P,y)||"null";pa=q.length===0?"[]":t?"[\n"+t+q.join(",\n"+t)+"\n"+l+"]":"["+q.join(",")+"]";t=l;return pa}if(B&&typeof B==="object"){na=B.length;for(P=0;P<na;P+=1){la=B[P];if(typeof la==="string")if(pa=j(la,y))q.push(h(la)+(t?": ":":")+pa)}}else for(la in y)if(Object.hasOwnProperty.call(y,la))if(pa=j(la,
y))q.push(h(la)+(t?": ":":")+pa);pa=q.length===0?"{}":t?"{\n"+t+q.join(",\n"+t)+"\n"+l+"}":"{"+q.join(",")+"}";t=l;return pa}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+k(this.getUTCMonth()+1)+"-"+k(this.getUTCDate())+"T"+k(this.getUTCHours())+":"+k(this.getUTCMinutes())+":"+k(this.getUTCSeconds())+"Z"};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var m=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,t,w,F={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},B;if(typeof JSON.stringify!=="function")JSON.stringify=function(z,N,P){var la;w=t="";if(typeof P==="number")for(la=0;la<P;la+=1)w+=" ";else if(typeof P==="string")w=P;if((B=N)&&typeof N!=="function"&&(typeof N!=="object"||typeof N.length!=="number"))throw new Error("JSON.stringify");
return j("",{"":z})};if(typeof JSON.parse!=="function")JSON.parse=function(z,N){function P(pa,na){var l,q,y=pa[na];if(y&&typeof y==="object")for(l in y)if(Object.hasOwnProperty.call(y,l)){q=P(y,l);if(q!==undefined)y[l]=q;else delete y[l]}return N.call(pa,na,y)}var la;m.lastIndex=0;if(m.test(z))z=z.replace(m,function(pa){return"\\u"+("0000"+pa.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(z.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){la=eval("("+z+")");return typeof N==="function"?P({"":la},""):la}throw new SyntaxError("JSON.parse");}})();Sammy=Sammy||{};Sammy.JSON=function(k){k.helpers({json:function(h){return typeof h=="string"?JSON.parse(h):JSON.stringify(h)}})}})(jQuery);
(function(k){if(!window.Mustache)var h=function(){var j=function(){};j.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":true},context:{},render:function(m,r,t,w){if(!w){this.context=r;this.buffer=[]}if(!this.includes("",m))if(w)return m;else{this.send(m);return}m=this.render_pragmas(m);m=this.render_section(m,r,t);if(w)return this.render_tags(m,r,t,w);this.render_tags(m,r,t,w)},send:function(m){m!=""&&this.buffer.push(m)},render_pragmas:function(m){if(!this.includes("%",
m))return m;var r=this;return m.replace(new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag),function(t,w,F){if(!r.pragmas_implemented[w])throw{message:"This implementation of mustache doesn't understand the '"+w+"' pragma"};r.pragmas[w]={};if(F){t=F.split("=");r.pragmas[w][t[0]]=t[1]}return""})},render_partial:function(m,r,t){m=this.trim(m);if(!t||t[m]===undefined)throw{message:"unknown_partial '"+m+"'"};if(typeof r[m]!="object")return this.render(t[m],r,t,true);return this.render(t[m],
r[m],t,true)},render_section:function(m,r,t){if(!this.includes("#",m)&&!this.includes("^",m))return m;var w=this;return m.replace(new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg"),function(F,B,z,N){F=w.find(z,r);if(B=="^")return!F||w.is_array(F)&&F.length===0?w.render(N,r,t,true):"";else if(B=="#")return w.is_array(F)?w.map(F,function(P){return w.render(N,w.create_context(P),t,true)}).join(""):w.is_object(F)?w.render(N,w.create_context(F),
t,true):typeof F==="function"?F.call(r,N,function(P){return w.render(P,r,t,true)}):F?w.render(N,r,t,true):""})},render_tags:function(m,r,t,w){var F=this,B=function(){return new RegExp(F.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+F.ctag+"+","g")},z=B(),N=function(la,pa,na){switch(pa){case "!":return"";case "=":F.set_delimiters(na);z=B();return"";case ">":return F.render_partial(na,r,t);case "{":return F.find(na,r);default:return F.escape(F.find(na,r))}};m=m.split("\n");for(var P=0;P<m.length;P++){m[P]=
m[P].replace(z,N,this);w||this.send(m[P])}if(w)return m.join("\n")},set_delimiters:function(m){m=m.split(" ");this.otag=this.escape_regex(m[0]);this.ctag=this.escape_regex(m[1])},escape_regex:function(m){if(!arguments.callee.sRE)arguments.callee.sRE=new RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");return m.replace(arguments.callee.sRE,"\\$1")},find:function(m,r){m=this.trim(m);var t;if(r[m]===false||r[m]===0||r[m])t=r[m];else if(this.context[m]===false||this.context[m]===0||
this.context[m])t=this.context[m];if(typeof t==="function")return t.apply(r);if(t!==undefined)return t;return""},includes:function(m,r){return r.indexOf(this.otag+m)!=-1},escape:function(m){return String(m===null?"":m).replace(/&(?!\w+;)|["<>\\]/g,function(r){switch(r){case "&":return"&amp;";case "\\":return"\\\\";case '"':return'"';case "<":return"&lt;";case ">":return"&gt;";default:return r}})},create_context:function(m){if(this.is_object(m))return m;else{var r=".";if(this.pragmas["IMPLICIT-ITERATOR"])r=
this.pragmas["IMPLICIT-ITERATOR"].iterator;var t={};t[r]=m;return t}},is_object:function(m){return m&&typeof m=="object"},is_array:function(m){return Object.prototype.toString.call(m)==="[object Array]"},trim:function(m){return m.replace(/^\s*|\s*$/g,"")},map:function(m,r){if(typeof m.map=="function")return m.map(r);else{for(var t=[],w=m.length,F=0;F<w;F++)t.push(r(m[F]));return t}}};return{name:"mustache.js",version:"0.3.1-dev",to_html:function(m,r,t,w){var F=new j;if(w)F.send=w;F.render(m,r,t);
if(!w)return F.buffer.join("\n")}}}();Sammy=Sammy||{};Sammy.Mustache=function(j,m){m||(m="mustache");j.helper(m,function(r,t,w){t=k.extend({},this,t);w=k.extend({},t.partials,w);return h.to_html(r,t,w)})}})(jQuery);
window.Modernizr=function(k,h,j){function m(){F.input=function(Q){for(var V=0,c=Q.length;V<c;V++)oa[Q[V]]=!!(Q[V]in la);return oa}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));F.inputtypes=function(Q){for(var V=0,c,A,L,M=Q.length;V<M;V++){la.setAttribute("type",A=Q[V]);(c=la.type!=="text")&&(la.value=pa,la.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(A)&&la.style.WebkitAppearance!==j?(B.appendChild(la),L=h.defaultView,c=L.getComputedStyle&&
L.getComputedStyle(la,null).WebkitAppearance!=="textfield"&&la.offsetHeight!==0,B.removeChild(la)):/^(search|tel)$/.test(A)||(/^(url|email)$/.test(A)?(c=la.checkValidity&&la.checkValidity()===false):/^color$/.test(A)?(B.appendChild(la),c=la.value!=pa,B.removeChild(la)):(c=la.value!=pa)));ca[Q[V]]=!!c}return ca}("search tel url email datetime date month week time datetime-local number range color".split(" "))}function r(Q,V){var c=Q.charAt(0).toUpperCase()+Q.substr(1);c=(Q+" "+q.join(c+" ")+c).split(" ");
return!!t(c,V)}function t(Q,V){for(var c in Q)if(P[Q[c]]!==j&&(!V||V(Q[c],N)))return true}function w(Q,V){return typeof Q===V}var F={},B=h.documentElement,z=h.head||h.getElementsByTagName("head")[0],N=h.createElement("modernizr"),P=N.style,la=h.createElement("input"),pa=":)",na=Object.prototype.toString,l=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),q="Webkit Moz O ms Khtml".split(" "),y={svg:"http://www.w3.org/2000/svg"},E={},ca={},oa={},T=[],fa,ga=function(Q){var V=h.createElement("style"),c=
h.createElement("div");V.textContent=Q+"{#modernizr{height:3px}}";z.appendChild(V);c.id="modernizr";B.appendChild(c);Q=c.offsetHeight===3;V.parentNode.removeChild(V);c.parentNode.removeChild(c);return!!Q},xa=function(){var Q={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(V,c){c=c||h.createElement(Q[V]||"div");var A=(V="on"+V)in c;A||(c.setAttribute||(c=h.createElement("div")),c.setAttribute&&c.removeAttribute&&(c.setAttribute(V,""),A=
w(c[V],"function"),w(c[V],j)||(c[V]=j),c.removeAttribute(V)));return A}}(),Oa={}.hasOwnProperty,Ra;w(Oa,j)||w(Oa.call,j)?(Ra=function(Q,V){return V in Q&&w(Q.constructor.prototype[V],j)}):(Ra=function(Q,V){return Oa.call(Q,V)});E.flexbox=function(){var Q=h.createElement("div"),V=h.createElement("div");(function(A,L,M,S){L+=":";A.style.cssText=(L+l.join(M+";"+L)).slice(0,-L.length)+(S||"")})(Q,"display","box","width:42px;padding:0;");V.style.cssText=l.join("box-flex:1;")+"width:10px;";Q.appendChild(V);
B.appendChild(Q);var c=V.offsetWidth===42;Q.removeChild(V);B.removeChild(Q);return c};E.canvas=function(){var Q=h.createElement("canvas");return Q.getContext&&Q.getContext("2d")};E.canvastext=function(){return F.canvas&&w(h.createElement("canvas").getContext("2d").fillText,"function")};E.webgl=function(){return!!k.WebGLRenderingContext};E.touch=function(){return"ontouchstart"in k||ga("@media ("+l.join("touch-enabled),(")+"modernizr)")};E.geolocation=function(){return!!navigator.geolocation};E.postmessage=
function(){return!!k.postMessage};E.websqldatabase=function(){return!!k.openDatabase};E.indexedDB=function(){for(var Q=-1,V=q.length;++Q<V;){var c=q[Q].toLowerCase();if(k[c+"_indexedDB"]||k[c+"IndexedDB"])return true}return false};E.hashchange=function(){return xa("hashchange",k)&&(h.documentMode===j||h.documentMode>7)};E.history=function(){return!!(k.history&&history.pushState)};E.draganddrop=function(){return xa("dragstart")&&xa("drop")};E.websockets=function(){return"WebSocket"in k};E.rgba=function(){P.cssText=
"background-color:rgba(150,255,150,.5)";return(""+P.backgroundColor).indexOf("rgba")!==-1};E.hsla=function(){P.cssText="background-color:hsla(120,40%,100%,.5)";return(""+P.backgroundColor).indexOf("rgba")!==-1||(""+P.backgroundColor).indexOf("hsla")!==-1};E.multiplebgs=function(){P.cssText="background:url(//:),url(//:),red url(//:)";return/(url\s*\(.*?){3}/.test(P.background)};E.backgroundsize=function(){return r("backgroundSize")};E.borderimage=function(){return r("borderImage")};E.borderradius=
function(){return r("borderRadius","",function(Q){return(""+Q).indexOf("orderRadius")!==-1})};E.boxshadow=function(){return r("boxShadow")};E.textshadow=function(){return h.createElement("div").style.textShadow===""};E.opacity=function(){var Q=l.join("opacity:.55;")+"";P.cssText=Q;return/^0.55$/.test(P.opacity)};E.cssanimations=function(){return r("animationName")};E.csscolumns=function(){return r("columnCount")};E.cssgradients=function(){var Q=("background-image:"+l.join("gradient(linear,left top,right bottom,from(#9f9),to(white));background-image:")+
l.join("linear-gradient(left top,#9f9, white);background-image:")).slice(0,-17);P.cssText=Q;return(""+P.backgroundImage).indexOf("gradient")!==-1};E.cssreflections=function(){return r("boxReflect")};E.csstransforms=function(){return!!t(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])};E.csstransforms3d=function(){var Q=!!t(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);Q&&"webkitPerspective"in B.style&&(Q=ga("@media ("+
l.join("transform-3d),(")+"modernizr)"));return Q};E.csstransitions=function(){return r("transitionProperty")};E.fontface=function(){var Q,V,c=z||B,A=h.createElement("style");V=h.implementation||{hasFeature:function(){return false}};A.type="text/css";c.insertBefore(A,c.firstChild);Q=A.sheet||A.styleSheet;V=(V.hasFeature("CSS2","")?function(L){if(!Q||!L)return false;var M=false;try{Q.insertRule(L,0);M=/src/i.test(Q.cssRules[0].cssText);Q.deleteRule(Q.cssRules.length-1)}catch(S){}return M}:function(L){if(!Q||
!L)return false;Q.cssText=L;return Q.cssText.length!==0&&/src/i.test(Q.cssText)&&Q.cssText.replace(/\r+|\n+/g,"").indexOf(L.split(" ")[0])===0})('@font-face { font-family: "font"; src: url(data:,); }');c.removeChild(A);return V};E.video=function(){var Q=h.createElement("video"),V=!!Q.canPlayType;if(V){V=new Boolean(V);V.ogg=Q.canPlayType('video/ogg; codecs="theora"');V.h264=Q.canPlayType('video/mp4; codecs="avc1.42E01E"')||Q.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');V.webm=Q.canPlayType('video/webm; codecs="vp8, vorbis"')}return V};
E.audio=function(){var Q=h.createElement("audio"),V=!!Q.canPlayType;V&&(V=new Boolean(V),V.ogg=Q.canPlayType('audio/ogg; codecs="vorbis"'),V.mp3=Q.canPlayType("audio/mpeg;"),V.wav=Q.canPlayType('audio/wav; codecs="1"'),V.m4a=Q.canPlayType("audio/x-m4a;")||Q.canPlayType("audio/aac;"));return V};E.localstorage=function(){try{return!!localStorage.getItem}catch(Q){return false}};E.sessionstorage=function(){try{return!!sessionStorage.getItem}catch(Q){return false}};E.webWorkers=function(){return!!k.Worker};
E.applicationcache=function(){return!!k.applicationCache};E.svg=function(){return!!h.createElementNS&&!!h.createElementNS(y.svg,"svg").createSVGRect};E.inlinesvg=function(){var Q=h.createElement("div");Q.innerHTML="<svg/>";return(Q.firstChild&&Q.firstChild.namespaceURI)==y.svg};E.smil=function(){return!!h.createElementNS&&/SVG/.test(na.call(h.createElementNS(y.svg,"animate")))};E.svgclippaths=function(){return!!h.createElementNS&&/SVG/.test(na.call(h.createElementNS(y.svg,"clipPath")))};for(var X in E)Ra(E,
X)&&(fa=X.toLowerCase(),F[fa]=E[X](),T.push((F[fa]?"":"no-")+fa));F.input||m();F.crosswindowmessaging=F.postmessage;F.historymanagement=F.history;F.addTest=function(Q,V){Q=Q.toLowerCase();if(!F[Q]){V=!!V();B.className+=" "+(V?"":"no-")+Q;F[Q]=V;return F}};P.cssText="";N=la=null;k.attachEvent&&function(){var Q=h.createElement("div");Q.innerHTML="<elem></elem>";return Q.childNodes.length!==1}()&&function(Q,V){function c(aa,ha){for(var sa=-1,ta=aa.length,La,gb=[];++sa<ta;){La=aa[sa];(ha=La.media||ha)!=
"screen"&&gb.push(c(La.imports,ha),La.cssText)}return gb.join("")}function A(aa){for(var ha=-1;++ha<M;)aa.createElement(L[ha])}var L="abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video".split("|"),M=L.length,S=new RegExp("(^|\\s)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)","gi"),ja=new RegExp("<(/*)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)",
"gi"),ia=new RegExp("(^|[^\\n]*?\\s)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)([^\\n]*)({[\\n\\w\\W]*?})","gi"),wa=V.createDocumentFragment(),Ga=V.documentElement,ua=Ga.firstChild,Na=V.createElement("body"),H=V.createElement("style"),ea;A(V);A(wa);ua.insertBefore(H,ua.firstChild);H.media="print";Q.attachEvent("onbeforeprint",function(){var aa=-1,ha=c(V.styleSheets,"all"),sa=[],ta;for(ea=ea||V.body;(ta=
ia.exec(ha))!=null;)sa.push((ta[1]+ta[2]+ta[3]).replace(S,"$1.iepp_$2")+ta[4]);for(H.styleSheet.cssText=sa.join("\n");++aa<M;){ha=V.getElementsByTagName(L[aa]);sa=ha.length;for(ta=-1;++ta<sa;)ha[ta].className.indexOf("iepp_")<0&&(ha[ta].className+=" iepp_"+L[aa])}wa.appendChild(ea);Ga.appendChild(Na);Na.className=ea.className;Na.innerHTML=ea.innerHTML.replace(ja,"<$1font")});Q.attachEvent("onafterprint",function(){Na.innerHTML="";Ga.removeChild(Na);Ga.appendChild(ea);H.styleSheet.cssText=""})}(k,
h);F._enableHTML5=true;F._version="1.7";B.className=B.className.replace(/\bno-js\b/,"")+" js "+T.join(" ");return F}(this,this.document);
var Model=function(k,h){var j=function(m){this.attributes=jQuery.extend({},m);this.changes={};this.errors=new Model.Errors(this);this.uid=[k,Model.UID.generate()].join("-");jQuery.isFunction(this.initialize)&&this.initialize()};Model.Module.extend.call(j,Model.Module);j._name=k;j.collection=[];j.unique_key="id";j.extend(Model.Callbacks).extend(Model.ClassMethods);j.prototype=new Model.Base;j.prototype.constructor=j;jQuery.isFunction(h)&&h.call(j,j,j.prototype);return j};
Model.Callbacks={bind:function(k,h){this.callbacks=this.callbacks||{};this.callbacks[k]=this.callbacks[k]||[];this.callbacks[k].push(h);return this},trigger:function(k,h){this.callbacks=this.callbacks||{};var j=this.callbacks[k];if(j)for(var m=0;m<j.length;m++)j[m].apply(this,h||[]);return this},unbind:function(k,h){this.callbacks=this.callbacks||{};if(h)for(var j=this.callbacks[k]||[],m=0;m<j.length;m++)j[m]===h&&this.callbacks[k].splice(m,1);else delete this.callbacks[k];return this}};
Model.ClassMethods={add:function(k){var h=k.id();if(jQuery.inArray(k,this.collection)===-1&&!(h&&this.find(h))){this.collection.push(k);this.trigger("add",[k])}return this},all:function(){return this.collection.slice()},chain:function(k){return jQuery.extend({},this,{collection:k})},count:function(){return this.all().length},detect:function(k){for(var h=this.all(),j,m=0,r=h.length;m<r;m++){j=h[m];if(k.call(j,j,m))return j}},each:function(k,h){for(var j=this.all(),m=0,r=j.length;m<r;m++)k.call(h||
j[m],j[m],m,j);return this},find:function(k){return this.detect(function(){return this.id()==k})},first:function(){return this.all()[0]},load:function(k){if(this._persistence){var h=this;this._persistence.read(function(j){for(var m=0,r=j.length;m<r;m++)h.add(j[m]);k&&k.call(h,j)})}return this},last:function(){var k=this.all();return k[k.length-1]},map:function(k,h){for(var j=this.all(),m=[],r=0,t=j.length;r<t;r++)m.push(k.call(h||j[r],j[r],r,j));return m},persistence:function(k){if(arguments.length==
0)return this._persistence;else{var h=Array.prototype.slice.call(arguments,1);h.unshift(this);this._persistence=k.apply(k,h);return this}},pluck:function(k){for(var h=this.all(),j=[],m=0,r=h.length;m<r;m++)j.push(h[m].attr(k));return j},remove:function(k){for(var h,j=0,m=this.collection.length;j<m;j++)if(this.collection[j]===k){h=j;break}if(h!=undefined){this.collection.splice(h,1);this.trigger("remove",[k]);return true}else return false},reverse:function(){return this.chain(this.all().reverse())},
select:function(k,h){for(var j=this.all(),m=[],r,t=0,w=j.length;t<w;t++){r=j[t];if(k.call(h||r,r,t,j))m.push(r)}return this.chain(m)},sort:function(k){return this.chain(this.all().sort(k))},sortBy:function(k){var h=jQuery.isFunction(k);return this.sort(function(j,m){var r=h?k.call(j):j.attr(k),t=h?k.call(m):m.attr(k);return r<t?-1:r>t?1:0})},use:function(k){var h=Array.prototype.slice.call(arguments,1);h.unshift(this);k.apply(this,h);return this}};
Model.Errors=function(k){this.errors={};this.model=k};Model.Errors.prototype={add:function(k,h){this.errors[k]||(this.errors[k]=[]);this.errors[k].push(h);return this},all:function(){return this.errors},clear:function(){this.errors={};return this},each:function(k){for(var h in this.errors)for(var j=0;j<this.errors[h].length;j++)k.call(this,h,this.errors[h][j]);return this},on:function(k){return this.errors[k]||[]},size:function(){var k=0;this.each(function(){k++});return k}};
Model.InstanceMethods={asJSON:function(){return this.attr()},attr:function(k,h){if(arguments.length===0)return jQuery.extend({},this.attributes,this.changes);else if(arguments.length===2){if(this.attributes[k]===h)delete this.changes[k];else this.changes[k]=h;return this}else if(typeof k==="object"){for(var j in k)this.attr(j,k[j]);return this}else return k in this.changes?this.changes[k]:this.attributes[k]},callPersistMethod:function(k,h){var j=this,m=function(r){if(r){j.merge(j.changes).reset();
k==="destroy"?j.constructor.remove(j):j.constructor.add(j);j.trigger(k)}var t;if(h)t=h.apply(j,arguments);return t};this.constructor._persistence?this.constructor._persistence[k](this,m):m.call(this,true)},destroy:function(k){this.callPersistMethod("destroy",k);return this},id:function(){return this.attributes[this.constructor.unique_key]},merge:function(k){jQuery.extend(this.attributes,k);return this},newRecord:function(){return this.id()===undefined},reset:function(){this.errors.clear();this.changes=
{};return this},save:function(k){if(this.valid())this.callPersistMethod(this.newRecord()?"create":"update",k);else k&&k(false);return this},valid:function(){this.errors.clear();this.validate();return this.errors.size()===0},validate:function(){return this}};
Model.localStorage=function(k){if(!window.localStorage)return{create:function(r,t){t(true)},destroy:function(r,t){t(true)},read:function(r){r([])},update:function(r,t){t(true)}};var h=[k._name,"collection"].join("-"),j=function(){var r=localStorage[h];return r?JSON.parse(r):[]},m=function(r){localStorage.setItem(r.uid,JSON.stringify(r.asJSON()));r=r.uid;var t=j();if(jQuery.inArray(r,t)===-1){t.push(r);localStorage.setItem(h,JSON.stringify(t))}};return{create:function(r,t){m(r);t(true)},destroy:function(r,
t){localStorage.removeItem(r.uid);var w=r.uid,F=j();w=jQuery.inArray(w,F);if(w>-1){F.splice(w,1);localStorage.setItem(h,JSON.stringify(F))}t(true)},read:function(r){if(!r)return false;for(var t=k.map(function(){return this.uid}),w=j(),F=[],B,z,N=0,P=w.length;N<P;N++){z=w[N];if(jQuery.inArray(z,t)==-1){B=JSON.parse(localStorage[z]);B=new k(B);B.uid=z;F.push(B)}}r(F)},update:function(r,t){m(r);t(true)}}};Model.Log=function(){window.console&&window.console.log.apply(window.console,arguments)};
Model.Module={extend:function(k){jQuery.extend(this,k);return this},include:function(k){jQuery.extend(this.prototype,k);return this}};
Model.REST=function(k,h,j){var m=/:([\w\d]+)/g,r=function(){for(var t=[],w;(w=m.exec(h))!==null;)t.push(w[1]);return t}();return jQuery.extend({path:function(t){var w=h;jQuery.each(r,function(F,B){w=w.replace(":"+B,t.attributes[B])});return w},create:function(t,w){return this.xhr("POST",this.create_path(t),t,w)},create_path:function(t){return this.path(t)},destroy:function(t,w){return this.xhr("DELETE",this.destroy_path(t),t,w)},destroy_path:function(t){return this.update_path(t)},params:function(t){var w;
if(t){var F=t.asJSON();delete F[t.constructor.unique_key];w={};w[t.constructor._name.toLowerCase()]=F}else w=null;if(jQuery.ajaxSettings.data)w=jQuery.extend({},jQuery.ajaxSettings.data,w);return w},read:function(t){return this.xhr("GET",this.read_path(),null,function(w,F,B){B=jQuery.makeArray(B);w=[];F=0;for(var z=B.length;F<z;F++)w.push(new k(B[F]));t(w)})},read_path:function(){return h},update:function(t,w){return this.xhr("PUT",this.update_path(t),t,w)},update_path:function(t){return[this.path(t),
t.id()].join("/")},xhr:function(t,w,F,B){var z=this,N=t=="GET"?undefined:this.params(F);return jQuery.ajax({type:t,url:w+".json",dataType:"json",data:N,dataFilter:function(P){return/\S/.test(P)?P:undefined},complete:function(P,la){z.xhrComplete(P,la,F,B)}})},xhrComplete:function(t,w,F,B){var z=Model.REST["handle"+t.status];z&&z.call(this,t,w,F);w=w==="success";z=Model.REST.parseResponseData(t);w&&F&&z&&F.attr(z);B&&B.call(F,w,t,z)}},j)};Model.RestPersistence=Model.REST;
Model.REST.handle422=function(k,h,j){if(k=Model.REST.parseResponseData(k)){j.errors.clear();for(var m in k)for(h=0;h<k[m].length;h++)j.errors.add(m,k[m][h])}};Model.REST.parseResponseData=function(k){try{return/\S/.test(k.responseText)?jQuery.parseJSON(k.responseText):undefined}catch(h){Model.Log(h)}};Model.UID={counter:0,generate:function(){return[(new Date).valueOf(),this.counter++].join("-")},reset:function(){this.counter=0;return this}};Model.VERSION="0.10.1";
Model.Base=function(){function k(){}k.prototype=jQuery.extend({},Model.Callbacks,Model.InstanceMethods);return k}();
Model.SinatraREST=function(k,h,j){var m=/:([\w\d]+)/g,r=function(){for(var t=[],w;(w=m.exec(h))!==null;)t.push(w[1]);return t}();return jQuery.extend({path:function(t){var w=h;jQuery.each(r,function(F,B){w=w.replace(":"+B,t.attributes[B])});return w},create:function(t,w){return this.xhr("POST",this.create_path(t),t,w)},create_path:function(t){return this.path(t)},destroy:function(t,w){return this.xhr("DELETE",this.destroy_path(t),t,w)},destroy_path:function(t){return this.update_path(t)},params:function(t){var w;
if(t){var F=t.asJSON();delete F[t.constructor.unique_key];w={};w[t.constructor._name.toLowerCase()]=F}else w=null;if(jQuery.ajaxSettings.data)w=jQuery.extend({},jQuery.ajaxSettings.data,w);return w},read:function(t){return this.xhr("GET",this.read_path(),null,function(w,F,B){B=jQuery.makeArray(B);w=[];F=0;for(var z=B.length;F<z;F++)w.push(new k(B[F]));t(w)})},read_path:function(){return h},update:function(t,w){return this.xhr("PUT",this.update_path(t),t,w)},update_path:function(t){return[this.path(t),
t.id()].join("/")},xhr:function(t,w,F,B){var z=this,N=t=="GET"?undefined:this.params(F);return jQuery.ajax({type:t,url:w+".json",dataType:"json",data:N,complete:function(P,la){z.xhrComplete(P,la,F,B)}})},xhrComplete:function(t,w,F,B){var z=Model.REST["handle"+t.status];z&&z.call(this,t,w,F);w=w==="success";z=Model.REST.parseResponseData(t);w&&F&&z&&F.attr(z);B&&B.call(F,w,t,z)}},j)};
var CodeMirror=function(){function k(c,A){function L(b){Za=null;var e={line:0,ch:0};ja(e,{line:W.length-1,ch:W[W.length-1].text.length},X(b),e,e);Za=new w}function M(){if(ma.readOnly!="nocursor"){!Wa&&ma.onFocus&&ma.onFocus($a);Wa=true;sa();if(va.className.search(/\bCodeMirror-focused\b/)==-1)va.className+=" CodeMirror-focused";dc()}}function S(){Wa&&ma.onBlur&&ma.onBlur($a);clearInterval(bc);hb=null;Wa=false;va.className=va.className.replace(" CodeMirror-focused","")}function ja(b,e,f,g,i){if(Za){for(var n=
[],p=b.line,s=e.line+1;p<s;++p)n.push(W[p].text);for(Za.addChange(b.line,f.length,n);Za.done.length>ma.undoDepth;)Za.done.shift()}ua(b,e,f,g,i)}function ia(b,e){var f=b.pop();if(f){for(var g=[],i=f.start+f.added,n=f.start;n<i;++n)g.push(W[n].text);e.push({start:f.start,added:f.old.length,old:g});n=f.start+f.old.length-1;g=g[g.length-1];var p=f.old[f.old.length-1];if(p)if(g){for(var s=g.length,x=p.length;s>=0&&x>=0;--s,--x)if(g.charAt(s)!=p.charAt(x))break;g=x+1}else g=p.length;else g=g?g.length:0;
n=Ka({line:n,ch:g});ua({line:f.start,ch:0},{line:i-1,ch:W[i-1].text.length},f.old,n,n)}}function wa(){ia(Za.done,Za.undone)}function Ga(){ia(Za.undone,Za.done)}function ua(b,e,f,g,i){for(var n=false,p=Eb.length,s=b.line;s<e.line;++s)if(W[s].text.length==p){n=true;break}var x=e.line-b.line;s=W[b.line];var C=W[e.line];if(s==C)if(f.length==1)s.replace(b.ch,e.ch,f[0]);else{C=s.split(e.ch,f[f.length-1]);var R=[b.line+1,x];s.replace(b.ch,s.text.length,f[0]);s=1;for(var ba=f.length-1;s<ba;++s)R.push(new r(f[s]));
R.push(C);W.splice.apply(W,R)}else if(f.length==1){s.replace(b.ch,s.text.length,f[0]+C.text.slice(e.ch));W.splice(b.line+1,x)}else{R=[b.line+1,x-1];s.replace(b.ch,s.text.length,f[0]);C.replace(0,e.ch,f[f.length-1]);s=1;for(ba=f.length-1;s<ba;++s)R.push(new r(f[s]));W.splice.apply(W,R)}s=b.line;for(ba=s+f.length;s<ba;++s){C=W[s].text;if(C.length>p){Eb=C;p=C.length;n=false}}if(n){s=p=0;for(ba=W.length;s<ba;++s){C=W[s].text;if(C.length>p){p=C.length;Eb=C}}}n=[];x=f.length-x-1;s=0;for(C=cb.length;s<C;++s){p=
cb[s];if(p<b.line)n.push(p);else p>e.line&&n.push(p+x)}f.length&&n.push(b.line);cb=n;Kb(100);Ua.push({from:b.line,to:e.line+1,diff:x});pb={from:b,to:e,text:f};xb(g,i,O.from.line<=Math.min(e.line,e.line+x)?O.from.line:O.from.line+x,O.to.line<=Math.min(e.line,e.line+x)?O.to.line:O.to.line+x);Ab.style.height=W.length*ab()+2*Ya.offsetTop+"px"}function Na(b,e,f){function g(n){if(l(n,e))return n;if(!l(f,n))return i;var p=n.line+b.length-(f.line-e.line)-1,s=n.ch;if(n.line==f.line)s+=b[b.length-1].length-
(f.ch-(f.line==e.line?e.ch:0));return{line:p,ch:s}}e=Ka(e);f=f?Ka(f):e;b=X(b);var i;ea(b,e,f,function(n){i=n;return{from:g(O.from),to:g(O.to)}});return i}function H(b,e){ea(X(b),O.from,O.to,function(f){return e=="end"?{from:f,to:f}:e=="start"?{from:O.from,to:O.from}:{from:O.from,to:f}})}function ea(b,e,f,g){g=g({line:e.line+b.length-1,ch:b.length==1?b[0].length+e.ch:b[b.length-1].length});ja(e,f,b,g.from,g.to)}function aa(b,e){var f=b.line,g=e.line;if(f==g)return W[f].text.slice(b.ch,e.ch);var i=
[W[f].text.slice(b.ch)];for(f=f+1;f<g;++f)i.push(W[f].text);i.push(W[g].text.slice(0,e.ch));return i.join("\n")}function ha(){return aa(O.from,O.to)}function sa(){Pb||ac.set(2E3,function(){Yb();La();Wa&&sa();Zb()})}function ta(b){function e(){Yb();var g=La();if(g=="moved"&&b)Oa[b]=true;if(!g&&!f){f=true;ac.set(80,e)}else{Pb=false;sa()}Zb()}var f=false;Pb=true;ac.set(20,e)}function La(){function b(Ba,Ca){for(var o=0;;){var u=f.indexOf("\n",o);if(u==-1||(f.charAt(u-1)=="\r"?u-1:u)>=Ba)return{line:Ca,
ch:Ba-o};++Ca;o=u+1}}if(!Xa){var e=false,f=Ea.value,g=Q(Ea);if(!g)return false;e=Pa.text!=f;var i=ub,n=e||g.start!=Pa.start||g.end!=(i?Pa.start:Pa.end);if(!n&&!i)return false;if(e){hb=ub=null;if(ma.readOnly){bb=true;return"changed"}}var p=b(g.start,Pa.from),s=b(g.end,Pa.from);if(i){p=g.start==i.anchor?s:p;s=hb?O.to:g.start==i.anchor?p:s;if(!l(p,s)){ub=null;O.inverted=false;i=p;p=s;s=i}}if(p.line==s.line&&p.line==O.from.line&&p.line==O.to.line&&!hb)bb=false;if(e){i=0;for(var x=f.length,C=Math.min(x,
Pa.text.length),R,ba=Pa.from,ka=-1;i<C&&(R=f.charAt(i))==Pa.text.charAt(i);){++i;if(R=="\n"){ba++;ka=i}}C=ka>-1?i-ka:i;for(var Ia=Pa.to-1,za=Pa.text.length;;){R=Pa.text.charAt(za);R=="\n"&&Ia--;if(f.charAt(x)!=R){++x;++za;break}if(za<=i||x<=i)break;--x;--za}ka=Pa.text.lastIndexOf("\n",za-1);ja({line:ba,ch:C},{line:Ia,ch:ka==-1?za:za-ka-1},X(f.slice(i,x)),p,s);if(ba!=Ia||p.line!=ba)bb=true}else xb(p,s);Pa.text=f;Pa.start=g.start;Pa.end=g.end;return e?"changed":n?"moved":false}}function gb(){for(var b=
[],e=Math.max(0,O.from.line-1),f=Math.min(W.length,O.to.line+2),g=e;g<f;++g)b.push(W[g].text);b=Ea.value=b.join(fa);var i=O.from.ch,n=O.to.ch;for(g=e;g<O.from.line;++g)i+=fa.length+W[g].text.length;for(g=e;g<O.to.line;++g)n+=fa.length+W[g].text.length;Pa={text:b,from:e,to:f,start:i,end:n};V(Ea,i,ub?i:n)}function kb(){ma.readOnly!="nocursor"&&Ea.focus()}function Fb(){var b=Wb(O.inverted?O.from:O.to);return Rb(b.x,b.y,b.x,b.yBot)}function Rb(b,e,f,g){var i=Ya.offsetLeft,n=Ya.offsetTop,p=ab();e+=n;g+=
n;b+=i;f+=i;var s=va.clientHeight,x=va.scrollTop;i=false;n=true;if(e<x){va.scrollTop=Math.max(0,e-2*p);i=true}else if(g>x+s){va.scrollTop=g+p-s;i=true}e=va.clientWidth;g=va.scrollLeft;if(b<g){va.scrollLeft=Math.max(0,b-10);i=true}else if(f>e+g){va.scrollLeft=f+10-e;i=true;if(f>Ab.clientWidth)n=false}i&&ma.onScroll&&ma.onScroll($a);return n}function Sb(){var b=ab(),e=va.scrollTop-Ya.offsetTop;return{from:Math.min(W.length,Math.max(0,Math.floor(e/b))),to:Math.min(W.length,Math.ceil((e+va.clientHeight)/
b))}}function lb(b){if(va.clientWidth){for(var e=b===true?[]:[{from:Ha,to:ib,domStart:0}],f=0,g=b.length||0;f<g;++f){for(var i=b[f],n=[],p=i.diff||0,s=0,x=e.length;s<x;++s){var C=e[s];if(i.to<=C.from)n.push({from:C.from+p,to:C.to+p,domStart:C.domStart});else if(C.to<=i.from)n.push(C);else{i.from>C.from&&n.push({from:C.from,to:i.from,domStart:C.domStart});i.to<C.to&&n.push({from:i.to+p,to:C.to+p,domStart:C.domStart+(i.to-C.from)})}}e=n}p=Sb();i=Math.min(Ha,Math.max(p.from-3,0));n=Math.min(W.length,
Math.max(ib,p.to+3));b=[];s=0;x=ib-Ha;var R=i,ba=0;f=0;for(g=e.length;f<g;++f){C=e[f];if(!(C.to<=i)){if(C.from>=n)break;if(C.domStart>s||C.from>R){b.push({from:R,to:C.from,domSize:C.domStart-s,domStart:s});ba+=C.from-R}R=C.to;s=C.domStart+(C.to-C.from)}}if(s!=x||R!=n){ba+=Math.abs(n-R);b.push({from:R,to:n,domSize:x-s,domStart:s})}if(b.length){Qa.style.display="none";if(ba>(p.to-p.from)*0.3){C=i=Math.max(p.from-10,0);e=n=Math.min(p.to+7,W.length);f=[];g={line:C,ch:0};g=l(O.from,g)&&!l(O.to,g);for(C=
C;C<e;++C){s=p=null;if(g){p=0;if(O.to.line==C){g=false;s=O.to.ch}}else if(O.from.line==C)if(O.to.line==C){p=O.from.ch;s=O.to.ch}else{g=true;p=O.from.ch}f.push(W[C].getHTML(p,s,true))}Qa.innerHTML=f.join("")}else{e=O.from.line;f=O.to.line;g=0;C=oa&&mb.createElement("div");p=0;for(s=b.length;p<s;++p){x=b[p];R=x.to-x.from-x.domSize;ba=Qa.childNodes[x.domStart+x.domSize+g]||null;if(oa)for(var ka=Math.max(-R,x.domSize);ka>0;--ka)Qa.removeChild(ba?ba.previousSibling:Qa.lastChild);else if(R){for(ka=Math.max(0,
R);ka>0;--ka)Qa.insertBefore(mb.createElement("pre"),ba);for(ka=Math.max(0,-R);ka>0;--ka)Qa.removeChild(ba?ba.previousSibling:Qa.lastChild)}var Ia=Qa.childNodes[x.domStart+g],za=e<x.from&&f>=x.from;for(ka=x.from;ka<x.to;++ka){var Ba=null,Ca=null;if(za){Ba=0;if(f==ka){za=false;Ca=O.to.ch}}else if(e==ka)if(f==ka){Ba=O.from.ch;Ca=O.to.ch}else{za=true;Ba=O.from.ch}if(oa){C.innerHTML=W[ka].getHTML(Ba,Ca,true);Qa.insertBefore(C.firstChild,ba)}else{Ia.innerHTML=W[ka].getHTML(Ba,Ca,false);Ia.className=W[ka].className||
"";Ia=Ia.nextSibling}}g+=R}}Qa.style.display="";e=i!=Ha||n!=ib||kc!=va.clientHeight;Ha=i;ib=n;Lb.style.top=i*ab()+"px";if(e){kc=va.clientHeight;Ab.style.height=W.length*ab()+2*Ya.offsetTop+"px";Gb()}i=Jb(Eb);Ya.style.width=i>va.clientWidth?i+"px":"";if(Qa.childNodes.length!=ib-Ha)throw new Error("BAD PATCH! "+JSON.stringify(b)+" size="+(ib-Ha)+" nodes="+Qa.childNodes.length);Hb()}}else Ha=ib=0}function Gb(){if(ma.gutter||ma.lineNumbers){var b=Lb.offsetHeight,e=va.clientHeight;nb.style.height=(b-e<
2?e:b)+"px";b=[];for(e=Ha;e<ib;++e){var f=W[e].gutterMarker,g=ma.lineNumbers?e+ma.firstLineNumber:null;if(f&&f.text)g=f.text.replace("%N%",g!=null?g:"");else if(g==null)g="\u00a0";b.push(f&&f.style?'<pre class="'+f.style+'">':"<pre>",g,"</pre>")}nb.style.display="none";Mb.innerHTML=b.join("");b=String(W.length).length;e=Mb.firstChild;f=e.textContent||e.innerText||e.nodeValue||"";for(g="";f.length+g.length<b;)g+="\u00a0";g&&e.insertBefore(mb.createTextNode(g),e.firstChild);nb.style.display="";Ya.style.marginLeft=
nb.offsetWidth+"px"}}function Hb(){var b=O.inverted?O.from:O.to,e=Ub(b.line,b.ch)+"px";b=(b.line-Ha)*ab()+"px";$b.style.top=b;if(na(O.from,O.to)){ob.style.top=b;ob.style.left=e;ob.style.display=""}else ob.style.display="none"}function rb(b,e){var f=hb&&Ka(hb);if(f)if(l(f,b))b=f;else if(l(e,f))e=f;xb(b,e)}function xb(b,e,f,g){if(!(na(O.from,b)&&na(O.to,e))){if(l(e,b)){var i=e;e=b;b=i}i=na(O.to,e);var n=na(O.from,b);if(na(b,e))O.inverted=false;else if(i&&!n)O.inverted=true;else if(n&&!i)O.inverted=
false;if(f==null){f=O.from.line;g=O.to.line}if(na(b,e))na(O.from,O.to)||Ua.push({from:f,to:g+1});else if(na(O.from,O.to))Ua.push({from:b.line,to:e.line+1});else{na(b,O.from)||(b.line<f?Ua.push({from:b.line,to:Math.min(e.line,f)+1}):Ua.push({from:f,to:Math.min(g,b.line)+1}));na(e,O.to)||(e.line<g?Ua.push({from:Math.max(f,b.line),to:g+1}):Ua.push({from:Math.max(b.line,g),to:e.line+1}))}O.from=b;O.to=e;db=true}}function yb(b,e,f){b=Ka({line:b,ch:e||0});(f?rb:xb)(b,b)}function zb(b){return Math.max(0,
Math.min(b,W.length-1))}function Ka(b){if(b.line<0)return{line:0,ch:0};if(b.line>=W.length)return{line:W.length-1,ch:W[W.length-1].text.length};var e=b.ch,f=W[b.line].text.length;return e==null||e>f?{line:b.line,ch:f}:e<0?{line:b.line,ch:0}:b}function lc(b){rb({line:b,ch:0},{line:b,ch:W[b].text.length})}function sb(b,e){if(e=="smart")if(Ta.indent)var f=hc(b);else e="prev";var g=W[b],i=g.indentation(),n=g.text.match(/^\s*/)[0],p;if(e=="prev")p=b?W[b-1].indentation():0;else if(e=="smart")p=Ta.indent(f,
g.text.slice(n.length));else if(e=="add")p=i+ma.indentUnit;else if(e=="subtract")p=i-ma.indentUnit;p=Math.max(0,p);if(p-i){i="";f=0;if(ma.indentWithTabs)for(g=Math.floor(p/ga);g;--g){f+=ga;i+="\t"}for(;f<p;){++f;i+=" "}}else{if(O.from.line!=b&&O.to.line!=b)return;i=n}Na(i,{line:b,ch:0},{line:b,ch:n.length})}function ec(){Ta=k.getMode(ma,ma.mode);for(var b=0,e=W.length;b<e;++b)W[b].stateAfter=null;cb=[0];Kb()}function Tb(b,e,f){function g(s,x,C,R){s=W[s];x=s.addMark(x,C,R);x.line=s;i.push(x)}b=Ka(b);
e=Ka(e);var i=[];if(b.line==e.line)g(b.line,b.ch,e.ch,f);else{g(b.line,b.ch,null,f);for(var n=b.line+1,p=e.line;n<p;++n)g(n,0,null,f);g(e.line,0,e.ch,f)}Ua.push({from:b.line,to:e.line+1});return function(){for(var s,x,C=0;C<i.length;++C){var R=i[C],ba=y(W,R.line);R.line.removeMark(R);if(ba>-1){if(s==null)s=ba;x=ba}}s!=null&&Ua.push({from:s,to:x+1})}}function Jb(b){eb.innerHTML="<pre><span>x</span></pre>";eb.firstChild.firstChild.firstChild.nodeValue=b;return eb.firstChild.firstChild.offsetWidth||
10}function Ub(b,e){if(e==0)return 0;eb.innerHTML="<pre><span>"+W[b].getHTML(null,null,false,e)+"</span></pre>";return eb.firstChild.firstChild.offsetWidth}function Vb(b,e){function f(R){eb.innerHTML="<pre><span>"+g.getHTML(null,null,false,R)+"</span></pre>";return eb.firstChild.firstChild.offsetWidth}if(e<=0)return 0;for(var g=W[b],i=0,n=0,p=g.text.length,s,x=Math.min(p,Math.ceil(e/Jb("x")));;){var C=f(x);if(C<=e&&x<p)x=Math.min(p,Math.ceil(x*1.2));else{s=C;p=x;break}}if(e>s)return p;x=Math.floor(p*
0.8);C=f(x);if(C<e){i=x;n=C}for(;;){if(p-i<=1)return s-e>e-n?i:p;x=Math.ceil((i+p)/2);C=f(x);if(C>e){p=x;s=C}else{i=x;n=C}}}function Wb(b,e){var f=ab(),g=b.line-(e?Ha:0);return{x:Ub(b.line,b.ch),y:g*f,yBot:(g+1)*f}}function fc(b){b=Wb(b,true);var e=pa(Ya);return{x:e.left+b.x,y:e.top+b.y,yBot:e.top+b.yBot}}function ab(){var b=Qa.childNodes.length;if(b)return Qa.offsetHeight/b||1;eb.innerHTML="<pre>x</pre>";return eb.firstChild.offsetHeight||1}function tb(b,e){var f=pa(va,true),g=b.e.clientX,i=b.e.clientY;
if(!e&&(g-f.left>va.clientWidth||i-f.top>va.clientHeight))return null;f=pa(Ya,true);i=Ha+Math.floor((i-f.top)/ab());return Ka({line:i,ch:Vb(zb(i),g-f.left)})}function gc(b){function e(){Ea.value!=i&&ya(H)(Ea.value,"end");Ea.style.cssText=g;Xa=false;gb();sa()}var f=tb(b);if(!(!f||window.opera)){if(na(O.from,O.to)||l(f,O.from)||!l(f,O.to))yb(f.line,f.ch);var g=Ea.style.cssText;Ea.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.pageY()-1)+"px; left: "+(b.pageX()-1)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden;";
var i=Ea.value=ha();kb();V(Ea,0,Ea.value.length);Xa=true;if(T){b.stop();var n=N(window,"mouseup",function(){n();setTimeout(e,20)},true)}else setTimeout(e,50)}}function dc(){clearInterval(bc);var b=true;ob.style.visibility="";bc=setInterval(function(){ob.style.visibility=(b=!b)?"":"hidden"},650)}function Va(b){function e(Ca,o,u){if(Ca.text){var G=Ca.styles;Ca=p?0:Ca.text.length-1;for(var I,D=p?0:G.length-2,J=p?G.length:-2;D!=J;D+=2*s){var U=G[D];if(G[D+1]!=null&&G[D+1]!=ba)Ca+=s*U.length;else for(var Z=
p?0:U.length-1,ra=p?U.length:-1;Z!=ra;Z+=s,Ca+=s)if(Ca>=o&&Ca<u&&Ia.test(I=U.charAt(Z))){var Ma=a[I];if(Ma.charAt(1)==">"==p)ka.push(I);else if(ka.pop()!=Ma.charAt(0))return{pos:Ca,match:false};else if(!ka.length)return{pos:Ca,match:true}}}}}var f=O.inverted?O.from:O.to,g=W[f.line],i=f.ch-1,n=i>=0&&a[g.text.charAt(i)]||a[g.text.charAt(++i)];if(n){n.charAt(0);var p=n.charAt(1)==">",s=p?1:-1,x=g.styles,C=i+1;n=0;for(var R=x.length;n<R;n+=2)if((C-=x[n].length)<=0){var ba=x[n+1];break}var ka=[g.text.charAt(i)],
Ia=/[(){}[\]]/;n=f.line;for(R=p?Math.min(n+50,W.length):Math.max(-1,n-50);n!=R;n+=s){g=W[n];x=n==f.line;if(g=e(g,x&&p?i+1:0,x&&!p?i:g.text.length)){ba=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var za=Tb({line:f.line,ch:i},{line:f.line,ch:i+1},ba),Ba=Tb({line:n,ch:g.pos},{line:n,ch:g.pos+1},ba);f=ya(function(){za();Ba()});if(b)setTimeout(f,800);else qb=f;break}}}}function Xb(b){for(var e,f,g=b;g>b-40;--g){if(g==0)return 0;var i=W[g-1];if(i.stateAfter)return g;i=i.indentation();
if(f==null||e>i){f=g;e=i}}return f}function hc(b){var e=Xb(b),f=e&&W[e-1].stateAfter;f=f?h(Ta,f):j(Ta);for(e=e;e<b;++e){var g=W[e];g.highlight(Ta,f);g.stateAfter=h(Ta,f)}W[b].stateAfter||cb.push(b);return f}function mc(){for(var b=+new Date+ma.workTime,e=false;cb.length;){var f=W[Ha].stateAfter?cb.pop():Ha;if(!(f>=W.length)){e=true;var g=Xb(f),i=g&&W[g-1].stateAfter;i=i?h(Ta,i):j(Ta);g=g;for(var n=W.length;g<n;++g){var p=W[g],s=p.stateAfter;if(+new Date>b){cb.push(g);Kb(ma.workDelay);Ua.push({from:f,
to:g});return}var x=p.highlight(Ta,i);p.stateAfter=h(Ta,i);if(s&&!x&&p.text)break}Ua.push({from:f,to:g})}}e&&ma.onHighlightComplete&&ma.onHighlightComplete($a)}function Kb(b){cb.length&&cc.set(b,ya(mc))}function Yb(){bb=null;Ua=[];pb=db=false}function Zb(){var b=false;if(db)b=!Fb();if(Ua.length)lb(Ua);else db&&Hb();b&&Fb();db&&dc();if(!Xa&&(bb===true||bb!==false&&db))gb();db&&ma.matchBrackets&&setTimeout(ya(function(){if(qb){qb();qb=null}Va(false)}),20);b=pb;db&&ma.onCursorActivity&&ma.onCursorActivity($a);
b&&ma.onChange&&$a&&ma.onChange($a,b)}function ya(b){return function(){d++||Yb();try{var e=b.apply(this,arguments)}finally{--d||Zb()}return e}}function ic(b,e,f){this.atOccurrence=false;if(f==null)f=typeof b=="string"&&b==b.toLowerCase();e=e&&typeof e=="object"?Ka(e):{line:0,ch:0};this.pos={from:e,to:e};if(typeof b!="string")this.matches=function(n,p){if(n)for(var s=W[p.line].text.slice(0,p.ch),x=s.match(b),C=0;x;){var R=s.indexOf(x[0]);C+=R;s=s.slice(R+1);if(R=s.match(b))x=R;else break;C++}else{s=
W[p.line].text.slice(p.ch);C=(x=s.match(b))&&p.ch+s.indexOf(x[0])}if(x)return{from:{line:p.line,ch:C},to:{line:p.line,ch:C+x[0].length},match:x}};else{if(f)b=b.toLowerCase();var g=f?function(n){return n.toLowerCase()}:function(n){return n},i=b.split("\n");this.matches=i.length==1?function(n,p){var s=g(W[p.line].text),x=b.length,C;if(n?p.ch>=x&&(C=s.lastIndexOf(b,p.ch-x))!=-1:(C=s.indexOf(b,p.ch))!=-1)return{from:{line:p.line,ch:C},to:{line:p.line,ch:C+x}}}:function(n,p){var s=p.line,x=n?i.length-
1:0,C=i[x],R=g(W[s].text),ba=n?R.indexOf(C)+C.length:R.lastIndexOf(C);if(!(n?ba>=p.ch||ba!=C.length:ba<=p.ch||ba!=R.length-C.length))for(;;){if(n?!s:s==W.length-1)return;R=g(W[s+=n?-1:1].text);C=i[n?--x:++x];if(x>0&&x<i.length-1)if(R!=C)return;else continue;x=n?R.lastIndexOf(C):R.indexOf(C)+C.length;if(n?x!=R.length-C.length:x!=C.length)return;C={line:p.line,ch:ba};s={line:s,ch:x};return{from:n?s:C,to:n?C:s}}}}}var ma={},Qb=k.defaults;for(var fb in Qb)if(Qb.hasOwnProperty(fb))ma[fb]=(A&&A.hasOwnProperty(fb)?
A:Qb)[fb];var mb=ma.document,va=mb.createElement("div");va.className="CodeMirror";if(window.ActiveXObject&&/MSIE [1-7]\b/.test(navigator.userAgent))va.style.position="relative";va.innerHTML='<div style="position: relative"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"></div><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div style="overflow: hidden; position: absolute; width: 1px; height: 0; left: 0"><textarea style="position: absolute; width: 100000px;" wrap="off"></textarea></div><div class="CodeMirror-lines"><div style="position: relative"><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div>';
c.appendChild?c.appendChild(va):c(va);var Ab=va.firstChild,eb=Ab.firstChild,Lb=eb.nextSibling,nb=Lb.firstChild,Mb=nb.firstChild,$b=nb.nextSibling,Ea=$b.firstChild,Ya=$b.nextSibling.firstChild,ob=Ya.firstChild,Qa=ob.nextSibling;if(ma.tabindex!=null)Ea.tabindex=ma.tabindex;if(!ma.gutter&&!ma.lineNumbers)nb.style.display="none";var ac=new P,cc=new P,bc,Ta,W=[new r("")],cb,Za=new w,Wa;ec();var O={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false},hb,ub,Db,bb,Ua,pb,db,Xa,Ha=0,ib=0,kc=0,jb=null,Pa,qb,
Eb="";ya(function(){L(ma.value||"");bb=false})();setTimeout(gb,20);N(va,"mousedown",ya(function(b){function e(C){var R=tb(C,true);if(R&&!na(R,n)){Wa||M();n=R;rb(i,R);bb=false;var ba=Sb();if(R.line>=ba.to||R.line<ba.from)p=setTimeout(ya(function(){e(C)}),150)}}var f=Db;Db=null;for(var g=b.target();g!=va;g=g.parentNode)if(g.parentNode==Mb){ma.onGutterClick&&ma.onGutterClick($a,y(Mb.childNodes,g)+Ha);return b.stop()}T&&b.button()==3&&gc(b);if(b.button()==1){var i=tb(b),n=i,p;if(i){Wa||M();b.stop();if(f&&
+new Date-f<400)return lc(i.line);yb(i.line,i.ch,true);var s=N(mb,"mousemove",ya(function(C){clearTimeout(p);C.stop();e(C)}),true),x=N(mb,"mouseup",ya(function(C){clearTimeout(p);var R=tb(C);R&&rb(i,R);C.stop();kb();bb=true;s();x()}),true)}else b.target()==va&&b.stop()}}));T||N(va,"contextmenu",ya(gc));N(Ab,"dblclick",ya(function(b){var e=tb(b);if(e){for(var f=W[e.line].text,g=e.ch,i=e.ch;g>0&&/\w/.test(f.charAt(g-1));)--g;for(;i<f.length&&/\w/.test(f.charAt(i));)++i;rb({line:e.line,ch:g},{line:e.line,
ch:i});b.stop();Db=+new Date}}));N(va,"scroll",function(){lb([]);ma.onScroll&&ma.onScroll($a)});N(window,"resize",function(){lb(true)});N(Ea,"keyup",ya(function(b){if(!(ma.onKeyEvent&&ma.onKeyEvent($a,B(b.e)))){if(ub){ub=null;bb=true}if(b.e.keyCode==16)hb=null}}));N(Ea,"keydown",ya(function(b){Wa||M();var e=b.e.keyCode,f=(xa?b.e.metaKey:b.e.ctrlKey)&&!b.e.altKey,g=b.e.ctrlKey||b.e.altKey||b.e.metaKey;hb=e==16||b.e.shiftKey?hb||(O.inverted?O.to:O.from):null;if(!(ma.onKeyEvent&&ma.onKeyEvent($a,B(b.e)))){if(e==
33||e==34){e=e==34;f=Math.floor(va.clientHeight/ab());g=O.inverted?O.from:O.to;yb(g.line+Math.max(f-1,1)*(e?1:-1),g.ch,true);return b.stop()}if(f&&(e==36||e==35||xa&&(e==38||e==40))){yb(e==36||e==38?0:W.length-1,true);return b.stop()}if(f&&e==65){e=W.length-1;xb({line:0,ch:0},{line:e,ch:W[e].text.length});return b.stop()}if(!ma.readOnly){if(!g&&e==13)return;if(g=!g){if(g=e==9)a:{g=b.e.shiftKey;hb=null;switch(ma.tabMode){case "default":g=false;break a;case "indent":for(var i=O.from.line,n=O.to.line;i<=
n;++i)sb(i,"smart");break;case "classic":if(na(O.from,O.to)){g?sb(O.from.line,"smart"):H("\t","end");break}case "shift":i=O.from.line;for(n=O.to.line;i<=n;++i)sb(i,g?"subtract":"add");break}g=true}g=g}if(g)return b.stop();if(f&&e==90){wa();return b.stop()}if(f&&(b.e.shiftKey&&e==90||e==89)){Ga();return b.stop()}}jb=(f?"c":"")+e;if(O.inverted&&Oa.hasOwnProperty(jb))if(b=Q(Ea)){ub={anchor:b.start};V(Ea,b.start,b.start)}ta(jb)}}));N(Ea,"keypress",ya(function(b){if(!(ma.onKeyEvent&&ma.onKeyEvent($a,B(b.e)))){if(ma.electricChars&&
Ta.electricChars){var e=String.fromCharCode(b.e.charCode==null?b.e.keyCode:b.e.charCode);Ta.electricChars.indexOf(e)>-1&&setTimeout(ya(function(){sb(O.to.line,"smart")}),50)}e=b.e.keyCode;if(e==13){if(!ma.readOnly){H("\n","end");if(ma.enterMode!="flat")sb(O.from.line,ma.enterMode=="keep"?"prev":"smart")}b.stop()}else!b.e.ctrlKey&&!b.e.altKey&&!b.e.metaKey&&e==9&&ma.tabMode!="default"?b.stop():ta(jb)}}));N(Ea,"focus",M);N(Ea,"blur",S);N(va,"dragenter",function(b){b.stop()});N(va,"dragover",function(b){b.stop()});
N(va,"drop",ya(function(b){var e=tb(b,true),f=b.e.dataTransfer.files;if(!(!e||ma.readOnly))if(f&&f.length&&window.FileReader&&window.File){var g=f.length,i=Array(g),n=0;for(b=0;b<g;++b)p(f[b],b);var p=function(x,C){var R=new FileReader;R.onload=function(){i[C]=R.result;++n==g&&Na(i.join(""),Ka(e),Ka(e))};R.readAsText(x)}}else try{(i=b.e.dataTransfer.getData("Text"))&&Na(i,e,e)}catch(s){}}));N(va,"paste",function(){kb();ta()});N(Ea,"paste",function(){ta()});N(Ea,"cut",function(){ta()});mb.activeElement==
Ea?M():S();var $a={getValue:function(){for(var b=[],e=0,f=W.length;e<f;++e)b.push(W[e].text);return b.join("\n")},setValue:ya(L),getSelection:ha,replaceSelection:ya(H),focus:function(){kb();M();ta()},setOption:function(b,e){ma[b]=e;if(b=="lineNumbers"||b=="gutter"){var f=ma.gutter||ma.lineNumbers;nb.style.display=f?"":"none";if(f)Gb();else Qa.parentNode.style.marginLeft=0}else if(b=="mode"||b=="indentUnit")ec();else b=="readOnly"&&e=="nocursor"&&Ea.blur()},getOption:function(b){return ma[b]},undo:ya(wa),
redo:ya(Ga),indentLine:ya(function(b){b>=0&&b<W.length&&sb(b,"smart")}),historySize:function(){return{undo:Za.done.length,redo:Za.undone.length}},matchBrackets:ya(function(){Va(true)}),getTokenAt:function(b){b=Ka(b);return W[b.line].getTokenAt(Ta,hc(b.line),b.ch)},cursorCoords:function(b){if(b==null)b=O.inverted;return fc(b?O.from:O.to)},charCoords:function(b){return fc(Ka(b))},coordsChar:function(b){var e=pa(Ya),f=zb(Math.min(W.length-1,Ha+Math.floor((b.y-e.top)/ab())));return Ka({line:f,ch:Vb(zb(f),
b.x-e.left)})},getSearchCursor:function(b,e,f){return new ic(b,e,f)},markText:ya(function(b,e,f){return ya(Tb(b,e,f))}),setMarker:function(b,e,f){if(typeof b=="number")b=W[zb(b)];b.gutterMarker={text:e,style:f};Gb();return b},clearMarker:function(b){if(typeof b=="number")b=W[zb(b)];b.gutterMarker=null;Gb()},setLineClass:ya(function(b,e){if(typeof b=="number"){var f=b;b=W[zb(b)]}else{f=y(W,b);if(f==-1)return null}if(b.className!=e){b.className=e;Ua.push({from:f,to:f+1})}return b}),lineInfo:function(b){if(typeof b==
"number"){var e=b;b=W[b];if(!b)return null}else{e=y(W,b);if(e==-1)return null}var f=b.gutterMarker;return{line:e,text:b.text,markerText:f&&f.text,markerClass:f&&f.style}},addWidget:function(b,e,f){b=Wb(Ka(b),true);e.style.top=Ha*ab()+b.yBot+Ya.offsetTop+"px";e.style.left=b.x+Ya.offsetLeft+"px";Ab.appendChild(e);f&&Rb(b.x,b.yBot,b.x+e.offsetWidth,b.yBot+e.offsetHeight)},lineCount:function(){return W.length},getCursor:function(b){if(b==null)b=O.inverted;return{line:(b?O.from:O.to).line,ch:(b?O.from:
O.to).ch}},somethingSelected:function(){return!na(O.from,O.to)},setCursor:ya(function(b,e){e==null&&typeof b.line=="number"?yb(b.line,b.ch):yb(b,e)}),setSelection:ya(function(b,e){xb(Ka(b),Ka(e||b))}),getLine:function(b){if(b>=0&&b<W.length)return W[b].text},setLine:ya(function(b,e){b>=0&&b<W.length&&Na(e,{line:b,ch:0},{line:b,ch:W[b].text.length})}),removeLine:ya(function(b){b>=0&&b<W.length&&Na("",{line:b,ch:0},Ka({line:b+1,ch:0}))}),replaceRange:ya(Na),getRange:function(b,e){return aa(Ka(b),Ka(e))},
operation:function(b){return ya(b)()},refresh:function(){lb(true)},getInputField:function(){return Ea},getWrapperElement:function(){return va}},Pb=false,a={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},d=0;ic.prototype={findNext:function(){return this.find(false)},findPrevious:function(){return this.find(true)},find:function(b){function e(i){i={line:i,ch:0};f.pos={from:i,to:i};return f.atOccurrence=false}for(var f=this,g=Ka(b?this.pos.from:this.pos.to);;){if(this.pos=this.matches(b,g)){this.atOccurrence=
true;return this.pos.match||true}if(b){if(!g.line)return e(0);g={line:g.line-1,ch:W[g.line-1].text.length}}else{if(g.line==W.length-1)return e(W.length);g={line:g.line+1,ch:0}}}},from:function(){if(this.atOccurrence)return{line:this.pos.from.line,ch:this.pos.from.ch}},to:function(){if(this.atOccurrence)return{line:this.pos.to.line,ch:this.pos.to.ch}}};return $a}function h(c,A){if(A===true)return A;if(c.copyState)return c.copyState(A);var L={};for(var M in A){var S=A[M];if(S instanceof Array)S=S.concat([]);
L[M]=S}return L}function j(c,A,L){return c.startState?c.startState(A,L):true}function m(c){this.pos=this.start=0;this.string=c}function r(c,A){this.styles=A||[c,null];this.stateAfter=null;this.text=c;this.marked=this.gutterMarker=this.className=null}function t(c,A,L,M){for(var S=0,ja=0,ia=0;ja<A;S+=2){var wa=L[S],Ga=ja+wa.length;if(ia==0){Ga>c&&M.push(wa.slice(c-ja,Math.min(wa.length,A-ja)),L[S+1]);if(Ga>=c)ia=1}else if(ia==1)Ga>A?M.push(wa.slice(0,A-ja),L[S+1]):M.push(wa,L[S+1]);ja=Ga}}function w(){this.time=
0;this.done=[];this.undone=[]}function F(){if(this.preventDefault){this.preventDefault();this.stopPropagation()}else{this.returnValue=false;this.cancelBubble=true}}function B(c){if(!c.stop)c.stop=F;return c}function z(c){this.e=c}function N(c,A,L,M){function S(ja){L(new z(ja||window.event))}if(typeof c.addEventListener=="function"){c.addEventListener(A,S,false);if(M)return function(){c.removeEventListener(A,S,false)}}else{c.attachEvent("on"+A,S);if(M)return function(){c.detachEvent("on"+A,S)}}}function P(){this.id=
null}function la(c,A){if(A==null){A=c.search(/[^\s\u00a0]/);if(A==-1)A=c.length}for(var L=0,M=0;L<A;++L)if(c.charAt(L)=="\t")M+=ga-M%ga;else++M;return M}function pa(c,A){for(var L=c.ownerDocument.body,M=0,S=0,ja=false,ia=c;ia;ia=ia.offsetParent){M+=ia.offsetLeft;S+=ia.offsetTop;if(ia==L)ja=true}for(ia=c.parentNode;ia!=(A&&ja?null:L);ia=ia.parentNode)if(ia.scrollLeft!=null){M-=ia.scrollLeft;S-=ia.scrollTop}return{left:M,top:S}}function na(c,A){return c.line==A.line&&c.ch==A.ch}function l(c,A){return c.line<
A.line||c.line==A.line&&c.ch<A.ch}function q(c){return c.replace(/[<>&]/g,function(A){return A=="&"?"&amp;":A=="<"?"&lt;":"&gt;"})}function y(c,A){if(c.indexOf)return c.indexOf(A);for(var L=0,M=c.length;L<M;++L)if(c[L]==A)return L;return-1}k.defaults={value:"",mode:null,indentUnit:2,indentWithTabs:false,tabMode:"classic",enterMode:"indent",electricChars:true,onKeyEvent:null,lineNumbers:false,gutter:false,firstLineNumber:1,readOnly:false,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,
onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,workTime:100,workDelay:200,undoDepth:40,tabindex:null,document:window.document};var E={},ca={};k.defineMode=function(c,A){if(!k.defaults.mode&&c!="null")k.defaults.mode=c;E[c]=A};k.defineMIME=function(c,A){ca[c]=A};k.getMode=function(c,A){if(typeof A=="string"&&ca.hasOwnProperty(A))A=ca[A];if(typeof A=="string")var L=A,M={};else if(A!=null){L=A.name;M=A}var S=E[L];if(!S){window.console&&console.warn("No mode "+L+" found, falling back to plain text.");
return k.getMode(c,"text/plain")}return S(c,M||{})};k.listModes=function(){var c=[];for(var A in E)E.propertyIsEnumerable(A)&&c.push(A);return c};k.listMIMEs=function(){var c=[];for(var A in ca)ca.propertyIsEnumerable(A)&&c.push(A);return c};k.fromTextArea=function(c,A){function L(){c.value=ia.getValue()}A||(A={});A.value=c.value;if(!A.tabindex&&c.tabindex)A.tabindex=c.tabindex;if(c.form){var M=N(c.form,"submit",L,true);if(typeof c.form.submit=="function"){var S=c.form.submit,ja=function(){L();c.form.submit=
S;c.form.submit();c.form.submit=ja};c.form.submit=ja}}c.style.display="none";var ia=k(function(wa){c.parentNode.insertBefore(wa,c.nextSibling)},A);ia.save=L;ia.toTextArea=function(){L();c.parentNode.removeChild(ia.getWrapperElement());c.style.display="";if(c.form){M();if(typeof c.form.submit=="function")c.form.submit=S}};return ia};k.startState=j;k.copyState=h;m.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},
next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(c){var A=this.string.charAt(this.pos);if(typeof c=="string"?A==c:A&&(c.test?c.test(A):c(A))){++this.pos;return A}},eatWhile:function(c){for(var A=this.start;this.eat(c););return this.pos>A},eatSpace:function(){for(var c=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>c},skipToEnd:function(){this.pos=this.string.length},skipTo:function(c){c=this.string.indexOf(c,this.pos);
if(c>-1){this.pos=c;return true}},backUp:function(c){this.pos-=c},column:function(){return la(this.string,this.start)},indentation:function(){return la(this.string)},match:function(c,A,L){if(typeof c=="string"){if((L?this.string.toLowerCase():this.string).indexOf(L?c.toLowerCase():c,this.pos)==this.pos){if(A!==false)this.pos+=c.length;return true}}else{if((c=this.string.slice(this.pos).match(c))&&A!==false)this.pos+=c[0].length;return c}},current:function(){return this.string.slice(this.start,this.pos)}};
r.prototype={replace:function(c,A,L){var M=[],S=this.marked;t(0,c,this.styles,M);L&&M.push(L,null);t(A,this.text.length,this.styles,M);this.styles=M;this.text=this.text.slice(0,c)+L+this.text.slice(A);this.stateAfter=null;if(S){c=L.length-(A-c);L=this.text.length;for(M=0;M<S.length;++M){var ja=S[M],ia=false;if(ja.from>=L)ia=true;else{ja.from=ja.from<=Math.min(A,A+c)?ja.from:ja.from+c;if(ja.to!=null)ja.to=ja.to<=Math.min(A,A+c)?ja.to:ja.to+c}if(ia||ja.from>=ja.to){S.splice(M,1);M--}}}},split:function(c,
A){var L=[A,null];t(c,this.text.length,this.styles,L);return new r(A+this.text.slice(c),L)},addMark:function(c,A,L){c={from:c,to:A,style:L};if(this.marked==null)this.marked=[];this.marked.push(c);this.marked.sort(function(M,S){return M.from-S.from});return c},removeMark:function(c){var A=this.marked;if(A)for(var L=0;L<A.length;++L)if(A[L]==c){A.splice(L,1);break}},highlight:function(c,A){var L=new m(this.text),M=this.styles,S=0,ja=false,ia=M[0],wa;for(this.text==""&&c.blankLine&&c.blankLine(A);!L.eol();){var Ga=
c.token(L,A),ua=this.text.slice(L.start,L.pos);L.start=L.pos;if(S&&M[S-1]==Ga)M[S-2]+=ua;else if(ua){if(!ja&&(M[S+1]!=Ga||S&&M[S-2]!=wa))ja=true;M[S++]=ua;M[S++]=Ga;wa=ia;ia=M[S]}if(L.pos>5E3){M[S++]=this.text.slice(L.pos);M[S++]=null;break}}if(M.length!=S){M.length=S;ja=true}if(S&&M[S-2]!=wa)ja=true;return ja},getTokenAt:function(c,A,L){for(var M=new m(this.text);M.pos<L&&!M.eol();){M.start=M.pos;var S=c.token(M,A)}return{start:M.start,end:M.pos,string:M.current(),className:S||null,state:A}},indentation:function(){return la(this.text)},
getHTML:function(c,A,L,M){function S(kb,Fb){if(kb)Fb?ja.push('<span class="',Fb,'">',q(kb),"</span>"):ja.push(q(kb))}var ja=[];if(L)ja.push(this.className?'<pre class="'+this.className+'">':"<pre>");var ia=this.styles,wa=this.text,Ga=this.marked;if(c==A)c=null;var ua=wa.length;if(M!=null)ua=Math.min(M,ua);if(!wa&&M==null)S(" ",c!=null&&A==null?"CodeMirror-selected":null);else if(!Ga&&c==null)for(c=M=0;c<ua;M+=2){A=ia[M];var Na=A.length;if(c+Na>ua)A=A.slice(0,ua-c);c+=Na;S(A,ia[M+1])}else{M=wa=0;var H=
"",ea=-1,aa=null,ha=function(){if(Ga){ea+=1;aa=ea<Ga.length?Ga[ea]:null}};for(ha();wa<ua;){var sa=ua,ta="";if(c!=null)if(c>wa)sa=c;else if(A==null||A>wa){ta=" CodeMirror-selected";if(A!=null)sa=Math.min(sa,A)}for(;aa&&aa.to!=null&&aa.to<=wa;)ha();if(aa)if(aa.from>wa)sa=Math.min(sa,aa.from);else{ta+=" "+aa.style;if(aa.to!=null)sa=Math.min(sa,aa.to)}for(;;){var La=wa+H.length,gb=Na;if(ta)gb=Na?Na+ta:ta;S(La>sa?H.slice(0,sa-wa):H,gb);if(La>=sa){H=H.slice(sa-wa);wa=sa;break}wa=La;H=ia[M++];Na=ia[M++]}}c!=
null&&A==null&&S(" ","CodeMirror-selected")}L&&ja.push("</pre>");return ja.join("")}};w.prototype={addChange:function(c,A,L){this.undone.length=0;var M=+new Date,S=this.done[this.done.length-1];if(M-this.time>400||!S||S.start>c+A||S.start+S.added<c-S.added+S.old.length)this.done.push({start:c,added:A,old:L});else{var ja=0;if(c<S.start){for(var ia=S.start-c-1;ia>=0;--ia)S.old.unshift(L[ia]);S.added+=S.start-c;S.start=c}else if(S.start<c){ja=c-S.start;A+=ja}ia=S.added-ja;for(c=L.length;ia<c;++ia)S.old.push(L[ia]);
if(S.added<A)S.added=A}this.time=M}};z.prototype={stop:function(){F.call(this.e)},target:function(){return this.e.target||this.e.srcElement},button:function(){if(this.e.which)return this.e.which;else if(this.e.button&1)return 1;else if(this.e.button&2)return 3;else if(this.e.button&4)return 2},pageX:function(){if(this.e.pageX!=null)return this.e.pageX;var c=this.target().ownerDocument;return this.e.clientX+c.body.scrollLeft+c.documentElement.scrollLeft},pageY:function(){if(this.e.pageY!=null)return this.e.pageY;
var c=this.target().ownerDocument;return this.e.clientY+c.body.scrollTop+c.documentElement.scrollTop}};P.prototype={set:function(c,A){clearTimeout(this.id);this.id=setTimeout(A,c)}};var oa=function(){var c=document.createElement("pre");c.innerHTML=" ";return!c.innerHTML}(),T=/gecko\/\d{7}/i.test(navigator.userAgent),fa="\n";(function(){var c=document.createElement("textarea");c.value="foo\nbar";if(c.value.indexOf("\r")>-1)fa="\r\n"})();for(var ga=8,xa=/Mac/.test(navigator.platform),Oa={},Ra=35;Ra<=
40;++Ra)Oa[Ra]=Oa["c"+Ra]=true;var X="\n\nb".split(/\n/).length!=3?function(c){for(var A=0,L,M=[];(L=c.indexOf("\n",A))>-1;){M.push(c.slice(A,c.charAt(L-1)=="\r"?L-1:L));A=L+1}M.push(c.slice(A));return M}:function(c){return c.split(/\r?\n/)};if(window.getSelection)var Q=function(c){try{return{start:c.selectionStart,end:c.selectionEnd}}catch(A){return null}},V=function(c,A,L){try{c.setSelectionRange(A,L)}catch(M){}};else{Q=function(c){try{var A=c.ownerDocument.selection.createRange()}catch(L){return null}if(!A||
A.parentElement()!=c)return null;var M=c.value,S=M.length,ja=c.createTextRange();ja.moveToBookmark(A.getBookmark());var ia=c.createTextRange();ia.collapse(false);if(ja.compareEndPoints("StartToEnd",ia)>-1)return{start:S,end:S};c=-ja.moveStart("character",-S);for(A=M.indexOf("\r");A>-1&&A<c;A=M.indexOf("\r",A+1),c++);if(ja.compareEndPoints("EndToEnd",ia)>-1)return{start:c,end:S};S=-ja.moveEnd("character",-S);for(A=M.indexOf("\r");A>-1&&A<S;A=M.indexOf("\r",A+1),S++);return{start:c,end:S}};V=function(c,
A,L){var M=c.createTextRange();M.collapse(true);var S=M.duplicate(),ja=0;c=c.value;for(var ia=c.indexOf("\n");ia>-1&&ia<A;ia=c.indexOf("\n",ia+1))++ja;for(M.move("character",A-ja);ia>-1&&ia<L;ia=c.indexOf("\n",ia+1))++ja;S.move("character",L-ja);M.setEndPoint("EndToEnd",S);M.select()}}k.defineMode("null",function(){return{token:function(c){c.skipToEnd()}}});k.defineMIME("text/plain","null");return k}();
jQuery.cookie=function(k,h,j){if(typeof h!="undefined"){j=j||{};if(h===null){h="";j.expires=-1}var m="";if(j.expires&&(typeof j.expires=="number"||j.expires.toUTCString)){if(typeof j.expires=="number"){m=new Date;m.setTime(m.getTime()+j.expires*24*60*60*1E3)}else m=j.expires;m="; expires="+m.toUTCString()}var r=j.path?"; path="+j.path:"",t=j.domain?"; domain="+j.domain:"";j=j.secure?"; secure":"";document.cookie=[k,"=",encodeURIComponent(h),m,r,t,j].join("")}else{h=null;if(document.cookie&&document.cookie!=
""){j=document.cookie.split(";");for(m=0;m<j.length;m++){r=jQuery.trim(j[m]);if(r.substring(0,k.length+1)==k+"="){h=decodeURIComponent(r.substring(k.length+1));break}}}return h}};
CodeMirror.defineMode("javascript",function(k,h){function j(H,ea){for(var aa=false,ha;(ha=H.next())!=null;){if(ha==ea&&!aa)return false;aa=!aa&&ha=="\\"}return aa}function m(H,ea,aa){ia=H;wa=aa;return ea}function r(H,ea){var aa=H.next();if(aa=='"'||aa=="'"){aa=t(aa);ea.tokenize=aa;return aa(H,ea)}else if(/[\[\]{}\(\),;\:\.]/.test(aa))return m(aa);else if(aa=="0"&&H.eat(/x/i)){H.eatWhile(/[\da-f]/i);return m("number","js-atom")}else if(/\d/.test(aa)){H.match(/^\d*(?:\.\d*)?(?:e[+\-]?\d+)?/);return m("number",
"js-atom")}else if(aa=="/")if(H.eat("*")){aa=w;ea.tokenize=aa;return aa(H,ea)}else if(H.eat("/")){H.skipToEnd();return m("comment","js-comment")}else if(ea.reAllowed){j(H,"/");H.eatWhile(/[gimy]/);return m("regexp","js-string")}else{H.eatWhile(ja);return m("operator",null,H.current())}else if(ja.test(aa)){H.eatWhile(ja);return m("operator",null,H.current())}else{H.eatWhile(/[\w\$_]/);aa=H.current();var ha=S.propertyIsEnumerable(aa)&&S[aa];return ha?m(ha.type,ha.style,aa):m("variable","js-variable",
aa)}}function t(H){return function(ea,aa){if(!j(ea,H))aa.tokenize=r;return m("string","js-string")}}function w(H,ea){for(var aa=false,ha;ha=H.next();){if(ha=="/"&&aa){ea.tokenize=r;break}aa=ha=="*"}return m("comment","js-comment")}function F(H,ea,aa,ha,sa,ta){this.indented=H;this.column=ea;this.type=aa;this.prev=sa;this.info=ta;if(ha!=null)this.align=ha}function B(){for(var H=arguments.length-1;H>=0;H--)ua.cc.push(arguments[H])}function z(){B.apply(null,arguments);return true}function N(H){var ea=
ua.state;if(ea.context){ua.marked="js-variabledef";for(var aa=ea.localVars;aa;aa=aa.next)if(aa.name==H)return;ea.localVars={name:H,next:ea.localVars}}}function P(){if(!ua.state.context)ua.state.localVars=Na;ua.state.context={prev:ua.state.context,vars:ua.state.localVars}}function la(){ua.state.localVars=ua.state.context.vars;ua.state.context=ua.state.context.prev}function pa(H,ea){var aa=function(){var ha=ua.state;ha.lexical=new F(ha.indented,ua.stream.column(),H,null,ha.lexical,ea)};aa.lex=true;
return aa}function na(){var H=ua.state;if(H.lexical.prev){if(H.lexical.type==")")H.indented=H.lexical.indented;H.lexical=H.lexical.prev}}function l(H){return function(ea){return ea==H?z():H==";"?B():z(arguments.callee)}}function q(H){if(H=="var")return z(pa("vardef"),xa,l(";"),na);if(H=="keyword a")return z(pa("form"),y,q,na);if(H=="keyword b")return z(pa("form"),q,na);if(H=="{")return z(pa("}"),ga,na);if(H==";")return z();if(H=="function")return z(c);if(H=="for")return z(pa("form"),l("("),pa(")"),
Ra,l(")"),na,q,na);if(H=="variable")return z(pa("stat"),ca);if(H=="switch")return z(pa("form"),y,pa("}","switch"),l("{"),ga,na,na);if(H=="case")return z(y,l(":"));if(H=="default")return z(l(":"));if(H=="catch")return z(pa("form"),P,l("("),A,l(")"),q,na,la);return B(pa("stat"),y,l(";"),na)}function y(H){if(Ga.hasOwnProperty(H))return z(E);if(H=="function")return z(c);if(H=="keyword c")return z(y);if(H=="(")return z(pa(")"),y,l(")"),na,E);if(H=="operator")return z(y);if(H=="[")return z(pa("]"),fa(y,
"]"),na,E);if(H=="{")return z(pa("}"),fa(T,"}"),na,E);return z()}function E(H,ea){if(H=="operator"&&/\+\+|--/.test(ea))return z(E);if(H=="operator")return z(y);if(H!=";"){if(H=="(")return z(pa(")"),fa(y,")"),na,E);if(H==".")return z(oa,E);if(H=="[")return z(pa("]"),y,l("]"),na,E)}}function ca(H){if(H==":")return z(na,q);return B(E,l(";"),na)}function oa(H){if(H=="variable"){ua.marked="js-property";return z()}}function T(H){if(H=="variable")ua.marked="js-property";if(Ga.hasOwnProperty(H))return z(l(":"),
y)}function fa(H,ea){function aa(ha){if(ha==",")return z(H,aa);if(ha==ea)return z();return z(l(ea))}return function(ha){return ha==ea?z():B(H,aa)}}function ga(H){if(H=="}")return z();return B(q,ga)}function xa(H,ea){if(H=="variable"){N(ea);return z(Oa)}return z()}function Oa(H,ea){if(ea=="=")return z(y,Oa);if(H==",")return z(xa)}function Ra(H){if(H=="var")return z(xa,Q);if(H==";")return B(Q);if(H=="variable")return z(X);return B(Q)}function X(H,ea){if(ea=="in")return z(y);return z(E,Q)}function Q(H,
ea){if(H==";")return z(V);if(ea=="in")return z(y);return z(y,l(";"),V)}function V(H){H!=")"&&z(y)}function c(H,ea){if(H=="variable"){N(ea);return z(c)}if(H=="(")return z(pa(")"),P,fa(A,")"),na,q,la)}function A(H,ea){if(H=="variable"){N(ea);return z()}}var L=k.indentUnit,M=h.json,S=function(){function H(La){return{type:La,style:"js-keyword"}}var ea=H("keyword a"),aa=H("keyword b"),ha=H("keyword c"),sa=H("operator"),ta={type:"atom",style:"js-atom"};return{"if":ea,"while":ea,"with":ea,"else":aa,"do":aa,
"try":aa,"finally":aa,"return":ha,"break":ha,"continue":ha,"new":ha,"delete":ha,"throw":ha,"var":H("var"),"function":H("function"),"catch":H("catch"),"for":H("for"),"switch":H("switch"),"case":H("case"),"default":H("default"),"in":sa,"typeof":sa,"instanceof":sa,"true":ta,"false":ta,"null":ta,undefined:ta,NaN:ta,Infinity:ta}}(),ja=/[+\-*&%=<>!?|]/,ia,wa,Ga={atom:true,number:true,variable:true,string:true,regexp:true},ua={state:null,column:null,marked:null,cc:null},Na={name:"this",next:{name:"arguments"}};
na.lex=true;return{startState:function(H){return{tokenize:r,reAllowed:true,cc:[],lexical:new F((H||0)-L,0,"block",false),localVars:null,context:null,indented:0}},token:function(H,ea){if(H.sol()){if(!ea.lexical.hasOwnProperty("align"))ea.lexical.align=false;ea.indented=H.indentation()}if(H.eatSpace())return null;var aa=ea.tokenize(H,ea);if(ia=="comment")return aa;ea.reAllowed=ia=="operator"||ia=="keyword c"||ia.match(/^[\[{}\(,;:]$/);var ha;a:{var sa=ia,ta=wa,La=ea.cc;ua.state=ea;ua.stream=H;ua.marked=
null;ua.cc=La;if(!ea.lexical.hasOwnProperty("align"))ea.lexical.align=true;for(;;)if((La.length?La.pop():M?y:q)(sa,ta)){for(;La.length&&La[La.length-1].lex;)La.pop()();if(ua.marked){ha=ua.marked;break a}if(ha=sa=="variable")b:{for(ha=ea.localVars;ha;ha=ha.next)if(ha.name==ta){ha=true;break b}ha=void 0}if(ha){ha="js-localvariable";break a}ha=aa;break a}}return ha},indent:function(H,ea){if(H.tokenize!=r)return 0;var aa=ea&&ea.charAt(0),ha=H.lexical,sa=ha.type,ta=aa==sa;return sa=="vardef"?ha.indented+
4:sa=="form"&&aa=="{"?ha.indented:sa=="stat"||sa=="form"?ha.indented+L:ha.info=="switch"&&!ta?ha.indented+(/^(?:case|default)\b/.test(ea)?L:2*L):ha.align?ha.column+(ta?0:1):ha.indented+(ta?0:L)},electricChars:":{}"}});CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:true});
CodeMirror.defineMode("xml",function(k,h){function j(T,fa){function ga(Oa){fa.tokenize=Oa;return Oa(T,fa)}var xa=T.next();if(xa=="<")if(T.eat("!"))if(T.eat("["))return T.match("CDATA[")?ga(t("xml-cdata","]]\>")):null;else if(T.match("--"))return ga(t("xml-comment","--\>"));else if(T.match("DOCTYPE")){T.eatWhile(/[\w\._\-]/);return ga(t("xml-doctype",">"))}else return null;else if(T.eat("?")){T.eatWhile(/[\w\._\-]/);fa.tokenize=t("xml-processing","?>");return"xml-processing"}else{E=T.eat("/")?"closeTag":
"openTag";T.eatSpace();for(y="";xa=T.eat(/[^\s\u00a0=<>\"\'\/?]/);)y+=xa;fa.tokenize=m;return"xml-tag"}else if(xa=="&"){T.eatWhile(/[^;]/);T.eat(";");return"xml-entity"}else{T.eatWhile(/[^&<]/);return null}}function m(T,fa){var ga=T.next();if(ga==">"||ga=="/"&&T.eat(">")){fa.tokenize=j;E=ga==">"?"endTag":"selfcloseTag";return"xml-tag"}else if(ga=="="){E="equals";return null}else if(/[\'\"]/.test(ga)){fa.tokenize=r(ga);return fa.tokenize(T,fa)}else{T.eatWhile(/[^\s\u00a0=<>\"\'\/?]/);return"xml-word"}}
function r(T){return function(fa,ga){for(;!fa.eol();)if(fa.next()==T){ga.tokenize=m;break}return"xml-attribute"}}function t(T,fa){return function(ga,xa){for(;!ga.eol();){if(ga.match(fa)){xa.tokenize=j;break}ga.next()}return T}}function w(){for(var T=arguments.length-1;T>=0;T--)ca.cc.push(arguments[T])}function F(){w.apply(null,arguments);return true}function B(T,fa){var ga=l.doNotIndent.hasOwnProperty(T)||ca.context&&ca.context.noIndent;ca.context={prev:ca.context,tagName:T,indent:ca.indented,startOfLine:fa,
noIndent:ga}}function z(T){if(T=="openTag"){ca.tagName=y;return F(la,N(ca.startOfLine))}else if(T=="closeTag"){if(ca.context)ca.context=ca.context.prev;return F(P)}else{if(T=="xml-cdata"){if(!ca.context||ca.context.name!="!cdata")B("!cdata");if(ca.tokenize==j)if(ca.context)ca.context=ca.context.prev}return F()}}function N(T){return function(fa){if(fa=="selfcloseTag"||fa=="endTag"&&l.autoSelfClosers.hasOwnProperty(ca.tagName.toLowerCase()))return F();if(fa=="endTag"){B(ca.tagName,T);return F()}return F()}}
function P(T){if(T=="endTag")return F();return w()}function la(T){if(T=="xml-word"){oa="xml-attname";return F(la)}if(T=="equals")return F(pa,la);return w()}function pa(T){if(T=="xml-word"&&l.allowUnquoted){oa="xml-attribute";return F()}if(T=="xml-attribute")return F();return w()}var na=k.indentUnit,l=h.htmlMode?{autoSelfClosers:{br:true,img:true,hr:true,link:true,input:true,meta:true,col:true,frame:true,base:true,area:true},doNotIndent:{pre:true,"!cdata":true},allowUnquoted:true}:{autoSelfClosers:{},
doNotIndent:{"!cdata":true},allowUnquoted:false},q=h.alignCDATA,y,E,ca,oa;return{startState:function(){return{tokenize:j,cc:[],indented:0,startOfLine:true,tagName:null,context:null}},token:function(T,fa){if(T.sol()){fa.startOfLine=true;fa.indented=T.indentation()}if(T.eatSpace())return null;oa=E=y=null;var ga=fa.tokenize(T,fa);if((ga||E)&&ga!="xml-comment")for(ca=fa;;)if((fa.cc.pop()||z)(E||ga))break;fa.startOfLine=false;return oa||ga},indent:function(T,fa){var ga=T.context;if(ga&&ga.noIndent)return 0;
if(q&&/<!\[CDATA\[/.test(fa))return 0;if(ga&&/^<\//.test(fa))ga=ga.prev;for(;ga&&!ga.startOfLine;)ga=ga.prev;return ga?ga.indent+na:0},electricChars:"/"}});CodeMirror.defineMIME("application/xml","xml");CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:true});
CodeMirror.defineMode("css",function(k){function h(B,z){F=z;return B}function j(B,z){var N=B.next();if(N=="@"){B.eatWhile(/\w/);return h("css-at",B.current())}else if(N=="/"&&B.eat("*")){z.tokenize=m;return m(B,z)}else if(N=="<"&&B.eat("!")){z.tokenize=r;return r(B,z)}else if(N=="=")h(null,"compare");else if((N=="~"||N=="|")&&B.eat("="))return h(null,"compare");else if(N=='"'||N=="'"){z.tokenize=t(N);return z.tokenize(B,z)}else if(N=="#"){B.eatWhile(/\w/);return h("css-selector","hash")}else if(N==
"!"){B.match(/^\s*\w*/);return h("css-important","important")}else if(/\d/.test(N)){B.eatWhile(/[\w.%]/);return h("css-unit","unit")}else if(/[,.+>*\/]/.test(N))return h(null,"select-op");else if(/[;{}:\[\]]/.test(N))return h(null,N);else{B.eatWhile(/[\w\\\-_]/);return h("css-identifier","identifier")}}function m(B,z){for(var N=false,P;(P=B.next())!=null;){if(N&&P=="/"){z.tokenize=j;break}N=P=="*"}return h("css-comment","comment")}function r(B,z){for(var N=0,P;(P=B.next())!=null;){if(N>=2&&P==">"){z.tokenize=
j;break}N=P=="-"?N+1:0}return h("css-comment","comment")}function t(B){return function(z,N){for(var P=false,la;(la=z.next())!=null;){if(la==B&&!P)break;P=!P&&la=="\\"}if(!P)N.tokenize=j;return h("css-string","string")}}var w=k.indentUnit,F;return{startState:function(B){return{tokenize:j,baseIndent:B||0,stack:[]}},token:function(B,z){if(B.eatSpace())return null;var N=z.tokenize(B,z),P=z.stack[z.stack.length-1];if(F=="hash"&&P=="rule")N="css-colorcode";else if(N=="css-identifier")if(P=="rule")N="css-value";
else if(!P||P=="@media{")N="css-selector";P=="rule"&&/^[\{\};]$/.test(F)&&z.stack.pop();if(F=="{")if(P=="@media")z.stack[z.stack.length-1]="@media{";else z.stack.push("{");else if(F=="}")z.stack.pop();else if(F=="@media")z.stack.push("@media");else P!="rule"&&P!="@media"&&F!="comment"&&z.stack.push("rule");return N},indent:function(B,z){var N=B.stack.length;if(/^\}/.test(z))N-=B.stack[B.stack.length-1]=="rule"?2:1;return B.baseIndent+N*w},electricChars:"}"}});CodeMirror.defineMIME("text/css","css");
CodeMirror.defineMode("liquid",function(k){function h(B,z){var N=t.token(B,z.htmlState);if(N=="xml-tag"&&B.current()==">"&&z.htmlState.context)if(/^script$/i.test(z.htmlState.context.tagName)){z.token=m;z.localState=w.startState(t.indent(z.htmlState,""))}else if(/^style$/i.test(z.htmlState.context.tagName)){z.token=r;z.localState=F.startState(t.indent(z.htmlState,""))}return N}function j(B,z,N){var P=B.current();z=P.search(z);z>-1&&B.backUp(P.length-z);return N}function m(B,z){if(B.match(/^<\/\s*script\s*>/i,
false)){z.token=h;z.curState=null;return h(B,z)}return j(B,/<\/\s*script\s*>/,w.token(B,z.localState))}function r(B,z){if(B.match(/^<\/\s*style\s*>/i,false)){z.token=h;z.localState=null;return h(B,z)}return j(B,/<\/\s*style\s*>/,F.token(B,z.localState))}var t=CodeMirror.getMode(k,{name:"xml",htmlMode:true}),w=CodeMirror.getMode(k,"javascript"),F=CodeMirror.getMode(k,"css");return{startState:function(){var B=t.startState();return{token:h,localState:null,htmlState:B}},copyState:function(B){if(B.localState)var z=
CodeMirror.copyState(B.token==r?F:w,B.localState);return{token:B.token,localState:z,htmlState:CodeMirror.copyState(t,B.htmlState)}},token:function(B,z){return z.token(B,z)},indent:function(B,z){return B.token==h||/^\s*<\//.test(z)?t.indent(B.htmlState,z):B.token==m?w.indent(B.localState,z):F.indent(B.localState,z)},electricChars:"/{}:"}});CodeMirror.defineMIME("text/html","htmlmixed");
var Asset=Model("asset",function(){this.persistence(Model.REST,"/admin/assets");this.include({toMustache:function(k){this.merge({query_path:k?"?"+decodeURIComponent(jQuery.param({query:k})):"",query:k});return this.attr()},toMustacheWithNeighbors:function(k){var h=Asset.all(),j=h.indexOf(this),m=this.toMustache(k),r=h[j+1]?Asset.all()[j+1].toMustache(k):null;k=h[j-1]?Asset.all()[j-1].toMustache(k):null;jQuery("<img />")[0].src="/images/large/"+m.id+"/"+m.file_name;if(r)jQuery("<img />")[0].src="/images/large/"+
r.id+"/"+r.file_name;if(k)jQuery("<img />")[0].src="/images/large/"+k.id+"/"+k.file_name;return{asset:m,next:r,previous:k}}});this.extend({toMustache:function(k){var h=k?"?"+decodeURIComponent(jQuery.param({query:k})):"";return{assets:this.map(function(j){j.merge({query_path:h,query:k});return j.attr()}),query:k}},asJSON:function(){return Asset.map(function(k){return k.attr()})},tags:function(){tags=[];Asset.map(function(){tags=tags.concat(this.attr("tags"))});return tags},searchRemote:function(k,
h){var j=k!=null?decodeURIComponent(jQuery.param({query:k})):"";Asset.each(function(){Asset.remove(this)});jQuery.ajax({type:"get",url:"/search.json",contentType:"application/json",dataType:"json",data:j,success:function(m){jQuery.each(m,function(r,t){var w=new Asset({id:t.id});w.merge(t);Asset.add(w)});h.call(this)}})},searchAdmin:function(k,h){Asset.each(function(){Asset.remove(this)});jQuery.ajax({type:"get",url:"/admin/assets.json",contentType:"application/json",dataType:"json",data:k,success:function(j){$.each(j,
function(m,r){var t=new Asset({id:r.id});t.merge(r);Asset.add(t)});h.call(this)}})},create:function(k,h){Asset.callback=h;var j=new XMLHttpRequest;j.upload.addEventListener("loadstart",Asset.onloadstartHandler,false);j.upload.addEventListener("progress",Asset.onprogressHandler,false);j.upload.addEventListener("load",Asset.onloadHandler,false);j.addEventListener("readystatechange",Asset.onreadystatechangeHandler,false);j.open("POST","/admin/assets.json",true);j.setRequestHeader("Content-Type","application/octet-stream");
j.setRequestHeader("X-File-Name",k.name);j.send(k)},onloadstartHandler:function(){console.log("started")},onloadHandler:function(){console.log("success")},onprogressHandler:function(k){console.log(k.loaded/k.total*100)},onreadystatechangeHandler:function(k){var h=null;try{h=k.target.status}catch(j){return}if(h=="200"&&k.target.readyState==4&&k.target.responseText){k=JSON.parse(k.target.responseText);h=new Asset({id:k.id});h.merge(k);Asset.add(h);Asset.callback&&Asset.callback.call(this)}}})}),Page=
Model("page",function(){this.persistence(Model.SinatraREST,"/admin/pages");this.include({children:function(){return Page.find_all_by_parent_id(this.id())},has_children:function(){if(this.children().all().length>0)return true},assets:function(){for(var k=this.attr("assets"),h=0,j=k.length;h<j;++h){var m=k[h],r=new Asset({id:m.id});r.merge(m);Asset.add(r)}return Asset},parts:function(){for(var k=this.attr("parts"),h=0,j=k.length;h<j;++h){var m=k[h],r=new Part({id:m.id});r.merge(m);r.attr("page_id",
this.id());Part.add(r)}return Part},load:function(k){var h=this,j="/admin/pages/"+h.id()+".json";jQuery.ajax({type:"GET",url:j,dataType:"json",success:function(m){h.merge(m);k.call(this)}})},saveRemote:function(k,h){var j=this,m="/admin/pages/"+this.id()+".json";jQuery.ajax({type:"PUT",url:m,data:k,dataType:"json",success:function(r){if(r.errors){alert(JSON.stringify(r.errors));h.error&&h.error.call(this)}else{j.merge(r);h.success&&h.success.call(this)}}})}});this.extend({toMustache:function(){return{pages:this.map(function(k){return k.attr()})}},
asJSON:function(){return Page.map(function(k){return k.attr()})},root:function(){return this.detect(function(){return this.attr("parent_id")==null})},find_by_parent_id:function(k){return this.detect(function(){return this.attr("parent_id")==k})},find_all_by_parent_id:function(k){return this.select(function(){return this.attr("parent_id")==k})},create:function(k,h){jQuery.ajax({type:"post",url:"/admin/pages.json",dataType:"json",data:{page:k},success:function(j){var m=new Page({id:j.id});m.merge(j);
Page.add(m);h.call(this,j)}})}})}),Layout=Model("template",function(){this.persistence(Model.SinatraREST,"/admin/templates");this.include({});this.extend({toMustache:function(){return{layouts:this.map(function(k){return k.attr()})}},asLayoutJSON:function(k){return Layout.find_all_by_class("Layout").map(function(h){k==h.id()?h.attr("selected",'selected="selected"'):h.attr("selected","");return h.attr()})},find_by_class:function(k){return this.detect(function(){return this.attr("klass")==k})},find_all_by_class:function(k){return this.select(function(){return this.attr("klass")==
k})},asJSON_by_class:function(k){return this.find_all_by_class(function(){return k.map(function(h){return h.attributes})})}})}),Part=Model("part",function(){this.include({deleteRemote:function(k,h){var j="/admin/pages/"+k.id()+"/parts/"+this.id()+".json";jQuery.ajax({type:"DELETE",url:j,dataType:"json",success:function(m){k.merge(m);h.call(this)}})}});this.extend({toMustache:function(){return{parts:this.map(function(k){return k.attr()})}},create:function(k,h){var j="/admin/templates/"+k.template_id+
"/parts.json",m=Layout.find(k.template_id);jQuery.ajax({type:"post",url:j,dataType:"json",data:{part:k},success:function(r){m.merge(r);h.call(this)}})}})}),Site=Model("site",function(){this.persistence(Model.SinatraREST,"/admin/sites");this.include({});this.extend({toMustache:function(){return{sites:this.map(function(k){return k.attr()})}}})}),User=Model("user",function(){this.persistence(Model.SinatraREST,"/admin/users");this.include({});this.extend({toMustache:function(){return{users:this.map(function(k){return k.attr()})}}})}),
Galerie={open:function(k,h){$("body").append('<div id="overlay"></div>').append('<div id="modal_wrapper"><div id="modal"></div></div>');var j=$("#modal");j.html(k);var m=$("#modal_wrapper"),r=$(window).height();j=j.height()+42;j=(r-j)/2;$("#overlay").css({height:r}).hide().fadeIn("fast");m.hide().fadeIn("fast").css({top:j});h&&h.call(this)},close:function(){$("#modal_wrapper").fadeOut("fast",function(){$(this).remove();$("#overlay").fadeOut("fast",function(){$(this).remove()})})}},logger={info:function(k){window.console&&
console.log(k)},debug:function(k){window.console&&console.log(k)}},Utilities={notice:function(k){var h=jQuery(".notice");h.text(k);h.slideDown("slow",function(){setTimeout(function(){h.slideUp("slow")},1E3)})},keyboard_nav:function(){jQuery("body").keydown(function(k){switch(k.keyCode){case 37:$("a.previous").click();break;case 39:$("a.next").click();break}})},check_browser_version:function(){if(!Modernizr.history){jQuery("a").live("click",function(h){h.preventDefault();document.location.hash=$(this).attr("href")});
var k=jQuery("form#search-form");k.attr("action","#"+k.attr("action"))}},formObserver:function(k){jQuery(k).keyup(function(){delay(function(){jQuery(k).parents("form:first").submit()},800)})}},iFramer={initialize:function(k,h){var j=jQuery(k),m=this;j.length&&j.load(function(){var r=$(this).contents().find("span.part-editor"),t=r.find("a");logger.info("load");$(this).fadeIn("fast");m.setEditFlags(r);t.click(function(){window.top.trigger=$(this);window.top.location.hash=$(this).attr("href");return false});
h&&h.call(this)})},setEditFlags:function(k){k.css({position:"relative",display:"block",height:"0",width:"0","text-decoration":"none"}).find("span").css({display:"block",position:"absolute",top:"-24px",left:"12px",padding:"4px 8px",width:"100px",background:"rgba(255, 255, 0, 0.7)"})}},TabControl={initialize:function(k){if(k=jQuery(k)){k.each(function(h,j){$(j).hide()});k.first().show();this.tabControl(jQuery(".tab-control"))}},tabControl:function(k){k.click(function(){var h="tab-"+$(this).find("label").attr("for").split("-")[1];
console.log(h);jQuery(".tab").hide();jQuery("#"+h).show()})}},delay=function(){var k=0;return function(h,j){clearTimeout(k);k=setTimeout(h,j)}}();
Sites=Sammy(function(){var k=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.helpers({loadSites:function(h){if(Site.all().length==0)Site.load(function(){h&&h.call(this)});else h&&h.call(this)},renderSiteIndex:function(){this.render("/templates/admin/sites/index.mustache",Site.toMustache()).replace("#sidebar")}});this.bind("run",function(){k.modal=false;k.refresh_pages=true});this.get("#/preview",function(){alert(document.location.hostname);
window.open("/","preview")});this.get("#/sites",function(h){k.refresh_pages=true;Galerie.close();jQuery("#editor").html('<h1 class="section">Sites</div>');h.loadSites(function(){h.renderSiteIndex()})});this.get("#/sites/new",function(h){h.loadSites(function(){$("#modal").length==0&&Galerie.open();h.render("/templates/admin/sites/new.mustache").replace("#modal");h.renderSiteIndex(Site.all())})});this.post("#/sites",function(h){(new Site(h.params.site)).save(function(j,m){var r=JSON.parse(m.responseText);
r.errors?alert(JSON.stringify(r)):h.redirect("#/sites")})});this.get("#/sites/:id/edit",function(h){Galerie.close();h.loadSites(function(){site=Site.find(h.params.id);h.render("/templates/admin/sites/edit.mustache",{site:site.asJSON()}).replace("#editor");h.renderSiteIndex(Site.all())})});this.put("#/sites/:id",function(h){var j=Site.find(h.params.id);j.attr(h.params.site);j.save(function(m,r){var t=JSON.parse(r.responseText);t.errors?alert(JSON.stringify(t)):h.redirect("#/sites")})});this.get("#/sites/:id/remove",
function(h){Galerie.open();h.loadSites(function(){site=Site.find(h.params.id);h.render("/templates/admin/sites/remove.mustache",{site:site.asJSON()}).replace("#modal");h.renderSiteIndex(Site.all())})});this.del("#/sites/:id",function(h){site.destroy(function(j){j?h.redirect("#/sites"):alert("there were issues")})})});
Layouts=Sammy(function(){var k=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.helpers({loadLayouts:function(h){if(Layout.all().length==0)Layout.load(function(){h&&h.call(this)});else h&&h.call(this)},renderLayoutIndex:function(){this.render("/templates/admin/templates/index.mustache",{layouts:Layout.find_all_by_class("Layout").map(function(h){return h.attributes}),partials:Layout.find_all_by_class("Partial").map(function(h){return h.attributes}),
javascripts:Layout.find_all_by_class("Javascript").map(function(h){return h.attributes}),stylesheets:Layout.find_all_by_class("Stylesheet").map(function(h){return h.attributes})}).replace("#sidebar")},renderLayout:function(h){console.log(h.attr("filter")=="css"?"selected":"");this.render("/templates/admin/templates/edit.mustache",{layout:h.asJSON(),filters:[{name:"none",value:"none",selected:h.attr("filter")=="css"?'selected="selected"':""},{name:"Sass",value:"sass",selected:h.attr("filter")=="sass"?
'selected="selected"':""},{name:"Scss",value:"scss",selected:h.attr("filter")=="scss"?'selected="selected"':""}]}).replace("#editor").then(function(){var j=jQuery("#layout_content");j.attr("value",h.attr("content"));j=j.attr("class");jQuery("#layout_content").length>0&&CodeMirror.fromTextArea(document.getElementById("layout_content"),{mode:j,lineNumbers:true})})}});this.bind("run",function(){k.refresh_templates=true;k.refresh_pages=true;k.modal=false});this.get("#/templates",function(h){Galerie.close();
k.refresh_templates=false;k.refresh_pages=true;jQuery("#editor").html('<h1 class="section">Templates</div>');h.loadLayouts(function(){h.renderLayoutIndex(Layout.all())})});this.get("#/templates/new/:klass",function(h){this.loadLayouts(function(){var j=$("<div />").attr({id:"new-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(j);h.render("/templates/admin/templates/new.mustache",{klass:h.params.klass}).replace("#new-page-container");h.renderLayoutIndex(Layout.all())})});
this.post("#/templates",function(h){(new Layout(h.params.template)).save(function(j,m){var r=JSON.parse(m.responseText);if(r.errors)Utilities.notice(JSON.stringify(r));else{h.redirect("#/templates");Utilities.notice("Successfully saved template")}})});this.get("#/templates/:id/edit",function(h){Galerie.close();k.refresh_pages=true;this.loadLayouts(function(){var j=Layout.find(h.params.id);h.renderLayout(j);h.renderLayoutIndex(Layout.all())})});this.put("#/templates/:id",function(h){var j=Layout.find(h.params.id);
console.log(h.params.layout);j.attr(h.params.layout);j.save(function(m){if(m){h.renderLayoutIndex();Utilities.notice("Successfully saved template")}})});this.get("#/templates/:id/remove",function(h){this.loadLayouts(function(){var j=Layout.find(h.params.id);Galerie.open();h.render("/templates/admin/templates/remove.mustache",{layout:j.asJSON()}).replace("#modal");h.renderLayoutIndex(Layout.all())})});this.del("/templates/:id",function(h){Layout.find(h.params.id).destroy(function(j){if(j){h.renderLayoutIndex();
Utilities.notice("Successfully deleted template");h.redirect("#/templates")}})});this.post("/layouts/:id/parts",function(h){this.loadLayouts(function(){var j=h.params.id,m=h.params.part;alert(JSON.stringify(h.params.part));Part.create(m,function(){h.redirect("#/templates/"+j+"/edit")})})})});
Assets=Sammy(function(k){var h=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.swap=function(j){jQuery("#editor").html(j)};this.helpers({loadAssets:function(j,m){if(Asset.all().length==0)Asset.searchAdmin(j,function(){m&&m.call(this)});else m&&m.call(this)}});this.bind("run",function(){h.modal=false;h.first_run=true});this.get("#/assets",function(j){var m=j.params.query,r=m?{query:m}:{};r.limit=j.params.limit||48;r.page=
j.params.page||1;Galerie.close();h.modal||Asset.searchAdmin(r,function(){j.render("/templates/admin/assets/index.mustache",Asset.toMustache(m)).replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple","multiple")})});h.modal=false;h.first_run=false});this.get("#/assets/new",function(j){j.render("/templates/admin/assets/new.mustache").replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple","multiple")});h.first_run=false});this.post("/admin/assets",function(j){var m=
document.getElementById("ajax_uploader").files,r=j.params.query?j.params.query:null;jQuery("form#new_asset");var t=r?{query:r}:{};t.limit=j.params.limit||48;t.page=j.params.page||1;for(var w=0,F=0;F<m.length;F++)Asset.create(m[F],function(){w+=1;logger.info("asset "+w/m.length*100+"%");jQuery(".progress").text(w/m.length*100+"%");w==m.length&&Asset.searchAdmin(t,function(){j.render("/templates/admin/assets/index.mustache",Asset.toMustache(r)).replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple",
"multiple")})})});return false});this.get("#/assets/:id/edit",function(j){var m=j.params.query?j.params.query:null;this.loadAssets(m?{query:j.params.query}:{},function(){var r=Asset.find(j.params.id);j.render("/templates/admin/assets/edit.mustache",r.toMustacheWithNeighbors(m)).replace("#editor").then(function(){setTimeout(function(){$("img.fade-in").fadeIn("slow")},100);Utilities.formObserver(".image-info input[type=text], .image-info textarea")})});h.modal=false});this.put("#/assets/:id",function(j){var m=
Asset.find(j.params.id);m.attr(j.params.asset);m.save(function(r){r&&Utilities.notice("Successfully saved asset")})});this.get("#/assets/:id/remove",function(j){var m=j.params.query?j.params.query:null,r=m?{query:j.params.query}:null;Galerie.close();Galerie.open(jQuery("<div />").attr({id:"remove-asset-container","class":"wide-modal"}));this.loadAssets(r,function(){var t=Asset.find(j.params.id);j.render("/templates/admin/assets/remove.mustache",{asset:t.toMustache(m)}).replace("#remove-asset-container");
h.first_run&&j.render("/templates/admin/assets/index.mustache",Asset.toMustache(m)).replace("#editor")})});this.del("#/assets/:id",function(j){var m=j.params.query?j.params.query:null,r=m?"?"+decodeURIComponent(jQuery.param({query:m})):"";Asset.find(j.params.id).destroy(function(t){if(t){Galerie.close();Utilities.notice("Successfully saved asset");j.redirect("#/assets"+r)}})});k.get("/",function(){})});
Pages=Sammy(function(k){var h=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);k.helpers({loadPages:function(j){if(Page.all().length==0)Page.load(function(){Layout.load(function(){j&&j.call(this)})});else j&&j.call(this)},renderTree:function(j){var m=this;m.render("/templates/admin/pages/node.mustache",{pages:[j.asJSON()]}).replace("#sidebar").then(function(){m.renderNode(j)})},renderNode:function(j){var m=this;pageNode=
m.render("/templates/admin/pages/node.mustache",j.children().toMustache());pageNode.appendTo("#page-"+j.id()).then(function(){j.children().each(function(r){if(r.has_children()==true){jQuery("#page-"+r.id()).addClass("open");m.renderNode(r)}})})},renderPagePreview:function(j,m){h.modal||this.render("/templates/admin/pages/show.mustache",{page:j.asJSON(),layouts:Layout.asLayoutJSON(j.attr("layout_id")),base_page_id:j.id()}).replace("#editor").then(function(){iFramer.initialize("#preview iframe",function(){m&&
m.call(this)});jQuery(".toggle-page-editor").click(function(r){r.preventDefault();r=jQuery("#page-editor");var t=jQuery("#page-title");if(r.hasClass("open")){r.removeClass("open").animate({height:"0"},300);t.attr("disabled","disabled")}else{r.addClass("open").animate({height:"200px"},300);t.removeAttr("disabled").focus()}})})},renderPage:function(j){this.render("/templates/admin/pages/edit.mustache",{page:j.asJSON(),layouts:Layout.asLayoutJSON(j.attr("layout_id"))}).replace("#editor").then(function(){})}});
this.bind("run",function(){h.application=this;h.refresh_pages=true;h.modal=false;jQuery(".add-asset").live("click",function(){h.application.trigger("add-asset");return false});jQuery("#sidebar .opener").live("click",function(){var j=(new Date).getTime(),m=$(this).parents("li:first"),r=this.id.split("-")[2],t=Page.find(r),w=jQuery.cookie("active_page_ids");w=w?w.split(","):[];if(m.hasClass("open")){m.toggleClass("open");w=jQuery.grep(w,function(F){return F!=r});jQuery.cookie("active_page_ids",w.join(","),
{path:"/admin"});t.children().each(function(F){Page.remove(F)});jQuery("#page-"+r+" ul").remove()}else{w.push(r);m.toggleClass("open");j=(new Date).getTime();jQuery.cookie("active_page_ids",w.join(","),{path:"/admin"});Page.load(function(){h.application.renderNode(t);var F=(new Date).getTime()-j;console.log(F)})}h.refresh_pages=false;return h.modal=false})});this.get("#/pages/?",function(j){Galerie.close();h.refresh_pages&&j.loadPages(function(){j.renderTree(Page.root());logger.info("pages")});jQuery("#editor").html('<h1 class="section">Pages</div>');
h.refresh_pages=true;h.do_not_refresh=false});this.get("#/pages/:id/new/?",function(j){this.loadPages(function(){var m=Page.find(j.params.id),r=$("<div />").attr({id:"new-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(r);if(h.refresh_pages){j.renderTree(Page.root());h.refresh_pages=true}j.render("/templates/admin/pages/new.mustache",{parent:m.asJSON()}).replace("#new-page-container")})});this.post("#/pages/:page_id",function(j){Page.find(j.params.page_id);Page.create(j.params.page,
function(m){h.refresh_pages=true;Utilities.notice("Successfully saved page");j.redirect("#/pages/"+m.id+"/edit")})});this.get("#/pages/:id/?",function(j){logger.info("pages show");Galerie.close();jQuery(".modal-editor").remove();this.loadPages(function(){var m=j.params.id,r=Page.find(m);if(!h.do_not_refresh){if(r)j.renderPagePreview(r);else{r=new Page({id:m});r.load(function(){j.renderPagePreview(r)})}h.modal=false;h.do_not_refresh=false;if(h.refresh_pages){j.renderTree(Page.root());h.refresh_pages=
false}}});h.do_not_refresh=false});this.get("#/pages/:id/edit/?",function(j){Galerie.close();h.modal=true;this.loadPages(function(){var m=j.params.id,r=Page.find(m);if(!h.do_not_refresh){if(r)j.renderPage(r);else{r=new Page({id:m});r.load(function(){j.renderPage(r)})}if(h.refresh_pages){j.renderTree(Page.root());h.refresh_pages=false}}});h.do_not_refresh=false});this.put("#/pages/:page_id",function(j){var m=Page.find(j.params.page_id);m.attr(j.params.page);m.save(function(r){if(r){h.modal=false;Utilities.notice("Successfully saved page");
j.renderTree(Page.root())}})});this.get("#/pages/:id/remove",function(j){this.loadPages(function(){var m=Page.find(j.params.id),r=$("<div />").attr({id:"remove-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(r);h.refresh_pages&&j.renderTree(Page.root());j.render("/templates/admin/pages/remove.mustache",{page:m.asJSON()}).replace("#remove-page-container")})});this.del("/pages/:id",function(j){var m=j.params.id;Page.find(m).destroy(function(r){if(r){jQuery("#page-"+m).remove();
h.refresh_pages=false;j.redirect("#/pages")}})});this.get("/pages/:id/results",function(j){this.loadPages(function(){var m=Page.find(j.params.id),r=j.params.query?j.params.query:null;Asset.searchAdmin(r?{query:r}:{},function(){Asset.each(function(t){t.attr("current_page_id",m.id());t.save()});j.render("/templates/admin/pages/search_results.mustache",Asset.toMustache()).replace("#search-results-container")})})});this.get("#/pages/:page_id/assets/:id/add",function(j){this.loadPages(function(){var m=
j.params.page_id,r=Page.find(m),t=Asset.find(j.params.id),w=jQuery("#page-asset-ids");w.attr("value");var F=w.attr("value")+","+t.id();w.attr("value",F);r.saveRemote({page:{assets_list:F}},{success:function(){var B=jQuery('<div class="asset" />').attr("id","page-asset-"+t.id()),z=jQuery('<a href="#/assets/'+t.id()+'/edit"></a>'),N=jQuery('<br /><a href="#/pages/'+r.id()+"/assets/"+t.id()+'/remove">Remove</a>');z.append('<img src="/images/icons/'+t.id()+"/"+t.attr("file_name")+'" alt="'+t.attr("title")+
'" /></a>');B.html(z);B.append(N);jQuery("#page-assets").append(B);var P=jQuery("#preview iframe");P.hide().attr("src",P.attr("src"));P.load(function(){P.fadeIn("fast")});h.do_not_refresh=true;j.redirect("#/pages/"+m)}})})});this.get("#/pages/:page_id/assets/:id/remove",function(j){this.loadPages(function(){var m=j.params.id,r=j.params.page_id,t=Page.find(r),w=jQuery("#page-asset-ids"),F=w.attr("value").split(","),B=F.indexOf(m);B!=-1&&F.splice(B,1);w.attr("value",F);t.attr("assets_list",F.join(","));
t.save(function(){jQuery("#page-asset-"+m).fadeOut("fast",function(){$(this).remove()});var z=jQuery("#preview iframe");z.hide().attr("src",z.attr("src"));z.load(function(){z.fadeIn("fast")});h.do_not_refresh=true;j.redirect("#/pages/"+r)})})})});
Pages=Sammy(function(k){var h=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);k.helpers({render_part:function(j,m,r){var t=this;t.render("/templates/admin/"+r+"/edit.mustache",{part:j.asJSON(),page:m.asJSON(),assets:Asset.asJSON()}).appendTo(jQuery("body")).then(function(){var w=jQuery(".modal-editor"),F=$("iframe").contents(),B=F.find("#editor-"+j.id());w.fadeIn("fast").css({top:B.offset().top-F.find("body").scrollTop()+
"px",left:B.offset().left+400+"px"});t.set_asset_links(j,m);h.modal=true})},set_asset_links:function(j,m){jQuery("#search-results-container li.asset").each(function(r,t){var w=jQuery(t).find("a"),F=jQuery(t).attr("id").split("-")[1];w.click(function(B){B.preventDefault();B=m.attr("parts");for(var z=0,N=B.length;z<N;++z){var P=B[z];if(j.id()==P.id){P.asset_id=F;j.attr("asset_id",F);j.save()}}m.save(function(){jQuery(".modal-editor").remove();h.modal=false;document.location.hash="#/pages/"+m.id()})})})}});
this.get("#/pages/:page_id/parts/:id/edit",function(j){var m=this;jQuery(".modal-editor").remove();this.loadPages(function(){var r=Page.find(j.params.page_id),t=r.parts().find(j.params.id);$("iframe").length?m.render_part(t,r,"parts"):j.renderPagePreview(r,function(){m.render_part(t,r,"parts")})})});this.get("#/pages/:page_id/image_parts/:id/edit",function(j){var m=this;jQuery(".modal-editor").remove();this.loadPages(function(){var r=Page.find(j.params.page_id),t=r.parts().find(j.params.id),w=$("iframe");
Asset.searchAdmin({limit:"12"},function(){w.length?m.render_part(t,r,"image_parts"):j.renderPagePreview(r,function(){m.render_part(t,r,"image_parts")})})})});this.get("/pages/:page_id/parts/:id/results",function(j){var m=this;this.loadPages(function(){var r=Page.find(j.params.page_id),t=Part.find(j.params.id),w=j.params.query?j.params.query:null;Asset.searchAdmin(w?{query:w}:{},function(){j.render("/templates/admin/pages/search_results.mustache",Asset.toMustache()).replace("#search-results-container").then(function(){m.set_asset_links(t,
r)})})})});this.put("#/pages/:page_id/parts/:id",function(j){var m=j.params.id,r=j.params.page_id,t=Page.find(r),w=t.parts().find(m);logger.info(j.params.part);for(var F=t.attr("parts"),B=0,z=F.length;B<z;++B){w=F[B];if(m==w.id){var N=j.params.part.content;w.content=N;w=Part.find(w.id);w.attr("content",N);w.save()}}t.save(function(P){if(P){h.modal=false;j.redirect("#/pages/"+r)}})})});
Sites=Sammy(function(){var k=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.helpers({loadUsers:function(h){if(User.all().length==0)User.load(function(){h&&h.call(this)});else h&&h.call(this)},renderUserIndex:function(h){this.render("/templates/admin/users/index.mustache",User.toMustache()).replace("#editor").then(function(){h&&h.call(this)})}});this.bind("run",function(){k.modal=false;k.refresh_pages=true});this.get("#/users",
function(h){Galerie.close();jQuery("#editor").html('<h1 class="section">Users</div>');h.loadUsers(function(){h.renderUserIndex()})});this.get("#/users/new",function(h){h.loadUsers(function(){jQuery("#modal").length||Galerie.open();h.render("/templates/admin/users/new.mustache").replace("#modal");h.renderUserIndex()})});this.post("#/users",function(h){(new User(h.params.user)).save(function(j,m){var r=JSON.parse(m.responseText);r.errors?alert(JSON.stringify(r)):h.redirect("#/users")})});this.get("#/users/:id/edit",
function(h){h.loadUsers(function(){user=User.find(h.params.id);if(jQuery("#users").length){jQuery(".user-form").html("");h.render("/templates/admin/users/edit.mustache",{user:user.asJSON()}).replace("#user-form-"+user.id())}else h.renderUserIndex(function(){jQuery(".user-form").html("");h.render("/templates/admin/users/edit.mustache",{user:user.asJSON()}).replace("#user-form-"+user.id())})})});this.put("#/users/:id",function(h){var j=User.find(h.params.id);j.attr(h.params.user);j.save(function(m,
r){var t=JSON.parse(r.responseText);t.errors?alert(JSON.stringify(t)):h.redirect("#/users")})})});jQuery(document).ready(function(){jQuery("body").ajaxStart(function(){logger.info("starting")});jQuery("body").ajaxSuccess(function(){logger.info("success!")});jQuery("#login").length||Pages.run("#/pages");Utilities.keyboard_nav();Utilities.check_browser_version()});
