(function(c,a){function f(b){return e.isWindow(b)?b:b.nodeType===9?b.defaultView||b.parentWindow:false}function d(b){if(!db[b]){var g=N.body,k=e("<"+b+">").appendTo(g),m=k.css("display");k.remove();if(m==="none"||m===""){Ja||(Ja=N.createElement("iframe"),Ja.frameBorder=Ja.width=Ja.height=0);g.appendChild(Ja);if(!Sa||!Ja.createElement){Sa=(Ja.contentWindow||Ja.contentDocument).document;Sa.write((N.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");Sa.close()}k=Sa.createElement(b);Sa.body.appendChild(k);
m=e.css(k,"display");g.removeChild(Ja)}db[b]=m}return db[b]}function h(b,g){var k={};e.each(kb.concat.apply([],kb.slice(0,g)),function(){k[this]=b});return k}function l(){$a=a}function n(){setTimeout(l,0);return $a=e.now()}function v(){try{return new c.XMLHttpRequest}catch(b){}}function B(b,g,k,m){if(e.isArray(g))e.each(g,function(p,u){k||Eb.test(b)?m(b,u):B(b+"["+(typeof u=="object"||e.isArray(u)?p:"")+"]",u,k,m)});else if(!k&&g!=null&&typeof g=="object")for(var o in g)B(b+"["+o+"]",g[o],k,m);else m(b,
g)}function D(b,g,k,m,o,p){o=o||g.dataTypes[0];p=p||{};p[o]=true;o=b[o];for(var u=0,A=o?o.length:0,E=b===eb,H;u<A&&(E||!H);u++){H=o[u](g,k,m);typeof H=="string"&&(!E||p[H]?(H=a):(g.dataTypes.unshift(H),H=D(b,g,k,m,H,p)))}(E||!H)&&!p["*"]&&(H=D(b,g,k,m,"*",p));return H}function K(b){return function(g,k){typeof g!="string"&&(k=g,g="*");if(e.isFunction(k))for(var m=g.toLowerCase().split(lb),o=0,p=m.length,u,A;o<p;o++){u=m[o];(A=/^\+/.test(u))&&(u=u.substr(1)||"*");u=b[u]=b[u]||[];u[A?"unshift":"push"](k)}}}
function R(b,g,k){var m=g==="width"?b.offsetWidth:b.offsetHeight,o=g==="width"?Fb:Gb;if(m>0){k!=="border"&&e.each(o,function(){k||(m-=parseFloat(e.css(b,"padding"+this))||0);k==="margin"?(m+=parseFloat(e.css(b,k+this))||0):(m-=parseFloat(e.css(b,"border"+this+"Width"))||0)});return m+"px"}m=Ta(b,g,g);if(m<0||m==null)m=b.style[g]||0;m=parseFloat(m)||0;k&&e.each(o,function(){m+=parseFloat(e.css(b,"padding"+this))||0;k!=="padding"&&(m+=parseFloat(e.css(b,"border"+this+"Width"))||0);k==="margin"&&(m+=
parseFloat(e.css(b,k+this))||0)});return m+"px"}function Z(b,g){g.src?e.ajax({url:g.src,async:false,dataType:"script"}):e.globalEval((g.text||g.textContent||g.innerHTML||"").replace(Hb,"/*$0*/"));g.parentNode&&g.parentNode.removeChild(g)}function fa(b){e.nodeName(b,"input")?ma(b):"getElementsByTagName"in b&&e.grep(b.getElementsByTagName("input"),ma)}function ma(b){if(b.type==="checkbox"||b.type==="radio")b.defaultChecked=b.checked}function r(b){return"getElementsByTagName"in b?b.getElementsByTagName("*"):
"querySelectorAll"in b?b.querySelectorAll("*"):[]}function t(b,g){var k;if(g.nodeType===1){g.clearAttributes&&g.clearAttributes();g.mergeAttributes&&g.mergeAttributes(b);k=g.nodeName.toLowerCase();if(k==="object")g.outerHTML=b.outerHTML;else if(k!=="input"||b.type!=="checkbox"&&b.type!=="radio")if(k==="option")g.selected=b.defaultSelected;else{if(k==="input"||k==="textarea")g.defaultValue=b.defaultValue}else{b.checked&&(g.defaultChecked=g.checked=b.checked);g.value!==b.value&&(g.value=b.value)}g.removeAttribute(e.expando)}}
function C(b,g){if(g.nodeType===1&&e.hasData(b)){var k=e.expando,m=e.data(b),o=e.data(g,m);if(m=m[k]){var p=m.events;o=o[k]=e.extend({},m);if(p){delete o.handle;o.events={};for(var u in p){k=0;for(m=p[u].length;k<m;k++)e.event.add(g,u+(p[u][k].namespace?".":"")+p[u][k].namespace,p[u][k],p[u][k].data)}}}}}function P(b,g,k){g=g||0;if(e.isFunction(g))return e.grep(b,function(o,p){return!!g.call(o,p,o)===k});if(g.nodeType)return e.grep(b,function(o){return o===g===k});if(typeof g=="string"){var m=e.grep(b,
function(o){return o.nodeType===1});if(Ib.test(g))return e.filter(g,m,!k);g=e.filter(g,m)}return e.grep(b,function(o){return e.inArray(o,g)>=0===k})}function aa(b,g){return(b&&b!=="*"?b+".":"")+g.replace(Jb,"`").replace(Kb,"&")}function ca(b){var g,k,m,o,p,u,A,E,H,O,ea,na=[];o=[];p=e._data(this,"events");if(!(b.liveFired===this||!p||!p.live||b.target.disabled||b.button&&b.type==="click")){b.namespace&&(ea=new RegExp("(^|\\.)"+b.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)"));b.liveFired=this;
var ja=p.live.slice(0);for(A=0;A<ja.length;A++){p=ja[A];p.origType.replace(Da,"")===b.type?o.push(p.selector):ja.splice(A--,1)}o=e(b.target).closest(o,b.currentTarget);E=0;for(H=o.length;E<H;E++){O=o[E];for(A=0;A<ja.length;A++){p=ja[A];if(O.selector===p.selector&&(!ea||ea.test(p.namespace))&&!O.elem.disabled){u=O.elem;m=null;if(p.preType==="mouseenter"||p.preType==="mouseleave"){b.type=p.preType;(m=e(b.relatedTarget).closest(p.selector)[0])&&e.contains(u,m)&&(m=u)}(!m||m!==u)&&na.push({elem:u,handleObj:p,
level:O.level})}}}E=0;for(H=na.length;E<H;E++){o=na[E];if(k&&o.level>k)break;b.currentTarget=o.elem;b.data=o.handleObj.data;b.handleObj=o.handleObj;ea=o.handleObj.origHandler.apply(o.elem,arguments);if(ea===false||b.isPropagationStopped()){k=o.level;ea===false&&(g=false);if(b.isImmediatePropagationStopped())break}}return g}}function z(b,g,k){var m=e.extend({},k[0]);m.type=b;m.originalEvent={};m.liveFired=a;e.event.handle.call(g,m);m.isDefaultPrevented()&&k[0].preventDefault()}function da(){return true}
function oa(){return false}function S(b,g,k){var m=g+"defer",o=g+"queue",p=g+"mark",u=e.data(b,m,a,true);u&&(k==="queue"||!e.data(b,o,a,true))&&(k==="mark"||!e.data(b,p,a,true))&&setTimeout(function(){!e.data(b,o,a,true)&&!e.data(b,p,a,true)&&(e.removeData(b,m,true),u.resolve())},0)}function X(b){for(var g in b)if(g!=="toJSON")return false;return true}function ba(b,g,k){if(k===a&&b.nodeType===1){k="data-"+g.replace(Y,"$1-$2").toLowerCase();k=b.getAttribute(k);if(typeof k=="string"){try{k=k==="true"?
true:k==="false"?false:k==="null"?null:e.isNaN(k)?Q.test(k)?e.parseJSON(k):k:parseFloat(k)}catch(m){}e.data(b,g,k)}else k=a}return k}var N=c.document,sa=c.navigator,q=c.location,e=function(){function b(){if(!g.isReady){try{N.documentElement.doScroll("left")}catch(x){setTimeout(b,1);return}g.ready()}}var g=function(x,M){return new g.fn.init(x,M,o)},k=c.jQuery,m=c.$,o,p=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,u=/\S/,A=/^\s+/,E=/\s+$/,H=/\d/,O=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,ea=/^[\],:{}\s]*$/,na=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
ja=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,pa=/(?:^|:|,)(?:\s*\[)+/g,Ha=/(webkit)[ \/]([\w.]+)/,Ba=/(opera)(?:.*version)?[ \/]([\w.]+)/,Ca=/(msie) ([\w.]+)/,Ka=/(mozilla)(?:.*? rv:([\w.]+))?/,s=/-([a-z])/ig,w=function(x,M){return M.toUpperCase()},I=sa.userAgent,J,G,L=Object.prototype.toString,T=Object.prototype.hasOwnProperty,V=Array.prototype.push,ka=Array.prototype.slice,Aa=String.prototype.trim,za=Array.prototype.indexOf,Ea={};g.fn=g.prototype={constructor:g,init:function(x,
M,W){var U,ga;if(!x)return this;if(x.nodeType){this.context=this[0]=x;this.length=1;return this}if(x==="body"&&!M&&N.body){this.context=N;this[0]=N.body;this.selector=x;this.length=1;return this}if(typeof x=="string"){x.charAt(0)!=="<"||x.charAt(x.length-1)!==">"||x.length<3?(U=p.exec(x)):(U=[null,x,null]);if(U&&(U[1]||!M)){if(U[1]){ga=(M=M instanceof g?M[0]:M)?M.ownerDocument||M:N;(W=O.exec(x))?g.isPlainObject(M)?(x=[N.createElement(W[1])],g.fn.attr.call(x,M,true)):(x=[ga.createElement(W[1])]):(W=
g.buildFragment([U[1]],[ga]),x=(W.cacheable?g.clone(W.fragment):W.fragment).childNodes);return g.merge(this,x)}if((M=N.getElementById(U[2]))&&M.parentNode){if(M.id!==U[2])return W.find(x);this.length=1;this[0]=M}this.context=N;this.selector=x;return this}return!M||M.jquery?(M||W).find(x):this.constructor(M).find(x)}if(g.isFunction(x))return W.ready(x);x.selector!==a&&(this.selector=x.selector,this.context=x.context);return g.makeArray(x,this)},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},
toArray:function(){return ka.call(this,0)},get:function(x){return x==null?this.toArray():x<0?this[this.length+x]:this[x]},pushStack:function(x,M,W){var U=this.constructor();g.isArray(x)?V.apply(U,x):g.merge(U,x);U.prevObject=this;U.context=this.context;M==="find"?(U.selector=this.selector+(this.selector?" ":"")+W):M&&(U.selector=this.selector+"."+M+"("+W+")");return U},each:function(x,M){return g.each(this,x,M)},ready:function(x){g.bindReady();J.done(x);return this},eq:function(x){return x===-1?this.slice(x):
this.slice(x,+x+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(ka.apply(this,arguments),"slice",ka.call(arguments).join(","))},map:function(x){return this.pushStack(g.map(this,function(M,W){return x.call(M,W,M)}))},end:function(){return this.prevObject||this.constructor(null)},push:V,sort:[].sort,splice:[].splice};g.fn.init.prototype=g.fn;g.extend=g.fn.extend=function(){var x,M,W,U,ga,qa,ta=arguments[0]||{},ua=1,La=arguments.length,
Ma=false;typeof ta=="boolean"&&(Ma=ta,ta=arguments[1]||{},ua=2);typeof ta!="object"&&!g.isFunction(ta)&&(ta={});for(La===ua&&(ta=this,--ua);ua<La;ua++)if((x=arguments[ua])!=null)for(M in x){W=ta[M];U=x[M];if(ta!==U)Ma&&U&&(g.isPlainObject(U)||(ga=g.isArray(U)))?(ga?(ga=false,qa=W&&g.isArray(W)?W:[]):(qa=W&&g.isPlainObject(W)?W:{}),ta[M]=g.extend(Ma,qa,U)):U!==a&&(ta[M]=U)}return ta};g.extend({noConflict:function(x){c.$===g&&(c.$=m);x&&c.jQuery===g&&(c.jQuery=k);return g},isReady:false,readyWait:1,
holdReady:function(x){x?g.readyWait++:g.ready(true)},ready:function(x){if(x===true&&!--g.readyWait||x!==true&&!g.isReady){if(!N.body)return setTimeout(g.ready,1);g.isReady=true;if(!(x!==true&&--g.readyWait>0)){J.resolveWith(N,[g]);g.fn.trigger&&g(N).trigger("ready").unbind("ready")}}},bindReady:function(){if(!J){J=g._Deferred();if(N.readyState==="complete")return setTimeout(g.ready,1);if(N.addEventListener){N.addEventListener("DOMContentLoaded",G,false);c.addEventListener("load",g.ready,false)}else if(N.attachEvent){N.attachEvent("onreadystatechange",
G);c.attachEvent("onload",g.ready);var x=false;try{x=c.frameElement==null}catch(M){}N.documentElement.doScroll&&x&&b()}}},isFunction:function(x){return g.type(x)==="function"},isArray:Array.isArray||function(x){return g.type(x)==="array"},isWindow:function(x){return x&&typeof x=="object"&&"setInterval"in x},isNaN:function(x){return x==null||!H.test(x)||isNaN(x)},type:function(x){return x==null?String(x):Ea[L.call(x)]||"object"},isPlainObject:function(x){if(!x||g.type(x)!=="object"||x.nodeType||g.isWindow(x))return false;
if(x.constructor&&!T.call(x,"constructor")&&!T.call(x.constructor.prototype,"isPrototypeOf"))return false;var M;for(M in x);return M===a||T.call(x,M)},isEmptyObject:function(x){for(var M in x)return false;return true},error:function(x){throw x;},parseJSON:function(x){if(typeof x!="string"||!x)return null;x=g.trim(x);if(c.JSON&&c.JSON.parse)return c.JSON.parse(x);if(ea.test(x.replace(na,"@").replace(ja,"]").replace(pa,"")))return(new Function("return "+x))();g.error("Invalid JSON: "+x)},parseXML:function(x,
M,W){c.DOMParser?(W=new DOMParser,M=W.parseFromString(x,"text/xml")):(M=new ActiveXObject("Microsoft.XMLDOM"),M.async="false",M.loadXML(x));W=M.documentElement;(!W||!W.nodeName||W.nodeName==="parsererror")&&g.error("Invalid XML: "+x);return M},noop:function(){},globalEval:function(x){x&&u.test(x)&&(c.execScript||function(M){c.eval.call(c,M)})(x)},camelCase:function(x){return x.replace(s,w)},nodeName:function(x,M){return x.nodeName&&x.nodeName.toUpperCase()===M.toUpperCase()},each:function(x,M,W){var U,
ga=0,qa=x.length,ta=qa===a||g.isFunction(x);if(W)if(ta)for(U in x){if(M.apply(x[U],W)===false)break}else for(;ga<qa;){if(M.apply(x[ga++],W)===false)break}else if(ta)for(U in x){if(M.call(x[U],U,x[U])===false)break}else for(;ga<qa;)if(M.call(x[ga],ga,x[ga++])===false)break;return x},trim:Aa?function(x){return x==null?"":Aa.call(x)}:function(x){return x==null?"":(x+"").replace(A,"").replace(E,"")},makeArray:function(x,M){var W=M||[];if(x!=null){var U=g.type(x);x.length==null||U==="string"||U==="function"||
U==="regexp"||g.isWindow(x)?V.call(W,x):g.merge(W,x)}return W},inArray:function(x,M){if(za)return za.call(M,x);for(var W=0,U=M.length;W<U;W++)if(M[W]===x)return W;return-1},merge:function(x,M){var W=x.length,U=0;if(typeof M.length=="number")for(var ga=M.length;U<ga;U++)x[W++]=M[U];else for(;M[U]!==a;)x[W++]=M[U++];x.length=W;return x},grep:function(x,M,W){var U=[],ga;W=!!W;for(var qa=0,ta=x.length;qa<ta;qa++){ga=!!M(x[qa],qa);W!==ga&&U.push(x[qa])}return U},map:function(x,M,W){var U,ga,qa=[],ta=0,
ua=x.length;if(x instanceof g||ua!==a&&typeof ua=="number"&&(ua>0&&x[0]&&x[ua-1]||ua===0||g.isArray(x)))for(;ta<ua;ta++){U=M(x[ta],ta,W);U!=null&&(qa[qa.length]=U)}else for(ga in x){U=M(x[ga],ga,W);U!=null&&(qa[qa.length]=U)}return qa.concat.apply([],qa)},guid:1,proxy:function(x,M){if(typeof M=="string"){var W=x[M];M=x;x=W}if(!g.isFunction(x))return a;var U=ka.call(arguments,2);W=function(){return x.apply(M,U.concat(ka.call(arguments)))};W.guid=x.guid=x.guid||W.guid||g.guid++;return W},access:function(x,
M,W,U,ga,qa){var ta=x.length;if(typeof M=="object"){for(var ua in M)g.access(x,ua,M[ua],U,ga,W);return x}if(W!==a){U=!qa&&U&&g.isFunction(W);for(ua=0;ua<ta;ua++)ga(x[ua],M,U?W.call(x[ua],ua,ga(x[ua],M)):W,qa);return x}return ta?ga(x[0],M):a},now:function(){return(new Date).getTime()},uaMatch:function(x){x=x.toLowerCase();x=Ha.exec(x)||Ba.exec(x)||Ca.exec(x)||x.indexOf("compatible")<0&&Ka.exec(x)||[];return{browser:x[1]||"",version:x[2]||"0"}},sub:function(){function x(W,U){return new x.fn.init(W,
U)}g.extend(true,x,this);x.superclass=this;x.fn=x.prototype=this();x.fn.constructor=x;x.sub=this.sub;x.fn.init=function(W,U){U&&U instanceof g&&!(U instanceof x)&&(U=x(U));return g.fn.init.call(this,W,U,M)};x.fn.init.prototype=x.fn;var M=x(N);return x},browser:{}});g.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(x,M){Ea["[object "+M+"]"]=M.toLowerCase()});I=g.uaMatch(I);I.browser&&(g.browser[I.browser]=true,g.browser.version=I.version);g.browser.webkit&&(g.browser.safari=
true);u.test("\u00a0")&&(A=/^[\s\xA0]+/,E=/[\s\xA0]+$/);o=g(N);N.addEventListener?(G=function(){N.removeEventListener("DOMContentLoaded",G,false);g.ready()}):N.attachEvent&&(G=function(){N.readyState==="complete"&&(N.detachEvent("onreadystatechange",G),g.ready())});return g}(),y="done fail isResolved isRejected promise then always pipe".split(" "),F=[].slice;e.extend({_Deferred:function(){var b=[],g,k,m,o={done:function(){if(!m){var p=arguments,u,A,E,H,O;g&&(O=g,g=0);u=0;for(A=p.length;u<A;u++){E=
p[u];H=e.type(E);H==="array"?o.done.apply(o,E):H==="function"&&b.push(E)}O&&o.resolveWith(O[0],O[1])}return this},resolveWith:function(p,u){if(!m&&!g&&!k){u=u||[];k=1;try{for(;b[0];)b.shift().apply(p,u)}finally{g=[p,u];k=0}}return this},resolve:function(){o.resolveWith(this,arguments);return this},isResolved:function(){return!!k||!!g},cancel:function(){m=1;b=[];return this}};return o},Deferred:function(b){var g=e._Deferred(),k=e._Deferred(),m;e.extend(g,{then:function(o,p){g.done(o).fail(p);return this},
always:function(){return g.done.apply(g,arguments).fail.apply(this,arguments)},fail:k.done,rejectWith:k.resolveWith,reject:k.resolve,isRejected:k.isResolved,pipe:function(o,p){return e.Deferred(function(u){e.each({done:[o,"resolve"],fail:[p,"reject"]},function(A,E){var H=E[0],O=E[1],ea;e.isFunction(H)?g[A](function(){(ea=H.apply(this,arguments))&&e.isFunction(ea.promise)?ea.promise().then(u.resolve,u.reject):u[O](ea)}):g[A](u[O])})}).promise()},promise:function(o){if(o==null){if(m)return m;m=o={}}for(var p=
y.length;p--;)o[y[p]]=g[y[p]];return o}});g.done(k.cancel).fail(g.cancel);delete g.cancel;b&&b.call(g,g);return g},when:function(b){function g(A){return function(E){k[A]=arguments.length>1?F.call(arguments,0):E;--p||u.resolveWith(u,F.call(k,0))}}var k=arguments,m=0,o=k.length,p=o,u=o<=1&&b&&e.isFunction(b.promise)?b:e.Deferred();if(o>1){for(;m<o;m++)k[m]&&e.isFunction(k[m].promise)?k[m].promise().then(g(m),u.reject):--p;p||u.resolveWith(u,k)}else u!==b&&u.resolveWith(u,o?[b]:[]);return u.promise()}});
e.support=function(){var b=N.createElement("div"),g=N.documentElement,k,m,o,p,u,A,E;b.setAttribute("className","t");b.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";k=b.getElementsByTagName("*");m=b.getElementsByTagName("a")[0];if(!k||!k.length||!m)return{};o=N.createElement("select");p=o.appendChild(N.createElement("option"));k=b.getElementsByTagName("input")[0];A={leadingWhitespace:b.firstChild.nodeType===3,tbody:!b.getElementsByTagName("tbody").length,
htmlSerialize:!!b.getElementsByTagName("link").length,style:/top/.test(m.getAttribute("style")),hrefNormalized:m.getAttribute("href")==="/a",opacity:/^0.55$/.test(m.style.opacity),cssFloat:!!m.style.cssFloat,checkOn:k.value==="on",optSelected:p.selected,getSetAttribute:b.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};k.checked=true;A.noCloneChecked=k.cloneNode(true).checked;
o.disabled=true;A.optDisabled=!p.disabled;try{delete b.test}catch(H){A.deleteExpando=false}!b.addEventListener&&b.attachEvent&&b.fireEvent&&(b.attachEvent("onclick",function(){A.noCloneEvent=false}),b.cloneNode(true).fireEvent("onclick"));k=N.createElement("input");k.value="t";k.setAttribute("type","radio");A.radioValue=k.value==="t";k.setAttribute("checked","checked");b.appendChild(k);m=N.createDocumentFragment();m.appendChild(b.firstChild);A.checkClone=m.cloneNode(true).cloneNode(true).lastChild.checked;
b.innerHTML="";b.style.width=b.style.paddingLeft="1px";o=N.getElementsByTagName("body")[0];m=N.createElement(o?"div":"body");p={visibility:"hidden",width:0,height:0,border:0,margin:0};o&&e.extend(p,{position:"absolute",left:-1000,top:-1000});for(E in p)m.style[E]=p[E];m.appendChild(b);g=o||g;g.insertBefore(m,g.firstChild);A.appendChecked=k.checked;A.boxModel=b.offsetWidth===2;"zoom"in b.style&&(b.style.display="inline",b.style.zoom=1,A.inlineBlockNeedsLayout=b.offsetWidth===2,b.style.display="",b.innerHTML=
"<div style='width:4px;'></div>",A.shrinkWrapBlocks=b.offsetWidth!==2);b.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";o=b.getElementsByTagName("td");k=o[0].offsetHeight===0;o[0].style.display="";o[1].style.display="none";A.reliableHiddenOffsets=k&&o[0].offsetHeight===0;b.innerHTML="";N.defaultView&&N.defaultView.getComputedStyle&&(u=N.createElement("div"),u.style.width="0",u.style.marginRight="0",b.appendChild(u),A.reliableMarginRight=(parseInt((N.defaultView.getComputedStyle(u,
null)||{marginRight:0}).marginRight,10)||0)===0);m.innerHTML="";g.removeChild(m);if(b.attachEvent)for(E in{submit:1,change:1,focusin:1}){u="on"+E;(k=u in b)||(b.setAttribute(u,"return;"),k=typeof b[u]=="function");A[E+"Bubbles"]=k}m=m=o=p=o=u=b=k=null;return A}();e.boxModel=e.support.boxModel;var Q=/^(?:\{.*\}|\[.*\])$/,Y=/([a-z])([A-Z])/g;e.extend({cache:{},uuid:0,expando:"jQuery"+(e.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
applet:true},hasData:function(b){b=b.nodeType?e.cache[b[e.expando]]:b[e.expando];return!!b&&!X(b)},data:function(b,g,k,m){if(e.acceptData(b)){var o=e.expando,p=typeof g=="string",u=b.nodeType,A=u?e.cache:b,E=u?b[e.expando]:b[e.expando]&&e.expando;if(!((!E||m&&E&&!A[E][o])&&p&&k===a)){E||(u?(b[e.expando]=E=++e.uuid):(E=e.expando));A[E]||(A[E]={},u||(A[E].toJSON=e.noop));if(typeof g=="object"||typeof g=="function")m?(A[E][o]=e.extend(A[E][o],g)):(A[E]=e.extend(A[E],g));b=A[E];m&&(b[o]||(b[o]={}),b=
b[o]);k!==a&&(b[e.camelCase(g)]=k);if(g==="events"&&!b[g])return b[o]&&b[o].events;return p?b[e.camelCase(g)]||b[g]:b}}},removeData:function(b,g,k){if(e.acceptData(b)){var m=e.expando,o=b.nodeType,p=o?e.cache:b,u=o?b[e.expando]:e.expando;if(p[u]){if(g){var A=k?p[u][m]:p[u];if(A){delete A[g];if(!X(A))return}}if(k){delete p[u][m];if(!X(p[u]))return}g=p[u][m];e.support.deleteExpando||p!=c?delete p[u]:(p[u]=null);g?(p[u]={},o||(p[u].toJSON=e.noop),p[u][m]=g):o&&(e.support.deleteExpando?delete b[e.expando]:
b.removeAttribute?b.removeAttribute(e.expando):(b[e.expando]=null))}}},_data:function(b,g,k){return e.data(b,g,k,true)},acceptData:function(b){if(b.nodeName){var g=e.noData[b.nodeName.toLowerCase()];if(g)return g!==true&&b.getAttribute("classid")===g}return true}});e.fn.extend({data:function(b,g){var k=null;if(typeof b=="undefined"){if(this.length){k=e.data(this[0]);if(this[0].nodeType===1)for(var m=this[0].attributes,o,p=0,u=m.length;p<u;p++){o=m[p].name;o.indexOf("data-")===0&&(o=e.camelCase(o.substring(5)),
ba(this[0],o,k[o]))}}return k}if(typeof b=="object")return this.each(function(){e.data(this,b)});var A=b.split(".");A[1]=A[1]?"."+A[1]:"";if(g===a){k=this.triggerHandler("getData"+A[1]+"!",[A[0]]);k===a&&this.length&&(k=e.data(this[0],b),k=ba(this[0],b,k));return k===a&&A[1]?this.data(A[0]):k}return this.each(function(){var E=e(this),H=[A[0],g];E.triggerHandler("setData"+A[1]+"!",H);e.data(this,b,g);E.triggerHandler("changeData"+A[1]+"!",H)})},removeData:function(b){return this.each(function(){e.removeData(this,
b)})}});e.extend({_mark:function(b,g){b&&(g=(g||"fx")+"mark",e.data(b,g,(e.data(b,g,a,true)||0)+1,true))},_unmark:function(b,g,k){b!==true&&(k=g,g=b,b=false);if(g){k=k||"fx";var m=k+"mark";(b=b?0:(e.data(g,m,a,true)||1)-1)?e.data(g,m,b,true):(e.removeData(g,m,true),S(g,k,"mark"))}},queue:function(b,g,k){if(b){g=(g||"fx")+"queue";var m=e.data(b,g,a,true);k&&(!m||e.isArray(k)?(m=e.data(b,g,e.makeArray(k),true)):m.push(k));return m||[]}},dequeue:function(b,g){g=g||"fx";var k=e.queue(b,g),m=k.shift();
m==="inprogress"&&(m=k.shift());m&&(g==="fx"&&k.unshift("inprogress"),m.call(b,function(){e.dequeue(b,g)}));k.length||(e.removeData(b,g+"queue",true),S(b,g,"queue"))}});e.fn.extend({queue:function(b,g){typeof b!="string"&&(g=b,b="fx");if(g===a)return e.queue(this[0],b);return this.each(function(){var k=e.queue(this,b,g);b==="fx"&&k[0]!=="inprogress"&&e.dequeue(this,b)})},dequeue:function(b){return this.each(function(){e.dequeue(this,b)})},delay:function(b,g){b=e.fx?e.fx.speeds[b]||b:b;g=g||"fx";return this.queue(g,
function(){var k=this;setTimeout(function(){e.dequeue(k,g)},b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,g){function k(){--u||m.resolveWith(o,[o])}typeof b!="string"&&(g=b,b=a);b=b||"fx";for(var m=e.Deferred(),o=this,p=o.length,u=1,A=b+"defer",E=b+"queue",H=b+"mark",O;p--;)if(O=e.data(o[p],A,a,true)||(e.data(o[p],E,a,true)||e.data(o[p],H,a,true))&&e.data(o[p],A,e._Deferred(),true)){u++;O.done(k)}k();return m.promise()}});var ha=/[\n\t\r]/g,xa=/\s+/,Ga=/\r/g,ia=/^(?:button|input)$/i,
va=/^(?:button|input|object|select|textarea)$/i,ra=/^a(?:rea)?$/i,ya=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,wa=/\:|^on/,la,Fa;e.fn.extend({attr:function(b,g){return e.access(this,b,g,true,e.attr)},removeAttr:function(b){return this.each(function(){e.removeAttr(this,b)})},prop:function(b,g){return e.access(this,b,g,true,e.prop)},removeProp:function(b){b=e.propFix[b]||b;return this.each(function(){try{this[b]=a;delete this[b]}catch(g){}})},
addClass:function(b){var g,k,m,o,p,u,A;if(e.isFunction(b))return this.each(function(E){e(this).addClass(b.call(this,E,this.className))});if(b&&typeof b=="string"){g=b.split(xa);k=0;for(m=this.length;k<m;k++){o=this[k];if(o.nodeType===1)if(!o.className&&g.length===1)o.className=b;else{p=" "+o.className+" ";u=0;for(A=g.length;u<A;u++)~p.indexOf(" "+g[u]+" ")||(p+=g[u]+" ");o.className=e.trim(p)}}}return this},removeClass:function(b){var g,k,m,o,p,u,A;if(e.isFunction(b))return this.each(function(E){e(this).removeClass(b.call(this,
E,this.className))});if(b&&typeof b=="string"||b===a){g=(b||"").split(xa);k=0;for(m=this.length;k<m;k++){o=this[k];if(o.nodeType===1&&o.className)if(b){p=(" "+o.className+" ").replace(ha," ");u=0;for(A=g.length;u<A;u++)p=p.replace(" "+g[u]+" "," ");o.className=e.trim(p)}else o.className=""}}return this},toggleClass:function(b,g){var k=typeof b,m=typeof g=="boolean";if(e.isFunction(b))return this.each(function(o){e(this).toggleClass(b.call(this,o,this.className,g),g)});return this.each(function(){if(k===
"string")for(var o,p=0,u=e(this),A=g,E=b.split(xa);o=E[p++];){A=m?A:!u.hasClass(o);u[A?"addClass":"removeClass"](o)}else if(k==="undefined"||k==="boolean"){this.className&&e._data(this,"__className__",this.className);this.className=this.className||b===false?"":e._data(this,"__className__")||""}})},hasClass:function(b){for(var g=0,k=this.length;g<k;g++)if((" "+this[g].className+" ").replace(ha," ").indexOf(" "+b+" ")>-1)return true;return false},val:function(b){var g,k,m=this[0];if(!arguments.length){if(m){if((g=
e.valHooks[m.nodeName.toLowerCase()]||e.valHooks[m.type])&&"get"in g&&(k=g.get(m,"value"))!==a)return k;k=m.value;return typeof k=="string"?k.replace(Ga,""):k==null?"":k}return a}var o=e.isFunction(b);return this.each(function(p){var u=e(this),A;if(this.nodeType===1){o?(A=b.call(this,p,u.val())):(A=b);A==null?(A=""):typeof A=="number"?(A+=""):e.isArray(A)&&(A=e.map(A,function(E){return E==null?"":E+""}));g=e.valHooks[this.nodeName.toLowerCase()]||e.valHooks[this.type];if(!g||!("set"in g)||g.set(this,
A,"value")===a)this.value=A}})}});e.extend({valHooks:{option:{get:function(b){var g=b.attributes.value;return!g||g.specified?b.value:b.text}},select:{get:function(b){var g,k=b.selectedIndex,m=[],o=b.options;b=b.type==="select-one";if(k<0)return null;for(var p=b?k:0,u=b?k+1:o.length;p<u;p++){g=o[p];if(g.selected&&(e.support.optDisabled?!g.disabled:g.getAttribute("disabled")===null)&&(!g.parentNode.disabled||!e.nodeName(g.parentNode,"optgroup"))){g=e(g).val();if(b)return g;m.push(g)}}if(b&&!m.length&&
o.length)return e(o[k]).val();return m},set:function(b,g){var k=e.makeArray(g);e(b).find("option").each(function(){this.selected=e.inArray(e(this).val(),k)>=0});k.length||(b.selectedIndex=-1);return k}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attrFix:{tabindex:"tabIndex"},attr:function(b,g,k,m){var o=b.nodeType;if(!b||o===3||o===8||o===2)return a;if(m&&g in e.attrFn)return e(b)[g](k);if(!("getAttribute"in b))return e.prop(b,g,k);var p,u;(m=o!==
1||!e.isXMLDoc(b))&&(g=e.attrFix[g]||g,u=e.attrHooks[g],u||(ya.test(g)?(u=Fa):la&&g!=="className"&&(e.nodeName(b,"form")||wa.test(g))&&(u=la)));if(k!==a){if(k===null){e.removeAttr(b,g);return a}if(u&&"set"in u&&m&&(p=u.set(b,k,g))!==a)return p;b.setAttribute(g,""+k);return k}if(u&&"get"in u&&m&&(p=u.get(b,g))!==null)return p;p=b.getAttribute(g);return p===null?a:p},removeAttr:function(b,g){var k;b.nodeType===1&&(g=e.attrFix[g]||g,e.support.getSetAttribute?b.removeAttribute(g):(e.attr(b,g,""),b.removeAttributeNode(b.getAttributeNode(g))),
ya.test(g)&&(k=e.propFix[g]||g)in b&&(b[k]=false))},attrHooks:{type:{set:function(b,g){if(ia.test(b.nodeName)&&b.parentNode)e.error("type property can't be changed");else if(!e.support.radioValue&&g==="radio"&&e.nodeName(b,"input")){var k=b.value;b.setAttribute("type",g);k&&(b.value=k);return g}}},tabIndex:{get:function(b){var g=b.getAttributeNode("tabIndex");return g&&g.specified?parseInt(g.value,10):va.test(b.nodeName)||ra.test(b.nodeName)&&b.href?0:a}},value:{get:function(b,g){if(la&&e.nodeName(b,
"button"))return la.get(b,g);return g in b?b.value:null},set:function(b,g,k){if(la&&e.nodeName(b,"button"))return la.set(b,g,k);b.value=g}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b,g,k){var m=b.nodeType;if(!b||m===3||m===8||m===2)return a;var o,p;(m!==1||
!e.isXMLDoc(b))&&(g=e.propFix[g]||g,p=e.propHooks[g]);return k!==a?p&&"set"in p&&(o=p.set(b,k,g))!==a?o:(b[g]=k):p&&"get"in p&&(o=p.get(b,g))!==a?o:b[g]},propHooks:{}});Fa={get:function(b,g){return e.prop(b,g)?g.toLowerCase():a},set:function(b,g,k){var m;g===false?e.removeAttr(b,k):(m=e.propFix[k]||k,m in b&&(b[m]=true),b.setAttribute(k,k.toLowerCase()));return k}};e.support.getSetAttribute||(e.attrFix=e.propFix,la=e.attrHooks.name=e.attrHooks.title=e.valHooks.button={get:function(b,g){var k;return(k=
b.getAttributeNode(g))&&k.nodeValue!==""?k.nodeValue:a},set:function(b,g,k){if(b=b.getAttributeNode(k))return b.nodeValue=g}},e.each(["width","height"],function(b,g){e.attrHooks[g]=e.extend(e.attrHooks[g],{set:function(k,m){if(m===""){k.setAttribute(g,"auto");return m}}})}));e.support.hrefNormalized||e.each(["href","src","width","height"],function(b,g){e.attrHooks[g]=e.extend(e.attrHooks[g],{get:function(k){k=k.getAttribute(g,2);return k===null?a:k}})});e.support.style||(e.attrHooks.style={get:function(b){return b.style.cssText.toLowerCase()||
a},set:function(b,g){return b.style.cssText=""+g}});e.support.optSelected||(e.propHooks.selected=e.extend(e.propHooks.selected,{get:function(){}}));e.support.checkOn||e.each(["radio","checkbox"],function(){e.valHooks[this]={get:function(b){return b.getAttribute("value")===null?"on":b.value}}});e.each(["radio","checkbox"],function(){e.valHooks[this]=e.extend(e.valHooks[this],{set:function(b,g){if(e.isArray(g))return b.checked=e.inArray(e(b).val(),g)>=0}})});var Da=/\.(.*)$/,Ua=/^(?:textarea|input|select)$/i,
Jb=/\./g,Kb=/ /g,Lb=/[^\w\s.|`]/g,Mb=function(b){return b.replace(Lb,"\\$&")};e.event={add:function(b,g,k,m){if(b.nodeType!==3&&b.nodeType!==8){if(k===false)k=oa;else if(!k)return;var o,p;k.handler&&(o=k,k=o.handler);k.guid||(k.guid=e.guid++);if(p=e._data(b)){var u=p.events,A=p.handle;u||(p.events=u={});A||(p.handle=A=function(ja){return typeof e!="undefined"&&(!ja||e.event.triggered!==ja.type)?e.event.handle.apply(A.elem,arguments):a});A.elem=b;g=g.split(" ");for(var E,H=0,O;E=g[H++];){p=o?e.extend({},
o):{handler:k,data:m};E.indexOf(".")>-1?(O=E.split("."),E=O.shift(),p.namespace=O.slice(0).sort().join(".")):(O=[],p.namespace="");p.type=E;p.guid||(p.guid=k.guid);var ea=u[E],na=e.event.special[E]||{};if(!ea){ea=u[E]=[];if(!na.setup||na.setup.call(b,m,O,A)===false)b.addEventListener?b.addEventListener(E,A,false):b.attachEvent&&b.attachEvent("on"+E,A)}na.add&&(na.add.call(b,p),p.handler.guid||(p.handler.guid=k.guid));ea.push(p);e.event.global[E]=true}b=null}}},global:{},remove:function(b,g,k,m){if(b.nodeType!==
3&&b.nodeType!==8){k===false&&(k=oa);var o,p,u=0,A,E,H,O,ea,na,ja=e.hasData(b)&&e._data(b),pa=ja&&ja.events;if(ja&&pa){g&&g.type&&(k=g.handler,g=g.type);if(!g||typeof g=="string"&&g.charAt(0)===".")for(o in pa)e.event.remove(b,o+(g||""));else{for(g=g.split(" ");o=g[u++];){O=o;A=o.indexOf(".")<0;E=[];A||(E=o.split("."),o=E.shift(),H=new RegExp("(^|\\.)"+e.map(E.slice(0).sort(),Mb).join("\\.(?:.*\\.)?")+"(\\.|$)"));if(ea=pa[o])if(k){O=e.event.special[o]||{};for(p=m||0;p<ea.length;p++){na=ea[p];if(k.guid===
na.guid){if(A||H.test(na.namespace)){m==null&&ea.splice(p--,1);O.remove&&O.remove.call(b,na)}if(m!=null)break}}if(ea.length===0||m!=null&&ea.length===1){(!O.teardown||O.teardown.call(b,E)===false)&&e.removeEvent(b,o,ja.handle);delete pa[o]}}else for(p=0;p<ea.length;p++){na=ea[p];if(A||H.test(na.namespace)){e.event.remove(b,O,na.handler,p);ea.splice(p--,1)}}}if(e.isEmptyObject(pa)){(g=ja.handle)&&(g.elem=null);delete ja.events;delete ja.handle;e.isEmptyObject(ja)&&e.removeData(b,a,true)}}}}},customEvent:{getData:true,
setData:true,changeData:true},trigger:function(b,g,k,m){var o=b.type||b,p=[],u;o.indexOf("!")>=0&&(o=o.slice(0,-1),u=true);o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort());if(k&&!e.event.customEvent[o]||e.event.global[o]){b=typeof b=="object"?b[e.expando]?b:new e.Event(o,b):new e.Event(o);b.type=o;b.exclusive=u;b.namespace=p.join(".");b.namespace_re=new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.)?")+"(\\.|$)");if(m||!k){b.preventDefault();b.stopPropagation()}if(k){if(!(k.nodeType===3||k.nodeType===
8)){b.result=a;b.target=k;g=g!=null?e.makeArray(g):[];g.unshift(b);p=k;m=o.indexOf(":")<0?"on"+o:"";do{u=e._data(p,"handle");b.currentTarget=p;u&&u.apply(p,g);m&&e.acceptData(p)&&p[m]&&p[m].apply(p,g)===false&&(b.result=false,b.preventDefault());p=p.parentNode||p.ownerDocument||p===b.target.ownerDocument&&c}while(p&&!b.isPropagationStopped());if(!b.isDefaultPrevented()){var A;p=e.event.special[o]||{};if((!p._default||p._default.call(k.ownerDocument,b)===false)&&(o!=="click"||!e.nodeName(k,"a"))&&
e.acceptData(k)){try{m&&k[o]&&(A=k[m],A&&(k[m]=null),e.event.triggered=o,k[o]())}catch(E){}A&&(k[m]=A);e.event.triggered=a}}return b.result}}else e.each(e.cache,function(){var H=this[e.expando];H&&H.events&&H.events[o]&&e.event.trigger(b,g,H.handle.elem)})}},handle:function(b){b=e.event.fix(b||c.event);var g=((e._data(this,"events")||{})[b.type]||[]).slice(0),k=!b.exclusive&&!b.namespace,m=Array.prototype.slice.call(arguments,0);m[0]=b;b.currentTarget=this;for(var o=0,p=g.length;o<p;o++){var u=g[o];
if(k||b.namespace_re.test(u.namespace)){b.handler=u.handler;b.data=u.data;b.handleObj=u;u=u.handler.apply(this,m);u!==a&&(b.result=u,u===false&&(b.preventDefault(),b.stopPropagation()));if(b.isImmediatePropagationStopped())break}}return b.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(b){if(b[e.expando])return b;var g=b;b=e.Event(g);for(var k=this.props.length,m;k;){m=this.props[--k];b[m]=g[m]}b.target||(b.target=b.srcElement||N);b.target.nodeType===3&&(b.target=b.target.parentNode);!b.relatedTarget&&b.fromElement&&(b.relatedTarget=b.fromElement===b.target?b.toElement:b.fromElement);if(b.pageX==null&&b.clientX!=null){k=b.target.ownerDocument||N;g=k.documentElement;k=k.body;b.pageX=b.clientX+(g&&g.scrollLeft||k&&k.scrollLeft||0)-(g&&g.clientLeft||k&&k.clientLeft||0);
b.pageY=b.clientY+(g&&g.scrollTop||k&&k.scrollTop||0)-(g&&g.clientTop||k&&k.clientTop||0)}b.which==null&&(b.charCode!=null||b.keyCode!=null)&&(b.which=b.charCode!=null?b.charCode:b.keyCode);!b.metaKey&&b.ctrlKey&&(b.metaKey=b.ctrlKey);!b.which&&b.button!==a&&(b.which=b.button&1?1:b.button&2?3:b.button&4?2:0);return b},guid:1E8,proxy:e.proxy,special:{ready:{setup:e.bindReady,teardown:e.noop},live:{add:function(b){e.event.add(this,aa(b.origType,b.selector),e.extend({},b,{handler:ca,guid:b.handler.guid}))},
remove:function(b){e.event.remove(this,aa(b.origType,b.selector),b)}},beforeunload:{setup:function(b,g,k){e.isWindow(this)&&(this.onbeforeunload=k)},teardown:function(b,g){this.onbeforeunload===g&&(this.onbeforeunload=null)}}}};e.removeEvent=N.removeEventListener?function(b,g,k){b.removeEventListener&&b.removeEventListener(g,k,false)}:function(b,g,k){b.detachEvent&&b.detachEvent("on"+g,k)};e.Event=function(b,g){if(!this.preventDefault)return new e.Event(b,g);b&&b.type?(this.originalEvent=b,this.type=
b.type,this.isDefaultPrevented=b.defaultPrevented||b.returnValue===false||b.getPreventDefault&&b.getPreventDefault()?da:oa):(this.type=b);g&&e.extend(this,g);this.timeStamp=e.now();this[e.expando]=true};e.Event.prototype={preventDefault:function(){this.isDefaultPrevented=da;var b=this.originalEvent;!b||(b.preventDefault?b.preventDefault():(b.returnValue=false))},stopPropagation:function(){this.isPropagationStopped=da;var b=this.originalEvent;!b||(b.stopPropagation&&b.stopPropagation(),b.cancelBubble=
true)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=da;this.stopPropagation()},isDefaultPrevented:oa,isPropagationStopped:oa,isImmediatePropagationStopped:oa};var mb=function(b){var g=b.relatedTarget,k=false,m=b.type;b.type=b.data;g!==this&&(g&&(k=e.contains(this,g)),k||(e.event.handle.apply(this,arguments),b.type=m))},nb=function(b){b.type=b.data;e.event.handle.apply(this,arguments)};e.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b,g){e.event.special[b]=
{setup:function(k){e.event.add(this,g,k&&k.selector?nb:mb,b)},teardown:function(k){e.event.remove(this,g,k&&k.selector?nb:mb)}}});e.support.submitBubbles||(e.event.special.submit={setup:function(){if(e.nodeName(this,"form"))return false;else{e.event.add(this,"click.specialSubmit",function(b){var g=b.target,k=g.type;(k==="submit"||k==="image")&&e(g).closest("form").length&&z("submit",this,arguments)});e.event.add(this,"keypress.specialSubmit",function(b){var g=b.target,k=g.type;(k==="text"||k==="password")&&
e(g).closest("form").length&&b.keyCode===13&&z("submit",this,arguments)})}},teardown:function(){e.event.remove(this,".specialSubmit")}});if(!e.support.changeBubbles){var Za,ob=function(b){var g=b.type,k=b.value;g==="radio"||g==="checkbox"?(k=b.checked):g==="select-multiple"?(k=b.selectedIndex>-1?e.map(b.options,function(m){return m.selected}).join("-"):""):e.nodeName(b,"select")&&(k=b.selectedIndex);return k},ab=function(b,g){var k=b.target,m,o;if(Ua.test(k.nodeName)&&!k.readOnly){m=e._data(k,"_change_data");
o=ob(k);(b.type!=="focusout"||k.type!=="radio")&&e._data(k,"_change_data",o);if(!(m===a||o===m))if(m!=null||o){b.type="change";b.liveFired=a;e.event.trigger(b,g,k)}}};e.event.special.change={filters:{focusout:ab,beforedeactivate:ab,click:function(b){var g=b.target,k=e.nodeName(g,"input")?g.type:"";(k==="radio"||k==="checkbox"||e.nodeName(g,"select"))&&ab.call(this,b)},keydown:function(b){var g=b.target,k=e.nodeName(g,"input")?g.type:"";(b.keyCode===13&&!e.nodeName(g,"textarea")||b.keyCode===32&&(k===
"checkbox"||k==="radio")||k==="select-multiple")&&ab.call(this,b)},beforeactivate:function(b){b=b.target;e._data(b,"_change_data",ob(b))}},setup:function(){if(this.type==="file")return false;for(var b in Za)e.event.add(this,b+".specialChange",Za[b]);return Ua.test(this.nodeName)},teardown:function(){e.event.remove(this,".specialChange");return Ua.test(this.nodeName)}};Za=e.event.special.change.filters;Za.focus=Za.beforeactivate}e.support.focusinBubbles||e.each({focus:"focusin",blur:"focusout"},function(b,
g){function k(o){var p=e.event.fix(o);p.type=g;p.originalEvent={};e.event.trigger(p,null,p.target);p.isDefaultPrevented()&&o.preventDefault()}var m=0;e.event.special[g]={setup:function(){m++===0&&N.addEventListener(b,k,true)},teardown:function(){--m===0&&N.removeEventListener(b,k,true)}}});e.each(["bind","one"],function(b,g){e.fn[g]=function(k,m,o){var p;if(typeof k=="object"){for(var u in k)this[g](u,m,k[u],o);return this}if(arguments.length===2||m===false){o=m;m=a}g==="one"?(p=function(E){e(this).unbind(E,
p);return o.apply(this,arguments)},p.guid=o.guid||e.guid++):(p=o);if(k==="unload"&&g!=="one")this.one(k,m,o);else{u=0;for(var A=this.length;u<A;u++)e.event.add(this[u],k,p,m)}return this}});e.fn.extend({unbind:function(b,g){if(typeof b=="object"&&!b.preventDefault)for(var k in b)this.unbind(k,b[k]);else{k=0;for(var m=this.length;k<m;k++)e.event.remove(this[k],b,g)}return this},delegate:function(b,g,k,m){return this.live(g,k,m,b)},undelegate:function(b,g,k){return arguments.length===0?this.unbind("live"):
this.die(g,null,k,b)},trigger:function(b,g){return this.each(function(){e.event.trigger(b,g,this)})},triggerHandler:function(b,g){if(this[0])return e.event.trigger(b,g,this[0],true)},toggle:function(b){var g=arguments,k=b.guid||e.guid++,m=0,o=function(p){var u=(e.data(this,"lastToggle"+b.guid)||0)%m;e.data(this,"lastToggle"+b.guid,u+1);p.preventDefault();return g[u].apply(this,arguments)||false};for(o.guid=k;m<g.length;)g[m++].guid=k;return this.click(o)},hover:function(b,g){return this.mouseenter(b).mouseleave(g||
b)}});var fb={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};e.each(["live","die"],function(b,g){e.fn[g]=function(k,m,o,p){var u=0,A,E,H=p||this.selector,O=p?this:e(this.context);if(typeof k=="object"&&!k.preventDefault){for(A in k)O[g](A,m,k[A],H);return this}if(g==="die"&&!k&&p&&p.charAt(0)==="."){O.unbind(p);return this}if(m===false||e.isFunction(m)){o=m||oa;m=a}for(k=(k||"").split(" ");(p=k[u++])!=null;){A=Da.exec(p);E="";A&&(E=A[0],p=p.replace(Da,""));if(p==="hover")k.push("mouseenter"+
E,"mouseleave"+E);else{A=p;fb[p]?(k.push(fb[p]+E),p+=E):(p=(fb[p]||p)+E);if(g==="live"){E=0;for(var ea=O.length;E<ea;E++)e.event.add(O[E],"live."+aa(p,H),{data:m,selector:H,handler:o,origType:p,origHandler:o,preType:A})}else O.unbind("live."+aa(p,H),o)}}return this}});e.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(b,g){e.fn[g]=function(k,
m){m==null&&(m=k,k=null);return arguments.length>0?this.bind(g,k,m):this.trigger(g)};e.attrFn&&(e.attrFn[g]=true)});(function(){function b(s,w,I,J,G,L){G=0;for(var T=J.length;G<T;G++){var V=J[G];if(V){var ka=false;for(V=V[s];V;){if(V.sizcache===I){ka=J[V.sizset];break}if(V.nodeType===1){L||(V.sizcache=I,V.sizset=G);if(typeof w!="string"){if(V===w){ka=true;break}}else if(H.filter(w,[V]).length>0){ka=V;break}}V=V[s]}J[G]=ka}}}function g(s,w,I,J,G,L){G=0;for(var T=J.length;G<T;G++){var V=J[G];if(V){var ka=
false;for(V=V[s];V;){if(V.sizcache===I){ka=J[V.sizset];break}V.nodeType===1&&!L&&(V.sizcache=I,V.sizset=G);if(V.nodeName.toLowerCase()===w){ka=V;break}V=V[s]}J[G]=ka}}}var k=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,m=0,o=Object.prototype.toString,p=false,u=true,A=/\\/g,E=/\W/;[0,0].sort(function(){u=false;return 0});var H=function(s,w,I,J){I=I||[];var G=w=w||N;if(w.nodeType!==1&&w.nodeType!==9)return[];if(!s||
typeof s!="string")return I;var L,T,V,ka,Aa,za,Ea=true,x=H.isXML(w),M=[],W=s;do{k.exec("");if(L=k.exec(W)){W=L[3];M.push(L[1]);if(L[2]){ka=L[3];break}}}while(L);if(M.length>1&&ea.exec(s))if(M.length===2&&O.relative[M[0]])T=Ka(M[0]+M[1],w);else for(T=O.relative[M[0]]?[w]:H(M.shift(),w);M.length;){s=M.shift();O.relative[s]&&(s+=M.shift());T=Ka(s,T)}else{!J&&M.length>1&&w.nodeType===9&&!x&&O.match.ID.test(M[0])&&!O.match.ID.test(M[M.length-1])&&(Aa=H.find(M.shift(),w,x),w=Aa.expr?H.filter(Aa.expr,Aa.set)[0]:
Aa.set[0]);if(w){Aa=J?{expr:M.pop(),set:pa(J)}:H.find(M.pop(),M.length===1&&(M[0]==="~"||M[0]==="+")&&w.parentNode?w.parentNode:w,x);T=Aa.expr?H.filter(Aa.expr,Aa.set):Aa.set;for(M.length>0?(V=pa(T)):(Ea=false);M.length;){L=za=M.pop();O.relative[za]?(L=M.pop()):(za="");L==null&&(L=w);O.relative[za](V,L,x)}}else V=[]}V||(V=T);V||H.error(za||s);if(o.call(V)==="[object Array]")if(Ea)if(w&&w.nodeType===1)for(s=0;V[s]!=null;s++)V[s]&&(V[s]===true||V[s].nodeType===1&&H.contains(w,V[s]))&&I.push(T[s]);else for(s=
0;V[s]!=null;s++)V[s]&&V[s].nodeType===1&&I.push(T[s]);else I.push.apply(I,V);else pa(V,I);ka&&(H(ka,G,I,J),H.uniqueSort(I));return I};H.uniqueSort=function(s){if(Ba){p=u;s.sort(Ba);if(p)for(var w=1;w<s.length;w++)s[w]===s[w-1]&&s.splice(w--,1)}return s};H.matches=function(s,w){return H(s,null,null,w)};H.matchesSelector=function(s,w){return H(w,null,null,[s]).length>0};H.find=function(s,w,I){var J;if(!s)return[];for(var G=0,L=O.order.length;G<L;G++){var T,V=O.order[G];if(T=O.leftMatch[V].exec(s)){var ka=
T[1];T.splice(1,1);if(ka.substr(ka.length-1)!=="\\"){T[1]=(T[1]||"").replace(A,"");J=O.find[V](T,w,I);if(J!=null){s=s.replace(O.match[V],"");break}}}}J||(J=typeof w.getElementsByTagName!="undefined"?w.getElementsByTagName("*"):[]);return{set:J,expr:s}};H.filter=function(s,w,I,J){for(var G,L,T=s,V=[],ka=w,Aa=w&&w[0]&&H.isXML(w[0]);s&&w.length;){for(var za in O.filter)if((G=O.leftMatch[za].exec(s))!=null&&G[2]){var Ea,x,M=O.filter[za];x=G[1];L=false;G.splice(1,1);if(x.substr(x.length-1)!=="\\"){ka===
V&&(V=[]);if(O.preFilter[za])if(G=O.preFilter[za](G,ka,I,V,J,Aa)){if(G===true)continue}else L=Ea=true;if(G)for(var W=0;(x=ka[W])!=null;W++)if(x){Ea=M(x,G,W,ka);var U=J^!!Ea;I&&Ea!=null?U?(L=true):(ka[W]=false):U&&(V.push(x),L=true)}if(Ea!==a){I||(ka=V);s=s.replace(O.match[za],"");if(!L)return[];break}}}if(s===T)if(L==null)H.error(s);else break;T=s}return ka};H.error=function(s){throw"Syntax error, unrecognized expression: "+s;};var O=H.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},
leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(s){return s.getAttribute("href")},type:function(s){return s.getAttribute("type")}},relative:{"+":function(s,w){var I=typeof w=="string",J=I&&!E.test(w);I=I&&!J;J&&(w=w.toLowerCase());J=0;for(var G=s.length,L;J<G;J++)if(L=s[J]){for(;(L=L.previousSibling)&&L.nodeType!==1;);s[J]=I||L&&L.nodeName.toLowerCase()===w?L||false:L===w}I&&H.filter(w,s,true)},">":function(s,w){var I,J=typeof w=="string",G=0,L=s.length;if(J&&
!E.test(w))for(w=w.toLowerCase();G<L;G++){if(I=s[G]){I=I.parentNode;s[G]=I.nodeName.toLowerCase()===w?I:false}}else{for(;G<L;G++)(I=s[G])&&(s[G]=J?I.parentNode:I.parentNode===w);J&&H.filter(w,s,true)}},"":function(s,w,I){var J,G=m++,L=b;typeof w=="string"&&!E.test(w)&&(w=w.toLowerCase(),J=w,L=g);L("parentNode",w,G,s,J,I)},"~":function(s,w,I){var J,G=m++,L=b;typeof w=="string"&&!E.test(w)&&(w=w.toLowerCase(),J=w,L=g);L("previousSibling",w,G,s,J,I)}},find:{ID:function(s,w,I){if(typeof w.getElementById!=
"undefined"&&!I)return(s=w.getElementById(s[1]))&&s.parentNode?[s]:[]},NAME:function(s,w){if(typeof w.getElementsByName!="undefined"){for(var I=[],J=w.getElementsByName(s[1]),G=0,L=J.length;G<L;G++)J[G].getAttribute("name")===s[1]&&I.push(J[G]);return I.length===0?null:I}},TAG:function(s,w){if(typeof w.getElementsByTagName!="undefined")return w.getElementsByTagName(s[1])}},preFilter:{CLASS:function(s,w,I,J,G,L){s=" "+s[1].replace(A,"")+" ";if(L)return s;L=0;for(var T;(T=w[L])!=null;L++)T&&(G^(T.className&&
(" "+T.className+" ").replace(/[\t\n\r]/g," ").indexOf(s)>=0)?I||J.push(T):I&&(w[L]=false));return false},ID:function(s){return s[1].replace(A,"")},TAG:function(s){return s[1].replace(A,"").toLowerCase()},CHILD:function(s){if(s[1]==="nth"){s[2]||H.error(s[0]);s[2]=s[2].replace(/^\+|\s*/g,"");var w=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(s[2]==="even"&&"2n"||s[2]==="odd"&&"2n+1"||!/\D/.test(s[2])&&"0n+"+s[2]||s[2]);s[2]=w[1]+(w[2]||1)-0;s[3]=w[3]-0}else s[2]&&H.error(s[0]);s[0]=m++;return s},ATTR:function(s,
w,I,J,G,L){w=s[1]=s[1].replace(A,"");!L&&O.attrMap[w]&&(s[1]=O.attrMap[w]);s[4]=(s[4]||s[5]||"").replace(A,"");s[2]==="~="&&(s[4]=" "+s[4]+" ");return s},PSEUDO:function(s,w,I,J,G){if(s[1]==="not")if((k.exec(s[3])||"").length>1||/^\w/.test(s[3]))s[3]=H(s[3],null,null,w);else{s=H.filter(s[3],w,I,true^G);I||J.push.apply(J,s);return false}else if(O.match.POS.test(s[0])||O.match.CHILD.test(s[0]))return true;return s},POS:function(s){s.unshift(true);return s}},filters:{enabled:function(s){return s.disabled===
false&&s.type!=="hidden"},disabled:function(s){return s.disabled===true},checked:function(s){return s.checked===true},selected:function(s){return s.selected===true},parent:function(s){return!!s.firstChild},empty:function(s){return!s.firstChild},has:function(s,w,I){return!!H(I[3],s).length},header:function(s){return/h\d/i.test(s.nodeName)},text:function(s){var w=s.getAttribute("type"),I=s.type;return s.nodeName.toLowerCase()==="input"&&"text"===I&&(w===I||w===null)},radio:function(s){return s.nodeName.toLowerCase()===
"input"&&"radio"===s.type},checkbox:function(s){return s.nodeName.toLowerCase()==="input"&&"checkbox"===s.type},file:function(s){return s.nodeName.toLowerCase()==="input"&&"file"===s.type},password:function(s){return s.nodeName.toLowerCase()==="input"&&"password"===s.type},submit:function(s){var w=s.nodeName.toLowerCase();return(w==="input"||w==="button")&&"submit"===s.type},image:function(s){return s.nodeName.toLowerCase()==="input"&&"image"===s.type},reset:function(s){var w=s.nodeName.toLowerCase();
return(w==="input"||w==="button")&&"reset"===s.type},button:function(s){var w=s.nodeName.toLowerCase();return w==="input"&&"button"===s.type||w==="button"},input:function(s){return/input|select|textarea|button/i.test(s.nodeName)},focus:function(s){return s===s.ownerDocument.activeElement}},setFilters:{first:function(s,w){return w===0},last:function(s,w,I,J){return w===J.length-1},even:function(s,w){return w%2===0},odd:function(s,w){return w%2===1},lt:function(s,w,I){return w<I[3]-0},gt:function(s,
w,I){return w>I[3]-0},nth:function(s,w,I){return I[3]-0===w},eq:function(s,w,I){return I[3]-0===w}},filter:{PSEUDO:function(s,w,I,J){var G=w[1],L=O.filters[G];if(L)return L(s,I,w,J);if(G==="contains")return(s.textContent||s.innerText||H.getText([s])||"").indexOf(w[3])>=0;if(G==="not"){w=w[3];I=0;for(J=w.length;I<J;I++)if(w[I]===s)return false;return true}H.error(G)},CHILD:function(s,w){var I=w[1],J=s;switch(I){case "only":case "first":for(;J=J.previousSibling;)if(J.nodeType===1)return false;if(I===
"first")return true;J=s;case "last":for(;J=J.nextSibling;)if(J.nodeType===1)return false;return true;case "nth":I=w[2];var G=w[3];if(I===1&&G===0)return true;var L=w[0],T=s.parentNode;if(T&&(T.sizcache!==L||!s.nodeIndex)){var V=0;for(J=T.firstChild;J;J=J.nextSibling)J.nodeType===1&&(J.nodeIndex=++V);T.sizcache=L}J=s.nodeIndex-G;return I===0?J===0:J%I===0&&J/I>=0}},ID:function(s,w){return s.nodeType===1&&s.getAttribute("id")===w},TAG:function(s,w){return w==="*"&&s.nodeType===1||s.nodeName.toLowerCase()===
w},CLASS:function(s,w){return(" "+(s.className||s.getAttribute("class"))+" ").indexOf(w)>-1},ATTR:function(s,w){var I=w[1];I=O.attrHandle[I]?O.attrHandle[I](s):s[I]!=null?s[I]:s.getAttribute(I);var J=I+"",G=w[2],L=w[4];return I==null?G==="!=":G==="="?J===L:G==="*="?J.indexOf(L)>=0:G==="~="?(" "+J+" ").indexOf(L)>=0:L?G==="!="?J!==L:G==="^="?J.indexOf(L)===0:G==="$="?J.substr(J.length-L.length)===L:G==="|="?J===L||J.substr(0,L.length+1)===L+"-":false:J&&I!==false},POS:function(s,w,I,J){var G=O.setFilters[w[2]];
if(G)return G(s,I,w,J)}}},ea=O.match.POS,na=function(s,w){return"\\"+(w-0+1)};for(var ja in O.match){O.match[ja]=new RegExp(O.match[ja].source+/(?![^\[]*\])(?![^\(]*\))/.source);O.leftMatch[ja]=new RegExp(/(^(?:.|\r|\n)*?)/.source+O.match[ja].source.replace(/\\(\d+)/g,na))}var pa=function(s,w){s=Array.prototype.slice.call(s,0);if(w){w.push.apply(w,s);return w}return s};try{Array.prototype.slice.call(N.documentElement.childNodes,0)}catch(Ha){pa=function(s,w){var I=0,J=w||[];if(o.call(s)==="[object Array]")Array.prototype.push.apply(J,
s);else if(typeof s.length=="number")for(var G=s.length;I<G;I++)J.push(s[I]);else for(;s[I];I++)J.push(s[I]);return J}}var Ba,Ca;N.documentElement.compareDocumentPosition?(Ba=function(s,w){if(s===w){p=true;return 0}if(!s.compareDocumentPosition||!w.compareDocumentPosition)return s.compareDocumentPosition?-1:1;return s.compareDocumentPosition(w)&4?-1:1}):(Ba=function(s,w){if(s===w){p=true;return 0}if(s.sourceIndex&&w.sourceIndex)return s.sourceIndex-w.sourceIndex;var I,J,G=[],L=[];I=s.parentNode;J=
w.parentNode;var T=I;if(I===J)return Ca(s,w);if(!I)return-1;if(!J)return 1;for(;T;){G.unshift(T);T=T.parentNode}for(T=J;T;){L.unshift(T);T=T.parentNode}I=G.length;J=L.length;for(T=0;T<I&&T<J;T++)if(G[T]!==L[T])return Ca(G[T],L[T]);return T===I?Ca(s,L[T],-1):Ca(G[T],w,1)},Ca=function(s,w,I){if(s===w)return I;for(s=s.nextSibling;s;){if(s===w)return-1;s=s.nextSibling}return 1});H.getText=function(s){for(var w="",I,J=0;s[J];J++){I=s[J];I.nodeType===3||I.nodeType===4?(w+=I.nodeValue):I.nodeType!==8&&(w+=
H.getText(I.childNodes))}return w};(function(){var s=N.createElement("div"),w="script"+(new Date).getTime(),I=N.documentElement;s.innerHTML="<a name='"+w+"'/>";I.insertBefore(s,I.firstChild);N.getElementById(w)&&(O.find.ID=function(J,G,L){if(typeof G.getElementById!="undefined"&&!L)return(G=G.getElementById(J[1]))?G.id===J[1]||typeof G.getAttributeNode!="undefined"&&G.getAttributeNode("id").nodeValue===J[1]?[G]:a:[]},O.filter.ID=function(J,G){var L=typeof J.getAttributeNode!="undefined"&&J.getAttributeNode("id");
return J.nodeType===1&&L&&L.nodeValue===G});I.removeChild(s);I=s=null})();(function(){var s=N.createElement("div");s.appendChild(N.createComment(""));s.getElementsByTagName("*").length>0&&(O.find.TAG=function(w,I){var J=I.getElementsByTagName(w[1]);if(w[1]==="*"){for(var G=[],L=0;J[L];L++)J[L].nodeType===1&&G.push(J[L]);J=G}return J});s.innerHTML="<a href='#'></a>";s.firstChild&&typeof s.firstChild.getAttribute!="undefined"&&s.firstChild.getAttribute("href")!=="#"&&(O.attrHandle.href=function(w){return w.getAttribute("href",
2)});s=null})();N.querySelectorAll&&function(){var s=H,w=N.createElement("div");w.innerHTML="<p class='TEST'></p>";if(!w.querySelectorAll||w.querySelectorAll(".TEST").length!==0){H=function(J,G,L,T){G=G||N;if(!T&&!H.isXML(G)){var V=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(J);if(V&&(G.nodeType===1||G.nodeType===9)){if(V[1])return pa(G.getElementsByTagName(J),L);if(V[2]&&O.find.CLASS&&G.getElementsByClassName)return pa(G.getElementsByClassName(V[2]),L)}if(G.nodeType===9){if(J==="body"&&G.body)return pa([G.body],
L);if(V&&V[3]){var ka=G.getElementById(V[3]);if(!ka||!ka.parentNode)return pa([],L);if(ka.id===V[3])return pa([ka],L)}try{return pa(G.querySelectorAll(J),L)}catch(Aa){}}else if(G.nodeType===1&&G.nodeName.toLowerCase()!=="object"){V=G;var za=(ka=G.getAttribute("id"))||"__sizzle__",Ea=G.parentNode,x=/^\s*[+~]/.test(J);ka?(za=za.replace(/'/g,"\\$&")):G.setAttribute("id",za);x&&Ea&&(G=G.parentNode);try{if(!x||Ea)return pa(G.querySelectorAll("[id='"+za+"'] "+J),L)}catch(M){}finally{ka||V.removeAttribute("id")}}}return s(J,
G,L,T)};for(var I in s)H[I]=s[I];w=null}}();(function(){var s=N.documentElement,w=s.matchesSelector||s.mozMatchesSelector||s.webkitMatchesSelector||s.msMatchesSelector;if(w){var I=!w.call(N.createElement("div"),"div"),J=false;try{w.call(N.documentElement,"[test!='']:sizzle")}catch(G){J=true}H.matchesSelector=function(L,T){T=T.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!H.isXML(L))try{if(J||!O.match.PSEUDO.test(T)&&!/!=/.test(T)){var V=w.call(L,T);if(V||!I||L.document&&L.document.nodeType!==11)return V}}catch(ka){}return H(T,
null,null,[L]).length>0}}})();(function(){var s=N.createElement("div");s.innerHTML="<div class='test e'></div><div class='test'></div>";if(s.getElementsByClassName&&s.getElementsByClassName("e").length!==0){s.lastChild.className="e";if(s.getElementsByClassName("e").length!==1){O.order.splice(1,0,"CLASS");O.find.CLASS=function(w,I,J){if(typeof I.getElementsByClassName!="undefined"&&!J)return I.getElementsByClassName(w[1])};s=null}}})();N.documentElement.contains?(H.contains=function(s,w){return s!==
w&&(s.contains?s.contains(w):true)}):N.documentElement.compareDocumentPosition?(H.contains=function(s,w){return!!(s.compareDocumentPosition(w)&16)}):(H.contains=function(){return false});H.isXML=function(s){return(s=(s?s.ownerDocument||s:0).documentElement)?s.nodeName!=="HTML":false};var Ka=function(s,w){for(var I,J=[],G="",L=w.nodeType?[w]:w;I=O.match.PSEUDO.exec(s);){G+=I[0];s=s.replace(O.match.PSEUDO,"")}s=O.relative[s]?s+"*":s;I=0;for(var T=L.length;I<T;I++)H(s,L[I],J);return H.filter(G,J)};e.find=
H;e.expr=H.selectors;e.expr[":"]=e.expr.filters;e.unique=H.uniqueSort;e.text=H.getText;e.isXMLDoc=H.isXML;e.contains=H.contains})();var Nb=/Until$/,Ob=/^(?:parents|prevUntil|prevAll)/,Pb=/,/,Ib=/^.[^:#\[\.,]*$/,Qb=Array.prototype.slice,pb=e.expr.match.POS,Rb={children:true,contents:true,next:true,prev:true};e.fn.extend({find:function(b){var g=this,k,m;if(typeof b!="string")return e(b).filter(function(){k=0;for(m=g.length;k<m;k++)if(e.contains(g[k],this))return true});var o=this.pushStack("","find",
b),p,u,A;k=0;for(m=this.length;k<m;k++){p=o.length;e.find(b,this[k],o);if(k>0)for(u=p;u<o.length;u++)for(A=0;A<p;A++)if(o[A]===o[u]){o.splice(u--,1);break}}return o},has:function(b){var g=e(b);return this.filter(function(){for(var k=0,m=g.length;k<m;k++)if(e.contains(this,g[k]))return true})},not:function(b){return this.pushStack(P(this,b,false),"not",b)},filter:function(b){return this.pushStack(P(this,b,true),"filter",b)},is:function(b){return!!b&&(typeof b=="string"?e.filter(b,this).length>0:this.filter(b).length>
0)},closest:function(b,g){var k=[],m,o,p=this[0];if(e.isArray(b)){var u,A={},E=1;if(p&&b.length){m=0;for(o=b.length;m<o;m++){u=b[m];A[u]||(A[u]=pb.test(u)?e(u,g||this.context):u)}for(;p&&p.ownerDocument&&p!==g;){for(u in A){m=A[u];(m.jquery?m.index(p)>-1:e(p).is(m))&&k.push({selector:u,elem:p,level:E})}p=p.parentNode;E++}}return k}u=pb.test(b)||typeof b!="string"?e(b,g||this.context):0;m=0;for(o=this.length;m<o;m++)for(p=this[m];p;){if(u?u.index(p)>-1:e.find.matchesSelector(p,b)){k.push(p);break}p=
p.parentNode;if(!p||!p.ownerDocument||p===g||p.nodeType===11)break}k=k.length>1?e.unique(k):k;return this.pushStack(k,"closest",b)},index:function(b){if(!b||typeof b=="string")return e.inArray(this[0],b?e(b):this.parent().children());return e.inArray(b.jquery?b[0]:b,this)},add:function(b,g){var k=typeof b=="string"?e(b,g):e.makeArray(b&&b.nodeType?[b]:b),m=e.merge(this.get(),k);return this.pushStack(!k[0]||!k[0].parentNode||k[0].parentNode.nodeType===11||!m[0]||!m[0].parentNode||m[0].parentNode.nodeType===
11?m:e.unique(m))},andSelf:function(){return this.add(this.prevObject)}});e.each({parent:function(b){return(b=b.parentNode)&&b.nodeType!==11?b:null},parents:function(b){return e.dir(b,"parentNode")},parentsUntil:function(b,g,k){return e.dir(b,"parentNode",k)},next:function(b){return e.nth(b,2,"nextSibling")},prev:function(b){return e.nth(b,2,"previousSibling")},nextAll:function(b){return e.dir(b,"nextSibling")},prevAll:function(b){return e.dir(b,"previousSibling")},nextUntil:function(b,g,k){return e.dir(b,
"nextSibling",k)},prevUntil:function(b,g,k){return e.dir(b,"previousSibling",k)},siblings:function(b){return e.sibling(b.parentNode.firstChild,b)},children:function(b){return e.sibling(b.firstChild)},contents:function(b){return e.nodeName(b,"iframe")?b.contentDocument||b.contentWindow.document:e.makeArray(b.childNodes)}},function(b,g){e.fn[b]=function(k,m){var o=e.map(this,g,k),p=Qb.call(arguments);Nb.test(b)||(m=k);m&&typeof m=="string"&&(o=e.filter(m,o));o=this.length>1&&!Rb[b]?e.unique(o):o;(this.length>
1||Pb.test(m))&&Ob.test(b)&&(o=o.reverse());return this.pushStack(o,b,p.join(","))}});e.extend({filter:function(b,g,k){k&&(b=":not("+b+")");return g.length===1?e.find.matchesSelector(g[0],b)?[g[0]]:[]:e.find.matches(b,g)},dir:function(b,g,k){var m=[];for(b=b[g];b&&b.nodeType!==9&&(k===a||b.nodeType!==1||!e(b).is(k));){b.nodeType===1&&m.push(b);b=b[g]}return m},nth:function(b,g,k){for(var m=0;b;b=b[k])if(b.nodeType===1&&++m===(g||1))break;return b},sibling:function(b,g){for(var k=[];b;b=b.nextSibling)b.nodeType===
1&&b!==g&&k.push(b);return k}});var Sb=/ jQuery\d+="(?:\d+|null)"/g,gb=/^\s+/,qb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,rb=/<([\w:]+)/,Tb=/<tbody/i,Ub=/<|&#?\w+;/,sb=/<(?:script|object|embed|option|style)/i,tb=/checked\s*(?:[^=]|=\s*.checked.)/i,Vb=/\/(java|ecma)script/i,Hb=/^\s*<!(?:\[CDATA\[|\-\-)/,Ia={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};Ia.optgroup=Ia.option;Ia.tbody=Ia.tfoot=Ia.colgroup=Ia.caption=Ia.thead;Ia.th=Ia.td;e.support.htmlSerialize||(Ia._default=[1,"div<div>","</div>"]);e.fn.extend({text:function(b){if(e.isFunction(b))return this.each(function(g){var k=e(this);k.text(b.call(this,g,k.text()))});if(typeof b!="object"&&b!==a)return this.empty().append((this[0]&&
this[0].ownerDocument||N).createTextNode(b));return e.text(this)},wrapAll:function(b){if(e.isFunction(b))return this.each(function(k){e(this).wrapAll(b.call(this,k))});if(this[0]){var g=e(b,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&g.insertBefore(this[0]);g.map(function(){for(var k=this;k.firstChild&&k.firstChild.nodeType===1;)k=k.firstChild;return k}).append(this)}return this},wrapInner:function(b){if(e.isFunction(b))return this.each(function(g){e(this).wrapInner(b.call(this,g))});
return this.each(function(){var g=e(this),k=g.contents();k.length?k.wrapAll(b):g.append(b)})},wrap:function(b){return this.each(function(){e(this).wrapAll(b)})},unwrap:function(){return this.parent().each(function(){e.nodeName(this,"body")||e(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(b){this.nodeType===1&&this.appendChild(b)})},prepend:function(){return this.domManip(arguments,true,function(b){this.nodeType===1&&this.insertBefore(b,
this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(g){this.parentNode.insertBefore(g,this)});if(arguments.length){var b=e(arguments[0]);b.push.apply(b,this.toArray());return this.pushStack(b,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(g){this.parentNode.insertBefore(g,this.nextSibling)});if(arguments.length){var b=this.pushStack(this,"after",arguments);b.push.apply(b,
e(arguments[0]).toArray());return b}},remove:function(b,g){for(var k=0,m;(m=this[k])!=null;k++)if(!b||e.filter(b,[m]).length){!g&&m.nodeType===1&&(e.cleanData(m.getElementsByTagName("*")),e.cleanData([m]));m.parentNode&&m.parentNode.removeChild(m)}return this},empty:function(){for(var b=0,g;(g=this[b])!=null;b++)for(g.nodeType===1&&e.cleanData(g.getElementsByTagName("*"));g.firstChild;)g.removeChild(g.firstChild);return this},clone:function(b,g){b=b==null?false:b;g=g==null?b:g;return this.map(function(){return e.clone(this,
b,g)})},html:function(b){if(b===a)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Sb,""):null;if(typeof b=="string"&&!sb.test(b)&&(e.support.leadingWhitespace||!gb.test(b))&&!Ia[(rb.exec(b)||["",""])[1].toLowerCase()]){b=b.replace(qb,"<$1></$2>");try{for(var g=0,k=this.length;g<k;g++)this[g].nodeType===1&&(e.cleanData(this[g].getElementsByTagName("*")),this[g].innerHTML=b)}catch(m){this.empty().append(b)}}else e.isFunction(b)?this.each(function(o){var p=e(this);p.html(b.call(this,o,
p.html()))}):this.empty().append(b);return this},replaceWith:function(b){if(this[0]&&this[0].parentNode){if(e.isFunction(b))return this.each(function(g){var k=e(this),m=k.html();k.replaceWith(b.call(this,g,m))});typeof b!="string"&&(b=e(b).detach());return this.each(function(){var g=this.nextSibling,k=this.parentNode;e(this).remove();g?e(g).before(b):e(k).append(b)})}return this.length?this.pushStack(e(e.isFunction(b)?b():b),"replaceWith",b):this},detach:function(b){return this.remove(b,true)},domManip:function(b,
g,k){var m,o,p,u=b[0],A=[];if(!e.support.checkClone&&arguments.length===3&&typeof u=="string"&&tb.test(u))return this.each(function(){e(this).domManip(b,g,k,true)});if(e.isFunction(u))return this.each(function(O){var ea=e(this);b[0]=u.call(this,O,g?ea.html():a);ea.domManip(b,g,k)});if(this[0]){p=u&&u.parentNode;e.support.parentNode&&p&&p.nodeType===11&&p.childNodes.length===this.length?(m={fragment:p}):(m=e.buildFragment(b,this,A));p=m.fragment;p.childNodes.length===1?(o=p=p.firstChild):(o=p.firstChild);
if(o){g=g&&e.nodeName(o,"tr");o=0;for(var E=this.length,H=E-1;o<E;o++)k.call(g?e.nodeName(this[o],"table")?this[o].getElementsByTagName("tbody")[0]||this[o].appendChild(this[o].ownerDocument.createElement("tbody")):this[o]:this[o],m.cacheable||E>1&&o<H?e.clone(p,true,true):p)}A.length&&e.each(A,Z)}return this}});e.buildFragment=function(b,g,k){var m,o,p,u;g&&g[0]&&(u=g[0].ownerDocument||g[0]);u.createDocumentFragment||(u=N);b.length===1&&typeof b[0]=="string"&&b[0].length<512&&u===N&&b[0].charAt(0)===
"<"&&!sb.test(b[0])&&(e.support.checkClone||!tb.test(b[0]))&&(o=true,p=e.fragments[b[0]],p&&p!==1&&(m=p));m||(m=u.createDocumentFragment(),e.clean(b,u,m,k));o&&(e.fragments[b[0]]=p?m:1);return{fragment:m,cacheable:o}};e.fragments={};e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,g){e.fn[b]=function(k){var m=[];k=e(k);var o=this.length===1&&this[0].parentNode;if(o&&o.nodeType===11&&o.childNodes.length===1&&k.length===1){k[g](this[0]);
return this}o=0;for(var p=k.length;o<p;o++){var u=(o>0?this.clone(true):this).get();e(k[o])[g](u);m=m.concat(u)}return this.pushStack(m,b,k.selector)}});e.extend({clone:function(b,g,k){var m=b.cloneNode(true),o,p,u;if((!e.support.noCloneEvent||!e.support.noCloneChecked)&&(b.nodeType===1||b.nodeType===11)&&!e.isXMLDoc(b)){t(b,m);o=r(b);p=r(m);for(u=0;o[u];++u)t(o[u],p[u])}if(g){C(b,m);if(k){o=r(b);p=r(m);for(u=0;o[u];++u)C(o[u],p[u])}}return m},clean:function(b,g,k,m){g=g||N;typeof g.createElement==
"undefined"&&(g=g.ownerDocument||g[0]&&g[0].ownerDocument||N);for(var o=[],p,u=0,A;(A=b[u])!=null;u++){typeof A=="number"&&(A+="");if(A){if(typeof A=="string")if(Ub.test(A)){A=A.replace(qb,"<$1></$2>");p=(rb.exec(A)||["",""])[1].toLowerCase();var E=Ia[p]||Ia._default,H=E[0],O=g.createElement("div");for(O.innerHTML=E[1]+A+E[2];H--;)O=O.lastChild;if(!e.support.tbody){H=Tb.test(A);E=p==="table"&&!H?O.firstChild&&O.firstChild.childNodes:E[1]==="<table>"&&!H?O.childNodes:[];for(p=E.length-1;p>=0;--p)e.nodeName(E[p],
"tbody")&&!E[p].childNodes.length&&E[p].parentNode.removeChild(E[p])}!e.support.leadingWhitespace&&gb.test(A)&&O.insertBefore(g.createTextNode(gb.exec(A)[0]),O.firstChild);A=O.childNodes}else A=g.createTextNode(A);var ea;if(!e.support.appendChecked)if(A[0]&&typeof(ea=A.length)=="number")for(p=0;p<ea;p++)fa(A[p]);else fa(A);A.nodeType?o.push(A):(o=e.merge(o,A))}}if(k){b=function(na){return!na.type||Vb.test(na.type)};for(u=0;o[u];u++)if(m&&e.nodeName(o[u],"script")&&(!o[u].type||o[u].type.toLowerCase()===
"text/javascript"))m.push(o[u].parentNode?o[u].parentNode.removeChild(o[u]):o[u]);else{if(o[u].nodeType===1){g=e.grep(o[u].getElementsByTagName("script"),b);o.splice.apply(o,[u+1,0].concat(g))}k.appendChild(o[u])}}return o},cleanData:function(b){for(var g,k,m=e.cache,o=e.expando,p=e.event.special,u=e.support.deleteExpando,A=0,E;(E=b[A])!=null;A++)if(!(E.nodeName&&e.noData[E.nodeName.toLowerCase()]))if(k=E[e.expando]){if((g=m[k]&&m[k][o])&&g.events){for(var H in g.events)p[H]?e.event.remove(E,H):e.removeEvent(E,
H,g.handle);g.handle&&(g.handle.elem=null)}u?delete E[e.expando]:E.removeAttribute&&E.removeAttribute(e.expando);delete m[k]}}});var ub=/alpha\([^)]*\)/i,Wb=/opacity=([^)]*)/,Xb=/([A-Z]|^ms)/g,vb=/^-?\d+(?:px)?$/i,Yb=/^-?\d/,Zb=/^[+\-]=/,$b=/[^+\-\.\de]+/g,ac={position:"absolute",visibility:"hidden",display:"block"},Fb=["Left","Right"],Gb=["Top","Bottom"],Ta,wb,xb;e.fn.css=function(b,g){if(arguments.length===2&&g===a)return this;return e.access(this,b,g,true,function(k,m,o){return o!==a?e.style(k,
m,o):e.css(k,m)})};e.extend({cssHooks:{opacity:{get:function(b,g){if(g){var k=Ta(b,"opacity","opacity");return k===""?"1":k}return b.style.opacity}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":e.support.cssFloat?"cssFloat":"styleFloat"},style:function(b,g,k,m){if(b&&b.nodeType!==3&&b.nodeType!==8&&b.style){var o,p=e.camelCase(g),u=b.style,A=e.cssHooks[p];g=e.cssProps[p]||p;if(k===a){if(A&&"get"in A&&(o=
A.get(b,false,m))!==a)return o;return u[g]}m=typeof k;if(!(m==="number"&&isNaN(k)||k==null)){m==="string"&&Zb.test(k)&&(k=+k.replace($b,"")+parseFloat(e.css(b,g)),m="number");m==="number"&&!e.cssNumber[p]&&(k+="px");if(!A||!("set"in A)||(k=A.set(b,k))!==a)try{u[g]=k}catch(E){}}}},css:function(b,g,k){var m,o;g=e.camelCase(g);o=e.cssHooks[g];g=e.cssProps[g]||g;g==="cssFloat"&&(g="float");if(o&&"get"in o&&(m=o.get(b,true,k))!==a)return m;if(Ta)return Ta(b,g)},swap:function(b,g,k){var m={};for(var o in g){m[o]=
b.style[o];b.style[o]=g[o]}k.call(b);for(o in g)b.style[o]=m[o]}});e.curCSS=e.css;e.each(["height","width"],function(b,g){e.cssHooks[g]={get:function(k,m,o){var p;if(m){if(k.offsetWidth!==0)return R(k,g,o);e.swap(k,ac,function(){p=R(k,g,o)});return p}},set:function(k,m){if(!vb.test(m))return m;m=parseFloat(m);if(m>=0)return m+"px"}}});e.support.opacity||(e.cssHooks.opacity={get:function(b,g){return Wb.test((g&&b.currentStyle?b.currentStyle.filter:b.style.filter)||"")?parseFloat(RegExp.$1)/100+"":
g?"1":""},set:function(b,g){var k=b.style,m=b.currentStyle;k.zoom=1;var o=e.isNaN(g)?"":"alpha(opacity="+g*100+")";m=m&&m.filter||k.filter||"";k.filter=ub.test(m)?m.replace(ub,o):m+" "+o}});e(function(){e.support.reliableMarginRight||(e.cssHooks.marginRight={get:function(b,g){var k;e.swap(b,{display:"inline-block"},function(){g?(k=Ta(b,"margin-right","marginRight")):(k=b.style.marginRight)});return k}})});N.defaultView&&N.defaultView.getComputedStyle&&(wb=function(b,g){var k,m;g=g.replace(Xb,"-$1").toLowerCase();
if(!(m=b.ownerDocument.defaultView))return a;if(m=m.getComputedStyle(b,null)){k=m.getPropertyValue(g);k===""&&!e.contains(b.ownerDocument.documentElement,b)&&(k=e.style(b,g))}return k});N.documentElement.currentStyle&&(xb=function(b,g){var k,m=b.currentStyle&&b.currentStyle[g],o=b.runtimeStyle&&b.runtimeStyle[g],p=b.style;!vb.test(m)&&Yb.test(m)&&(k=p.left,o&&(b.runtimeStyle.left=b.currentStyle.left),p.left=g==="fontSize"?"1em":m||0,m=p.pixelLeft+"px",p.left=k,o&&(b.runtimeStyle.left=o));return m===
""?"auto":m});Ta=wb||xb;e.expr&&e.expr.filters&&(e.expr.filters.hidden=function(b){var g=b.offsetHeight;return b.offsetWidth===0&&g===0||!e.support.reliableHiddenOffsets&&(b.style.display||e.css(b,"display"))==="none"},e.expr.filters.visible=function(b){return!e.expr.filters.hidden(b)});var bc=/%20/g,Eb=/\[\]$/,yb=/\r?\n/g,cc=/#.*$/,dc=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,ec=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,fc=/^(?:GET|HEAD)$/,gc=/^\/\//,
zb=/\?/,hc=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ic=/^(?:select|textarea)/i,lb=/\s+/,jc=/([?&])_=[^&]*/,Ab=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Bb=e.fn.load,eb={},Cb={},Pa,Qa;try{Pa=q.href}catch(rc){Pa=N.createElement("a");Pa.href="";Pa=Pa.href}Qa=Ab.exec(Pa.toLowerCase())||[];e.fn.extend({load:function(b,g,k){if(typeof b!="string"&&Bb)return Bb.apply(this,arguments);if(!this.length)return this;var m=b.indexOf(" ");if(m>=0){var o=b.slice(m,b.length);b=b.slice(0,m)}m="GET";
g&&(e.isFunction(g)?(k=g,g=a):typeof g=="object"&&(g=e.param(g,e.ajaxSettings.traditional),m="POST"));var p=this;e.ajax({url:b,type:m,dataType:"html",data:g,complete:function(u,A,E){E=u.responseText;u.isResolved()&&(u.done(function(H){E=H}),p.html(o?e("<div>").append(E.replace(hc,"")).find(o):E));k&&p.each(k,[E,A,u])}});return this},serialize:function(){return e.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?e.makeArray(this.elements):this}).filter(function(){return this.name&&
!this.disabled&&(this.checked||ic.test(this.nodeName)||ec.test(this.type))}).map(function(b,g){var k=e(this).val();return k==null?null:e.isArray(k)?e.map(k,function(m){return{name:g.name,value:m.replace(yb,"\r\n")}}):{name:g.name,value:k.replace(yb,"\r\n")}}).get()}});e.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b,g){e.fn[g]=function(k){return this.bind(g,k)}});e.each(["get","post"],function(b,g){e[g]=function(k,m,o,p){e.isFunction(m)&&(p=p||o,o=m,m=
a);return e.ajax({type:g,url:k,data:m,success:o,dataType:p})}});e.extend({getScript:function(b,g){return e.get(b,a,g,"script")},getJSON:function(b,g,k){return e.get(b,g,k,"json")},ajaxSetup:function(b,g){g?e.extend(true,b,e.ajaxSettings,g):(g=b,b=e.extend(true,e.ajaxSettings,g));for(var k in{context:1,url:1})k in g?(b[k]=g[k]):k in e.ajaxSettings&&(b[k]=e.ajaxSettings[k]);return b},ajaxSettings:{url:Pa,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|widget):$/.test(Qa[1]),global:true,type:"GET",
contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":c.String,"text html":true,"text json":e.parseJSON,"text xml":e.parseXML}},ajaxPrefilter:K(eb),ajaxTransport:K(Cb),ajax:function(b,g){function k(G,L,T,V){if(Ca!==2){Ca=2;Ha&&clearTimeout(Ha);
pa=a;na=V||"";w.readyState=G?4:0;var ka,Aa,za;if(T){V=m;var Ea=w,x=V.contents,M=V.dataTypes,W=V.responseFields,U,ga,qa,ta;for(ga in W)ga in T&&(Ea[W[ga]]=T[ga]);for(;M[0]==="*";){M.shift();U===a&&(U=V.mimeType||Ea.getResponseHeader("content-type"))}if(U)for(ga in x)if(x[ga]&&x[ga].test(U)){M.unshift(ga);break}if(M[0]in T)qa=M[0];else{for(ga in T){if(!M[0]||V.converters[ga+" "+M[0]]){qa=ga;break}ta||(ta=ga)}qa=qa||ta}if(qa){qa!==M[0]&&M.unshift(qa);T=T[qa]}else T=void 0}else T=a;T=T;if(G>=200&&G<300||
G===304){if(m.ifModified){if(U=w.getResponseHeader("Last-Modified"))e.lastModified[H]=U;if(U=w.getResponseHeader("Etag"))e.etag[H]=U}if(G===304){L="notmodified";ka=true}else try{U=m;T=T;U.dataFilter&&(T=U.dataFilter(T,U.dataType));var ua=U.dataTypes;ga={};var La,Ma,kc=ua.length,bb,Na=ua[0],Va,hb,Oa,Ra,Wa;for(La=1;La<kc;La++){if(La===1)for(Ma in U.converters)typeof Ma=="string"&&(ga[Ma.toLowerCase()]=U.converters[Ma]);Va=Na;Na=ua[La];if(Na==="*")Na=Va;else if(Va!=="*"&&Va!==Na){hb=Va+" "+Na;Oa=ga[hb]||
ga["* "+Na];if(!Oa){Wa=a;for(Ra in ga){bb=Ra.split(" ");if(bb[0]===Va||bb[0]==="*")if(Wa=ga[bb[1]+" "+Na]){Ra=ga[Ra];Ra===true?(Oa=Wa):Wa===true&&(Oa=Ra);break}}}!Oa&&!Wa&&e.error("No conversion from "+hb.replace(" "," to "));Oa!==true&&(T=Oa?Oa(T):Wa(Ra(T)))}}Aa=T;L="success";ka=true}catch(lc){L="parsererror";za=lc}}else{za=L;if(!L||G){L="error";G<0&&(G=0)}}w.status=G;w.statusText=L;ka?u.resolveWith(o,[Aa,L,w]):u.rejectWith(o,[w,L,za]);w.statusCode(E);E=a;Ka&&p.trigger("ajax"+(ka?"Success":"Error"),
[w,m,ka?Aa:za]);A.resolveWith(o,[w,L]);Ka&&(p.trigger("ajaxComplete",[w,m]),--e.active||e.event.trigger("ajaxStop"))}}typeof b=="object"&&(g=b,b=a);g=g||{};var m=e.ajaxSetup({},g),o=m.context||m,p=o!==m&&(o.nodeType||o instanceof e)?e(o):e.event,u=e.Deferred(),A=e._Deferred(),E=m.statusCode||{},H,O={},ea={},na,ja,pa,Ha,Ba,Ca=0,Ka,s,w={readyState:0,setRequestHeader:function(G,L){if(!Ca){var T=G.toLowerCase();G=ea[T]=ea[T]||G;O[G]=L}return this},getAllResponseHeaders:function(){return Ca===2?na:null},
getResponseHeader:function(G){var L;if(Ca===2){if(!ja)for(ja={};L=dc.exec(na);)ja[L[1].toLowerCase()]=L[2];L=ja[G.toLowerCase()]}return L===a?null:L},overrideMimeType:function(G){Ca||(m.mimeType=G);return this},abort:function(G){G=G||"abort";pa&&pa.abort(G);k(0,G);return this}};u.promise(w);w.success=w.done;w.error=w.fail;w.complete=A.done;w.statusCode=function(G){if(G){var L;if(Ca<2)for(L in G)E[L]=[E[L],G[L]];else{L=G[w.status];w.then(L,L)}}return this};m.url=((b||m.url)+"").replace(cc,"").replace(gc,
Qa[1]+"//");m.dataTypes=e.trim(m.dataType||"*").toLowerCase().split(lb);m.crossDomain==null&&(Ba=Ab.exec(m.url.toLowerCase()),m.crossDomain=!(!Ba||Ba[1]==Qa[1]&&Ba[2]==Qa[2]&&(Ba[3]||(Ba[1]==="http:"?80:443))==(Qa[3]||(Qa[1]==="http:"?80:443))));m.data&&m.processData&&typeof m.data!="string"&&(m.data=e.param(m.data,m.traditional));D(eb,m,g,w);if(Ca===2)return false;Ka=m.global;m.type=m.type.toUpperCase();m.hasContent=!fc.test(m.type);Ka&&e.active++===0&&e.event.trigger("ajaxStart");if(!m.hasContent){m.data&&
(m.url+=(zb.test(m.url)?"&":"?")+m.data);H=m.url;if(m.cache===false){Ba=e.now();var I=m.url.replace(jc,"$1_="+Ba);m.url=I+(I===m.url?(zb.test(m.url)?"&":"?")+"_="+Ba:"")}}(m.data&&m.hasContent&&m.contentType!==false||g.contentType)&&w.setRequestHeader("Content-Type",m.contentType);m.ifModified&&(H=H||m.url,e.lastModified[H]&&w.setRequestHeader("If-Modified-Since",e.lastModified[H]),e.etag[H]&&w.setRequestHeader("If-None-Match",e.etag[H]));w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?
m.accepts[m.dataTypes[0]]+(m.dataTypes[0]!=="*"?", */*; q=0.01":""):m.accepts["*"]);for(s in m.headers)w.setRequestHeader(s,m.headers[s]);if(m.beforeSend&&(m.beforeSend.call(o,w,m)===false||Ca===2)){w.abort();return false}for(s in{success:1,error:1,complete:1})w[s](m[s]);if(pa=D(Cb,m,g,w)){w.readyState=1;Ka&&p.trigger("ajaxSend",[w,m]);m.async&&m.timeout>0&&(Ha=setTimeout(function(){w.abort("timeout")},m.timeout));try{Ca=1;pa.send(O,k)}catch(J){status<2?k(-1,J):e.error(J)}}else k(-1,"No Transport");
return w},param:function(b,g){var k=[],m=function(p,u){u=e.isFunction(u)?u():u;k[k.length]=encodeURIComponent(p)+"="+encodeURIComponent(u)};g===a&&(g=e.ajaxSettings.traditional);if(e.isArray(b)||b.jquery&&!e.isPlainObject(b))e.each(b,function(){m(this.name,this.value)});else for(var o in b)B(o,b[o],g,m);return k.join("&").replace(bc,"+")}});e.extend({active:0,lastModified:{},etag:{}});var mc=e.now(),cb=/(\=)\?(&|$)|\?\?/i;e.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return e.expando+"_"+
mc++}});e.ajaxPrefilter("json jsonp",function(b,g,k){g=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==false&&(cb.test(b.url)||g&&cb.test(b.data))){var m,o=b.jsonpCallback=e.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,p=c[o],u=b.url,A=b.data,E="$1"+o+"$2";b.jsonp!==false&&(u=u.replace(cb,E),b.url===u&&(g&&(A=A.replace(cb,E)),b.data===A&&(u+=(/\?/.test(u)?"&":"?")+b.jsonp+"="+o)));b.url=u;b.data=A;c[o]=function(H){m=
[H]};k.always(function(){c[o]=p;m&&e.isFunction(p)&&c[o](m[0])});b.converters["script json"]=function(){m||e.error(o+" was not called");return m[0]};b.dataTypes[0]="json";return"script"}});e.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(b){e.globalEval(b);return b}}});e.ajaxPrefilter("script",function(b){b.cache===a&&(b.cache=false);b.crossDomain&&
(b.type="GET",b.global=false)});e.ajaxTransport("script",function(b){if(b.crossDomain){var g,k=N.head||N.getElementsByTagName("head")[0]||N.documentElement;return{send:function(m,o){g=N.createElement("script");g.async="async";b.scriptCharset&&(g.charset=b.scriptCharset);g.src=b.url;g.onload=g.onreadystatechange=function(p,u){if(u||!g.readyState||/loaded|complete/.test(g.readyState)){g.onload=g.onreadystatechange=null;k&&g.parentNode&&k.removeChild(g);g=a;u||o(200,"success")}};k.insertBefore(g,k.firstChild)},
abort:function(){g&&g.onload(0,1)}}}});var ib=c.ActiveXObject?function(){for(var b in Xa)Xa[b](0,1)}:false,nc=0,Xa;e.ajaxSettings.xhr=c.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&v()))a:{try{b=new c.ActiveXObject("Microsoft.XMLHTTP");break a}catch(g){}b=void 0}return b}:v;(function(b){e.extend(e.support,{ajax:!!b,cors:!!b&&"withCredentials"in b})})(e.ajaxSettings.xhr());e.support.ajax&&e.ajaxTransport(function(b){if(!b.crossDomain||e.support.cors){var g;return{send:function(k,m){var o=b.xhr(),
p,u;b.username?o.open(b.type,b.url,b.async,b.username,b.password):o.open(b.type,b.url,b.async);if(b.xhrFields)for(u in b.xhrFields)o[u]=b.xhrFields[u];b.mimeType&&o.overrideMimeType&&o.overrideMimeType(b.mimeType);!b.crossDomain&&!k["X-Requested-With"]&&(k["X-Requested-With"]="XMLHttpRequest");try{for(u in k)o.setRequestHeader(u,k[u])}catch(A){}o.send(b.hasContent&&b.data||null);g=function(E,H){var O,ea,na,ja,pa;try{if(g&&(H||o.readyState===4)){g=a;p&&(o.onreadystatechange=e.noop,ib&&delete Xa[p]);
if(H)o.readyState!==4&&o.abort();else{O=o.status;na=o.getAllResponseHeaders();ja={};(pa=o.responseXML)&&pa.documentElement&&(ja.xml=pa);ja.text=o.responseText;try{ea=o.statusText}catch(Ha){ea=""}!O&&b.isLocal&&!b.crossDomain?(O=ja.text?200:404):O===1223&&(O=204)}}}catch(Ba){H||m(-1,Ba)}ja&&m(O,ea,ja,na)};!b.async||o.readyState===4?g():(p=++nc,ib&&(Xa||(Xa={},e(c).unload(ib)),Xa[p]=g),o.onreadystatechange=g)},abort:function(){g&&g(0,1)}}}});var db={},Ja,Sa,oc=/^(?:toggle|show|hide)$/,pc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,
Ya,kb=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],$a,jb=c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame||c.oRequestAnimationFrame;e.fn.extend({show:function(b,g,k){var m;if(b||b===0)return this.animate(h("show",3),b,g,k);g=0;for(k=this.length;g<k;g++){b=this[g];b.style&&(m=b.style.display,!e._data(b,"olddisplay")&&m==="none"&&(m=b.style.display=""),m===""&&e.css(b,"display")==="none"&&
e._data(b,"olddisplay",d(b.nodeName)))}for(g=0;g<k;g++){b=this[g];if(b.style){m=b.style.display;if(m===""||m==="none")b.style.display=e._data(b,"olddisplay")||""}}return this},hide:function(b,g,k){if(b||b===0)return this.animate(h("hide",3),b,g,k);b=0;for(g=this.length;b<g;b++)if(this[b].style){k=e.css(this[b],"display");k!=="none"&&!e._data(this[b],"olddisplay")&&e._data(this[b],"olddisplay",k)}for(b=0;b<g;b++)this[b].style&&(this[b].style.display="none");return this},_toggle:e.fn.toggle,toggle:function(b,
g,k){var m=typeof b=="boolean";e.isFunction(b)&&e.isFunction(g)?this._toggle.apply(this,arguments):b==null||m?this.each(function(){var o=m?b:e(this).is(":hidden");e(this)[o?"show":"hide"]()}):this.animate(h("toggle",3),b,g,k);return this},fadeTo:function(b,g,k,m){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:g},b,k,m)},animate:function(b,g,k,m){var o=e.speed(g,k,m);if(e.isEmptyObject(b))return this.each(o.complete,[false]);b=e.extend({},b);return this[o.queue===false?
"each":"queue"](function(){o.queue===false&&e._mark(this);var p=e.extend({},o),u=this.nodeType===1,A=u&&e(this).is(":hidden"),E,H,O,ea,na,ja,pa,Ha;p.animatedProperties={};for(O in b){E=e.camelCase(O);O!==E&&(b[E]=b[O],delete b[O]);H=b[E];e.isArray(H)?(p.animatedProperties[E]=H[1],H=b[E]=H[0]):(p.animatedProperties[E]=p.specialEasing&&p.specialEasing[E]||p.easing||"swing");if(H==="hide"&&A||H==="show"&&!A)return p.complete.call(this);u&&(E==="height"||E==="width")&&(p.overflow=[this.style.overflow,
this.style.overflowX,this.style.overflowY],e.css(this,"display")==="inline"&&e.css(this,"float")==="none"&&(e.support.inlineBlockNeedsLayout?(ea=d(this.nodeName),ea==="inline"?(this.style.display="inline-block"):(this.style.display="inline",this.style.zoom=1)):(this.style.display="inline-block")))}p.overflow!=null&&(this.style.overflow="hidden");for(O in b){u=new e.fx(this,p,O);H=b[O];oc.test(H)?u[H==="toggle"?A?"show":"hide":H]():(na=pc.exec(H),ja=u.cur(),na?(pa=parseFloat(na[2]),Ha=na[3]||(e.cssNumber[O]?
"":"px"),Ha!=="px"&&(e.style(this,O,(pa||1)+Ha),ja=(pa||1)/u.cur()*ja,e.style(this,O,ja+Ha)),na[1]&&(pa=(na[1]==="-="?-1:1)*pa+ja),u.custom(ja,pa,Ha)):u.custom(ja,H,""))}return true})},stop:function(b,g){b&&this.queue([]);this.each(function(){var k=e.timers,m=k.length;for(g||e._unmark(true,this);m--;)k[m].elem===this&&(g&&k[m](true),k.splice(m,1))});g||this.dequeue();return this}});e.each({slideDown:h("show",1),slideUp:h("hide",1),slideToggle:h("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},
fadeToggle:{opacity:"toggle"}},function(b,g){e.fn[b]=function(k,m,o){return this.animate(g,k,m,o)}});e.extend({speed:function(b,g,k){var m=b&&typeof b=="object"?e.extend({},b):{complete:k||!k&&g||e.isFunction(b)&&b,duration:b,easing:k&&g||g&&!e.isFunction(g)&&g};m.duration=e.fx.off?0:typeof m.duration=="number"?m.duration:m.duration in e.fx.speeds?e.fx.speeds[m.duration]:e.fx.speeds._default;m.old=m.complete;m.complete=function(o){e.isFunction(m.old)&&m.old.call(this);m.queue!==false?e.dequeue(this):
o!==false&&e._unmark(this)};return m},easing:{linear:function(b,g,k,m){return k+m*b},swing:function(b,g,k,m){return(-Math.cos(b*Math.PI)/2+0.5)*m+k}},timers:[],fx:function(b,g,k){this.options=g;this.elem=b;this.prop=k;g.orig=g.orig||{}}});e.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(e.fx.step[this.prop]||e.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];
var b,g=e.css(this.elem,this.prop);return isNaN(b=parseFloat(g))?!g||g==="auto"?0:g:b},custom:function(b,g,k){function m(A){return o.step(A)}var o=this,p=e.fx,u;this.startTime=$a||n();this.start=b;this.end=g;this.unit=k||this.unit||(e.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;m.elem=this.elem;m()&&e.timers.push(m)&&!Ya&&(jb?(Ya=true,u=function(){Ya&&(jb(u),p.tick())},jb(u)):(Ya=setInterval(p.tick,p.interval)))},show:function(){this.options.orig[this.prop]=e.style(this.elem,
this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());e(this.elem).show()},hide:function(){this.options.orig[this.prop]=e.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(b){var g=$a||n(),k=true,m=this.elem,o=this.options,p,u;if(b||g>=o.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();o.animatedProperties[this.prop]=true;for(p in o.animatedProperties)o.animatedProperties[p]!==
true&&(k=false);if(k){o.overflow!=null&&!e.support.shrinkWrapBlocks&&e.each(["","X","Y"],function(E,H){m.style["overflow"+H]=o.overflow[E]});o.hide&&e(m).hide();if(o.hide||o.show)for(var A in o.animatedProperties)e.style(m,A,o.orig[A]);o.complete.call(m)}return false}o.duration==Infinity?(this.now=g):(u=g-this.startTime,this.state=u/o.duration,this.pos=e.easing[o.animatedProperties[this.prop]](this.state,u,0,1,o.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return true}};
e.extend(e.fx,{tick:function(){for(var b=e.timers,g=0;g<b.length;++g)b[g]()||b.splice(g--,1);b.length||e.fx.stop()},interval:13,stop:function(){clearInterval(Ya);Ya=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(b){e.style(b.elem,"opacity",b.now)},_default:function(b){b.elem.style&&b.elem.style[b.prop]!=null?(b.elem.style[b.prop]=(b.prop==="width"||b.prop==="height"?Math.max(0,b.now):b.now)+b.unit):(b.elem[b.prop]=b.now)}}});e.expr&&e.expr.filters&&(e.expr.filters.animated=function(b){return e.grep(e.timers,
function(g){return b===g.elem}).length});var qc=/^t(?:able|d|h)$/i,Db=/^(?:body|html)$/i;"getBoundingClientRect"in N.documentElement?(e.fn.offset=function(b){var g=this[0],k;if(b)return this.each(function(u){e.offset.setOffset(this,b,u)});if(!g||!g.ownerDocument)return null;if(g===g.ownerDocument.body)return e.offset.bodyOffset(g);try{k=g.getBoundingClientRect()}catch(m){}var o=g.ownerDocument,p=o.documentElement;if(!k||!e.contains(p,g))return k?{top:k.top,left:k.left}:{top:0,left:0};g=o.body;o=f(o);
return{top:k.top+(o.pageYOffset||e.support.boxModel&&p.scrollTop||g.scrollTop)-(p.clientTop||g.clientTop||0),left:k.left+(o.pageXOffset||e.support.boxModel&&p.scrollLeft||g.scrollLeft)-(p.clientLeft||g.clientLeft||0)}}):(e.fn.offset=function(b){var g=this[0];if(b)return this.each(function(O){e.offset.setOffset(this,b,O)});if(!g||!g.ownerDocument)return null;if(g===g.ownerDocument.body)return e.offset.bodyOffset(g);e.offset.initialize();var k,m=g.offsetParent,o=g,p=g.ownerDocument,u=p.documentElement,
A=p.body;k=(p=p.defaultView)?p.getComputedStyle(g,null):g.currentStyle;for(var E=g.offsetTop,H=g.offsetLeft;(g=g.parentNode)&&g!==A&&g!==u;){if(e.offset.supportsFixedPosition&&k.position==="fixed")break;k=p?p.getComputedStyle(g,null):g.currentStyle;E-=g.scrollTop;H-=g.scrollLeft;g===m&&(E+=g.offsetTop,H+=g.offsetLeft,e.offset.doesNotAddBorder&&(!e.offset.doesAddBorderForTableAndCells||!qc.test(g.nodeName))&&(E+=parseFloat(k.borderTopWidth)||0,H+=parseFloat(k.borderLeftWidth)||0),o=m,m=g.offsetParent);
e.offset.subtractsBorderForOverflowNotVisible&&k.overflow!=="visible"&&(E+=parseFloat(k.borderTopWidth)||0,H+=parseFloat(k.borderLeftWidth)||0);k=k}if(k.position==="relative"||k.position==="static"){E+=A.offsetTop;H+=A.offsetLeft}e.offset.supportsFixedPosition&&k.position==="fixed"&&(E+=Math.max(u.scrollTop,A.scrollTop),H+=Math.max(u.scrollLeft,A.scrollLeft));return{top:E,left:H}});e.offset={initialize:function(){var b=N.body,g=N.createElement("div"),k,m,o,p=parseFloat(e.css(b,"marginTop"))||0;e.extend(g.style,
{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});g.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";b.insertBefore(g,b.firstChild);k=g.firstChild;m=k.firstChild;o=k.nextSibling.firstChild.firstChild;
this.doesNotAddBorder=m.offsetTop!==5;this.doesAddBorderForTableAndCells=o.offsetTop===5;m.style.position="fixed";m.style.top="20px";this.supportsFixedPosition=m.offsetTop===20||m.offsetTop===15;m.style.position=m.style.top="";k.style.overflow="hidden";k.style.position="relative";this.subtractsBorderForOverflowNotVisible=m.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=b.offsetTop!==p;b.removeChild(g);e.offset.initialize=e.noop},bodyOffset:function(b){var g=b.offsetTop,k=b.offsetLeft;e.offset.initialize();
e.offset.doesNotIncludeMarginInBodyOffset&&(g+=parseFloat(e.css(b,"marginTop"))||0,k+=parseFloat(e.css(b,"marginLeft"))||0);return{top:g,left:k}},setOffset:function(b,g,k){var m=e.css(b,"position");m==="static"&&(b.style.position="relative");var o=e(b),p=o.offset(),u=e.css(b,"top"),A=e.css(b,"left"),E={},H={},O,ea;(m==="absolute"||m==="fixed")&&e.inArray("auto",[u,A])>-1?(H=o.position(),O=H.top,ea=H.left):(O=parseFloat(u)||0,ea=parseFloat(A)||0);e.isFunction(g)&&(g=g.call(b,k,p));g.top!=null&&(E.top=
g.top-p.top+O);g.left!=null&&(E.left=g.left-p.left+ea);"using"in g?g.using.call(b,E):o.css(E)}};e.fn.extend({position:function(){if(!this[0])return null;var b=this[0],g=this.offsetParent(),k=this.offset(),m=Db.test(g[0].nodeName)?{top:0,left:0}:g.offset();k.top-=parseFloat(e.css(b,"marginTop"))||0;k.left-=parseFloat(e.css(b,"marginLeft"))||0;m.top+=parseFloat(e.css(g[0],"borderTopWidth"))||0;m.left+=parseFloat(e.css(g[0],"borderLeftWidth"))||0;return{top:k.top-m.top,left:k.left-m.left}},offsetParent:function(){return this.map(function(){for(var b=
this.offsetParent||N.body;b&&!Db.test(b.nodeName)&&e.css(b,"position")==="static";)b=b.offsetParent;return b})}});e.each(["Left","Top"],function(b,g){var k="scroll"+g;e.fn[k]=function(m){var o,p;if(m===a){o=this[0];if(!o)return null;return(p=f(o))?"pageXOffset"in p?p[b?"pageYOffset":"pageXOffset"]:e.support.boxModel&&p.document.documentElement[k]||p.document.body[k]:o[k]}return this.each(function(){(p=f(this))?p.scrollTo(b?e(p).scrollLeft():m,b?m:e(p).scrollTop()):(this[k]=m)})}});e.each(["Height",
"Width"],function(b,g){var k=g.toLowerCase();e.fn["inner"+g]=function(){var m=this[0];return m&&m.style?parseFloat(e.css(m,k,"padding")):null};e.fn["outer"+g]=function(m){var o=this[0];return o&&o.style?parseFloat(e.css(o,k,m?"margin":"border")):null};e.fn[k]=function(m){var o=this[0];if(!o)return m==null?null:this;if(e.isFunction(m))return this.each(function(u){var A=e(this);A[k](m.call(this,u,A[k]()))});if(e.isWindow(o)){var p=o.document.documentElement["client"+g];return o.document.compatMode===
"CSS1Compat"&&p||o.document.body["client"+g]||p}if(o.nodeType===9)return Math.max(o.documentElement["client"+g],o.body["scroll"+g],o.documentElement["scroll"+g],o.body["offset"+g],o.documentElement["offset"+g]);if(m===a){o=e.css(o,k);p=parseFloat(o);return e.isNaN(p)?o:p}return this.css(k,typeof m=="string"?m:m+"px")}});c.jQuery=c.$=e})(window);
(function(c,a){function f(h,l){var n=h.nodeName.toLowerCase();if("area"===n){n=h.parentNode;var v=n.name;if(!h.href||!v||n.nodeName.toLowerCase()!=="map")return false;n=c("img[usemap=#"+v+"]")[0];return!!n&&d(n)}return(/input|select|textarea|button|object/.test(n)?!h.disabled:"a"==n?h.href||l:l)&&d(h)}function d(h){return!c(h).parents().andSelf().filter(function(){return c.curCSS(this,"visibility")==="hidden"||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};if(!c.ui.version){c.extend(c.ui,{version:"1.8.16",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({propAttr:c.fn.prop||c.fn.attr,_focus:c.fn.focus,focus:function(h,l){return typeof h==="number"?this.each(function(){var n=
this;setTimeout(function(){c(n).focus();l&&l.call(n)},h)}):this._focus.apply(this,arguments)},scrollParent:function(){var h;h=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,
"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!h.length?c(document):h},zIndex:function(h){if(h!==a)return this.css("zIndex",h);if(this.length){h=c(this[0]);for(var l;h.length&&h[0]!==document;){l=h.css("position");if(l==="absolute"||l==="relative"||l==="fixed"){l=parseInt(h.css("zIndex"),10);if(!isNaN(l)&&l!==0)return l}h=h.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(h){h.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.each(["Width","Height"],function(h,l){function n(K,R,Z,fa){c.each(v,function(){R-=parseFloat(c.curCSS(K,"padding"+this,true))||0;if(Z)R-=parseFloat(c.curCSS(K,"border"+this+"Width",true))||0;if(fa)R-=parseFloat(c.curCSS(K,"margin"+this,true))||0});return R}var v=l==="Width"?["Left","Right"]:["Top","Bottom"],B=l.toLowerCase(),D={innerWidth:c.fn.innerWidth,
innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+l]=function(K){if(K===a)return D["inner"+l].call(this);return this.each(function(){c(this).css(B,n(this,K)+"px")})};c.fn["outer"+l]=function(K,R){if(typeof K!=="number")return D["outer"+l].call(this,K);return this.each(function(){c(this).css(B,n(this,K,true,R)+"px")})}});c.extend(c.expr[":"],{data:function(h,l,n){return!!c.data(h,n[3])},focusable:function(h){return f(h,!isNaN(c.attr(h,"tabindex")))},
tabbable:function(h){var l=c.attr(h,"tabindex"),n=isNaN(l);return(n||l>=0)&&f(h,!n)}});c(function(){var h=document.body,l=h.appendChild(l=document.createElement("div"));c.extend(l.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=l.offsetHeight===100;c.support.selectstart="onselectstart"in l;h.removeChild(l).style.display="none"});c.extend(c.ui,{plugin:{add:function(h,l,n){h=c.ui[h].prototype;for(var v in n){h.plugins[v]=h.plugins[v]||[];h.plugins[v].push([l,n[v]])}},
call:function(h,l,n){if((l=h.plugins[l])&&h.element[0].parentNode)for(var v=0;v<l.length;v++)h.options[l[v][0]]&&l[v][1].apply(h.element,n)}},contains:function(h,l){return document.compareDocumentPosition?h.compareDocumentPosition(l)&16:h!==l&&h.contains(l)},hasScroll:function(h,l){if(c(h).css("overflow")==="hidden")return false;var n=l&&l==="left"?"scrollLeft":"scrollTop",v=false;if(h[n]>0)return true;h[n]=1;v=h[n]>0;h[n]=0;return v},isOverAxis:function(h,l,n){return h>l&&h<l+n},isOver:function(h,
l,n,v,B,D){return c.ui.isOverAxis(h,n,B)&&c.ui.isOverAxis(l,v,D)}})}})(jQuery);
(function(c,a){if(c.cleanData){var f=c.cleanData;c.cleanData=function(h){for(var l=0,n;(n=h[l])!=null;l++)try{c(n).triggerHandler("remove")}catch(v){}f(h)}}else{var d=c.fn.remove;c.fn.remove=function(h,l){return this.each(function(){if(!l)if(!h||c.filter(h,[this]).length)c("*",this).add([this]).each(function(){try{c(this).triggerHandler("remove")}catch(n){}});return d.call(c(this),h,l)})}}c.widget=function(h,l,n){var v=h.split(".")[0],B;h=h.split(".")[1];B=v+"-"+h;if(!n){n=l;l=c.Widget}c.expr[":"][B]=
function(D){return!!c.data(D,h)};c[v]=c[v]||{};c[v][h]=function(D,K){arguments.length&&this._createWidget(D,K)};l=new l;l.options=c.extend(true,{},l.options);c[v][h].prototype=c.extend(true,l,{namespace:v,widgetName:h,widgetEventPrefix:c[v][h].prototype.widgetEventPrefix||h,widgetBaseClass:B},n);c.widget.bridge(h,c[v][h])};c.widget.bridge=function(h,l){c.fn[h]=function(n){var v=typeof n==="string",B=Array.prototype.slice.call(arguments,1),D=this;n=!v&&B.length?c.extend.apply(null,[true,n].concat(B)):
n;if(v&&n.charAt(0)==="_")return D;v?this.each(function(){var K=c.data(this,h),R=K&&c.isFunction(K[n])?K[n].apply(K,B):K;if(R!==K&&R!==a){D=R;return false}}):this.each(function(){var K=c.data(this,h);K?K.option(n||{})._init():c.data(this,h,new l(n,this))});return D}};c.Widget=function(h,l){arguments.length&&this._createWidget(h,l)};c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(h,l){c.data(l,this.widgetName,this);this.element=c(l);this.options=
c.extend(true,{},this.options,this._getCreateOptions(),h);var n=this;this.element.bind("remove."+this.widgetName,function(){n.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return c.metadata&&c.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(h,l){var n=h;if(arguments.length===0)return c.extend({},this.options);if(typeof h==="string"){if(l===a)return this.options[h];n={};n[h]=l}this._setOptions(n);return this},_setOptions:function(h){var l=this;c.each(h,function(n,v){l._setOption(n,v)});return this},_setOption:function(h,l){this.options[h]=l;if(h==="disabled")this.widget()[l?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
l);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(h,l,n){var v=this.options[h];l=c.Event(l);l.type=(h===this.widgetEventPrefix?h:this.widgetEventPrefix+h).toLowerCase();n=n||{};if(l.originalEvent){h=c.event.props.length;for(var B;h;){B=c.event.props[--h];l[B]=l.originalEvent[B]}}this.element.trigger(l,n);return!(c.isFunction(v)&&v.call(this.element[0],l,n)===false||l.isDefaultPrevented())}}})(jQuery);
(function(c){var a=false;c(document).mouseup(function(){a=false});c.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var f=this;this.element.bind("mousedown."+this.widgetName,function(d){return f._mouseDown(d)}).bind("click."+this.widgetName,function(d){if(true===c.data(d.target,f.widgetName+".preventClickEvent")){c.removeData(d.target,f.widgetName+".preventClickEvent");d.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(f){if(!a){this._mouseStarted&&this._mouseUp(f);this._mouseDownEvent=f;var d=this,h=f.which==1,l=typeof this.options.cancel=="string"&&f.target.nodeName?c(f.target).closest(this.options.cancel).length:false;if(!h||l||!this._mouseCapture(f))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)){this._mouseStarted=
this._mouseStart(f)!==false;if(!this._mouseStarted){f.preventDefault();return true}}true===c.data(f.target,this.widgetName+".preventClickEvent")&&c.removeData(f.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(n){return d._mouseMove(n)};this._mouseUpDelegate=function(n){return d._mouseUp(n)};c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);f.preventDefault();return a=true}},_mouseMove:function(f){if(c.browser.msie&&
!(document.documentMode>=9)&&!f.button)return this._mouseUp(f);if(this._mouseStarted){this._mouseDrag(f);return f.preventDefault()}if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,f)!==false)?this._mouseDrag(f):this._mouseUp(f);return!this._mouseStarted},_mouseUp:function(f){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=
false;f.target==this._mouseDownEvent.target&&c.data(f.target,this.widgetName+".preventClickEvent",true);this._mouseStop(f)}return false},_mouseDistanceMet:function(f){return Math.max(Math.abs(this._mouseDownEvent.pageX-f.pageX),Math.abs(this._mouseDownEvent.pageY-f.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(c){c.widget("ui.draggable",c.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(a){var f=
this.options;if(this.helper||f.disabled||c(a.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(a);if(!this.handle)return false;if(f.iframeFix)c(f.iframeFix===true?"iframe":f.iframeFix).each(function(){c('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(c(this).offset()).appendTo("body")});return true},_mouseStart:function(a){var f=this.options;
this.helper=this._createHelper(a);this._cacheHelperProportions();if(c.ui.ddmanager)c.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};c.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});
this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;f.cursorAt&&this._adjustOffsetFromHelper(f.cursorAt);f.containment&&this._setContainment();if(this._trigger("start",a)===false){this._clear();return false}this._cacheHelperProportions();c.ui.ddmanager&&!f.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(a,true);c.ui.ddmanager&&c.ui.ddmanager.dragStart(this,a);return true},
_mouseDrag:function(a,f){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!f){var d=this._uiHash();if(this._trigger("drag",a,d)===false){this._mouseUp({});return false}this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";c.ui.ddmanager&&c.ui.ddmanager.drag(this,a);return false},_mouseStop:function(a){var f=
false;if(c.ui.ddmanager&&!this.options.dropBehaviour)f=c.ui.ddmanager.drop(this,a);if(this.dropped){f=this.dropped;this.dropped=false}if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return false;if(this.options.revert=="invalid"&&!f||this.options.revert=="valid"&&f||this.options.revert===true||c.isFunction(this.options.revert)&&this.options.revert.call(this.element,f)){var d=this;c(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,
10),function(){d._trigger("stop",a)!==false&&d._clear()})}else this._trigger("stop",a)!==false&&this._clear();return false},_mouseUp:function(a){this.options.iframeFix===true&&c("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});c.ui.ddmanager&&c.ui.ddmanager.dragStop(this,a);return c.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var f=!this.options.handle||
!c(this.options.handle,this.element).length?true:false;c(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==a.target)f=true});return f},_createHelper:function(a){var f=this.options;a=c.isFunction(f.helper)?c(f.helper.apply(this.element[0],[a])):f.helper=="clone"?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo(f.appendTo=="parent"?this.element[0].parentNode:f.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&
a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(c.isArray(a))a={left:+a[0],top:+a[1]||0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=
this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&c.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),
10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[a.containment=="document"?0:c(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:c(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,
(a.containment=="document"?0:c(window).scrollLeft())+c(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:c(window).scrollTop())+(c(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){a=c(a.containment);var f=a[0];if(f){a.offset();var d=c(f).css("overflow")!=
"hidden";this.containment=[(parseInt(c(f).css("borderLeftWidth"),10)||0)+(parseInt(c(f).css("paddingLeft"),10)||0),(parseInt(c(f).css("borderTopWidth"),10)||0)+(parseInt(c(f).css("paddingTop"),10)||0),(d?Math.max(f.scrollWidth,f.offsetWidth):f.offsetWidth)-(parseInt(c(f).css("borderLeftWidth"),10)||0)-(parseInt(c(f).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(f.scrollHeight,f.offsetHeight):f.offsetHeight)-(parseInt(c(f).css("borderTopWidth"),
10)||0)-(parseInt(c(f).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=a}}else if(a.containment.constructor==Array)this.containment=a.containment},_convertPositionTo:function(a,f){if(!f)f=this.position;var d=a=="absolute"?1:-1,h=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(h[0].tagName);return{top:f.top+
this.offset.relative.top*d+this.offset.parent.top*d-(c.browser.safari&&c.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():l?0:h.scrollTop())*d),left:f.left+this.offset.relative.left*d+this.offset.parent.left*d-(c.browser.safari&&c.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:h.scrollLeft())*d)}},_generatePosition:function(a){var f=this.options,d=this.cssPosition=="absolute"&&
!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(d[0].tagName),l=a.pageX,n=a.pageY;if(this.originalPosition){var v;if(this.containment){if(this.relative_container){v=this.relative_container.offset();v=[this.containment[0]+v.left,this.containment[1]+v.top,this.containment[2]+v.left,this.containment[3]+v.top]}else v=this.containment;if(a.pageX-this.offset.click.left<v[0])l=v[0]+this.offset.click.left;
if(a.pageY-this.offset.click.top<v[1])n=v[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>v[2])l=v[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>v[3])n=v[3]+this.offset.click.top}if(f.grid){n=f.grid[1]?this.originalPageY+Math.round((n-this.originalPageY)/f.grid[1])*f.grid[1]:this.originalPageY;n=v?!(n-this.offset.click.top<v[1]||n-this.offset.click.top>v[3])?n:!(n-this.offset.click.top<v[1])?n-f.grid[1]:n+f.grid[1]:n;l=f.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/
f.grid[0])*f.grid[0]:this.originalPageX;l=v?!(l-this.offset.click.left<v[0]||l-this.offset.click.left>v[2])?l:!(l-this.offset.click.left<v[0])?l-f.grid[0]:l+f.grid[0]:l}}return{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(c.browser.safari&&c.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():h?0:d.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(c.browser.safari&&c.browser.version<
526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(a,f,d){d=d||this._uiHash();c.ui.plugin.call(this,a,[f,d]);if(a=="drag")this.positionAbs=this._convertPositionTo("absolute");return c.Widget.prototype._trigger.call(this,a,f,
d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});c.extend(c.ui.draggable,{version:"1.8.16"});c.ui.plugin.add("draggable","connectToSortable",{start:function(a,f){var d=c(this).data("draggable"),h=d.options,l=c.extend({},f,{item:d.element});d.sortables=[];c(h.connectToSortable).each(function(){var n=c.data(this,"sortable");if(n&&!n.options.disabled){d.sortables.push({instance:n,shouldRevert:n.options.revert});
n.refreshPositions();n._trigger("activate",a,l)}})},stop:function(a,f){var d=c(this).data("draggable"),h=c.extend({},f,{item:d.element});c.each(d.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;d.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(a);this.instance.options.helper=this.instance.options._helper;d.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=
false;this.instance._trigger("deactivate",a,h)}})},drag:function(a,f){var d=c(this).data("draggable"),h=this;c.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=c(h).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);
this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return f.helper[0]};a.target=this.instance.currentItem[0];this.instance._mouseCapture(a,true);this.instance._mouseStart(a,true,true);this.instance.offset.click.top=d.offset.click.top;this.instance.offset.click.left=d.offset.click.left;this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top;
d._trigger("toSortable",a);d.dropped=this.instance.element;d.currentItem=d.element;this.instance.fromOutside=d}this.instance.currentItem&&this.instance._mouseDrag(a)}else if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",a,this.instance._uiHash(this.instance));this.instance._mouseStop(a,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&
this.instance.placeholder.remove();d._trigger("fromSortable",a);d.dropped=false}})}});c.ui.plugin.add("draggable","cursor",{start:function(){var a=c("body"),f=c(this).data("draggable").options;if(a.css("cursor"))f._cursor=a.css("cursor");a.css("cursor",f.cursor)},stop:function(){var a=c(this).data("draggable").options;a._cursor&&c("body").css("cursor",a._cursor)}});c.ui.plugin.add("draggable","opacity",{start:function(a,f){var d=c(f.helper),h=c(this).data("draggable").options;if(d.css("opacity"))h._opacity=
d.css("opacity");d.css("opacity",h.opacity)},stop:function(a,f){var d=c(this).data("draggable").options;d._opacity&&c(f.helper).css("opacity",d._opacity)}});c.ui.plugin.add("draggable","scroll",{start:function(){var a=c(this).data("draggable");if(a.scrollParent[0]!=document&&a.scrollParent[0].tagName!="HTML")a.overflowOffset=a.scrollParent.offset()},drag:function(a){var f=c(this).data("draggable"),d=f.options,h=false;if(f.scrollParent[0]!=document&&f.scrollParent[0].tagName!="HTML"){if(!d.axis||d.axis!=
"x")if(f.overflowOffset.top+f.scrollParent[0].offsetHeight-a.pageY<d.scrollSensitivity)f.scrollParent[0].scrollTop=h=f.scrollParent[0].scrollTop+d.scrollSpeed;else if(a.pageY-f.overflowOffset.top<d.scrollSensitivity)f.scrollParent[0].scrollTop=h=f.scrollParent[0].scrollTop-d.scrollSpeed;if(!d.axis||d.axis!="y")if(f.overflowOffset.left+f.scrollParent[0].offsetWidth-a.pageX<d.scrollSensitivity)f.scrollParent[0].scrollLeft=h=f.scrollParent[0].scrollLeft+d.scrollSpeed;else if(a.pageX-f.overflowOffset.left<
d.scrollSensitivity)f.scrollParent[0].scrollLeft=h=f.scrollParent[0].scrollLeft-d.scrollSpeed}else{if(!d.axis||d.axis!="x")if(a.pageY-c(document).scrollTop()<d.scrollSensitivity)h=c(document).scrollTop(c(document).scrollTop()-d.scrollSpeed);else if(c(window).height()-(a.pageY-c(document).scrollTop())<d.scrollSensitivity)h=c(document).scrollTop(c(document).scrollTop()+d.scrollSpeed);if(!d.axis||d.axis!="y")if(a.pageX-c(document).scrollLeft()<d.scrollSensitivity)h=c(document).scrollLeft(c(document).scrollLeft()-
d.scrollSpeed);else if(c(window).width()-(a.pageX-c(document).scrollLeft())<d.scrollSensitivity)h=c(document).scrollLeft(c(document).scrollLeft()+d.scrollSpeed)}h!==false&&c.ui.ddmanager&&!d.dropBehaviour&&c.ui.ddmanager.prepareOffsets(f,a)}});c.ui.plugin.add("draggable","snap",{start:function(){var a=c(this).data("draggable"),f=a.options;a.snapElements=[];c(f.snap.constructor!=String?f.snap.items||":data(draggable)":f.snap).each(function(){var d=c(this),h=d.offset();this!=a.element[0]&&a.snapElements.push({item:this,
width:d.outerWidth(),height:d.outerHeight(),top:h.top,left:h.left})})},drag:function(a,f){for(var d=c(this).data("draggable"),h=d.options,l=h.snapTolerance,n=f.offset.left,v=n+d.helperProportions.width,B=f.offset.top,D=B+d.helperProportions.height,K=d.snapElements.length-1;K>=0;K--){var R=d.snapElements[K].left,Z=R+d.snapElements[K].width,fa=d.snapElements[K].top,ma=fa+d.snapElements[K].height;if(R-l<n&&n<Z+l&&fa-l<B&&B<ma+l||R-l<n&&n<Z+l&&fa-l<D&&D<ma+l||R-l<v&&v<Z+l&&fa-l<B&&B<ma+l||R-l<v&&v<Z+
l&&fa-l<D&&D<ma+l){if(h.snapMode!="inner"){var r=Math.abs(fa-D)<=l,t=Math.abs(ma-B)<=l,C=Math.abs(R-v)<=l,P=Math.abs(Z-n)<=l;if(r)f.position.top=d._convertPositionTo("relative",{top:fa-d.helperProportions.height,left:0}).top-d.margins.top;if(t)f.position.top=d._convertPositionTo("relative",{top:ma,left:0}).top-d.margins.top;if(C)f.position.left=d._convertPositionTo("relative",{top:0,left:R-d.helperProportions.width}).left-d.margins.left;if(P)f.position.left=d._convertPositionTo("relative",{top:0,
left:Z}).left-d.margins.left}var aa=r||t||C||P;if(h.snapMode!="outer"){r=Math.abs(fa-B)<=l;t=Math.abs(ma-D)<=l;C=Math.abs(R-n)<=l;P=Math.abs(Z-v)<=l;if(r)f.position.top=d._convertPositionTo("relative",{top:fa,left:0}).top-d.margins.top;if(t)f.position.top=d._convertPositionTo("relative",{top:ma-d.helperProportions.height,left:0}).top-d.margins.top;if(C)f.position.left=d._convertPositionTo("relative",{top:0,left:R}).left-d.margins.left;if(P)f.position.left=d._convertPositionTo("relative",{top:0,left:Z-
d.helperProportions.width}).left-d.margins.left}if(!d.snapElements[K].snapping&&(r||t||C||P||aa))d.options.snap.snap&&d.options.snap.snap.call(d.element,a,c.extend(d._uiHash(),{snapItem:d.snapElements[K].item}));d.snapElements[K].snapping=r||t||C||P||aa}else{d.snapElements[K].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,a,c.extend(d._uiHash(),{snapItem:d.snapElements[K].item}));d.snapElements[K].snapping=false}}}});c.ui.plugin.add("draggable","stack",{start:function(){var a=
c(this).data("draggable").options;a=c.makeArray(c(a.stack)).sort(function(d,h){return(parseInt(c(d).css("zIndex"),10)||0)-(parseInt(c(h).css("zIndex"),10)||0)});if(a.length){var f=parseInt(a[0].style.zIndex)||0;c(a).each(function(d){this.style.zIndex=f+d});this[0].style.zIndex=f+a.length}}});c.ui.plugin.add("draggable","zIndex",{start:function(a,f){var d=c(f.helper),h=c(this).data("draggable").options;if(d.css("zIndex"))h._zIndex=d.css("zIndex");d.css("zIndex",h.zIndex)},stop:function(a,f){var d=
c(this).data("draggable").options;d._zIndex&&c(f.helper).css("zIndex",d._zIndex)}})})(jQuery);
(function(c){c.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,f=a.accept;this.isover=0;this.isout=1;this.accept=c.isFunction(f)?f:function(d){return d.is(f)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};c.ui.ddmanager.droppables[a.scope]=c.ui.ddmanager.droppables[a.scope]||[];c.ui.ddmanager.droppables[a.scope].push(this);
a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var a=c.ui.ddmanager.droppables[this.options.scope],f=0;f<a.length;f++)a[f]==this&&a.splice(f,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(a,f){if(a=="accept")this.accept=c.isFunction(f)?f:function(d){return d.is(f)};c.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var f=c.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);f&&this._trigger("activate",a,this.ui(f))},_deactivate:function(a){var f=c.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);f&&this._trigger("deactivate",a,this.ui(f))},_over:function(a){var f=c.ui.ddmanager.current;if(!(!f||(f.currentItem||f.element)[0]==this.element[0]))if(this.accept.call(this.element[0],f.currentItem||f.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);
this._trigger("over",a,this.ui(f))}},_out:function(a){var f=c.ui.ddmanager.current;if(!(!f||(f.currentItem||f.element)[0]==this.element[0]))if(this.accept.call(this.element[0],f.currentItem||f.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("out",a,this.ui(f))}},_drop:function(a,f){var d=f||c.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return false;var h=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var l=
c.data(this,"droppable");if(l.options.greedy&&!l.options.disabled&&l.options.scope==d.options.scope&&l.accept.call(l.element[0],d.currentItem||d.element)&&c.ui.intersect(d,c.extend(l,{offset:l.element.offset()}),l.options.tolerance)){h=true;return false}});if(h)return false;if(this.accept.call(this.element[0],d.currentItem||d.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",
a,this.ui(d));return this.element}return false},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});c.extend(c.ui.droppable,{version:"1.8.16"});c.ui.intersect=function(a,f,d){if(!f.offset)return false;var h=(a.positionAbs||a.position.absolute).left,l=h+a.helperProportions.width,n=(a.positionAbs||a.position.absolute).top,v=n+a.helperProportions.height,B=f.offset.left,D=B+f.proportions.width,K=f.offset.top,R=K+f.proportions.height;switch(d){case "fit":return B<=
h&&l<=D&&K<=n&&v<=R;case "intersect":return B<h+a.helperProportions.width/2&&l-a.helperProportions.width/2<D&&K<n+a.helperProportions.height/2&&v-a.helperProportions.height/2<R;case "pointer":return c.ui.isOver((a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,K,B,f.proportions.height,f.proportions.width);case "touch":return(n>=K&&n<=R||v>=K&&v<=R||n<K&&v>R)&&(h>=B&&h<=D||l>=B&&l<=D||h<B&&l>D);
default:return false}};c.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,f){var d=c.ui.ddmanager.droppables[a.options.scope]||[],h=f?f.type:null,l=(a.currentItem||a.element).find(":data(droppable)").andSelf(),n=0;a:for(;n<d.length;n++)if(!(d[n].options.disabled||a&&!d[n].accept.call(d[n].element[0],a.currentItem||a.element))){for(var v=0;v<l.length;v++)if(l[v]==d[n].element[0]){d[n].proportions.height=0;continue a}d[n].visible=d[n].element.css("display")!="none";if(d[n].visible){h==
"mousedown"&&d[n]._activate.call(d[n],f);d[n].offset=d[n].element.offset();d[n].proportions={width:d[n].element[0].offsetWidth,height:d[n].element[0].offsetHeight}}}},drop:function(a,f){var d=false;c.each(c.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&c.ui.intersect(a,this,this.options.tolerance))d=d||this._drop.call(this,f);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)){this.isout=
1;this.isover=0;this._deactivate.call(this,f)}}});return d},dragStart:function(a,f){a.element.parents(":not(body,html)").bind("scroll.droppable",function(){a.options.refreshPositions||c.ui.ddmanager.prepareOffsets(a,f)})},drag:function(a,f){a.options.refreshPositions&&c.ui.ddmanager.prepareOffsets(a,f);c.each(c.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var d=c.ui.intersect(a,this,this.options.tolerance);if(d=!d&&this.isover==
1?"isout":d&&this.isover==0?"isover":null){var h;if(this.options.greedy){var l=this.element.parents(":data(droppable):eq(0)");if(l.length){h=c.data(l[0],"droppable");h.greedyChild=d=="isover"?1:0}}if(h&&d=="isover"){h.isover=0;h.isout=1;h._out.call(h,f)}this[d]=1;this[d=="isout"?"isover":"isout"]=0;this[d=="isover"?"_over":"_out"].call(this,f);if(h&&d=="isout"){h.isout=0;h.isover=1;h._over.call(h,f)}}}})},dragStop:function(a,f){a.element.parents(":not(body,html)").unbind("scroll.droppable");a.options.refreshPositions||
c.ui.ddmanager.prepareOffsets(a,f)}}})(jQuery);
(function(c){c.widget("ui.resizable",c.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var d=this,h=this.options;this.element.addClass("ui-resizable");c.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){/relative/.test(this.element.css("position"))&&c.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap(c('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),
top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=
this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=h.handles||(!c(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",
nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var l=this.handles.split(",");this.handles={};for(var n=0;n<l.length;n++){var v=c.trim(l[n]),B=c('<div class="ui-resizable-handle '+("ui-resizable-"+v)+'"></div>');/sw|se|ne|nw/.test(v)&&B.css({zIndex:++h.zIndex});"se"==v&&B.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[v]=".ui-resizable-"+v;this.element.append(B)}}this._renderAxis=function(D){D=D||this.element;for(var K in this.handles){if(this.handles[K].constructor==
String)this.handles[K]=c(this.handles[K],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var R=c(this.handles[K],this.element),Z=0;Z=/sw|ne|nw|se|n|s/.test(K)?R.outerHeight():R.outerWidth();R=["padding",/ne|nw|n/.test(K)?"Top":/se|sw|s/.test(K)?"Bottom":/^e$/.test(K)?"Right":"Left"].join("");D.css(R,Z);this._proportionallyResize()}c(this.handles[K])}};this._renderAxis(this.element);this._handles=c(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){if(!d.resizing){if(this.className)var D=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);d.axis=D&&D[1]?D[1]:"se"}});if(h.autoHide){this._handles.hide();c(this.element).addClass("ui-resizable-autohide").hover(function(){if(!h.disabled){c(this).removeClass("ui-resizable-autohide");d._handles.show()}},function(){if(!h.disabled)if(!d.resizing){c(this).addClass("ui-resizable-autohide");d._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();
var d=function(l){c(l).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){d(this.element);var h=this.element;h.after(this.originalElement.css({position:h.css("position"),width:h.outerWidth(),height:h.outerHeight(),top:h.css("top"),left:h.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);d(this.originalElement);return this},_mouseCapture:function(d){var h=
false;for(var l in this.handles)if(c(this.handles[l])[0]==d.target)h=true;return!this.options.disabled&&h},_mouseStart:function(d){var h=this.options,l=this.element.position(),n=this.element;this.resizing=true;this.documentScroll={top:c(document).scrollTop(),left:c(document).scrollLeft()};if(n.is(".ui-draggable")||/absolute/.test(n.css("position")))n.css({position:"absolute",top:l.top,left:l.left});c.browser.opera&&/relative/.test(n.css("position"))&&n.css({position:"relative",top:"auto",left:"auto"});
this._renderProxy();l=a(this.helper.css("left"));var v=a(this.helper.css("top"));if(h.containment){l+=c(h.containment).scrollLeft()||0;v+=c(h.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:l,top:v};this.size=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()};this.originalSize=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()};this.originalPosition={left:l,top:v};this.sizeDiff=
{width:n.outerWidth()-n.width(),height:n.outerHeight()-n.height()};this.originalMousePosition={left:d.pageX,top:d.pageY};this.aspectRatio=typeof h.aspectRatio=="number"?h.aspectRatio:this.originalSize.width/this.originalSize.height||1;h=c(".ui-resizable-"+this.axis).css("cursor");c("body").css("cursor",h=="auto"?this.axis+"-resize":h);n.addClass("ui-resizable-resizing");this._propagate("start",d);return true},_mouseDrag:function(d){var h=this.helper,l=this.originalMousePosition,n=this._change[this.axis];
if(!n)return false;l=n.apply(this,[d,d.pageX-l.left||0,d.pageY-l.top||0]);this._updateVirtualBoundaries(d.shiftKey);if(this._aspectRatio||d.shiftKey)l=this._updateRatio(l,d);l=this._respectSize(l,d);this._propagate("resize",d);h.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(l);this._trigger("resize",d,this.ui());return false},
_mouseStop:function(d){this.resizing=false;var h=this.options;if(this._helper){var l=this._proportionallyResizeElements,n=l.length&&/textarea/i.test(l[0].nodeName);l=n&&c.ui.hasScroll(l[0],"left")?0:this.sizeDiff.height;n=n?0:this.sizeDiff.width;n={width:this.helper.width()-n,height:this.helper.height()-l};l=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null;var v=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;h.animate||
this.element.css(c.extend(n,{top:v,left:l}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!h.animate&&this._proportionallyResize()}c("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",d);this._helper&&this.helper.remove();return false},_updateVirtualBoundaries:function(d){var h=this.options,l,n,v;h={minWidth:f(h.minWidth)?h.minWidth:0,maxWidth:f(h.maxWidth)?h.maxWidth:Infinity,minHeight:f(h.minHeight)?h.minHeight:
0,maxHeight:f(h.maxHeight)?h.maxHeight:Infinity};if(this._aspectRatio||d){d=h.minHeight*this.aspectRatio;n=h.minWidth/this.aspectRatio;l=h.maxHeight*this.aspectRatio;v=h.maxWidth/this.aspectRatio;if(d>h.minWidth)h.minWidth=d;if(n>h.minHeight)h.minHeight=n;if(l<h.maxWidth)h.maxWidth=l;if(v<h.maxHeight)h.maxHeight=v}this._vBoundaries=h},_updateCache:function(d){this.offset=this.helper.offset();if(f(d.left))this.position.left=d.left;if(f(d.top))this.position.top=d.top;if(f(d.height))this.size.height=
d.height;if(f(d.width))this.size.width=d.width},_updateRatio:function(d){var h=this.position,l=this.size,n=this.axis;if(f(d.height))d.width=d.height*this.aspectRatio;else if(f(d.width))d.height=d.width/this.aspectRatio;if(n=="sw"){d.left=h.left+(l.width-d.width);d.top=null}if(n=="nw"){d.top=h.top+(l.height-d.height);d.left=h.left+(l.width-d.width)}return d},_respectSize:function(d){var h=this._vBoundaries,l=this.axis,n=f(d.width)&&h.maxWidth&&h.maxWidth<d.width,v=f(d.height)&&h.maxHeight&&h.maxHeight<
d.height,B=f(d.width)&&h.minWidth&&h.minWidth>d.width,D=f(d.height)&&h.minHeight&&h.minHeight>d.height;if(B)d.width=h.minWidth;if(D)d.height=h.minHeight;if(n)d.width=h.maxWidth;if(v)d.height=h.maxHeight;var K=this.originalPosition.left+this.originalSize.width,R=this.position.top+this.size.height,Z=/sw|nw|w/.test(l);l=/nw|ne|n/.test(l);if(B&&Z)d.left=K-h.minWidth;if(n&&Z)d.left=K-h.maxWidth;if(D&&l)d.top=R-h.minHeight;if(v&&l)d.top=R-h.maxHeight;if((h=!d.width&&!d.height)&&!d.left&&d.top)d.top=null;
else if(h&&!d.top&&d.left)d.left=null;return d},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var d=this.helper||this.element,h=0;h<this._proportionallyResizeElements.length;h++){var l=this._proportionallyResizeElements[h];if(!this.borderDif){var n=[l.css("borderTopWidth"),l.css("borderRightWidth"),l.css("borderBottomWidth"),l.css("borderLeftWidth")],v=[l.css("paddingTop"),l.css("paddingRight"),l.css("paddingBottom"),l.css("paddingLeft")];this.borderDif=c.map(n,
function(B,D){var K=parseInt(B,10)||0,R=parseInt(v[D],10)||0;return K+R})}c.browser.msie&&(c(d).is(":hidden")||c(d).parents(":hidden").length)||l.css({height:d.height()-this.borderDif[0]-this.borderDif[2]||0,width:d.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var d=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||c('<div style="overflow:hidden;"></div>');var h=c.browser.msie&&c.browser.version<7,l=h?1:0;h=h?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+
h,height:this.element.outerHeight()+h,position:"absolute",left:this.elementOffset.left-l+"px",top:this.elementOffset.top-l+"px",zIndex:++d.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(d,h){return{width:this.originalSize.width+h}},w:function(d,h){return{left:this.originalPosition.left+h,width:this.originalSize.width-h}},n:function(d,h,l){return{top:this.originalPosition.top+l,height:this.originalSize.height-l}},s:function(d,h,l){return{height:this.originalSize.height+
l}},se:function(d,h,l){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[d,h,l]))},sw:function(d,h,l){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[d,h,l]))},ne:function(d,h,l){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[d,h,l]))},nw:function(d,h,l){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[d,h,l]))}},_propagate:function(d,h){c.ui.plugin.call(this,d,[h,this.ui()]);
d!="resize"&&this._trigger(d,h,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});c.extend(c.ui.resizable,{version:"1.8.16"});c.ui.plugin.add("resizable","alsoResize",{start:function(){var d=c(this).data("resizable").options,h=function(l){c(l).each(function(){var n=c(this);n.data("resizable-alsoresize",{width:parseInt(n.width(),
10),height:parseInt(n.height(),10),left:parseInt(n.css("left"),10),top:parseInt(n.css("top"),10),position:n.css("position")})})};if(typeof d.alsoResize=="object"&&!d.alsoResize.parentNode)if(d.alsoResize.length){d.alsoResize=d.alsoResize[0];h(d.alsoResize)}else c.each(d.alsoResize,function(l){h(l)});else h(d.alsoResize)},resize:function(d,h){var l=c(this).data("resizable"),n=l.options,v=l.originalSize,B=l.originalPosition,D={height:l.size.height-v.height||0,width:l.size.width-v.width||0,top:l.position.top-
B.top||0,left:l.position.left-B.left||0},K=function(R,Z){c(R).each(function(){var fa=c(this),ma=c(this).data("resizable-alsoresize"),r={},t=Z&&Z.length?Z:fa.parents(h.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(t,function(C,P){var aa=(ma[P]||0)+(D[P]||0);if(aa&&aa>=0)r[P]=aa||null});if(c.browser.opera&&/relative/.test(fa.css("position"))){l._revertToRelativePosition=true;fa.css({position:"absolute",top:"auto",left:"auto"})}fa.css(r)})};typeof n.alsoResize==
"object"&&!n.alsoResize.nodeType?c.each(n.alsoResize,function(R,Z){K(R,Z)}):K(n.alsoResize)},stop:function(){var d=c(this).data("resizable"),h=d.options,l=function(n){c(n).each(function(){var v=c(this);v.css({position:v.data("resizable-alsoresize").position})})};if(d._revertToRelativePosition){d._revertToRelativePosition=false;typeof h.alsoResize=="object"&&!h.alsoResize.nodeType?c.each(h.alsoResize,function(n){l(n)}):l(h.alsoResize)}c(this).removeData("resizable-alsoresize")}});c.ui.plugin.add("resizable",
"animate",{stop:function(d){var h=c(this).data("resizable"),l=h.options,n=h._proportionallyResizeElements,v=n.length&&/textarea/i.test(n[0].nodeName),B=v&&c.ui.hasScroll(n[0],"left")?0:h.sizeDiff.height;v={width:h.size.width-(v?0:h.sizeDiff.width),height:h.size.height-B};B=parseInt(h.element.css("left"),10)+(h.position.left-h.originalPosition.left)||null;var D=parseInt(h.element.css("top"),10)+(h.position.top-h.originalPosition.top)||null;h.element.animate(c.extend(v,D&&B?{top:D,left:B}:{}),{duration:l.animateDuration,
easing:l.animateEasing,step:function(){var K={width:parseInt(h.element.css("width"),10),height:parseInt(h.element.css("height"),10),top:parseInt(h.element.css("top"),10),left:parseInt(h.element.css("left"),10)};n&&n.length&&c(n[0]).css({width:K.width,height:K.height});h._updateCache(K);h._propagate("resize",d)}})}});c.ui.plugin.add("resizable","containment",{start:function(){var d=c(this).data("resizable"),h=d.element,l=d.options.containment;if(h=l instanceof c?l.get(0):/parent/.test(l)?h.parent().get(0):
l){d.containerElement=c(h);if(/document/.test(l)||l==document){d.containerOffset={left:0,top:0};d.containerPosition={left:0,top:0};d.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}}else{var n=c(h),v=[];c(["Top","Right","Left","Bottom"]).each(function(K,R){v[K]=a(n.css("padding"+R))});d.containerOffset=n.offset();d.containerPosition=n.position();d.containerSize={height:n.innerHeight()-v[3],width:n.innerWidth()-
v[1]};l=d.containerOffset;var B=d.containerSize.height,D=d.containerSize.width;D=c.ui.hasScroll(h,"left")?h.scrollWidth:D;B=c.ui.hasScroll(h)?h.scrollHeight:B;d.parentData={element:h,left:l.left,top:l.top,width:D,height:B}}}},resize:function(d){var h=c(this).data("resizable"),l=h.options,n=h.containerOffset,v=h.position;d=h._aspectRatio||d.shiftKey;var B={top:0,left:0},D=h.containerElement;if(D[0]!=document&&/static/.test(D.css("position")))B=n;if(v.left<(h._helper?n.left:0)){h.size.width+=h._helper?
h.position.left-n.left:h.position.left-B.left;if(d)h.size.height=h.size.width/l.aspectRatio;h.position.left=l.helper?n.left:0}if(v.top<(h._helper?n.top:0)){h.size.height+=h._helper?h.position.top-n.top:h.position.top;if(d)h.size.width=h.size.height*l.aspectRatio;h.position.top=h._helper?n.top:0}h.offset.left=h.parentData.left+h.position.left;h.offset.top=h.parentData.top+h.position.top;l=Math.abs((h._helper?h.offset.left-B.left:h.offset.left-B.left)+h.sizeDiff.width);n=Math.abs((h._helper?h.offset.top-
B.top:h.offset.top-n.top)+h.sizeDiff.height);v=h.containerElement.get(0)==h.element.parent().get(0);B=/relative|absolute/.test(h.containerElement.css("position"));if(v&&B)l-=h.parentData.left;if(l+h.size.width>=h.parentData.width){h.size.width=h.parentData.width-l;if(d)h.size.height=h.size.width/h.aspectRatio}if(n+h.size.height>=h.parentData.height){h.size.height=h.parentData.height-n;if(d)h.size.width=h.size.height*h.aspectRatio}},stop:function(){var d=c(this).data("resizable"),h=d.options,l=d.containerOffset,
n=d.containerPosition,v=d.containerElement,B=c(d.helper),D=B.offset(),K=B.outerWidth()-d.sizeDiff.width;B=B.outerHeight()-d.sizeDiff.height;d._helper&&!h.animate&&/relative/.test(v.css("position"))&&c(this).css({left:D.left-n.left-l.left,width:K,height:B});d._helper&&!h.animate&&/static/.test(v.css("position"))&&c(this).css({left:D.left-n.left-l.left,width:K,height:B})}});c.ui.plugin.add("resizable","ghost",{start:function(){var d=c(this).data("resizable"),h=d.options,l=d.size;d.ghost=d.originalElement.clone();
d.ghost.css({opacity:0.25,display:"block",position:"relative",height:l.height,width:l.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof h.ghost=="string"?h.ghost:"");d.ghost.appendTo(d.helper)},resize:function(){var d=c(this).data("resizable");d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(){var d=c(this).data("resizable");d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}});c.ui.plugin.add("resizable","grid",
{resize:function(){var d=c(this).data("resizable"),h=d.options,l=d.size,n=d.originalSize,v=d.originalPosition,B=d.axis;h.grid=typeof h.grid=="number"?[h.grid,h.grid]:h.grid;var D=Math.round((l.width-n.width)/(h.grid[0]||1))*(h.grid[0]||1);h=Math.round((l.height-n.height)/(h.grid[1]||1))*(h.grid[1]||1);if(/^(se|s|e)$/.test(B)){d.size.width=n.width+D;d.size.height=n.height+h}else if(/^(ne)$/.test(B)){d.size.width=n.width+D;d.size.height=n.height+h;d.position.top=v.top-h}else{if(/^(sw)$/.test(B)){d.size.width=
n.width+D;d.size.height=n.height+h}else{d.size.width=n.width+D;d.size.height=n.height+h;d.position.top=v.top-h}d.position.left=v.left-D}}});var a=function(d){return parseInt(d,10)||0},f=function(d){return!isNaN(parseInt(d,10))}})(jQuery);
(function(c){c.widget("ui.selectable",c.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var a=this;this.element.addClass("ui-selectable");this.dragged=false;var f;this.refresh=function(){f=c(a.options.filter,a.element[0]);f.each(function(){var d=c(this),h=d.offset();c.data(this,"selectable-item",{element:this,$element:d,left:h.left,top:h.top,right:h.left+d.outerWidth(),bottom:h.top+d.outerHeight(),startselected:false,selected:d.hasClass("ui-selected"),
selecting:d.hasClass("ui-selecting"),unselecting:d.hasClass("ui-unselecting")})})};this.refresh();this.selectees=f.addClass("ui-selectee");this._mouseInit();this.helper=c("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(a){var f=this;this.opos=[a.pageX,
a.pageY];if(!this.options.disabled){var d=this.options;this.selectees=c(d.filter,this.element[0]);this._trigger("start",a);c(d.appendTo).append(this.helper);this.helper.css({left:a.clientX,top:a.clientY,width:0,height:0});d.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var h=c.data(this,"selectable-item");h.startselected=true;if(!a.metaKey){h.$element.removeClass("ui-selected");h.selected=false;h.$element.addClass("ui-unselecting");h.unselecting=true;f._trigger("unselecting",
a,{unselecting:h.element})}});c(a.target).parents().andSelf().each(function(){var h=c.data(this,"selectable-item");if(h){var l=!a.metaKey||!h.$element.hasClass("ui-selected");h.$element.removeClass(l?"ui-unselecting":"ui-selected").addClass(l?"ui-selecting":"ui-unselecting");h.unselecting=!l;h.selecting=l;(h.selected=l)?f._trigger("selecting",a,{selecting:h.element}):f._trigger("unselecting",a,{unselecting:h.element});return false}})}},_mouseDrag:function(a){var f=this;this.dragged=true;if(!this.options.disabled){var d=
this.options,h=this.opos[0],l=this.opos[1],n=a.pageX,v=a.pageY;if(h>n){var B=n;n=h;h=B}if(l>v){B=v;v=l;l=B}this.helper.css({left:h,top:l,width:n-h,height:v-l});this.selectees.each(function(){var D=c.data(this,"selectable-item");if(!(!D||D.element==f.element[0])){var K=false;if(d.tolerance=="touch")K=!(D.left>n||D.right<h||D.top>v||D.bottom<l);else if(d.tolerance=="fit")K=D.left>h&&D.right<n&&D.top>l&&D.bottom<v;if(K){if(D.selected){D.$element.removeClass("ui-selected");D.selected=false}if(D.unselecting){D.$element.removeClass("ui-unselecting");
D.unselecting=false}if(!D.selecting){D.$element.addClass("ui-selecting");D.selecting=true;f._trigger("selecting",a,{selecting:D.element})}}else{if(D.selecting)if(a.metaKey&&D.startselected){D.$element.removeClass("ui-selecting");D.selecting=false;D.$element.addClass("ui-selected");D.selected=true}else{D.$element.removeClass("ui-selecting");D.selecting=false;if(D.startselected){D.$element.addClass("ui-unselecting");D.unselecting=true}f._trigger("unselecting",a,{unselecting:D.element})}if(D.selected)if(!a.metaKey&&
!D.startselected){D.$element.removeClass("ui-selected");D.selected=false;D.$element.addClass("ui-unselecting");D.unselecting=true;f._trigger("unselecting",a,{unselecting:D.element})}}}});return false}},_mouseStop:function(a){var f=this;this.dragged=false;c(".ui-unselecting",this.element[0]).each(function(){var d=c.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=false;d.startselected=false;f._trigger("unselected",a,{unselected:d.element})});c(".ui-selecting",this.element[0]).each(function(){var d=
c.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=false;d.selected=true;d.startselected=true;f._trigger("selected",a,{selected:d.element})});this._trigger("stop",a);this.helper.remove();return false}});c.extend(c.ui.selectable,{version:"1.8.16"})})(jQuery);
(function(c){c.widget("ui.sortable",c.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?a.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(a,f){if(a===
"disabled"){this.options[a]=f;this.widget()[f?"addClass":"removeClass"]("ui-sortable-disabled")}else c.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,f){if(this.reverting)return false;if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(a);var d=null,h=this;c(a.target).parents().each(function(){if(c.data(this,"sortable-item")==h){d=c(this);return false}});if(c.data(a.target,"sortable-item")==h)d=c(a.target);if(!d)return false;if(this.options.handle&&
!f){var l=false;c(this.options.handle,d).find("*").andSelf().each(function(){if(this==a.target)l=true});if(!l)return false}this.currentItem=d;this._removeCurrentsFromItems();return true},_mouseStart:function(a,f,d){f=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-
this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");c.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;f.cursorAt&&this._adjustOffsetFromHelper(f.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();f.containment&&this._setContainment();if(f.cursor){if(c("body").css("cursor"))this._storedCursor=c("body").css("cursor");c("body").css("cursor",f.cursor)}if(f.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",f.opacity)}if(f.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",f.zIndex)}if(this.scrollParent[0]!=
document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(d=this.containers.length-1;d>=0;d--)this.containers[d]._trigger("activate",a,this._uiHash(this));if(c.ui.ddmanager)c.ui.ddmanager.current=this;c.ui.ddmanager&&!f.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,a);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);
return true},_mouseDrag:function(a){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var f=this.options,d=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<f.scrollSensitivity)this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+f.scrollSpeed;else if(a.pageY-this.overflowOffset.top<
f.scrollSensitivity)this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-f.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<f.scrollSensitivity)this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+f.scrollSpeed;else if(a.pageX-this.overflowOffset.left<f.scrollSensitivity)this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-f.scrollSpeed}else{if(a.pageY-c(document).scrollTop()<f.scrollSensitivity)d=c(document).scrollTop(c(document).scrollTop()-
f.scrollSpeed);else if(c(window).height()-(a.pageY-c(document).scrollTop())<f.scrollSensitivity)d=c(document).scrollTop(c(document).scrollTop()+f.scrollSpeed);if(a.pageX-c(document).scrollLeft()<f.scrollSensitivity)d=c(document).scrollLeft(c(document).scrollLeft()-f.scrollSpeed);else if(c(window).width()-(a.pageX-c(document).scrollLeft())<f.scrollSensitivity)d=c(document).scrollLeft(c(document).scrollLeft()+f.scrollSpeed)}d!==false&&c.ui.ddmanager&&!f.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,
a)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(f=this.items.length-1;f>=0;f--){d=this.items[f];var h=d.item[0],l=this._intersectsWithPointer(d);if(l)if(h!=this.currentItem[0]&&this.placeholder[l==1?"next":"prev"]()[0]!=h&&!c.ui.contains(this.placeholder[0],h)&&(this.options.type=="semi-dynamic"?!c.ui.contains(this.element[0],
h):true)){this.direction=l==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(d))this._rearrange(a,d);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);c.ui.ddmanager&&c.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(a,f){if(a){c.ui.ddmanager&&!this.options.dropBehaviour&&c.ui.ddmanager.drop(this,a);if(this.options.revert){var d=this,h=d.placeholder.offset();
d.reverting=true;c(this.helper).animate({left:h.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:h.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(a)})}else this._clear(a,f);return false}},cancel:function(){if(this.dragging){this._mouseUp({target:null});this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):
this.currentItem.show();for(var a=this.containers.length-1;a>=0;a--){this.containers[a]._trigger("deactivate",null,this._uiHash(this));if(this.containers[a].containerCache.over){this.containers[a]._trigger("out",null,this._uiHash(this));this.containers[a].containerCache.over=0}}}if(this.placeholder){this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();c.extend(this,
{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?c(this.domPosition.prev).after(this.currentItem):c(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(a){var f=this._getItemsAsjQuery(a&&a.connected),d=[];a=a||{};c(f).each(function(){var h=(c(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);if(h)d.push((a.key||h[1]+"[]")+"="+(a.key&&a.expression?h[1]:h[2]))});!d.length&&a.key&&d.push(a.key+"=");return d.join("&")},
toArray:function(a){var f=this._getItemsAsjQuery(a&&a.connected),d=[];a=a||{};f.each(function(){d.push(c(a.item||this).attr(a.attribute||"id")||"")});return d},_intersectsWith:function(a){var f=this.positionAbs.left,d=f+this.helperProportions.width,h=this.positionAbs.top,l=h+this.helperProportions.height,n=a.left,v=n+a.width,B=a.top,D=B+a.height,K=this.offset.click.top,R=this.offset.click.left;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=
"pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?h+K>B&&h+K<D&&f+R>n&&f+R<v:n<f+this.helperProportions.width/2&&d-this.helperProportions.width/2<v&&B<h+this.helperProportions.height/2&&l-this.helperProportions.height/2<D},_intersectsWithPointer:function(a){var f=c.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height);a=c.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);f=f&&a;a=this._getDragVerticalDirection();
var d=this._getDragHorizontalDirection();if(!f)return false;return this.floating?d&&d=="right"||a=="down"?2:1:a&&(a=="down"?2:1)},_intersectsWithSides:function(a){var f=c.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=c.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var d=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();return this.floating&&h?h=="right"&&a||h=="left"&&!a:d&&(d=="down"&&f||d=="up"&&!f)},
_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){var f=[],d=[],h=this._connectWith();
if(h&&a)for(a=h.length-1;a>=0;a--)for(var l=c(h[a]),n=l.length-1;n>=0;n--){var v=c.data(l[n],"sortable");if(v&&v!=this&&!v.options.disabled)d.push([c.isFunction(v.options.items)?v.options.items.call(v.element):c(v.options.items,v.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),v])}d.push([c.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):c(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
this]);for(a=d.length-1;a>=0;a--)d[a][0].each(function(){f.push(this)});return c(f)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data(sortable-item)"),f=0;f<this.items.length;f++)for(var d=0;d<a.length;d++)a[d]==this.items[f].item[0]&&this.items.splice(f,1)},_refreshItems:function(a){this.items=[];this.containers=[this];var f=this.items,d=[[c.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):c(this.options.items,this.element),
this]],h=this._connectWith();if(h)for(var l=h.length-1;l>=0;l--)for(var n=c(h[l]),v=n.length-1;v>=0;v--){var B=c.data(n[v],"sortable");if(B&&B!=this&&!B.options.disabled){d.push([c.isFunction(B.options.items)?B.options.items.call(B.element[0],a,{item:this.currentItem}):c(B.options.items,B.element),B]);this.containers.push(B)}}for(l=d.length-1;l>=0;l--){a=d[l][1];h=d[l][0];v=0;for(n=h.length;v<n;v++){B=c(h[v]);B.data("sortable-item",a);f.push({item:B,instance:a,width:0,height:0,left:0,top:0})}}},refreshPositions:function(a){if(this.offsetParent&&
this.helper)this.offset.parent=this._getParentOffset();for(var f=this.items.length-1;f>=0;f--){var d=this.items[f];if(!(d.instance!=this.currentContainer&&this.currentContainer&&d.item[0]!=this.currentItem[0])){var h=this.options.toleranceElement?c(this.options.toleranceElement,d.item):d.item;if(!a){d.width=h.outerWidth();d.height=h.outerHeight()}h=h.offset();d.left=h.left;d.top=h.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(f=
this.containers.length-1;f>=0;f--){h=this.containers[f].element.offset();this.containers[f].containerCache.left=h.left;this.containers[f].containerCache.top=h.top;this.containers[f].containerCache.width=this.containers[f].element.outerWidth();this.containers[f].containerCache.height=this.containers[f].element.outerHeight()}return this},_createPlaceholder:function(a){var f=a||this,d=f.options;if(!d.placeholder||d.placeholder.constructor==String){var h=d.placeholder;d.placeholder={element:function(){var l=
c(document.createElement(f.currentItem[0].nodeName)).addClass(h||f.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!h)l.style.visibility="hidden";return l},update:function(l,n){if(!(h&&!d.forcePlaceholderSize)){n.height()||n.height(f.currentItem.innerHeight()-parseInt(f.currentItem.css("paddingTop")||0,10)-parseInt(f.currentItem.css("paddingBottom")||0,10));n.width()||n.width(f.currentItem.innerWidth()-parseInt(f.currentItem.css("paddingLeft")||0,10)-parseInt(f.currentItem.css("paddingRight")||
0,10))}}}}f.placeholder=c(d.placeholder.element.call(f.element,f.currentItem));f.currentItem.after(f.placeholder);d.placeholder.update(f,f.placeholder)},_contactContainers:function(a){for(var f=null,d=null,h=this.containers.length-1;h>=0;h--)if(!c.ui.contains(this.currentItem[0],this.containers[h].element[0]))if(this._intersectsWith(this.containers[h].containerCache)){if(!(f&&c.ui.contains(this.containers[h].element[0],f.element[0]))){f=this.containers[h];d=h}}else if(this.containers[h].containerCache.over){this.containers[h]._trigger("out",
a,this._uiHash(this));this.containers[h].containerCache.over=0}if(f)if(this.containers.length===1){this.containers[d]._trigger("over",a,this._uiHash(this));this.containers[d].containerCache.over=1}else if(this.currentContainer!=this.containers[d]){f=1E4;h=null;for(var l=this.positionAbs[this.containers[d].floating?"left":"top"],n=this.items.length-1;n>=0;n--)if(c.ui.contains(this.containers[d].element[0],this.items[n].item[0])){var v=this.items[n][this.containers[d].floating?"left":"top"];if(Math.abs(v-
l)<f){f=Math.abs(v-l);h=this.items[n]}}if(h||this.options.dropOnEmpty){this.currentContainer=this.containers[d];h?this._rearrange(a,h,null,true):this._rearrange(a,null,this.containers[d].element,true);this._trigger("change",a,this._uiHash());this.containers[d]._trigger("change",a,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[d]._trigger("over",a,this._uiHash(this));this.containers[d].containerCache.over=1}}},_createHelper:function(a){var f=
this.options;a=c.isFunction(f.helper)?c(f.helper.apply(this.element[0],[a,this.currentItem])):f.helper=="clone"?this.currentItem.clone():this.currentItem;a.parents("body").length||c(f.appendTo!="parent"?f.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);if(a[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(a[0].style.width==
""||f.forceHelperSize)a.width(this.currentItem.width());if(a[0].style.height==""||f.forceHelperSize)a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(c.isArray(a))a={left:+a[0],top:+a[1]||0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=
this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&c.browser.msie)a=
{top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),
10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,c(a.containment=="document"?
document:window).width()-this.helperProportions.width-this.margins.left,(c(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var f=c(a.containment)[0];a=c(a.containment).offset();var d=c(f).css("overflow")!="hidden";this.containment=[a.left+(parseInt(c(f).css("borderLeftWidth"),10)||0)+(parseInt(c(f).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(c(f).css("borderTopWidth"),
10)||0)+(parseInt(c(f).css("paddingTop"),10)||0)-this.margins.top,a.left+(d?Math.max(f.scrollWidth,f.offsetWidth):f.offsetWidth)-(parseInt(c(f).css("borderLeftWidth"),10)||0)-(parseInt(c(f).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(d?Math.max(f.scrollHeight,f.offsetHeight):f.offsetHeight)-(parseInt(c(f).css("borderTopWidth"),10)||0)-(parseInt(c(f).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,f){if(!f)f=
this.position;var d=a=="absolute"?1:-1,h=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(h[0].tagName);return{top:f.top+this.offset.relative.top*d+this.offset.parent.top*d-(c.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():l?0:h.scrollTop())*d),left:f.left+this.offset.relative.left*d+this.offset.parent.left*d-(c.browser.safari&&
this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:h.scrollLeft())*d)}},_generatePosition:function(a){var f=this.options,d=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(d[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();
var l=a.pageX,n=a.pageY;if(this.originalPosition){if(this.containment){if(a.pageX-this.offset.click.left<this.containment[0])l=this.containment[0]+this.offset.click.left;if(a.pageY-this.offset.click.top<this.containment[1])n=this.containment[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>this.containment[2])l=this.containment[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>this.containment[3])n=this.containment[3]+this.offset.click.top}if(f.grid){n=this.originalPageY+Math.round((n-
this.originalPageY)/f.grid[1])*f.grid[1];n=this.containment?!(n-this.offset.click.top<this.containment[1]||n-this.offset.click.top>this.containment[3])?n:!(n-this.offset.click.top<this.containment[1])?n-f.grid[1]:n+f.grid[1]:n;l=this.originalPageX+Math.round((l-this.originalPageX)/f.grid[0])*f.grid[0];l=this.containment?!(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l:!(l-this.offset.click.left<this.containment[0])?l-f.grid[0]:l+f.grid[0]:l}}return{top:n-
this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(c.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():h?0:d.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(c.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:d.scrollLeft())}},_rearrange:function(a,f,d,h){d?d[0].appendChild(this.placeholder[0]):f.item[0].parentNode.insertBefore(this.placeholder[0],
this.direction=="down"?f.item[0]:f.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var l=this,n=this.counter;window.setTimeout(function(){n==l.counter&&l.refreshPositions(!h)},0)},_clear:function(a,f){this.reverting=false;var d=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var h in this._storedCSS)if(this._storedCSS[h]=="auto"||this._storedCSS[h]=="static")this._storedCSS[h]=
"";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!f&&d.push(function(l){this._trigger("receive",l,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!f)d.push(function(l){this._trigger("update",l,this._uiHash())});if(!c.ui.contains(this.element[0],this.currentItem[0])){f||d.push(function(l){this._trigger("remove",
l,this._uiHash())});for(h=this.containers.length-1;h>=0;h--)if(c.ui.contains(this.containers[h].element[0],this.currentItem[0])&&!f){d.push(function(l){return function(n){l._trigger("receive",n,this._uiHash(this))}}.call(this,this.containers[h]));d.push(function(l){return function(n){l._trigger("update",n,this._uiHash(this))}}.call(this,this.containers[h]))}}for(h=this.containers.length-1;h>=0;h--){f||d.push(function(l){return function(n){l._trigger("deactivate",n,this._uiHash(this))}}.call(this,
this.containers[h]));if(this.containers[h].containerCache.over){d.push(function(l){return function(n){l._trigger("out",n,this._uiHash(this))}}.call(this,this.containers[h]));this.containers[h].containerCache.over=0}}this._storedCursor&&c("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!f){this._trigger("beforeStop",
a,this._uiHash());for(h=0;h<d.length;h++)d[h].call(this,a);this._trigger("stop",a,this._uiHash())}return false}f||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!f){for(h=0;h<d.length;h++)d[h].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){c.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},
_uiHash:function(a){var f=a||this;return{helper:f.helper,placeholder:f.placeholder||c([]),position:f.position,originalPosition:f.originalPosition,offset:f.positionAbs,item:f.currentItem,sender:a?a.element:null}}});c.extend(c.ui.sortable,{version:"1.8.16"})})(jQuery);
(function(){function c(q,e,y){if(q===e)return q!==0||1/q==1/e;if(q==null)return q===e;var F=typeof q;if(F!=typeof e)return false;if(!q!=!e)return false;if(z.isNaN(q))return z.isNaN(e);var Q=z.isString(q),Y=z.isString(e);if(Q||Y)return Q&&Y&&String(q)==String(e);Q=z.isNumber(q);Y=z.isNumber(e);if(Q||Y)return Q&&Y&&+q==+e;Q=z.isBoolean(q);Y=z.isBoolean(e);if(Q||Y)return Q&&Y&&+q==+e;Q=z.isDate(q);Y=z.isDate(e);if(Q||Y)return Q&&Y&&q.getTime()==e.getTime();Q=z.isRegExp(q);Y=z.isRegExp(e);if(Q||Y)return Q&&
Y&&q.source==e.source&&q.global==e.global&&q.multiline==e.multiline&&q.ignoreCase==e.ignoreCase;if(F!="object")return false;if(q._chain)q=q._wrapped;if(e._chain)e=e._wrapped;if(z.isFunction(q.isEqual))return q.isEqual(e);for(F=y.length;F--;)if(y[F]==q)return true;y.push(q);F=0;Q=true;if(q.length===+q.length||e.length===+e.length){if(F=q.length,Q=F==e.length)for(;F--;)if(!(Q=F in q==F in e&&c(q[F],e[F],y)))break}else{for(var ha in q)if(D.call(q,ha)&&(F++,!(Q=D.call(e,ha)&&c(q[ha],e[ha],y))))break;
if(Q){for(ha in e)if(D.call(e,ha)&&!F--)break;Q=!F}}y.pop();return Q}var a=this,f=a._,d={},h=Array.prototype,l=Object.prototype,n=h.slice,v=h.unshift,B=l.toString,D=l.hasOwnProperty,K=h.forEach,R=h.map,Z=h.reduce,fa=h.reduceRight,ma=h.filter,r=h.every,t=h.some,C=h.indexOf,P=h.lastIndexOf;l=Array.isArray;var aa=Object.keys,ca=Function.prototype.bind,z=function(q){return new ba(q)};typeof module!=="undefined"&&module.exports?(module.exports=z,z._=z):(a._=z);z.VERSION="1.2.0";var da=z.each=z.forEach=
function(q,e,y){if(q!=null)if(K&&q.forEach===K)q.forEach(e,y);else if(q.length===+q.length)for(var F=0,Q=q.length;F<Q;F++){if(F in q&&e.call(y,q[F],F,q)===d)break}else for(F in q)if(D.call(q,F)&&e.call(y,q[F],F,q)===d)break};z.map=function(q,e,y){var F=[];if(q==null)return F;if(R&&q.map===R)return q.map(e,y);da(q,function(Q,Y,ha){F[F.length]=e.call(y,Q,Y,ha)});return F};z.reduce=z.foldl=z.inject=function(q,e,y,F){var Q=y!==void 0;q==null&&(q=[]);if(Z&&q.reduce===Z)return F&&(e=z.bind(e,F)),Q?q.reduce(e,
y):q.reduce(e);da(q,function(Y,ha,xa){Q?(y=e.call(F,y,Y,ha,xa)):(y=Y,Q=true)});if(!Q)throw new TypeError("Reduce of empty array with no initial value");return y};z.reduceRight=z.foldr=function(q,e,y,F){q==null&&(q=[]);if(fa&&q.reduceRight===fa)return F&&(e=z.bind(e,F)),y!==void 0?q.reduceRight(e,y):q.reduceRight(e);q=(z.isArray(q)?q.slice():z.toArray(q)).reverse();return z.reduce(q,e,y,F)};z.find=z.detect=function(q,e,y){var F;oa(q,function(Q,Y,ha){if(e.call(y,Q,Y,ha))return F=Q,true});return F};
z.filter=z.select=function(q,e,y){var F=[];if(q==null)return F;if(ma&&q.filter===ma)return q.filter(e,y);da(q,function(Q,Y,ha){e.call(y,Q,Y,ha)&&(F[F.length]=Q)});return F};z.reject=function(q,e,y){var F=[];if(q==null)return F;da(q,function(Q,Y,ha){e.call(y,Q,Y,ha)||(F[F.length]=Q)});return F};z.every=z.all=function(q,e,y){var F=true;if(q==null)return F;if(r&&q.every===r)return q.every(e,y);da(q,function(Q,Y,ha){if(!(F=F&&e.call(y,Q,Y,ha)))return d});return F};var oa=z.some=z.any=function(q,e,y){e=
e||z.identity;var F=false;if(q==null)return F;if(t&&q.some===t)return q.some(e,y);da(q,function(Q,Y,ha){if(F|=e.call(y,Q,Y,ha))return d});return!!F};z.include=z.contains=function(q,e){var y=false;if(q==null)return y;if(C&&q.indexOf===C)return q.indexOf(e)!=-1;oa(q,function(F){if(y=F===e)return true});return y};z.invoke=function(q,e){var y=n.call(arguments,2);return z.map(q,function(F){return(e.call?e||F:F[e]).apply(F,y)})};z.pluck=function(q,e){return z.map(q,function(y){return y[e]})};z.max=function(q,
e,y){if(!e&&z.isArray(q))return Math.max.apply(Math,q);if(!e&&z.isEmpty(q))return-Infinity;var F={computed:-Infinity};da(q,function(Q,Y,ha){Y=e?e.call(y,Q,Y,ha):Q;Y>=F.computed&&(F={value:Q,computed:Y})});return F.value};z.min=function(q,e,y){if(!e&&z.isArray(q))return Math.min.apply(Math,q);if(!e&&z.isEmpty(q))return Infinity;var F={computed:Infinity};da(q,function(Q,Y,ha){Y=e?e.call(y,Q,Y,ha):Q;Y<F.computed&&(F={value:Q,computed:Y})});return F.value};z.shuffle=function(q){var e=[],y;da(q,function(F,
Q){Q==0?(e[0]=F):(y=Math.floor(Math.random()*(Q+1)),e[Q]=e[y],e[y]=F)});return e};z.sortBy=function(q,e,y){return z.pluck(z.map(q,function(F,Q,Y){return{value:F,criteria:e.call(y,F,Q,Y)}}).sort(function(F,Q){var Y=F.criteria,ha=Q.criteria;return Y<ha?-1:Y>ha?1:0}),"value")};z.groupBy=function(q,e){var y={};da(q,function(F,Q){var Y=e(F,Q);(y[Y]||(y[Y]=[])).push(F)});return y};z.sortedIndex=function(q,e,y){y||(y=z.identity);for(var F=0,Q=q.length;F<Q;){var Y=F+Q>>1;y(q[Y])<y(e)?(F=Y+1):(Q=Y)}return F};
z.toArray=function(q){return!q?[]:q.toArray?q.toArray():z.isArray(q)?n.call(q):z.isArguments(q)?n.call(q):z.values(q)};z.size=function(q){return z.toArray(q).length};z.first=z.head=function(q,e,y){return e!=null&&!y?n.call(q,0,e):q[0]};z.initial=function(q,e,y){return n.call(q,0,q.length-(e==null||y?1:e))};z.last=function(q,e,y){return e!=null&&!y?n.call(q,q.length-e):q[q.length-1]};z.rest=z.tail=function(q,e,y){return n.call(q,e==null||y?1:e)};z.compact=function(q){return z.filter(q,function(e){return!!e})};
z.flatten=function(q){return z.reduce(q,function(e,y){if(z.isArray(y))return e.concat(z.flatten(y));e[e.length]=y;return e},[])};z.without=function(q){return z.difference(q,n.call(arguments,1))};z.uniq=z.unique=function(q,e,y){y=y?z.map(q,y):q;var F=[];z.reduce(y,function(Q,Y,ha){if(0==ha||(e===true?z.last(Q)!=Y:!z.include(Q,Y))){Q[Q.length]=Y;F[F.length]=q[ha]}return Q},[]);return F};z.union=function(){return z.uniq(z.flatten(arguments))};z.intersection=z.intersect=function(q){var e=n.call(arguments,
1);return z.filter(z.uniq(q),function(y){return z.every(e,function(F){return z.indexOf(F,y)>=0})})};z.difference=function(q,e){return z.filter(q,function(y){return!z.include(e,y)})};z.zip=function(){for(var q=n.call(arguments),e=z.max(z.pluck(q,"length")),y=Array(e),F=0;F<e;F++)y[F]=z.pluck(q,""+F);return y};z.indexOf=function(q,e,y){if(q==null)return-1;var F;if(y)return y=z.sortedIndex(q,e),q[y]===e?y:-1;if(C&&q.indexOf===C)return q.indexOf(e);y=0;for(F=q.length;y<F;y++)if(q[y]===e)return y;return-1};
z.lastIndexOf=function(q,e){if(q==null)return-1;if(P&&q.lastIndexOf===P)return q.lastIndexOf(e);for(var y=q.length;y--;)if(q[y]===e)return y;return-1};z.range=function(q,e,y){arguments.length<=1&&(e=q||0,q=0);y=arguments[2]||1;for(var F=Math.max(Math.ceil((e-q)/y),0),Q=0,Y=Array(F);Q<F;){Y[Q++]=q;q+=y}return Y};z.bind=function(q,e){if(q.bind===ca&&ca)return ca.apply(q,n.call(arguments,1));var y=n.call(arguments,2);return function(){return q.apply(e,y.concat(n.call(arguments)))}};z.bindAll=function(q){var e=
n.call(arguments,1);e.length==0&&(e=z.functions(q));da(e,function(y){q[y]=z.bind(q[y],q)});return q};z.memoize=function(q,e){var y={};e||(e=z.identity);return function(){var F=e.apply(this,arguments);return D.call(y,F)?y[F]:(y[F]=q.apply(this,arguments))}};z.delay=function(q,e){var y=n.call(arguments,2);return setTimeout(function(){return q.apply(q,y)},e)};z.defer=function(q){return z.delay.apply(z,[q,1].concat(n.call(arguments,1)))};var S=function(q,e,y){var F;return function(){var Q=this,Y=arguments,
ha=function(){F=null;q.apply(Q,Y)};y&&clearTimeout(F);if(y||!F)F=setTimeout(ha,e)}};z.throttle=function(q,e){return S(q,e,false)};z.debounce=function(q,e){return S(q,e,true)};z.once=function(q){var e=false,y;return function(){if(e)return y;e=true;return y=q.apply(this,arguments)}};z.wrap=function(q,e){return function(){var y=[q].concat(n.call(arguments));return e.apply(this,y)}};z.compose=function(){var q=n.call(arguments);return function(){for(var e=n.call(arguments),y=q.length-1;y>=0;y--)e=[q[y].apply(this,
e)];return e[0]}};z.after=function(q,e){return function(){if(--q<1)return e.apply(this,arguments)}};z.keys=aa||function(q){if(q!==Object(q))throw new TypeError("Invalid object");var e=[],y;for(y in q)D.call(q,y)&&(e[e.length]=y);return e};z.values=function(q){return z.map(q,z.identity)};z.functions=z.methods=function(q){var e=[],y;for(y in q)z.isFunction(q[y])&&e.push(y);return e.sort()};z.extend=function(q){da(n.call(arguments,1),function(e){for(var y in e)e[y]!==void 0&&(q[y]=e[y])});return q};
z.defaults=function(q){da(n.call(arguments,1),function(e){for(var y in e)q[y]==null&&(q[y]=e[y])});return q};z.clone=function(q){return z.isArray(q)?q.slice():z.extend({},q)};z.tap=function(q,e){e(q);return q};z.isEqual=function(q,e){return c(q,e,[])};z.isEmpty=function(q){if(z.isArray(q)||z.isString(q))return q.length===0;for(var e in q)if(D.call(q,e))return false;return true};z.isElement=function(q){return!!(q&&q.nodeType==1)};z.isArray=l||function(q){return B.call(q)==="[object Array]"};z.isObject=
function(q){return q===Object(q)};z.isArguments=function(q){return!(!q||!D.call(q,"callee"))};z.isFunction=function(q){return!(!q||!q.constructor||!q.call||!q.apply)};z.isString=function(q){return!!(q===""||q&&q.charCodeAt&&q.substr)};z.isNumber=function(q){return!!(q===0||q&&q.toExponential&&q.toFixed)};z.isNaN=function(q){return q!==q};z.isBoolean=function(q){return q===true||q===false||B.call(q)=="[object Boolean]"};z.isDate=function(q){return!(!q||!q.getTimezoneOffset||!q.setUTCFullYear)};z.isRegExp=
function(q){return!(!q||!q.test||!q.exec||!(q.ignoreCase||q.ignoreCase===false))};z.isNull=function(q){return q===null};z.isUndefined=function(q){return q===void 0};z.noConflict=function(){a._=f;return this};z.identity=function(q){return q};z.times=function(q,e,y){for(var F=0;F<q;F++)e.call(y,F)};z.escape=function(q){return(""+q).replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};z.mixin=
function(q){da(z.functions(q),function(e){sa(e,z[e]=q[e])})};var X=0;z.uniqueId=function(q){var e=X++;return q?q+e:e};z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};z.template=function(q,e){var y=z.templateSettings;y="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+q.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(y.escape,function(F,Q){return"',_.escape("+Q.replace(/\\'/g,"'")+"),'"}).replace(y.interpolate,
function(F,Q){return"',"+Q.replace(/\\'/g,"'")+",'"}).replace(y.evaluate||null,function(F,Q){return"');"+Q.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";y=new Function("obj",y);return e?y(e):y};var ba=function(q){this._wrapped=q};z.prototype=ba.prototype;var N=function(q,e){return e?z(q).chain():q},sa=function(q,e){ba.prototype[q]=function(){var y=n.call(arguments);v.call(y,this._wrapped);return N(e.apply(z,
y),this._chain)}};z.mixin(z);da("pop,push,reverse,shift,sort,splice,unshift".split(","),function(q){var e=h[q];ba.prototype[q]=function(){e.apply(this._wrapped,arguments);return N(this._wrapped,this._chain)}});da(["concat","join","slice"],function(q){var e=h[q];ba.prototype[q]=function(){return N(e.apply(this._wrapped,arguments),this._chain)}});ba.prototype.chain=function(){this._chain=true;return this};ba.prototype.value=function(){return this._wrapped}})();
(function(c,a){var f,d=/:([\w\d]+)/g,h=/\?([^#]*)$/,l=function(r){return Array.prototype.slice.call(r)},n=function(r){return Object.prototype.toString.call(r)==="[object Function]"},v=function(r){return Object.prototype.toString.call(r)==="[object Array]"},B=function(r){return decodeURIComponent((r||"").replace(/\+/g," "))},D=encodeURIComponent,K=function(r){return String(r).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},R=function(r){return function(t,
C){return this.route.apply(this,[r,t,C])}},Z={},fa=!!(a.history&&history.pushState),ma=[];f=function(){var r=l(arguments),t,C;f.apps=f.apps||{};if(r.length===0||r[0]&&n(r[0]))return f.apply(f,["body"].concat(r));else if(typeof(C=r.shift())=="string"){t=f.apps[C]||new f.Application;t.element_selector=C;r.length>0&&c.each(r,function(P,aa){t.use(aa)});t.element_selector!=C&&delete f.apps[C];return f.apps[t.element_selector]=t}};f.VERSION="0.7.0";f.addLogger=function(r){ma.push(r)};f.log=function(){var r=
l(arguments);r.unshift("["+Date()+"]");c.each(ma,function(t,C){C.apply(f,r)})};if(typeof a.console!="undefined")n(a.console.log.apply)?f.addLogger(function(){a.console.log.apply(a.console,arguments)}):f.addLogger(function(){a.console.log(arguments)});else typeof console!="undefined"&&f.addLogger(function(){console.log.apply(console,arguments)});c.extend(f,{makeArray:l,isFunction:n,isArray:v});f.Object=function(r){return c.extend(this,r||{})};c.extend(f.Object.prototype,{escapeHTML:K,h:K,toHash:function(){var r=
{};c.each(this,function(t,C){n(C)||(r[t]=C)});return r},toHTML:function(){var r="";c.each(this,function(t,C){n(C)||(r+="<strong>"+t+"</strong> "+C+"<br />")});return r},keys:function(r){var t=[];for(var C in this)if(!n(this[C])||!r)t.push(C);return t},has:function(r){return this[r]&&c.trim(this[r].toString())!==""},join:function(){var r=l(arguments),t=r.shift();return r.join(t)},log:function(){f.log.apply(f,arguments)},toString:function(r){var t=[];c.each(this,function(C,P){if(!n(P)||r)t.push('"'+
C+'": '+P.toString())});return"Sammy.Object: {"+t.join(",")+"}"}});f.DefaultLocationProxy=function(r,t){this.app=r;this.is_native=false;this.has_history=fa;this._startPolling(t)};f.DefaultLocationProxy.fullPath=function(r){var t=r.toString().match(/^[^#]*(#.+)$/);return[r.pathname,r.search,t?t[1]:""].join("")};f.DefaultLocationProxy.prototype={bind:function(){var r=this,t=this.app,C=f.DefaultLocationProxy;c(a).bind("hashchange."+this.app.eventNamespace(),function(P,aa){if(r.is_native===false&&!aa){r.is_native=
true;a.clearInterval(C._interval)}t.trigger("location-changed")});if(fa&&!t.disable_push_state){c(a).bind("popstate."+this.app.eventNamespace(),function(){t.trigger("location-changed")});c("a").live("click.history-"+this.app.eventNamespace(),function(P){var aa=C.fullPath(this);if(this.hostname==a.location.hostname&&t.lookupRoute("get",aa)){P.preventDefault();r.setLocation(aa);return false}})}if(!C._bindings)C._bindings=0;C._bindings++},unbind:function(){c(a).unbind("hashchange."+this.app.eventNamespace());
c(a).unbind("popstate."+this.app.eventNamespace());c("a").die("click.history-"+this.app.eventNamespace());f.DefaultLocationProxy._bindings--;f.DefaultLocationProxy._bindings<=0&&a.clearInterval(f.DefaultLocationProxy._interval)},getLocation:function(){return f.DefaultLocationProxy.fullPath(a.location)},setLocation:function(r){if(/^([^#\/]|$)/.test(r))r=fa?"/"+r:"#!/"+r;if(r!=this.getLocation())if(fa&&/^\//.test(r)){history.pushState({path:r},a.title,r);this.app.trigger("location-changed")}else return a.location=
r},_startPolling:function(r){var t=this;if(!f.DefaultLocationProxy._interval){r||(r=10);var C=function(){var P=t.getLocation();if(typeof f.DefaultLocationProxy._last_location=="undefined"||P!=f.DefaultLocationProxy._last_location)a.setTimeout(function(){c(a).trigger("hashchange",[true])},0);f.DefaultLocationProxy._last_location=P};C();f.DefaultLocationProxy._interval=a.setInterval(C,r)}}};f.Application=function(r){var t=this;this.routes={};this.listeners=new f.Object({});this.arounds=[];this.befores=
[];this.namespace=(new Date).getTime()+"-"+parseInt(Math.random()*1E3,10);this.context_prototype=function(){f.EventContext.apply(this,arguments)};this.context_prototype.prototype=new f.EventContext;n(r)&&r.apply(this,[this]);this._location_proxy||this.setLocationProxy(new f.DefaultLocationProxy(this,this.run_interval_every));this.debug&&this.bindToAllEvents(function(C,P){t.log(t.toString(),C.cleaned_type,P||{})})};f.Application.prototype=c.extend({},f.Object.prototype,{ROUTE_VERBS:["get","post","put",
"delete"],APP_EVENTS:["run","unload","lookup-route","run-route","route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect","location-changed"],_last_route:null,_location_proxy:null,_running:false,element_selector:"body",debug:false,raise_errors:false,run_interval_every:50,disable_push_state:false,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(r){return r?c(this.element_selector).find(r):
c(this.element_selector)},use:function(){var r=l(arguments),t=r.shift(),C=t||"";try{r.unshift(this);if(typeof t=="string"){C="Sammy."+t;t=f[t]}t.apply(this,r)}catch(P){if(typeof t==="undefined")this.error("Plugin Error: called use() but plugin ("+C.toString()+") is not defined",P);else n(t)?this.error("Plugin Error",P):this.error("Plugin Error: called use() but '"+C.toString()+"' is not a function",P)}return this},setLocationProxy:function(r){var t=this._location_proxy;this._location_proxy=r;if(this.isRunning()){t&&
t.unbind();this._location_proxy.bind()}},route:function(r,t,C){var P=this,aa=[],ca,z;if(!C&&n(t)){C=t=r;r="any"}r=r.toLowerCase();if(t.constructor==String){for(d.lastIndex=0;(z=d.exec(t))!==null;)aa.push(z[1]);t=new RegExp(t.replace(d,"([^/]+)")+"$")}if(typeof C=="string")C=P[C];ca=function(da){var oa={verb:da,path:t,callback:C,param_names:aa};P.routes[da]=P.routes[da]||[];P.routes[da].push(oa)};r==="any"?c.each(this.ROUTE_VERBS,function(da,oa){ca(oa)}):ca(r);return this},get:R("get"),post:R("post"),
put:R("put"),del:R("delete"),any:R("any"),mapRoutes:function(r){var t=this;c.each(r,function(C,P){t.route.apply(t,P)});return this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(r,t,C){var P=this;if(typeof C=="undefined")C=t;t=function(aa,ca){var z;if(ca&&ca.context){z=ca.context;delete ca.context}else z=new P.context_prototype(P,"bind",aa.type,ca,aa.target);aa.cleaned_type=aa.type.replace(P.eventNamespace(),"");C.apply(z,[aa,ca])};this.listeners[r]||(this.listeners[r]=
[]);this.listeners[r].push(t);this.isRunning()&&this._listen(r,t);return this},trigger:function(r,t){this.$element().trigger([r,this.eventNamespace()].join("."),[t]);return this},refresh:function(){this.last_location=null;this.trigger("location-changed");return this},before:function(r,t){if(n(r)){t=r;r={}}this.befores.push([r,t]);return this},after:function(r){return this.bind("event-context-after",r)},around:function(r){this.arounds.push(r);return this},isRunning:function(){return this._running},
helpers:function(r){c.extend(this.context_prototype.prototype,r);return this},helper:function(r,t){this.context_prototype.prototype[r]=t;return this},run:function(r){if(this.isRunning())return false;var t=this;c.each(this.listeners.toHash(),function(C,P){c.each(P,function(aa,ca){t._listen(C,ca)})});this.trigger("run",{start_url:r});this._running=true;this.last_location=null;!/\#(.+)/.test(this.getLocation())&&typeof r!="undefined"&&this.setLocation(r);this._checkLocation();this._location_proxy.bind();
this.bind("location-changed",function(){t._checkLocation()});this.bind("submit",function(C){return t._checkFormSubmission(c(C.target).closest("form"))===false?C.preventDefault():false});c(a).bind("beforeunload",function(){t.unload()});return this.trigger("changed")},unload:function(){if(!this.isRunning())return false;var r=this;this.trigger("unload");this._location_proxy.unbind();this.$element().unbind("submit").removeClass(r.eventNamespace());c.each(this.listeners.toHash(),function(t,C){c.each(C,
function(P,aa){r._unlisten(t,aa)})});this._running=false;return this},bindToAllEvents:function(r){var t=this;c.each(this.APP_EVENTS,function(C,P){t.bind(P,r)});c.each(this.listeners.keys(true),function(C,P){c.inArray(P,t.APP_EVENTS)==-1&&t.bind(P,r)});return this},routablePath:function(r){return r.replace(h,"")},lookupRoute:function(r,t){var C=false,P=0,aa,ca;if(typeof this.routes[r]!="undefined")for(aa=this.routes[r].length;P<aa;P++){ca=this.routes[r][P];if(this.routablePath(t).match(ca.path)){C=
ca;break}}return C},runRoute:function(r,t,C,P){var aa=this,ca=this.lookupRoute(r,t),z,da,oa,S,X,ba,N;this.log("runRoute",[r,t].join(" "));this.trigger("run-route",{verb:r,path:t,params:C});if(typeof C=="undefined")C={};c.extend(C,this._parseQueryString(t));if(ca){this.trigger("route-found",{route:ca});if((ba=ca.path.exec(this.routablePath(t)))!==null){ba.shift();c.each(ba,function(q,e){if(ca.param_names[q])C[ca.param_names[q]]=B(e);else{if(!C.splat)C.splat=[];C.splat.push(B(e))}})}z=new this.context_prototype(this,
r,t,C,P);P=this.arounds.slice(0);oa=this.befores.slice(0);X=[z].concat(C.splat);da=function(){for(var q;oa.length>0;){S=oa.shift();if(aa.contextMatchesOptions(z,S[0])){q=S[1].apply(z,[z]);if(q===false)return false}}aa.last_route=ca;z.trigger("event-context-before",{context:z});q=ca.callback.apply(z,X);z.trigger("event-context-after",{context:z});return q};c.each(P.reverse(),function(q,e){var y=da;da=function(){return e.apply(z,[y])}});try{N=da()}catch(sa){this.error(["500 Error",r,t].join(" "),sa)}return N}else return this.notFound(r,
t)},contextMatchesOptions:function(r,t,C){t=t;if(typeof t==="undefined"||t=={})return true;if(typeof C==="undefined")C=true;if(typeof t==="string"||n(t.test))t={path:t};if(t.only)return this.contextMatchesOptions(r,t.only,true);else if(t.except)return this.contextMatchesOptions(r,t.except,false);var P=true,aa=true;if(t.path){if(!n(t.path.test))t.path=new RegExp(t.path.toString()+"$");P=t.path.test(r.path)}if(t.verb)aa=typeof t.verb==="string"?t.verb===r.verb:t.verb.indexOf(r.verb)>-1;return C?aa&&
P:!(aa&&P)},getLocation:function(){return this._location_proxy.getLocation()},setLocation:function(r){return this._location_proxy.setLocation(r)},swap:function(r){return this.$element().html(r)},templateCache:function(r,t){return typeof t!="undefined"?(Z[r]=t):Z[r]},clearTemplateCache:function(){return Z={}},notFound:function(r,t){var C=this.error(["404 Not Found",r,t].join(" "));return r==="get"?C:true},error:function(r,t){t||(t=new Error);t.message=[r,t.message].join(" ");this.trigger("error",{message:t.message,
error:t});if(this.raise_errors)throw t;else this.log(t.message,t)},_checkLocation:function(){var r,t;r=this.getLocation();if(!this.last_location||this.last_location[0]!="get"||this.last_location[1]!=r){this.last_location=["get",r];t=this.runRoute("get",r)}return t},_getFormVerb:function(r){r=c(r);var t,C;C=r.find('input[name="_method"]');if(C.length>0)t=C.val();t||(t=r[0].getAttribute("method"));if(!t||t=="")t="get";return c.trim(t.toString().toLowerCase())},_checkFormSubmission:function(r){var t,
C,P;this.trigger("check-form-submission",{form:r});t=c(r);C=t.attr("action")||"";P=this._getFormVerb(t);this.log("_checkFormSubmission",t,C,P);if(P==="get"){this.setLocation(C+"?"+this._serializeFormParams(t));r=false}else{t=c.extend({},this._parseFormParams(t));r=this.runRoute(P,C,t,r.get(0))}return typeof r=="undefined"?false:r},_serializeFormParams:function(r){var t="";r=r.serializeArray();var C;if(r.length>0){t=this._encodeFormPair(r[0].name,r[0].value);for(C=1;C<r.length;C++)t=t+"&"+this._encodeFormPair(r[C].name,
r[C].value)}return t},_encodeFormPair:function(r,t){return D(r)+"="+D(t)},_parseFormParams:function(r){var t={};r=r.serializeArray();var C;for(C=0;C<r.length;C++)t=this._parseParamPair(t,r[C].name,r[C].value);return t},_parseQueryString:function(r){var t={},C,P;if(r=r.match(h)){r=r[1].split("&");for(P=0;P<r.length;P++){C=r[P].split("=");t=this._parseParamPair(t,B(C[0]),B(C[1]||""))}}return t},_parseParamPair:function(r,t,C){if(r[t])if(v(r[t]))r[t].push(C);else r[t]=[r[t],C];else r[t]=C;return r},
_listen:function(r,t){return this.$element().bind([r,this.eventNamespace()].join("."),t)},_unlisten:function(r,t){return this.$element().unbind([r,this.eventNamespace()].join("."),t)}});f.RenderContext=function(r){this.event_context=r;this.callbacks=[];this.content=this.previous_content=null;this.waiting=this.next_engine=false};f.RenderContext.prototype=c.extend({},f.Object.prototype,{then:function(r){if(!n(r))if(typeof r==="string"&&r in this.event_context){var t=this.event_context[r];r=function(P){return t.apply(this.event_context,
[P])}}else return this;var C=this;if(this.waiting)this.callbacks.push(r);else{this.wait();a.setTimeout(function(){var P=r.apply(C,[C.content,C.previous_content]);P!==false&&C.next(P)},0)}return this},wait:function(){this.waiting=true},next:function(r){this.waiting=false;if(typeof r!=="undefined"){this.previous_content=this.content;this.content=r}this.callbacks.length>0&&this.then(this.callbacks.shift())},load:function(r,t,C){var P=this;return this.then(function(){var aa,ca,z;if(n(t)){C=t;t={}}else t=
c.extend({},t);C&&this.then(C);if(typeof r==="string"){aa=(z=r.match(/\.json$/)||t.json)&&t.cache===true||t.cache!==false;P.next_engine=P.event_context.engineFor(r);delete t.cache;delete t.json;if(t.engine){P.next_engine=t.engine;delete t.engine}if(aa&&(ca=this.event_context.app.templateCache(r)))return ca;this.wait();c.ajax(c.extend({url:r,data:{},dataType:z?"json":null,type:"get",success:function(da){aa&&P.event_context.app.templateCache(r,da);P.next(da)}},t));return false}else{if(r.nodeType)return r.innerHTML;
if(r.selector){P.next_engine=r.attr("data-engine");return t.clone===false?r.remove()[0].innerHTML.toString():r[0].innerHTML.toString()}}})},loadPartials:function(r){if(r){this.partials=this.partials||{};for(name in r)this.load(r[name]).then(function(t){this.partials[name]=t})}return this},render:function(r,t,C,P){return n(r)&&!t?this.then(r):this.loadPartials(P).load(r).interpolate(t,r).then(C)},partial:function(r,t){return this.render(r,t).swap()},send:function(){var r=this,t=l(arguments),C=t.shift();
if(v(t[0]))t=t[0];return this.then(function(){t.push(function(P){r.next(P)});r.wait();C.apply(C,t);return false})},collect:function(r,t,C){var P=this,aa=function(){if(n(r)){t=r;r=this.content}var ca=[],z=false;c.each(r,function(da,oa){var S=t.apply(P,[da,oa]);if(S.jquery&&S.length==1){S=S[0];z=true}ca.push(S);return S});return z?ca:ca.join("")};return C?aa():this.then(aa)},renderEach:function(r,t,C,P){if(v(t)){P=C;C=t;t=null}return this.load(r).then(function(aa){var ca=this;C||(C=v(this.previous_content)?
this.previous_content:[]);if(P)c.each(C,function(z,da){var oa={},S=this.next_engine||r;t?(oa[t]=da):(oa=da);P(da,ca.event_context.interpolate(aa,oa,S))});else return this.collect(C,function(z,da){var oa={},S=this.next_engine||r;t?(oa[t]=da):(oa=da);return this.event_context.interpolate(aa,oa,S)},true)})},interpolate:function(r,t,C){var P=this;return this.then(function(aa,ca){if(!r&&ca)r=ca;if(this.next_engine){t=this.next_engine;this.next_engine=false}var z=P.event_context.interpolate(aa,r,t,this.partials);
return C?ca+z:z})},swap:function(){return this.then(function(r){this.event_context.swap(r)}).trigger("changed",{})},appendTo:function(r){return this.then(function(t){c(r).append(t)}).trigger("changed",{})},prependTo:function(r){return this.then(function(t){c(r).prepend(t)}).trigger("changed",{})},replace:function(r){return this.then(function(t){c(r).html(t)}).trigger("changed",{})},trigger:function(r,t){return this.then(function(C){if(typeof t=="undefined")t={content:C};this.event_context.trigger(r,
t)})}});f.EventContext=function(r,t,C,P,aa){this.app=r;this.verb=t;this.path=C;this.params=new f.Object(P);this.target=aa};f.EventContext.prototype=c.extend({},f.Object.prototype,{$element:function(){return this.app.$element(l(arguments).shift())},engineFor:function(r){var t;if(n(r))return r;r=(r||this.app.template_engine).toString();if(t=r.match(/\.([^\.\?\#]+)$/))r=t[1];if(r&&n(this[r]))return this[r];if(this.app.template_engine)return this.engineFor(this.app.template_engine);return function(C){return C}},
interpolate:function(r,t,C,P){return this.engineFor(C).apply(this,[r,t,P])},render:function(r,t,C,P){return(new f.RenderContext(this)).render(r,t,C,P)},renderEach:function(r,t,C,P){return(new f.RenderContext(this)).renderEach(r,t,C,P)},load:function(r,t,C){return(new f.RenderContext(this)).load(r,t,C)},partial:function(r,t){return(new f.RenderContext(this)).partial(r,t)},send:function(){var r=new f.RenderContext(this);return r.send.apply(r,arguments)},redirect:function(){var r;r=l(arguments);var t=
this.app.getLocation(),C=r.length;if(C>1){for(var P=0,aa=[],ca=[],z={},da=false;P<C;P++)if(typeof r[P]=="string")aa.push(r[P]);else{c.extend(z,r[P]);da=true}r=aa.join("/");if(da){for(var oa in z)ca.push(this.app._encodeFormPair(oa,z[oa]));r+="?"+ca.join("&")}}else r=r[0];this.trigger("redirect",{to:r});this.app.last_location=[this.verb,this.path];this.app.setLocation(r);(new RegExp(r)).test(t)&&this.app.trigger("location-changed")},trigger:function(r,t){if(typeof t=="undefined")t={};if(!t.context)t.context=
this;return this.app.trigger(r,t)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(r){return this.app.swap(r)},notFound:function(){return this.app.notFound(this.verb,this.path)},json:function(r){return c.parseJSON(r)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}});c.sammy=a.Sammy=f})(jQuery,window);
(function(c){Sammy=Sammy||{};Sammy.Title=function(){this.setTitle=function(a){this.title_function=c.isFunction(a)?a:function(f){return[a,f].join(" ")}};this.helper("title",function(){var a=c.makeArray(arguments).join(" ");if(this.app.title_function)a=this.app.title_function(a);document.title=a})}})(jQuery);
(function(c){function a(d){d=unescape(d);return d==="true"?true:d==="false"?false:d}function f(d,h,l){var n;if(h.match(/^[^\[]+$/))d[h]=a(l);else if(n=h.match(/^([^\[]+)\[\](.*)$/)){h=n[1];n=n[2];if(d[h]&&!c.isArray(d[h]))throw"400 Bad Request";if(n){n=n.match(/^\[([^\]]+)\](.*)$/);if(!n)throw"400 Bad Request";if(d[h])d[h][d[h].length-1][n[1]]?d[h].push(f({},n[1]+n[2],l)):c.extend(true,d[h][d[h].length-1],f({},n[1]+n[2],l));else d[h]=[f({},n[1]+n[2],l)]}else if(d[h])d[h].push(a(l));else d[h]=[a(l)]}else if(n=
h.match(/^([^\[]+)\[([^\[]+)\](.*)$/)){h=n[1];n=n[2]+n[3];if(d[h]&&c.isArray(d[h]))throw"400 Bad Request";if(d[h])c.extend(true,d[h],f(d[h],n,l));else d[h]=f({},n,l)}return d}Sammy=Sammy||{};Sammy.NestedParams=function(d){d._parseParamPair=f}})(jQuery);
(function(){if(!window.JSON)window.JSON={};(function(){function c(D){return D<10?"0"+D:D}function a(D){h.lastIndex=0;return h.test(D)?'"'+D.replace(h,function(K){var R=v[K];return typeof R==="string"?R:"\\u"+("0000"+K.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+D+'"'}function f(D,K){var R,Z,fa,ma,r=l,t,C=K[D];if(C&&typeof C==="object"&&typeof C.toJSON==="function")C=C.toJSON(D);if(typeof B==="function")C=B.call(K,D,C);switch(typeof C){case "string":return a(C);case "number":return isFinite(C)?
String(C):"null";case "boolean":case "null":return String(C);case "object":if(!C)return"null";l+=n;t=[];if(Object.prototype.toString.apply(C)==="[object Array]"){ma=C.length;for(R=0;R<ma;R+=1)t[R]=f(R,C)||"null";fa=t.length===0?"[]":l?"[\n"+l+t.join(",\n"+l)+"\n"+r+"]":"["+t.join(",")+"]";l=r;return fa}if(B&&typeof B==="object"){ma=B.length;for(R=0;R<ma;R+=1){Z=B[R];if(typeof Z==="string")if(fa=f(Z,C))t.push(a(Z)+(l?": ":":")+fa)}}else for(Z in C)if(Object.hasOwnProperty.call(C,Z))if(fa=f(Z,C))t.push(a(Z)+
(l?": ":":")+fa);fa=t.length===0?"{}":l?"{\n"+l+t.join(",\n"+l)+"\n"+r+"}":"{"+t.join(",")+"}";l=r;return fa}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z"};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l,n,v={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},B;if(typeof JSON.stringify!=="function")JSON.stringify=function(D,K,R){var Z;n=l="";if(typeof R==="number")for(Z=0;Z<R;Z+=1)n+=" ";else if(typeof R==="string")n=R;if((B=K)&&typeof K!=="function"&&(typeof K!=="object"||typeof K.length!=="number"))throw new Error("JSON.stringify");return f("",
{"":D})};if(typeof JSON.parse!=="function")JSON.parse=function(D,K){function R(fa,ma){var r,t,C=fa[ma];if(C&&typeof C==="object")for(r in C)if(Object.hasOwnProperty.call(C,r)){t=R(C,r);if(t!==undefined)C[r]=t;else delete C[r]}return K.call(fa,ma,C)}var Z;d.lastIndex=0;if(d.test(D))D=D.replace(d,function(fa){return"\\u"+("0000"+fa.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(D.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){Z=eval("("+D+")");return typeof K==="function"?R({"":Z},""):Z}throw new SyntaxError("JSON.parse");}})();Sammy=Sammy||{};Sammy.JSON=function(c){c.helpers({json:function(a){return typeof a=="string"?JSON.parse(a):JSON.stringify(a)}})}})(jQuery);
var Mustache=function(){var c=function(){};c.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":true},context:{},render:function(a,f,d,h){if(!h){this.context=f;this.buffer=[]}if(!this.includes("",a))if(h)return a;else{this.send(a);return}a=this.render_pragmas(a);a=this.render_section(a,f,d);if(h)return this.render_tags(a,f,d,h);this.render_tags(a,f,d,h)},send:function(a){a!==""&&this.buffer.push(a)},render_pragmas:function(a){if(!this.includes("%",a))return a;
var f=this;return a.replace(new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag,"g"),function(d,h,l){if(!f.pragmas_implemented[h])throw{message:"This implementation of mustache doesn't understand the '"+h+"' pragma"};f.pragmas[h]={};if(l){d=l.split("=");f.pragmas[h][d[0]]=d[1]}return""})},render_partial:function(a,f,d){a=this.trim(a);if(!d||d[a]===undefined)throw{message:"unknown_partial '"+a+"'"};if(typeof f[a]!="object")return this.render(d[a],f,d,true);return this.render(d[a],f[a],d,
true)},render_section:function(a,f,d){if(!this.includes("#",a)&&!this.includes("^",a))return a;var h=this;return a.replace(new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg"),function(l,n,v,B){l=h.find(v,f);if(n=="^")return!l||h.is_array(l)&&l.length===0?h.render(B,f,d,true):"";else if(n=="#")return h.is_array(l)?h.map(l,function(D){return h.render(B,h.create_context(D),d,true)}).join(""):h.is_object(l)?h.render(B,h.create_context(l),
d,true):typeof l==="function"?l.call(f,B,function(D){return h.render(D,f,d,true)}):l?h.render(B,f,d,true):""})},render_tags:function(a,f,d,h){var l=this,n=function(){return new RegExp(l.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+l.ctag+"+","g")},v=n(),B=function(K,R,Z){switch(R){case "!":return"";case "=":l.set_delimiters(Z);v=n();return"";case ">":return l.render_partial(Z,f,d);case "{":return l.find(Z,f);default:return l.escape(l.find(Z,f))}};a=a.split("\n");for(var D=0;D<a.length;D++){a[D]=a[D].replace(v,
B,this);h||this.send(a[D])}if(h)return a.join("\n")},set_delimiters:function(a){a=a.split(" ");this.otag=this.escape_regex(a[0]);this.ctag=this.escape_regex(a[1])},escape_regex:function(a){if(!arguments.callee.sRE)arguments.callee.sRE=new RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,f){a=this.trim(a);var d;if(f[a]===false||f[a]===0||f[a])d=f[a];else if(this.context[a]===false||this.context[a]===0||this.context[a])d=
this.context[a];if(typeof d==="function")return d.apply(f);if(d!==undefined)return d;return""},includes:function(a,f){return f.indexOf(this.otag+a)!=-1},escape:function(a){return String(a===null?"":a).replace(/&(?!\w+;)|["'<>\\]/g,function(f){switch(f){case "&":return"&amp;";case "\\":return"\\\\";case '"':return"&quot;";case "'":return"&#39;";case "<":return"&lt;";case ">":return"&gt;";default:return f}})},create_context:function(a){if(this.is_object(a))return a;else{var f=".";if(this.pragmas["IMPLICIT-ITERATOR"])f=
this.pragmas["IMPLICIT-ITERATOR"].iterator;var d={};d[f]=a;return d}},is_object:function(a){return a&&typeof a=="object"},is_array:function(a){return Object.prototype.toString.call(a)==="[object Array]"},trim:function(a){return a.replace(/^\s*|\s*$/g,"")},map:function(a,f){if(typeof a.map=="function")return a.map(f);else{for(var d=[],h=a.length,l=0;l<h;l++)d.push(f(a[l]));return d}}};return{name:"mustache.js",version:"0.3.1-dev",to_html:function(a,f,d,h){var l=new c;if(h)l.send=h;l.render(a,f,d);
if(!h)return l.buffer.join("\n")}}}();(function(c){Sammy=Sammy||{};Sammy.Mustache=function(a,f){f||(f="mustache");a.helper(f,function(d,h,l){h=c.extend({},this,h);l=c.extend({},h.partials,l);return Mustache.to_html(d,h,l)})}})(jQuery);
window.Modernizr=function(c,a,f){function d(){n.input=function(S){for(var X=0,ba=S.length;X<ba;X++)t[S[X]]=S[X]in K;return t}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));n.inputtypes=function(S){for(var X=0,ba,N,sa,q=S.length;X<q;X++){K.setAttribute("type",N=S[X]);(ba=K.type!=="text")&&(K.value=R,K.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(N)&&K.style.WebkitAppearance!==f?(v.appendChild(K),sa=a.defaultView,ba=sa.getComputedStyle&&
sa.getComputedStyle(K,null).WebkitAppearance!=="textfield"&&K.offsetHeight!==0,v.removeChild(K)):/^(search|tel)$/.test(N)||(/^(url|email)$/.test(N)?(ba=K.checkValidity&&K.checkValidity()===false):/^color$/.test(N)?(v.appendChild(K),ba=K.value!=R,v.removeChild(K)):(ba=K.value!=R)));r[S[X]]=!!ba}return r}("search tel url email datetime date month week time datetime-local number range color".split(" "))}function h(S,X){var ba=S.charAt(0).toUpperCase()+S.substr(1);ba=(S+" "+fa.join(ba+" ")+ba).split(" ");
return l(ba,X)}function l(S,X){for(var ba in S)if(D[S[ba]]!==f)return X=="pfx"?S[ba]:true;return false}var n={},v=a.documentElement;a.head||a.getElementsByTagName("head");var B=a.createElement("modernizr"),D=B.style,K=a.createElement("input"),R=":)",Z=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),fa="Webkit Moz O ms Khtml".split(" "),ma={svg:"http://www.w3.org/2000/svg"};B={};var r={},t={},C=[],P=function(S,X,ba,N){var sa,q=a.createElement("div");if(parseInt(ba,10))for(;ba--;){sa=a.createElement("div");
sa.id=N?N[ba]:"modernizr"+(ba+1);q.appendChild(sa)}ba=["&shy;<style>",S,"</style>"].join("");q.id="modernizr";q.innerHTML+=ba;v.appendChild(q);S=X(q,S);q.parentNode.removeChild(q);return!!S},aa=function(){var S={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(X,ba){ba=ba||a.createElement(S[X]||"div");X="on"+X;var N=X in ba;N||(ba.setAttribute||(ba=a.createElement("div")),ba.setAttribute&&ba.removeAttribute&&(ba.setAttribute(X,""),N=typeof ba[X]===
"function",typeof ba[X]===f||(ba[X]=f),ba.removeAttribute(X)));return N}}(),ca,z={}.hasOwnProperty,da;typeof z!==f&&typeof z.call!==f?(da=function(S,X){return z.call(S,X)}):(da=function(S,X){return X in S&&typeof S.constructor.prototype[X]===f});(function(S,X){var ba=S.join(""),N=X.length;P(ba,function(sa,q){var e=a.styleSheets[a.styleSheets.length-1];e=e.cssRules&&e.cssRules[0]?e.cssRules[0].cssText:e.cssText||"";for(var y=sa.childNodes,F={};N--;)F[y[N].id]=y[N];n.touch="ontouchstart"in c||F.touch.offsetTop===
9;n.csstransforms3d=F.csstransforms3d.offsetLeft===9;n.generatedcontent=F.generatedcontent.offsetHeight>=1;n.fontface=/src/i.test(e)&&e.indexOf(q.split(" ")[0])===0},N,X)})(['@font-face {font-family:"font";src:url("https://")}',["@media (",Z.join("touch-enabled),("),"modernizr){#touch{top:9px;position:absolute}}"].join(""),["@media (",Z.join("transform-3d),("),"modernizr){#csstransforms3d{left:9px;position:absolute}}"].join(""),['#generatedcontent:after{content:"',R,'";visibility:hidden}'].join("")],
["fontface","touch","csstransforms3d","generatedcontent"]);B.flexbox=function(){var S=a.createElement("div"),X=a.createElement("div");(function(N,sa,q,e){sa+=":";N.style.cssText=(sa+Z.join(q+";"+sa)).slice(0,-sa.length)+(e||"")})(S,"display","box","width:42px;padding:0;");X.style.cssText=Z.join("box-flex:1;")+"width:10px;";S.appendChild(X);v.appendChild(S);var ba=X.offsetWidth===42;S.removeChild(X);v.removeChild(S);return ba};B.touch=function(){return n.touch};B.indexedDB=function(){for(var S=-1,
X=fa.length;++S<X;)if(c[fa[S].toLowerCase()+"IndexedDB"])return true;return!!c.indexedDB};B.hashchange=function(){return aa("hashchange",c)&&(a.documentMode===f||a.documentMode>7)};B.history=function(){return!!c.history&&!!history.pushState};B.draganddrop=function(){return aa("dragstart")&&aa("drop")};B.rgba=function(){D.cssText="background-color:rgba(150,255,150,.5)";return!!~(""+D.backgroundColor).indexOf("rgba")};B.hsla=function(){D.cssText="background-color:hsla(120,40%,100%,.5)";return!!~(""+
D.backgroundColor).indexOf("rgba")||!!~(""+D.backgroundColor).indexOf("hsla")};B.multiplebgs=function(){D.cssText="background:url(https://),url(https://),red url(https://)";return/(url\s*\(.*?){3}/.test(D.background)};B.backgroundsize=function(){return h("backgroundSize")};B.borderimage=function(){return h("borderImage")};B.borderradius=function(){return h("borderRadius")};B.boxshadow=function(){return h("boxShadow")};B.textshadow=function(){return a.createElement("div").style.textShadow===""};B.opacity=
function(){var S=Z.join("opacity:.55;")+"";D.cssText=S;return/^0.55$/.test(D.opacity)};B.cssanimations=function(){return h("animationName")};B.csscolumns=function(){return h("columnCount")};B.cssgradients=function(){var S=("background-image:"+Z.join("gradient(linear,left top,right bottom,from(#9f9),to(white));background-image:")+Z.join("linear-gradient(left top,#9f9, white);background-image:")).slice(0,-17);D.cssText=S;return!!~(""+D.backgroundImage).indexOf("gradient")};B.cssreflections=function(){return h("boxReflect")};
B.csstransforms=function(){return!!l(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])};B.csstransforms3d=function(){var S=!!l(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);S&&"webkitPerspective"in v.style&&(S=n.csstransforms3d);return S};B.csstransitions=function(){return h("transitionProperty")};B.fontface=function(){return n.fontface};B.generatedcontent=function(){return n.generatedcontent};B.video=function(){var S=
a.createElement("video"),X=false;try{if(X=!!S.canPlayType){X=new Boolean(X);X.ogg=S.canPlayType('video/ogg; codecs="theora"');X.h264=S.canPlayType('video/mp4; codecs="avc1.42E01E"')||S.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');X.webm=S.canPlayType('video/webm; codecs="vp8, vorbis"')}}catch(ba){}return X};B.audio=function(){var S=a.createElement("audio"),X=false;try{if(X=!!S.canPlayType){X=new Boolean(X);X.ogg=S.canPlayType('audio/ogg; codecs="vorbis"');X.mp3=S.canPlayType("audio/mpeg;");
X.wav=S.canPlayType('audio/wav; codecs="1"');X.m4a=S.canPlayType("audio/x-m4a;")||S.canPlayType("audio/aac;")}}catch(ba){}return X};B.localstorage=function(){try{return!!localStorage.getItem}catch(S){return false}};B.svg=function(){return!!a.createElementNS&&!!a.createElementNS(ma.svg,"svg").createSVGRect};B.inlinesvg=function(){var S=a.createElement("div");S.innerHTML="<svg/>";return(S.firstChild&&S.firstChild.namespaceURI)==ma.svg};for(var oa in B)da(B,oa)&&(ca=oa.toLowerCase(),n[ca]=B[oa](),C.push((n[ca]?
"":"no-")+ca));n.input||d();D.cssText="";B=K=null;c.attachEvent&&function(){var S=a.createElement("div");S.innerHTML="<elem></elem>";return S.childNodes.length!==1}()&&function(S,X){function ba(ya){for(var wa=-1;++wa<e;)ya.createElement(q[wa])}S.iepp=S.iepp||{};var N=S.iepp,sa=N.html5elements||"abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",q=sa.split("|"),e=q.length,y=new RegExp("(^|\\s)("+sa+")",
"gi"),F=new RegExp("<(/*)("+sa+")","gi"),Q=/^\s*[\{\}]\s*$/,Y=new RegExp("(^|[^\\n]*?\\s)("+sa+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),ha=X.createDocumentFragment(),xa=X.documentElement;sa=xa.firstChild;var Ga=X.createElement("body"),ia=X.createElement("style"),va=/print|all/,ra;N.getCSS=function(ya,wa){if(ya+""===f)return"";for(var la=-1,Fa=ya.length,Da,Ua=[];++la<Fa;){Da=ya[la];if(!Da.disabled){wa=Da.media||wa;va.test(wa)&&Ua.push(N.getCSS(Da.imports,wa),Da.cssText);wa="all"}}return Ua.join("")};N.parseCSS=
function(ya){for(var wa=[],la;(la=Y.exec(ya))!=null;)wa.push(((Q.exec(la[1])?"\n":la[1])+la[2]+la[3]).replace(y,"$1.iepp_$2")+la[4]);return wa.join("\n")};N.writeHTML=function(){var ya=-1;for(ra=ra||X.body;++ya<e;)for(var wa=X.getElementsByTagName(q[ya]),la=wa.length,Fa=-1;++Fa<la;)wa[Fa].className.indexOf("iepp_")<0&&(wa[Fa].className+=" iepp_"+q[ya]);ha.appendChild(ra);xa.appendChild(Ga);Ga.className=ra.className;Ga.id=ra.id;Ga.innerHTML=ra.innerHTML.replace(F,"<$1font")};N._beforePrint=function(){ia.styleSheet.cssText=
N.parseCSS(N.getCSS(X.styleSheets,"all"));N.writeHTML()};N.restoreHTML=function(){Ga.innerHTML="";xa.removeChild(Ga);xa.appendChild(ra)};N._afterPrint=function(){N.restoreHTML();ia.styleSheet.cssText=""};ba(X);ba(ha);N.disablePP||(sa.insertBefore(ia,sa.firstChild),ia.media="print",ia.className="iepp-printshim",S.attachEvent("onbeforeprint",N._beforePrint),S.attachEvent("onafterprint",N._afterPrint))}(c,a);n._version="2.0.6";n._prefixes=Z;n._domPrefixes=fa;n.hasEvent=aa;n.testProp=function(S){return l([S])};
n.testAllProps=h;n.testStyles=P;v.className=v.className.replace(/\bno-js\b/,"")+(" js "+C.join(" "));return n}(this,this.document);
(function(c,a,f){function d(){for(var y=1,F=-1;ma.length-++F;)if(ma[F].s&&!(y=ma[F].r))break;y&&n()}function h(y){var F=a.createElement("script"),Q;F.src=y.s;F.onreadystatechange=F.onload=function(){!Q&&(!F.readyState||F.readyState=="loaded"||F.readyState=="complete")&&(Q=1,d(),F.onload=F.onreadystatechange=null)};R(function(){Q||(Q=1,d())},e.errorTimeout);y.e?F.onload():Z.parentNode.insertBefore(F,Z)}function l(y){var F=a.createElement("link"),Q;F.href=y.s;F.rel="stylesheet";F.type="text/css";if(!y.e&&
(ca||t)){var Y=function(ha){R(function(){if(!Q)try{ha.sheet.cssRules.length?(Q=1,d()):Y(ha)}catch(xa){xa.code==1E3||xa.message=="security"||xa.message=="denied"?(Q=1,R(function(){d()},0)):Y(ha)}},0)};Y(F)}else{F.onload=function(){Q||(Q=1,R(function(){d()},0))};y.e&&F.onload()}R(function(){Q||(Q=1,d())},e.errorTimeout);!y.e&&Z.parentNode.insertBefore(F,Z)}function n(){var y=ma.shift();r=1;y?y.t?R(function(){y.t=="c"?l(y):h(y)},0):(y(),d()):(r=0)}function v(y,F,Q,Y,ha,xa){function Ga(){!va&&(!ia.readyState||
ia.readyState=="loaded"||ia.readyState=="complete")&&(ra.r=va=1,!r&&d(),ia.onload=ia.onreadystatechange=null,R(function(){P.removeChild(ia)},0))}var ia=a.createElement(y),va=0,ra={t:Q,s:F,e:xa};ia.src=ia.data=F;!C&&(ia.style.display="none");ia.width=ia.height="0";y!="object"&&(ia.type=Q);ia.onload=ia.onreadystatechange=Ga;y=="img"?(ia.onerror=Ga):y=="script"&&(ia.onerror=function(){ra.e=ra.r=1;n()});ma.splice(Y,0,ra);P.insertBefore(ia,C?null:Z);R(function(){va||(P.removeChild(ia),ra.r=ra.e=va=1,d())},
e.errorTimeout)}function B(y,F,Q){var Y=F=="c"?oa:da;r=0;F=F||"j";X(y)?v(Y,y,F,this.i++,K,Q):(ma.splice(this.i++,0,y),ma.length==1&&n());return this}function D(){var y=e;y.loader={load:B,i:0};return y}var K=a.documentElement,R=c.setTimeout,Z=a.getElementsByTagName("script")[0],fa={}.toString,ma=[],r=0,t="MozAppearance"in K.style,C=t&&!!a.createRange().compareNode,P=C?K:Z.parentNode,aa=c.opera&&fa.call(c.opera)=="[object Opera]",ca="webkitAppearance"in K.style,z=ca&&"async"in a.createElement("script"),
da=t?"object":aa||z?"img":"script",oa=ca?"img":da,S=Array.isArray||function(y){return fa.call(y)=="[object Array]"},X=function(y){return typeof y=="string"},ba=function(y){return fa.call(y)=="[object Function]"},N=[],sa={},q,e;e=function(y){function F(ia){ia=ia.split("!");var va=N.length,ra=ia.pop(),ya=ia.length;ra={url:ra,origUrl:ra,prefixes:ia};var wa,la;for(la=0;la<ya;la++)(wa=sa[ia[la]])&&(ra=wa(ra));for(la=0;la<va;la++)ra=N[la](ra);return ra}function Q(ia,va,ra,ya,wa){var la=F(ia),Fa=la.autoCallback;
if(!la.bypass){va&&(va=ba(va)?va:va[ia]||va[ya]||va[ia.split("/").pop().split("?")[0]]);if(la.instead)return la.instead(ia,va,ra,ya,wa);ra.load(la.url,la.forceCSS||!la.forceJS&&/css$/.test(la.url)?"c":f,la.noexec);(ba(va)||ba(Fa))&&ra.load(function(){D();va&&va(la.origUrl,wa,ya);Fa&&Fa(la.origUrl,wa,ya)})}}function Y(ia,va){function ra(Da){if(X(Da))Q(Da,la,va,0,ya);else if(Object(Da)===Da)for(Fa in Da)Da.hasOwnProperty(Fa)&&Q(Da[Fa],la,va,Fa,ya)}var ya=!!ia.test,wa=ia.load||ia.both,la=ia.callback,
Fa;ra(ya?ia.yep:ia.nope);ra(wa);ia.complete&&va.load(ia.complete)}var ha,xa,Ga=this.yepnope.loader;if(X(y))Q(y,0,Ga,0);else if(S(y))for(ha=0;ha<y.length;ha++){xa=y[ha];X(xa)?Q(xa,0,Ga,0):S(xa)?e(xa):Object(xa)===xa&&Y(xa,Ga)}else Object(y)===y&&Y(y,Ga)};e.addPrefix=function(y,F){sa[y]=F};e.addFilter=function(y){N.push(y)};e.errorTimeout=1E4;a.readyState==null&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",q=function(){a.removeEventListener("DOMContentLoaded",q,
0);a.readyState="complete"},0));c.yepnope=D()})(this,this.document);Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};
var Model=function(c,a){var f=function(d){this.attributes=jQuery.extend({},d);this.changes={};this.errors=new Model.Errors(this);this.uid=[c,Model.UID.generate()].join("-");jQuery.isFunction(this.initialize)&&this.initialize()};Model.Module.extend.call(f,Model.Module);f._name=c;f.collection=[];f.unique_key="id";f.extend(Model.Callbacks).extend(Model.ClassMethods);f.prototype=new Model.Base;f.prototype.constructor=f;jQuery.isFunction(a)&&a.call(f,f,f.prototype);return f};
Model.Callbacks={bind:function(c,a){this.callbacks=this.callbacks||{};this.callbacks[c]=this.callbacks[c]||[];this.callbacks[c].push(a);return this},trigger:function(c,a){this.callbacks=this.callbacks||{};var f=this.callbacks[c];if(f)for(var d=0;d<f.length;d++)f[d].apply(this,a||[]);return this},unbind:function(c,a){this.callbacks=this.callbacks||{};if(a)for(var f=this.callbacks[c]||[],d=0;d<f.length;d++)f[d]===a&&this.callbacks[c].splice(d,1);else delete this.callbacks[c];return this}};
Model.ClassMethods={add:function(c){var a=c.id();if(jQuery.inArray(c,this.collection)===-1&&!(a&&this.find(a))){this.collection.push(c);this.trigger("add",[c])}return this},all:function(){return this.collection.slice()},chain:function(c){return jQuery.extend({},this,{collection:c})},count:function(){return this.all().length},detect:function(c){for(var a=this.all(),f,d=0,h=a.length;d<h;d++){f=a[d];if(c.call(f,f,d))return f}},each:function(c,a){for(var f=this.all(),d=0,h=f.length;d<h;d++)c.call(a||
f[d],f[d],d,f);return this},find:function(c){return this.detect(function(){return this.id()==c})},first:function(){return this.all()[0]},load:function(c){if(this._persistence){var a=this;this._persistence.read(function(f){for(var d=0,h=f.length;d<h;d++)a.add(f[d]);c&&c.call(a,f)})}return this},last:function(){var c=this.all();return c[c.length-1]},map:function(c,a){for(var f=this.all(),d=[],h=0,l=f.length;h<l;h++)d.push(c.call(a||f[h],f[h],h,f));return d},persistence:function(c){if(arguments.length==
0)return this._persistence;else{var a=Array.prototype.slice.call(arguments,1);a.unshift(this);this._persistence=c.apply(c,a);return this}},pluck:function(c){for(var a=this.all(),f=[],d=0,h=a.length;d<h;d++)f.push(a[d].attr(c));return f},remove:function(c){for(var a,f=0,d=this.collection.length;f<d;f++)if(this.collection[f]===c){a=f;break}if(a!=undefined){this.collection.splice(a,1);this.trigger("remove",[c]);return true}else return false},reverse:function(){return this.chain(this.all().reverse())},
select:function(c,a){for(var f=this.all(),d=[],h,l=0,n=f.length;l<n;l++){h=f[l];if(c.call(a||h,h,l,f))d.push(h)}return this.chain(d)},sort:function(c){return this.chain(this.all().sort(c))},sortBy:function(c){var a=jQuery.isFunction(c);return this.sort(function(f,d){var h=a?c.call(f):f.attr(c),l=a?c.call(d):d.attr(c);return h<l?-1:h>l?1:0})},use:function(c){var a=Array.prototype.slice.call(arguments,1);a.unshift(this);c.apply(this,a);return this}};
Model.Errors=function(c){this.errors={};this.model=c};Model.Errors.prototype={add:function(c,a){this.errors[c]||(this.errors[c]=[]);this.errors[c].push(a);return this},all:function(){return this.errors},clear:function(){this.errors={};return this},each:function(c){for(var a in this.errors)for(var f=0;f<this.errors[a].length;f++)c.call(this,a,this.errors[a][f]);return this},on:function(c){return this.errors[c]||[]},size:function(){var c=0;this.each(function(){c++});return c}};
Model.InstanceMethods={asJSON:function(){return this.attr()},attr:function(c,a){if(arguments.length===0)return jQuery.extend({},this.attributes,this.changes);else if(arguments.length===2){if(this.attributes[c]===a)delete this.changes[c];else this.changes[c]=a;return this}else if(typeof c==="object"){for(var f in c)this.attr(f,c[f]);return this}else return c in this.changes?this.changes[c]:this.attributes[c]},callPersistMethod:function(c,a){var f=this,d=function(h){if(h){f.merge(f.changes).reset();
c==="destroy"?f.constructor.remove(f):f.constructor.add(f);f.trigger(c)}var l;if(a)l=a.apply(f,arguments);return l};this.constructor._persistence?this.constructor._persistence[c](this,d):d.call(this,true)},destroy:function(c){this.callPersistMethod("destroy",c);return this},id:function(){return this.attributes[this.constructor.unique_key]},merge:function(c){jQuery.extend(this.attributes,c);return this},newRecord:function(){return this.id()===undefined},reset:function(){this.errors.clear();this.changes=
{};return this},save:function(c){if(this.valid())this.callPersistMethod(this.newRecord()?"create":"update",c);else c&&c(false);return this},valid:function(){this.errors.clear();this.validate();return this.errors.size()===0},validate:function(){return this}};
Model.localStorage=function(c){if(!window.localStorage)return{create:function(h,l){l(true)},destroy:function(h,l){l(true)},read:function(h){h([])},update:function(h,l){l(true)}};var a=[c._name,"collection"].join("-"),f=function(){var h=localStorage[a];return h?JSON.parse(h):[]},d=function(h){localStorage.setItem(h.uid,JSON.stringify(h.asJSON()));h=h.uid;var l=f();if(jQuery.inArray(h,l)===-1){l.push(h);localStorage.setItem(a,JSON.stringify(l))}};return{create:function(h,l){d(h);l(true)},destroy:function(h,
l){localStorage.removeItem(h.uid);var n=h.uid,v=f();n=jQuery.inArray(n,v);if(n>-1){v.splice(n,1);localStorage.setItem(a,JSON.stringify(v))}l(true)},read:function(h){if(!h)return false;for(var l=c.map(function(){return this.uid}),n=f(),v=[],B,D,K=0,R=n.length;K<R;K++){D=n[K];if(jQuery.inArray(D,l)==-1){B=JSON.parse(localStorage[D]);B=new c(B);B.uid=D;v.push(B)}}h(v)},update:function(h,l){d(h);l(true)}}};Model.Log=function(){window.console&&window.console.log.apply(window.console,arguments)};
Model.Module={extend:function(c){jQuery.extend(this,c);return this},include:function(c){jQuery.extend(this.prototype,c);return this}};
Model.REST=function(c,a,f){var d=/:([\w\d]+)/g,h=function(){for(var l=[],n;(n=d.exec(a))!==null;)l.push(n[1]);return l}();return jQuery.extend({path:function(l){var n=a;jQuery.each(h,function(v,B){n=n.replace(":"+B,l.attributes[B])});return n},create:function(l,n){return this.xhr("POST",this.create_path(l),l,n)},create_path:function(l){return this.path(l)},destroy:function(l,n){return this.xhr("DELETE",this.destroy_path(l),l,n)},destroy_path:function(l){return this.update_path(l)},params:function(l){var n;
if(l){var v=l.asJSON();delete v[l.constructor.unique_key];n={};n[l.constructor._name.toLowerCase()]=v}else n=null;if(jQuery.ajaxSettings.data)n=jQuery.extend({},jQuery.ajaxSettings.data,n);return n},read:function(l){return this.xhr("GET",this.read_path(),null,function(n,v,B){B=jQuery.makeArray(B);n=[];v=0;for(var D=B.length;v<D;v++)n.push(new c(B[v]));l(n)})},read_path:function(){return a},update:function(l,n){return this.xhr("PUT",this.update_path(l),l,n)},update_path:function(l){return[this.path(l),
l.id()].join("/")},xhr:function(l,n,v,B){var D=this,K=l=="GET"?undefined:this.params(v);return jQuery.ajax({type:l,url:n+".json",dataType:"json",data:K,dataFilter:function(R){return/\S/.test(R)?R:undefined},complete:function(R,Z){D.xhrComplete(R,Z,v,B)}})},xhrComplete:function(l,n,v,B){var D=Model.REST["handle"+l.status];D&&D.call(this,l,n,v);n=n==="success";D=Model.REST.parseResponseData(l);n&&v&&D&&v.attr(D);B&&B.call(v,n,l,D)}},f)};Model.RestPersistence=Model.REST;
Model.REST.handle422=function(c,a,f){if(c=Model.REST.parseResponseData(c)){f.errors.clear();for(var d in c)for(a=0;a<c[d].length;a++)f.errors.add(d,c[d][a])}};Model.REST.parseResponseData=function(c){try{return/\S/.test(c.responseText)?jQuery.parseJSON(c.responseText):undefined}catch(a){Model.Log(a)}};Model.UID={counter:0,generate:function(){return[(new Date).valueOf(),this.counter++].join("-")},reset:function(){this.counter=0;return this}};Model.VERSION="0.10.1";
Model.Base=function(){function c(){}c.prototype=jQuery.extend({},Model.Callbacks,Model.InstanceMethods);return c}();
Model.SinatraREST=function(c,a,f){var d=/:([\w\d]+)/g,h=function(){for(var l=[],n;(n=d.exec(a))!==null;)l.push(n[1]);return l}();return jQuery.extend({path:function(l){var n=a;jQuery.each(h,function(v,B){n=n.replace(":"+B,l.attributes[B])});return n},create:function(l,n){return this.xhr("POST",this.create_path(l),l,n)},create_path:function(l){return this.path(l)},destroy:function(l,n){return this.xhr("DELETE",this.destroy_path(l),l,n)},destroy_path:function(l){return this.update_path(l)},params:function(l){var n;
if(l){var v=l.asJSON();delete v[l.constructor.unique_key];n={};n[l.constructor._name.toLowerCase()]=v}else n=null;if(jQuery.ajaxSettings.data)n=jQuery.extend({},jQuery.ajaxSettings.data,n);return n},read:function(l){return this.xhr("GET",this.read_path(),null,function(n,v,B){B=jQuery.makeArray(B);n=[];v=0;for(var D=B.length;v<D;v++)n.push(new c(B[v]));l(n)})},read_path:function(){return a},update:function(l,n){return this.xhr("PUT",this.update_path(l),l,n)},update_path:function(l){return[this.path(l),
l.id()].join("/")},xhr:function(l,n,v,B){var D=this,K=l=="GET"?undefined:this.params(v);return jQuery.ajax({type:l,url:n+".json",dataType:"json",data:K,complete:function(R,Z){D.xhrComplete(R,Z,v,B)}})},xhrComplete:function(l,n,v,B){var D=Model.REST["handle"+l.status];D&&D.call(this,l,n,v);n=n==="success";D=Model.REST.parseResponseData(l);n&&v&&D&&v.attr(D);B&&B.call(v,n,l,D)}},f)};
jQuery.cookie=function(c,a,f){if(typeof a!="undefined"){f=f||{};if(a===null){a="";f.expires=-1}var d="";if(f.expires&&(typeof f.expires=="number"||f.expires.toUTCString)){if(typeof f.expires=="number"){d=new Date;d.setTime(d.getTime()+f.expires*24*60*60*1E3)}else d=f.expires;d="; expires="+d.toUTCString()}var h=f.path?"; path="+f.path:"",l=f.domain?"; domain="+f.domain:"";f=f.secure?"; secure":"";document.cookie=[c,"=",encodeURIComponent(a),d,h,l,f].join("")}else{a=null;if(document.cookie&&document.cookie!=
""){f=document.cookie.split(";");for(d=0;d<f.length;d++){h=jQuery.trim(f[d]);if(h.substring(0,c.length+1)==c+"="){a=decodeURIComponent(h.substring(c.length+1));break}}}return a}};
var Asset=Model("asset",function(){this.persistence(Model.REST,"/admin/assets");this.include({load:function(c){var a=this,f="/admin/assets/"+a.id()+".json";jQuery.ajax({type:"GET",url:f,dataType:"json",success:function(d){a.merge(d);c.call(this)}})},toMustache:function(c){this.merge({query_path:c?"?"+decodeURIComponent(jQuery.param({query:c})):"",query:c});return this.attr()},toMustacheWithNeighbors:function(c){Asset.all().indexOf(this);c=this.toMustache(c);jQuery("<img />")[0].src="/images/"+c.id+
"/"+c.file_name;return{asset:c}}});this.extend({find_all_by_folder_id:function(c){return this.select(function(){return this.attr("folder_id")==c})},toMustache:function(c){var a=c?"?"+decodeURIComponent(jQuery.param({query:c})):"";return this.map(function(f){f.merge({query_path:a,query:c});return f.attr()})},asJSON:function(){return Asset.map(function(c){return c.attr()})},tags:function(){tags=[];Asset.map(function(){tags=tags.concat(this.attr("tags"))});return tags},searchRemote:function(c,a){var f=
c!=null?decodeURIComponent(jQuery.param({query:c})):"";Asset.each(function(){Asset.remove(this)});jQuery.ajax({type:"get",url:"/search.json",contentType:"application/json",dataType:"json",data:f,success:function(d){jQuery.each(d,function(h,l){var n=new Asset({id:l.id});n.merge(l);Asset.add(n)});a.call(this)}})},searchAdmin:function(c,a){Asset.each(function(){Asset.remove(this)});jQuery.ajax({type:"get",url:"/admin/assets.json",contentType:"application/json",dataType:"json",data:c,success:function(f){$.each(f,
function(d,h){var l=new Asset({id:h.id});l.merge(h);Asset.add(l)});a.call(this)}})},upload:function(c,a){var f=c.file,d=new XMLHttpRequest,h=this.generate_uuid(),l=JSON.stringify({folder_id:c.folder_id});Asset.callback=a;d.upload.uuid=h;d.upload.filename=f.name;d.upload.addEventListener("loadstart",Asset.onloadstartHandler,false);d.upload.addEventListener("progress",Asset.onprogressHandler);d.upload.addEventListener("load",Asset.onloadHandler,false);d.addEventListener("readystatechange",Asset.onreadystatechangeHandler,
false);d.open("POST","/admin/assets.json",true);d.setRequestHeader("Content-Type","application/octet-stream");d.setRequestHeader("X-File-Name",f.name);d.setRequestHeader("X-Params",l);d.setRequestHeader("X-File-Upload","true");d.send(f);a.before&&a.before.call(this,{uuid:h,file_name:f.name})},onloadstartHandler:function(){},onloadHandler:function(){},onprogressHandler:function(c){var a=Math.round(c.loaded/c.total*100);Asset.callback.progress&&Asset.callback.progress.call(this,c.target.uuid,a)},onreadystatechangeHandler:function(c){var a=
null;try{a=c.target.status}catch(f){return}if(a=="200"&&c.target.readyState==4&&c.target.responseText){a=JSON.parse(c.target.responseText);a.uuid=c.target.upload.uuid;Asset.callback.success&&Asset.callback.success.call(this,a)}},generate_uuid:function(){for(var c=[],a=0;a<32;a++)c[a]="0123456789ABCDEF".substr(Math.floor(Math.random()*16),1);c[12]="4";c[16]="0123456789ABCDEF".substr(c[16]&3|8,1);return c.join("")}})}),Folder=Model("folder",function(){this.persistence(Model.SinatraREST,"/admin/folders");
this.include({loadAssets:function(c){Asset.each(function(){Asset.remove(this)});var a="/admin/folders/"+this.attr("id")+"/assets.json";jQuery.ajax({type:"get",url:a,contentType:"application/json",dataType:"json",success:function(f){jQuery.each(f,function(d,h){var l=new Asset({id:h.id});l.merge(h);Asset.add(l)});c&&c.call(this)}})}});this.extend({asJSON:function(){return Folder.map(function(c){return c.attr()})}})}),Page=Model("page",function(){this.persistence(Model.SinatraREST,"/admin/pages");this.include({initialize:function(){},
children:function(){return Page.find_all_by_parent_id(this.id())},set_children:function(c){var a=this.children().all(),f=[];jQuery.each(a,function(d,h){h.set_children(function(){f.push(h.asJSON())})});this.merge({children:f});c&&c.call(this)},setPartAttributes:function(c,a){var f=this.attr("contents"),d;jQuery.each(f,function(h,l){if(c==l.id){if(a.content)l.content=a.content;if(a.asset_id)l.asset_id=a.asset_id;if(a.path)l.path=a.path;d=l}});return d},findPartByName:function(c){var a=this.attr("contents"),
f;jQuery.each(a,function(d,h){if(c==h.name){f=h;return false}});return f},findPartById:function(c){var a=this.attr("contents"),f;jQuery.each(a,function(d,h){if(c==h.id){f=h;return false}});return f},getChildren:function(c){var a=this,f="/admin/pages/"+a.id()+"/children.json";jQuery.ajax({type:"GET",url:f,dataType:"json",success:function(d){$.each(d,function(h,l){var n=new Page({id:l.id});n.merge(l);Page.add(n)});a.attr({"children?":true,children:a.childrenAsJSON()});c&&c.call(this,d)}})},has_children:function(){if(this.children().all().length>
0)return true},parent:function(){return Page.find(this.attr("parent_id"))},parts:function(){var c=this.attr("contents"),a=c.length;Part.each(function(){Part.remove(this)});for(var f=0;f<a;++f){var d=c[f],h=new Part({id:d.id});h.merge(d);h.attr("page_id",this.id());Part.add(h)}return Part},load:function(c){var a=this,f="/admin/pages/"+a.id()+".json";jQuery.ajax({type:"GET",url:f,dataType:"json",success:function(d){a.merge(d);Page.add(a);c.call(this)}})}});this.extend({toMustache:function(){return{pages:this.map(function(c){return c.attr()})}},
root:function(){return this.detect(function(){return this.attr("parent_id")==null})},site_map:function(c){var a=Page.root();Page.node(a,c)},node:function(c,a){var f=Page.select(function(){return this.attr("parent_id")==c.id()}).all();jQuery.each(f,function(d,h){h.parent().set_children();Page.node(h,a)});f.length==0&&a&&a.call(this)},find_by_parent_id:function(c){return this.detect(function(){return this.attr("parent_id")==c})},find_all_by_parent_id:function(c){return this.select(function(){return this.attr("parent_id")==
c})},find_by_path:function(c){return this.detect(function(){return this.attr("path")==c})},load_by_id:function(c,a){jQuery.ajax({type:"GET",url:"/admin/pages/"+c+".json",dataType:"json",success:function(f){var d=Page.find(f.id);d||(d=new Page({id:f.id}));d.merge(f);Page.add(d);a&&a.call(this,f)}})},create:function(c,a){jQuery.ajax({type:"post",url:"/admin/pages.json",dataType:"json",data:{page:c},success:function(f){var d=new Page({id:f.id});d.merge(f);Page.add(d);a.call(this,f)}})}})}),Layout=Model("layout",
function(){this.persistence(Model.SinatraREST,"/admin/templates");this.include({load:function(c){var a=this,f="/admin/templates/"+a.id()+".json";jQuery.ajax({type:"GET",url:f,dataType:"json",success:function(d){a.merge(d);c.call(this,d)}})}});this.extend({toMustache:function(){return{layouts:this.map(function(c){return c.attr()})}},asLayoutJSON:function(c){return Layout.find_all_by_class("Layout").map(function(a){c==a.id()?a.attr("selected",'selected="selected"'):a.attr("selected","");return a.attr()})},
find_by_class:function(c){return this.detect(function(){return this.attr("klass")==c})},find_all_by_class:function(c){return this.select(function(){return this.attr("klass")==c})},asJSON_by_class:function(c){return this.find_all_by_class(function(){return c.map(function(a){return a.attributes})})}})}),Part=Model("part",function(){this.include({deleteRemote:function(c,a){var f="/admin/pages/"+c.id()+"/parts/"+this.id()+".json";jQuery.ajax({type:"DELETE",url:f,dataType:"json",success:function(d){c.merge(d);
a.call(this)}})}});this.extend({toMustache:function(){return{parts:this.map(function(c){return c.attr()})}},create:function(c,a){var f="/admin/templates/"+c.template_id+"/parts.json",d=Layout.find(c.template_id);jQuery.ajax({type:"post",url:f,dataType:"json",data:{part:c},success:function(h){d.merge(h);a.call(this)}})}})}),Site=Model("site",function(){this.persistence(Model.SinatraREST,"/admin/sites");this.include({});this.extend({toMustache:function(){return{sites:this.map(function(c){return c.attr()})}}})}),
User=Model("user",function(){this.persistence(Model.SinatraREST,"/admin/users");this.include({});this.extend({toMustache:function(){return{users:this.map(function(c){return c.attr()})}}})}),Galerie={open:function(c,a){$("body").append('<div id="overlay"></div>').append('<div id="modal_wrapper"><div id="modal"></div></div>');var f=$("#modal");f.html(c);var d=$("#modal_wrapper"),h=$(window).height();f=f.height()+42;f=(h-f)/2;$("#overlay").css({height:h}).hide().fadeIn("fast");d.hide().fadeIn("fast").css({top:f});
a&&a.call(this)},close:function(){$("#modal_wrapper").fadeOut("fast",function(){$(this).remove();$("#overlay").fadeOut("fast",function(){$(this).remove()})})}},logger={info:function(c){window.console&&console.log(c)},debug:function(c){window.console&&console.log(c)}},Utilities={setNonHistoryLinks:function(){Modernizr.history||jQuery("a").click(function(c){c.preventDefault();if((c=jQuery(this).attr("href"))&&!c.match("http://")&&!c.match(/^#/)){console.log("#"+c);document.location.hash=$(this).attr("#href")}})},
loadModal:function(c,a){var f=this,d=jQuery(c);if(d.length){Loader.start();var h=d.find("img");if(h.length)setTimeout(function(){d.height()<20?h.load(function(){f.resizeModal(h,d,a)}):f.resizeModal(h,d,a)},13);else{jQuery(window).width();var l=jQuery(window).height();d.css({width:"640px",height:"480px","margin-top":(l-540)/2+"px"});Loader.stop();a&&a.call(this)}}},resizeModal:function(c,a,f){var d=c.clone();d=d[0].width/d[0].height;var h=jQuery(window).width(),l=jQuery(window).height();if(a.height()>
l-40){c.height(l-40).width((l-40)*d);a.height(l-40).width((l-40)*d)}if(a.width()>h-40){c.height((h-40)/d).width(h-40);a.height((h-40)/d).width(h-40);a.css({"margin-top":(l-(h-40)/d)/2})}a.width()<h-40&&a.height()<l-40&&a.css({width:a.height()*d+"px","margin-top":(l-a.height())/2});Loader.stop();f&&f.call(this)},notice:function(c,a){a=a||{};var f=jQuery(".notice"),d=a["class"]||"message";f.html(c).addClass(d).fadeIn("fast",function(){setTimeout(function(){a.persist||f.fadeOut("slow")},1800)})},hideNotice:function(){jQuery(".notice").fadeOut("slow")},
setTimestamp:function(){window.timestamp=(new Date).getTime()},keyboard_nav:function(){jQuery("body").keydown(function(c){switch(c.keyCode){case 37:$("a.previous").click();break;case 39:$("a.next").click();break}})},check_browser_version:function(){},formObserver:function(){},unique:function(c){tmp=[];for(i=0;i<c.length;i++)if(!Utilities.contains(tmp,c[i])){tmp.length+=1;tmp[tmp.length-1]=c[i]}return tmp},contains:function(c,a){for(j=0;j<c.length;j++)if(c[j]==a)return true;return false}},Loader={start:function(c){c=
jQuery("#loader");if(c.length){c.show();Loader.timer=setInterval(function(){var a=c.css("background-position-y").replace("px","");c.css({"background-position-y":a-40+"px"})},67)}},stop:function(c){c=jQuery("#loader");if(c.length){c.hide();clearInterval(Loader.timer)}}},Updater={setup:function(c,a){jQuery.each(c,function(f,d){var h=new a({id:d.id});h.merge(d);a.add(h)})},update:function(){window.ninja=true;jQuery.ajax({url:"/admin/activity.json",type:"POST",data:{updated:window.timestamp},success:function(c){jQuery.each(c.models,
function(a,f){Page.find(f.id).merge(f);Utilities.setTimestamp()});window.ninja=false}})}},aceModes={javascript:require("ace/mode/javascript").Mode,html:require("ace/mode/html").Mode,css:require("ace/mode/css").Mode,scss:require("ace/mode/scss").Mode,sass:require("ace/mode/scss").Mode,textile:require("ace/mode/textile").Mode,none:require("ace/mode/scss").Mode},delay=function(){var c=0;return function(a,f){clearTimeout(c);c=setTimeout(a,f)}}(),Editor={initialize:function(){var c=jQuery("#editor-buttons input[type=button]"),
a=jQuery("#editor-buttons input#save");c.click(function(){var f=jQuery(this).data("cmd"),d=jQuery(this).data("value");if(d=="promptUser")d=prompt(jQuery(this).data("text"));var h=jQuery("iframe")[0];f&&h.contentDocument.execCommand(f,false,d)});a.click(function(){var f=document.location.pathname.split("/"),d=Page.find(f[f.length-1]),h={};jQuery("iframe").contents().find("div.editable").each(function(){var l=jQuery(this),n=l.attr("id").split("-")[1];h[n]=l.html()});jQuery.each(h,function(l,n){n=Editor.textilize(n);
d.setPartAttributes(l,{content:n})});d.save()})},textilize:function(c,a){c=c.replace(/\s*<p>((.|[\r\n])*?)<\/p>\s*/gi,"\n\n$1\n\n\n");c=c.replace(/\s*<h1>((.|[\r\n])*?)<\/h1>\s*/gi,"h1. $1\n\n");c=c.replace(/\s*<h2>((.|[\r\n])*?)<\/h2>\s*/gi,"h2. $1\n\n");c=c.replace(/\s*<h3>((.|[\r\n])*?)<\/h3>\s*/gi,"h3. $1\n\n");c=c.replace(/\s*<h4>((.|[\r\n])*?)<\/h4>\s*/gi,"h4. $1\n\n");c=c.replace(/\s*<h5>((.|[\r\n])*?)<\/h5>\s*/gi,"h5. $1\n\n");c=c.replace(/\s*<h6>((.|[\r\n])*?)<\/h6>\s*/gi,"h6. $1\n\n");c=
c.replace(/<(?:b|strong)>((.|[\r\n])*?)<\/(?:b|strong)>/gi,"*$1*");c=c.replace(/<(?:i|em)>((.|[\r\n])*?)<\/(?:i|em)>/gi,"_$1_");c=c.replace(/<(?:strike|del)>((.|[\r\n])*?)<\/(?:strike|del)>/gi,"-$1-");c=c.replace(/<(?:u|ins)>((.|[\r\n])*?)<\/(?:u|ins)>/gi,"+$1+");c=c.replace(/<a href="(.*?)">((.|[\r\n])*?)<\/a>/gi,'"$2":$1');c=c.replace(/<code.*?>((.|[\r\n])*?)<\/code>/gi,"@$1@");if(a)c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");c=c.replace(/(\r\n|\n){3,}/g,"\n\n");return c=
c.replace(/^[\r\n]+|[\r\n]+$/g,"")}};jQuery("span.opener").live("click",function(){var c=jQuery(this).parents("li.node:first").attr("id").split("-")[1];Pages.trigger("open-page-children",c)});jQuery("a.page-reload").live("click",function(){var c=jQuery(this).attr("href").split("/")[3];c=jQuery("iframe#page-iframe-"+c);c.attr("src",c.attr("src"));Utilities.hideNotice()});jQuery("div#sidebar a").live("click",function(){Utilities.hideNotice()});
jQuery(window).resize(function(){var c=jQuery("div#asset-editor");Utilities.loadModal(c)});jQuery("a.insert-file").live("click",function(c){c.preventDefault();window.editor.insert($(this).attr("href"))});jQuery("a.info-icon").live("click",function(c){c.preventDefault();current_asset_id=this.id.split("-")[2];Assets.trigger("show_info",{current_asset_id:current_asset_id})});jQuery("a.close-modal-strip").live("click",function(c){c.preventDefault();jQuery("div.modal-strip").fadeOut("fast",function(){jQuery(this).remove()})});
jQuery("a.insert-image").live("click",function(c){c.preventDefault();c=jQuery(this).attr("href");Base.trigger("image-browser",c)});jQuery("a.remove-icon").live("click",function(c){c.preventDefault();current_asset_id=this.id.split("-")[2];Assets.trigger("show_remove_dialog",{current_asset_id:current_asset_id})});
var iFramer={initialize:function(c,a){var f=jQuery(c);jQuery("#loader");f.length&&f.load(function(){var d=$(this).contents();d.find("div.editable").attr("contenteditable","true").css({background:"hsla(30, 17.7%, 61%, 0.3)"});d.find("a").click(function(h){var l=jQuery(this).attr("href").split("?")[0].replace("/preview","");if(l=Page.find_by_path(l)){h.preventDefault();Pages.setLocation(l.attr("admin_path"))}});d.find("a.insert-image").click(function(h){h.preventDefault();h=jQuery(this).attr("href");
Base.trigger("image-browser",h)});a&&a.call(this)})},setEditFlags:function(c){c.css({position:"relative",display:"block",height:"0",width:"0","text-decoration":"none"}).find("span").css({display:"block",position:"absolute",top:"-24px",left:"12px",padding:"4px 8px",width:"100px",background:"rgba(255, 255, 0, 0.7)"})}},Base=Sammy(function(c){c.debug=false;c.use(Sammy.JSON);c.use(Sammy.Mustache);c.use(Sammy.NestedParams);c.template_engine="mustache";c.helpers({setup:function(a,f){jQuery.each(a,function(d,
h){var l=new f({id:h.id});l.merge(h);f.add(l)})},update:function(){var a=this;window.ninja=true;jQuery.ajax({url:"/admin/activity.json",type:"POST",data:{updated:window.timestamp},success:function(f){jQuery.each(f.models,function(d,h){h.class_name=="Page"&&a.trigger("update-page",h);h.class_name=="Layout"&&a.trigger("update-layout",h);Utilities.setTimestamp()});window.ninja=false}})}});c.bind("run",function(){var a=this;jQuery("#sidebar .opener").live("click",function(){a.trigger("toggle-children",
this);return false});a.trigger("toggle-sidebar");if(jQuery.cookie("toggle-sidebar")=="closed"){var f=jQuery("div#sidebar"),d=jQuery("div#editor"),h=jQuery("div#toggle");f.toggleClass("closed");d.css({left:"0"});h.css({left:"0"})}});c.bind("set-active-tab",function(a,f){var d=jQuery("div#tabs a.tab"),h=f.split("?")[0].split("/")[2];h=jQuery("#"+h+"-tab");d.removeClass("active");h.addClass("active")});c.bind("update-page",function(a,f){var d=Page.find(f.id);d.merge(f);d.save();jQuery("li#page-"+f.id).find("span.title a").text(d.attr("title"));
jQuery("h1#page-title-"+d.id()).text(d.attr("title"));jQuery("#page-iframe-"+d.id()).length&&Utilities.notice('<a class="page-reload" href="'+d.attr("admin_path")+'">This page has been changed. Click here to reload.</span>',{persist:true,"class":"warning"})});c.bind("update-layout",function(a,f){var d=Layout.find(f.id);d.merge(f);d.save();jQuery("li#layout-"+f.id).find("span.title a").text(d.attr("name"))});c.bind("image-browser",function(a,f){var d=this,h=f.split("/")[3],l=f.split("/")[5],n=Page.find(h),
v=n.findPartById(l);Asset.searchAdmin({limit:12,page:1},function(){d.load(jQuery("script#admin-image_parts-index")).interpolate({assets:Asset.asJSON(),part:v.attributes},"mustache").appendTo("body").then(function(){jQuery("ul.assets .image a").click(function(B){var D=jQuery(B.currentTarget);B=D.find("img").attr("src").split("?")[0];D=D.attr("id").split("-")[2];var K=jQuery("iframe#page-iframe-"+n.id());K=K.length?K.contents().find('img[src^="'+v.path+'"]').first():jQuery('img[src^="'+v.path+'"]').first();
B=K.attr("src").replace(K.attr("src").split("?")[0],B);K.attr("src",B);jQuery("#overlay").fadeOut("fast",function(){jQuery(this).remove()});n.setPartAttributes(l,{asset_id:D,path:B});n.save();return false})})})});c.bind("toggle-sidebar",function(){var a=jQuery("div#sidebar"),f=jQuery("div#editor"),d=jQuery("p#toggle");d.find("a").click(function(h){h.preventDefault();if(a.hasClass("closed")){h="300";jQuery.cookie("sidebar_toggled","")}else{h="0";jQuery.cookie("sidebar_toggled","closed")}Modernizr.cssanimations&&
console.log("Move.js goes here");a.animate({width:h},200).toggleClass("closed");f.animate({left:h},200).toggleClass("open");d.animate({left:h},200).toggleClass("open")})});c.before(function(){Galerie.close()});c.before(function(a){var f=a.path;a&&a.verb=="get"&&a.trigger("set-active-tab",f)})}),Sites=Sammy(function(){var c=this;this.helpers({loadSites:function(a){if(Site.all().length==0)Site.load(function(){a&&a.call(this)});else a&&a.call(this)},renderSiteIndex:function(a){this.load(jQuery("script#admin-sites-index")).interpolate(Site.toMustache(),
"mustache").replace("#editor").then(function(){a&&a.call(this)})}});this.get("#/preview",function(){alert(document.location.hostname);window.open("/","preview")});this.get("/admin/sites",function(a){c.refresh_pages=true;jQuery("#editor").html('<h1 class="section">Sites</div>');a.loadSites(function(){a.renderSiteIndex()})});this.get("/admin/sites/new",function(a){a.loadSites(function(){$("#modal").length==0&&Galerie.open();a.load(jQuery("script#admin-sites-new")).interpolate({},"mustache").replace("#modal");
a.renderSiteIndex(Site.all())})});this.post("/admin/sites",function(a){(new Site(a.params.site)).save(function(f,d){var h=JSON.parse(d.responseText);h.errors?alert(JSON.stringify(h)):a.redirect("#/sites")})});this.get("/admin/sites/:id/edit",function(a){a.loadSites(function(){site=Site.find(a.params.id);if(jQuery("#sites").length){jQuery(".site-form").html("");a.load(jQuery("script#admin-sites-edit")).interpolate({site:site.asJSON()},"mustache").replace("#site-form-"+site.id())}else a.renderSiteIndex(function(){jQuery(".site-form").html("");
a.load(jQuery("script#admin-sites-edit")).interpolate({site:site.asJSON()},"mustache").replace("#site-form-"+site.id())})})});this.put("/admin/sites/:id",function(a){var f=Site.find(a.params.id);f.attr(a.params.site);f.save(function(d,h){var l=JSON.parse(h.responseText);l.errors?alert(JSON.stringify(l)):a.redirect("#/sites")})});this.get("/admin/sites/:id/remove",function(a){Galerie.open();a.loadSites(function(){site=Site.find(a.params.id);a.load(jQuery("script#admin-sites-remove")).interpolate({site:site.asJSON()},
"mustache").replace("#modal");a.renderSiteIndex(Site.all())})});this.del("/admin/sites/:id",function(a){site.destroy(function(f){f?a.redirect("#/sites"):alert("there were issues")})})}),Layouts=Sammy(function(){var c=this;this.helpers({loadLayouts:function(a){a&&a.call(this)},renderLayoutIndex:function(){this.load(jQuery("script#admin-templates-index")).interpolate({layouts:Layout.find_all_by_class("Layout").map(function(a){return a.attributes}),partials:Layout.find_all_by_class("Partial").map(function(a){return a.attributes}),
javascripts:Layout.find_all_by_class("Javascript").map(function(a){return a.attributes}),stylesheets:Layout.find_all_by_class("Stylesheet").map(function(a){return a.attributes}),files:Layout.find_all_by_class("Upload").map(function(a){return a.attributes})},"mustache").replace("#sidebar")},renderLayout:function(a){this.load(jQuery("script#admin-templates-edit")).interpolate({layout:a.asJSON(),image:a.attr("file_type")&&a.attr("file_type").match("image")?true:false,filters:[{name:"CSS",value:"none",
selected:a.attr("filter")=="css"?'selected="selected"':""},{name:"Sass",value:"sass",selected:a.attr("filter")=="sass"?'selected="selected"':""},{name:"SCSS",value:"scss",selected:a.attr("filter")=="scss"?'selected="selected"':""},{name:"Partial",value:"none",selected:a.attr("filter")=="none"?'selected="selected"':""}]},"mustache").replace("#editor").then(function(){var f=a.attr("mode");f=aceModes[f];window.editor=ace.edit("layout_content");window.editor.setTheme("ace/theme/textmate");window.editor.getSession().setMode(new f);
window.editor.session.setUseWrapMode(true);window.editor.getSession().setValue(a.attr("content"));jQuery("a.tab").click(function(d){d.preventDefault();jQuery(".pane").hide();jQuery(jQuery(this).attr("href")).show()})})}});this.bind("run",function(){c.refresh_templates=true;c.refresh_pages=true;c.modal=false});this.get("/admin/templates",function(a){c.refresh_templates=false;jQuery("#editor").html('<h1 class="section">Templates</div>');a.renderLayoutIndex(Layout.all())});this.get("/admin/templates/new/:klass",
function(a){var f=$("<div />").attr({id:"new-page-container","class":"small-modal"}),d=a.params.klass;$("#modal").length==0&&Galerie.open(f);a.load(jQuery("#admin-templates-new")).interpolate({klass:d,file:d=="upload"?true:false},"mustache").replace("#new-page-container");a.renderLayoutIndex(Layout.all())});this.post("/admin/templates",function(a){(new Layout(a.params.template)).save(function(f,d){var h=JSON.parse(d.responseText);if(h.errors)Utilities.notice(JSON.stringify(h));else{a.redirect("/admin/templates");
Utilities.notice("Successfully saved template")}})});this.get("/admin/templates/:id/edit",function(a){c.refresh_pages=true;var f=Layout.find(a.params.id);a.renderLayout(f);a.renderLayoutIndex(Layout.all())});this.put("/admin/templates/:id",function(a){var f=Layout.find(a.params.id);a.params.layout.content=window.editor.getSession().getValue();f.attr(a.params.layout);f.save(function(d){if(d){a.renderLayoutIndex();Utilities.notice("Successfully saved template");d=aceModes[f.attr("mode")];window.editor.getSession().setUseSoftTabs(true);
window.editor.getSession().setTabSize(2);window.editor.getSession().setMode(new d)}})});this.get("/admin/templates/:id/remove",function(a){var f=Layout.find(a.params.id);Galerie.open();a.load(jQuery("#admin-templates-remove")).interpolate({layout:f.asJSON()},"mustache").replace("#modal");a.renderLayoutIndex(Layout.all())});this.del("/templates/:id",function(a){Layout.find(a.params.id).destroy(function(f){if(f){a.renderLayoutIndex();Utilities.notice("Successfully deleted template");a.redirect("/admin/templates")}})});
this.post("/layouts/:id/parts",function(a){this.loadLayouts(function(){var f=a.params.id;Part.create(a.params.part,function(){a.redirect("/admin/templates/"+f+"/edit")})})})}),Assets=Sammy(function(c){var a=this;c.helpers({send_files:function(f,d,h){jQuery.each(f,function(l,n){Asset.upload({file:n,folder_id:d.folder_id},{before:function(v){h.before&&h.before.call(this,v)},progress:function(v,B){h.progress&&h.progress.call(this,v,B)},success:function(v){asset=new Asset;asset.merge(v);Asset.add(asset);
h.success&&h.success.call(this,asset)}})})}});c.bind("render-asset",function(f,d,h){this.load(jQuery("script#admin-assets-edit")).interpolate(d.toMustacheWithNeighbors(h),"mustache").appendTo("body").then(function(){Utilities.loadModal("div#asset-editor",function(){jQuery("div#asset-editor").fadeIn("fast");window.modal=true})})});c.bind("render-index",function(f,d){var h=d.query,l=d.folder_id,n=this,v=jQuery("script#admin-assets-asset").html();n.load(jQuery("script#admin-assets-index")).interpolate({assets:Asset.toMustache(h),
folder_id:l,query:h,partials:{asset:v}},"mustache").replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple","multiple").bind("change",function(){jQuery(this).parents("form:first").submit()});n.trigger("set_draggable_assets");n.trigger("set_droppable_folders")});window.modal=false});c.bind("set_draggable_assets",function(){jQuery("ul#assets").sortable({stop:function(f,d){console.log(d.serialize())}})});c.bind("set_droppable_folders",function(){jQuery("li.folder").droppable({hoverClass:"active",
drop:function(f,d){var h=f.target.id.split("-")[1],l=Folder.find(h),n=d.draggable[0].id.split("-")[1];n=Asset.find(n);n.attr("folder_id",h);d.draggable.fadeOut("fast");n.save(function(v){v?Utilities.notice("Asset added to "+l.attr("name")):d.draggable.fadeIn("fast")})}})});c.bind("show_info",function(f,d){var h=Asset.find(d.current_asset_id),l=jQuery("#asset-"+h.id()),n=l.find(".info");jQuery(".modal-strip").remove();n.length||this.load(jQuery("#admin-assets-info")).interpolate({asset:h.toMustache()},
"mustache").appendTo(l).then(function(){jQuery(".modal-strip").fadeIn("fast")})});c.bind("show_remove_dialog",function(f,d){var h=Asset.find(d.current_asset_id),l=jQuery("#asset-"+h.id()),n=l.find(".remove");jQuery(".modal-strip").remove();n.length||this.load(jQuery("script#admin-assets-remove")).interpolate({asset:h.toMustache()},"mustache").appendTo(jQuery("body")).then(function(){var v=jQuery(".modal-strip");v.css({top:l.offset().top+l.height()/2,left:l.offset().left+l.width()/2});v.fadeIn("fast")})});
c.get("/admin/assets",function(f){jQuery("#overlay").remove();var d=f.params.query,h={query:d};h.limit=f.params.limit||96;h.page=f.params.page||1;if(d){f.renderFolderTree();Asset.searchAdmin(h,function(){f.trigger("render-index",{query:d})})}else f.redirect(Folder.first().attr("admin_path"))});c.get("/admin/assets/new",function(f){f.load(jQuery("script#admin-assets-new")).interpolate({},"mustache").replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple","multiple")});a.first_run=
false});c.post("/admin/assets",function(f){var d=document.getElementById("ajax_uploader").files,h=f.params.asset.folder_id,l=f.params.query?f.params.query:null;jQuery("form#new_asset");l=l?{query:l}:{};l.limit=f.params.limit||48;l.page=f.params.page||1;l.folder_id=h;this.send_files(d,l,{before:function(n){f.load(jQuery("script#admin-assets-loading")).interpolate({uuid:n.uuid,title:n.file_name.split(".")[0]},"mustache").appendTo("#assets")},progress:function(){},success:function(n){var v=Mustache.to_html(jQuery("script#admin-assets-asset").html(),
n.attr());jQuery("<img />").attr("src","/images/"+n.id()+"/"+n.attr("file_name")).load(function(){jQuery("li#asset-"+n.attr("uuid")).replaceWith(v)})}});return false});c.get("/admin/assets/:id/edit",function(f){jQuery("#overlay").remove();var d=f.params.query?f.params.query:"",h=d?{query:f.params.query}:{},l=Asset.find(f.params.id);window.modal=true;if(l)f.trigger("render-asset",l,d);else{alert("hey");Asset.searchAdmin(h,function(){var n=Asset.find(f.params.id);f.trigger("render-index",{folder_id:n.attr("folder_id")});
f.renderFolderTree();f.trigger("render-asset",n,d)})}});c.put("/admin/assets/:id",function(f){var d=Asset.find(f.params.id);if(d){d.attr(f.params.asset);d.save(function(h){h&&Utilities.notice("Successfully saved asset")})}else{d=new Asset({id:f.params.id});d.load(function(){d.attr(f.params.asset);d.save(function(h){h&&Utilities.notice("Successfully saved asset")})})}});c.del("/admin/assets/:id",function(f){f=f.params.id;var d=Asset.find(f);d.attr("folder_id");jQuery("li#asset-"+f).fadeOut("fast");
jQuery(".modal-strip").remove();d.destroy(function(h){h&&Utilities.notice("Asset removed")})})}),Folders=Sammy(function(c){this.helpers({renderFolderTree:function(a){if(jQuery("ul#folders").length)a&&a.call(this);else this.load(jQuery("script#admin-folders-index")).interpolate({folders:Folder.asJSON()},"mustache").replace("#sidebar").then(function(){a&&a.call(this)})}});this.get("/admin/folders/new/?",function(a){$("#modal").length==0&&Galerie.open();a.renderFolderTree(function(){jQuery("ul#folders li").removeClass("active")});
a.load(jQuery("#admin-folders-new")).interpolate({},"mustache").replace("#modal")});c.get("/admin/folders/:id",function(a){jQuery("#overlay").remove();var f=a.params.id,d=Folder.find(f);a.renderFolderTree(function(){jQuery("ul#folders li").removeClass("active");jQuery("#folder-"+f).addClass("active")});window.modal||d.loadAssets(function(){a.trigger("render-index",{folder_id:d.id()})});window.modal=false});c.get("/admin/folders/:folder_id/assets/:id/edit",function(a){jQuery("#overlay").remove();var f=
Folder.find(a.params.folder_id),d=Asset.find(a.params.id);window.modal=true;d?a.trigger("render-asset",d):f.loadAssets(function(){d=Asset.find(a.params.id);a.renderFolderTree();a.trigger("render-index",{folder_id:f.id()});a.trigger("render-asset",d)})});this.post("/admin/folders",function(a){var f=new Folder(a.params.folder);f.save(function(d,h){var l=JSON.parse(h.responseText);if(l.errors)alert(JSON.stringify(l));else{alert(f.attr("admin_path"));a.load(jQuery("script#admin-folders-index")).interpolate({folders:Folder.asJSON()},
"mustache").replace("#sidebar");a.redirect(f.attr("admin_path"))}})})}),Pages=Sammy(function(c){c.helpers({renderPagePreview:function(a,f){var d=this;d.load(jQuery("script#admin-pages-show")).interpolate({page:a.asJSON(),layouts:Layout.asLayoutJSON(a.attr("layout_id")),base_page_id:a.id()},"mustache").replace("#editor").then(function(){iFramer.initialize(".preview iframe",function(){f&&f.call(this)});d.trigger("set-active-page",a);Editor.initialize()})},renderPageEditor:function(a,f){var d=this;if(jQuery("#page-editor").length){f&&
f.call(this);d.trigger("set-active-page",a)}else d.load(jQuery("script#admin-pages-edit")).interpolate({page:a.asJSON()},"mustache").replace("#editor").then(function(){jQuery("li.node").removeClass("active");jQuery("#page-"+a.id()).addClass("active");f&&f.call(this);d.trigger("set-active-page",a)})},renderPageProperties:function(a,f){this.load(jQuery("script#admin-pages-form")).interpolate({page:a.asJSON(),layouts:Layout.asLayoutJSON(a.attr("layout_id")),base_page_id:a.id(),timestamp:window.timestamp},
"mustache").replace("#page-tabs-"+a.id()).then(function(){f&&f.call(this)})}});c.bind("page-index",function(a,f){var d=Page.root(),h;jQuery.cookie("active_page_ids")&&jQuery.cookie("active_page_ids").split(",");Page.site_map();this.load(jQuery("script#admin-pages-index")).interpolate({root:d.asJSON(),partials:{node:jQuery("script#admin-pages-node").html()}},"mustache").replace("#sidebar").then(function(){h=jQuery("li#page-"+f.id()).parents("ul:first");if(h.length){console.log(h);h.show()}})});c.bind("open-page-children",
function(a,f){var d=Page.find(f);d=jQuery("li#page-"+d.id()).find("ul:first");jQuery.cookie("active_page_ids")&&jQuery.cookie("active_page_ids").split(",");console.log(d.is_visible);d.toggle().toggleClass("open")});c.bind("set-active-page",function(a,f){jQuery("li.node").removeClass("active");jQuery("li#page-"+f.id()).addClass("active")});c.bind("reload-page",function(a,f){var d=f.id(),h=jQuery("iframe#page-iframe-"+d);jQuery("li#page-"+d).find("span.title a").text(f.attr("title"));jQuery("h1#page-title-"+
d).text(f.attr("title"));h.attr("src",h.attr("src"))});this.get("/admin/pages/?",function(a){var f=Page.first();a.redirect(f.attr("admin_path"))});this.get("/admin/pages/:id/new/?",function(a){var f=Page.find(a.params.id),d=$("<div />").attr({id:"new-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(d);a.trigger("page-index");a.load(jQuery("#admin-pages-new")).interpolate({parent:f.asJSON(),layouts:Layout.asLayoutJSON(f.attr("layout_id"))},"mustache").replace("#new-page-container")});
this.post("/admin/pages/:page_id/?",function(a){var f=Page.find(a.params.page_id);(new Page(a.params.page)).save(function(d,h){var l=JSON.parse(h.responseText);if(l.errors)alert(JSON.stringify(l));else{count=f.attr("child_count");f.merge({child_count:count+1,"children?":true});a.redirect(l.admin_path)}})});this.get("/admin/pages/:id/?",function(a){jQuery("#overlay").remove();jQuery(".modal-editor").remove();var f=Page.find(a.params.id);if(f)a.renderPagePreview(f);else{f=new Page({id:a.params.id});
f.load(function(){a.renderPagePreview(f)})}a.trigger("page-index",f)});this.get("/admin/pages/:id/edit/?",function(a){var f=Page.find(a.params.id);a.renderPageEditor(f,function(){a.renderPageProperties(f)});a.trigger("page-index",f)});this.put("/admin/pages/:page_id",function(a){var f=Page.find(a.params.page_id),d=jQuery("span.timestamp").text();f.attr(a.params.page);d<window.timestamp?alert("Someone else has edited this page, please reload and try again"):f.save(function(h){if(h){Utilities.setTimestamp();
Utilities.notice("Successfully saved page");a.trigger("reload-page",f);a.redirect(f.attr("admin_path"))}})});this.get("/admin/pages/:id/remove",function(a){var f=Page.find(a.params.id),d=$("<div />").attr({id:"remove-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(d);a.trigger("page-index");a.load(jQuery("#admin-pages-remove")).interpolate({page:f.asJSON()},"mustache").replace("#remove-page-container")});this.del("/admin/pages/:id",function(a){var f=Page.find(a.params.id);
console.log("HEY");console.log(f);Page.remove(f);f.destroy(function(d){d&&a.redirect("/admin/pages")})})}),Parts=Sammy(function(c){c.helpers({renderPart:function(a,f,d){var h=this;h.load(jQuery("script#admin-"+d+"-edit")).interpolate({part:a.asJSON(),page:f.asJSON(),assets:Asset.asJSON(),timestamp:window.timestamp},"mustache").replace("#page-tabs-"+f.id()).then(function(){var l=aceModes.textile;window.editor=ace.edit("part-"+a.id()+"-content");window.editor.setTheme("ace/theme/textmate");window.editor.getSession().setMode(new l);
window.editor.session.setUseWrapMode(true);window.editor.getSession().setValue(a.attr("content"));jQuery(".toolbar a.tab").removeClass("active");jQuery(".toolbar a."+a.attr("name")+"-tab").addClass("active");h.trigger("set_asset_links");jQuery("#ajax_uploader").attr("multiple","multiple").change(function(){var n=jQuery(this).parents("form:first");jQuery(".progress").slideDown("slow",function(){n.submit()})});h.trigger("page-index")})}});this.bind("set_asset_links",function(){jQuery("#search-results-container li.asset").each(function(a,
f){var d=jQuery(f).find("a"),h=jQuery(f).attr("id").split("-")[1],l=d.find("img").attr("src");d.click(function(n){n.preventDefault();jQuery("input#part-asset-id").attr("value",h);jQuery("form#edit-part img.preview").attr("src",l.replace("icon","thumbnail"))})})});this.get("/admin/pages/:page_id/parts/:id/edit",function(a){jQuery(".modal-editor").remove();$("iframe");var f=Page.find(a.params.page_id),d=f.parts().find(a.params.id);a.trigger("show-page-menu",f);a.renderPageEditor(f,function(){a.renderPart(d,
f,"parts")})});this.get("/admin/pages/:page_id/image_parts/:id/edit",function(a){var f=Page.find(a.params.page_id),d=f.parts().find(a.params.id);$("iframe");Asset.searchAdmin({limit:"24"},function(){a.trigger("show-page-menu",f);a.renderPageEditor(f,function(){a.renderPart(d,f,"image_parts")})})});this.get("/admin/pages/:page_id/parts/:id/results",function(a){Page.find(a.params.page_id);Part.find(a.params.id);var f=a.params.query?a.params.query:null;Asset.searchAdmin(f?{query:f}:{},function(){a.load(jQuery("#admin-pages-search_results")).interpolate(Asset.toMustache(),
"mustache").replace("#search-results-container").then(function(){a.trigger("set_asset_links")})})});this.put("#/pages/:page_id/parts/:id",function(a){var f=Page.find(a.params.page_id),d=f.parts().find(a.params.id),h=f.attr("contents"),l=h.length;a.params.part.content=window.editor.getSession().getValue();for(var n=0;n<l;++n){d=h[n];if(a.params.id==d.id){d.content=a.params.part.content;d.asset_id=a.params.part.asset_id;var v=Part.find(d.id);v.attr({asset_id:a.params.part.asset_id,content:a.params.part.content});
v.save()}}f.save(function(B){if(B){Utilities.setTimestamp();Utilities.notice(v.attr("name")+" saved");window.editor.getSession().setUseSoftTabs(true);window.editor.getSession().setTabSize(2);window.editor.getSession().setMode(new editorMode)}})});this.post("#/pages/:page_id/image_parts/:id/assets",function(a){Page.find(a.params.page_id).parts().find(a.params.id);var f=document.getElementById("ajax_uploader").files,d=a.params.query?a.params.query:null;jQuery("form#new_asset");d=d?{query:d}:{};d.limit=
a.params.limit||48;d.page=a.params.page||1;this.send_files(f,d,function(){a.load(jQuery("#admin-pages-search_results")).interpolate(Asset.toMustache(),"mustache").replace("#search-results-container").then(function(){jQuery("#ajax_uploader").attr("files",null);jQuery(".progress").slideUp("slow",function(){jQuery(this).html("")});a.trigger("set_asset_links")})})})}),Users=Sammy(function(){this.helpers({loadUsers:function(c){if(User.all().length==0)User.load(function(){c&&c.call(this)});else c&&c.call(this)},
renderUserIndex:function(c){this.load(jQuery("script#admin-users-index")).interpolate(User.toMustache(),"mustache").replace("#editor").then(function(){c&&c.call(this)})}});this.get("/admin/users",function(c){jQuery("#editor").html('<h1 class="section">Users</div>');c.loadUsers(function(){c.renderUserIndex()})});this.get("/admin/users/new",function(c){c.loadUsers(function(){jQuery("#modal").length||Galerie.open();c.load(jQuery("script#admin-users-new")).interpolate({},"mustache").replace("#modal");
c.renderUserIndex()})});this.post("/admin/users",function(c){(new User(c.params.user)).save(function(a,f){var d=JSON.parse(f.responseText);d.errors?alert(JSON.stringify(d)):c.redirect("/admin/users")})});this.get("/admin/users/:id/edit",function(c){c.loadUsers(function(){user=User.find(c.params.id);if(jQuery("#users").length){jQuery(".user-form").html("");c.load(jQuery("script#admin-users-edit")).interpolate({user:user.asJSON()},"mustache").replace("#user-form-"+user.id())}else c.renderUserIndex(function(){jQuery(".user-form").html("");
c.load(jQuery("script#admin-users-edit")).interpolate({user:user.asJSON()},"mustache").replace("#user-form-"+user.id())})})});this.put("/admin/users/:id",function(c){var a=User.find(c.params.id);a.attr(c.params.user);a.save(function(f,d){var h=JSON.parse(d.responseText);h.errors?alert(JSON.stringify(h)):c.redirect("/admin/users")})})});
jQuery(document).ready(function(){var c=jQuery("#loader");jQuery("<img />",{src:"/images/loader.png"});jQuery("body").ajaxStart(function(){window.ninja||Loader.start(c)}).ajaxSuccess(function(){Loader.stop(c)});if(!jQuery("#login").length){jQuery.ajax({url:"/templates",success:function(a){jQuery("head").append(a)}});jQuery.ajax({url:"/admin/sites/current.json",success:function(a){Updater.setup(a.pages,Page);Page.root().children();Updater.setup(a.templates,Layout);Updater.setup(a.folders,Folder);Base.run();
window.timestamp=a.now}})}require("pilot/canon").addCommand({name:"save",bindKey:{win:"Ctrl-S",mac:"Command-S",sender:"editor"},exec:function(){jQuery("form.command-save").submit()}})});function children(c){var a=new Page({id:c.id});a.merge(c);Page.add(a);a.children()};
