(function(g,h){function j(a){return c.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:false}function o(a){if(!db[a]){var d=W.body,b=c("<"+a+">").appendTo(d),e=b.css("display");b.remove();if(e==="none"||e===""){Xa||(Xa=W.createElement("iframe"),Xa.frameBorder=Xa.width=Xa.height=0);d.appendChild(Xa);if(!Ha||!Xa.createElement){Ha=(Xa.contentWindow||Xa.contentDocument).document;Ha.write((W.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");Ha.close()}b=Ha.createElement(a);Ha.body.appendChild(b);
e=c.css(b,"display");d.removeChild(Xa)}db[a]=e}return db[a]}function u(a,d){var b={};c.each(Pa.concat.apply([],Pa.slice(0,d)),function(){b[this]=a});return b}function t(){qb=h}function z(){setTimeout(t,0);return qb=c.now()}function K(){try{return new g.XMLHttpRequest}catch(a){}}function E(a,d,b,e){if(c.isArray(d))c.each(d,function(i,k){b||eb.test(a)?e(a,k):E(a+"["+(typeof k=="object"||c.isArray(k)?i:"")+"]",k,b,e)});else if(!b&&d!=null&&typeof d=="object")for(var f in d)E(a+"["+f+"]",d[f],b,e);else e(a,
d)}function y(a,d,b,e,f,i){f=f||d.dataTypes[0];i=i||{};i[f]=true;f=a[f];for(var k=0,m=f?f.length:0,p=a===cb,r;k<m&&(p||!r);k++){r=f[k](d,b,e);typeof r=="string"&&(!p||i[r]?(r=h):(d.dataTypes.unshift(r),r=y(a,d,b,e,r,i)))}(p||!r)&&!i["*"]&&(r=y(a,d,b,e,"*",i));return r}function Q(a){return function(d,b){typeof d!="string"&&(b=d,d="*");if(c.isFunction(b))for(var e=d.toLowerCase().split(cc),f=0,i=e.length,k,m;f<i;f++){k=e[f];(m=/^\+/.test(k))&&(k=k.substr(1)||"*");k=a[k]=a[k]||[];k[m?"unshift":"push"](b)}}}
function X(a,d,b){var e=d==="width"?a.offsetWidth:a.offsetHeight,f=d==="width"?la:Qb;if(e>0){b!=="border"&&c.each(f,function(){b||(e-=parseFloat(c.css(a,"padding"+this))||0);b==="margin"?(e+=parseFloat(c.css(a,b+this))||0):(e-=parseFloat(c.css(a,"border"+this+"Width"))||0)});return e+"px"}e=fb(a,d,d);if(e<0||e==null)e=a.style[d]||0;e=parseFloat(e)||0;b&&c.each(f,function(){e+=parseFloat(c.css(a,"padding"+this))||0;b!=="padding"&&(e+=parseFloat(c.css(a,"border"+this+"Width"))||0);b==="margin"&&(e+=
parseFloat(c.css(a,b+this))||0)});return e+"px"}function ma(a,d){d.src?c.ajax({url:d.src,async:false,dataType:"script"}):c.globalEval((d.text||d.textContent||d.innerHTML||"").replace(dc,"/*$0*/"));d.parentNode&&d.parentNode.removeChild(d)}function pa(a){c.nodeName(a,"input")?oa(a):"getElementsByTagName"in a&&c.grep(a.getElementsByTagName("input"),oa)}function oa(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function l(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):
"querySelectorAll"in a?a.querySelectorAll("*"):[]}function q(a,d){var b;if(d.nodeType===1){d.clearAttributes&&d.clearAttributes();d.mergeAttributes&&d.mergeAttributes(a);b=d.nodeName.toLowerCase();if(b==="object")d.outerHTML=a.outerHTML;else if(b!=="input"||a.type!=="checkbox"&&a.type!=="radio")if(b==="option")d.selected=a.defaultSelected;else{if(b==="input"||b==="textarea")d.defaultValue=a.defaultValue}else{a.checked&&(d.defaultChecked=d.checked=a.checked);d.value!==a.value&&(d.value=a.value)}d.removeAttribute(c.expando)}}
function x(a,d){if(d.nodeType===1&&c.hasData(a)){var b=c.expando,e=c.data(a),f=c.data(d,e);if(e=e[b]){var i=e.events;f=f[b]=c.extend({},e);if(i){delete f.handle;f.events={};for(var k in i){b=0;for(e=i[k].length;b<e;b++)c.event.add(d,k+(i[k][b].namespace?".":"")+i[k][b].namespace,i[k][b],i[k][b].data)}}}}}function D(a,d,b){d=d||0;if(c.isFunction(d))return c.grep(a,function(f,i){return!!d.call(f,i,f)===b});if(d.nodeType)return c.grep(a,function(f){return f===d===b});if(typeof d=="string"){var e=c.grep(a,
function(f){return f.nodeType===1});if(Ka.test(d))return c.filter(d,e,!b);d=c.filter(d,e)}return c.grep(a,function(f){return c.inArray(f,d)>=0===b})}function ca(a,d){return(a&&a!=="*"?a+".":"")+d.replace(La,"`").replace(gb,"&")}function na(a){var d,b,e,f,i,k,m,p,r,w,B,P=[];f=[];i=c._data(this,"events");if(!(a.liveFired===this||!i||!i.live||a.target.disabled||a.button&&a.type==="click")){a.namespace&&(B=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)"));a.liveFired=this;
var ba=i.live.slice(0);for(m=0;m<ba.length;m++){i=ba[m];i.origType.replace(sa,"")===a.type?f.push(i.selector):ba.splice(m--,1)}f=c(a.target).closest(f,a.currentTarget);p=0;for(r=f.length;p<r;p++){w=f[p];for(m=0;m<ba.length;m++){i=ba[m];if(w.selector===i.selector&&(!B||B.test(i.namespace))&&!w.elem.disabled){k=w.elem;e=null;if(i.preType==="mouseenter"||i.preType==="mouseleave"){a.type=i.preType;(e=c(a.relatedTarget).closest(i.selector)[0])&&c.contains(k,e)&&(e=k)}(!e||e!==k)&&P.push({elem:k,handleObj:i,
level:w.level})}}}p=0;for(r=P.length;p<r;p++){f=P[p];if(b&&f.level>b)break;a.currentTarget=f.elem;a.data=f.handleObj.data;a.handleObj=f.handleObj;B=f.handleObj.origHandler.apply(f.elem,arguments);if(B===false||a.isPropagationStopped()){b=f.level;B===false&&(d=false);if(a.isImmediatePropagationStopped())break}}return d}}function S(a,d,b){var e=c.extend({},b[0]);e.type=a;e.originalEvent={};e.liveFired=h;c.event.handle.call(d,e);e.isDefaultPrevented()&&b[0].preventDefault()}function fa(){return true}
function ga(){return false}function xa(a,d,b){var e=d+"defer",f=d+"queue",i=d+"mark",k=c.data(a,e,h,true);k&&(b==="queue"||!c.data(a,f,h,true))&&(b==="mark"||!c.data(a,i,h,true))&&setTimeout(function(){!c.data(a,f,h,true)&&!c.data(a,i,h,true)&&(c.removeData(a,e,true),k.resolve())},0)}function Oa(a){for(var d in a)if(d!=="toJSON")return false;return true}function Ra(a,d,b){if(b===h&&a.nodeType===1){b="data-"+d.replace(R,"$1-$2").toLowerCase();b=a.getAttribute(b);if(typeof b=="string"){try{b=b==="true"?
true:b==="false"?false:b==="null"?null:c.isNaN(b)?M.test(b)?c.parseJSON(b):b:parseFloat(b)}catch(e){}c.data(a,d,b)}else b=h}return b}var W=g.document,O=g.navigator,U=g.location,c=function(){function a(){if(!d.isReady){try{W.documentElement.doScroll("left")}catch(v){setTimeout(a,1);return}d.ready()}}var d=function(v,J){return new d.fn.init(v,J,f)},b=g.jQuery,e=g.$,f,i=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,k=/\S/,m=/^\s+/,p=/\s+$/,r=/\d/,w=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,B=/^[\],:{}\s]*$/,P=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
ba=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ka=/(?:^|:|,)(?:\s*\[)+/g,Ia=/(webkit)[ \/]([\w.]+)/,za=/(opera)(?:.*version)?[ \/]([\w.]+)/,Ba=/(msie) ([\w.]+)/,Ca=/(mozilla)(?:.*? rv:([\w.]+))?/,n=/-([a-z])/ig,s=function(v,J){return J.toUpperCase()},F=O.userAgent,H,C,I=Object.prototype.toString,T=Object.prototype.hasOwnProperty,Z=Array.prototype.push,ra=Array.prototype.slice,Ma=String.prototype.trim,Ja=Array.prototype.indexOf,Sa={};d.fn=d.prototype={constructor:d,init:function(v,
J,da){var Y,qa;if(!v)return this;if(v.nodeType){this.context=this[0]=v;this.length=1;return this}if(v==="body"&&!J&&W.body){this.context=W;this[0]=W.body;this.selector=v;this.length=1;return this}if(typeof v=="string"){v.charAt(0)!=="<"||v.charAt(v.length-1)!==">"||v.length<3?(Y=i.exec(v)):(Y=[null,v,null]);if(Y&&(Y[1]||!J)){if(Y[1]){qa=(J=J instanceof d?J[0]:J)?J.ownerDocument||J:W;(da=w.exec(v))?d.isPlainObject(J)?(v=[W.createElement(da[1])],d.fn.attr.call(v,J,true)):(v=[qa.createElement(da[1])]):
(da=d.buildFragment([Y[1]],[qa]),v=(da.cacheable?d.clone(da.fragment):da.fragment).childNodes);return d.merge(this,v)}if((J=W.getElementById(Y[2]))&&J.parentNode){if(J.id!==Y[2])return da.find(v);this.length=1;this[0]=J}this.context=W;this.selector=v;return this}return!J||J.jquery?(J||da).find(v):this.constructor(J).find(v)}if(d.isFunction(v))return da.ready(v);v.selector!==h&&(this.selector=v.selector,this.context=v.context);return d.makeArray(v,this)},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},
toArray:function(){return ra.call(this,0)},get:function(v){return v==null?this.toArray():v<0?this[this.length+v]:this[v]},pushStack:function(v,J,da){var Y=this.constructor();d.isArray(v)?Z.apply(Y,v):d.merge(Y,v);Y.prevObject=this;Y.context=this.context;J==="find"?(Y.selector=this.selector+(this.selector?" ":"")+da):J&&(Y.selector=this.selector+"."+J+"("+da+")");return Y},each:function(v,J){return d.each(this,v,J)},ready:function(v){d.bindReady();H.done(v);return this},eq:function(v){return v===-1?
this.slice(v):this.slice(v,+v+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(ra.apply(this,arguments),"slice",ra.call(arguments).join(","))},map:function(v){return this.pushStack(d.map(this,function(J,da){return v.call(J,da,J)}))},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:[].sort,splice:[].splice};d.fn.init.prototype=d.fn;d.extend=d.fn.extend=function(){var v,J,da,Y,qa,Aa,Da=arguments[0]||{},Fa=1,
vb=arguments.length,wb=false;typeof Da=="boolean"&&(wb=Da,Da=arguments[1]||{},Fa=2);typeof Da!="object"&&!d.isFunction(Da)&&(Da={});for(vb===Fa&&(Da=this,--Fa);Fa<vb;Fa++)if((v=arguments[Fa])!=null)for(J in v){da=Da[J];Y=v[J];if(Da!==Y)wb&&Y&&(d.isPlainObject(Y)||(qa=d.isArray(Y)))?(qa?(qa=false,Aa=da&&d.isArray(da)?da:[]):(Aa=da&&d.isPlainObject(da)?da:{}),Da[J]=d.extend(wb,Aa,Y)):Y!==h&&(Da[J]=Y)}return Da};d.extend({noConflict:function(v){g.$===d&&(g.$=e);v&&g.jQuery===d&&(g.jQuery=b);return d},
isReady:false,readyWait:1,holdReady:function(v){v?d.readyWait++:d.ready(true)},ready:function(v){if(v===true&&!--d.readyWait||v!==true&&!d.isReady){if(!W.body)return setTimeout(d.ready,1);d.isReady=true;if(!(v!==true&&--d.readyWait>0)){H.resolveWith(W,[d]);d.fn.trigger&&d(W).trigger("ready").unbind("ready")}}},bindReady:function(){if(!H){H=d._Deferred();if(W.readyState==="complete")return setTimeout(d.ready,1);if(W.addEventListener){W.addEventListener("DOMContentLoaded",C,false);g.addEventListener("load",
d.ready,false)}else if(W.attachEvent){W.attachEvent("onreadystatechange",C);g.attachEvent("onload",d.ready);var v=false;try{v=g.frameElement==null}catch(J){}W.documentElement.doScroll&&v&&a()}}},isFunction:function(v){return d.type(v)==="function"},isArray:Array.isArray||function(v){return d.type(v)==="array"},isWindow:function(v){return v&&typeof v=="object"&&"setInterval"in v},isNaN:function(v){return v==null||!r.test(v)||isNaN(v)},type:function(v){return v==null?String(v):Sa[I.call(v)]||"object"},
isPlainObject:function(v){if(!v||d.type(v)!=="object"||v.nodeType||d.isWindow(v))return false;if(v.constructor&&!T.call(v,"constructor")&&!T.call(v.constructor.prototype,"isPrototypeOf"))return false;var J;for(J in v);return J===h||T.call(v,J)},isEmptyObject:function(v){for(var J in v)return false;return true},error:function(v){throw v;},parseJSON:function(v){if(typeof v!="string"||!v)return null;v=d.trim(v);if(g.JSON&&g.JSON.parse)return g.JSON.parse(v);if(B.test(v.replace(P,"@").replace(ba,"]").replace(ka,
"")))return(new Function("return "+v))();d.error("Invalid JSON: "+v)},parseXML:function(v,J,da){g.DOMParser?(da=new DOMParser,J=da.parseFromString(v,"text/xml")):(J=new ActiveXObject("Microsoft.XMLDOM"),J.async="false",J.loadXML(v));da=J.documentElement;(!da||!da.nodeName||da.nodeName==="parsererror")&&d.error("Invalid XML: "+v);return J},noop:function(){},globalEval:function(v){v&&k.test(v)&&(g.execScript||function(J){g.eval.call(g,J)})(v)},camelCase:function(v){return v.replace(n,s)},nodeName:function(v,
J){return v.nodeName&&v.nodeName.toUpperCase()===J.toUpperCase()},each:function(v,J,da){var Y,qa=0,Aa=v.length,Da=Aa===h||d.isFunction(v);if(da)if(Da)for(Y in v){if(J.apply(v[Y],da)===false)break}else for(;qa<Aa;){if(J.apply(v[qa++],da)===false)break}else if(Da)for(Y in v){if(J.call(v[Y],Y,v[Y])===false)break}else for(;qa<Aa;)if(J.call(v[qa],qa,v[qa++])===false)break;return v},trim:Ma?function(v){return v==null?"":Ma.call(v)}:function(v){return v==null?"":(v+"").replace(m,"").replace(p,"")},makeArray:function(v,
J){var da=J||[];if(v!=null){var Y=d.type(v);v.length==null||Y==="string"||Y==="function"||Y==="regexp"||d.isWindow(v)?Z.call(da,v):d.merge(da,v)}return da},inArray:function(v,J){if(Ja)return Ja.call(J,v);for(var da=0,Y=J.length;da<Y;da++)if(J[da]===v)return da;return-1},merge:function(v,J){var da=v.length,Y=0;if(typeof J.length=="number")for(var qa=J.length;Y<qa;Y++)v[da++]=J[Y];else for(;J[Y]!==h;)v[da++]=J[Y++];v.length=da;return v},grep:function(v,J,da){var Y=[],qa;da=!!da;for(var Aa=0,Da=v.length;Aa<
Da;Aa++){qa=!!J(v[Aa],Aa);da!==qa&&Y.push(v[Aa])}return Y},map:function(v,J,da){var Y,qa,Aa=[],Da=0,Fa=v.length;if(v instanceof d||Fa!==h&&typeof Fa=="number"&&(Fa>0&&v[0]&&v[Fa-1]||Fa===0||d.isArray(v)))for(;Da<Fa;Da++){Y=J(v[Da],Da,da);Y!=null&&(Aa[Aa.length]=Y)}else for(qa in v){Y=J(v[qa],qa,da);Y!=null&&(Aa[Aa.length]=Y)}return Aa.concat.apply([],Aa)},guid:1,proxy:function(v,J){if(typeof J=="string"){var da=v[J];J=v;v=da}if(!d.isFunction(v))return h;var Y=ra.call(arguments,2);da=function(){return v.apply(J,
Y.concat(ra.call(arguments)))};da.guid=v.guid=v.guid||da.guid||d.guid++;return da},access:function(v,J,da,Y,qa,Aa){var Da=v.length;if(typeof J=="object"){for(var Fa in J)d.access(v,Fa,J[Fa],Y,qa,da);return v}if(da!==h){Y=!Aa&&Y&&d.isFunction(da);for(Fa=0;Fa<Da;Fa++)qa(v[Fa],J,Y?da.call(v[Fa],Fa,qa(v[Fa],J)):da,Aa);return v}return Da?qa(v[0],J):h},now:function(){return(new Date).getTime()},uaMatch:function(v){v=v.toLowerCase();v=Ia.exec(v)||za.exec(v)||Ba.exec(v)||v.indexOf("compatible")<0&&Ca.exec(v)||
[];return{browser:v[1]||"",version:v[2]||"0"}},sub:function(){function v(da,Y){return new v.fn.init(da,Y)}d.extend(true,v,this);v.superclass=this;v.fn=v.prototype=this();v.fn.constructor=v;v.sub=this.sub;v.fn.init=function(da,Y){Y&&Y instanceof d&&!(Y instanceof v)&&(Y=v(Y));return d.fn.init.call(this,da,Y,J)};v.fn.init.prototype=v.fn;var J=v(W);return v},browser:{}});d.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(v,J){Sa["[object "+J+"]"]=J.toLowerCase()});F=
d.uaMatch(F);F.browser&&(d.browser[F.browser]=true,d.browser.version=F.version);d.browser.webkit&&(d.browser.safari=true);k.test("\u00a0")&&(m=/^[\s\xA0]+/,p=/[\s\xA0]+$/);f=d(W);W.addEventListener?(C=function(){W.removeEventListener("DOMContentLoaded",C,false);d.ready()}):W.attachEvent&&(C=function(){W.readyState==="complete"&&(W.detachEvent("onreadystatechange",C),d.ready())});return d}(),A="done fail isResolved isRejected promise then always pipe".split(" "),L=[].slice;c.extend({_Deferred:function(){var a=
[],d,b,e,f={done:function(){if(!e){var i=arguments,k,m,p,r,w;d&&(w=d,d=0);k=0;for(m=i.length;k<m;k++){p=i[k];r=c.type(p);r==="array"?f.done.apply(f,p):r==="function"&&a.push(p)}w&&f.resolveWith(w[0],w[1])}return this},resolveWith:function(i,k){if(!e&&!d&&!b){k=k||[];b=1;try{for(;a[0];)a.shift().apply(i,k)}finally{d=[i,k];b=0}}return this},resolve:function(){f.resolveWith(this,arguments);return this},isResolved:function(){return!!b||!!d},cancel:function(){e=1;a=[];return this}};return f},Deferred:function(a){var d=
c._Deferred(),b=c._Deferred(),e;c.extend(d,{then:function(f,i){d.done(f).fail(i);return this},always:function(){return d.done.apply(d,arguments).fail.apply(this,arguments)},fail:b.done,rejectWith:b.resolveWith,reject:b.resolve,isRejected:b.isResolved,pipe:function(f,i){return c.Deferred(function(k){c.each({done:[f,"resolve"],fail:[i,"reject"]},function(m,p){var r=p[0],w=p[1],B;c.isFunction(r)?d[m](function(){(B=r.apply(this,arguments))&&c.isFunction(B.promise)?B.promise().then(k.resolve,k.reject):
k[w](B)}):d[m](k[w])})}).promise()},promise:function(f){if(f==null){if(e)return e;e=f={}}for(var i=A.length;i--;)f[A[i]]=d[A[i]];return f}});d.done(b.cancel).fail(d.cancel);delete d.cancel;a&&a.call(d,d);return d},when:function(a){function d(m){return function(p){b[m]=arguments.length>1?L.call(arguments,0):p;--i||k.resolveWith(k,L.call(b,0))}}var b=arguments,e=0,f=b.length,i=f,k=f<=1&&a&&c.isFunction(a.promise)?a:c.Deferred();if(f>1){for(;e<f;e++)b[e]&&c.isFunction(b[e].promise)?b[e].promise().then(d(e),
k.reject):--i;i||k.resolveWith(k,b)}else k!==a&&k.resolveWith(k,f?[a]:[]);return k.promise()}});c.support=function(){var a=W.createElement("div"),d=W.documentElement,b,e,f,i,k,m,p;a.setAttribute("className","t");a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";b=a.getElementsByTagName("*");e=a.getElementsByTagName("a")[0];if(!b||!b.length||!e)return{};f=W.createElement("select");i=f.appendChild(W.createElement("option"));b=a.getElementsByTagName("input")[0];
m={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55$/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:b.value==="on",optSelected:i.selected,getSetAttribute:a.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,
shrinkWrapBlocks:false,reliableMarginRight:true};b.checked=true;m.noCloneChecked=b.cloneNode(true).checked;f.disabled=true;m.optDisabled=!i.disabled;try{delete a.test}catch(r){m.deleteExpando=false}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){m.noCloneEvent=false}),a.cloneNode(true).fireEvent("onclick"));b=W.createElement("input");b.value="t";b.setAttribute("type","radio");m.radioValue=b.value==="t";b.setAttribute("checked","checked");a.appendChild(b);e=W.createDocumentFragment();
e.appendChild(a.firstChild);m.checkClone=e.cloneNode(true).cloneNode(true).lastChild.checked;a.innerHTML="";a.style.width=a.style.paddingLeft="1px";f=W.getElementsByTagName("body")[0];e=W.createElement(f?"div":"body");i={visibility:"hidden",width:0,height:0,border:0,margin:0};f&&c.extend(i,{position:"absolute",left:-1000,top:-1000});for(p in i)e.style[p]=i[p];e.appendChild(a);d=f||d;d.insertBefore(e,d.firstChild);m.appendChecked=b.checked;m.boxModel=a.offsetWidth===2;"zoom"in a.style&&(a.style.display=
"inline",a.style.zoom=1,m.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",m.shrinkWrapBlocks=a.offsetWidth!==2);a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";f=a.getElementsByTagName("td");b=f[0].offsetHeight===0;f[0].style.display="";f[1].style.display="none";m.reliableHiddenOffsets=b&&f[0].offsetHeight===0;a.innerHTML="";W.defaultView&&W.defaultView.getComputedStyle&&(k=W.createElement("div"),
k.style.width="0",k.style.marginRight="0",a.appendChild(k),m.reliableMarginRight=(parseInt((W.defaultView.getComputedStyle(k,null)||{marginRight:0}).marginRight,10)||0)===0);e.innerHTML="";d.removeChild(e);if(a.attachEvent)for(p in{submit:1,change:1,focusin:1}){k="on"+p;(b=k in a)||(a.setAttribute(k,"return;"),b=typeof a[k]=="function");m[p+"Bubbles"]=b}e=e=f=i=f=k=a=b=null;return m}();c.boxModel=c.support.boxModel;var M=/^(?:\{.*\}|\[.*\])$/,R=/([a-z])([A-Z])/g;c.extend({cache:{},uuid:0,expando:"jQuery"+
(c.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(a){a=a.nodeType?c.cache[a[c.expando]]:a[c.expando];return!!a&&!Oa(a)},data:function(a,d,b,e){if(c.acceptData(a)){var f=c.expando,i=typeof d=="string",k=a.nodeType,m=k?c.cache:a,p=k?a[c.expando]:a[c.expando]&&c.expando;if(!((!p||e&&p&&!m[p][f])&&i&&b===h)){p||(k?(a[c.expando]=p=++c.uuid):(p=c.expando));m[p]||(m[p]={},k||(m[p].toJSON=c.noop));if(typeof d==
"object"||typeof d=="function")e?(m[p][f]=c.extend(m[p][f],d)):(m[p]=c.extend(m[p],d));a=m[p];e&&(a[f]||(a[f]={}),a=a[f]);b!==h&&(a[c.camelCase(d)]=b);if(d==="events"&&!a[d])return a[f]&&a[f].events;return i?a[c.camelCase(d)]||a[d]:a}}},removeData:function(a,d,b){if(c.acceptData(a)){var e=c.expando,f=a.nodeType,i=f?c.cache:a,k=f?a[c.expando]:c.expando;if(i[k]){if(d){var m=b?i[k][e]:i[k];if(m){delete m[d];if(!Oa(m))return}}if(b){delete i[k][e];if(!Oa(i[k]))return}d=i[k][e];c.support.deleteExpando||
i!=g?delete i[k]:(i[k]=null);d?(i[k]={},f||(i[k].toJSON=c.noop),i[k][e]=d):f&&(c.support.deleteExpando?delete a[c.expando]:a.removeAttribute?a.removeAttribute(c.expando):(a[c.expando]=null))}}},_data:function(a,d,b){return c.data(a,d,b,true)},acceptData:function(a){if(a.nodeName){var d=c.noData[a.nodeName.toLowerCase()];if(d)return d!==true&&a.getAttribute("classid")===d}return true}});c.fn.extend({data:function(a,d){var b=null;if(typeof a=="undefined"){if(this.length){b=c.data(this[0]);if(this[0].nodeType===
1)for(var e=this[0].attributes,f,i=0,k=e.length;i<k;i++){f=e[i].name;f.indexOf("data-")===0&&(f=c.camelCase(f.substring(5)),Ra(this[0],f,b[f]))}}return b}if(typeof a=="object")return this.each(function(){c.data(this,a)});var m=a.split(".");m[1]=m[1]?"."+m[1]:"";if(d===h){b=this.triggerHandler("getData"+m[1]+"!",[m[0]]);b===h&&this.length&&(b=c.data(this[0],a),b=Ra(this[0],a,b));return b===h&&m[1]?this.data(m[0]):b}return this.each(function(){var p=c(this),r=[m[0],d];p.triggerHandler("setData"+m[1]+
"!",r);c.data(this,a,d);p.triggerHandler("changeData"+m[1]+"!",r)})},removeData:function(a){return this.each(function(){c.removeData(this,a)})}});c.extend({_mark:function(a,d){a&&(d=(d||"fx")+"mark",c.data(a,d,(c.data(a,d,h,true)||0)+1,true))},_unmark:function(a,d,b){a!==true&&(b=d,d=a,a=false);if(d){b=b||"fx";var e=b+"mark";(a=a?0:(c.data(d,e,h,true)||1)-1)?c.data(d,e,a,true):(c.removeData(d,e,true),xa(d,b,"mark"))}},queue:function(a,d,b){if(a){d=(d||"fx")+"queue";var e=c.data(a,d,h,true);b&&(!e||
c.isArray(b)?(e=c.data(a,d,c.makeArray(b),true)):e.push(b));return e||[]}},dequeue:function(a,d){d=d||"fx";var b=c.queue(a,d),e=b.shift();e==="inprogress"&&(e=b.shift());e&&(d==="fx"&&b.unshift("inprogress"),e.call(a,function(){c.dequeue(a,d)}));b.length||(c.removeData(a,d+"queue",true),xa(a,d,"queue"))}});c.fn.extend({queue:function(a,d){typeof a!="string"&&(d=a,a="fx");if(d===h)return c.queue(this[0],a);return this.each(function(){var b=c.queue(this,a,d);a==="fx"&&b[0]!=="inprogress"&&c.dequeue(this,
a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,a)})},delay:function(a,d){a=c.fx?c.fx.speeds[a]||a:a;d=d||"fx";return this.queue(d,function(){var b=this;setTimeout(function(){c.dequeue(b,d)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,d){function b(){--k||e.resolveWith(f,[f])}typeof a!="string"&&(d=a,a=h);a=a||"fx";for(var e=c.Deferred(),f=this,i=f.length,k=1,m=a+"defer",p=a+"queue",r=a+"mark",w;i--;)if(w=c.data(f[i],m,h,true)||(c.data(f[i],
p,h,true)||c.data(f[i],r,h,true))&&c.data(f[i],m,c._Deferred(),true)){k++;w.done(b)}b();return e.promise()}});var ja=/[\n\t\r]/g,ia=/\s+/,wa=/\r/g,Ga=/^(?:button|input)$/i,ua=/^(?:button|input|object|select|textarea)$/i,Na=/^a(?:rea)?$/i,G=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ea=/\:|^on/,aa,ha;c.fn.extend({attr:function(a,d){return c.access(this,a,d,true,c.attr)},removeAttr:function(a){return this.each(function(){c.removeAttr(this,
a)})},prop:function(a,d){return c.access(this,a,d,true,c.prop)},removeProp:function(a){a=c.propFix[a]||a;return this.each(function(){try{this[a]=h;delete this[a]}catch(d){}})},addClass:function(a){var d,b,e,f,i,k,m;if(c.isFunction(a))return this.each(function(p){c(this).addClass(a.call(this,p,this.className))});if(a&&typeof a=="string"){d=a.split(ia);b=0;for(e=this.length;b<e;b++){f=this[b];if(f.nodeType===1)if(!f.className&&d.length===1)f.className=a;else{i=" "+f.className+" ";k=0;for(m=d.length;k<
m;k++)~i.indexOf(" "+d[k]+" ")||(i+=d[k]+" ");f.className=c.trim(i)}}}return this},removeClass:function(a){var d,b,e,f,i,k,m;if(c.isFunction(a))return this.each(function(p){c(this).removeClass(a.call(this,p,this.className))});if(a&&typeof a=="string"||a===h){d=(a||"").split(ia);b=0;for(e=this.length;b<e;b++){f=this[b];if(f.nodeType===1&&f.className)if(a){i=(" "+f.className+" ").replace(ja," ");k=0;for(m=d.length;k<m;k++)i=i.replace(" "+d[k]+" "," ");f.className=c.trim(i)}else f.className=""}}return this},
toggleClass:function(a,d){var b=typeof a,e=typeof d=="boolean";if(c.isFunction(a))return this.each(function(f){c(this).toggleClass(a.call(this,f,this.className,d),d)});return this.each(function(){if(b==="string")for(var f,i=0,k=c(this),m=d,p=a.split(ia);f=p[i++];){m=e?m:!k.hasClass(f);k[m?"addClass":"removeClass"](f)}else if(b==="undefined"||b==="boolean"){this.className&&c._data(this,"__className__",this.className);this.className=this.className||a===false?"":c._data(this,"__className__")||""}})},
hasClass:function(a){for(var d=0,b=this.length;d<b;d++)if((" "+this[d].className+" ").replace(ja," ").indexOf(" "+a+" ")>-1)return true;return false},val:function(a){var d,b,e=this[0];if(!arguments.length){if(e){if((d=c.valHooks[e.nodeName.toLowerCase()]||c.valHooks[e.type])&&"get"in d&&(b=d.get(e,"value"))!==h)return b;b=e.value;return typeof b=="string"?b.replace(wa,""):b==null?"":b}return h}var f=c.isFunction(a);return this.each(function(i){var k=c(this),m;if(this.nodeType===1){f?(m=a.call(this,
i,k.val())):(m=a);m==null?(m=""):typeof m=="number"?(m+=""):c.isArray(m)&&(m=c.map(m,function(p){return p==null?"":p+""}));d=c.valHooks[this.nodeName.toLowerCase()]||c.valHooks[this.type];if(!d||!("set"in d)||d.set(this,m,"value")===h)this.value=m}})}});c.extend({valHooks:{option:{get:function(a){var d=a.attributes.value;return!d||d.specified?a.value:a.text}},select:{get:function(a){var d,b=a.selectedIndex,e=[],f=a.options;a=a.type==="select-one";if(b<0)return null;for(var i=a?b:0,k=a?b+1:f.length;i<
k;i++){d=f[i];if(d.selected&&(c.support.optDisabled?!d.disabled:d.getAttribute("disabled")===null)&&(!d.parentNode.disabled||!c.nodeName(d.parentNode,"optgroup"))){d=c(d).val();if(a)return d;e.push(d)}}if(a&&!e.length&&f.length)return c(f[b]).val();return e},set:function(a,d){var b=c.makeArray(d);c(a).find("option").each(function(){this.selected=c.inArray(c(this).val(),b)>=0});b.length||(a.selectedIndex=-1);return b}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,
offset:true},attrFix:{tabindex:"tabIndex"},attr:function(a,d,b,e){var f=a.nodeType;if(!a||f===3||f===8||f===2)return h;if(e&&d in c.attrFn)return c(a)[d](b);if(!("getAttribute"in a))return c.prop(a,d,b);var i,k;(e=f!==1||!c.isXMLDoc(a))&&(d=c.attrFix[d]||d,k=c.attrHooks[d],k||(G.test(d)?(k=ha):aa&&d!=="className"&&(c.nodeName(a,"form")||ea.test(d))&&(k=aa)));if(b!==h){if(b===null){c.removeAttr(a,d);return h}if(k&&"set"in k&&e&&(i=k.set(a,b,d))!==h)return i;a.setAttribute(d,""+b);return b}if(k&&"get"in
k&&e&&(i=k.get(a,d))!==null)return i;i=a.getAttribute(d);return i===null?h:i},removeAttr:function(a,d){var b;a.nodeType===1&&(d=c.attrFix[d]||d,c.support.getSetAttribute?a.removeAttribute(d):(c.attr(a,d,""),a.removeAttributeNode(a.getAttributeNode(d))),G.test(d)&&(b=c.propFix[d]||d)in a&&(a[b]=false))},attrHooks:{type:{set:function(a,d){if(Ga.test(a.nodeName)&&a.parentNode)c.error("type property can't be changed");else if(!c.support.radioValue&&d==="radio"&&c.nodeName(a,"input")){var b=a.value;a.setAttribute("type",
d);b&&(a.value=b);return d}}},tabIndex:{get:function(a){var d=a.getAttributeNode("tabIndex");return d&&d.specified?parseInt(d.value,10):ua.test(a.nodeName)||Na.test(a.nodeName)&&a.href?0:h}},value:{get:function(a,d){if(aa&&c.nodeName(a,"button"))return aa.get(a,d);return d in a?a.value:null},set:function(a,d,b){if(aa&&c.nodeName(a,"button"))return aa.set(a,d,b);a.value=d}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",
cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,d,b){var e=a.nodeType;if(!a||e===3||e===8||e===2)return h;var f,i;(e!==1||!c.isXMLDoc(a))&&(d=c.propFix[d]||d,i=c.propHooks[d]);return b!==h?i&&"set"in i&&(f=i.set(a,b,d))!==h?f:(a[d]=b):i&&"get"in i&&(f=i.get(a,d))!==h?f:a[d]},propHooks:{}});ha={get:function(a,d){return c.prop(a,d)?d.toLowerCase():h},set:function(a,d,b){var e;d===false?c.removeAttr(a,
b):(e=c.propFix[b]||b,e in a&&(a[e]=true),a.setAttribute(b,b.toLowerCase()));return b}};c.support.getSetAttribute||(c.attrFix=c.propFix,aa=c.attrHooks.name=c.attrHooks.title=c.valHooks.button={get:function(a,d){var b;return(b=a.getAttributeNode(d))&&b.nodeValue!==""?b.nodeValue:h},set:function(a,d,b){if(a=a.getAttributeNode(b))return a.nodeValue=d}},c.each(["width","height"],function(a,d){c.attrHooks[d]=c.extend(c.attrHooks[d],{set:function(b,e){if(e===""){b.setAttribute(d,"auto");return e}}})}));
c.support.hrefNormalized||c.each(["href","src","width","height"],function(a,d){c.attrHooks[d]=c.extend(c.attrHooks[d],{get:function(b){b=b.getAttribute(d,2);return b===null?h:b}})});c.support.style||(c.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||h},set:function(a,d){return a.style.cssText=""+d}});c.support.optSelected||(c.propHooks.selected=c.extend(c.propHooks.selected,{get:function(){}}));c.support.checkOn||c.each(["radio","checkbox"],function(){c.valHooks[this]={get:function(a){return a.getAttribute("value")===
null?"on":a.value}}});c.each(["radio","checkbox"],function(){c.valHooks[this]=c.extend(c.valHooks[this],{set:function(a,d){if(c.isArray(d))return a.checked=c.inArray(c(a).val(),d)>=0}})});var sa=/\.(.*)$/,ta=/^(?:textarea|input|select)$/i,La=/\./g,gb=/ /g,kb=/[^\w\s.|`]/g,Fb=function(a){return a.replace(kb,"\\$&")};c.event={add:function(a,d,b,e){if(a.nodeType!==3&&a.nodeType!==8){if(b===false)b=ga;else if(!b)return;var f,i;b.handler&&(f=b,b=f.handler);b.guid||(b.guid=c.guid++);if(i=c._data(a)){var k=
i.events,m=i.handle;k||(i.events=k={});m||(i.handle=m=function(ba){return typeof c!="undefined"&&(!ba||c.event.triggered!==ba.type)?c.event.handle.apply(m.elem,arguments):h});m.elem=a;d=d.split(" ");for(var p,r=0,w;p=d[r++];){i=f?c.extend({},f):{handler:b,data:e};p.indexOf(".")>-1?(w=p.split("."),p=w.shift(),i.namespace=w.slice(0).sort().join(".")):(w=[],i.namespace="");i.type=p;i.guid||(i.guid=b.guid);var B=k[p],P=c.event.special[p]||{};if(!B){B=k[p]=[];if(!P.setup||P.setup.call(a,e,w,m)===false)a.addEventListener?
a.addEventListener(p,m,false):a.attachEvent&&a.attachEvent("on"+p,m)}P.add&&(P.add.call(a,i),i.handler.guid||(i.handler.guid=b.guid));B.push(i);c.event.global[p]=true}a=null}}},global:{},remove:function(a,d,b,e){if(a.nodeType!==3&&a.nodeType!==8){b===false&&(b=ga);var f,i,k=0,m,p,r,w,B,P,ba=c.hasData(a)&&c._data(a),ka=ba&&ba.events;if(ba&&ka){d&&d.type&&(b=d.handler,d=d.type);if(!d||typeof d=="string"&&d.charAt(0)===".")for(f in ka)c.event.remove(a,f+(d||""));else{for(d=d.split(" ");f=d[k++];){w=
f;m=f.indexOf(".")<0;p=[];m||(p=f.split("."),f=p.shift(),r=new RegExp("(^|\\.)"+c.map(p.slice(0).sort(),Fb).join("\\.(?:.*\\.)?")+"(\\.|$)"));if(B=ka[f])if(b){w=c.event.special[f]||{};for(i=e||0;i<B.length;i++){P=B[i];if(b.guid===P.guid){if(m||r.test(P.namespace)){e==null&&B.splice(i--,1);w.remove&&w.remove.call(a,P)}if(e!=null)break}}if(B.length===0||e!=null&&B.length===1){(!w.teardown||w.teardown.call(a,p)===false)&&c.removeEvent(a,f,ba.handle);delete ka[f]}}else for(i=0;i<B.length;i++){P=B[i];
if(m||r.test(P.namespace)){c.event.remove(a,w,P.handler,i);B.splice(i--,1)}}}if(c.isEmptyObject(ka)){(d=ba.handle)&&(d.elem=null);delete ba.events;delete ba.handle;c.isEmptyObject(ba)&&c.removeData(a,h,true)}}}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(a,d,b,e){var f=a.type||a,i=[],k;f.indexOf("!")>=0&&(f=f.slice(0,-1),k=true);f.indexOf(".")>=0&&(i=f.split("."),f=i.shift(),i.sort());if(b&&!c.event.customEvent[f]||c.event.global[f]){a=typeof a=="object"?a[c.expando]?
a:new c.Event(f,a):new c.Event(f);a.type=f;a.exclusive=k;a.namespace=i.join(".");a.namespace_re=new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)");if(e||!b){a.preventDefault();a.stopPropagation()}if(b){if(!(b.nodeType===3||b.nodeType===8)){a.result=h;a.target=b;d=d!=null?c.makeArray(d):[];d.unshift(a);i=b;e=f.indexOf(":")<0?"on"+f:"";do{k=c._data(i,"handle");a.currentTarget=i;k&&k.apply(i,d);e&&c.acceptData(i)&&i[e]&&i[e].apply(i,d)===false&&(a.result=false,a.preventDefault());i=i.parentNode||
i.ownerDocument||i===a.target.ownerDocument&&g}while(i&&!a.isPropagationStopped());if(!a.isDefaultPrevented()){var m;i=c.event.special[f]||{};if((!i._default||i._default.call(b.ownerDocument,a)===false)&&(f!=="click"||!c.nodeName(b,"a"))&&c.acceptData(b)){try{e&&b[f]&&(m=b[e],m&&(b[e]=null),c.event.triggered=f,b[f]())}catch(p){}m&&(b[e]=m);c.event.triggered=h}}return a.result}}else c.each(c.cache,function(){var r=this[c.expando];r&&r.events&&r.events[f]&&c.event.trigger(a,d,r.handle.elem)})}},handle:function(a){a=
c.event.fix(a||g.event);var d=((c._data(this,"events")||{})[a.type]||[]).slice(0),b=!a.exclusive&&!a.namespace,e=Array.prototype.slice.call(arguments,0);e[0]=a;a.currentTarget=this;for(var f=0,i=d.length;f<i;f++){var k=d[f];if(b||a.namespace_re.test(k.namespace)){a.handler=k.handler;a.data=k.data;a.handleObj=k;k=k.handler.apply(this,e);k!==h&&(a.result=k,k===false&&(a.preventDefault(),a.stopPropagation()));if(a.isImmediatePropagationStopped())break}}return a.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(a){if(a[c.expando])return a;var d=a;a=c.Event(d);for(var b=this.props.length,e;b;){e=this.props[--b];a[e]=d[e]}a.target||(a.target=a.srcElement||W);a.target.nodeType===3&&(a.target=a.target.parentNode);!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){b=a.target.ownerDocument||W;d=b.documentElement;b=b.body;a.pageX=a.clientX+(d&&d.scrollLeft||b&&b.scrollLeft||0)-(d&&d.clientLeft||b&&b.clientLeft||0);
a.pageY=a.clientY+(d&&d.scrollTop||b&&b.scrollTop||0)-(d&&d.clientTop||b&&b.clientTop||0)}a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode);!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey);!a.which&&a.button!==h&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0);return a},guid:1E8,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,ca(a.origType,a.selector),c.extend({},a,{handler:na,guid:a.handler.guid}))},
remove:function(a){c.event.remove(this,ca(a.origType,a.selector),a)}},beforeunload:{setup:function(a,d,b){c.isWindow(this)&&(this.onbeforeunload=b)},teardown:function(a,d){this.onbeforeunload===d&&(this.onbeforeunload=null)}}}};c.removeEvent=W.removeEventListener?function(a,d,b){a.removeEventListener&&a.removeEventListener(d,b,false)}:function(a,d,b){a.detachEvent&&a.detachEvent("on"+d,b)};c.Event=function(a,d){if(!this.preventDefault)return new c.Event(a,d);a&&a.type?(this.originalEvent=a,this.type=
a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===false||a.getPreventDefault&&a.getPreventDefault()?fa:ga):(this.type=a);d&&c.extend(this,d);this.timeStamp=c.now();this[c.expando]=true};c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=fa;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():(a.returnValue=false))},stopPropagation:function(){this.isPropagationStopped=fa;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=
true)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=fa;this.stopPropagation()},isDefaultPrevented:ga,isPropagationStopped:ga,isImmediatePropagationStopped:ga};var Rb=function(a){var d=a.relatedTarget,b=false,e=a.type;a.type=a.data;d!==this&&(d&&(b=c.contains(this,d)),b||(c.event.handle.apply(this,arguments),a.type=e))},Sb=function(a){a.type=a.data;c.event.handle.apply(this,arguments)};c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,d){c.event.special[a]=
{setup:function(b){c.event.add(this,d,b&&b.selector?Sb:Rb,a)},teardown:function(b){c.event.remove(this,d,b&&b.selector?Sb:Rb)}}});c.support.submitBubbles||(c.event.special.submit={setup:function(){if(c.nodeName(this,"form"))return false;else{c.event.add(this,"click.specialSubmit",function(a){var d=a.target,b=d.type;(b==="submit"||b==="image")&&c(d).closest("form").length&&S("submit",this,arguments)});c.event.add(this,"keypress.specialSubmit",function(a){var d=a.target,b=d.type;(b==="text"||b==="password")&&
c(d).closest("form").length&&a.keyCode===13&&S("submit",this,arguments)})}},teardown:function(){c.event.remove(this,".specialSubmit")}});if(!c.support.changeBubbles){var lb,Gb=function(a){var d=a.type,b=a.value;d==="radio"||d==="checkbox"?(b=a.checked):d==="select-multiple"?(b=a.selectedIndex>-1?c.map(a.options,function(e){return e.selected}).join("-"):""):c.nodeName(a,"select")&&(b=a.selectedIndex);return b},Hb=function(a,d){var b=a.target,e,f;if(ta.test(b.nodeName)&&!b.readOnly){e=c._data(b,"_change_data");
f=Gb(b);(a.type!=="focusout"||b.type!=="radio")&&c._data(b,"_change_data",f);if(!(e===h||f===e))if(e!=null||f){a.type="change";a.liveFired=h;c.event.trigger(a,d,b)}}};c.event.special.change={filters:{focusout:Hb,beforedeactivate:Hb,click:function(a){var d=a.target,b=c.nodeName(d,"input")?d.type:"";(b==="radio"||b==="checkbox"||c.nodeName(d,"select"))&&Hb.call(this,a)},keydown:function(a){var d=a.target,b=c.nodeName(d,"input")?d.type:"";(a.keyCode===13&&!c.nodeName(d,"textarea")||a.keyCode===32&&(b===
"checkbox"||b==="radio")||b==="select-multiple")&&Hb.call(this,a)},beforeactivate:function(a){a=a.target;c._data(a,"_change_data",Gb(a))}},setup:function(){if(this.type==="file")return false;for(var a in lb)c.event.add(this,a+".specialChange",lb[a]);return ta.test(this.nodeName)},teardown:function(){c.event.remove(this,".specialChange");return ta.test(this.nodeName)}};lb=c.event.special.change.filters;lb.focus=lb.beforeactivate}c.support.focusinBubbles||c.each({focus:"focusin",blur:"focusout"},function(a,
d){function b(f){var i=c.event.fix(f);i.type=d;i.originalEvent={};c.event.trigger(i,null,i.target);i.isDefaultPrevented()&&f.preventDefault()}var e=0;c.event.special[d]={setup:function(){e++===0&&W.addEventListener(a,b,true)},teardown:function(){--e===0&&W.removeEventListener(a,b,true)}}});c.each(["bind","one"],function(a,d){c.fn[d]=function(b,e,f){var i;if(typeof b=="object"){for(var k in b)this[d](k,e,b[k],f);return this}if(arguments.length===2||e===false){f=e;e=h}d==="one"?(i=function(p){c(this).unbind(p,
i);return f.apply(this,arguments)},i.guid=f.guid||c.guid++):(i=f);if(b==="unload"&&d!=="one")this.one(b,e,f);else{k=0;for(var m=this.length;k<m;k++)c.event.add(this[k],b,i,e)}return this}});c.fn.extend({unbind:function(a,d){if(typeof a=="object"&&!a.preventDefault)for(var b in a)this.unbind(b,a[b]);else{b=0;for(var e=this.length;b<e;b++)c.event.remove(this[b],a,d)}return this},delegate:function(a,d,b,e){return this.live(d,b,e,a)},undelegate:function(a,d,b){return arguments.length===0?this.unbind("live"):
this.die(d,null,b,a)},trigger:function(a,d){return this.each(function(){c.event.trigger(a,d,this)})},triggerHandler:function(a,d){if(this[0])return c.event.trigger(a,d,this[0],true)},toggle:function(a){var d=arguments,b=a.guid||c.guid++,e=0,f=function(i){var k=(c.data(this,"lastToggle"+a.guid)||0)%e;c.data(this,"lastToggle"+a.guid,k+1);i.preventDefault();return d[k].apply(this,arguments)||false};for(f.guid=b;e<d.length;)d[e++].guid=b;return this.click(f)},hover:function(a,d){return this.mouseenter(a).mouseleave(d||
a)}});var rb={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};c.each(["live","die"],function(a,d){c.fn[d]=function(b,e,f,i){var k=0,m,p,r=i||this.selector,w=i?this:c(this.context);if(typeof b=="object"&&!b.preventDefault){for(m in b)w[d](m,e,b[m],r);return this}if(d==="die"&&!b&&i&&i.charAt(0)==="."){w.unbind(i);return this}if(e===false||c.isFunction(e)){f=e||ga;e=h}for(b=(b||"").split(" ");(i=b[k++])!=null;){m=sa.exec(i);p="";m&&(p=m[0],i=i.replace(sa,""));if(i==="hover")b.push("mouseenter"+
p,"mouseleave"+p);else{m=i;rb[i]?(b.push(rb[i]+p),i+=p):(i=(rb[i]||i)+p);if(d==="live"){p=0;for(var B=w.length;p<B;p++)c.event.add(w[p],"live."+ca(i,r),{data:e,selector:r,handler:f,origType:i,origHandler:f,preType:m})}else w.unbind("live."+ca(i,r),f)}}return this}});c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,d){c.fn[d]=function(b,
e){e==null&&(e=b,b=null);return arguments.length>0?this.bind(d,b,e):this.trigger(d)};c.attrFn&&(c.attrFn[d]=true)});(function(){function a(n,s,F,H,C,I){C=0;for(var T=H.length;C<T;C++){var Z=H[C];if(Z){var ra=false;for(Z=Z[n];Z;){if(Z.sizcache===F){ra=H[Z.sizset];break}if(Z.nodeType===1){I||(Z.sizcache=F,Z.sizset=C);if(typeof s!="string"){if(Z===s){ra=true;break}}else if(r.filter(s,[Z]).length>0){ra=Z;break}}Z=Z[n]}H[C]=ra}}}function d(n,s,F,H,C,I){C=0;for(var T=H.length;C<T;C++){var Z=H[C];if(Z){var ra=
false;for(Z=Z[n];Z;){if(Z.sizcache===F){ra=H[Z.sizset];break}Z.nodeType===1&&!I&&(Z.sizcache=F,Z.sizset=C);if(Z.nodeName.toLowerCase()===s){ra=Z;break}Z=Z[n]}H[C]=ra}}}var b=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,f=Object.prototype.toString,i=false,k=true,m=/\\/g,p=/\W/;[0,0].sort(function(){k=false;return 0});var r=function(n,s,F,H){F=F||[];var C=s=s||W;if(s.nodeType!==1&&s.nodeType!==9)return[];if(!n||
typeof n!="string")return F;var I,T,Z,ra,Ma,Ja,Sa=true,v=r.isXML(s),J=[],da=n;do{b.exec("");if(I=b.exec(da)){da=I[3];J.push(I[1]);if(I[2]){ra=I[3];break}}}while(I);if(J.length>1&&B.exec(n))if(J.length===2&&w.relative[J[0]])T=Ca(J[0]+J[1],s);else for(T=w.relative[J[0]]?[s]:r(J.shift(),s);J.length;){n=J.shift();w.relative[n]&&(n+=J.shift());T=Ca(n,T)}else{!H&&J.length>1&&s.nodeType===9&&!v&&w.match.ID.test(J[0])&&!w.match.ID.test(J[J.length-1])&&(Ma=r.find(J.shift(),s,v),s=Ma.expr?r.filter(Ma.expr,
Ma.set)[0]:Ma.set[0]);if(s){Ma=H?{expr:J.pop(),set:ka(H)}:r.find(J.pop(),J.length===1&&(J[0]==="~"||J[0]==="+")&&s.parentNode?s.parentNode:s,v);T=Ma.expr?r.filter(Ma.expr,Ma.set):Ma.set;for(J.length>0?(Z=ka(T)):(Sa=false);J.length;){I=Ja=J.pop();w.relative[Ja]?(I=J.pop()):(Ja="");I==null&&(I=s);w.relative[Ja](Z,I,v)}}else Z=[]}Z||(Z=T);Z||r.error(Ja||n);if(f.call(Z)==="[object Array]")if(Sa)if(s&&s.nodeType===1)for(n=0;Z[n]!=null;n++)Z[n]&&(Z[n]===true||Z[n].nodeType===1&&r.contains(s,Z[n]))&&F.push(T[n]);
else for(n=0;Z[n]!=null;n++)Z[n]&&Z[n].nodeType===1&&F.push(T[n]);else F.push.apply(F,Z);else ka(Z,F);ra&&(r(ra,C,F,H),r.uniqueSort(F));return F};r.uniqueSort=function(n){if(za){i=k;n.sort(za);if(i)for(var s=1;s<n.length;s++)n[s]===n[s-1]&&n.splice(s--,1)}return n};r.matches=function(n,s){return r(n,null,null,s)};r.matchesSelector=function(n,s){return r(s,null,null,[n]).length>0};r.find=function(n,s,F){var H;if(!n)return[];for(var C=0,I=w.order.length;C<I;C++){var T,Z=w.order[C];if(T=w.leftMatch[Z].exec(n)){var ra=
T[1];T.splice(1,1);if(ra.substr(ra.length-1)!=="\\"){T[1]=(T[1]||"").replace(m,"");H=w.find[Z](T,s,F);if(H!=null){n=n.replace(w.match[Z],"");break}}}}H||(H=typeof s.getElementsByTagName!="undefined"?s.getElementsByTagName("*"):[]);return{set:H,expr:n}};r.filter=function(n,s,F,H){for(var C,I,T=n,Z=[],ra=s,Ma=s&&s[0]&&r.isXML(s[0]);n&&s.length;){for(var Ja in w.filter)if((C=w.leftMatch[Ja].exec(n))!=null&&C[2]){var Sa,v,J=w.filter[Ja];v=C[1];I=false;C.splice(1,1);if(v.substr(v.length-1)!=="\\"){ra===
Z&&(Z=[]);if(w.preFilter[Ja])if(C=w.preFilter[Ja](C,ra,F,Z,H,Ma)){if(C===true)continue}else I=Sa=true;if(C)for(var da=0;(v=ra[da])!=null;da++)if(v){Sa=J(v,C,da,ra);var Y=H^!!Sa;F&&Sa!=null?Y?(I=true):(ra[da]=false):Y&&(Z.push(v),I=true)}if(Sa!==h){F||(ra=Z);n=n.replace(w.match[Ja],"");if(!I)return[];break}}}if(n===T)if(I==null)r.error(n);else break;T=n}return ra};r.error=function(n){throw"Syntax error, unrecognized expression: "+n;};var w=r.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},
leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(n){return n.getAttribute("href")},type:function(n){return n.getAttribute("type")}},relative:{"+":function(n,s){var F=typeof s=="string",H=F&&!p.test(s);F=F&&!H;H&&(s=s.toLowerCase());H=0;for(var C=n.length,I;H<C;H++)if(I=n[H]){for(;(I=I.previousSibling)&&I.nodeType!==1;);n[H]=F||I&&I.nodeName.toLowerCase()===s?I||false:I===s}F&&r.filter(s,n,true)},">":function(n,s){var F,H=typeof s=="string",C=0,I=n.length;if(H&&
!p.test(s))for(s=s.toLowerCase();C<I;C++){if(F=n[C]){F=F.parentNode;n[C]=F.nodeName.toLowerCase()===s?F:false}}else{for(;C<I;C++)(F=n[C])&&(n[C]=H?F.parentNode:F.parentNode===s);H&&r.filter(s,n,true)}},"":function(n,s,F){var H,C=e++,I=a;typeof s=="string"&&!p.test(s)&&(s=s.toLowerCase(),H=s,I=d);I("parentNode",s,C,n,H,F)},"~":function(n,s,F){var H,C=e++,I=a;typeof s=="string"&&!p.test(s)&&(s=s.toLowerCase(),H=s,I=d);I("previousSibling",s,C,n,H,F)}},find:{ID:function(n,s,F){if(typeof s.getElementById!=
"undefined"&&!F)return(n=s.getElementById(n[1]))&&n.parentNode?[n]:[]},NAME:function(n,s){if(typeof s.getElementsByName!="undefined"){for(var F=[],H=s.getElementsByName(n[1]),C=0,I=H.length;C<I;C++)H[C].getAttribute("name")===n[1]&&F.push(H[C]);return F.length===0?null:F}},TAG:function(n,s){if(typeof s.getElementsByTagName!="undefined")return s.getElementsByTagName(n[1])}},preFilter:{CLASS:function(n,s,F,H,C,I){n=" "+n[1].replace(m,"")+" ";if(I)return n;I=0;for(var T;(T=s[I])!=null;I++)T&&(C^(T.className&&
(" "+T.className+" ").replace(/[\t\n\r]/g," ").indexOf(n)>=0)?F||H.push(T):F&&(s[I]=false));return false},ID:function(n){return n[1].replace(m,"")},TAG:function(n){return n[1].replace(m,"").toLowerCase()},CHILD:function(n){if(n[1]==="nth"){n[2]||r.error(n[0]);n[2]=n[2].replace(/^\+|\s*/g,"");var s=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(n[2]==="even"&&"2n"||n[2]==="odd"&&"2n+1"||!/\D/.test(n[2])&&"0n+"+n[2]||n[2]);n[2]=s[1]+(s[2]||1)-0;n[3]=s[3]-0}else n[2]&&r.error(n[0]);n[0]=e++;return n},ATTR:function(n,
s,F,H,C,I){s=n[1]=n[1].replace(m,"");!I&&w.attrMap[s]&&(n[1]=w.attrMap[s]);n[4]=(n[4]||n[5]||"").replace(m,"");n[2]==="~="&&(n[4]=" "+n[4]+" ");return n},PSEUDO:function(n,s,F,H,C){if(n[1]==="not")if((b.exec(n[3])||"").length>1||/^\w/.test(n[3]))n[3]=r(n[3],null,null,s);else{n=r.filter(n[3],s,F,true^C);F||H.push.apply(H,n);return false}else if(w.match.POS.test(n[0])||w.match.CHILD.test(n[0]))return true;return n},POS:function(n){n.unshift(true);return n}},filters:{enabled:function(n){return n.disabled===
false&&n.type!=="hidden"},disabled:function(n){return n.disabled===true},checked:function(n){return n.checked===true},selected:function(n){return n.selected===true},parent:function(n){return!!n.firstChild},empty:function(n){return!n.firstChild},has:function(n,s,F){return!!r(F[3],n).length},header:function(n){return/h\d/i.test(n.nodeName)},text:function(n){var s=n.getAttribute("type"),F=n.type;return n.nodeName.toLowerCase()==="input"&&"text"===F&&(s===F||s===null)},radio:function(n){return n.nodeName.toLowerCase()===
"input"&&"radio"===n.type},checkbox:function(n){return n.nodeName.toLowerCase()==="input"&&"checkbox"===n.type},file:function(n){return n.nodeName.toLowerCase()==="input"&&"file"===n.type},password:function(n){return n.nodeName.toLowerCase()==="input"&&"password"===n.type},submit:function(n){var s=n.nodeName.toLowerCase();return(s==="input"||s==="button")&&"submit"===n.type},image:function(n){return n.nodeName.toLowerCase()==="input"&&"image"===n.type},reset:function(n){var s=n.nodeName.toLowerCase();
return(s==="input"||s==="button")&&"reset"===n.type},button:function(n){var s=n.nodeName.toLowerCase();return s==="input"&&"button"===n.type||s==="button"},input:function(n){return/input|select|textarea|button/i.test(n.nodeName)},focus:function(n){return n===n.ownerDocument.activeElement}},setFilters:{first:function(n,s){return s===0},last:function(n,s,F,H){return s===H.length-1},even:function(n,s){return s%2===0},odd:function(n,s){return s%2===1},lt:function(n,s,F){return s<F[3]-0},gt:function(n,
s,F){return s>F[3]-0},nth:function(n,s,F){return F[3]-0===s},eq:function(n,s,F){return F[3]-0===s}},filter:{PSEUDO:function(n,s,F,H){var C=s[1],I=w.filters[C];if(I)return I(n,F,s,H);if(C==="contains")return(n.textContent||n.innerText||r.getText([n])||"").indexOf(s[3])>=0;if(C==="not"){s=s[3];F=0;for(H=s.length;F<H;F++)if(s[F]===n)return false;return true}r.error(C)},CHILD:function(n,s){var F=s[1],H=n;switch(F){case "only":case "first":for(;H=H.previousSibling;)if(H.nodeType===1)return false;if(F===
"first")return true;H=n;case "last":for(;H=H.nextSibling;)if(H.nodeType===1)return false;return true;case "nth":F=s[2];var C=s[3];if(F===1&&C===0)return true;var I=s[0],T=n.parentNode;if(T&&(T.sizcache!==I||!n.nodeIndex)){var Z=0;for(H=T.firstChild;H;H=H.nextSibling)H.nodeType===1&&(H.nodeIndex=++Z);T.sizcache=I}H=n.nodeIndex-C;return F===0?H===0:H%F===0&&H/F>=0}},ID:function(n,s){return n.nodeType===1&&n.getAttribute("id")===s},TAG:function(n,s){return s==="*"&&n.nodeType===1||n.nodeName.toLowerCase()===
s},CLASS:function(n,s){return(" "+(n.className||n.getAttribute("class"))+" ").indexOf(s)>-1},ATTR:function(n,s){var F=s[1];F=w.attrHandle[F]?w.attrHandle[F](n):n[F]!=null?n[F]:n.getAttribute(F);var H=F+"",C=s[2],I=s[4];return F==null?C==="!=":C==="="?H===I:C==="*="?H.indexOf(I)>=0:C==="~="?(" "+H+" ").indexOf(I)>=0:I?C==="!="?H!==I:C==="^="?H.indexOf(I)===0:C==="$="?H.substr(H.length-I.length)===I:C==="|="?H===I||H.substr(0,I.length+1)===I+"-":false:H&&F!==false},POS:function(n,s,F,H){var C=w.setFilters[s[2]];
if(C)return C(n,F,s,H)}}},B=w.match.POS,P=function(n,s){return"\\"+(s-0+1)};for(var ba in w.match){w.match[ba]=new RegExp(w.match[ba].source+/(?![^\[]*\])(?![^\(]*\))/.source);w.leftMatch[ba]=new RegExp(/(^(?:.|\r|\n)*?)/.source+w.match[ba].source.replace(/\\(\d+)/g,P))}var ka=function(n,s){n=Array.prototype.slice.call(n,0);if(s){s.push.apply(s,n);return s}return n};try{Array.prototype.slice.call(W.documentElement.childNodes,0)}catch(Ia){ka=function(n,s){var F=0,H=s||[];if(f.call(n)==="[object Array]")Array.prototype.push.apply(H,
n);else if(typeof n.length=="number")for(var C=n.length;F<C;F++)H.push(n[F]);else for(;n[F];F++)H.push(n[F]);return H}}var za,Ba;W.documentElement.compareDocumentPosition?(za=function(n,s){if(n===s){i=true;return 0}if(!n.compareDocumentPosition||!s.compareDocumentPosition)return n.compareDocumentPosition?-1:1;return n.compareDocumentPosition(s)&4?-1:1}):(za=function(n,s){if(n===s){i=true;return 0}if(n.sourceIndex&&s.sourceIndex)return n.sourceIndex-s.sourceIndex;var F,H,C=[],I=[];F=n.parentNode;H=
s.parentNode;var T=F;if(F===H)return Ba(n,s);if(!F)return-1;if(!H)return 1;for(;T;){C.unshift(T);T=T.parentNode}for(T=H;T;){I.unshift(T);T=T.parentNode}F=C.length;H=I.length;for(T=0;T<F&&T<H;T++)if(C[T]!==I[T])return Ba(C[T],I[T]);return T===F?Ba(n,I[T],-1):Ba(C[T],s,1)},Ba=function(n,s,F){if(n===s)return F;for(n=n.nextSibling;n;){if(n===s)return-1;n=n.nextSibling}return 1});r.getText=function(n){for(var s="",F,H=0;n[H];H++){F=n[H];F.nodeType===3||F.nodeType===4?(s+=F.nodeValue):F.nodeType!==8&&(s+=
r.getText(F.childNodes))}return s};(function(){var n=W.createElement("div"),s="script"+(new Date).getTime(),F=W.documentElement;n.innerHTML="<a name='"+s+"'/>";F.insertBefore(n,F.firstChild);W.getElementById(s)&&(w.find.ID=function(H,C,I){if(typeof C.getElementById!="undefined"&&!I)return(C=C.getElementById(H[1]))?C.id===H[1]||typeof C.getAttributeNode!="undefined"&&C.getAttributeNode("id").nodeValue===H[1]?[C]:h:[]},w.filter.ID=function(H,C){var I=typeof H.getAttributeNode!="undefined"&&H.getAttributeNode("id");
return H.nodeType===1&&I&&I.nodeValue===C});F.removeChild(n);F=n=null})();(function(){var n=W.createElement("div");n.appendChild(W.createComment(""));n.getElementsByTagName("*").length>0&&(w.find.TAG=function(s,F){var H=F.getElementsByTagName(s[1]);if(s[1]==="*"){for(var C=[],I=0;H[I];I++)H[I].nodeType===1&&C.push(H[I]);H=C}return H});n.innerHTML="<a href='#'></a>";n.firstChild&&typeof n.firstChild.getAttribute!="undefined"&&n.firstChild.getAttribute("href")!=="#"&&(w.attrHandle.href=function(s){return s.getAttribute("href",
2)});n=null})();W.querySelectorAll&&function(){var n=r,s=W.createElement("div");s.innerHTML="<p class='TEST'></p>";if(!s.querySelectorAll||s.querySelectorAll(".TEST").length!==0){r=function(H,C,I,T){C=C||W;if(!T&&!r.isXML(C)){var Z=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(H);if(Z&&(C.nodeType===1||C.nodeType===9)){if(Z[1])return ka(C.getElementsByTagName(H),I);if(Z[2]&&w.find.CLASS&&C.getElementsByClassName)return ka(C.getElementsByClassName(Z[2]),I)}if(C.nodeType===9){if(H==="body"&&C.body)return ka([C.body],
I);if(Z&&Z[3]){var ra=C.getElementById(Z[3]);if(!ra||!ra.parentNode)return ka([],I);if(ra.id===Z[3])return ka([ra],I)}try{return ka(C.querySelectorAll(H),I)}catch(Ma){}}else if(C.nodeType===1&&C.nodeName.toLowerCase()!=="object"){Z=C;var Ja=(ra=C.getAttribute("id"))||"__sizzle__",Sa=C.parentNode,v=/^\s*[+~]/.test(H);ra?(Ja=Ja.replace(/'/g,"\\$&")):C.setAttribute("id",Ja);v&&Sa&&(C=C.parentNode);try{if(!v||Sa)return ka(C.querySelectorAll("[id='"+Ja+"'] "+H),I)}catch(J){}finally{ra||Z.removeAttribute("id")}}}return n(H,
C,I,T)};for(var F in n)r[F]=n[F];s=null}}();(function(){var n=W.documentElement,s=n.matchesSelector||n.mozMatchesSelector||n.webkitMatchesSelector||n.msMatchesSelector;if(s){var F=!s.call(W.createElement("div"),"div"),H=false;try{s.call(W.documentElement,"[test!='']:sizzle")}catch(C){H=true}r.matchesSelector=function(I,T){T=T.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!r.isXML(I))try{if(H||!w.match.PSEUDO.test(T)&&!/!=/.test(T)){var Z=s.call(I,T);if(Z||!F||I.document&&I.document.nodeType!==11)return Z}}catch(ra){}return r(T,
null,null,[I]).length>0}}})();(function(){var n=W.createElement("div");n.innerHTML="<div class='test e'></div><div class='test'></div>";if(n.getElementsByClassName&&n.getElementsByClassName("e").length!==0){n.lastChild.className="e";if(n.getElementsByClassName("e").length!==1){w.order.splice(1,0,"CLASS");w.find.CLASS=function(s,F,H){if(typeof F.getElementsByClassName!="undefined"&&!H)return F.getElementsByClassName(s[1])};n=null}}})();W.documentElement.contains?(r.contains=function(n,s){return n!==
s&&(n.contains?n.contains(s):true)}):W.documentElement.compareDocumentPosition?(r.contains=function(n,s){return!!(n.compareDocumentPosition(s)&16)}):(r.contains=function(){return false});r.isXML=function(n){return(n=(n?n.ownerDocument||n:0).documentElement)?n.nodeName!=="HTML":false};var Ca=function(n,s){for(var F,H=[],C="",I=s.nodeType?[s]:s;F=w.match.PSEUDO.exec(n);){C+=F[0];n=n.replace(w.match.PSEUDO,"")}n=w.relative[n]?n+"*":n;F=0;for(var T=I.length;F<T;F++)r(n,I[F],H);return r.filter(C,H)};c.find=
r;c.expr=r.selectors;c.expr[":"]=c.expr.filters;c.unique=r.uniqueSort;c.text=r.getText;c.isXMLDoc=r.isXML;c.contains=r.contains})();var xb=/Until$/,yb=/^(?:parents|prevUntil|prevAll)/,zb=/,/,Ka=/^.[^:#\[\.,]*$/,lc=Array.prototype.slice,sb=c.expr.match.POS,ec={children:true,contents:true,next:true,prev:true};c.fn.extend({find:function(a){var d=this,b,e;if(typeof a!="string")return c(a).filter(function(){b=0;for(e=d.length;b<e;b++)if(c.contains(d[b],this))return true});var f=this.pushStack("","find",
a),i,k,m;b=0;for(e=this.length;b<e;b++){i=f.length;c.find(a,this[b],f);if(b>0)for(k=i;k<f.length;k++)for(m=0;m<i;m++)if(f[m]===f[k]){f.splice(k--,1);break}}return f},has:function(a){var d=c(a);return this.filter(function(){for(var b=0,e=d.length;b<e;b++)if(c.contains(this,d[b]))return true})},not:function(a){return this.pushStack(D(this,a,false),"not",a)},filter:function(a){return this.pushStack(D(this,a,true),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?c.filter(a,this).length>0:this.filter(a).length>
0)},closest:function(a,d){var b=[],e,f,i=this[0];if(c.isArray(a)){var k,m={},p=1;if(i&&a.length){e=0;for(f=a.length;e<f;e++){k=a[e];m[k]||(m[k]=sb.test(k)?c(k,d||this.context):k)}for(;i&&i.ownerDocument&&i!==d;){for(k in m){e=m[k];(e.jquery?e.index(i)>-1:c(i).is(e))&&b.push({selector:k,elem:i,level:p})}i=i.parentNode;p++}}return b}k=sb.test(a)||typeof a!="string"?c(a,d||this.context):0;e=0;for(f=this.length;e<f;e++)for(i=this[e];i;){if(k?k.index(i)>-1:c.find.matchesSelector(i,a)){b.push(i);break}i=
i.parentNode;if(!i||!i.ownerDocument||i===d||i.nodeType===11)break}b=b.length>1?c.unique(b):b;return this.pushStack(b,"closest",a)},index:function(a){if(!a||typeof a=="string")return c.inArray(this[0],a?c(a):this.parent().children());return c.inArray(a.jquery?a[0]:a,this)},add:function(a,d){var b=typeof a=="string"?c(a,d):c.makeArray(a&&a.nodeType?[a]:a),e=c.merge(this.get(),b);return this.pushStack(!b[0]||!b[0].parentNode||b[0].parentNode.nodeType===11||!e[0]||!e[0].parentNode||e[0].parentNode.nodeType===
11?e:c.unique(e))},andSelf:function(){return this.add(this.prevObject)}});c.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return c.dir(a,"parentNode")},parentsUntil:function(a,d,b){return c.dir(a,"parentNode",b)},next:function(a){return c.nth(a,2,"nextSibling")},prev:function(a){return c.nth(a,2,"previousSibling")},nextAll:function(a){return c.dir(a,"nextSibling")},prevAll:function(a){return c.dir(a,"previousSibling")},nextUntil:function(a,d,b){return c.dir(a,
"nextSibling",b)},prevUntil:function(a,d,b){return c.dir(a,"previousSibling",b)},siblings:function(a){return c.sibling(a.parentNode.firstChild,a)},children:function(a){return c.sibling(a.firstChild)},contents:function(a){return c.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes)}},function(a,d){c.fn[a]=function(b,e){var f=c.map(this,d,b),i=lc.call(arguments);xb.test(a)||(e=b);e&&typeof e=="string"&&(f=c.filter(e,f));f=this.length>1&&!ec[a]?c.unique(f):f;(this.length>
1||zb.test(e))&&yb.test(a)&&(f=f.reverse());return this.pushStack(f,a,i.join(","))}});c.extend({filter:function(a,d,b){b&&(a=":not("+a+")");return d.length===1?c.find.matchesSelector(d[0],a)?[d[0]]:[]:c.find.matches(a,d)},dir:function(a,d,b){var e=[];for(a=a[d];a&&a.nodeType!==9&&(b===h||a.nodeType!==1||!c(a).is(b));){a.nodeType===1&&e.push(a);a=a[d]}return e},nth:function(a,d,b){for(var e=0;a;a=a[b])if(a.nodeType===1&&++e===(d||1))break;return a},sibling:function(a,d){for(var b=[];a;a=a.nextSibling)a.nodeType===
1&&a!==d&&b.push(a);return b}});var Tb=/ jQuery\d+="(?:\d+|null)"/g,Jb=/^\s+/,Ub=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Vb=/<([\w:]+)/,Wb=/<tbody/i,fc=/<|&#?\w+;/,ab=/<(?:script|object|embed|option|style)/i,tb=/checked\s*(?:[^=]|=\s*.checked.)/i,gc=/\/(java|ecma)script/i,dc=/^\s*<!(?:\[CDATA\[|\-\-)/,Va={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};Va.optgroup=Va.option;Va.tbody=Va.tfoot=Va.colgroup=Va.caption=Va.thead;Va.th=Va.td;c.support.htmlSerialize||(Va._default=[1,"div<div>","</div>"]);c.fn.extend({text:function(a){if(c.isFunction(a))return this.each(function(d){var b=c(this);b.text(a.call(this,d,b.text()))});if(typeof a!="object"&&a!==h)return this.empty().append((this[0]&&
this[0].ownerDocument||W).createTextNode(a));return c.text(this)},wrapAll:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapAll(a.call(this,b))});if(this[0]){var d=c(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&d.insertBefore(this[0]);d.map(function(){for(var b=this;b.firstChild&&b.firstChild.nodeType===1;)b=b.firstChild;return b}).append(this)}return this},wrapInner:function(a){if(c.isFunction(a))return this.each(function(d){c(this).wrapInner(a.call(this,d))});
return this.each(function(){var d=c(this),b=d.contents();b.length?b.wrapAll(a):d.append(a)})},wrap:function(a){return this.each(function(){c(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,
this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(d){this.parentNode.insertBefore(d,this)});if(arguments.length){var a=c(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(d){this.parentNode.insertBefore(d,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,
c(arguments[0]).toArray());return a}},remove:function(a,d){for(var b=0,e;(e=this[b])!=null;b++)if(!a||c.filter(a,[e]).length){!d&&e.nodeType===1&&(c.cleanData(e.getElementsByTagName("*")),c.cleanData([e]));e.parentNode&&e.parentNode.removeChild(e)}return this},empty:function(){for(var a=0,d;(d=this[a])!=null;a++)for(d.nodeType===1&&c.cleanData(d.getElementsByTagName("*"));d.firstChild;)d.removeChild(d.firstChild);return this},clone:function(a,d){a=a==null?false:a;d=d==null?a:d;return this.map(function(){return c.clone(this,
a,d)})},html:function(a){if(a===h)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Tb,""):null;if(typeof a=="string"&&!ab.test(a)&&(c.support.leadingWhitespace||!Jb.test(a))&&!Va[(Vb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ub,"<$1></$2>");try{for(var d=0,b=this.length;d<b;d++)this[d].nodeType===1&&(c.cleanData(this[d].getElementsByTagName("*")),this[d].innerHTML=a)}catch(e){this.empty().append(a)}}else c.isFunction(a)?this.each(function(f){var i=c(this);i.html(a.call(this,f,
i.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(c.isFunction(a))return this.each(function(d){var b=c(this),e=b.html();b.replaceWith(a.call(this,d,e))});typeof a!="string"&&(a=c(a).detach());return this.each(function(){var d=this.nextSibling,b=this.parentNode;c(this).remove();d?c(d).before(a):c(b).append(a)})}return this.length?this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,true)},domManip:function(a,
d,b){var e,f,i,k=a[0],m=[];if(!c.support.checkClone&&arguments.length===3&&typeof k=="string"&&tb.test(k))return this.each(function(){c(this).domManip(a,d,b,true)});if(c.isFunction(k))return this.each(function(w){var B=c(this);a[0]=k.call(this,w,d?B.html():h);B.domManip(a,d,b)});if(this[0]){i=k&&k.parentNode;c.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?(e={fragment:i}):(e=c.buildFragment(a,this,m));i=e.fragment;i.childNodes.length===1?(f=i=i.firstChild):(f=i.firstChild);
if(f){d=d&&c.nodeName(f,"tr");f=0;for(var p=this.length,r=p-1;f<p;f++)b.call(d?c.nodeName(this[f],"table")?this[f].getElementsByTagName("tbody")[0]||this[f].appendChild(this[f].ownerDocument.createElement("tbody")):this[f]:this[f],e.cacheable||p>1&&f<r?c.clone(i,true,true):i)}m.length&&c.each(m,ma)}return this}});c.buildFragment=function(a,d,b){var e,f,i,k;d&&d[0]&&(k=d[0].ownerDocument||d[0]);k.createDocumentFragment||(k=W);a.length===1&&typeof a[0]=="string"&&a[0].length<512&&k===W&&a[0].charAt(0)===
"<"&&!ab.test(a[0])&&(c.support.checkClone||!tb.test(a[0]))&&(f=true,i=c.fragments[a[0]],i&&i!==1&&(e=i));e||(e=k.createDocumentFragment(),c.clean(a,k,e,b));f&&(c.fragments[a[0]]=i?e:1);return{fragment:e,cacheable:f}};c.fragments={};c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,d){c.fn[a]=function(b){var e=[];b=c(b);var f=this.length===1&&this[0].parentNode;if(f&&f.nodeType===11&&f.childNodes.length===1&&b.length===1){b[d](this[0]);
return this}f=0;for(var i=b.length;f<i;f++){var k=(f>0?this.clone(true):this).get();c(b[f])[d](k);e=e.concat(k)}return this.pushStack(e,a,b.selector)}});c.extend({clone:function(a,d,b){var e=a.cloneNode(true),f,i,k;if((!c.support.noCloneEvent||!c.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!c.isXMLDoc(a)){q(a,e);f=l(a);i=l(e);for(k=0;f[k];++k)q(f[k],i[k])}if(d){x(a,e);if(b){f=l(a);i=l(e);for(k=0;f[k];++k)x(f[k],i[k])}}return e},clean:function(a,d,b,e){d=d||W;typeof d.createElement==
"undefined"&&(d=d.ownerDocument||d[0]&&d[0].ownerDocument||W);for(var f=[],i,k=0,m;(m=a[k])!=null;k++){typeof m=="number"&&(m+="");if(m){if(typeof m=="string")if(fc.test(m)){m=m.replace(Ub,"<$1></$2>");i=(Vb.exec(m)||["",""])[1].toLowerCase();var p=Va[i]||Va._default,r=p[0],w=d.createElement("div");for(w.innerHTML=p[1]+m+p[2];r--;)w=w.lastChild;if(!c.support.tbody){r=Wb.test(m);p=i==="table"&&!r?w.firstChild&&w.firstChild.childNodes:p[1]==="<table>"&&!r?w.childNodes:[];for(i=p.length-1;i>=0;--i)c.nodeName(p[i],
"tbody")&&!p[i].childNodes.length&&p[i].parentNode.removeChild(p[i])}!c.support.leadingWhitespace&&Jb.test(m)&&w.insertBefore(d.createTextNode(Jb.exec(m)[0]),w.firstChild);m=w.childNodes}else m=d.createTextNode(m);var B;if(!c.support.appendChecked)if(m[0]&&typeof(B=m.length)=="number")for(i=0;i<B;i++)pa(m[i]);else pa(m);m.nodeType?f.push(m):(f=c.merge(f,m))}}if(b){a=function(P){return!P.type||gc.test(P.type)};for(k=0;f[k];k++)if(e&&c.nodeName(f[k],"script")&&(!f[k].type||f[k].type.toLowerCase()===
"text/javascript"))e.push(f[k].parentNode?f[k].parentNode.removeChild(f[k]):f[k]);else{if(f[k].nodeType===1){d=c.grep(f[k].getElementsByTagName("script"),a);f.splice.apply(f,[k+1,0].concat(d))}b.appendChild(f[k])}}return f},cleanData:function(a){for(var d,b,e=c.cache,f=c.expando,i=c.event.special,k=c.support.deleteExpando,m=0,p;(p=a[m])!=null;m++)if(!(p.nodeName&&c.noData[p.nodeName.toLowerCase()]))if(b=p[c.expando]){if((d=e[b]&&e[b][f])&&d.events){for(var r in d.events)i[r]?c.event.remove(p,r):c.removeEvent(p,
r,d.handle);d.handle&&(d.handle.elem=null)}k?delete p[c.expando]:p.removeAttribute&&p.removeAttribute(c.expando);delete e[b]}}});var Xb=/alpha\([^)]*\)/i,hc=/opacity=([^)]*)/,mc=/([A-Z]|^ms)/g,Kb=/^-?\d+(?:px)?$/i,Yb=/^-?\d/,Zb=/^[+\-]=/,ya=/[^+\-\.\de]+/g,ic={position:"absolute",visibility:"hidden",display:"block"},la=["Left","Right"],Qb=["Top","Bottom"],fb,mb,va;c.fn.css=function(a,d){if(arguments.length===2&&d===h)return this;return c.access(this,a,d,true,function(b,e,f){return f!==h?c.style(b,
e,f):c.css(b,e)})};c.extend({cssHooks:{opacity:{get:function(a,d){if(d){var b=fb(a,"opacity","opacity");return b===""?"1":b}return a.style.opacity}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":c.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,d,b,e){if(a&&a.nodeType!==3&&a.nodeType!==8&&a.style){var f,i=c.camelCase(d),k=a.style,m=c.cssHooks[i];d=c.cssProps[i]||i;if(b===h){if(m&&"get"in m&&(f=
m.get(a,false,e))!==h)return f;return k[d]}e=typeof b;if(!(e==="number"&&isNaN(b)||b==null)){e==="string"&&Zb.test(b)&&(b=+b.replace(ya,"")+parseFloat(c.css(a,d)),e="number");e==="number"&&!c.cssNumber[i]&&(b+="px");if(!m||!("set"in m)||(b=m.set(a,b))!==h)try{k[d]=b}catch(p){}}}},css:function(a,d,b){var e,f;d=c.camelCase(d);f=c.cssHooks[d];d=c.cssProps[d]||d;d==="cssFloat"&&(d="float");if(f&&"get"in f&&(e=f.get(a,true,b))!==h)return e;if(fb)return fb(a,d)},swap:function(a,d,b){var e={};for(var f in d){e[f]=
a.style[f];a.style[f]=d[f]}b.call(a);for(f in d)a.style[f]=e[f]}});c.curCSS=c.css;c.each(["height","width"],function(a,d){c.cssHooks[d]={get:function(b,e,f){var i;if(e){if(b.offsetWidth!==0)return X(b,d,f);c.swap(b,ic,function(){i=X(b,d,f)});return i}},set:function(b,e){if(!Kb.test(e))return e;e=parseFloat(e);if(e>=0)return e+"px"}}});c.support.opacity||(c.cssHooks.opacity={get:function(a,d){return hc.test((d&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":
d?"1":""},set:function(a,d){var b=a.style,e=a.currentStyle;b.zoom=1;var f=c.isNaN(d)?"":"alpha(opacity="+d*100+")";e=e&&e.filter||b.filter||"";b.filter=Xb.test(e)?e.replace(Xb,f):e+" "+f}});c(function(){c.support.reliableMarginRight||(c.cssHooks.marginRight={get:function(a,d){var b;c.swap(a,{display:"inline-block"},function(){d?(b=fb(a,"margin-right","marginRight")):(b=a.style.marginRight)});return b}})});W.defaultView&&W.defaultView.getComputedStyle&&(mb=function(a,d){var b,e;d=d.replace(mc,"-$1").toLowerCase();
if(!(e=a.ownerDocument.defaultView))return h;if(e=e.getComputedStyle(a,null)){b=e.getPropertyValue(d);b===""&&!c.contains(a.ownerDocument.documentElement,a)&&(b=c.style(a,d))}return b});W.documentElement.currentStyle&&(va=function(a,d){var b,e=a.currentStyle&&a.currentStyle[d],f=a.runtimeStyle&&a.runtimeStyle[d],i=a.style;!Kb.test(e)&&Yb.test(e)&&(b=i.left,f&&(a.runtimeStyle.left=a.currentStyle.left),i.left=d==="fontSize"?"1em":e||0,e=i.pixelLeft+"px",i.left=b,f&&(a.runtimeStyle.left=f));return e===
""?"auto":e});fb=mb||va;c.expr&&c.expr.filters&&(c.expr.filters.hidden=function(a){var d=a.offsetHeight;return a.offsetWidth===0&&d===0||!c.support.reliableHiddenOffsets&&(a.style.display||c.css(a,"display"))==="none"},c.expr.filters.visible=function(a){return!c.expr.filters.hidden(a)});var Ab=/%20/g,eb=/\[\]$/,Lb=/\r?\n/g,nb=/#.*$/,Mb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,$b=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ea=/^(?:GET|HEAD)$/,Ya=/^\/\//,
ob=/\?/,Qa=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ac=/^(?:select|textarea)/i,cc=/\s+/,bc=/([?&])_=[^&]*/,Ta=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,V=c.fn.load,cb={},Za={},Wa,N;try{Wa=U.href}catch(hb){Wa=W.createElement("a");Wa.href="";Wa=Wa.href}N=Ta.exec(Wa.toLowerCase())||[];c.fn.extend({load:function(a,d,b){if(typeof a!="string"&&V)return V.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}e="GET";d&&
(c.isFunction(d)?(b=d,d=h):typeof d=="object"&&(d=c.param(d,c.ajaxSettings.traditional),e="POST"));var i=this;c.ajax({url:a,type:e,dataType:"html",data:d,complete:function(k,m,p){p=k.responseText;k.isResolved()&&(k.done(function(r){p=r}),i.html(f?c("<div>").append(p.replace(Qa,"")).find(f):p));b&&i.each(b,[p,m,k])}});return this},serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this}).filter(function(){return this.name&&
!this.disabled&&(this.checked||ac.test(this.nodeName)||$b.test(this.type))}).map(function(a,d){var b=c(this).val();return b==null?null:c.isArray(b)?c.map(b,function(e){return{name:d.name,value:e.replace(Lb,"\r\n")}}):{name:d.name,value:b.replace(Lb,"\r\n")}}).get()}});c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,d){c.fn[d]=function(b){return this.bind(d,b)}});c.each(["get","post"],function(a,d){c[d]=function(b,e,f,i){c.isFunction(e)&&(i=i||f,f=e,e=
h);return c.ajax({type:d,url:b,data:e,success:f,dataType:i})}});c.extend({getScript:function(a,d){return c.get(a,h,d,"script")},getJSON:function(a,d,b){return c.get(a,d,b,"json")},ajaxSetup:function(a,d){d?c.extend(true,a,c.ajaxSettings,d):(d=a,a=c.extend(true,c.ajaxSettings,d));for(var b in{context:1,url:1})b in d?(a[b]=d[b]):b in c.ajaxSettings&&(a[b]=c.ajaxSettings[b]);return a},ajaxSettings:{url:Wa,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|widget):$/.test(N[1]),global:true,type:"GET",
contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":g.String,"text html":true,"text json":c.parseJSON,"text xml":c.parseXML}},ajaxPrefilter:Q(cb),ajaxTransport:Q(Za),ajax:function(a,d){function b(C,I,T,Z){if(Ba!==2){Ba=2;Ia&&clearTimeout(Ia);
ka=h;P=Z||"";s.readyState=C?4:0;var ra,Ma,Ja;if(T){Z=e;var Sa=s,v=Z.contents,J=Z.dataTypes,da=Z.responseFields,Y,qa,Aa,Da;for(qa in da)qa in T&&(Sa[da[qa]]=T[qa]);for(;J[0]==="*";){J.shift();Y===h&&(Y=Z.mimeType||Sa.getResponseHeader("content-type"))}if(Y)for(qa in v)if(v[qa]&&v[qa].test(Y)){J.unshift(qa);break}if(J[0]in T)Aa=J[0];else{for(qa in T){if(!J[0]||Z.converters[qa+" "+J[0]]){Aa=qa;break}Da||(Da=qa)}Aa=Aa||Da}if(Aa){Aa!==J[0]&&J.unshift(Aa);T=T[Aa]}else T=void 0}else T=h;T=T;if(C>=200&&C<
300||C===304){if(e.ifModified){if(Y=s.getResponseHeader("Last-Modified"))c.lastModified[r]=Y;if(Y=s.getResponseHeader("Etag"))c.etag[r]=Y}if(C===304){I="notmodified";ra=true}else try{Y=e;T=T;Y.dataFilter&&(T=Y.dataFilter(T,Y.dataType));var Fa=Y.dataTypes;qa={};var vb,wb,oc=Fa.length,jc,Bb=Fa[0],Nb,nc,Cb,Ib,Ob;for(vb=1;vb<oc;vb++){if(vb===1)for(wb in Y.converters)typeof wb=="string"&&(qa[wb.toLowerCase()]=Y.converters[wb]);Nb=Bb;Bb=Fa[vb];if(Bb==="*")Bb=Nb;else if(Nb!=="*"&&Nb!==Bb){nc=Nb+" "+Bb;Cb=
qa[nc]||qa["* "+Bb];if(!Cb){Ob=h;for(Ib in qa){jc=Ib.split(" ");if(jc[0]===Nb||jc[0]==="*")if(Ob=qa[jc[1]+" "+Bb]){Ib=qa[Ib];Ib===true?(Cb=Ob):Ob===true&&(Cb=Ib);break}}}!Cb&&!Ob&&c.error("No conversion from "+nc.replace(" "," to "));Cb!==true&&(T=Cb?Cb(T):Ob(Ib(T)))}}Ma=T;I="success";ra=true}catch(pc){I="parsererror";Ja=pc}}else{Ja=I;if(!I||C){I="error";C<0&&(C=0)}}s.status=C;s.statusText=I;ra?k.resolveWith(f,[Ma,I,s]):k.rejectWith(f,[s,I,Ja]);s.statusCode(p);p=h;Ca&&i.trigger("ajax"+(ra?"Success":
"Error"),[s,e,ra?Ma:Ja]);m.resolveWith(f,[s,I]);Ca&&(i.trigger("ajaxComplete",[s,e]),--c.active||c.event.trigger("ajaxStop"))}}typeof a=="object"&&(d=a,a=h);d=d||{};var e=c.ajaxSetup({},d),f=e.context||e,i=f!==e&&(f.nodeType||f instanceof c)?c(f):c.event,k=c.Deferred(),m=c._Deferred(),p=e.statusCode||{},r,w={},B={},P,ba,ka,Ia,za,Ba=0,Ca,n,s={readyState:0,setRequestHeader:function(C,I){if(!Ba){var T=C.toLowerCase();C=B[T]=B[T]||C;w[C]=I}return this},getAllResponseHeaders:function(){return Ba===2?P:
null},getResponseHeader:function(C){var I;if(Ba===2){if(!ba)for(ba={};I=Mb.exec(P);)ba[I[1].toLowerCase()]=I[2];I=ba[C.toLowerCase()]}return I===h?null:I},overrideMimeType:function(C){Ba||(e.mimeType=C);return this},abort:function(C){C=C||"abort";ka&&ka.abort(C);b(0,C);return this}};k.promise(s);s.success=s.done;s.error=s.fail;s.complete=m.done;s.statusCode=function(C){if(C){var I;if(Ba<2)for(I in C)p[I]=[p[I],C[I]];else{I=C[s.status];s.then(I,I)}}return this};e.url=((a||e.url)+"").replace(nb,"").replace(Ya,
N[1]+"//");e.dataTypes=c.trim(e.dataType||"*").toLowerCase().split(cc);e.crossDomain==null&&(za=Ta.exec(e.url.toLowerCase()),e.crossDomain=!(!za||za[1]==N[1]&&za[2]==N[2]&&(za[3]||(za[1]==="http:"?80:443))==(N[3]||(N[1]==="http:"?80:443))));e.data&&e.processData&&typeof e.data!="string"&&(e.data=c.param(e.data,e.traditional));y(cb,e,d,s);if(Ba===2)return false;Ca=e.global;e.type=e.type.toUpperCase();e.hasContent=!Ea.test(e.type);Ca&&c.active++===0&&c.event.trigger("ajaxStart");if(!e.hasContent){e.data&&
(e.url+=(ob.test(e.url)?"&":"?")+e.data);r=e.url;if(e.cache===false){za=c.now();var F=e.url.replace(bc,"$1_="+za);e.url=F+(F===e.url?(ob.test(e.url)?"&":"?")+"_="+za:"")}}(e.data&&e.hasContent&&e.contentType!==false||d.contentType)&&s.setRequestHeader("Content-Type",e.contentType);e.ifModified&&(r=r||e.url,c.lastModified[r]&&s.setRequestHeader("If-Modified-Since",c.lastModified[r]),c.etag[r]&&s.setRequestHeader("If-None-Match",c.etag[r]));s.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?
e.accepts[e.dataTypes[0]]+(e.dataTypes[0]!=="*"?", */*; q=0.01":""):e.accepts["*"]);for(n in e.headers)s.setRequestHeader(n,e.headers[n]);if(e.beforeSend&&(e.beforeSend.call(f,s,e)===false||Ba===2)){s.abort();return false}for(n in{success:1,error:1,complete:1})s[n](e[n]);if(ka=y(Za,e,d,s)){s.readyState=1;Ca&&i.trigger("ajaxSend",[s,e]);e.async&&e.timeout>0&&(Ia=setTimeout(function(){s.abort("timeout")},e.timeout));try{Ba=1;ka.send(w,b)}catch(H){status<2?b(-1,H):c.error(H)}}else b(-1,"No Transport");
return s},param:function(a,d){var b=[],e=function(i,k){k=c.isFunction(k)?k():k;b[b.length]=encodeURIComponent(i)+"="+encodeURIComponent(k)};d===h&&(d=c.ajaxSettings.traditional);if(c.isArray(a)||a.jquery&&!c.isPlainObject(a))c.each(a,function(){e(this.name,this.value)});else for(var f in a)E(f,a[f],d,e);return b.join("&").replace(Ab,"+")}});c.extend({active:0,lastModified:{},etag:{}});var ub=c.now(),Db=/(\=)\?(&|$)|\?\?/i;c.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return c.expando+"_"+
ub++}});c.ajaxPrefilter("json jsonp",function(a,d,b){d=a.contentType==="application/x-www-form-urlencoded"&&typeof a.data=="string";if(a.dataTypes[0]==="jsonp"||a.jsonp!==false&&(Db.test(a.url)||d&&Db.test(a.data))){var e,f=a.jsonpCallback=c.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,i=g[f],k=a.url,m=a.data,p="$1"+f+"$2";a.jsonp!==false&&(k=k.replace(Db,p),a.url===k&&(d&&(m=m.replace(Db,p)),a.data===m&&(k+=(/\?/.test(k)?"&":"?")+a.jsonp+"="+f)));a.url=k;a.data=m;g[f]=function(r){e=
[r]};b.always(function(){g[f]=i;e&&c.isFunction(i)&&g[f](e[0])});a.converters["script json"]=function(){e||c.error(f+" was not called");return e[0]};a.dataTypes[0]="json";return"script"}});c.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){c.globalEval(a);return a}}});c.ajaxPrefilter("script",function(a){a.cache===h&&(a.cache=false);a.crossDomain&&
(a.type="GET",a.global=false)});c.ajaxTransport("script",function(a){if(a.crossDomain){var d,b=W.head||W.getElementsByTagName("head")[0]||W.documentElement;return{send:function(e,f){d=W.createElement("script");d.async="async";a.scriptCharset&&(d.charset=a.scriptCharset);d.src=a.url;d.onload=d.onreadystatechange=function(i,k){if(k||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null;b&&d.parentNode&&b.removeChild(d);d=h;k||f(200,"success")}};b.insertBefore(d,b.firstChild)},
abort:function(){d&&d.onload(0,1)}}}});var bb=g.ActiveXObject?function(){for(var a in pb)pb[a](0,1)}:false,Ua=0,pb;c.ajaxSettings.xhr=g.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&K()))a:{try{a=new g.ActiveXObject("Microsoft.XMLHTTP");break a}catch(d){}a=void 0}return a}:K;(function(a){c.extend(c.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})})(c.ajaxSettings.xhr());c.support.ajax&&c.ajaxTransport(function(a){if(!a.crossDomain||c.support.cors){var d;return{send:function(b,e){var f=a.xhr(),
i,k;a.username?f.open(a.type,a.url,a.async,a.username,a.password):f.open(a.type,a.url,a.async);if(a.xhrFields)for(k in a.xhrFields)f[k]=a.xhrFields[k];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType);!a.crossDomain&&!b["X-Requested-With"]&&(b["X-Requested-With"]="XMLHttpRequest");try{for(k in b)f.setRequestHeader(k,b[k])}catch(m){}f.send(a.hasContent&&a.data||null);d=function(p,r){var w,B,P,ba,ka;try{if(d&&(r||f.readyState===4)){d=h;i&&(f.onreadystatechange=c.noop,bb&&delete pb[i]);
if(r)f.readyState!==4&&f.abort();else{w=f.status;P=f.getAllResponseHeaders();ba={};(ka=f.responseXML)&&ka.documentElement&&(ba.xml=ka);ba.text=f.responseText;try{B=f.statusText}catch(Ia){B=""}!w&&a.isLocal&&!a.crossDomain?(w=ba.text?200:404):w===1223&&(w=204)}}}catch(za){r||e(-1,za)}ba&&e(w,B,ba,P)};!a.async||f.readyState===4?d():(i=++Ua,bb&&(pb||(pb={},c(g).unload(bb)),pb[i]=d),f.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var db={},Xa,Ha,ib=/^(?:toggle|show|hide)$/,kc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,
jb,Pa=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],qb,Eb=g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||g.oRequestAnimationFrame;c.fn.extend({show:function(a,d,b){var e;if(a||a===0)return this.animate(u("show",3),a,d,b);d=0;for(b=this.length;d<b;d++){a=this[d];a.style&&(e=a.style.display,!c._data(a,"olddisplay")&&e==="none"&&(e=a.style.display=""),e===""&&c.css(a,"display")==="none"&&
c._data(a,"olddisplay",o(a.nodeName)))}for(d=0;d<b;d++){a=this[d];if(a.style){e=a.style.display;if(e===""||e==="none")a.style.display=c._data(a,"olddisplay")||""}}return this},hide:function(a,d,b){if(a||a===0)return this.animate(u("hide",3),a,d,b);a=0;for(d=this.length;a<d;a++)if(this[a].style){b=c.css(this[a],"display");b!=="none"&&!c._data(this[a],"olddisplay")&&c._data(this[a],"olddisplay",b)}for(a=0;a<d;a++)this[a].style&&(this[a].style.display="none");return this},_toggle:c.fn.toggle,toggle:function(a,
d,b){var e=typeof a=="boolean";c.isFunction(a)&&c.isFunction(d)?this._toggle.apply(this,arguments):a==null||e?this.each(function(){var f=e?a:c(this).is(":hidden");c(this)[f?"show":"hide"]()}):this.animate(u("toggle",3),a,d,b);return this},fadeTo:function(a,d,b,e){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:d},a,b,e)},animate:function(a,d,b,e){var f=c.speed(d,b,e);if(c.isEmptyObject(a))return this.each(f.complete,[false]);a=c.extend({},a);return this[f.queue===false?
"each":"queue"](function(){f.queue===false&&c._mark(this);var i=c.extend({},f),k=this.nodeType===1,m=k&&c(this).is(":hidden"),p,r,w,B,P,ba,ka,Ia;i.animatedProperties={};for(w in a){p=c.camelCase(w);w!==p&&(a[p]=a[w],delete a[w]);r=a[p];c.isArray(r)?(i.animatedProperties[p]=r[1],r=a[p]=r[0]):(i.animatedProperties[p]=i.specialEasing&&i.specialEasing[p]||i.easing||"swing");if(r==="hide"&&m||r==="show"&&!m)return i.complete.call(this);k&&(p==="height"||p==="width")&&(i.overflow=[this.style.overflow,this.style.overflowX,
this.style.overflowY],c.css(this,"display")==="inline"&&c.css(this,"float")==="none"&&(c.support.inlineBlockNeedsLayout?(B=o(this.nodeName),B==="inline"?(this.style.display="inline-block"):(this.style.display="inline",this.style.zoom=1)):(this.style.display="inline-block")))}i.overflow!=null&&(this.style.overflow="hidden");for(w in a){k=new c.fx(this,i,w);r=a[w];ib.test(r)?k[r==="toggle"?m?"show":"hide":r]():(P=kc.exec(r),ba=k.cur(),P?(ka=parseFloat(P[2]),Ia=P[3]||(c.cssNumber[w]?"":"px"),Ia!=="px"&&
(c.style(this,w,(ka||1)+Ia),ba=(ka||1)/k.cur()*ba,c.style(this,w,ba+Ia)),P[1]&&(ka=(P[1]==="-="?-1:1)*ka+ba),k.custom(ba,ka,Ia)):k.custom(ba,r,""))}return true})},stop:function(a,d){a&&this.queue([]);this.each(function(){var b=c.timers,e=b.length;for(d||c._unmark(true,this);e--;)b[e].elem===this&&(d&&b[e](true),b.splice(e,1))});d||this.dequeue();return this}});c.each({slideDown:u("show",1),slideUp:u("hide",1),slideToggle:u("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},
function(a,d){c.fn[a]=function(b,e,f){return this.animate(d,b,e,f)}});c.extend({speed:function(a,d,b){var e=a&&typeof a=="object"?c.extend({},a):{complete:b||!b&&d||c.isFunction(a)&&a,duration:a,easing:b&&d||d&&!c.isFunction(d)&&d};e.duration=c.fx.off?0:typeof e.duration=="number"?e.duration:e.duration in c.fx.speeds?c.fx.speeds[e.duration]:c.fx.speeds._default;e.old=e.complete;e.complete=function(f){c.isFunction(e.old)&&e.old.call(this);e.queue!==false?c.dequeue(this):f!==false&&c._unmark(this)};
return e},easing:{linear:function(a,d,b,e){return b+e*a},swing:function(a,d,b,e){return(-Math.cos(a*Math.PI)/2+0.5)*e+b}},timers:[],fx:function(a,d,b){this.options=d;this.elem=a;this.prop=b;d.orig=d.orig||{}}});c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(c.fx.step[this.prop]||c.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,d=c.css(this.elem,
this.prop);return isNaN(a=parseFloat(d))?!d||d==="auto"?0:d:a},custom:function(a,d,b){function e(m){return f.step(m)}var f=this,i=c.fx,k;this.startTime=qb||z();this.start=a;this.end=d;this.unit=b||this.unit||(c.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;e.elem=this.elem;e()&&c.timers.push(e)&&!jb&&(Eb?(jb=true,k=function(){jb&&(Eb(k),i.tick())},Eb(k)):(jb=setInterval(i.tick,i.interval)))},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.show=
true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());c(this.elem).show()},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a){var d=qb||z(),b=true,e=this.elem,f=this.options,i,k;if(a||d>=f.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();f.animatedProperties[this.prop]=true;for(i in f.animatedProperties)f.animatedProperties[i]!==true&&(b=false);if(b){f.overflow!=
null&&!c.support.shrinkWrapBlocks&&c.each(["","X","Y"],function(p,r){e.style["overflow"+r]=f.overflow[p]});f.hide&&c(e).hide();if(f.hide||f.show)for(var m in f.animatedProperties)c.style(e,m,f.orig[m]);f.complete.call(e)}return false}f.duration==Infinity?(this.now=d):(k=d-this.startTime,this.state=k/f.duration,this.pos=c.easing[f.animatedProperties[this.prop]](this.state,k,0,1,f.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return true}};c.extend(c.fx,{tick:function(){for(var a=
c.timers,d=0;d<a.length;++d)a[d]()||a.splice(d--,1);a.length||c.fx.stop()},interval:13,stop:function(){clearInterval(jb);jb=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?(a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit):(a.elem[a.prop]=a.now)}}});c.expr&&c.expr.filters&&(c.expr.filters.animated=function(a){return c.grep(c.timers,function(d){return a===
d.elem}).length});var $a=/^t(?:able|d|h)$/i,Pb=/^(?:body|html)$/i;"getBoundingClientRect"in W.documentElement?(c.fn.offset=function(a){var d=this[0],b;if(a)return this.each(function(k){c.offset.setOffset(this,a,k)});if(!d||!d.ownerDocument)return null;if(d===d.ownerDocument.body)return c.offset.bodyOffset(d);try{b=d.getBoundingClientRect()}catch(e){}var f=d.ownerDocument,i=f.documentElement;if(!b||!c.contains(i,d))return b?{top:b.top,left:b.left}:{top:0,left:0};d=f.body;f=j(f);return{top:b.top+(f.pageYOffset||
c.support.boxModel&&i.scrollTop||d.scrollTop)-(i.clientTop||d.clientTop||0),left:b.left+(f.pageXOffset||c.support.boxModel&&i.scrollLeft||d.scrollLeft)-(i.clientLeft||d.clientLeft||0)}}):(c.fn.offset=function(a){var d=this[0];if(a)return this.each(function(w){c.offset.setOffset(this,a,w)});if(!d||!d.ownerDocument)return null;if(d===d.ownerDocument.body)return c.offset.bodyOffset(d);c.offset.initialize();var b,e=d.offsetParent,f=d,i=d.ownerDocument,k=i.documentElement,m=i.body;b=(i=i.defaultView)?
i.getComputedStyle(d,null):d.currentStyle;for(var p=d.offsetTop,r=d.offsetLeft;(d=d.parentNode)&&d!==m&&d!==k;){if(c.offset.supportsFixedPosition&&b.position==="fixed")break;b=i?i.getComputedStyle(d,null):d.currentStyle;p-=d.scrollTop;r-=d.scrollLeft;d===e&&(p+=d.offsetTop,r+=d.offsetLeft,c.offset.doesNotAddBorder&&(!c.offset.doesAddBorderForTableAndCells||!$a.test(d.nodeName))&&(p+=parseFloat(b.borderTopWidth)||0,r+=parseFloat(b.borderLeftWidth)||0),f=e,e=d.offsetParent);c.offset.subtractsBorderForOverflowNotVisible&&
b.overflow!=="visible"&&(p+=parseFloat(b.borderTopWidth)||0,r+=parseFloat(b.borderLeftWidth)||0);b=b}if(b.position==="relative"||b.position==="static"){p+=m.offsetTop;r+=m.offsetLeft}c.offset.supportsFixedPosition&&b.position==="fixed"&&(p+=Math.max(k.scrollTop,m.scrollTop),r+=Math.max(k.scrollLeft,m.scrollLeft));return{top:p,left:r}});c.offset={initialize:function(){var a=W.body,d=W.createElement("div"),b,e,f,i=parseFloat(c.css(a,"marginTop"))||0;c.extend(d.style,{position:"absolute",top:0,left:0,
margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});d.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";a.insertBefore(d,a.firstChild);b=d.firstChild;e=b.firstChild;f=b.nextSibling.firstChild.firstChild;this.doesNotAddBorder=e.offsetTop!==
5;this.doesAddBorderForTableAndCells=f.offsetTop===5;e.style.position="fixed";e.style.top="20px";this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15;e.style.position=e.style.top="";b.style.overflow="hidden";b.style.position="relative";this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==i;a.removeChild(d);c.offset.initialize=c.noop},bodyOffset:function(a){var d=a.offsetTop,b=a.offsetLeft;c.offset.initialize();c.offset.doesNotIncludeMarginInBodyOffset&&
(d+=parseFloat(c.css(a,"marginTop"))||0,b+=parseFloat(c.css(a,"marginLeft"))||0);return{top:d,left:b}},setOffset:function(a,d,b){var e=c.css(a,"position");e==="static"&&(a.style.position="relative");var f=c(a),i=f.offset(),k=c.css(a,"top"),m=c.css(a,"left"),p={},r={},w,B;(e==="absolute"||e==="fixed")&&c.inArray("auto",[k,m])>-1?(r=f.position(),w=r.top,B=r.left):(w=parseFloat(k)||0,B=parseFloat(m)||0);c.isFunction(d)&&(d=d.call(a,b,i));d.top!=null&&(p.top=d.top-i.top+w);d.left!=null&&(p.left=d.left-
i.left+B);"using"in d?d.using.call(a,p):f.css(p)}};c.fn.extend({position:function(){if(!this[0])return null;var a=this[0],d=this.offsetParent(),b=this.offset(),e=Pb.test(d[0].nodeName)?{top:0,left:0}:d.offset();b.top-=parseFloat(c.css(a,"marginTop"))||0;b.left-=parseFloat(c.css(a,"marginLeft"))||0;e.top+=parseFloat(c.css(d[0],"borderTopWidth"))||0;e.left+=parseFloat(c.css(d[0],"borderLeftWidth"))||0;return{top:b.top-e.top,left:b.left-e.left}},offsetParent:function(){return this.map(function(){for(var a=
this.offsetParent||W.body;a&&!Pb.test(a.nodeName)&&c.css(a,"position")==="static";)a=a.offsetParent;return a})}});c.each(["Left","Top"],function(a,d){var b="scroll"+d;c.fn[b]=function(e){var f,i;if(e===h){f=this[0];if(!f)return null;return(i=j(f))?"pageXOffset"in i?i[a?"pageYOffset":"pageXOffset"]:c.support.boxModel&&i.document.documentElement[b]||i.document.body[b]:f[b]}return this.each(function(){(i=j(this))?i.scrollTo(a?c(i).scrollLeft():e,a?e:c(i).scrollTop()):(this[b]=e)})}});c.each(["Height",
"Width"],function(a,d){var b=d.toLowerCase();c.fn["inner"+d]=function(){var e=this[0];return e&&e.style?parseFloat(c.css(e,b,"padding")):null};c.fn["outer"+d]=function(e){var f=this[0];return f&&f.style?parseFloat(c.css(f,b,e?"margin":"border")):null};c.fn[b]=function(e){var f=this[0];if(!f)return e==null?null:this;if(c.isFunction(e))return this.each(function(k){var m=c(this);m[b](e.call(this,k,m[b]()))});if(c.isWindow(f)){var i=f.document.documentElement["client"+d];return f.document.compatMode===
"CSS1Compat"&&i||f.document.body["client"+d]||i}if(f.nodeType===9)return Math.max(f.documentElement["client"+d],f.body["scroll"+d],f.documentElement["scroll"+d],f.body["offset"+d],f.documentElement["offset"+d]);if(e===h){f=c.css(f,b);i=parseFloat(f);return c.isNaN(i)?f:i}return this.css(b,typeof e=="string"?e:e+"px")}});g.jQuery=g.$=c})(window);
(function(g,h){var j,o=/:([\w\d]+)/g,u=/\?([^#]*)$/,t=function(l){return Array.prototype.slice.call(l)},z=function(l){return Object.prototype.toString.call(l)==="[object Function]"},K=function(l){return Object.prototype.toString.call(l)==="[object Array]"},E=function(l){return decodeURIComponent((l||"").replace(/\+/g," "))},y=encodeURIComponent,Q=function(l){return String(l).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},X=function(l){return function(q,
x){return this.route.apply(this,[l,q,x])}},ma={},pa=!!(h.history&&history.pushState),oa=[];j=function(){var l=t(arguments),q,x;j.apps=j.apps||{};if(l.length===0||l[0]&&z(l[0]))return j.apply(j,["body"].concat(l));else if(typeof(x=l.shift())=="string"){q=j.apps[x]||new j.Application;q.element_selector=x;l.length>0&&g.each(l,function(D,ca){q.use(ca)});q.element_selector!=x&&delete j.apps[x];return j.apps[q.element_selector]=q}};j.VERSION="0.7.0";j.addLogger=function(l){oa.push(l)};j.log=function(){var l=
t(arguments);l.unshift("["+Date()+"]");g.each(oa,function(q,x){x.apply(j,l)})};if(typeof h.console!="undefined")z(h.console.log.apply)?j.addLogger(function(){h.console.log.apply(h.console,arguments)}):j.addLogger(function(){h.console.log(arguments)});else typeof console!="undefined"&&j.addLogger(function(){console.log.apply(console,arguments)});g.extend(j,{makeArray:t,isFunction:z,isArray:K});j.Object=function(l){return g.extend(this,l||{})};g.extend(j.Object.prototype,{escapeHTML:Q,h:Q,toHash:function(){var l=
{};g.each(this,function(q,x){z(x)||(l[q]=x)});return l},toHTML:function(){var l="";g.each(this,function(q,x){z(x)||(l+="<strong>"+q+"</strong> "+x+"<br />")});return l},keys:function(l){var q=[];for(var x in this)if(!z(this[x])||!l)q.push(x);return q},has:function(l){return this[l]&&g.trim(this[l].toString())!==""},join:function(){var l=t(arguments),q=l.shift();return l.join(q)},log:function(){j.log.apply(j,arguments)},toString:function(l){var q=[];g.each(this,function(x,D){if(!z(D)||l)q.push('"'+
x+'": '+D.toString())});return"Sammy.Object: {"+q.join(",")+"}"}});j.DefaultLocationProxy=function(l,q){this.app=l;this.is_native=false;this.has_history=pa;this._startPolling(q)};j.DefaultLocationProxy.fullPath=function(l){var q=l.toString().match(/^[^#]*(#.+)$/);return[l.pathname,l.search,q?q[1]:""].join("")};j.DefaultLocationProxy.prototype={bind:function(){var l=this,q=this.app,x=j.DefaultLocationProxy;g(h).bind("hashchange."+this.app.eventNamespace(),function(D,ca){if(l.is_native===false&&!ca){l.is_native=
true;h.clearInterval(x._interval)}q.trigger("location-changed")});if(pa&&!q.disable_push_state){g(h).bind("popstate."+this.app.eventNamespace(),function(){q.trigger("location-changed")});g("a").live("click.history-"+this.app.eventNamespace(),function(D){var ca=x.fullPath(this);if(this.hostname==h.location.hostname&&q.lookupRoute("get",ca)){D.preventDefault();l.setLocation(ca);return false}})}if(!x._bindings)x._bindings=0;x._bindings++},unbind:function(){g(h).unbind("hashchange."+this.app.eventNamespace());
g(h).unbind("popstate."+this.app.eventNamespace());g("a").die("click.history-"+this.app.eventNamespace());j.DefaultLocationProxy._bindings--;j.DefaultLocationProxy._bindings<=0&&h.clearInterval(j.DefaultLocationProxy._interval)},getLocation:function(){return j.DefaultLocationProxy.fullPath(h.location)},setLocation:function(l){if(/^([^#\/]|$)/.test(l))l=pa?"/"+l:"#!/"+l;if(l!=this.getLocation())if(pa&&/^\//.test(l)){history.pushState({path:l},h.title,l);this.app.trigger("location-changed")}else return h.location=
l},_startPolling:function(l){var q=this;if(!j.DefaultLocationProxy._interval){l||(l=10);var x=function(){var D=q.getLocation();if(typeof j.DefaultLocationProxy._last_location=="undefined"||D!=j.DefaultLocationProxy._last_location)h.setTimeout(function(){g(h).trigger("hashchange",[true])},0);j.DefaultLocationProxy._last_location=D};x();j.DefaultLocationProxy._interval=h.setInterval(x,l)}}};j.Application=function(l){var q=this;this.routes={};this.listeners=new j.Object({});this.arounds=[];this.befores=
[];this.namespace=(new Date).getTime()+"-"+parseInt(Math.random()*1E3,10);this.context_prototype=function(){j.EventContext.apply(this,arguments)};this.context_prototype.prototype=new j.EventContext;z(l)&&l.apply(this,[this]);this._location_proxy||this.setLocationProxy(new j.DefaultLocationProxy(this,this.run_interval_every));this.debug&&this.bindToAllEvents(function(x,D){q.log(q.toString(),x.cleaned_type,D||{})})};j.Application.prototype=g.extend({},j.Object.prototype,{ROUTE_VERBS:["get","post","put",
"delete"],APP_EVENTS:["run","unload","lookup-route","run-route","route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect","location-changed"],_last_route:null,_location_proxy:null,_running:false,element_selector:"body",debug:false,raise_errors:false,run_interval_every:50,disable_push_state:false,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(l){return l?g(this.element_selector).find(l):
g(this.element_selector)},use:function(){var l=t(arguments),q=l.shift(),x=q||"";try{l.unshift(this);if(typeof q=="string"){x="Sammy."+q;q=j[q]}q.apply(this,l)}catch(D){if(typeof q==="undefined")this.error("Plugin Error: called use() but plugin ("+x.toString()+") is not defined",D);else z(q)?this.error("Plugin Error",D):this.error("Plugin Error: called use() but '"+x.toString()+"' is not a function",D)}return this},setLocationProxy:function(l){var q=this._location_proxy;this._location_proxy=l;if(this.isRunning()){q&&
q.unbind();this._location_proxy.bind()}},route:function(l,q,x){var D=this,ca=[],na,S;if(!x&&z(q)){x=q=l;l="any"}l=l.toLowerCase();if(q.constructor==String){for(o.lastIndex=0;(S=o.exec(q))!==null;)ca.push(S[1]);q=new RegExp(q.replace(o,"([^/]+)")+"$")}if(typeof x=="string")x=D[x];na=function(fa){var ga={verb:fa,path:q,callback:x,param_names:ca};D.routes[fa]=D.routes[fa]||[];D.routes[fa].push(ga)};l==="any"?g.each(this.ROUTE_VERBS,function(fa,ga){na(ga)}):na(l);return this},get:X("get"),post:X("post"),
put:X("put"),del:X("delete"),any:X("any"),mapRoutes:function(l){var q=this;g.each(l,function(x,D){q.route.apply(q,D)});return this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(l,q,x){var D=this;if(typeof x=="undefined")x=q;q=function(ca,na){var S;if(na&&na.context){S=na.context;delete na.context}else S=new D.context_prototype(D,"bind",ca.type,na,ca.target);ca.cleaned_type=ca.type.replace(D.eventNamespace(),"");x.apply(S,[ca,na])};this.listeners[l]||(this.listeners[l]=
[]);this.listeners[l].push(q);this.isRunning()&&this._listen(l,q);return this},trigger:function(l,q){this.$element().trigger([l,this.eventNamespace()].join("."),[q]);return this},refresh:function(){this.last_location=null;this.trigger("location-changed");return this},before:function(l,q){if(z(l)){q=l;l={}}this.befores.push([l,q]);return this},after:function(l){return this.bind("event-context-after",l)},around:function(l){this.arounds.push(l);return this},isRunning:function(){return this._running},
helpers:function(l){g.extend(this.context_prototype.prototype,l);return this},helper:function(l,q){this.context_prototype.prototype[l]=q;return this},run:function(l){if(this.isRunning())return false;var q=this;g.each(this.listeners.toHash(),function(x,D){g.each(D,function(ca,na){q._listen(x,na)})});this.trigger("run",{start_url:l});this._running=true;this.last_location=null;!/\#(.+)/.test(this.getLocation())&&typeof l!="undefined"&&this.setLocation(l);this._checkLocation();this._location_proxy.bind();
this.bind("location-changed",function(){q._checkLocation()});this.bind("submit",function(x){return q._checkFormSubmission(g(x.target).closest("form"))===false?x.preventDefault():false});g(h).bind("beforeunload",function(){q.unload()});return this.trigger("changed")},unload:function(){if(!this.isRunning())return false;var l=this;this.trigger("unload");this._location_proxy.unbind();this.$element().unbind("submit").removeClass(l.eventNamespace());g.each(this.listeners.toHash(),function(q,x){g.each(x,
function(D,ca){l._unlisten(q,ca)})});this._running=false;return this},bindToAllEvents:function(l){var q=this;g.each(this.APP_EVENTS,function(x,D){q.bind(D,l)});g.each(this.listeners.keys(true),function(x,D){g.inArray(D,q.APP_EVENTS)==-1&&q.bind(D,l)});return this},routablePath:function(l){return l.replace(u,"")},lookupRoute:function(l,q){var x=false,D=0,ca,na;if(typeof this.routes[l]!="undefined")for(ca=this.routes[l].length;D<ca;D++){na=this.routes[l][D];if(this.routablePath(q).match(na.path)){x=
na;break}}return x},runRoute:function(l,q,x,D){var ca=this,na=this.lookupRoute(l,q),S,fa,ga,xa,Oa,Ra,W;this.log("runRoute",[l,q].join(" "));this.trigger("run-route",{verb:l,path:q,params:x});if(typeof x=="undefined")x={};g.extend(x,this._parseQueryString(q));if(na){this.trigger("route-found",{route:na});if((Ra=na.path.exec(this.routablePath(q)))!==null){Ra.shift();g.each(Ra,function(U,c){if(na.param_names[U])x[na.param_names[U]]=E(c);else{if(!x.splat)x.splat=[];x.splat.push(E(c))}})}S=new this.context_prototype(this,
l,q,x,D);D=this.arounds.slice(0);ga=this.befores.slice(0);Oa=[S].concat(x.splat);fa=function(){for(var U;ga.length>0;){xa=ga.shift();if(ca.contextMatchesOptions(S,xa[0])){U=xa[1].apply(S,[S]);if(U===false)return false}}ca.last_route=na;S.trigger("event-context-before",{context:S});U=na.callback.apply(S,Oa);S.trigger("event-context-after",{context:S});return U};g.each(D.reverse(),function(U,c){var A=fa;fa=function(){return c.apply(S,[A])}});try{W=fa()}catch(O){this.error(["500 Error",l,q].join(" "),
O)}return W}else return this.notFound(l,q)},contextMatchesOptions:function(l,q,x){q=q;if(typeof q==="undefined"||q=={})return true;if(typeof x==="undefined")x=true;if(typeof q==="string"||z(q.test))q={path:q};if(q.only)return this.contextMatchesOptions(l,q.only,true);else if(q.except)return this.contextMatchesOptions(l,q.except,false);var D=true,ca=true;if(q.path){if(!z(q.path.test))q.path=new RegExp(q.path.toString()+"$");D=q.path.test(l.path)}if(q.verb)ca=typeof q.verb==="string"?q.verb===l.verb:
q.verb.indexOf(l.verb)>-1;return x?ca&&D:!(ca&&D)},getLocation:function(){return this._location_proxy.getLocation()},setLocation:function(l){return this._location_proxy.setLocation(l)},swap:function(l){return this.$element().html(l)},templateCache:function(l,q){return typeof q!="undefined"?(ma[l]=q):ma[l]},clearTemplateCache:function(){return ma={}},notFound:function(l,q){var x=this.error(["404 Not Found",l,q].join(" "));return l==="get"?x:true},error:function(l,q){q||(q=new Error);q.message=[l,q.message].join(" ");
this.trigger("error",{message:q.message,error:q});if(this.raise_errors)throw q;else this.log(q.message,q)},_checkLocation:function(){var l,q;l=this.getLocation();if(!this.last_location||this.last_location[0]!="get"||this.last_location[1]!=l){this.last_location=["get",l];q=this.runRoute("get",l)}return q},_getFormVerb:function(l){l=g(l);var q,x;x=l.find('input[name="_method"]');if(x.length>0)q=x.val();q||(q=l[0].getAttribute("method"));if(!q||q=="")q="get";return g.trim(q.toString().toLowerCase())},
_checkFormSubmission:function(l){var q,x,D;this.trigger("check-form-submission",{form:l});q=g(l);x=q.attr("action")||"";D=this._getFormVerb(q);this.log("_checkFormSubmission",q,x,D);if(D==="get"){this.setLocation(x+"?"+this._serializeFormParams(q));l=false}else{q=g.extend({},this._parseFormParams(q));l=this.runRoute(D,x,q,l.get(0))}return typeof l=="undefined"?false:l},_serializeFormParams:function(l){var q="";l=l.serializeArray();var x;if(l.length>0){q=this._encodeFormPair(l[0].name,l[0].value);
for(x=1;x<l.length;x++)q=q+"&"+this._encodeFormPair(l[x].name,l[x].value)}return q},_encodeFormPair:function(l,q){return y(l)+"="+y(q)},_parseFormParams:function(l){var q={};l=l.serializeArray();var x;for(x=0;x<l.length;x++)q=this._parseParamPair(q,l[x].name,l[x].value);return q},_parseQueryString:function(l){var q={},x,D;if(l=l.match(u)){l=l[1].split("&");for(D=0;D<l.length;D++){x=l[D].split("=");q=this._parseParamPair(q,E(x[0]),E(x[1]||""))}}return q},_parseParamPair:function(l,q,x){if(l[q])if(K(l[q]))l[q].push(x);
else l[q]=[l[q],x];else l[q]=x;return l},_listen:function(l,q){return this.$element().bind([l,this.eventNamespace()].join("."),q)},_unlisten:function(l,q){return this.$element().unbind([l,this.eventNamespace()].join("."),q)}});j.RenderContext=function(l){this.event_context=l;this.callbacks=[];this.content=this.previous_content=null;this.waiting=this.next_engine=false};j.RenderContext.prototype=g.extend({},j.Object.prototype,{then:function(l){if(!z(l))if(typeof l==="string"&&l in this.event_context){var q=
this.event_context[l];l=function(D){return q.apply(this.event_context,[D])}}else return this;var x=this;if(this.waiting)this.callbacks.push(l);else{this.wait();h.setTimeout(function(){var D=l.apply(x,[x.content,x.previous_content]);D!==false&&x.next(D)},0)}return this},wait:function(){this.waiting=true},next:function(l){this.waiting=false;if(typeof l!=="undefined"){this.previous_content=this.content;this.content=l}this.callbacks.length>0&&this.then(this.callbacks.shift())},load:function(l,q,x){var D=
this;return this.then(function(){var ca,na,S;if(z(q)){x=q;q={}}else q=g.extend({},q);x&&this.then(x);if(typeof l==="string"){ca=(S=l.match(/\.json$/)||q.json)&&q.cache===true||q.cache!==false;D.next_engine=D.event_context.engineFor(l);delete q.cache;delete q.json;if(q.engine){D.next_engine=q.engine;delete q.engine}if(ca&&(na=this.event_context.app.templateCache(l)))return na;this.wait();g.ajax(g.extend({url:l,data:{},dataType:S?"json":null,type:"get",success:function(fa){ca&&D.event_context.app.templateCache(l,
fa);D.next(fa)}},q));return false}else{if(l.nodeType)return l.innerHTML;if(l.selector){D.next_engine=l.attr("data-engine");return q.clone===false?l.remove()[0].innerHTML.toString():l[0].innerHTML.toString()}}})},loadPartials:function(l){if(l){this.partials=this.partials||{};for(name in l)this.load(l[name]).then(function(q){this.partials[name]=q})}return this},render:function(l,q,x,D){return z(l)&&!q?this.then(l):this.loadPartials(D).load(l).interpolate(q,l).then(x)},partial:function(l,q){return this.render(l,
q).swap()},send:function(){var l=this,q=t(arguments),x=q.shift();if(K(q[0]))q=q[0];return this.then(function(){q.push(function(D){l.next(D)});l.wait();x.apply(x,q);return false})},collect:function(l,q,x){var D=this,ca=function(){if(z(l)){q=l;l=this.content}var na=[],S=false;g.each(l,function(fa,ga){var xa=q.apply(D,[fa,ga]);if(xa.jquery&&xa.length==1){xa=xa[0];S=true}na.push(xa);return xa});return S?na:na.join("")};return x?ca():this.then(ca)},renderEach:function(l,q,x,D){if(K(q)){D=x;x=q;q=null}return this.load(l).then(function(ca){var na=
this;x||(x=K(this.previous_content)?this.previous_content:[]);if(D)g.each(x,function(S,fa){var ga={},xa=this.next_engine||l;q?(ga[q]=fa):(ga=fa);D(fa,na.event_context.interpolate(ca,ga,xa))});else return this.collect(x,function(S,fa){var ga={},xa=this.next_engine||l;q?(ga[q]=fa):(ga=fa);return this.event_context.interpolate(ca,ga,xa)},true)})},interpolate:function(l,q,x){var D=this;return this.then(function(ca,na){if(!l&&na)l=na;if(this.next_engine){q=this.next_engine;this.next_engine=false}var S=
D.event_context.interpolate(ca,l,q,this.partials);return x?na+S:S})},swap:function(){return this.then(function(l){this.event_context.swap(l)}).trigger("changed",{})},appendTo:function(l){return this.then(function(q){g(l).append(q)}).trigger("changed",{})},prependTo:function(l){return this.then(function(q){g(l).prepend(q)}).trigger("changed",{})},replace:function(l){return this.then(function(q){g(l).html(q)}).trigger("changed",{})},trigger:function(l,q){return this.then(function(x){if(typeof q=="undefined")q=
{content:x};this.event_context.trigger(l,q)})}});j.EventContext=function(l,q,x,D,ca){this.app=l;this.verb=q;this.path=x;this.params=new j.Object(D);this.target=ca};j.EventContext.prototype=g.extend({},j.Object.prototype,{$element:function(){return this.app.$element(t(arguments).shift())},engineFor:function(l){var q;if(z(l))return l;l=(l||this.app.template_engine).toString();if(q=l.match(/\.([^\.\?\#]+)$/))l=q[1];if(l&&z(this[l]))return this[l];if(this.app.template_engine)return this.engineFor(this.app.template_engine);
return function(x){return x}},interpolate:function(l,q,x,D){return this.engineFor(x).apply(this,[l,q,D])},render:function(l,q,x,D){return(new j.RenderContext(this)).render(l,q,x,D)},renderEach:function(l,q,x,D){return(new j.RenderContext(this)).renderEach(l,q,x,D)},load:function(l,q,x){return(new j.RenderContext(this)).load(l,q,x)},partial:function(l,q){return(new j.RenderContext(this)).partial(l,q)},send:function(){var l=new j.RenderContext(this);return l.send.apply(l,arguments)},redirect:function(){var l;
l=t(arguments);var q=this.app.getLocation(),x=l.length;if(x>1){for(var D=0,ca=[],na=[],S={},fa=false;D<x;D++)if(typeof l[D]=="string")ca.push(l[D]);else{g.extend(S,l[D]);fa=true}l=ca.join("/");if(fa){for(var ga in S)na.push(this.app._encodeFormPair(ga,S[ga]));l+="?"+na.join("&")}}else l=l[0];this.trigger("redirect",{to:l});this.app.last_location=[this.verb,this.path];this.app.setLocation(l);(new RegExp(l)).test(q)&&this.app.trigger("location-changed")},trigger:function(l,q){if(typeof q=="undefined")q=
{};if(!q.context)q.context=this;return this.app.trigger(l,q)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(l){return this.app.swap(l)},notFound:function(){return this.app.notFound(this.verb,this.path)},json:function(l){return g.parseJSON(l)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}});g.sammy=h.Sammy=j})(jQuery,window);
(function(g){Sammy=Sammy||{};Sammy.Title=function(){this.setTitle=function(h){this.title_function=g.isFunction(h)?h:function(j){return[h,j].join(" ")}};this.helper("title",function(){var h=g.makeArray(arguments).join(" ");if(this.app.title_function)h=this.app.title_function(h);document.title=h})}})(jQuery);
(function(g){function h(o){o=unescape(o);return o==="true"?true:o==="false"?false:o}function j(o,u,t){var z;if(u.match(/^[^\[]+$/))o[u]=h(t);else if(z=u.match(/^([^\[]+)\[\](.*)$/)){u=z[1];z=z[2];if(o[u]&&!g.isArray(o[u]))throw"400 Bad Request";if(z){z=z.match(/^\[([^\]]+)\](.*)$/);if(!z)throw"400 Bad Request";if(o[u])o[u][o[u].length-1][z[1]]?o[u].push(j({},z[1]+z[2],t)):g.extend(true,o[u][o[u].length-1],j({},z[1]+z[2],t));else o[u]=[j({},z[1]+z[2],t)]}else if(o[u])o[u].push(h(t));else o[u]=[h(t)]}else if(z=
u.match(/^([^\[]+)\[([^\[]+)\](.*)$/)){u=z[1];z=z[2]+z[3];if(o[u]&&g.isArray(o[u]))throw"400 Bad Request";if(o[u])g.extend(true,o[u],j(o[u],z,t));else o[u]=j({},z,t)}return o}Sammy=Sammy||{};Sammy.NestedParams=function(o){o._parseParamPair=j}})(jQuery);
(function(){if(!window.JSON)window.JSON={};(function(){function g(y){return y<10?"0"+y:y}function h(y){u.lastIndex=0;return u.test(y)?'"'+y.replace(u,function(Q){var X=K[Q];return typeof X==="string"?X:"\\u"+("0000"+Q.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+y+'"'}function j(y,Q){var X,ma,pa,oa,l=t,q,x=Q[y];if(x&&typeof x==="object"&&typeof x.toJSON==="function")x=x.toJSON(y);if(typeof E==="function")x=E.call(Q,y,x);switch(typeof x){case "string":return h(x);case "number":return isFinite(x)?
String(x):"null";case "boolean":case "null":return String(x);case "object":if(!x)return"null";t+=z;q=[];if(Object.prototype.toString.apply(x)==="[object Array]"){oa=x.length;for(X=0;X<oa;X+=1)q[X]=j(X,x)||"null";pa=q.length===0?"[]":t?"[\n"+t+q.join(",\n"+t)+"\n"+l+"]":"["+q.join(",")+"]";t=l;return pa}if(E&&typeof E==="object"){oa=E.length;for(X=0;X<oa;X+=1){ma=E[X];if(typeof ma==="string")if(pa=j(ma,x))q.push(h(ma)+(t?": ":":")+pa)}}else for(ma in x)if(Object.hasOwnProperty.call(x,ma))if(pa=j(ma,
x))q.push(h(ma)+(t?": ":":")+pa);pa=q.length===0?"{}":t?"{\n"+t+q.join(",\n"+t)+"\n"+l+"}":"{"+q.join(",")+"}";t=l;return pa}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+g(this.getUTCMonth()+1)+"-"+g(this.getUTCDate())+"T"+g(this.getUTCHours())+":"+g(this.getUTCMinutes())+":"+g(this.getUTCSeconds())+"Z"};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var o=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,t,z,K={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},E;if(typeof JSON.stringify!=="function")JSON.stringify=function(y,Q,X){var ma;z=t="";if(typeof X==="number")for(ma=0;ma<X;ma+=1)z+=" ";else if(typeof X==="string")z=X;if((E=Q)&&typeof Q!=="function"&&(typeof Q!=="object"||typeof Q.length!=="number"))throw new Error("JSON.stringify");
return j("",{"":y})};if(typeof JSON.parse!=="function")JSON.parse=function(y,Q){function X(pa,oa){var l,q,x=pa[oa];if(x&&typeof x==="object")for(l in x)if(Object.hasOwnProperty.call(x,l)){q=X(x,l);if(q!==undefined)x[l]=q;else delete x[l]}return Q.call(pa,oa,x)}var ma;o.lastIndex=0;if(o.test(y))y=y.replace(o,function(pa){return"\\u"+("0000"+pa.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(y.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){ma=eval("("+y+")");return typeof Q==="function"?X({"":ma},""):ma}throw new SyntaxError("JSON.parse");}})();Sammy=Sammy||{};Sammy.JSON=function(g){g.helpers({json:function(h){return typeof h=="string"?JSON.parse(h):JSON.stringify(h)}})}})(jQuery);(function(g){Sammy=Sammy||{};Sammy.Mustache=function(h,j){j||(j="mustache");h.helper(j,function(o,u,t){u=g.extend({},this,u);t=g.extend({},u.partials,t);return Mustache.to_html(o,u,t)})}})(jQuery);
window.Modernizr=function(g,h,j){function o(){K.input=function(O){for(var U=0,c=O.length;U<c;U++)na[O[U]]=!!(O[U]in ma);return na}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));K.inputtypes=function(O){for(var U=0,c,A,L,M=O.length;U<M;U++){ma.setAttribute("type",A=O[U]);(c=ma.type!=="text")&&(ma.value=pa,ma.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(A)&&ma.style.WebkitAppearance!==j?(E.appendChild(ma),L=h.defaultView,c=L.getComputedStyle&&
L.getComputedStyle(ma,null).WebkitAppearance!=="textfield"&&ma.offsetHeight!==0,E.removeChild(ma)):/^(search|tel)$/.test(A)||(/^(url|email)$/.test(A)?(c=ma.checkValidity&&ma.checkValidity()===false):/^color$/.test(A)?(E.appendChild(ma),c=ma.value!=pa,E.removeChild(ma)):(c=ma.value!=pa)));ca[O[U]]=!!c}return ca}("search tel url email datetime date month week time datetime-local number range color".split(" "))}function u(O,U){var c=O.charAt(0).toUpperCase()+O.substr(1);c=(O+" "+q.join(c+" ")+c).split(" ");
return!!t(c,U)}function t(O,U){for(var c in O)if(X[O[c]]!==j&&(!U||U(O[c],Q)))return true}function z(O,U){return typeof O===U}var K={},E=h.documentElement,y=h.head||h.getElementsByTagName("head")[0],Q=h.createElement("modernizr"),X=Q.style,ma=h.createElement("input"),pa=":)",oa=Object.prototype.toString,l=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),q="Webkit Moz O ms Khtml".split(" "),x={svg:"http://www.w3.org/2000/svg"},D={},ca={},na={},S=[],fa,ga=function(O){var U=h.createElement("style"),c=
h.createElement("div");U.textContent=O+"{#modernizr{height:3px}}";y.appendChild(U);c.id="modernizr";E.appendChild(c);O=c.offsetHeight===3;U.parentNode.removeChild(U);c.parentNode.removeChild(c);return!!O},xa=function(){var O={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(U,c){c=c||h.createElement(O[U]||"div");var A=(U="on"+U)in c;A||(c.setAttribute||(c=h.createElement("div")),c.setAttribute&&c.removeAttribute&&(c.setAttribute(U,""),A=
z(c[U],"function"),z(c[U],j)||(c[U]=j),c.removeAttribute(U)));return A}}(),Oa={}.hasOwnProperty,Ra;z(Oa,j)||z(Oa.call,j)?(Ra=function(O,U){return U in O&&z(O.constructor.prototype[U],j)}):(Ra=function(O,U){return Oa.call(O,U)});D.flexbox=function(){var O=h.createElement("div"),U=h.createElement("div");(function(A,L,M,R){L+=":";A.style.cssText=(L+l.join(M+";"+L)).slice(0,-L.length)+(R||"")})(O,"display","box","width:42px;padding:0;");U.style.cssText=l.join("box-flex:1;")+"width:10px;";O.appendChild(U);
E.appendChild(O);var c=U.offsetWidth===42;O.removeChild(U);E.removeChild(O);return c};D.canvas=function(){var O=h.createElement("canvas");return O.getContext&&O.getContext("2d")};D.canvastext=function(){return K.canvas&&z(h.createElement("canvas").getContext("2d").fillText,"function")};D.webgl=function(){return!!g.WebGLRenderingContext};D.touch=function(){return"ontouchstart"in g||ga("@media ("+l.join("touch-enabled),(")+"modernizr)")};D.geolocation=function(){return!!navigator.geolocation};D.postmessage=
function(){return!!g.postMessage};D.websqldatabase=function(){return!!g.openDatabase};D.indexedDB=function(){for(var O=-1,U=q.length;++O<U;){var c=q[O].toLowerCase();if(g[c+"_indexedDB"]||g[c+"IndexedDB"])return true}return false};D.hashchange=function(){return xa("hashchange",g)&&(h.documentMode===j||h.documentMode>7)};D.history=function(){return!!(g.history&&history.pushState)};D.draganddrop=function(){return xa("dragstart")&&xa("drop")};D.websockets=function(){return"WebSocket"in g};D.rgba=function(){X.cssText=
"background-color:rgba(150,255,150,.5)";return(""+X.backgroundColor).indexOf("rgba")!==-1};D.hsla=function(){X.cssText="background-color:hsla(120,40%,100%,.5)";return(""+X.backgroundColor).indexOf("rgba")!==-1||(""+X.backgroundColor).indexOf("hsla")!==-1};D.multiplebgs=function(){X.cssText="background:url(//:),url(//:),red url(//:)";return/(url\s*\(.*?){3}/.test(X.background)};D.backgroundsize=function(){return u("backgroundSize")};D.borderimage=function(){return u("borderImage")};D.borderradius=
function(){return u("borderRadius","",function(O){return(""+O).indexOf("orderRadius")!==-1})};D.boxshadow=function(){return u("boxShadow")};D.textshadow=function(){return h.createElement("div").style.textShadow===""};D.opacity=function(){var O=l.join("opacity:.55;")+"";X.cssText=O;return/^0.55$/.test(X.opacity)};D.cssanimations=function(){return u("animationName")};D.csscolumns=function(){return u("columnCount")};D.cssgradients=function(){var O=("background-image:"+l.join("gradient(linear,left top,right bottom,from(#9f9),to(white));background-image:")+
l.join("linear-gradient(left top,#9f9, white);background-image:")).slice(0,-17);X.cssText=O;return(""+X.backgroundImage).indexOf("gradient")!==-1};D.cssreflections=function(){return u("boxReflect")};D.csstransforms=function(){return!!t(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])};D.csstransforms3d=function(){var O=!!t(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);O&&"webkitPerspective"in E.style&&(O=ga("@media ("+
l.join("transform-3d),(")+"modernizr)"));return O};D.csstransitions=function(){return u("transitionProperty")};D.fontface=function(){var O,U,c=y||E,A=h.createElement("style");U=h.implementation||{hasFeature:function(){return false}};A.type="text/css";c.insertBefore(A,c.firstChild);O=A.sheet||A.styleSheet;U=(U.hasFeature("CSS2","")?function(L){if(!O||!L)return false;var M=false;try{O.insertRule(L,0);M=/src/i.test(O.cssRules[0].cssText);O.deleteRule(O.cssRules.length-1)}catch(R){}return M}:function(L){if(!O||
!L)return false;O.cssText=L;return O.cssText.length!==0&&/src/i.test(O.cssText)&&O.cssText.replace(/\r+|\n+/g,"").indexOf(L.split(" ")[0])===0})('@font-face { font-family: "font"; src: url(data:,); }');c.removeChild(A);return U};D.video=function(){var O=h.createElement("video"),U=!!O.canPlayType;if(U){U=new Boolean(U);U.ogg=O.canPlayType('video/ogg; codecs="theora"');U.h264=O.canPlayType('video/mp4; codecs="avc1.42E01E"')||O.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');U.webm=O.canPlayType('video/webm; codecs="vp8, vorbis"')}return U};
D.audio=function(){var O=h.createElement("audio"),U=!!O.canPlayType;U&&(U=new Boolean(U),U.ogg=O.canPlayType('audio/ogg; codecs="vorbis"'),U.mp3=O.canPlayType("audio/mpeg;"),U.wav=O.canPlayType('audio/wav; codecs="1"'),U.m4a=O.canPlayType("audio/x-m4a;")||O.canPlayType("audio/aac;"));return U};D.localstorage=function(){try{return!!localStorage.getItem}catch(O){return false}};D.sessionstorage=function(){try{return!!sessionStorage.getItem}catch(O){return false}};D.webWorkers=function(){return!!g.Worker};
D.applicationcache=function(){return!!g.applicationCache};D.svg=function(){return!!h.createElementNS&&!!h.createElementNS(x.svg,"svg").createSVGRect};D.inlinesvg=function(){var O=h.createElement("div");O.innerHTML="<svg/>";return(O.firstChild&&O.firstChild.namespaceURI)==x.svg};D.smil=function(){return!!h.createElementNS&&/SVG/.test(oa.call(h.createElementNS(x.svg,"animate")))};D.svgclippaths=function(){return!!h.createElementNS&&/SVG/.test(oa.call(h.createElementNS(x.svg,"clipPath")))};for(var W in D)Ra(D,
W)&&(fa=W.toLowerCase(),K[fa]=D[W](),S.push((K[fa]?"":"no-")+fa));K.input||o();K.crosswindowmessaging=K.postmessage;K.historymanagement=K.history;K.addTest=function(O,U){O=O.toLowerCase();if(!K[O]){U=!!U();E.className+=" "+(U?"":"no-")+O;K[O]=U;return K}};X.cssText="";Q=ma=null;g.attachEvent&&function(){var O=h.createElement("div");O.innerHTML="<elem></elem>";return O.childNodes.length!==1}()&&function(O,U){function c(aa,ha){for(var sa=-1,ta=aa.length,La,gb=[];++sa<ta;){La=aa[sa];(ha=La.media||ha)!=
"screen"&&gb.push(c(La.imports,ha),La.cssText)}return gb.join("")}function A(aa){for(var ha=-1;++ha<M;)aa.createElement(L[ha])}var L="abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video".split("|"),M=L.length,R=new RegExp("(^|\\s)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)","gi"),ja=new RegExp("<(/*)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)",
"gi"),ia=new RegExp("(^|[^\\n]*?\\s)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)([^\\n]*)({[\\n\\w\\W]*?})","gi"),wa=U.createDocumentFragment(),Ga=U.documentElement,ua=Ga.firstChild,Na=U.createElement("body"),G=U.createElement("style"),ea;A(U);A(wa);ua.insertBefore(G,ua.firstChild);G.media="print";O.attachEvent("onbeforeprint",function(){var aa=-1,ha=c(U.styleSheets,"all"),sa=[],ta;for(ea=ea||U.body;(ta=
ia.exec(ha))!=null;)sa.push((ta[1]+ta[2]+ta[3]).replace(R,"$1.iepp_$2")+ta[4]);for(G.styleSheet.cssText=sa.join("\n");++aa<M;){ha=U.getElementsByTagName(L[aa]);sa=ha.length;for(ta=-1;++ta<sa;)ha[ta].className.indexOf("iepp_")<0&&(ha[ta].className+=" iepp_"+L[aa])}wa.appendChild(ea);Ga.appendChild(Na);Na.className=ea.className;Na.innerHTML=ea.innerHTML.replace(ja,"<$1font")});O.attachEvent("onafterprint",function(){Na.innerHTML="";Ga.removeChild(Na);Ga.appendChild(ea);G.styleSheet.cssText=""})}(g,
h);K._enableHTML5=true;K._version="1.7";E.className=E.className.replace(/\bno-js\b/,"")+" js "+S.join(" ");return K}(this,this.document);
var Model=function(g,h){var j=function(o){this.attributes=jQuery.extend({},o);this.changes={};this.errors=new Model.Errors(this);this.uid=[g,Model.UID.generate()].join("-");jQuery.isFunction(this.initialize)&&this.initialize()};Model.Module.extend.call(j,Model.Module);j._name=g;j.collection=[];j.unique_key="id";j.extend(Model.Callbacks).extend(Model.ClassMethods);j.prototype=new Model.Base;j.prototype.constructor=j;jQuery.isFunction(h)&&h.call(j,j,j.prototype);return j};
Model.Callbacks={bind:function(g,h){this.callbacks=this.callbacks||{};this.callbacks[g]=this.callbacks[g]||[];this.callbacks[g].push(h);return this},trigger:function(g,h){this.callbacks=this.callbacks||{};var j=this.callbacks[g];if(j)for(var o=0;o<j.length;o++)j[o].apply(this,h||[]);return this},unbind:function(g,h){this.callbacks=this.callbacks||{};if(h)for(var j=this.callbacks[g]||[],o=0;o<j.length;o++)j[o]===h&&this.callbacks[g].splice(o,1);else delete this.callbacks[g];return this}};
Model.ClassMethods={add:function(g){var h=g.id();if(jQuery.inArray(g,this.collection)===-1&&!(h&&this.find(h))){this.collection.push(g);this.trigger("add",[g])}return this},all:function(){return this.collection.slice()},chain:function(g){return jQuery.extend({},this,{collection:g})},count:function(){return this.all().length},detect:function(g){for(var h=this.all(),j,o=0,u=h.length;o<u;o++){j=h[o];if(g.call(j,j,o))return j}},each:function(g,h){for(var j=this.all(),o=0,u=j.length;o<u;o++)g.call(h||
j[o],j[o],o,j);return this},find:function(g){return this.detect(function(){return this.id()==g})},first:function(){return this.all()[0]},load:function(g){if(this._persistence){var h=this;this._persistence.read(function(j){for(var o=0,u=j.length;o<u;o++)h.add(j[o]);g&&g.call(h,j)})}return this},last:function(){var g=this.all();return g[g.length-1]},map:function(g,h){for(var j=this.all(),o=[],u=0,t=j.length;u<t;u++)o.push(g.call(h||j[u],j[u],u,j));return o},persistence:function(g){if(arguments.length==
0)return this._persistence;else{var h=Array.prototype.slice.call(arguments,1);h.unshift(this);this._persistence=g.apply(g,h);return this}},pluck:function(g){for(var h=this.all(),j=[],o=0,u=h.length;o<u;o++)j.push(h[o].attr(g));return j},remove:function(g){for(var h,j=0,o=this.collection.length;j<o;j++)if(this.collection[j]===g){h=j;break}if(h!=undefined){this.collection.splice(h,1);this.trigger("remove",[g]);return true}else return false},reverse:function(){return this.chain(this.all().reverse())},
select:function(g,h){for(var j=this.all(),o=[],u,t=0,z=j.length;t<z;t++){u=j[t];if(g.call(h||u,u,t,j))o.push(u)}return this.chain(o)},sort:function(g){return this.chain(this.all().sort(g))},sortBy:function(g){var h=jQuery.isFunction(g);return this.sort(function(j,o){var u=h?g.call(j):j.attr(g),t=h?g.call(o):o.attr(g);return u<t?-1:u>t?1:0})},use:function(g){var h=Array.prototype.slice.call(arguments,1);h.unshift(this);g.apply(this,h);return this}};
Model.Errors=function(g){this.errors={};this.model=g};Model.Errors.prototype={add:function(g,h){this.errors[g]||(this.errors[g]=[]);this.errors[g].push(h);return this},all:function(){return this.errors},clear:function(){this.errors={};return this},each:function(g){for(var h in this.errors)for(var j=0;j<this.errors[h].length;j++)g.call(this,h,this.errors[h][j]);return this},on:function(g){return this.errors[g]||[]},size:function(){var g=0;this.each(function(){g++});return g}};
Model.InstanceMethods={asJSON:function(){return this.attr()},attr:function(g,h){if(arguments.length===0)return jQuery.extend({},this.attributes,this.changes);else if(arguments.length===2){if(this.attributes[g]===h)delete this.changes[g];else this.changes[g]=h;return this}else if(typeof g==="object"){for(var j in g)this.attr(j,g[j]);return this}else return g in this.changes?this.changes[g]:this.attributes[g]},callPersistMethod:function(g,h){var j=this,o=function(u){if(u){j.merge(j.changes).reset();
g==="destroy"?j.constructor.remove(j):j.constructor.add(j);j.trigger(g)}var t;if(h)t=h.apply(j,arguments);return t};this.constructor._persistence?this.constructor._persistence[g](this,o):o.call(this,true)},destroy:function(g){this.callPersistMethod("destroy",g);return this},id:function(){return this.attributes[this.constructor.unique_key]},merge:function(g){jQuery.extend(this.attributes,g);return this},newRecord:function(){return this.id()===undefined},reset:function(){this.errors.clear();this.changes=
{};return this},save:function(g){if(this.valid())this.callPersistMethod(this.newRecord()?"create":"update",g);else g&&g(false);return this},valid:function(){this.errors.clear();this.validate();return this.errors.size()===0},validate:function(){return this}};
Model.localStorage=function(g){if(!window.localStorage)return{create:function(u,t){t(true)},destroy:function(u,t){t(true)},read:function(u){u([])},update:function(u,t){t(true)}};var h=[g._name,"collection"].join("-"),j=function(){var u=localStorage[h];return u?JSON.parse(u):[]},o=function(u){localStorage.setItem(u.uid,JSON.stringify(u.asJSON()));u=u.uid;var t=j();if(jQuery.inArray(u,t)===-1){t.push(u);localStorage.setItem(h,JSON.stringify(t))}};return{create:function(u,t){o(u);t(true)},destroy:function(u,
t){localStorage.removeItem(u.uid);var z=u.uid,K=j();z=jQuery.inArray(z,K);if(z>-1){K.splice(z,1);localStorage.setItem(h,JSON.stringify(K))}t(true)},read:function(u){if(!u)return false;for(var t=g.map(function(){return this.uid}),z=j(),K=[],E,y,Q=0,X=z.length;Q<X;Q++){y=z[Q];if(jQuery.inArray(y,t)==-1){E=JSON.parse(localStorage[y]);E=new g(E);E.uid=y;K.push(E)}}u(K)},update:function(u,t){o(u);t(true)}}};Model.Log=function(){window.console&&window.console.log.apply(window.console,arguments)};
Model.Module={extend:function(g){jQuery.extend(this,g);return this},include:function(g){jQuery.extend(this.prototype,g);return this}};
Model.REST=function(g,h,j){var o=/:([\w\d]+)/g,u=function(){for(var t=[],z;(z=o.exec(h))!==null;)t.push(z[1]);return t}();return jQuery.extend({path:function(t){var z=h;jQuery.each(u,function(K,E){z=z.replace(":"+E,t.attributes[E])});return z},create:function(t,z){return this.xhr("POST",this.create_path(t),t,z)},create_path:function(t){return this.path(t)},destroy:function(t,z){return this.xhr("DELETE",this.destroy_path(t),t,z)},destroy_path:function(t){return this.update_path(t)},params:function(t){var z;
if(t){var K=t.asJSON();delete K[t.constructor.unique_key];z={};z[t.constructor._name.toLowerCase()]=K}else z=null;if(jQuery.ajaxSettings.data)z=jQuery.extend({},jQuery.ajaxSettings.data,z);return z},read:function(t){return this.xhr("GET",this.read_path(),null,function(z,K,E){E=jQuery.makeArray(E);z=[];K=0;for(var y=E.length;K<y;K++)z.push(new g(E[K]));t(z)})},read_path:function(){return h},update:function(t,z){return this.xhr("PUT",this.update_path(t),t,z)},update_path:function(t){return[this.path(t),
t.id()].join("/")},xhr:function(t,z,K,E){var y=this,Q=t=="GET"?undefined:this.params(K);return jQuery.ajax({type:t,url:z+".json",dataType:"json",data:Q,dataFilter:function(X){return/\S/.test(X)?X:undefined},complete:function(X,ma){y.xhrComplete(X,ma,K,E)}})},xhrComplete:function(t,z,K,E){var y=Model.REST["handle"+t.status];y&&y.call(this,t,z,K);z=z==="success";y=Model.REST.parseResponseData(t);z&&K&&y&&K.attr(y);E&&E.call(K,z,t,y)}},j)};Model.RestPersistence=Model.REST;
Model.REST.handle422=function(g,h,j){if(g=Model.REST.parseResponseData(g)){j.errors.clear();for(var o in g)for(h=0;h<g[o].length;h++)j.errors.add(o,g[o][h])}};Model.REST.parseResponseData=function(g){try{return/\S/.test(g.responseText)?jQuery.parseJSON(g.responseText):undefined}catch(h){Model.Log(h)}};Model.UID={counter:0,generate:function(){return[(new Date).valueOf(),this.counter++].join("-")},reset:function(){this.counter=0;return this}};Model.VERSION="0.10.1";
Model.Base=function(){function g(){}g.prototype=jQuery.extend({},Model.Callbacks,Model.InstanceMethods);return g}();
Model.SinatraREST=function(g,h,j){var o=/:([\w\d]+)/g,u=function(){for(var t=[],z;(z=o.exec(h))!==null;)t.push(z[1]);return t}();return jQuery.extend({path:function(t){var z=h;jQuery.each(u,function(K,E){z=z.replace(":"+E,t.attributes[E])});return z},create:function(t,z){return this.xhr("POST",this.create_path(t),t,z)},create_path:function(t){return this.path(t)},destroy:function(t,z){return this.xhr("DELETE",this.destroy_path(t),t,z)},destroy_path:function(t){return this.update_path(t)},params:function(t){var z;
if(t){var K=t.asJSON();delete K[t.constructor.unique_key];z={};z[t.constructor._name.toLowerCase()]=K}else z=null;if(jQuery.ajaxSettings.data)z=jQuery.extend({},jQuery.ajaxSettings.data,z);return z},read:function(t){return this.xhr("GET",this.read_path(),null,function(z,K,E){E=jQuery.makeArray(E);z=[];K=0;for(var y=E.length;K<y;K++)z.push(new g(E[K]));t(z)})},read_path:function(){return h},update:function(t,z){return this.xhr("PUT",this.update_path(t),t,z)},update_path:function(t){return[this.path(t),
t.id()].join("/")},xhr:function(t,z,K,E){var y=this,Q=t=="GET"?undefined:this.params(K);return jQuery.ajax({type:t,url:z+".json",dataType:"json",data:Q,complete:function(X,ma){y.xhrComplete(X,ma,K,E)}})},xhrComplete:function(t,z,K,E){var y=Model.REST["handle"+t.status];y&&y.call(this,t,z,K);z=z==="success";y=Model.REST.parseResponseData(t);z&&K&&y&&K.attr(y);E&&E.call(K,z,t,y)}},j)};
var CodeMirror=function(){function g(c,A){function L(b){Za=null;var e={line:0,ch:0};ja(e,{line:V.length-1,ch:V[V.length-1].text.length},W(b),e,e);Za=new z}function M(){if(la.readOnly!="nocursor"){!Wa&&la.onFocus&&la.onFocus($a);Wa=true;sa();if(va.className.search(/\bCodeMirror-focused\b/)==-1)va.className+=" CodeMirror-focused";dc()}}function R(){Wa&&la.onBlur&&la.onBlur($a);clearInterval(bc);hb=null;Wa=false;va.className=va.className.replace(" CodeMirror-focused","")}function ja(b,e,f,i,k){if(Za){for(var m=
[],p=b.line,r=e.line+1;p<r;++p)m.push(V[p].text);for(Za.addChange(b.line,f.length,m);Za.done.length>la.undoDepth;)Za.done.shift()}ua(b,e,f,i,k)}function ia(b,e){var f=b.pop();if(f){for(var i=[],k=f.start+f.added,m=f.start;m<k;++m)i.push(V[m].text);e.push({start:f.start,added:f.old.length,old:i});m=f.start+f.old.length-1;i=i[i.length-1];var p=f.old[f.old.length-1];if(p)if(i){for(var r=i.length,w=p.length;r>=0&&w>=0;--r,--w)if(i.charAt(r)!=p.charAt(w))break;i=w+1}else i=p.length;else i=i?i.length:0;
m=Ka({line:m,ch:i});ua({line:f.start,ch:0},{line:k-1,ch:V[k-1].text.length},f.old,m,m)}}function wa(){ia(Za.done,Za.undone)}function Ga(){ia(Za.undone,Za.done)}function ua(b,e,f,i,k){for(var m=false,p=Eb.length,r=b.line;r<e.line;++r)if(V[r].text.length==p){m=true;break}var w=e.line-b.line;r=V[b.line];var B=V[e.line];if(r==B)if(f.length==1)r.replace(b.ch,e.ch,f[0]);else{B=r.split(e.ch,f[f.length-1]);var P=[b.line+1,w];r.replace(b.ch,r.text.length,f[0]);r=1;for(var ba=f.length-1;r<ba;++r)P.push(new u(f[r]));
P.push(B);V.splice.apply(V,P)}else if(f.length==1){r.replace(b.ch,r.text.length,f[0]+B.text.slice(e.ch));V.splice(b.line+1,w)}else{P=[b.line+1,w-1];r.replace(b.ch,r.text.length,f[0]);B.replace(0,e.ch,f[f.length-1]);r=1;for(ba=f.length-1;r<ba;++r)P.push(new u(f[r]));V.splice.apply(V,P)}r=b.line;for(ba=r+f.length;r<ba;++r){B=V[r].text;if(B.length>p){Eb=B;p=B.length;m=false}}if(m){r=p=0;for(ba=V.length;r<ba;++r){B=V[r].text;if(B.length>p){p=B.length;Eb=B}}}m=[];w=f.length-w-1;r=0;for(B=cb.length;r<B;++r){p=
cb[r];if(p<b.line)m.push(p);else p>e.line&&m.push(p+w)}f.length&&m.push(b.line);cb=m;Kb(100);Ua.push({from:b.line,to:e.line+1,diff:w});pb={from:b,to:e,text:f};xb(i,k,N.from.line<=Math.min(e.line,e.line+w)?N.from.line:N.from.line+w,N.to.line<=Math.min(e.line,e.line+w)?N.to.line:N.to.line+w);Ab.style.height=V.length*ab()+2*Ya.offsetTop+"px"}function Na(b,e,f){function i(m){if(l(m,e))return m;if(!l(f,m))return k;var p=m.line+b.length-(f.line-e.line)-1,r=m.ch;if(m.line==f.line)r+=b[b.length-1].length-
(f.ch-(f.line==e.line?e.ch:0));return{line:p,ch:r}}e=Ka(e);f=f?Ka(f):e;b=W(b);var k;ea(b,e,f,function(m){k=m;return{from:i(N.from),to:i(N.to)}});return k}function G(b,e){ea(W(b),N.from,N.to,function(f){return e=="end"?{from:f,to:f}:e=="start"?{from:N.from,to:N.from}:{from:N.from,to:f}})}function ea(b,e,f,i){i=i({line:e.line+b.length-1,ch:b.length==1?b[0].length+e.ch:b[b.length-1].length});ja(e,f,b,i.from,i.to)}function aa(b,e){var f=b.line,i=e.line;if(f==i)return V[f].text.slice(b.ch,e.ch);var k=
[V[f].text.slice(b.ch)];for(f=f+1;f<i;++f)k.push(V[f].text);k.push(V[i].text.slice(0,e.ch));return k.join("\n")}function ha(){return aa(N.from,N.to)}function sa(){Pb||ac.set(2E3,function(){Yb();La();Wa&&sa();Zb()})}function ta(b){function e(){Yb();var i=La();if(i=="moved"&&b)Oa[b]=true;if(!i&&!f){f=true;ac.set(80,e)}else{Pb=false;sa()}Zb()}var f=false;Pb=true;ac.set(20,e)}function La(){function b(Ba,Ca){for(var n=0;;){var s=f.indexOf("\n",n);if(s==-1||(f.charAt(s-1)=="\r"?s-1:s)>=Ba)return{line:Ca,
ch:Ba-n};++Ca;n=s+1}}if(!Xa){var e=false,f=Ea.value,i=O(Ea);if(!i)return false;e=Pa.text!=f;var k=ub,m=e||i.start!=Pa.start||i.end!=(k?Pa.start:Pa.end);if(!m&&!k)return false;if(e){hb=ub=null;if(la.readOnly){bb=true;return"changed"}}var p=b(i.start,Pa.from),r=b(i.end,Pa.from);if(k){p=i.start==k.anchor?r:p;r=hb?N.to:i.start==k.anchor?p:r;if(!l(p,r)){ub=null;N.inverted=false;k=p;p=r;r=k}}if(p.line==r.line&&p.line==N.from.line&&p.line==N.to.line&&!hb)bb=false;if(e){k=0;for(var w=f.length,B=Math.min(w,
Pa.text.length),P,ba=Pa.from,ka=-1;k<B&&(P=f.charAt(k))==Pa.text.charAt(k);){++k;if(P=="\n"){ba++;ka=k}}B=ka>-1?k-ka:k;for(var Ia=Pa.to-1,za=Pa.text.length;;){P=Pa.text.charAt(za);P=="\n"&&Ia--;if(f.charAt(w)!=P){++w;++za;break}if(za<=k||w<=k)break;--w;--za}ka=Pa.text.lastIndexOf("\n",za-1);ja({line:ba,ch:B},{line:Ia,ch:ka==-1?za:za-ka-1},W(f.slice(k,w)),p,r);if(ba!=Ia||p.line!=ba)bb=true}else xb(p,r);Pa.text=f;Pa.start=i.start;Pa.end=i.end;return e?"changed":m?"moved":false}}function gb(){for(var b=
[],e=Math.max(0,N.from.line-1),f=Math.min(V.length,N.to.line+2),i=e;i<f;++i)b.push(V[i].text);b=Ea.value=b.join(fa);var k=N.from.ch,m=N.to.ch;for(i=e;i<N.from.line;++i)k+=fa.length+V[i].text.length;for(i=e;i<N.to.line;++i)m+=fa.length+V[i].text.length;Pa={text:b,from:e,to:f,start:k,end:m};U(Ea,k,ub?k:m)}function kb(){la.readOnly!="nocursor"&&Ea.focus()}function Fb(){var b=Wb(N.inverted?N.from:N.to);return Rb(b.x,b.y,b.x,b.yBot)}function Rb(b,e,f,i){var k=Ya.offsetLeft,m=Ya.offsetTop,p=ab();e+=m;i+=
m;b+=k;f+=k;var r=va.clientHeight,w=va.scrollTop;k=false;m=true;if(e<w){va.scrollTop=Math.max(0,e-2*p);k=true}else if(i>w+r){va.scrollTop=i+p-r;k=true}e=va.clientWidth;i=va.scrollLeft;if(b<i){va.scrollLeft=Math.max(0,b-10);k=true}else if(f>e+i){va.scrollLeft=f+10-e;k=true;if(f>Ab.clientWidth)m=false}k&&la.onScroll&&la.onScroll($a);return m}function Sb(){var b=ab(),e=va.scrollTop-Ya.offsetTop;return{from:Math.min(V.length,Math.max(0,Math.floor(e/b))),to:Math.min(V.length,Math.ceil((e+va.clientHeight)/
b))}}function lb(b){if(va.clientWidth){for(var e=b===true?[]:[{from:Ha,to:ib,domStart:0}],f=0,i=b.length||0;f<i;++f){for(var k=b[f],m=[],p=k.diff||0,r=0,w=e.length;r<w;++r){var B=e[r];if(k.to<=B.from)m.push({from:B.from+p,to:B.to+p,domStart:B.domStart});else if(B.to<=k.from)m.push(B);else{k.from>B.from&&m.push({from:B.from,to:k.from,domStart:B.domStart});k.to<B.to&&m.push({from:k.to+p,to:B.to+p,domStart:B.domStart+(k.to-B.from)})}}e=m}p=Sb();k=Math.min(Ha,Math.max(p.from-3,0));m=Math.min(V.length,
Math.max(ib,p.to+3));b=[];r=0;w=ib-Ha;var P=k,ba=0;f=0;for(i=e.length;f<i;++f){B=e[f];if(!(B.to<=k)){if(B.from>=m)break;if(B.domStart>r||B.from>P){b.push({from:P,to:B.from,domSize:B.domStart-r,domStart:r});ba+=B.from-P}P=B.to;r=B.domStart+(B.to-B.from)}}if(r!=w||P!=m){ba+=Math.abs(m-P);b.push({from:P,to:m,domSize:w-r,domStart:r})}if(b.length){Qa.style.display="none";if(ba>(p.to-p.from)*0.3){B=k=Math.max(p.from-10,0);e=m=Math.min(p.to+7,V.length);f=[];i={line:B,ch:0};i=l(N.from,i)&&!l(N.to,i);for(B=
B;B<e;++B){r=p=null;if(i){p=0;if(N.to.line==B){i=false;r=N.to.ch}}else if(N.from.line==B)if(N.to.line==B){p=N.from.ch;r=N.to.ch}else{i=true;p=N.from.ch}f.push(V[B].getHTML(p,r,true))}Qa.innerHTML=f.join("")}else{e=N.from.line;f=N.to.line;i=0;B=na&&mb.createElement("div");p=0;for(r=b.length;p<r;++p){w=b[p];P=w.to-w.from-w.domSize;ba=Qa.childNodes[w.domStart+w.domSize+i]||null;if(na)for(var ka=Math.max(-P,w.domSize);ka>0;--ka)Qa.removeChild(ba?ba.previousSibling:Qa.lastChild);else if(P){for(ka=Math.max(0,
P);ka>0;--ka)Qa.insertBefore(mb.createElement("pre"),ba);for(ka=Math.max(0,-P);ka>0;--ka)Qa.removeChild(ba?ba.previousSibling:Qa.lastChild)}var Ia=Qa.childNodes[w.domStart+i],za=e<w.from&&f>=w.from;for(ka=w.from;ka<w.to;++ka){var Ba=null,Ca=null;if(za){Ba=0;if(f==ka){za=false;Ca=N.to.ch}}else if(e==ka)if(f==ka){Ba=N.from.ch;Ca=N.to.ch}else{za=true;Ba=N.from.ch}if(na){B.innerHTML=V[ka].getHTML(Ba,Ca,true);Qa.insertBefore(B.firstChild,ba)}else{Ia.innerHTML=V[ka].getHTML(Ba,Ca,false);Ia.className=V[ka].className||
"";Ia=Ia.nextSibling}}i+=P}}Qa.style.display="";e=k!=Ha||m!=ib||kc!=va.clientHeight;Ha=k;ib=m;Lb.style.top=k*ab()+"px";if(e){kc=va.clientHeight;Ab.style.height=V.length*ab()+2*Ya.offsetTop+"px";Gb()}k=Jb(Eb);Ya.style.width=k>va.clientWidth?k+"px":"";if(Qa.childNodes.length!=ib-Ha)throw new Error("BAD PATCH! "+JSON.stringify(b)+" size="+(ib-Ha)+" nodes="+Qa.childNodes.length);Hb()}}else Ha=ib=0}function Gb(){if(la.gutter||la.lineNumbers){var b=Lb.offsetHeight,e=va.clientHeight;nb.style.height=(b-e<
2?e:b)+"px";b=[];for(e=Ha;e<ib;++e){var f=V[e].gutterMarker,i=la.lineNumbers?e+la.firstLineNumber:null;if(f&&f.text)i=f.text.replace("%N%",i!=null?i:"");else if(i==null)i="\u00a0";b.push(f&&f.style?'<pre class="'+f.style+'">':"<pre>",i,"</pre>")}nb.style.display="none";Mb.innerHTML=b.join("");b=String(V.length).length;e=Mb.firstChild;f=e.textContent||e.innerText||e.nodeValue||"";for(i="";f.length+i.length<b;)i+="\u00a0";i&&e.insertBefore(mb.createTextNode(i),e.firstChild);nb.style.display="";Ya.style.marginLeft=
nb.offsetWidth+"px"}}function Hb(){var b=N.inverted?N.from:N.to,e=Ub(b.line,b.ch)+"px";b=(b.line-Ha)*ab()+"px";$b.style.top=b;if(oa(N.from,N.to)){ob.style.top=b;ob.style.left=e;ob.style.display=""}else ob.style.display="none"}function rb(b,e){var f=hb&&Ka(hb);if(f)if(l(f,b))b=f;else if(l(e,f))e=f;xb(b,e)}function xb(b,e,f,i){if(!(oa(N.from,b)&&oa(N.to,e))){if(l(e,b)){var k=e;e=b;b=k}k=oa(N.to,e);var m=oa(N.from,b);if(oa(b,e))N.inverted=false;else if(k&&!m)N.inverted=true;else if(m&&!k)N.inverted=
false;if(f==null){f=N.from.line;i=N.to.line}if(oa(b,e))oa(N.from,N.to)||Ua.push({from:f,to:i+1});else if(oa(N.from,N.to))Ua.push({from:b.line,to:e.line+1});else{oa(b,N.from)||(b.line<f?Ua.push({from:b.line,to:Math.min(e.line,f)+1}):Ua.push({from:f,to:Math.min(i,b.line)+1}));oa(e,N.to)||(e.line<i?Ua.push({from:Math.max(f,b.line),to:i+1}):Ua.push({from:Math.max(b.line,i),to:e.line+1}))}N.from=b;N.to=e;db=true}}function yb(b,e,f){b=Ka({line:b,ch:e||0});(f?rb:xb)(b,b)}function zb(b){return Math.max(0,
Math.min(b,V.length-1))}function Ka(b){if(b.line<0)return{line:0,ch:0};if(b.line>=V.length)return{line:V.length-1,ch:V[V.length-1].text.length};var e=b.ch,f=V[b.line].text.length;return e==null||e>f?{line:b.line,ch:f}:e<0?{line:b.line,ch:0}:b}function lc(b){rb({line:b,ch:0},{line:b,ch:V[b].text.length})}function sb(b,e){if(e=="smart")if(Ta.indent)var f=hc(b);else e="prev";var i=V[b],k=i.indentation(),m=i.text.match(/^\s*/)[0],p;if(e=="prev")p=b?V[b-1].indentation():0;else if(e=="smart")p=Ta.indent(f,
i.text.slice(m.length));else if(e=="add")p=k+la.indentUnit;else if(e=="subtract")p=k-la.indentUnit;p=Math.max(0,p);if(p-k){k="";f=0;if(la.indentWithTabs)for(i=Math.floor(p/ga);i;--i){f+=ga;k+="\t"}for(;f<p;){++f;k+=" "}}else{if(N.from.line!=b&&N.to.line!=b)return;k=m}Na(k,{line:b,ch:0},{line:b,ch:m.length})}function ec(){Ta=g.getMode(la,la.mode);for(var b=0,e=V.length;b<e;++b)V[b].stateAfter=null;cb=[0];Kb()}function Tb(b,e,f){function i(r,w,B,P){r=V[r];w=r.addMark(w,B,P);w.line=r;k.push(w)}b=Ka(b);
e=Ka(e);var k=[];if(b.line==e.line)i(b.line,b.ch,e.ch,f);else{i(b.line,b.ch,null,f);for(var m=b.line+1,p=e.line;m<p;++m)i(m,0,null,f);i(e.line,0,e.ch,f)}Ua.push({from:b.line,to:e.line+1});return function(){for(var r,w,B=0;B<k.length;++B){var P=k[B],ba=x(V,P.line);P.line.removeMark(P);if(ba>-1){if(r==null)r=ba;w=ba}}r!=null&&Ua.push({from:r,to:w+1})}}function Jb(b){eb.innerHTML="<pre><span>x</span></pre>";eb.firstChild.firstChild.firstChild.nodeValue=b;return eb.firstChild.firstChild.offsetWidth||
10}function Ub(b,e){if(e==0)return 0;eb.innerHTML="<pre><span>"+V[b].getHTML(null,null,false,e)+"</span></pre>";return eb.firstChild.firstChild.offsetWidth}function Vb(b,e){function f(P){eb.innerHTML="<pre><span>"+i.getHTML(null,null,false,P)+"</span></pre>";return eb.firstChild.firstChild.offsetWidth}if(e<=0)return 0;for(var i=V[b],k=0,m=0,p=i.text.length,r,w=Math.min(p,Math.ceil(e/Jb("x")));;){var B=f(w);if(B<=e&&w<p)w=Math.min(p,Math.ceil(w*1.2));else{r=B;p=w;break}}if(e>r)return p;w=Math.floor(p*
0.8);B=f(w);if(B<e){k=w;m=B}for(;;){if(p-k<=1)return r-e>e-m?k:p;w=Math.ceil((k+p)/2);B=f(w);if(B>e){p=w;r=B}else{k=w;m=B}}}function Wb(b,e){var f=ab(),i=b.line-(e?Ha:0);return{x:Ub(b.line,b.ch),y:i*f,yBot:(i+1)*f}}function fc(b){b=Wb(b,true);var e=pa(Ya);return{x:e.left+b.x,y:e.top+b.y,yBot:e.top+b.yBot}}function ab(){var b=Qa.childNodes.length;if(b)return Qa.offsetHeight/b||1;eb.innerHTML="<pre>x</pre>";return eb.firstChild.offsetHeight||1}function tb(b,e){var f=pa(va,true),i=b.e.clientX,k=b.e.clientY;
if(!e&&(i-f.left>va.clientWidth||k-f.top>va.clientHeight))return null;f=pa(Ya,true);k=Ha+Math.floor((k-f.top)/ab());return Ka({line:k,ch:Vb(zb(k),i-f.left)})}function gc(b){function e(){Ea.value!=k&&ya(G)(Ea.value,"end");Ea.style.cssText=i;Xa=false;gb();sa()}var f=tb(b);if(!(!f||window.opera)){if(oa(N.from,N.to)||l(f,N.from)||!l(f,N.to))yb(f.line,f.ch);var i=Ea.style.cssText;Ea.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.pageY()-1)+"px; left: "+(b.pageX()-1)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden;";
var k=Ea.value=ha();kb();U(Ea,0,Ea.value.length);Xa=true;if(S){b.stop();var m=Q(window,"mouseup",function(){m();setTimeout(e,20)},true)}else setTimeout(e,50)}}function dc(){clearInterval(bc);var b=true;ob.style.visibility="";bc=setInterval(function(){ob.style.visibility=(b=!b)?"":"hidden"},650)}function Va(b){function e(Ca,n,s){if(Ca.text){var F=Ca.styles;Ca=p?0:Ca.text.length-1;for(var H,C=p?0:F.length-2,I=p?F.length:-2;C!=I;C+=2*r){var T=F[C];if(F[C+1]!=null&&F[C+1]!=ba)Ca+=r*T.length;else for(var Z=
p?0:T.length-1,ra=p?T.length:-1;Z!=ra;Z+=r,Ca+=r)if(Ca>=n&&Ca<s&&Ia.test(H=T.charAt(Z))){var Ma=a[H];if(Ma.charAt(1)==">"==p)ka.push(H);else if(ka.pop()!=Ma.charAt(0))return{pos:Ca,match:false};else if(!ka.length)return{pos:Ca,match:true}}}}}var f=N.inverted?N.from:N.to,i=V[f.line],k=f.ch-1,m=k>=0&&a[i.text.charAt(k)]||a[i.text.charAt(++k)];if(m){m.charAt(0);var p=m.charAt(1)==">",r=p?1:-1,w=i.styles,B=k+1;m=0;for(var P=w.length;m<P;m+=2)if((B-=w[m].length)<=0){var ba=w[m+1];break}var ka=[i.text.charAt(k)],
Ia=/[(){}[\]]/;m=f.line;for(P=p?Math.min(m+50,V.length):Math.max(-1,m-50);m!=P;m+=r){i=V[m];w=m==f.line;if(i=e(i,w&&p?k+1:0,w&&!p?k:i.text.length)){ba=i.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var za=Tb({line:f.line,ch:k},{line:f.line,ch:k+1},ba),Ba=Tb({line:m,ch:i.pos},{line:m,ch:i.pos+1},ba);f=ya(function(){za();Ba()});if(b)setTimeout(f,800);else qb=f;break}}}}function Xb(b){for(var e,f,i=b;i>b-40;--i){if(i==0)return 0;var k=V[i-1];if(k.stateAfter)return i;k=k.indentation();
if(f==null||e>k){f=i;e=k}}return f}function hc(b){var e=Xb(b),f=e&&V[e-1].stateAfter;f=f?h(Ta,f):j(Ta);for(e=e;e<b;++e){var i=V[e];i.highlight(Ta,f);i.stateAfter=h(Ta,f)}V[b].stateAfter||cb.push(b);return f}function mc(){for(var b=+new Date+la.workTime,e=false;cb.length;){var f=V[Ha].stateAfter?cb.pop():Ha;if(!(f>=V.length)){e=true;var i=Xb(f),k=i&&V[i-1].stateAfter;k=k?h(Ta,k):j(Ta);i=i;for(var m=V.length;i<m;++i){var p=V[i],r=p.stateAfter;if(+new Date>b){cb.push(i);Kb(la.workDelay);Ua.push({from:f,
to:i});return}var w=p.highlight(Ta,k);p.stateAfter=h(Ta,k);if(r&&!w&&p.text)break}Ua.push({from:f,to:i})}}e&&la.onHighlightComplete&&la.onHighlightComplete($a)}function Kb(b){cb.length&&cc.set(b,ya(mc))}function Yb(){bb=null;Ua=[];pb=db=false}function Zb(){var b=false;if(db)b=!Fb();if(Ua.length)lb(Ua);else db&&Hb();b&&Fb();db&&dc();if(!Xa&&(bb===true||bb!==false&&db))gb();db&&la.matchBrackets&&setTimeout(ya(function(){if(qb){qb();qb=null}Va(false)}),20);b=pb;db&&la.onCursorActivity&&la.onCursorActivity($a);
b&&la.onChange&&$a&&la.onChange($a,b)}function ya(b){return function(){d++||Yb();try{var e=b.apply(this,arguments)}finally{--d||Zb()}return e}}function ic(b,e,f){this.atOccurrence=false;if(f==null)f=typeof b=="string"&&b==b.toLowerCase();e=e&&typeof e=="object"?Ka(e):{line:0,ch:0};this.pos={from:e,to:e};if(typeof b!="string")this.matches=function(m,p){if(m)for(var r=V[p.line].text.slice(0,p.ch),w=r.match(b),B=0;w;){var P=r.indexOf(w[0]);B+=P;r=r.slice(P+1);if(P=r.match(b))w=P;else break;B++}else{r=
V[p.line].text.slice(p.ch);B=(w=r.match(b))&&p.ch+r.indexOf(w[0])}if(w)return{from:{line:p.line,ch:B},to:{line:p.line,ch:B+w[0].length},match:w}};else{if(f)b=b.toLowerCase();var i=f?function(m){return m.toLowerCase()}:function(m){return m},k=b.split("\n");this.matches=k.length==1?function(m,p){var r=i(V[p.line].text),w=b.length,B;if(m?p.ch>=w&&(B=r.lastIndexOf(b,p.ch-w))!=-1:(B=r.indexOf(b,p.ch))!=-1)return{from:{line:p.line,ch:B},to:{line:p.line,ch:B+w}}}:function(m,p){var r=p.line,w=m?k.length-
1:0,B=k[w],P=i(V[r].text),ba=m?P.indexOf(B)+B.length:P.lastIndexOf(B);if(!(m?ba>=p.ch||ba!=B.length:ba<=p.ch||ba!=P.length-B.length))for(;;){if(m?!r:r==V.length-1)return;P=i(V[r+=m?-1:1].text);B=k[m?--w:++w];if(w>0&&w<k.length-1)if(P!=B)return;else continue;w=m?P.lastIndexOf(B):P.indexOf(B)+B.length;if(m?w!=P.length-B.length:w!=B.length)return;B={line:p.line,ch:ba};r={line:r,ch:w};return{from:m?r:B,to:m?B:r}}}}}var la={},Qb=g.defaults;for(var fb in Qb)if(Qb.hasOwnProperty(fb))la[fb]=(A&&A.hasOwnProperty(fb)?
A:Qb)[fb];var mb=la.document,va=mb.createElement("div");va.className="CodeMirror";if(window.ActiveXObject&&/MSIE [1-7]\b/.test(navigator.userAgent))va.style.position="relative";va.innerHTML='<div style="position: relative"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"></div><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div style="overflow: hidden; position: absolute; width: 1px; height: 0; left: 0"><textarea style="position: absolute; width: 100000px;" wrap="off"></textarea></div><div class="CodeMirror-lines"><div style="position: relative"><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div>';
c.appendChild?c.appendChild(va):c(va);var Ab=va.firstChild,eb=Ab.firstChild,Lb=eb.nextSibling,nb=Lb.firstChild,Mb=nb.firstChild,$b=nb.nextSibling,Ea=$b.firstChild,Ya=$b.nextSibling.firstChild,ob=Ya.firstChild,Qa=ob.nextSibling;if(la.tabindex!=null)Ea.tabindex=la.tabindex;if(!la.gutter&&!la.lineNumbers)nb.style.display="none";var ac=new X,cc=new X,bc,Ta,V=[new u("")],cb,Za=new z,Wa;ec();var N={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false},hb,ub,Db,bb,Ua,pb,db,Xa,Ha=0,ib=0,kc=0,jb=null,Pa,qb,
Eb="";ya(function(){L(la.value||"");bb=false})();setTimeout(gb,20);Q(va,"mousedown",ya(function(b){function e(B){var P=tb(B,true);if(P&&!oa(P,m)){Wa||M();m=P;rb(k,P);bb=false;var ba=Sb();if(P.line>=ba.to||P.line<ba.from)p=setTimeout(ya(function(){e(B)}),150)}}var f=Db;Db=null;for(var i=b.target();i!=va;i=i.parentNode)if(i.parentNode==Mb){la.onGutterClick&&la.onGutterClick($a,x(Mb.childNodes,i)+Ha);return b.stop()}S&&b.button()==3&&gc(b);if(b.button()==1){var k=tb(b),m=k,p;if(k){Wa||M();b.stop();if(f&&
+new Date-f<400)return lc(k.line);yb(k.line,k.ch,true);var r=Q(mb,"mousemove",ya(function(B){clearTimeout(p);B.stop();e(B)}),true),w=Q(mb,"mouseup",ya(function(B){clearTimeout(p);var P=tb(B);P&&rb(k,P);B.stop();kb();bb=true;r();w()}),true)}else b.target()==va&&b.stop()}}));S||Q(va,"contextmenu",ya(gc));Q(Ab,"dblclick",ya(function(b){var e=tb(b);if(e){for(var f=V[e.line].text,i=e.ch,k=e.ch;i>0&&/\w/.test(f.charAt(i-1));)--i;for(;k<f.length&&/\w/.test(f.charAt(k));)++k;rb({line:e.line,ch:i},{line:e.line,
ch:k});b.stop();Db=+new Date}}));Q(va,"scroll",function(){lb([]);la.onScroll&&la.onScroll($a)});Q(window,"resize",function(){lb(true)});Q(Ea,"keyup",ya(function(b){if(!(la.onKeyEvent&&la.onKeyEvent($a,E(b.e)))){if(ub){ub=null;bb=true}if(b.e.keyCode==16)hb=null}}));Q(Ea,"keydown",ya(function(b){Wa||M();var e=b.e.keyCode,f=(xa?b.e.metaKey:b.e.ctrlKey)&&!b.e.altKey,i=b.e.ctrlKey||b.e.altKey||b.e.metaKey;hb=e==16||b.e.shiftKey?hb||(N.inverted?N.to:N.from):null;if(!(la.onKeyEvent&&la.onKeyEvent($a,E(b.e)))){if(e==
33||e==34){e=e==34;f=Math.floor(va.clientHeight/ab());i=N.inverted?N.from:N.to;yb(i.line+Math.max(f-1,1)*(e?1:-1),i.ch,true);return b.stop()}if(f&&(e==36||e==35||xa&&(e==38||e==40))){yb(e==36||e==38?0:V.length-1,true);return b.stop()}if(f&&e==65){e=V.length-1;xb({line:0,ch:0},{line:e,ch:V[e].text.length});return b.stop()}if(!la.readOnly){if(!i&&e==13)return;if(i=!i){if(i=e==9)a:{i=b.e.shiftKey;hb=null;switch(la.tabMode){case "default":i=false;break a;case "indent":for(var k=N.from.line,m=N.to.line;k<=
m;++k)sb(k,"smart");break;case "classic":if(oa(N.from,N.to)){i?sb(N.from.line,"smart"):G("\t","end");break}case "shift":k=N.from.line;for(m=N.to.line;k<=m;++k)sb(k,i?"subtract":"add");break}i=true}i=i}if(i)return b.stop();if(f&&e==90){wa();return b.stop()}if(f&&(b.e.shiftKey&&e==90||e==89)){Ga();return b.stop()}}jb=(f?"c":"")+e;if(N.inverted&&Oa.hasOwnProperty(jb))if(b=O(Ea)){ub={anchor:b.start};U(Ea,b.start,b.start)}ta(jb)}}));Q(Ea,"keypress",ya(function(b){if(!(la.onKeyEvent&&la.onKeyEvent($a,E(b.e)))){if(la.electricChars&&
Ta.electricChars){var e=String.fromCharCode(b.e.charCode==null?b.e.keyCode:b.e.charCode);Ta.electricChars.indexOf(e)>-1&&setTimeout(ya(function(){sb(N.to.line,"smart")}),50)}e=b.e.keyCode;if(e==13){if(!la.readOnly){G("\n","end");if(la.enterMode!="flat")sb(N.from.line,la.enterMode=="keep"?"prev":"smart")}b.stop()}else!b.e.ctrlKey&&!b.e.altKey&&!b.e.metaKey&&e==9&&la.tabMode!="default"?b.stop():ta(jb)}}));Q(Ea,"focus",M);Q(Ea,"blur",R);Q(va,"dragenter",function(b){b.stop()});Q(va,"dragover",function(b){b.stop()});
Q(va,"drop",ya(function(b){var e=tb(b,true),f=b.e.dataTransfer.files;if(!(!e||la.readOnly))if(f&&f.length&&window.FileReader&&window.File){var i=f.length,k=Array(i),m=0;for(b=0;b<i;++b)p(f[b],b);var p=function(w,B){var P=new FileReader;P.onload=function(){k[B]=P.result;++m==i&&Na(k.join(""),Ka(e),Ka(e))};P.readAsText(w)}}else try{(k=b.e.dataTransfer.getData("Text"))&&Na(k,e,e)}catch(r){}}));Q(va,"paste",function(){kb();ta()});Q(Ea,"paste",function(){ta()});Q(Ea,"cut",function(){ta()});mb.activeElement==
Ea?M():R();var $a={getValue:function(){for(var b=[],e=0,f=V.length;e<f;++e)b.push(V[e].text);return b.join("\n")},setValue:ya(L),getSelection:ha,replaceSelection:ya(G),focus:function(){kb();M();ta()},setOption:function(b,e){la[b]=e;if(b=="lineNumbers"||b=="gutter"){var f=la.gutter||la.lineNumbers;nb.style.display=f?"":"none";if(f)Gb();else Qa.parentNode.style.marginLeft=0}else if(b=="mode"||b=="indentUnit")ec();else b=="readOnly"&&e=="nocursor"&&Ea.blur()},getOption:function(b){return la[b]},undo:ya(wa),
redo:ya(Ga),indentLine:ya(function(b){b>=0&&b<V.length&&sb(b,"smart")}),historySize:function(){return{undo:Za.done.length,redo:Za.undone.length}},matchBrackets:ya(function(){Va(true)}),getTokenAt:function(b){b=Ka(b);return V[b.line].getTokenAt(Ta,hc(b.line),b.ch)},cursorCoords:function(b){if(b==null)b=N.inverted;return fc(b?N.from:N.to)},charCoords:function(b){return fc(Ka(b))},coordsChar:function(b){var e=pa(Ya),f=zb(Math.min(V.length-1,Ha+Math.floor((b.y-e.top)/ab())));return Ka({line:f,ch:Vb(zb(f),
b.x-e.left)})},getSearchCursor:function(b,e,f){return new ic(b,e,f)},markText:ya(function(b,e,f){return ya(Tb(b,e,f))}),setMarker:function(b,e,f){if(typeof b=="number")b=V[zb(b)];b.gutterMarker={text:e,style:f};Gb();return b},clearMarker:function(b){if(typeof b=="number")b=V[zb(b)];b.gutterMarker=null;Gb()},setLineClass:ya(function(b,e){if(typeof b=="number"){var f=b;b=V[zb(b)]}else{f=x(V,b);if(f==-1)return null}if(b.className!=e){b.className=e;Ua.push({from:f,to:f+1})}return b}),lineInfo:function(b){if(typeof b==
"number"){var e=b;b=V[b];if(!b)return null}else{e=x(V,b);if(e==-1)return null}var f=b.gutterMarker;return{line:e,text:b.text,markerText:f&&f.text,markerClass:f&&f.style}},addWidget:function(b,e,f){b=Wb(Ka(b),true);e.style.top=Ha*ab()+b.yBot+Ya.offsetTop+"px";e.style.left=b.x+Ya.offsetLeft+"px";Ab.appendChild(e);f&&Rb(b.x,b.yBot,b.x+e.offsetWidth,b.yBot+e.offsetHeight)},lineCount:function(){return V.length},getCursor:function(b){if(b==null)b=N.inverted;return{line:(b?N.from:N.to).line,ch:(b?N.from:
N.to).ch}},somethingSelected:function(){return!oa(N.from,N.to)},setCursor:ya(function(b,e){e==null&&typeof b.line=="number"?yb(b.line,b.ch):yb(b,e)}),setSelection:ya(function(b,e){xb(Ka(b),Ka(e||b))}),getLine:function(b){if(b>=0&&b<V.length)return V[b].text},setLine:ya(function(b,e){b>=0&&b<V.length&&Na(e,{line:b,ch:0},{line:b,ch:V[b].text.length})}),removeLine:ya(function(b){b>=0&&b<V.length&&Na("",{line:b,ch:0},Ka({line:b+1,ch:0}))}),replaceRange:ya(Na),getRange:function(b,e){return aa(Ka(b),Ka(e))},
operation:function(b){return ya(b)()},refresh:function(){lb(true)},getInputField:function(){return Ea},getWrapperElement:function(){return va}},Pb=false,a={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},d=0;ic.prototype={findNext:function(){return this.find(false)},findPrevious:function(){return this.find(true)},find:function(b){function e(k){k={line:k,ch:0};f.pos={from:k,to:k};return f.atOccurrence=false}for(var f=this,i=Ka(b?this.pos.from:this.pos.to);;){if(this.pos=this.matches(b,i)){this.atOccurrence=
true;return this.pos.match||true}if(b){if(!i.line)return e(0);i={line:i.line-1,ch:V[i.line-1].text.length}}else{if(i.line==V.length-1)return e(V.length);i={line:i.line+1,ch:0}}}},from:function(){if(this.atOccurrence)return{line:this.pos.from.line,ch:this.pos.from.ch}},to:function(){if(this.atOccurrence)return{line:this.pos.to.line,ch:this.pos.to.ch}}};return $a}function h(c,A){if(A===true)return A;if(c.copyState)return c.copyState(A);var L={};for(var M in A){var R=A[M];if(R instanceof Array)R=R.concat([]);
L[M]=R}return L}function j(c,A,L){return c.startState?c.startState(A,L):true}function o(c){this.pos=this.start=0;this.string=c}function u(c,A){this.styles=A||[c,null];this.stateAfter=null;this.text=c;this.marked=this.gutterMarker=this.className=null}function t(c,A,L,M){for(var R=0,ja=0,ia=0;ja<A;R+=2){var wa=L[R],Ga=ja+wa.length;if(ia==0){Ga>c&&M.push(wa.slice(c-ja,Math.min(wa.length,A-ja)),L[R+1]);if(Ga>=c)ia=1}else if(ia==1)Ga>A?M.push(wa.slice(0,A-ja),L[R+1]):M.push(wa,L[R+1]);ja=Ga}}function z(){this.time=
0;this.done=[];this.undone=[]}function K(){if(this.preventDefault){this.preventDefault();this.stopPropagation()}else{this.returnValue=false;this.cancelBubble=true}}function E(c){if(!c.stop)c.stop=K;return c}function y(c){this.e=c}function Q(c,A,L,M){function R(ja){L(new y(ja||window.event))}if(typeof c.addEventListener=="function"){c.addEventListener(A,R,false);if(M)return function(){c.removeEventListener(A,R,false)}}else{c.attachEvent("on"+A,R);if(M)return function(){c.detachEvent("on"+A,R)}}}function X(){this.id=
null}function ma(c,A){if(A==null){A=c.search(/[^\s\u00a0]/);if(A==-1)A=c.length}for(var L=0,M=0;L<A;++L)if(c.charAt(L)=="\t")M+=ga-M%ga;else++M;return M}function pa(c,A){for(var L=c.ownerDocument.body,M=0,R=0,ja=false,ia=c;ia;ia=ia.offsetParent){M+=ia.offsetLeft;R+=ia.offsetTop;if(ia==L)ja=true}for(ia=c.parentNode;ia!=(A&&ja?null:L);ia=ia.parentNode)if(ia.scrollLeft!=null){M-=ia.scrollLeft;R-=ia.scrollTop}return{left:M,top:R}}function oa(c,A){return c.line==A.line&&c.ch==A.ch}function l(c,A){return c.line<
A.line||c.line==A.line&&c.ch<A.ch}function q(c){return c.replace(/[<>&]/g,function(A){return A=="&"?"&amp;":A=="<"?"&lt;":"&gt;"})}function x(c,A){if(c.indexOf)return c.indexOf(A);for(var L=0,M=c.length;L<M;++L)if(c[L]==A)return L;return-1}g.defaults={value:"",mode:null,indentUnit:2,indentWithTabs:false,tabMode:"classic",enterMode:"indent",electricChars:true,onKeyEvent:null,lineNumbers:false,gutter:false,firstLineNumber:1,readOnly:false,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,
onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,workTime:100,workDelay:200,undoDepth:40,tabindex:null,document:window.document};var D={},ca={};g.defineMode=function(c,A){if(!g.defaults.mode&&c!="null")g.defaults.mode=c;D[c]=A};g.defineMIME=function(c,A){ca[c]=A};g.getMode=function(c,A){if(typeof A=="string"&&ca.hasOwnProperty(A))A=ca[A];if(typeof A=="string")var L=A,M={};else if(A!=null){L=A.name;M=A}var R=D[L];if(!R){window.console&&console.warn("No mode "+L+" found, falling back to plain text.");
return g.getMode(c,"text/plain")}return R(c,M||{})};g.listModes=function(){var c=[];for(var A in D)D.propertyIsEnumerable(A)&&c.push(A);return c};g.listMIMEs=function(){var c=[];for(var A in ca)ca.propertyIsEnumerable(A)&&c.push(A);return c};g.fromTextArea=function(c,A){function L(){c.value=ia.getValue()}A||(A={});A.value=c.value;if(!A.tabindex&&c.tabindex)A.tabindex=c.tabindex;if(c.form){var M=Q(c.form,"submit",L,true);if(typeof c.form.submit=="function"){var R=c.form.submit,ja=function(){L();c.form.submit=
R;c.form.submit();c.form.submit=ja};c.form.submit=ja}}c.style.display="none";var ia=g(function(wa){c.parentNode.insertBefore(wa,c.nextSibling)},A);ia.save=L;ia.toTextArea=function(){L();c.parentNode.removeChild(ia.getWrapperElement());c.style.display="";if(c.form){M();if(typeof c.form.submit=="function")c.form.submit=R}};return ia};g.startState=j;g.copyState=h;o.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},
next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(c){var A=this.string.charAt(this.pos);if(typeof c=="string"?A==c:A&&(c.test?c.test(A):c(A))){++this.pos;return A}},eatWhile:function(c){for(var A=this.start;this.eat(c););return this.pos>A},eatSpace:function(){for(var c=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>c},skipToEnd:function(){this.pos=this.string.length},skipTo:function(c){c=this.string.indexOf(c,this.pos);
if(c>-1){this.pos=c;return true}},backUp:function(c){this.pos-=c},column:function(){return ma(this.string,this.start)},indentation:function(){return ma(this.string)},match:function(c,A,L){if(typeof c=="string"){if((L?this.string.toLowerCase():this.string).indexOf(L?c.toLowerCase():c,this.pos)==this.pos){if(A!==false)this.pos+=c.length;return true}}else{if((c=this.string.slice(this.pos).match(c))&&A!==false)this.pos+=c[0].length;return c}},current:function(){return this.string.slice(this.start,this.pos)}};
u.prototype={replace:function(c,A,L){var M=[],R=this.marked;t(0,c,this.styles,M);L&&M.push(L,null);t(A,this.text.length,this.styles,M);this.styles=M;this.text=this.text.slice(0,c)+L+this.text.slice(A);this.stateAfter=null;if(R){c=L.length-(A-c);L=this.text.length;for(M=0;M<R.length;++M){var ja=R[M],ia=false;if(ja.from>=L)ia=true;else{ja.from=ja.from<=Math.min(A,A+c)?ja.from:ja.from+c;if(ja.to!=null)ja.to=ja.to<=Math.min(A,A+c)?ja.to:ja.to+c}if(ia||ja.from>=ja.to){R.splice(M,1);M--}}}},split:function(c,
A){var L=[A,null];t(c,this.text.length,this.styles,L);return new u(A+this.text.slice(c),L)},addMark:function(c,A,L){c={from:c,to:A,style:L};if(this.marked==null)this.marked=[];this.marked.push(c);this.marked.sort(function(M,R){return M.from-R.from});return c},removeMark:function(c){var A=this.marked;if(A)for(var L=0;L<A.length;++L)if(A[L]==c){A.splice(L,1);break}},highlight:function(c,A){var L=new o(this.text),M=this.styles,R=0,ja=false,ia=M[0],wa;for(this.text==""&&c.blankLine&&c.blankLine(A);!L.eol();){var Ga=
c.token(L,A),ua=this.text.slice(L.start,L.pos);L.start=L.pos;if(R&&M[R-1]==Ga)M[R-2]+=ua;else if(ua){if(!ja&&(M[R+1]!=Ga||R&&M[R-2]!=wa))ja=true;M[R++]=ua;M[R++]=Ga;wa=ia;ia=M[R]}if(L.pos>5E3){M[R++]=this.text.slice(L.pos);M[R++]=null;break}}if(M.length!=R){M.length=R;ja=true}if(R&&M[R-2]!=wa)ja=true;return ja},getTokenAt:function(c,A,L){for(var M=new o(this.text);M.pos<L&&!M.eol();){M.start=M.pos;var R=c.token(M,A)}return{start:M.start,end:M.pos,string:M.current(),className:R||null,state:A}},indentation:function(){return ma(this.text)},
getHTML:function(c,A,L,M){function R(kb,Fb){if(kb)Fb?ja.push('<span class="',Fb,'">',q(kb),"</span>"):ja.push(q(kb))}var ja=[];if(L)ja.push(this.className?'<pre class="'+this.className+'">':"<pre>");var ia=this.styles,wa=this.text,Ga=this.marked;if(c==A)c=null;var ua=wa.length;if(M!=null)ua=Math.min(M,ua);if(!wa&&M==null)R(" ",c!=null&&A==null?"CodeMirror-selected":null);else if(!Ga&&c==null)for(c=M=0;c<ua;M+=2){A=ia[M];var Na=A.length;if(c+Na>ua)A=A.slice(0,ua-c);c+=Na;R(A,ia[M+1])}else{M=wa=0;var G=
"",ea=-1,aa=null,ha=function(){if(Ga){ea+=1;aa=ea<Ga.length?Ga[ea]:null}};for(ha();wa<ua;){var sa=ua,ta="";if(c!=null)if(c>wa)sa=c;else if(A==null||A>wa){ta=" CodeMirror-selected";if(A!=null)sa=Math.min(sa,A)}for(;aa&&aa.to!=null&&aa.to<=wa;)ha();if(aa)if(aa.from>wa)sa=Math.min(sa,aa.from);else{ta+=" "+aa.style;if(aa.to!=null)sa=Math.min(sa,aa.to)}for(;;){var La=wa+G.length,gb=Na;if(ta)gb=Na?Na+ta:ta;R(La>sa?G.slice(0,sa-wa):G,gb);if(La>=sa){G=G.slice(sa-wa);wa=sa;break}wa=La;G=ia[M++];Na=ia[M++]}}c!=
null&&A==null&&R(" ","CodeMirror-selected")}L&&ja.push("</pre>");return ja.join("")}};z.prototype={addChange:function(c,A,L){this.undone.length=0;var M=+new Date,R=this.done[this.done.length-1];if(M-this.time>400||!R||R.start>c+A||R.start+R.added<c-R.added+R.old.length)this.done.push({start:c,added:A,old:L});else{var ja=0;if(c<R.start){for(var ia=R.start-c-1;ia>=0;--ia)R.old.unshift(L[ia]);R.added+=R.start-c;R.start=c}else if(R.start<c){ja=c-R.start;A+=ja}ia=R.added-ja;for(c=L.length;ia<c;++ia)R.old.push(L[ia]);
if(R.added<A)R.added=A}this.time=M}};y.prototype={stop:function(){K.call(this.e)},target:function(){return this.e.target||this.e.srcElement},button:function(){if(this.e.which)return this.e.which;else if(this.e.button&1)return 1;else if(this.e.button&2)return 3;else if(this.e.button&4)return 2},pageX:function(){if(this.e.pageX!=null)return this.e.pageX;var c=this.target().ownerDocument;return this.e.clientX+c.body.scrollLeft+c.documentElement.scrollLeft},pageY:function(){if(this.e.pageY!=null)return this.e.pageY;
var c=this.target().ownerDocument;return this.e.clientY+c.body.scrollTop+c.documentElement.scrollTop}};X.prototype={set:function(c,A){clearTimeout(this.id);this.id=setTimeout(A,c)}};var na=function(){var c=document.createElement("pre");c.innerHTML=" ";return!c.innerHTML}(),S=/gecko\/\d{7}/i.test(navigator.userAgent),fa="\n";(function(){var c=document.createElement("textarea");c.value="foo\nbar";if(c.value.indexOf("\r")>-1)fa="\r\n"})();for(var ga=8,xa=/Mac/.test(navigator.platform),Oa={},Ra=35;Ra<=
40;++Ra)Oa[Ra]=Oa["c"+Ra]=true;var W="\n\nb".split(/\n/).length!=3?function(c){for(var A=0,L,M=[];(L=c.indexOf("\n",A))>-1;){M.push(c.slice(A,c.charAt(L-1)=="\r"?L-1:L));A=L+1}M.push(c.slice(A));return M}:function(c){return c.split(/\r?\n/)};if(window.getSelection)var O=function(c){try{return{start:c.selectionStart,end:c.selectionEnd}}catch(A){return null}},U=function(c,A,L){try{c.setSelectionRange(A,L)}catch(M){}};else{O=function(c){try{var A=c.ownerDocument.selection.createRange()}catch(L){return null}if(!A||
A.parentElement()!=c)return null;var M=c.value,R=M.length,ja=c.createTextRange();ja.moveToBookmark(A.getBookmark());var ia=c.createTextRange();ia.collapse(false);if(ja.compareEndPoints("StartToEnd",ia)>-1)return{start:R,end:R};c=-ja.moveStart("character",-R);for(A=M.indexOf("\r");A>-1&&A<c;A=M.indexOf("\r",A+1),c++);if(ja.compareEndPoints("EndToEnd",ia)>-1)return{start:c,end:R};R=-ja.moveEnd("character",-R);for(A=M.indexOf("\r");A>-1&&A<R;A=M.indexOf("\r",A+1),R++);return{start:c,end:R}};U=function(c,
A,L){var M=c.createTextRange();M.collapse(true);var R=M.duplicate(),ja=0;c=c.value;for(var ia=c.indexOf("\n");ia>-1&&ia<A;ia=c.indexOf("\n",ia+1))++ja;for(M.move("character",A-ja);ia>-1&&ia<L;ia=c.indexOf("\n",ia+1))++ja;R.move("character",L-ja);M.setEndPoint("EndToEnd",R);M.select()}}g.defineMode("null",function(){return{token:function(c){c.skipToEnd()}}});g.defineMIME("text/plain","null");return g}();
jQuery.cookie=function(g,h,j){if(typeof h!="undefined"){j=j||{};if(h===null){h="";j.expires=-1}var o="";if(j.expires&&(typeof j.expires=="number"||j.expires.toUTCString)){if(typeof j.expires=="number"){o=new Date;o.setTime(o.getTime()+j.expires*24*60*60*1E3)}else o=j.expires;o="; expires="+o.toUTCString()}var u=j.path?"; path="+j.path:"",t=j.domain?"; domain="+j.domain:"";j=j.secure?"; secure":"";document.cookie=[g,"=",encodeURIComponent(h),o,u,t,j].join("")}else{h=null;if(document.cookie&&document.cookie!=
""){j=document.cookie.split(";");for(o=0;o<j.length;o++){u=jQuery.trim(j[o]);if(u.substring(0,g.length+1)==g+"="){h=decodeURIComponent(u.substring(g.length+1));break}}}return h}};
function Sanskrit(g,h){this.options=h||{};this.textarea=g;this.form=g.form;this.container=document.createElement("div");this.iframe=document.createElement("iframe");this.hiddenInput=document.createElement("input");this.hiddenInput.type="hidden";this.callbacks=Sanskrit.inherit(Sanskrit.prototype.callbacks);for(var j in Sanskrit.prototype.callbacks)if(Sanskrit.prototype.callbacks.hasOwnProperty(j)&&typeof this.options[j]==="function")this.callbacks[j]=this.options[j];this.replaceTextarea();var o=this;
this.onReady(function(){o.findContentDocument();if(o.richTextIsAvailable()){o.applyClassNames();o.enableEditor();o.addStyle(Sanskrit.defaultStyle);o.createToolbar();o.hijackForm()}else o.unreplaceTextarea()});Sanskrit.editors.push(this)}Sanskrit.inherit=function(g){function h(){}h.prototype=g;return new h};Sanskrit.getClassName=function(g){return g.getAttribute("class")||g.getAttribute("className")};Sanskrit.setClassName=function(g,h){g.setAttribute("class",h);g.className=h};
Sanskrit.hasClassName=function(g,h){if(!Sanskrit.getClassName(g))return false;for(var j=Sanskrit.getClassName(g).split(" "),o=0;o<j.length;o++)if(j[o]==h)return true;return false};Sanskrit.addClassName=function(g,h){if(Sanskrit.hasClassName(g,h))return false;var j=Sanskrit.getClassName(g)||"";Sanskrit.setClassName(g,j==""?h:j+" "+h);return true};
Sanskrit.removeClassName=function(g,h){for(var j=(Sanskrit.getClassName(g)||"").split(" "),o=[],u=0;u<j.length;u++)j[u]!=h&&o.push(j[u]);o=o.join(" ");Sanskrit.setClassName(g,o);return o};Sanskrit.defaultStyle="html { padding:0; cursor:text; } body { font-size:90%; margin:0; padding:0.5em; cursor:text; } p { margin: 0.5em 0; }";Sanskrit.editors=[];
Sanskrit.prototype={onReady:function(g){setTimeout(g,250)},findContentDocument:function(){if(this.iframe.contentDocument){this.internetExplorer=false;this.contentDocument=this.iframe.contentDocument}else{this.internetExplorer=true;this.contentDocument=this.iframe.contentWindow.document}return this.contentDocument},replaceTextarea:function(){this.container.appendChild(this.iframe);this.hiddenInput.value=this.textarea.value;this.hiddenInput.name=this.textarea.name;this.hiddenInput.id=this.textarea.id;
this.container.insertBefore(this.hiddenInput,this.iframe);this.textarea.parentNode.insertBefore(this.container,this.textarea);this.textarea.parentNode.removeChild(this.textarea)},unreplaceTextarea:function(){this.container.parentNode.insertBefore(this.textarea,this.container);this.container.parentNode.removeChild(this.container)},toggleTextarea:function(){if(this.iframe.parentNode){this.textarea.value=this.textilize(this.getContents());this.iframe.parentNode.insertBefore(this.textarea,this.iframe);
this.iframe.parentNode.removeChild(this.iframe);return true}else{this.textarea.parentNode.insertBefore(this.iframe,this.textarea);this.textarea.parentNode.removeChild(this.textarea);var g=this;this.onReady(function(){g.findContentDocument();g.hiddenInput.value=g.textarea.value;g.enableEditor();g.toolbar.observeEditor()});return false}},enableEditor:function(){this.contentDocument.designMode="on";try{this.execCommand("styleWithCSS",false)}catch(g){}this.setContents(this.htmlize(this.hiddenInput.value))},
focusEditor:function(){this.iframe.contentWindow.focus()},createToolbar:function(){this.toolbar=new SanskritToolbar(this,this.options.toolbar||{})},insertToolbar:function(g){this.container.insertBefore(g,this.iframe)},getContents:function(){return this.contentDocument.getElementsByTagName("body")[0].innerHTML},setContents:function(g){var h=this;setTimeout(function(){h.contentDocument.getElementsByTagName("body")[0].innerHTML=g},250)},getSelection:function(){return this.iframe.contentWindow.document.selection?
this.iframe.contentWindow.document.selection:this.iframe.contentWindow.getSelection()},getCurrentAncestors:function(){var g=this.getSelection();if(g.createRange){g=g.createRange();g=g.parentElement()}else{g=g.getRangeAt(0);g=g.commonAncestorContainer}for(var h=[];g.nodeType!==1||g.nodeName.toLowerCase()!=="body";){g.nodeType===1&&h.push(g);g=g.parentNode}return h},includeAncestor:function(g,h){h=h||this.getCurrentAncestors();for(var j=false,o=0;o<h.length;o++)if(h[o].nodeName.toLowerCase()==g.toLowerCase())j=
true;return j},applyClassNames:function(){Sanskrit.addClassName(this.container,this.options.className||"sanskrit")},hijackForm:function(){var g=this,h=this.form.onsubmit||function(){};this.form.onsubmit=function(){h();g.hiddenInput.value=g.textilize(g.iframe.parentNode?g.getContents():g.textarea.value);return g.callbacks.onSubmit.call(g)}},addStyle:function(g){var h=this;setTimeout(function(){if(document.createStyleSheet){var j=h.contentDocument.createStyleSheet(),o=g.split("}"),u,t;for(u=0;u<o.length-
1;u++){t=o[u].split("{");j.addRule(t[0],t[1])}}else{j=document.createElement("style");j.appendChild(document.createTextNode(g));h.contentDocument.getElementsByTagName("head")[0].appendChild(j)}},250)},textilize:function(g,h){g=g.replace(/\s*<p>((.|[\r\n])*?)<\/p>\s*/gi,"\n\n$1\n\n");g=g.replace(/<br ?\/?>/gi,"\n");g=g.replace(/<(?:b|strong)>((.|[\r\n])*?)<\/(?:b|strong)>/gi,"*$1*");g=g.replace(/<(?:i|em)>((.|[\r\n])*?)<\/(?:i|em)>/gi,"_$1_");g=g.replace(/<(?:strike|del)>((.|[\r\n])*?)<\/(?:strike|del)>/gi,
"-$1-");g=g.replace(/<(?:u|ins)>((.|[\r\n])*?)<\/(?:u|ins)>/gi,"+$1+");g=g.replace(/<a href="(.*?)">((.|[\r\n])*?)<\/a>/gi,'"$2":$1');g=g.replace(/<code.*?>((.|[\r\n])*?)<\/code>/gi,"@$1@");if(h)g=g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");g=g.replace(/(\r\n|\n){3,}/g,"\n\n");return g=g.replace(/^[\r\n]+|[\r\n]+$/g,"")},htmlize:function(g,h){for(var j=g.split("\n\n"),o=0;o<j.length;o++){j[o]=j[o].replace(/(^|\r\n|\n|\r)\* (.*)/g,"$1###LI### $2");j[o]=j[o].replace(/\n/gi,"<br/>");
j[o]=j[o].replace(/@((.|[\r\n])*?)@/gi,"<code>$1</code>");j[o]=j[o].replace(/\*(.+?)\*/gi,this.internetExplorer?"<strong>$1</strong>":"<b>$1</b>");j[o]=j[o].replace(/_(.+?)_/gi,this.internetExplorer?"<em>$1</em>":"<i>$1</i>");j[o]=j[o].replace(/\+(.+?)\+/gi,"<u>$1</u>");j[o]=j[o].replace(/-(.+?)-/gi,"<strike>$1</strike>");j[o]=j[o].replace(/"(.+?)":([^\s\n<]+)/gi,'<a href="$2">$1</a>');j[o]=j[o].replace(/###LI###/gi,"*");j[o]="<p>"+j[o]+"</p>"}g=j.join("\n");g=g.replace(/<p>[\s\n]*<\/p>/g,"");if(h)g=
g.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");return g},execCommand:function(g,h){if(typeof h=="undefined")h=null;this.contentDocument.execCommand(g,false,h)},richTextIsAvailable:function(){return typeof this.contentDocument.execCommand!="undefined"},callbacks:{onSubmit:function(){return true}}};
function SanskritToolbar(g,h){this.options=h||{};this.editor=g;this.list=document.createElement("ul");this.listItems=[];this.listItemCallbacks={};this.availableActions={strong:"strong",em:"em",ins:"ins",del:"del",link:"link",unlink:"unlink",textile:"textile"};this.callbacks=Sanskrit.inherit(SanskritToolbar.prototype.callbacks);for(var j in this.actions){var o="on"+j.slice(0,1).toUpperCase()+j.slice(1);if(typeof this.options[o]==="function")this.callbacks[o]=this.options[o]}this.addListItems();this.applyClassNames();
this.injectListIntoEditor();this.observeEditor()}
SanskritToolbar.prototype={actions:{strong:function(g){g.execCommand("Bold")},em:function(g){g.execCommand("Italic")},link:function(g){var h=prompt("Enter link address:");if(typeof h==="string"){h.match(/^[a-zA-Z]+:\/\//)||(h="http://"+h);g.execCommand("createLink",h)}else return false},unlink:function(g){g.execCommand("unlink");g.toolbar.deactivateListItem("link");g.toolbar.activateListItem("unlink")},del:function(g){g.execCommand("strikeThrough")},ins:function(g){g.execCommand("underline")},textile:function(g){g.toolbar.resetListStatus();
var h=g.toolbar;(g=g.toggleTextarea())?h.activateListItem("textile"):h.deactivateListItem("textile");for(var j in h.actions)if(h.actions.hasOwnProperty(j)&&j!=="textile")g?h.hideListItem(j):h.showListItem(j);return false}},callbacks:{},createAction:function(g,h){var j=this,o=g.onclick||function(){};return function(){o();if(j.actions[h](j.editor)!==false){var u="on"+h.slice(0,1).toUpperCase()+h.slice(1);typeof j.callbacks[u]==="function"&&j.callbacks[u].call(j.editor);j.updateListStatus(j.editor.getCurrentAncestors());
j.editor.focusEditor()}return false}},addListItems:function(){var g=this.options.actions||this.availableActions;for(var h in g)if(g.hasOwnProperty(h)){var j=document.createElement("li"),o=document.createElement("a");o.setAttribute("href","#");Sanskrit.addClassName(j,h);o.appendChild(typeof g[h]=="string"?document.createTextNode(g[h]):g[h]);o.onclick=this.createAction(o,h);j.appendChild(o);this.listItems.push(j);this.list.appendChild(j)}},applyClassNames:function(){Sanskrit.addClassName(this.list,
"toolbar")},injectListIntoEditor:function(){this.editor.insertToolbar(this.list)},observeEditor:function(){var g=this;setTimeout(function(){if(g.editor.contentDocument.addEventListener){g.editor.contentDocument.addEventListener("mouseup",function(){g.updateListStatus(g.editor.getCurrentAncestors())},false);g.editor.contentDocument.addEventListener("keyup",function(){g.updateListStatus(g.editor.getCurrentAncestors())},false);g.editor.contentDocument.addEventListener("keydown",function(){g.updateListStatus(g.editor.getCurrentAncestors())},
false);g.editor.contentDocument.addEventListener("blur",function(){g.resetListStatus()},false)}else{g.editor.contentDocument.attachEvent("onmouseup",function(){g.updateListStatus(g.editor.getCurrentAncestors())});g.editor.contentDocument.attachEvent("onkeyup",function(){g.updateListStatus(g.editor.getCurrentAncestors())});g.editor.contentDocument.attachEvent("onkeydown",function(){g.updateListStatus(g.editor.getCurrentAncestors())},false);g.editor.contentDocument.attachEvent("onblur",function(){g.resetListStatus()},
false)}},100)},getListItem:function(g){if(typeof g!="string")return g;for(var h=0;h<this.listItems.length;h++)if(Sanskrit.hasClassName(this.listItems[h],g))return this.listItems[h];return document.createElement("li")},activateListItem:function(g){Sanskrit.addClassName(this.getListItem(g),"active")},deactivateListItem:function(g){Sanskrit.removeClassName(this.getListItem(g),"active")},toggleListItem:function(g){g=this.getListItem(g);Sanskrit.hasClassName(g,"active")?Sanskrit.removeClassName(g,"active"):
Sanskrit.addClassName(g,"active")},hideListItem:function(g){g=this.getListItem(g);g.previousDisplayValue=g.style.display;g.style.display="none"},showListItem:function(g){g=this.getListItem(g);g.style.display=g.previousDisplayValue||""},resetListStatus:function(){for(var g=0;g<this.listItems.length;g++)this.deactivateListItem(this.listItems[g])},updateListStatus:function(g){this.resetListStatus();for(var h=0;h<g.length;h++)switch(g[h].nodeName.toLowerCase()){case "b":this.activateListItem("strong");
break;case "strong":this.activateListItem("strong");break;case "i":this.activateListItem("em");break;case "em":this.activateListItem("em");break;case "u":this.activateListItem("ins");break;case "strike":this.activateListItem("del");break;case "a":this.activateListItem("link");break}}};Sanskrit.onLoadFunction=function(){for(var g=[],h=document.getElementsByTagName("textarea"),j=0;j<h.length;j++)g.push(h[j]);for(j=0;j<g.length;j++)Sanskrit.hasClassName(g[j],"sanskrit")&&new Sanskrit(g[j])};
if(typeof Event!="undefined"&&Event.onReady)Event.onReady(Sanskrit.onLoadFunction);else if(typeof Event!="undefined"&&Event.observe)Event.observe(window,"load",Sanskrit.onLoadFunction);else if(window.addEventListener)window.addEventListener("load",Sanskrit.onLoadFunction,false);else if(window.attachEvent)window.attachEvent("onload",Sanskrit.onLoadFunction,false);else{var old=window.onload;window.onload=function(){old();Sanskrit.onLoadFunction()}}
CodeMirror.defineMode("javascript",function(g,h){function j(G,ea){for(var aa=false,ha;(ha=G.next())!=null;){if(ha==ea&&!aa)return false;aa=!aa&&ha=="\\"}return aa}function o(G,ea,aa){ia=G;wa=aa;return ea}function u(G,ea){var aa=G.next();if(aa=='"'||aa=="'"){aa=t(aa);ea.tokenize=aa;return aa(G,ea)}else if(/[\[\]{}\(\),;\:\.]/.test(aa))return o(aa);else if(aa=="0"&&G.eat(/x/i)){G.eatWhile(/[\da-f]/i);return o("number","js-atom")}else if(/\d/.test(aa)){G.match(/^\d*(?:\.\d*)?(?:e[+\-]?\d+)?/);return o("number",
"js-atom")}else if(aa=="/")if(G.eat("*")){aa=z;ea.tokenize=aa;return aa(G,ea)}else if(G.eat("/")){G.skipToEnd();return o("comment","js-comment")}else if(ea.reAllowed){j(G,"/");G.eatWhile(/[gimy]/);return o("regexp","js-string")}else{G.eatWhile(ja);return o("operator",null,G.current())}else if(ja.test(aa)){G.eatWhile(ja);return o("operator",null,G.current())}else{G.eatWhile(/[\w\$_]/);aa=G.current();var ha=R.propertyIsEnumerable(aa)&&R[aa];return ha?o(ha.type,ha.style,aa):o("variable","js-variable",
aa)}}function t(G){return function(ea,aa){if(!j(ea,G))aa.tokenize=u;return o("string","js-string")}}function z(G,ea){for(var aa=false,ha;ha=G.next();){if(ha=="/"&&aa){ea.tokenize=u;break}aa=ha=="*"}return o("comment","js-comment")}function K(G,ea,aa,ha,sa,ta){this.indented=G;this.column=ea;this.type=aa;this.prev=sa;this.info=ta;if(ha!=null)this.align=ha}function E(){for(var G=arguments.length-1;G>=0;G--)ua.cc.push(arguments[G])}function y(){E.apply(null,arguments);return true}function Q(G){var ea=
ua.state;if(ea.context){ua.marked="js-variabledef";for(var aa=ea.localVars;aa;aa=aa.next)if(aa.name==G)return;ea.localVars={name:G,next:ea.localVars}}}function X(){if(!ua.state.context)ua.state.localVars=Na;ua.state.context={prev:ua.state.context,vars:ua.state.localVars}}function ma(){ua.state.localVars=ua.state.context.vars;ua.state.context=ua.state.context.prev}function pa(G,ea){var aa=function(){var ha=ua.state;ha.lexical=new K(ha.indented,ua.stream.column(),G,null,ha.lexical,ea)};aa.lex=true;
return aa}function oa(){var G=ua.state;if(G.lexical.prev){if(G.lexical.type==")")G.indented=G.lexical.indented;G.lexical=G.lexical.prev}}function l(G){return function(ea){return ea==G?y():G==";"?E():y(arguments.callee)}}function q(G){if(G=="var")return y(pa("vardef"),xa,l(";"),oa);if(G=="keyword a")return y(pa("form"),x,q,oa);if(G=="keyword b")return y(pa("form"),q,oa);if(G=="{")return y(pa("}"),ga,oa);if(G==";")return y();if(G=="function")return y(c);if(G=="for")return y(pa("form"),l("("),pa(")"),
Ra,l(")"),oa,q,oa);if(G=="variable")return y(pa("stat"),ca);if(G=="switch")return y(pa("form"),x,pa("}","switch"),l("{"),ga,oa,oa);if(G=="case")return y(x,l(":"));if(G=="default")return y(l(":"));if(G=="catch")return y(pa("form"),X,l("("),A,l(")"),q,oa,ma);return E(pa("stat"),x,l(";"),oa)}function x(G){if(Ga.hasOwnProperty(G))return y(D);if(G=="function")return y(c);if(G=="keyword c")return y(x);if(G=="(")return y(pa(")"),x,l(")"),oa,D);if(G=="operator")return y(x);if(G=="[")return y(pa("]"),fa(x,
"]"),oa,D);if(G=="{")return y(pa("}"),fa(S,"}"),oa,D);return y()}function D(G,ea){if(G=="operator"&&/\+\+|--/.test(ea))return y(D);if(G=="operator")return y(x);if(G!=";"){if(G=="(")return y(pa(")"),fa(x,")"),oa,D);if(G==".")return y(na,D);if(G=="[")return y(pa("]"),x,l("]"),oa,D)}}function ca(G){if(G==":")return y(oa,q);return E(D,l(";"),oa)}function na(G){if(G=="variable"){ua.marked="js-property";return y()}}function S(G){if(G=="variable")ua.marked="js-property";if(Ga.hasOwnProperty(G))return y(l(":"),
x)}function fa(G,ea){function aa(ha){if(ha==",")return y(G,aa);if(ha==ea)return y();return y(l(ea))}return function(ha){return ha==ea?y():E(G,aa)}}function ga(G){if(G=="}")return y();return E(q,ga)}function xa(G,ea){if(G=="variable"){Q(ea);return y(Oa)}return y()}function Oa(G,ea){if(ea=="=")return y(x,Oa);if(G==",")return y(xa)}function Ra(G){if(G=="var")return y(xa,O);if(G==";")return E(O);if(G=="variable")return y(W);return E(O)}function W(G,ea){if(ea=="in")return y(x);return y(D,O)}function O(G,
ea){if(G==";")return y(U);if(ea=="in")return y(x);return y(x,l(";"),U)}function U(G){G!=")"&&y(x)}function c(G,ea){if(G=="variable"){Q(ea);return y(c)}if(G=="(")return y(pa(")"),X,fa(A,")"),oa,q,ma)}function A(G,ea){if(G=="variable"){Q(ea);return y()}}var L=g.indentUnit,M=h.json,R=function(){function G(La){return{type:La,style:"js-keyword"}}var ea=G("keyword a"),aa=G("keyword b"),ha=G("keyword c"),sa=G("operator"),ta={type:"atom",style:"js-atom"};return{"if":ea,"while":ea,"with":ea,"else":aa,"do":aa,
"try":aa,"finally":aa,"return":ha,"break":ha,"continue":ha,"new":ha,"delete":ha,"throw":ha,"var":G("var"),"function":G("function"),"catch":G("catch"),"for":G("for"),"switch":G("switch"),"case":G("case"),"default":G("default"),"in":sa,"typeof":sa,"instanceof":sa,"true":ta,"false":ta,"null":ta,undefined:ta,NaN:ta,Infinity:ta}}(),ja=/[+\-*&%=<>!?|]/,ia,wa,Ga={atom:true,number:true,variable:true,string:true,regexp:true},ua={state:null,column:null,marked:null,cc:null},Na={name:"this",next:{name:"arguments"}};
oa.lex=true;return{startState:function(G){return{tokenize:u,reAllowed:true,cc:[],lexical:new K((G||0)-L,0,"block",false),localVars:null,context:null,indented:0}},token:function(G,ea){if(G.sol()){if(!ea.lexical.hasOwnProperty("align"))ea.lexical.align=false;ea.indented=G.indentation()}if(G.eatSpace())return null;var aa=ea.tokenize(G,ea);if(ia=="comment")return aa;ea.reAllowed=ia=="operator"||ia=="keyword c"||ia.match(/^[\[{}\(,;:]$/);var ha;a:{var sa=ia,ta=wa,La=ea.cc;ua.state=ea;ua.stream=G;ua.marked=
null;ua.cc=La;if(!ea.lexical.hasOwnProperty("align"))ea.lexical.align=true;for(;;)if((La.length?La.pop():M?x:q)(sa,ta)){for(;La.length&&La[La.length-1].lex;)La.pop()();if(ua.marked){ha=ua.marked;break a}if(ha=sa=="variable")b:{for(ha=ea.localVars;ha;ha=ha.next)if(ha.name==ta){ha=true;break b}ha=void 0}if(ha){ha="js-localvariable";break a}ha=aa;break a}}return ha},indent:function(G,ea){if(G.tokenize!=u)return 0;var aa=ea&&ea.charAt(0),ha=G.lexical,sa=ha.type,ta=aa==sa;return sa=="vardef"?ha.indented+
4:sa=="form"&&aa=="{"?ha.indented:sa=="stat"||sa=="form"?ha.indented+L:ha.info=="switch"&&!ta?ha.indented+(/^(?:case|default)\b/.test(ea)?L:2*L):ha.align?ha.column+(ta?0:1):ha.indented+(ta?0:L)},electricChars:":{}"}});CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:true});
CodeMirror.defineMode("xml",function(g,h){function j(S,fa){function ga(Oa){fa.tokenize=Oa;return Oa(S,fa)}var xa=S.next();if(xa=="<")if(S.eat("!"))if(S.eat("["))return S.match("CDATA[")?ga(t("xml-cdata","]]\>")):null;else if(S.match("--"))return ga(t("xml-comment","--\>"));else if(S.match("DOCTYPE")){S.eatWhile(/[\w\._\-]/);return ga(t("xml-doctype",">"))}else return null;else if(S.eat("?")){S.eatWhile(/[\w\._\-]/);fa.tokenize=t("xml-processing","?>");return"xml-processing"}else{D=S.eat("/")?"closeTag":
"openTag";S.eatSpace();for(x="";xa=S.eat(/[^\s\u00a0=<>\"\'\/?]/);)x+=xa;fa.tokenize=o;return"xml-tag"}else if(xa=="&"){S.eatWhile(/[^;]/);S.eat(";");return"xml-entity"}else{S.eatWhile(/[^&<]/);return null}}function o(S,fa){var ga=S.next();if(ga==">"||ga=="/"&&S.eat(">")){fa.tokenize=j;D=ga==">"?"endTag":"selfcloseTag";return"xml-tag"}else if(ga=="="){D="equals";return null}else if(/[\'\"]/.test(ga)){fa.tokenize=u(ga);return fa.tokenize(S,fa)}else{S.eatWhile(/[^\s\u00a0=<>\"\'\/?]/);return"xml-word"}}
function u(S){return function(fa,ga){for(;!fa.eol();)if(fa.next()==S){ga.tokenize=o;break}return"xml-attribute"}}function t(S,fa){return function(ga,xa){for(;!ga.eol();){if(ga.match(fa)){xa.tokenize=j;break}ga.next()}return S}}function z(){for(var S=arguments.length-1;S>=0;S--)ca.cc.push(arguments[S])}function K(){z.apply(null,arguments);return true}function E(S,fa){var ga=l.doNotIndent.hasOwnProperty(S)||ca.context&&ca.context.noIndent;ca.context={prev:ca.context,tagName:S,indent:ca.indented,startOfLine:fa,
noIndent:ga}}function y(S){if(S=="openTag"){ca.tagName=x;return K(ma,Q(ca.startOfLine))}else if(S=="closeTag"){if(ca.context)ca.context=ca.context.prev;return K(X)}else{if(S=="xml-cdata"){if(!ca.context||ca.context.name!="!cdata")E("!cdata");if(ca.tokenize==j)if(ca.context)ca.context=ca.context.prev}return K()}}function Q(S){return function(fa){if(fa=="selfcloseTag"||fa=="endTag"&&l.autoSelfClosers.hasOwnProperty(ca.tagName.toLowerCase()))return K();if(fa=="endTag"){E(ca.tagName,S);return K()}return K()}}
function X(S){if(S=="endTag")return K();return z()}function ma(S){if(S=="xml-word"){na="xml-attname";return K(ma)}if(S=="equals")return K(pa,ma);return z()}function pa(S){if(S=="xml-word"&&l.allowUnquoted){na="xml-attribute";return K()}if(S=="xml-attribute")return K();return z()}var oa=g.indentUnit,l=h.htmlMode?{autoSelfClosers:{br:true,img:true,hr:true,link:true,input:true,meta:true,col:true,frame:true,base:true,area:true},doNotIndent:{pre:true,"!cdata":true},allowUnquoted:true}:{autoSelfClosers:{},
doNotIndent:{"!cdata":true},allowUnquoted:false},q=h.alignCDATA,x,D,ca,na;return{startState:function(){return{tokenize:j,cc:[],indented:0,startOfLine:true,tagName:null,context:null}},token:function(S,fa){if(S.sol()){fa.startOfLine=true;fa.indented=S.indentation()}if(S.eatSpace())return null;na=D=x=null;var ga=fa.tokenize(S,fa);if((ga||D)&&ga!="xml-comment")for(ca=fa;;)if((fa.cc.pop()||y)(D||ga))break;fa.startOfLine=false;return na||ga},indent:function(S,fa){var ga=S.context;if(ga&&ga.noIndent)return 0;
if(q&&/<!\[CDATA\[/.test(fa))return 0;if(ga&&/^<\//.test(fa))ga=ga.prev;for(;ga&&!ga.startOfLine;)ga=ga.prev;return ga?ga.indent+oa:0},electricChars:"/"}});CodeMirror.defineMIME("application/xml","xml");CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:true});
CodeMirror.defineMode("css",function(g){function h(E,y){K=y;return E}function j(E,y){var Q=E.next();if(Q=="@"){E.eatWhile(/\w/);return h("css-at",E.current())}else if(Q=="/"&&E.eat("*")){y.tokenize=o;return o(E,y)}else if(Q=="<"&&E.eat("!")){y.tokenize=u;return u(E,y)}else if(Q=="=")h(null,"compare");else if((Q=="~"||Q=="|")&&E.eat("="))return h(null,"compare");else if(Q=='"'||Q=="'"){y.tokenize=t(Q);return y.tokenize(E,y)}else if(Q=="#"){E.eatWhile(/\w/);return h("css-selector","hash")}else if(Q==
"!"){E.match(/^\s*\w*/);return h("css-important","important")}else if(/\d/.test(Q)){E.eatWhile(/[\w.%]/);return h("css-unit","unit")}else if(/[,.+>*\/]/.test(Q))return h(null,"select-op");else if(/[;{}:\[\]]/.test(Q))return h(null,Q);else{E.eatWhile(/[\w\\\-_]/);return h("css-identifier","identifier")}}function o(E,y){for(var Q=false,X;(X=E.next())!=null;){if(Q&&X=="/"){y.tokenize=j;break}Q=X=="*"}return h("css-comment","comment")}function u(E,y){for(var Q=0,X;(X=E.next())!=null;){if(Q>=2&&X==">"){y.tokenize=
j;break}Q=X=="-"?Q+1:0}return h("css-comment","comment")}function t(E){return function(y,Q){for(var X=false,ma;(ma=y.next())!=null;){if(ma==E&&!X)break;X=!X&&ma=="\\"}if(!X)Q.tokenize=j;return h("css-string","string")}}var z=g.indentUnit,K;return{startState:function(E){return{tokenize:j,baseIndent:E||0,stack:[]}},token:function(E,y){if(E.eatSpace())return null;var Q=y.tokenize(E,y),X=y.stack[y.stack.length-1];if(K=="hash"&&X=="rule")Q="css-colorcode";else if(Q=="css-identifier")if(X=="rule")Q="css-value";
else if(!X||X=="@media{")Q="css-selector";X=="rule"&&/^[\{\};]$/.test(K)&&y.stack.pop();if(K=="{")if(X=="@media")y.stack[y.stack.length-1]="@media{";else y.stack.push("{");else if(K=="}")y.stack.pop();else if(K=="@media")y.stack.push("@media");else X!="rule"&&X!="@media"&&K!="comment"&&y.stack.push("rule");return Q},indent:function(E,y){var Q=E.stack.length;if(/^\}/.test(y))Q-=E.stack[E.stack.length-1]=="rule"?2:1;return E.baseIndent+Q*z},electricChars:"}"}});CodeMirror.defineMIME("text/css","css");
CodeMirror.defineMode("liquid",function(g){function h(E,y){var Q=t.token(E,y.htmlState);if(Q=="xml-tag"&&E.current()==">"&&y.htmlState.context)if(/^script$/i.test(y.htmlState.context.tagName)){y.token=o;y.localState=z.startState(t.indent(y.htmlState,""))}else if(/^style$/i.test(y.htmlState.context.tagName)){y.token=u;y.localState=K.startState(t.indent(y.htmlState,""))}return Q}function j(E,y,Q){var X=E.current();y=X.search(y);y>-1&&E.backUp(X.length-y);return Q}function o(E,y){if(E.match(/^<\/\s*script\s*>/i,
false)){y.token=h;y.curState=null;return h(E,y)}return j(E,/<\/\s*script\s*>/,z.token(E,y.localState))}function u(E,y){if(E.match(/^<\/\s*style\s*>/i,false)){y.token=h;y.localState=null;return h(E,y)}return j(E,/<\/\s*style\s*>/,K.token(E,y.localState))}var t=CodeMirror.getMode(g,{name:"xml",htmlMode:true}),z=CodeMirror.getMode(g,"javascript"),K=CodeMirror.getMode(g,"css");return{startState:function(){var E=t.startState();return{token:h,localState:null,htmlState:E}},copyState:function(E){if(E.localState)var y=
CodeMirror.copyState(E.token==u?K:z,E.localState);return{token:E.token,localState:y,htmlState:CodeMirror.copyState(t,E.htmlState)}},token:function(E,y){return y.token(E,y)},indent:function(E,y){return E.token==h||/^\s*<\//.test(y)?t.indent(E.htmlState,y):E.token==o?z.indent(E.localState,y):K.indent(E.localState,y)},electricChars:"/{}:"}});CodeMirror.defineMIME("text/html","htmlmixed");
var Asset=Model("asset",function(){this.persistence(Model.REST,"/admin/assets");this.include({toMustache:function(g){this.merge({query_path:g?"?"+decodeURIComponent(jQuery.param({query:g})):"",query:g});return this.attr()},toMustacheWithNeighbors:function(g){var h=Asset.all(),j=h.indexOf(this),o=this.toMustache(g),u=h[j+1]?Asset.all()[j+1].toMustache(g):null;g=h[j-1]?Asset.all()[j-1].toMustache(g):null;jQuery("<img />")[0].src="/images/large/"+o.id+"/"+o.file_name;if(u)jQuery("<img />")[0].src="/images/large/"+
u.id+"/"+u.file_name;if(g)jQuery("<img />")[0].src="/images/large/"+g.id+"/"+g.file_name;return{asset:o,next:u,previous:g}}});this.extend({toMustache:function(g){var h=g?"?"+decodeURIComponent(jQuery.param({query:g})):"";return{assets:this.map(function(j){j.merge({query_path:h,query:g});return j.attr()}),query:g}},asJSON:function(){return Asset.map(function(g){return g.attr()})},tags:function(){tags=[];Asset.map(function(){tags=tags.concat(this.attr("tags"))});return tags},searchRemote:function(g,
h){var j=g!=null?decodeURIComponent(jQuery.param({query:g})):"";Asset.each(function(){Asset.remove(this)});jQuery.ajax({type:"get",url:"/search.json",contentType:"application/json",dataType:"json",data:j,success:function(o){jQuery.each(o,function(u,t){var z=new Asset({id:t.id});z.merge(t);Asset.add(z)});h.call(this)}})},searchAdmin:function(g,h){Asset.each(function(){Asset.remove(this)});jQuery.ajax({type:"get",url:"/admin/assets.json",contentType:"application/json",dataType:"json",data:g,success:function(j){$.each(j,
function(o,u){var t=new Asset({id:u.id});t.merge(u);Asset.add(t)});h.call(this)}})},keys:{},create:function(g,h){Asset.callback=h;var j=new XMLHttpRequest,o=Asset.generate_uuid();j.upload.uuid=o;j.upload.filename=g.name;j.upload.addEventListener("loadstart",Asset.onloadstartHandler,false);j.upload.addEventListener("progress",Asset.onprogressHandler);j.upload.addEventListener("load",Asset.onloadHandler,false);j.addEventListener("readystatechange",Asset.onreadystatechangeHandler,false);j.open("POST",
"/admin/assets.json",true);j.setRequestHeader("Content-Type","application/octet-stream");j.setRequestHeader("X-File-Name",g.name);j.setRequestHeader("X-File-Upload","true");j.send(g);h.before&&h.before.call(this,o)},onloadstartHandler:function(){},onloadHandler:function(){},onprogressHandler:function(g){var h=Math.round(g.loaded/g.total*100);Asset.callback.progress&&Asset.callback.progress.call(this,g.target.uuid,h)},onreadystatechangeHandler:function(g){var h=null;try{h=g.target.status}catch(j){return}if(h==
"200"&&g.target.readyState==4&&g.target.responseText){g=JSON.parse(g.target.responseText);h=new Asset({id:g.id});h.merge(g);Asset.add(h);Asset.callback.success&&Asset.callback.success.call(this,h)}},generate_uuid:function(){for(var g=[],h=0;h<32;h++)g[h]="0123456789ABCDEF".substr(Math.floor(Math.random()*16),1);g[12]="4";g[16]="0123456789ABCDEF".substr(g[16]&3|8,1);return g.join("")}})}),Page=Model("page",function(){this.persistence(Model.SinatraREST,"/admin/pages");this.include({children:function(){return Page.find_all_by_parent_id(this.id())},
has_children:function(){if(this.children().all().length>0)return true},assets:function(){for(var g=this.attr("assets"),h=0,j=g.length;h<j;++h){var o=g[h],u=new Asset({id:o.id});u.merge(o);Asset.add(u)}return Asset},parts:function(){var g=this.attr("parts"),h=g.length;Part.each(function(){Part.remove(this)});for(var j=0;j<h;++j){var o=g[j],u=new Part({id:o.id});u.merge(o);u.attr("page_id",this.id());Part.add(u)}return Part},load:function(g){var h=this,j="/admin/pages/"+h.id()+".json";jQuery.ajax({type:"GET",
url:j,dataType:"json",success:function(o){h.merge(o);g.call(this)}})},saveRemote:function(g,h){var j=this,o="/admin/pages/"+this.id()+".json";jQuery.ajax({type:"PUT",url:o,data:g,dataType:"json",success:function(u){if(u.errors){alert(JSON.stringify(u.errors));h.error&&h.error.call(this)}else{j.merge(u);h.success&&h.success.call(this)}}})}});this.extend({toMustache:function(){return{pages:this.map(function(g){return g.attr()})}},asJSON:function(){return Page.map(function(g){return g.attr()})},root:function(){return this.detect(function(){return this.attr("parent_id")==
null})},find_by_parent_id:function(g){return this.detect(function(){return this.attr("parent_id")==g})},find_all_by_parent_id:function(g){return this.select(function(){return this.attr("parent_id")==g})},find_by_path:function(g){return this.detect(function(){return this.attr("path")==g})},load_by_id:function(g,h){jQuery.ajax({type:"GET",url:"/admin/pages/"+g+".json",dataType:"json",success:function(j){var o=Page.find(j.id);o||(o=new Page({id:j.id}));o.merge(j);Page.add(o);h&&h.call(this,j)}})},create:function(g,
h){jQuery.ajax({type:"post",url:"/admin/pages.json",dataType:"json",data:{page:g},success:function(j){var o=new Page({id:j.id});o.merge(j);Page.add(o);h.call(this,j)}})}})}),Layout=Model("template",function(){this.persistence(Model.SinatraREST,"/admin/templates");this.include({load:function(g){var h=this,j="/admin/templates/"+h.id()+".json";jQuery.ajax({type:"GET",url:j,dataType:"json",success:function(o){h.merge(o);g.call(this,o)}})}});this.extend({toMustache:function(){return{layouts:this.map(function(g){return g.attr()})}},
asLayoutJSON:function(g){return Layout.find_all_by_class("Layout").map(function(h){g==h.id()?h.attr("selected",'selected="selected"'):h.attr("selected","");return h.attr()})},find_by_class:function(g){return this.detect(function(){return this.attr("klass")==g})},find_all_by_class:function(g){return this.select(function(){return this.attr("klass")==g})},asJSON_by_class:function(g){return this.find_all_by_class(function(){return g.map(function(h){return h.attributes})})}})}),Part=Model("part",function(){this.include({deleteRemote:function(g,
h){var j="/admin/pages/"+g.id()+"/parts/"+this.id()+".json";jQuery.ajax({type:"DELETE",url:j,dataType:"json",success:function(o){g.merge(o);h.call(this)}})}});this.extend({toMustache:function(){return{parts:this.map(function(g){return g.attr()})}},create:function(g,h){var j="/admin/templates/"+g.template_id+"/parts.json",o=Layout.find(g.template_id);jQuery.ajax({type:"post",url:j,dataType:"json",data:{part:g},success:function(u){o.merge(u);h.call(this)}})}})}),Site=Model("site",function(){this.persistence(Model.SinatraREST,
"/admin/sites");this.include({});this.extend({toMustache:function(){return{sites:this.map(function(g){return g.attr()})}}})}),User=Model("user",function(){this.persistence(Model.SinatraREST,"/admin/users");this.include({});this.extend({toMustache:function(){return{users:this.map(function(g){return g.attr()})}}})}),Galerie={open:function(g,h){$("body").append('<div id="overlay"></div>').append('<div id="modal_wrapper"><div id="modal"></div></div>');var j=$("#modal");j.html(g);var o=$("#modal_wrapper"),
u=$(window).height();j=j.height()+42;j=(u-j)/2;$("#overlay").css({height:u}).hide().fadeIn("fast");o.hide().fadeIn("fast").css({top:j});h&&h.call(this)},close:function(){$("#modal_wrapper").fadeOut("fast",function(){$(this).remove();$("#overlay").fadeOut("fast",function(){$(this).remove()})})}},logger={info:function(g){window.console&&console.log(g)},debug:function(g){window.console&&console.log(g)}},Utilities={notice:function(g){var h=jQuery(".notice");h.text(g);h.slideDown("slow",function(){setTimeout(function(){h.slideUp("slow")},
1E3)})},keyboard_nav:function(){jQuery("body").keydown(function(g){switch(g.keyCode){case 37:$("a.previous").click();break;case 39:$("a.next").click();break}})},check_browser_version:function(){if(!Modernizr.history){jQuery("a").live("click",function(h){h.preventDefault();document.location.hash=$(this).attr("href")});var g=jQuery("form#search-form");g.attr("action","#"+g.attr("action"))}},formObserver:function(g){jQuery(g).keyup(function(){delay(function(){jQuery(g).parents("form:first").submit()},
800)})}},iFramer={initialize:function(g,h){var j=jQuery(g),o=this;j.length&&j.load(function(){var u=$(this),t=u.contents(),z=t.find("span.part-editor"),K=z.find("a");o.setEditFlags(z);u.fadeIn("fast");t.find('a[href^="/preview"]').click(function(E){var y=$(this).attr("href").split("?")[0].replace("/preview","");if(y=Page.find_by_path(y)){E.preventDefault();y.id();document.location.hash=y.attr("admin_path")}});K.click(function(){window.top.trigger=$(this);window.top.location.hash=$(this).attr("href");
return false});h&&h.call(this)})},setEditFlags:function(g){g.css({position:"relative",display:"block",height:"0",width:"0","text-decoration":"none"}).find("span").css({display:"block",position:"absolute",top:"-24px",left:"12px",padding:"4px 8px",width:"100px",background:"rgba(255, 255, 0, 0.7)"})}},TabControl={initialize:function(g){if(g=jQuery(g)){g.each(function(h,j){$(j).hide()});g.first().show();this.tabControl(jQuery(".tab-control"))}},tabControl:function(g){g.click(function(){var h="tab-"+$(this).find("label").attr("for").split("-")[1];
jQuery(".tab").hide();jQuery("#"+h).show()})}},delay=function(){var g=0;return function(h,j){clearTimeout(g);g=setTimeout(h,j)}}(),Sites=Sammy(function(){var g=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.helpers({loadSites:function(h){if(Site.all().length==0)Site.load(function(){h&&h.call(this)});else h&&h.call(this)},renderSiteIndex:function(){this.load(jQuery("#admin-sites-index")).interpolate(Site.toMustache(),
"mustache").replace("#sidebar")}});this.bind("run",function(){g.modal=false;g.refresh_pages=true});this.get("#/preview",function(){alert(document.location.hostname);window.open("/","preview")});this.get("#/sites",function(h){g.refresh_pages=true;Galerie.close();jQuery("#editor").html('<h1 class="section">Sites</div>');h.loadSites(function(){h.renderSiteIndex()})});this.get("#/sites/new",function(h){h.loadSites(function(){$("#modal").length==0&&Galerie.open();h.load(jQuery("#admin-sites-new")).interpolate({},
"mustache").replace("#modal");h.renderSiteIndex(Site.all())})});this.post("#/sites",function(h){(new Site(h.params.site)).save(function(j,o){var u=JSON.parse(o.responseText);u.errors?alert(JSON.stringify(u)):h.redirect("#/sites")})});this.get("#/sites/:id/edit",function(h){Galerie.close();h.loadSites(function(){site=Site.find(h.params.id);h.load(jQuery("#admin-sites-edit")).interpolate({site:site.asJSON()},"mustache").replace("#editor");h.renderSiteIndex(Site.all())})});this.put("#/sites/:id",function(h){var j=
Site.find(h.params.id);j.attr(h.params.site);j.save(function(o,u){var t=JSON.parse(u.responseText);t.errors?alert(JSON.stringify(t)):h.redirect("#/sites")})});this.get("#/sites/:id/remove",function(h){Galerie.open();h.loadSites(function(){site=Site.find(h.params.id);h.load(jQuery("#admin-sites-remove")).interpolate({site:site.asJSON()},"mustache").replace("#modal");h.renderSiteIndex(Site.all())})});this.del("#/sites/:id",function(h){site.destroy(function(j){j?h.redirect("#/sites"):alert("there were issues")})})}),
Layouts=Sammy(function(){var g=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.helpers({loadLayouts:function(h){if(Layout.all().length==0)Layout.load(function(){h&&h.call(this)});else h&&h.call(this)},renderLayoutIndex:function(){this.load(jQuery("#admin-templates-index")).interpolate({layouts:Layout.find_all_by_class("Layout").map(function(h){return h.attributes}),partials:Layout.find_all_by_class("Partial").map(function(h){return h.attributes}),
javascripts:Layout.find_all_by_class("Javascript").map(function(h){return h.attributes}),stylesheets:Layout.find_all_by_class("Stylesheet").map(function(h){return h.attributes})},"mustache").replace("#sidebar")},renderLayout:function(h){this.load(jQuery("#admin-templates-edit")).interpolate({layout:h.asJSON(),filters:[{name:"none",value:"none",selected:h.attr("filter")=="css"?'selected="selected"':""},{name:"Sass",value:"sass",selected:h.attr("filter")=="sass"?'selected="selected"':""},{name:"Scss",
value:"scss",selected:h.attr("filter")=="scss"?'selected="selected"':""}]},"mustache").replace("#editor").then(function(){var j=jQuery("#layout_content");j.attr("value",h.attr("content"));j=j.attr("class");jQuery("#layout_content").length>0&&CodeMirror.fromTextArea(document.getElementById("layout_content"),{mode:j,lineNumbers:true})})}});this.bind("run",function(){g.refresh_templates=true;g.refresh_pages=true;g.modal=false});this.get("#/templates",function(h){Galerie.close();g.refresh_templates=false;
g.refresh_pages=true;jQuery("#editor").html('<h1 class="section">Templates</div>');h.loadLayouts(function(){h.renderLayoutIndex(Layout.all())})});this.get("#/templates/new/:klass",function(h){this.loadLayouts(function(){var j=$("<div />").attr({id:"new-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(j);h.load(jQuery("#admin-templates-new")).interpolate({klass:h.params.klass},"mustache").replace("#new-page-container");h.renderLayoutIndex(Layout.all())})});this.post("#/templates",
function(h){(new Layout(h.params.template)).save(function(j,o){var u=JSON.parse(o.responseText);if(u.errors)Utilities.notice(JSON.stringify(u));else{h.redirect("#/templates");Utilities.notice("Successfully saved template")}})});this.get("#/templates/:id/edit",function(h){Galerie.close();g.refresh_pages=true;this.loadLayouts(function(){var j=Layout.find(h.params.id);h.renderLayout(j);h.renderLayoutIndex(Layout.all())})});this.put("#/templates/:id",function(h){var j=Layout.find(h.params.id);j.attr(h.params.layout);
j.save(function(o){if(o){h.renderLayoutIndex();Utilities.notice("Successfully saved template")}})});this.get("#/templates/:id/remove",function(h){this.loadLayouts(function(){var j=Layout.find(h.params.id);Galerie.open();h.load(jQuery("#admin-templates-remove")).interpolate({layout:j.asJSON()},"mustache").replace("#modal");h.renderLayoutIndex(Layout.all())})});this.del("/templates/:id",function(h){Layout.find(h.params.id).destroy(function(j){if(j){h.renderLayoutIndex();Utilities.notice("Successfully deleted template");
h.redirect("#/templates")}})});this.post("/layouts/:id/parts",function(h){this.loadLayouts(function(){var j=h.params.id;Part.create(h.params.part,function(){h.redirect("#/templates/"+j+"/edit")})})})}),Assets=Sammy(function(){var g=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.swap=function(h){jQuery("#editor").html(h)};this.helpers({loadAssets:function(h,j){if(Asset.all().length==0)Asset.searchAdmin(h,function(){j&&
j.call(this)});else j&&j.call(this)},send_files:function(h,j,o){for(var u=0,t=0;t<h.length;t++){var z=h[t];Asset.create(z,{before:function(K){jQuery(".progress").append('<p id="progress-'+K+'">'+z.name+'<span class="percentage"></span></p>')},progress:function(K,E){jQuery("#progress-"+K+" .percentage").text(" "+E+"%")},success:function(){u+=1;u==h.length&&Asset.searchAdmin(j,function(){o&&o.call(this)})}})}}});this.bind("run",function(){g.modal=false;g.first_run=true});this.get("#/assets",function(h){var j=
h.params.query,o=j?{query:j}:{};o.limit=h.params.limit||48;o.page=h.params.page||1;Galerie.close();g.modal||Asset.searchAdmin(o,function(){h.load(jQuery("#admin-assets-index")).interpolate(Asset.toMustache(j),"mustache").replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple","multiple")})});g.modal=false;g.first_run=false});this.get("#/assets/new",function(h){h.load(jQuery("#admin-assets-new")).interpolate({},"mustache").replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple",
"multiple")});g.first_run=false});this.post("/admin/assets",function(h){var j=this,o=document.getElementById("ajax_uploader").files,u=h.params.query?h.params.query:null;jQuery("form#new_asset");var t=u?{query:u}:{};t.limit=h.params.limit||48;t.page=h.params.page||1;this.send_files(o,t,function(){j.render("/templates/admin/assets/index.mustache",Asset.toMustache(t.query)).replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple","multiple")})});return false});this.get("#/assets/:id/edit",
function(h){var j=h.params.query?h.params.query:null;this.loadAssets(j?{query:h.params.query}:{},function(){var o=Asset.find(h.params.id);h.load(jQuery("#admin-assets-edit")).interpolate(o.toMustacheWithNeighbors(j),"mustache").replace("#editor").then(function(){setTimeout(function(){$("img.fade-in").fadeIn("slow")},100);Utilities.formObserver(".image-info input[type=text], .image-info textarea")})});g.modal=false});this.put("#/assets/:id",function(h){var j=Asset.find(h.params.id);j.attr(h.params.asset);
j.save(function(o){o&&Utilities.notice("Successfully saved asset")})});this.get("#/assets/:id/remove",function(h){var j=h.params.query?h.params.query:null,o=j?{query:h.params.query}:null;jQuery(".modal-strip").remove();this.loadAssets(o,function(){var u=Asset.find(h.params.id);if(g.first_run){var t=h.load(jQuery("#admin-assets-edit")).interpolate(Asset.toMustache(j),"mustache"),z=h.load(jQuery("#admin-assets-remove")).interpolate({asset:u.toMustache(j)},"mustache");t.replace("#editor").then(function(){var K=
jQuery("#asset-"+u.id());z.appendTo(K).then(function(){jQuery(".modal-strip").fadeIn("fast").css({})})})}else{t=jQuery("#asset-"+u.id());z=h.load(jQuery("#admin-assets-remove")).interpolate({asset:u.toMustache(j)},"mustache");z.appendTo(t).then(function(){jQuery(".modal-strip").fadeIn("fast").css({})})}})});this.del("#/assets/:id",function(h){var j=h.params.query?h.params.query:null,o=j?"?"+decodeURIComponent(jQuery.param({query:j})):"";Asset.find(h.params.id).destroy(function(u){if(u){Galerie.close();
Utilities.notice("Successfully saved asset");h.redirect("#/assets"+o)}})})}),Pages=Sammy(function(g){var h=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);g.helpers({loadPages:function(j){if(Page.all().length==0)Page.load(function(){Layout.load(function(){j&&j.call(this)})});else j&&j.call(this)},renderTree:function(j,o){var u=this;u.load(jQuery("#admin-pages-node")).interpolate({pages:[j.asJSON()]},"mustache").replace("#sidebar").then(function(){u.renderNode(j,
o);j.id()==o.id()&&jQuery("li#page-"+j.id()).addClass("active")})},renderNode:function(j,o){var u=this;u.load(jQuery("#admin-pages-node")).interpolate(j.children().toMustache(),"mustache").appendTo("#page-"+j.id()).then(function(){j.children().each(function(t){t.id()==o.id()&&jQuery("li#page-"+t.id()).addClass("active");if(t.has_children()==true){jQuery("#page-"+t.id()).addClass("open");u.renderNode(t,o)}})})},renderPagePreview:function(j,o){h.modal||this.load(jQuery("#admin-pages-show")).interpolate({page:j.asJSON(),
layouts:Layout.asLayoutJSON(j.attr("layout_id")),base_page_id:j.id()},"mustache").replace("#editor").then(function(){iFramer.initialize(".preview iframe",function(){o&&o.call(this)});jQuery("li.node").removeClass("active");jQuery("#page-"+j.id()).addClass("active")})},open_page_editor:function(){var j=jQuery("#page-editor"),o=jQuery("#page-title");j.addClass("open").animate({height:"200px"},300);o.removeAttr("disabled").focus()},close_page_editor:function(){var j=jQuery("#page-editor"),o=jQuery("#page-title");
j.removeClass("open").animate({height:"0"},300);o.attr("disabled","disabled")}});this.bind("page-index",function(){var j=this;jQuery(".page-children").length||j.loadPages(function(){j.renderTree(Page.root(),Page.root())})});this.bind("run",function(){h.application=this;h.refresh_pages=true;h.modal=false;jQuery(".add-asset").live("click",function(){h.application.trigger("add-asset");return false});jQuery("#sidebar .opener").live("click",function(){var j=(new Date).getTime();j=$(this).parents("li:first");
var o=this.id.split("-")[2],u=Page.find(o),t=jQuery.cookie("active_page_ids");t=t?t.split(","):[];if(j.hasClass("open")){j.toggleClass("open");t=jQuery.grep(t,function(z){return z!=o});jQuery.cookie("active_page_ids",t.join(","),{path:"/admin"});u.children().each(function(z){Page.remove(z)});jQuery("#page-"+o+" ul").remove()}else{t.push(o);j.toggleClass("open");j=(new Date).getTime();jQuery.cookie("active_page_ids",t.join(","),{path:"/admin"});Page.load(function(){h.application.renderNode(u)})}h.refresh_pages=
false;return h.modal=false})});this.get("#/pages/?",function(j){Galerie.close();j.trigger("page-index");jQuery("#editor").html('<h1 class="section">Pages</div>');h.do_not_refresh=false});this.get("#/pages/:id/new/?",function(j){this.loadPages(function(){var o=Page.find(j.params.id),u=$("<div />").attr({id:"new-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(u);j.trigger("page-index");j.load(jQuery("#admin-pages-new")).interpolate({parent:o.asJSON(),layouts:Layout.asLayoutJSON(o.attr("layout_id"))},
"mustache").replace("#new-page-container")})});this.post("#/pages/:page_id",function(j){Page.find(j.params.page_id);(new Page(j.params.page)).save(function(o,u){var t=JSON.parse(u.responseText);if(t.errors)alert(JSON.stringify(t));else{h.refresh_pages=true;Utilities.notice("Successfully saved page");j.redirect("#/pages/"+t.id)}})});this.get("#/pages/:id/?",function(j){var o=this;Galerie.close();jQuery(".modal-editor").remove();this.loadPages(function(){var u=j.params.id,t=Page.find(u);if(h.do_not_refresh)o.close_page_editor();
else{if(t)j.renderPagePreview(t);else{t=new Page({id:u});t.load(function(){j.renderPagePreview(t)})}h.modal=false;h.do_not_refresh=false;j.trigger("page-index")}});h.do_not_refresh=false});this.get("#/pages/:id/edit/?",function(j){var o=this;Galerie.close();h.modal=false;this.loadPages(function(){var u=Page.find(j.params.id);if(jQuery("#preview-"+u.id()).length)o.open_page_editor();else{j.renderPagePreview(u,function(){o.open_page_editor()});j.trigger("page-index")}});h.do_not_refresh=true});this.put("#/pages/:page_id",
function(j){var o=Page.find(j.params.page_id);o.attr(j.params.page);o.save(function(u){if(u){h.modal=false;Utilities.notice("Successfully saved page");j.renderTree(Page.root(),o)}})});this.get("#/pages/:id/remove",function(j){this.loadPages(function(){var o=Page.find(j.params.id),u=$("<div />").attr({id:"remove-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(u);j.trigger("page-index");j.load(jQuery("#admin-pages-remove")).interpolate({page:o.asJSON()},"mustache").replace("#remove-page-container")})});
this.del("/pages/:id",function(j){var o=j.params.id;Page.find(o).destroy(function(u){if(u){jQuery("#page-"+o).remove();h.refresh_pages=false;j.redirect("#/pages")}})})}),Parts=Sammy(function(g){var h=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);g.helpers({render_part:function(j,o,u){var t=this;t.load(jQuery("#admin-"+u+"-edit")).interpolate({part:j.asJSON(),page:o.asJSON(),assets:Asset.asJSON()},"mustache").appendTo(jQuery("body")).then(function(){var z=
jQuery(".modal-editor"),K=$("iframe").contents(),E=K.find("#editor-"+j.id());z.fadeIn("fast").css({top:E.offset().top-K.find("body").scrollTop()+"px",left:E.offset().left+400+"px"});t.set_asset_links(j,o);jQuery("#ajax_uploader").attr("multiple","multiple").change(function(){var y=jQuery(this).parents("form:first");jQuery(".progress").slideDown("slow",function(){y.submit()})});t.trigger("page-index");h.modal=true})},set_asset_links:function(j,o){jQuery("#search-results-container li.asset").each(function(u,
t){var z=jQuery(t).find("a"),K=jQuery(t).attr("id").split("-")[1];z.click(function(E){E.preventDefault();E=o.attr("parts");for(var y=0,Q=E.length;y<Q;++y){var X=E[y];if(j.id()==X.id){X.asset_id=K;j.attr("asset_id",K);j.save()}}o.save(function(){jQuery(".modal-editor").remove();h.modal=false;document.location.hash="#"+o.attr("admin_path")})})})}});this.get("#/pages/:page_id/parts/:id/edit",function(j){jQuery(".modal-editor").remove();var o=$("iframe");this.loadPages(function(){Page.load_by_id(j.params.page_id,
function(){var u=Page.find(j.params.page_id),t=u.parts().find(j.params.id),z=jQuery("#page-updated_at").attr("value");if(o.length)if(z!=u.attr("updated_at")){var K=jQuery(".preview iframe");K.hide().attr("src",K.attr("src"));K.load(function(){K.fadeIn("fast");j.render_part(t,u,"parts")})}else j.render_part(t,u,"parts");else j.renderPagePreview(u,function(){j.render_part(t,u,"parts")})})})});this.get("#/pages/:page_id/image_parts/:id/edit",function(j){var o=this;jQuery(".modal-editor").remove();o.loadPages(function(){var u=
Page.find(j.params.page_id),t=u.parts().find(j.params.id),z=$("iframe");Asset.searchAdmin({limit:"8"},function(){z.length?o.render_part(t,u,"image_parts"):j.renderPagePreview(u,function(){o.render_part(t,u,"image_parts")})})})});this.get("/pages/:page_id/parts/:id/results",function(j){var o=this;this.loadPages(function(){var u=Page.find(j.params.page_id),t=Part.find(j.params.id),z=j.params.query?j.params.query:null;Asset.searchAdmin(z?{query:z}:{},function(){j.render("/templates/admin/pages/search_results.mustache",
Asset.toMustache()).replace("#search-results-container").then(function(){o.set_asset_links(t,u)})})})});this.put("#/pages/:page_id/parts/:id",function(j){var o=j.params.id,u=j.params.page_id,t=Page.find(u),z=t.parts().find(o);logger.info(j.params.part);for(var K=t.attr("parts"),E=0,y=K.length;E<y;++E){z=K[E];if(o==z.id){var Q=j.params.part.content;z.content=Q;z=Part.find(z.id);z.attr("content",Q);z.save()}}t.save(function(X){if(X){h.modal=false;j.redirect("#/pages/"+u)}})});this.post("#/pages/:page_id/image_parts/:id/assets",
function(j){var o=this,u=Page.find(j.params.page_id),t=u.parts().find(j.params.id),z=document.getElementById("ajax_uploader").files,K=j.params.query?j.params.query:null;jQuery("form#new_asset");K=K?{query:K}:{};K.limit=j.params.limit||48;K.page=j.params.page||1;this.send_files(z,K,function(){j.render("/templates/admin/pages/search_results.mustache",Asset.toMustache()).replace("#search-results-container").then(function(){jQuery("#ajax_uploader").attr("files",null);jQuery(".progress").slideUp("slow",
function(){jQuery(this).html("")});o.set_asset_links(t,u)})})})}),Users=Sammy(function(){var g=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.helpers({loadUsers:function(h){if(User.all().length==0)User.load(function(){h&&h.call(this)});else h&&h.call(this)},renderUserIndex:function(h){this.load(jQuery("#admin-users-index")).interpolate(User.toMustache(),"mustache").replace("#editor").then(function(){h&&h.call(this)})}});
this.bind("run",function(){g.modal=false;g.refresh_pages=true});this.get("#/users",function(h){Galerie.close();jQuery("#editor").html('<h1 class="section">Users</div>');h.loadUsers(function(){h.renderUserIndex()})});this.get("#/users/new",function(h){h.loadUsers(function(){jQuery("#modal").length||Galerie.open();h.load(jQuery("#admin-users-new")).interpolate({},"mustache").replace("#modal");h.renderUserIndex()})});this.post("#/users",function(h){(new User(h.params.user)).save(function(j,o){var u=
JSON.parse(o.responseText);u.errors?alert(JSON.stringify(u)):h.redirect("#/users")})});this.get("#/users/:id/edit",function(h){h.loadUsers(function(){user=User.find(h.params.id);if(jQuery("#users").length){jQuery(".user-form").html("");h.load(jQuery("#admin-users-edit")).interpolate({user:user.asJSON()},"mustache").replace("#user-form-"+user.id())}else h.renderUserIndex(function(){jQuery(".user-form").html("");h.load(jQuery("#admin-users-edit")).interpolate({user:user.asJSON()},"mustache").replace("#user-form-"+
user.id())})})});this.put("#/users/:id",function(h){var j=User.find(h.params.id);j.attr(h.params.user);j.save(function(o,u){var t=JSON.parse(u.responseText);t.errors?alert(JSON.stringify(t)):h.redirect("#/users")})})});
jQuery(document).ready(function(){jQuery("body").ajaxStart(function(){logger.info("starting")});jQuery("body").ajaxSuccess(function(){logger.info("success!")});jQuery("#login").length||jQuery.ajax({url:"/templates",success:function(g){jQuery("head").append(g);Pages.run("#/pages")}});Utilities.keyboard_nav();Utilities.check_browser_version()});
