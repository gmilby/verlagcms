(function(c,a){function e(b){return f.isWindow(b)?b:b.nodeType===9?b.defaultView||b.parentWindow:false}function g(b){if(!db[b]){var h=X.body,d=f("<"+b+">").appendTo(h),j=d.css("display");d.remove();if(j==="none"||j===""){Xa||(Xa=X.createElement("iframe"),Xa.frameBorder=Xa.width=Xa.height=0);h.appendChild(Xa);if(!Ha||!Xa.createElement){Ha=(Xa.contentWindow||Xa.contentDocument).document;Ha.write((X.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");Ha.close()}d=Ha.createElement(b);Ha.body.appendChild(d);
j=f.css(d,"display");h.removeChild(Xa)}db[b]=j}return db[b]}function i(b,h){var d={};f.each(Pa.concat.apply([],Pa.slice(0,h)),function(){d[this]=b});return d}function l(){qb=a}function n(){setTimeout(l,0);return qb=f.now()}function v(){try{return new c.XMLHttpRequest}catch(b){}}function x(b,h,d,j){if(f.isArray(h))f.each(h,function(m,o){d||eb.test(b)?j(b,o):x(b+"["+(typeof o=="object"||f.isArray(o)?m:"")+"]",o,d,j)});else if(!d&&h!=null&&typeof h=="object")for(var k in h)x(b+"["+k+"]",h[k],d,j);else j(b,
h)}function s(b,h,d,j,k,m){k=k||h.dataTypes[0];m=m||{};m[k]=true;k=b[k];for(var o=0,q=k?k.length:0,u=b===cb,w;o<q&&(u||!w);o++){w=k[o](h,d,j);typeof w=="string"&&(!u||m[w]?(w=a):(h.dataTypes.unshift(w),w=s(b,h,d,j,w,m)))}(u||!w)&&!m["*"]&&(w=s(b,h,d,j,"*",m));return w}function D(b){return function(h,d){typeof h!="string"&&(d=h,h="*");if(f.isFunction(d))for(var j=h.toLowerCase().split(cc),k=0,m=j.length,o,q;k<m;k++){o=j[k];(q=/^\+/.test(o))&&(o=o.substr(1)||"*");o=b[o]=b[o]||[];o[q?"unshift":"push"](d)}}}
function K(b,h,d){var j=h==="width"?b.offsetWidth:b.offsetHeight,k=h==="width"?oa:Qb;if(j>0){d!=="border"&&f.each(k,function(){d||(j-=parseFloat(f.css(b,"padding"+this))||0);d==="margin"?(j+=parseFloat(f.css(b,d+this))||0):(j-=parseFloat(f.css(b,"border"+this+"Width"))||0)});return j+"px"}j=fb(b,h,h);if(j<0||j==null)j=b.style[h]||0;j=parseFloat(j)||0;d&&f.each(k,function(){j+=parseFloat(f.css(b,"padding"+this))||0;d!=="padding"&&(j+=parseFloat(f.css(b,"border"+this+"Width"))||0);d==="margin"&&(j+=
parseFloat(f.css(b,d+this))||0)});return j+"px"}function ba(b,h){h.src?f.ajax({url:h.src,async:false,dataType:"script"}):f.globalEval((h.text||h.textContent||h.innerHTML||"").replace(dc,"/*$0*/"));h.parentNode&&h.parentNode.removeChild(h)}function ka(b){f.nodeName(b,"input")?ma(b):"getElementsByTagName"in b&&f.grep(b.getElementsByTagName("input"),ma)}function ma(b){if(b.type==="checkbox"||b.type==="radio")b.defaultChecked=b.checked}function p(b){return"getElementsByTagName"in b?b.getElementsByTagName("*"):
"querySelectorAll"in b?b.querySelectorAll("*"):[]}function t(b,h){var d;if(h.nodeType===1){h.clearAttributes&&h.clearAttributes();h.mergeAttributes&&h.mergeAttributes(b);d=h.nodeName.toLowerCase();if(d==="object")h.outerHTML=b.outerHTML;else if(d!=="input"||b.type!=="checkbox"&&b.type!=="radio")if(d==="option")h.selected=b.defaultSelected;else{if(d==="input"||d==="textarea")h.defaultValue=b.defaultValue}else{b.checked&&(h.defaultChecked=h.checked=b.checked);h.value!==b.value&&(h.value=b.value)}h.removeAttribute(f.expando)}}
function B(b,h){if(h.nodeType===1&&f.hasData(b)){var d=f.expando,j=f.data(b),k=f.data(h,j);if(j=j[d]){var m=j.events;k=k[d]=f.extend({},j);if(m){delete k.handle;k.events={};for(var o in m){d=0;for(j=m[o].length;d<j;d++)f.event.add(h,o+(m[o][d].namespace?".":"")+m[o][d].namespace,m[o][d],m[o][d].data)}}}}}function E(b,h,d){h=h||0;if(f.isFunction(h))return f.grep(b,function(k,m){return!!h.call(k,m,k)===d});if(h.nodeType)return f.grep(b,function(k){return k===h===d});if(typeof h=="string"){var j=f.grep(b,
function(k){return k.nodeType===1});if(Ka.test(h))return f.filter(h,j,!d);h=f.filter(h,j)}return f.grep(b,function(k){return f.inArray(k,h)>=0===d})}function Y(b,h){return(b&&b!=="*"?b+".":"")+h.replace(La,"`").replace(gb,"&")}function pa(b){var h,d,j,k,m,o,q,u,w,A,F,R=[];k=[];m=f._data(this,"events");if(!(b.liveFired===this||!m||!m.live||b.target.disabled||b.button&&b.type==="click")){b.namespace&&(F=new RegExp("(^|\\.)"+b.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)"));b.liveFired=this;var da=
m.live.slice(0);for(q=0;q<da.length;q++){m=da[q];m.origType.replace(sa,"")===b.type?k.push(m.selector):da.splice(q--,1)}k=f(b.target).closest(k,b.currentTarget);u=0;for(w=k.length;u<w;u++){A=k[u];for(q=0;q<da.length;q++){m=da[q];if(A.selector===m.selector&&(!F||F.test(m.namespace))&&!A.elem.disabled){o=A.elem;j=null;if(m.preType==="mouseenter"||m.preType==="mouseleave"){b.type=m.preType;(j=f(b.relatedTarget).closest(m.selector)[0])&&f.contains(o,j)&&(j=o)}(!j||j!==o)&&R.push({elem:o,handleObj:m,level:A.level})}}}u=
0;for(w=R.length;u<w;u++){k=R[u];if(d&&k.level>d)break;b.currentTarget=k.elem;b.data=k.handleObj.data;b.handleObj=k.handleObj;F=k.handleObj.origHandler.apply(k.elem,arguments);if(F===false||b.isPropagationStopped()){d=k.level;F===false&&(h=false);if(b.isImmediatePropagationStopped())break}}return h}}function T(b,h,d){var j=f.extend({},d[0]);j.type=b;j.originalEvent={};j.liveFired=a;f.event.handle.call(h,j);j.isDefaultPrevented()&&d[0].preventDefault()}function ga(){return true}function ha(){return false}
function xa(b,h,d){var j=h+"defer",k=h+"queue",m=h+"mark",o=f.data(b,j,a,true);o&&(d==="queue"||!f.data(b,k,a,true))&&(d==="mark"||!f.data(b,m,a,true))&&setTimeout(function(){!f.data(b,k,a,true)&&!f.data(b,m,a,true)&&(f.removeData(b,j,true),o.resolve())},0)}function Oa(b){for(var h in b)if(h!=="toJSON")return false;return true}function Ra(b,h,d){if(d===a&&b.nodeType===1){d="data-"+h.replace(S,"$1-$2").toLowerCase();d=b.getAttribute(d);if(typeof d=="string"){try{d=d==="true"?true:d==="false"?false:
d==="null"?null:f.isNaN(d)?O.test(d)?f.parseJSON(d):d:parseFloat(d)}catch(j){}f.data(b,h,d)}else d=a}return d}var X=c.document,Q=c.navigator,V=c.location,f=function(){function b(){if(!h.isReady){try{X.documentElement.doScroll("left")}catch(z){setTimeout(b,1);return}h.ready()}}var h=function(z,M){return new h.fn.init(z,M,k)},d=c.jQuery,j=c.$,k,m=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,o=/\S/,q=/^\s+/,u=/\s+$/,w=/\d/,A=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,F=/^[\],:{}\s]*$/,R=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
da=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,na=/(?:^|:|,)(?:\s*\[)+/g,Ia=/(webkit)[ \/]([\w.]+)/,za=/(opera)(?:.*version)?[ \/]([\w.]+)/,Ba=/(msie) ([\w.]+)/,Ca=/(mozilla)(?:.*? rv:([\w.]+))?/,r=/-([a-z])/ig,y=function(z,M){return M.toUpperCase()},H=Q.userAgent,J,G,L=Object.prototype.toString,U=Object.prototype.hasOwnProperty,aa=Array.prototype.push,ra=Array.prototype.slice,Ma=String.prototype.trim,Ja=Array.prototype.indexOf,Sa={};h.fn=h.prototype={constructor:h,init:function(z,
M,ea){var Z,qa;if(!z)return this;if(z.nodeType){this.context=this[0]=z;this.length=1;return this}if(z==="body"&&!M&&X.body){this.context=X;this[0]=X.body;this.selector=z;this.length=1;return this}if(typeof z=="string"){z.charAt(0)!=="<"||z.charAt(z.length-1)!==">"||z.length<3?(Z=m.exec(z)):(Z=[null,z,null]);if(Z&&(Z[1]||!M)){if(Z[1]){qa=(M=M instanceof h?M[0]:M)?M.ownerDocument||M:X;(ea=A.exec(z))?h.isPlainObject(M)?(z=[X.createElement(ea[1])],h.fn.attr.call(z,M,true)):(z=[qa.createElement(ea[1])]):
(ea=h.buildFragment([Z[1]],[qa]),z=(ea.cacheable?h.clone(ea.fragment):ea.fragment).childNodes);return h.merge(this,z)}if((M=X.getElementById(Z[2]))&&M.parentNode){if(M.id!==Z[2])return ea.find(z);this.length=1;this[0]=M}this.context=X;this.selector=z;return this}return!M||M.jquery?(M||ea).find(z):this.constructor(M).find(z)}if(h.isFunction(z))return ea.ready(z);z.selector!==a&&(this.selector=z.selector,this.context=z.context);return h.makeArray(z,this)},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},
toArray:function(){return ra.call(this,0)},get:function(z){return z==null?this.toArray():z<0?this[this.length+z]:this[z]},pushStack:function(z,M,ea){var Z=this.constructor();h.isArray(z)?aa.apply(Z,z):h.merge(Z,z);Z.prevObject=this;Z.context=this.context;M==="find"?(Z.selector=this.selector+(this.selector?" ":"")+ea):M&&(Z.selector=this.selector+"."+M+"("+ea+")");return Z},each:function(z,M){return h.each(this,z,M)},ready:function(z){h.bindReady();J.done(z);return this},eq:function(z){return z===
-1?this.slice(z):this.slice(z,+z+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(ra.apply(this,arguments),"slice",ra.call(arguments).join(","))},map:function(z){return this.pushStack(h.map(this,function(M,ea){return z.call(M,ea,M)}))},end:function(){return this.prevObject||this.constructor(null)},push:aa,sort:[].sort,splice:[].splice};h.fn.init.prototype=h.fn;h.extend=h.fn.extend=function(){var z,M,ea,Z,qa,Aa,Da=arguments[0]||{},Fa=
1,vb=arguments.length,wb=false;typeof Da=="boolean"&&(wb=Da,Da=arguments[1]||{},Fa=2);typeof Da!="object"&&!h.isFunction(Da)&&(Da={});for(vb===Fa&&(Da=this,--Fa);Fa<vb;Fa++)if((z=arguments[Fa])!=null)for(M in z){ea=Da[M];Z=z[M];if(Da!==Z)wb&&Z&&(h.isPlainObject(Z)||(qa=h.isArray(Z)))?(qa?(qa=false,Aa=ea&&h.isArray(ea)?ea:[]):(Aa=ea&&h.isPlainObject(ea)?ea:{}),Da[M]=h.extend(wb,Aa,Z)):Z!==a&&(Da[M]=Z)}return Da};h.extend({noConflict:function(z){c.$===h&&(c.$=j);z&&c.jQuery===h&&(c.jQuery=d);return h},
isReady:false,readyWait:1,holdReady:function(z){z?h.readyWait++:h.ready(true)},ready:function(z){if(z===true&&!--h.readyWait||z!==true&&!h.isReady){if(!X.body)return setTimeout(h.ready,1);h.isReady=true;if(!(z!==true&&--h.readyWait>0)){J.resolveWith(X,[h]);h.fn.trigger&&h(X).trigger("ready").unbind("ready")}}},bindReady:function(){if(!J){J=h._Deferred();if(X.readyState==="complete")return setTimeout(h.ready,1);if(X.addEventListener){X.addEventListener("DOMContentLoaded",G,false);c.addEventListener("load",
h.ready,false)}else if(X.attachEvent){X.attachEvent("onreadystatechange",G);c.attachEvent("onload",h.ready);var z=false;try{z=c.frameElement==null}catch(M){}X.documentElement.doScroll&&z&&b()}}},isFunction:function(z){return h.type(z)==="function"},isArray:Array.isArray||function(z){return h.type(z)==="array"},isWindow:function(z){return z&&typeof z=="object"&&"setInterval"in z},isNaN:function(z){return z==null||!w.test(z)||isNaN(z)},type:function(z){return z==null?String(z):Sa[L.call(z)]||"object"},
isPlainObject:function(z){if(!z||h.type(z)!=="object"||z.nodeType||h.isWindow(z))return false;if(z.constructor&&!U.call(z,"constructor")&&!U.call(z.constructor.prototype,"isPrototypeOf"))return false;var M;for(M in z);return M===a||U.call(z,M)},isEmptyObject:function(z){for(var M in z)return false;return true},error:function(z){throw z;},parseJSON:function(z){if(typeof z!="string"||!z)return null;z=h.trim(z);if(c.JSON&&c.JSON.parse)return c.JSON.parse(z);if(F.test(z.replace(R,"@").replace(da,"]").replace(na,
"")))return(new Function("return "+z))();h.error("Invalid JSON: "+z)},parseXML:function(z,M,ea){c.DOMParser?(ea=new DOMParser,M=ea.parseFromString(z,"text/xml")):(M=new ActiveXObject("Microsoft.XMLDOM"),M.async="false",M.loadXML(z));ea=M.documentElement;(!ea||!ea.nodeName||ea.nodeName==="parsererror")&&h.error("Invalid XML: "+z);return M},noop:function(){},globalEval:function(z){z&&o.test(z)&&(c.execScript||function(M){c.eval.call(c,M)})(z)},camelCase:function(z){return z.replace(r,y)},nodeName:function(z,
M){return z.nodeName&&z.nodeName.toUpperCase()===M.toUpperCase()},each:function(z,M,ea){var Z,qa=0,Aa=z.length,Da=Aa===a||h.isFunction(z);if(ea)if(Da)for(Z in z){if(M.apply(z[Z],ea)===false)break}else for(;qa<Aa;){if(M.apply(z[qa++],ea)===false)break}else if(Da)for(Z in z){if(M.call(z[Z],Z,z[Z])===false)break}else for(;qa<Aa;)if(M.call(z[qa],qa,z[qa++])===false)break;return z},trim:Ma?function(z){return z==null?"":Ma.call(z)}:function(z){return z==null?"":(z+"").replace(q,"").replace(u,"")},makeArray:function(z,
M){var ea=M||[];if(z!=null){var Z=h.type(z);z.length==null||Z==="string"||Z==="function"||Z==="regexp"||h.isWindow(z)?aa.call(ea,z):h.merge(ea,z)}return ea},inArray:function(z,M){if(Ja)return Ja.call(M,z);for(var ea=0,Z=M.length;ea<Z;ea++)if(M[ea]===z)return ea;return-1},merge:function(z,M){var ea=z.length,Z=0;if(typeof M.length=="number")for(var qa=M.length;Z<qa;Z++)z[ea++]=M[Z];else for(;M[Z]!==a;)z[ea++]=M[Z++];z.length=ea;return z},grep:function(z,M,ea){var Z=[],qa;ea=!!ea;for(var Aa=0,Da=z.length;Aa<
Da;Aa++){qa=!!M(z[Aa],Aa);ea!==qa&&Z.push(z[Aa])}return Z},map:function(z,M,ea){var Z,qa,Aa=[],Da=0,Fa=z.length;if(z instanceof h||Fa!==a&&typeof Fa=="number"&&(Fa>0&&z[0]&&z[Fa-1]||Fa===0||h.isArray(z)))for(;Da<Fa;Da++){Z=M(z[Da],Da,ea);Z!=null&&(Aa[Aa.length]=Z)}else for(qa in z){Z=M(z[qa],qa,ea);Z!=null&&(Aa[Aa.length]=Z)}return Aa.concat.apply([],Aa)},guid:1,proxy:function(z,M){if(typeof M=="string"){var ea=z[M];M=z;z=ea}if(!h.isFunction(z))return a;var Z=ra.call(arguments,2);ea=function(){return z.apply(M,
Z.concat(ra.call(arguments)))};ea.guid=z.guid=z.guid||ea.guid||h.guid++;return ea},access:function(z,M,ea,Z,qa,Aa){var Da=z.length;if(typeof M=="object"){for(var Fa in M)h.access(z,Fa,M[Fa],Z,qa,ea);return z}if(ea!==a){Z=!Aa&&Z&&h.isFunction(ea);for(Fa=0;Fa<Da;Fa++)qa(z[Fa],M,Z?ea.call(z[Fa],Fa,qa(z[Fa],M)):ea,Aa);return z}return Da?qa(z[0],M):a},now:function(){return(new Date).getTime()},uaMatch:function(z){z=z.toLowerCase();z=Ia.exec(z)||za.exec(z)||Ba.exec(z)||z.indexOf("compatible")<0&&Ca.exec(z)||
[];return{browser:z[1]||"",version:z[2]||"0"}},sub:function(){function z(ea,Z){return new z.fn.init(ea,Z)}h.extend(true,z,this);z.superclass=this;z.fn=z.prototype=this();z.fn.constructor=z;z.sub=this.sub;z.fn.init=function(ea,Z){Z&&Z instanceof h&&!(Z instanceof z)&&(Z=z(Z));return h.fn.init.call(this,ea,Z,M)};z.fn.init.prototype=z.fn;var M=z(X);return z},browser:{}});h.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(z,M){Sa["[object "+M+"]"]=M.toLowerCase()});H=
h.uaMatch(H);H.browser&&(h.browser[H.browser]=true,h.browser.version=H.version);h.browser.webkit&&(h.browser.safari=true);o.test("\u00a0")&&(q=/^[\s\xA0]+/,u=/[\s\xA0]+$/);k=h(X);X.addEventListener?(G=function(){X.removeEventListener("DOMContentLoaded",G,false);h.ready()}):X.attachEvent&&(G=function(){X.readyState==="complete"&&(X.detachEvent("onreadystatechange",G),h.ready())});return h}(),C="done fail isResolved isRejected promise then always pipe".split(" "),N=[].slice;f.extend({_Deferred:function(){var b=
[],h,d,j,k={done:function(){if(!j){var m=arguments,o,q,u,w,A;h&&(A=h,h=0);o=0;for(q=m.length;o<q;o++){u=m[o];w=f.type(u);w==="array"?k.done.apply(k,u):w==="function"&&b.push(u)}A&&k.resolveWith(A[0],A[1])}return this},resolveWith:function(m,o){if(!j&&!h&&!d){o=o||[];d=1;try{for(;b[0];)b.shift().apply(m,o)}finally{h=[m,o];d=0}}return this},resolve:function(){k.resolveWith(this,arguments);return this},isResolved:function(){return!!d||!!h},cancel:function(){j=1;b=[];return this}};return k},Deferred:function(b){var h=
f._Deferred(),d=f._Deferred(),j;f.extend(h,{then:function(k,m){h.done(k).fail(m);return this},always:function(){return h.done.apply(h,arguments).fail.apply(this,arguments)},fail:d.done,rejectWith:d.resolveWith,reject:d.resolve,isRejected:d.isResolved,pipe:function(k,m){return f.Deferred(function(o){f.each({done:[k,"resolve"],fail:[m,"reject"]},function(q,u){var w=u[0],A=u[1],F;f.isFunction(w)?h[q](function(){(F=w.apply(this,arguments))&&f.isFunction(F.promise)?F.promise().then(o.resolve,o.reject):
o[A](F)}):h[q](o[A])})}).promise()},promise:function(k){if(k==null){if(j)return j;j=k={}}for(var m=C.length;m--;)k[C[m]]=h[C[m]];return k}});h.done(d.cancel).fail(h.cancel);delete h.cancel;b&&b.call(h,h);return h},when:function(b){function h(q){return function(u){d[q]=arguments.length>1?N.call(arguments,0):u;--m||o.resolveWith(o,N.call(d,0))}}var d=arguments,j=0,k=d.length,m=k,o=k<=1&&b&&f.isFunction(b.promise)?b:f.Deferred();if(k>1){for(;j<k;j++)d[j]&&f.isFunction(d[j].promise)?d[j].promise().then(h(j),
o.reject):--m;m||o.resolveWith(o,d)}else o!==b&&o.resolveWith(o,k?[b]:[]);return o.promise()}});f.support=function(){var b=X.createElement("div"),h=X.documentElement,d,j,k,m,o,q,u;b.setAttribute("className","t");b.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";d=b.getElementsByTagName("*");j=b.getElementsByTagName("a")[0];if(!d||!d.length||!j)return{};k=X.createElement("select");m=k.appendChild(X.createElement("option"));d=b.getElementsByTagName("input")[0];
q={leadingWhitespace:b.firstChild.nodeType===3,tbody:!b.getElementsByTagName("tbody").length,htmlSerialize:!!b.getElementsByTagName("link").length,style:/top/.test(j.getAttribute("style")),hrefNormalized:j.getAttribute("href")==="/a",opacity:/^0.55$/.test(j.style.opacity),cssFloat:!!j.style.cssFloat,checkOn:d.value==="on",optSelected:m.selected,getSetAttribute:b.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,
shrinkWrapBlocks:false,reliableMarginRight:true};d.checked=true;q.noCloneChecked=d.cloneNode(true).checked;k.disabled=true;q.optDisabled=!m.disabled;try{delete b.test}catch(w){q.deleteExpando=false}!b.addEventListener&&b.attachEvent&&b.fireEvent&&(b.attachEvent("onclick",function(){q.noCloneEvent=false}),b.cloneNode(true).fireEvent("onclick"));d=X.createElement("input");d.value="t";d.setAttribute("type","radio");q.radioValue=d.value==="t";d.setAttribute("checked","checked");b.appendChild(d);j=X.createDocumentFragment();
j.appendChild(b.firstChild);q.checkClone=j.cloneNode(true).cloneNode(true).lastChild.checked;b.innerHTML="";b.style.width=b.style.paddingLeft="1px";k=X.getElementsByTagName("body")[0];j=X.createElement(k?"div":"body");m={visibility:"hidden",width:0,height:0,border:0,margin:0};k&&f.extend(m,{position:"absolute",left:-1000,top:-1000});for(u in m)j.style[u]=m[u];j.appendChild(b);h=k||h;h.insertBefore(j,h.firstChild);q.appendChecked=d.checked;q.boxModel=b.offsetWidth===2;"zoom"in b.style&&(b.style.display=
"inline",b.style.zoom=1,q.inlineBlockNeedsLayout=b.offsetWidth===2,b.style.display="",b.innerHTML="<div style='width:4px;'></div>",q.shrinkWrapBlocks=b.offsetWidth!==2);b.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";k=b.getElementsByTagName("td");d=k[0].offsetHeight===0;k[0].style.display="";k[1].style.display="none";q.reliableHiddenOffsets=d&&k[0].offsetHeight===0;b.innerHTML="";X.defaultView&&X.defaultView.getComputedStyle&&(o=X.createElement("div"),
o.style.width="0",o.style.marginRight="0",b.appendChild(o),q.reliableMarginRight=(parseInt((X.defaultView.getComputedStyle(o,null)||{marginRight:0}).marginRight,10)||0)===0);j.innerHTML="";h.removeChild(j);if(b.attachEvent)for(u in{submit:1,change:1,focusin:1}){o="on"+u;(d=o in b)||(b.setAttribute(o,"return;"),d=typeof b[o]=="function");q[u+"Bubbles"]=d}j=j=k=m=k=o=b=d=null;return q}();f.boxModel=f.support.boxModel;var O=/^(?:\{.*\}|\[.*\])$/,S=/([a-z])([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+
(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(b){b=b.nodeType?f.cache[b[f.expando]]:b[f.expando];return!!b&&!Oa(b)},data:function(b,h,d,j){if(f.acceptData(b)){var k=f.expando,m=typeof h=="string",o=b.nodeType,q=o?f.cache:b,u=o?b[f.expando]:b[f.expando]&&f.expando;if(!((!u||j&&u&&!q[u][k])&&m&&d===a)){u||(o?(b[f.expando]=u=++f.uuid):(u=f.expando));q[u]||(q[u]={},o||(q[u].toJSON=f.noop));if(typeof h==
"object"||typeof h=="function")j?(q[u][k]=f.extend(q[u][k],h)):(q[u]=f.extend(q[u],h));b=q[u];j&&(b[k]||(b[k]={}),b=b[k]);d!==a&&(b[f.camelCase(h)]=d);if(h==="events"&&!b[h])return b[k]&&b[k].events;return m?b[f.camelCase(h)]||b[h]:b}}},removeData:function(b,h,d){if(f.acceptData(b)){var j=f.expando,k=b.nodeType,m=k?f.cache:b,o=k?b[f.expando]:f.expando;if(m[o]){if(h){var q=d?m[o][j]:m[o];if(q){delete q[h];if(!Oa(q))return}}if(d){delete m[o][j];if(!Oa(m[o]))return}h=m[o][j];f.support.deleteExpando||
m!=c?delete m[o]:(m[o]=null);h?(m[o]={},k||(m[o].toJSON=f.noop),m[o][j]=h):k&&(f.support.deleteExpando?delete b[f.expando]:b.removeAttribute?b.removeAttribute(f.expando):(b[f.expando]=null))}}},_data:function(b,h,d){return f.data(b,h,d,true)},acceptData:function(b){if(b.nodeName){var h=f.noData[b.nodeName.toLowerCase()];if(h)return h!==true&&b.getAttribute("classid")===h}return true}});f.fn.extend({data:function(b,h){var d=null;if(typeof b=="undefined"){if(this.length){d=f.data(this[0]);if(this[0].nodeType===
1)for(var j=this[0].attributes,k,m=0,o=j.length;m<o;m++){k=j[m].name;k.indexOf("data-")===0&&(k=f.camelCase(k.substring(5)),Ra(this[0],k,d[k]))}}return d}if(typeof b=="object")return this.each(function(){f.data(this,b)});var q=b.split(".");q[1]=q[1]?"."+q[1]:"";if(h===a){d=this.triggerHandler("getData"+q[1]+"!",[q[0]]);d===a&&this.length&&(d=f.data(this[0],b),d=Ra(this[0],b,d));return d===a&&q[1]?this.data(q[0]):d}return this.each(function(){var u=f(this),w=[q[0],h];u.triggerHandler("setData"+q[1]+
"!",w);f.data(this,b,h);u.triggerHandler("changeData"+q[1]+"!",w)})},removeData:function(b){return this.each(function(){f.removeData(this,b)})}});f.extend({_mark:function(b,h){b&&(h=(h||"fx")+"mark",f.data(b,h,(f.data(b,h,a,true)||0)+1,true))},_unmark:function(b,h,d){b!==true&&(d=h,h=b,b=false);if(h){d=d||"fx";var j=d+"mark";(b=b?0:(f.data(h,j,a,true)||1)-1)?f.data(h,j,b,true):(f.removeData(h,j,true),xa(h,d,"mark"))}},queue:function(b,h,d){if(b){h=(h||"fx")+"queue";var j=f.data(b,h,a,true);d&&(!j||
f.isArray(d)?(j=f.data(b,h,f.makeArray(d),true)):j.push(d));return j||[]}},dequeue:function(b,h){h=h||"fx";var d=f.queue(b,h),j=d.shift();j==="inprogress"&&(j=d.shift());j&&(h==="fx"&&d.unshift("inprogress"),j.call(b,function(){f.dequeue(b,h)}));d.length||(f.removeData(b,h+"queue",true),xa(b,h,"queue"))}});f.fn.extend({queue:function(b,h){typeof b!="string"&&(h=b,b="fx");if(h===a)return f.queue(this[0],b);return this.each(function(){var d=f.queue(this,b,h);b==="fx"&&d[0]!=="inprogress"&&f.dequeue(this,
b)})},dequeue:function(b){return this.each(function(){f.dequeue(this,b)})},delay:function(b,h){b=f.fx?f.fx.speeds[b]||b:b;h=h||"fx";return this.queue(h,function(){var d=this;setTimeout(function(){f.dequeue(d,h)},b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,h){function d(){--o||j.resolveWith(k,[k])}typeof b!="string"&&(h=b,b=a);b=b||"fx";for(var j=f.Deferred(),k=this,m=k.length,o=1,q=b+"defer",u=b+"queue",w=b+"mark",A;m--;)if(A=f.data(k[m],q,a,true)||(f.data(k[m],
u,a,true)||f.data(k[m],w,a,true))&&f.data(k[m],q,f._Deferred(),true)){o++;A.done(d)}d();return j.promise()}});var la=/[\n\t\r]/g,ja=/\s+/,wa=/\r/g,Ga=/^(?:button|input)$/i,ua=/^(?:button|input|object|select|textarea)$/i,Na=/^a(?:rea)?$/i,I=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,fa=/\:|^on/,ca,ia;f.fn.extend({attr:function(b,h){return f.access(this,b,h,true,f.attr)},removeAttr:function(b){return this.each(function(){f.removeAttr(this,
b)})},prop:function(b,h){return f.access(this,b,h,true,f.prop)},removeProp:function(b){b=f.propFix[b]||b;return this.each(function(){try{this[b]=a;delete this[b]}catch(h){}})},addClass:function(b){var h,d,j,k,m,o,q;if(f.isFunction(b))return this.each(function(u){f(this).addClass(b.call(this,u,this.className))});if(b&&typeof b=="string"){h=b.split(ja);d=0;for(j=this.length;d<j;d++){k=this[d];if(k.nodeType===1)if(!k.className&&h.length===1)k.className=b;else{m=" "+k.className+" ";o=0;for(q=h.length;o<
q;o++)~m.indexOf(" "+h[o]+" ")||(m+=h[o]+" ");k.className=f.trim(m)}}}return this},removeClass:function(b){var h,d,j,k,m,o,q;if(f.isFunction(b))return this.each(function(u){f(this).removeClass(b.call(this,u,this.className))});if(b&&typeof b=="string"||b===a){h=(b||"").split(ja);d=0;for(j=this.length;d<j;d++){k=this[d];if(k.nodeType===1&&k.className)if(b){m=(" "+k.className+" ").replace(la," ");o=0;for(q=h.length;o<q;o++)m=m.replace(" "+h[o]+" "," ");k.className=f.trim(m)}else k.className=""}}return this},
toggleClass:function(b,h){var d=typeof b,j=typeof h=="boolean";if(f.isFunction(b))return this.each(function(k){f(this).toggleClass(b.call(this,k,this.className,h),h)});return this.each(function(){if(d==="string")for(var k,m=0,o=f(this),q=h,u=b.split(ja);k=u[m++];){q=j?q:!o.hasClass(k);o[q?"addClass":"removeClass"](k)}else if(d==="undefined"||d==="boolean"){this.className&&f._data(this,"__className__",this.className);this.className=this.className||b===false?"":f._data(this,"__className__")||""}})},
hasClass:function(b){for(var h=0,d=this.length;h<d;h++)if((" "+this[h].className+" ").replace(la," ").indexOf(" "+b+" ")>-1)return true;return false},val:function(b){var h,d,j=this[0];if(!arguments.length){if(j){if((h=f.valHooks[j.nodeName.toLowerCase()]||f.valHooks[j.type])&&"get"in h&&(d=h.get(j,"value"))!==a)return d;d=j.value;return typeof d=="string"?d.replace(wa,""):d==null?"":d}return a}var k=f.isFunction(b);return this.each(function(m){var o=f(this),q;if(this.nodeType===1){k?(q=b.call(this,
m,o.val())):(q=b);q==null?(q=""):typeof q=="number"?(q+=""):f.isArray(q)&&(q=f.map(q,function(u){return u==null?"":u+""}));h=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!h||!("set"in h)||h.set(this,q,"value")===a)this.value=q}})}});f.extend({valHooks:{option:{get:function(b){var h=b.attributes.value;return!h||h.specified?b.value:b.text}},select:{get:function(b){var h,d=b.selectedIndex,j=[],k=b.options;b=b.type==="select-one";if(d<0)return null;for(var m=b?d:0,o=b?d+1:k.length;m<
o;m++){h=k[m];if(h.selected&&(f.support.optDisabled?!h.disabled:h.getAttribute("disabled")===null)&&(!h.parentNode.disabled||!f.nodeName(h.parentNode,"optgroup"))){h=f(h).val();if(b)return h;j.push(h)}}if(b&&!j.length&&k.length)return f(k[d]).val();return j},set:function(b,h){var d=f.makeArray(h);f(b).find("option").each(function(){this.selected=f.inArray(f(this).val(),d)>=0});d.length||(b.selectedIndex=-1);return d}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,
offset:true},attrFix:{tabindex:"tabIndex"},attr:function(b,h,d,j){var k=b.nodeType;if(!b||k===3||k===8||k===2)return a;if(j&&h in f.attrFn)return f(b)[h](d);if(!("getAttribute"in b))return f.prop(b,h,d);var m,o;(j=k!==1||!f.isXMLDoc(b))&&(h=f.attrFix[h]||h,o=f.attrHooks[h],o||(I.test(h)?(o=ia):ca&&h!=="className"&&(f.nodeName(b,"form")||fa.test(h))&&(o=ca)));if(d!==a){if(d===null){f.removeAttr(b,h);return a}if(o&&"set"in o&&j&&(m=o.set(b,d,h))!==a)return m;b.setAttribute(h,""+d);return d}if(o&&"get"in
o&&j&&(m=o.get(b,h))!==null)return m;m=b.getAttribute(h);return m===null?a:m},removeAttr:function(b,h){var d;b.nodeType===1&&(h=f.attrFix[h]||h,f.support.getSetAttribute?b.removeAttribute(h):(f.attr(b,h,""),b.removeAttributeNode(b.getAttributeNode(h))),I.test(h)&&(d=f.propFix[h]||h)in b&&(b[d]=false))},attrHooks:{type:{set:function(b,h){if(Ga.test(b.nodeName)&&b.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&h==="radio"&&f.nodeName(b,"input")){var d=b.value;b.setAttribute("type",
h);d&&(b.value=d);return h}}},tabIndex:{get:function(b){var h=b.getAttributeNode("tabIndex");return h&&h.specified?parseInt(h.value,10):ua.test(b.nodeName)||Na.test(b.nodeName)&&b.href?0:a}},value:{get:function(b,h){if(ca&&f.nodeName(b,"button"))return ca.get(b,h);return h in b?b.value:null},set:function(b,h,d){if(ca&&f.nodeName(b,"button"))return ca.set(b,h,d);b.value=h}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",
cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b,h,d){var j=b.nodeType;if(!b||j===3||j===8||j===2)return a;var k,m;(j!==1||!f.isXMLDoc(b))&&(h=f.propFix[h]||h,m=f.propHooks[h]);return d!==a?m&&"set"in m&&(k=m.set(b,d,h))!==a?k:(b[h]=d):m&&"get"in m&&(k=m.get(b,h))!==a?k:b[h]},propHooks:{}});ia={get:function(b,h){return f.prop(b,h)?h.toLowerCase():a},set:function(b,h,d){var j;h===false?f.removeAttr(b,
d):(j=f.propFix[d]||d,j in b&&(b[j]=true),b.setAttribute(d,d.toLowerCase()));return d}};f.support.getSetAttribute||(f.attrFix=f.propFix,ca=f.attrHooks.name=f.attrHooks.title=f.valHooks.button={get:function(b,h){var d;return(d=b.getAttributeNode(h))&&d.nodeValue!==""?d.nodeValue:a},set:function(b,h,d){if(b=b.getAttributeNode(d))return b.nodeValue=h}},f.each(["width","height"],function(b,h){f.attrHooks[h]=f.extend(f.attrHooks[h],{set:function(d,j){if(j===""){d.setAttribute(h,"auto");return j}}})}));
f.support.hrefNormalized||f.each(["href","src","width","height"],function(b,h){f.attrHooks[h]=f.extend(f.attrHooks[h],{get:function(d){d=d.getAttribute(h,2);return d===null?a:d}})});f.support.style||(f.attrHooks.style={get:function(b){return b.style.cssText.toLowerCase()||a},set:function(b,h){return b.style.cssText=""+h}});f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(){}}));f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(b){return b.getAttribute("value")===
null?"on":b.value}}});f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(b,h){if(f.isArray(h))return b.checked=f.inArray(f(b).val(),h)>=0}})});var sa=/\.(.*)$/,ta=/^(?:textarea|input|select)$/i,La=/\./g,gb=/ /g,kb=/[^\w\s.|`]/g,Fb=function(b){return b.replace(kb,"\\$&")};f.event={add:function(b,h,d,j){if(b.nodeType!==3&&b.nodeType!==8){if(d===false)d=ha;else if(!d)return;var k,m;d.handler&&(k=d,d=k.handler);d.guid||(d.guid=f.guid++);if(m=f._data(b)){var o=
m.events,q=m.handle;o||(m.events=o={});q||(m.handle=q=function(da){return typeof f!="undefined"&&(!da||f.event.triggered!==da.type)?f.event.handle.apply(q.elem,arguments):a});q.elem=b;h=h.split(" ");for(var u,w=0,A;u=h[w++];){m=k?f.extend({},k):{handler:d,data:j};u.indexOf(".")>-1?(A=u.split("."),u=A.shift(),m.namespace=A.slice(0).sort().join(".")):(A=[],m.namespace="");m.type=u;m.guid||(m.guid=d.guid);var F=o[u],R=f.event.special[u]||{};if(!F){F=o[u]=[];if(!R.setup||R.setup.call(b,j,A,q)===false)b.addEventListener?
b.addEventListener(u,q,false):b.attachEvent&&b.attachEvent("on"+u,q)}R.add&&(R.add.call(b,m),m.handler.guid||(m.handler.guid=d.guid));F.push(m);f.event.global[u]=true}b=null}}},global:{},remove:function(b,h,d,j){if(b.nodeType!==3&&b.nodeType!==8){d===false&&(d=ha);var k,m,o=0,q,u,w,A,F,R,da=f.hasData(b)&&f._data(b),na=da&&da.events;if(da&&na){h&&h.type&&(d=h.handler,h=h.type);if(!h||typeof h=="string"&&h.charAt(0)===".")for(k in na)f.event.remove(b,k+(h||""));else{for(h=h.split(" ");k=h[o++];){A=
k;q=k.indexOf(".")<0;u=[];q||(u=k.split("."),k=u.shift(),w=new RegExp("(^|\\.)"+f.map(u.slice(0).sort(),Fb).join("\\.(?:.*\\.)?")+"(\\.|$)"));if(F=na[k])if(d){A=f.event.special[k]||{};for(m=j||0;m<F.length;m++){R=F[m];if(d.guid===R.guid){if(q||w.test(R.namespace)){j==null&&F.splice(m--,1);A.remove&&A.remove.call(b,R)}if(j!=null)break}}if(F.length===0||j!=null&&F.length===1){(!A.teardown||A.teardown.call(b,u)===false)&&f.removeEvent(b,k,da.handle);delete na[k]}}else for(m=0;m<F.length;m++){R=F[m];
if(q||w.test(R.namespace)){f.event.remove(b,A,R.handler,m);F.splice(m--,1)}}}if(f.isEmptyObject(na)){(h=da.handle)&&(h.elem=null);delete da.events;delete da.handle;f.isEmptyObject(da)&&f.removeData(b,a,true)}}}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(b,h,d,j){var k=b.type||b,m=[],o;k.indexOf("!")>=0&&(k=k.slice(0,-1),o=true);k.indexOf(".")>=0&&(m=k.split("."),k=m.shift(),m.sort());if(d&&!f.event.customEvent[k]||f.event.global[k]){b=typeof b=="object"?b[f.expando]?
b:new f.Event(k,b):new f.Event(k);b.type=k;b.exclusive=o;b.namespace=m.join(".");b.namespace_re=new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.)?")+"(\\.|$)");if(j||!d){b.preventDefault();b.stopPropagation()}if(d){if(!(d.nodeType===3||d.nodeType===8)){b.result=a;b.target=d;h=h!=null?f.makeArray(h):[];h.unshift(b);m=d;j=k.indexOf(":")<0?"on"+k:"";do{o=f._data(m,"handle");b.currentTarget=m;o&&o.apply(m,h);j&&f.acceptData(m)&&m[j]&&m[j].apply(m,h)===false&&(b.result=false,b.preventDefault());m=m.parentNode||
m.ownerDocument||m===b.target.ownerDocument&&c}while(m&&!b.isPropagationStopped());if(!b.isDefaultPrevented()){var q;m=f.event.special[k]||{};if((!m._default||m._default.call(d.ownerDocument,b)===false)&&(k!=="click"||!f.nodeName(d,"a"))&&f.acceptData(d)){try{j&&d[k]&&(q=d[j],q&&(d[j]=null),f.event.triggered=k,d[k]())}catch(u){}q&&(d[j]=q);f.event.triggered=a}}return b.result}}else f.each(f.cache,function(){var w=this[f.expando];w&&w.events&&w.events[k]&&f.event.trigger(b,h,w.handle.elem)})}},handle:function(b){b=
f.event.fix(b||c.event);var h=((f._data(this,"events")||{})[b.type]||[]).slice(0),d=!b.exclusive&&!b.namespace,j=Array.prototype.slice.call(arguments,0);j[0]=b;b.currentTarget=this;for(var k=0,m=h.length;k<m;k++){var o=h[k];if(d||b.namespace_re.test(o.namespace)){b.handler=o.handler;b.data=o.data;b.handleObj=o;o=o.handler.apply(this,j);o!==a&&(b.result=o,o===false&&(b.preventDefault(),b.stopPropagation()));if(b.isImmediatePropagationStopped())break}}return b.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(b){if(b[f.expando])return b;var h=b;b=f.Event(h);for(var d=this.props.length,j;d;){j=this.props[--d];b[j]=h[j]}b.target||(b.target=b.srcElement||X);b.target.nodeType===3&&(b.target=b.target.parentNode);!b.relatedTarget&&b.fromElement&&(b.relatedTarget=b.fromElement===b.target?b.toElement:b.fromElement);if(b.pageX==null&&b.clientX!=null){d=b.target.ownerDocument||X;h=d.documentElement;d=d.body;b.pageX=b.clientX+(h&&h.scrollLeft||d&&d.scrollLeft||0)-(h&&h.clientLeft||d&&d.clientLeft||0);
b.pageY=b.clientY+(h&&h.scrollTop||d&&d.scrollTop||0)-(h&&h.clientTop||d&&d.clientTop||0)}b.which==null&&(b.charCode!=null||b.keyCode!=null)&&(b.which=b.charCode!=null?b.charCode:b.keyCode);!b.metaKey&&b.ctrlKey&&(b.metaKey=b.ctrlKey);!b.which&&b.button!==a&&(b.which=b.button&1?1:b.button&2?3:b.button&4?2:0);return b},guid:1E8,proxy:f.proxy,special:{ready:{setup:f.bindReady,teardown:f.noop},live:{add:function(b){f.event.add(this,Y(b.origType,b.selector),f.extend({},b,{handler:pa,guid:b.handler.guid}))},
remove:function(b){f.event.remove(this,Y(b.origType,b.selector),b)}},beforeunload:{setup:function(b,h,d){f.isWindow(this)&&(this.onbeforeunload=d)},teardown:function(b,h){this.onbeforeunload===h&&(this.onbeforeunload=null)}}}};f.removeEvent=X.removeEventListener?function(b,h,d){b.removeEventListener&&b.removeEventListener(h,d,false)}:function(b,h,d){b.detachEvent&&b.detachEvent("on"+h,d)};f.Event=function(b,h){if(!this.preventDefault)return new f.Event(b,h);b&&b.type?(this.originalEvent=b,this.type=
b.type,this.isDefaultPrevented=b.defaultPrevented||b.returnValue===false||b.getPreventDefault&&b.getPreventDefault()?ga:ha):(this.type=b);h&&f.extend(this,h);this.timeStamp=f.now();this[f.expando]=true};f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=ga;var b=this.originalEvent;!b||(b.preventDefault?b.preventDefault():(b.returnValue=false))},stopPropagation:function(){this.isPropagationStopped=ga;var b=this.originalEvent;!b||(b.stopPropagation&&b.stopPropagation(),b.cancelBubble=
true)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ga;this.stopPropagation()},isDefaultPrevented:ha,isPropagationStopped:ha,isImmediatePropagationStopped:ha};var Rb=function(b){var h=b.relatedTarget,d=false,j=b.type;b.type=b.data;h!==this&&(h&&(d=f.contains(this,h)),d||(f.event.handle.apply(this,arguments),b.type=j))},Sb=function(b){b.type=b.data;f.event.handle.apply(this,arguments)};f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b,h){f.event.special[b]=
{setup:function(d){f.event.add(this,h,d&&d.selector?Sb:Rb,b)},teardown:function(d){f.event.remove(this,h,d&&d.selector?Sb:Rb)}}});f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return false;else{f.event.add(this,"click.specialSubmit",function(b){var h=b.target,d=h.type;(d==="submit"||d==="image")&&f(h).closest("form").length&&T("submit",this,arguments)});f.event.add(this,"keypress.specialSubmit",function(b){var h=b.target,d=h.type;(d==="text"||d==="password")&&
f(h).closest("form").length&&b.keyCode===13&&T("submit",this,arguments)})}},teardown:function(){f.event.remove(this,".specialSubmit")}});if(!f.support.changeBubbles){var lb,Gb=function(b){var h=b.type,d=b.value;h==="radio"||h==="checkbox"?(d=b.checked):h==="select-multiple"?(d=b.selectedIndex>-1?f.map(b.options,function(j){return j.selected}).join("-"):""):f.nodeName(b,"select")&&(d=b.selectedIndex);return d},Hb=function(b,h){var d=b.target,j,k;if(ta.test(d.nodeName)&&!d.readOnly){j=f._data(d,"_change_data");
k=Gb(d);(b.type!=="focusout"||d.type!=="radio")&&f._data(d,"_change_data",k);if(!(j===a||k===j))if(j!=null||k){b.type="change";b.liveFired=a;f.event.trigger(b,h,d)}}};f.event.special.change={filters:{focusout:Hb,beforedeactivate:Hb,click:function(b){var h=b.target,d=f.nodeName(h,"input")?h.type:"";(d==="radio"||d==="checkbox"||f.nodeName(h,"select"))&&Hb.call(this,b)},keydown:function(b){var h=b.target,d=f.nodeName(h,"input")?h.type:"";(b.keyCode===13&&!f.nodeName(h,"textarea")||b.keyCode===32&&(d===
"checkbox"||d==="radio")||d==="select-multiple")&&Hb.call(this,b)},beforeactivate:function(b){b=b.target;f._data(b,"_change_data",Gb(b))}},setup:function(){if(this.type==="file")return false;for(var b in lb)f.event.add(this,b+".specialChange",lb[b]);return ta.test(this.nodeName)},teardown:function(){f.event.remove(this,".specialChange");return ta.test(this.nodeName)}};lb=f.event.special.change.filters;lb.focus=lb.beforeactivate}f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(b,
h){function d(k){var m=f.event.fix(k);m.type=h;m.originalEvent={};f.event.trigger(m,null,m.target);m.isDefaultPrevented()&&k.preventDefault()}var j=0;f.event.special[h]={setup:function(){j++===0&&X.addEventListener(b,d,true)},teardown:function(){--j===0&&X.removeEventListener(b,d,true)}}});f.each(["bind","one"],function(b,h){f.fn[h]=function(d,j,k){var m;if(typeof d=="object"){for(var o in d)this[h](o,j,d[o],k);return this}if(arguments.length===2||j===false){k=j;j=a}h==="one"?(m=function(u){f(this).unbind(u,
m);return k.apply(this,arguments)},m.guid=k.guid||f.guid++):(m=k);if(d==="unload"&&h!=="one")this.one(d,j,k);else{o=0;for(var q=this.length;o<q;o++)f.event.add(this[o],d,m,j)}return this}});f.fn.extend({unbind:function(b,h){if(typeof b=="object"&&!b.preventDefault)for(var d in b)this.unbind(d,b[d]);else{d=0;for(var j=this.length;d<j;d++)f.event.remove(this[d],b,h)}return this},delegate:function(b,h,d,j){return this.live(h,d,j,b)},undelegate:function(b,h,d){return arguments.length===0?this.unbind("live"):
this.die(h,null,d,b)},trigger:function(b,h){return this.each(function(){f.event.trigger(b,h,this)})},triggerHandler:function(b,h){if(this[0])return f.event.trigger(b,h,this[0],true)},toggle:function(b){var h=arguments,d=b.guid||f.guid++,j=0,k=function(m){var o=(f.data(this,"lastToggle"+b.guid)||0)%j;f.data(this,"lastToggle"+b.guid,o+1);m.preventDefault();return h[o].apply(this,arguments)||false};for(k.guid=d;j<h.length;)h[j++].guid=d;return this.click(k)},hover:function(b,h){return this.mouseenter(b).mouseleave(h||
b)}});var rb={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};f.each(["live","die"],function(b,h){f.fn[h]=function(d,j,k,m){var o=0,q,u,w=m||this.selector,A=m?this:f(this.context);if(typeof d=="object"&&!d.preventDefault){for(q in d)A[h](q,j,d[q],w);return this}if(h==="die"&&!d&&m&&m.charAt(0)==="."){A.unbind(m);return this}if(j===false||f.isFunction(j)){k=j||ha;j=a}for(d=(d||"").split(" ");(m=d[o++])!=null;){q=sa.exec(m);u="";q&&(u=q[0],m=m.replace(sa,""));if(m==="hover")d.push("mouseenter"+
u,"mouseleave"+u);else{q=m;rb[m]?(d.push(rb[m]+u),m+=u):(m=(rb[m]||m)+u);if(h==="live"){u=0;for(var F=A.length;u<F;u++)f.event.add(A[u],"live."+Y(m,w),{data:j,selector:w,handler:k,origType:m,origHandler:k,preType:q})}else A.unbind("live."+Y(m,w),k)}}return this}});f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(b,h){f.fn[h]=function(d,
j){j==null&&(j=d,d=null);return arguments.length>0?this.bind(h,d,j):this.trigger(h)};f.attrFn&&(f.attrFn[h]=true)});(function(){function b(r,y,H,J,G,L){G=0;for(var U=J.length;G<U;G++){var aa=J[G];if(aa){var ra=false;for(aa=aa[r];aa;){if(aa.sizcache===H){ra=J[aa.sizset];break}if(aa.nodeType===1){L||(aa.sizcache=H,aa.sizset=G);if(typeof y!="string"){if(aa===y){ra=true;break}}else if(w.filter(y,[aa]).length>0){ra=aa;break}}aa=aa[r]}J[G]=ra}}}function h(r,y,H,J,G,L){G=0;for(var U=J.length;G<U;G++){var aa=
J[G];if(aa){var ra=false;for(aa=aa[r];aa;){if(aa.sizcache===H){ra=J[aa.sizset];break}aa.nodeType===1&&!L&&(aa.sizcache=H,aa.sizset=G);if(aa.nodeName.toLowerCase()===y){ra=aa;break}aa=aa[r]}J[G]=ra}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,j=0,k=Object.prototype.toString,m=false,o=true,q=/\\/g,u=/\W/;[0,0].sort(function(){o=false;return 0});var w=function(r,y,H,J){H=H||[];var G=y=y||X;if(y.nodeType!==
1&&y.nodeType!==9)return[];if(!r||typeof r!="string")return H;var L,U,aa,ra,Ma,Ja,Sa=true,z=w.isXML(y),M=[],ea=r;do{d.exec("");if(L=d.exec(ea)){ea=L[3];M.push(L[1]);if(L[2]){ra=L[3];break}}}while(L);if(M.length>1&&F.exec(r))if(M.length===2&&A.relative[M[0]])U=Ca(M[0]+M[1],y);else for(U=A.relative[M[0]]?[y]:w(M.shift(),y);M.length;){r=M.shift();A.relative[r]&&(r+=M.shift());U=Ca(r,U)}else{!J&&M.length>1&&y.nodeType===9&&!z&&A.match.ID.test(M[0])&&!A.match.ID.test(M[M.length-1])&&(Ma=w.find(M.shift(),
y,z),y=Ma.expr?w.filter(Ma.expr,Ma.set)[0]:Ma.set[0]);if(y){Ma=J?{expr:M.pop(),set:na(J)}:w.find(M.pop(),M.length===1&&(M[0]==="~"||M[0]==="+")&&y.parentNode?y.parentNode:y,z);U=Ma.expr?w.filter(Ma.expr,Ma.set):Ma.set;for(M.length>0?(aa=na(U)):(Sa=false);M.length;){L=Ja=M.pop();A.relative[Ja]?(L=M.pop()):(Ja="");L==null&&(L=y);A.relative[Ja](aa,L,z)}}else aa=[]}aa||(aa=U);aa||w.error(Ja||r);if(k.call(aa)==="[object Array]")if(Sa)if(y&&y.nodeType===1)for(r=0;aa[r]!=null;r++)aa[r]&&(aa[r]===true||aa[r].nodeType===
1&&w.contains(y,aa[r]))&&H.push(U[r]);else for(r=0;aa[r]!=null;r++)aa[r]&&aa[r].nodeType===1&&H.push(U[r]);else H.push.apply(H,aa);else na(aa,H);ra&&(w(ra,G,H,J),w.uniqueSort(H));return H};w.uniqueSort=function(r){if(za){m=o;r.sort(za);if(m)for(var y=1;y<r.length;y++)r[y]===r[y-1]&&r.splice(y--,1)}return r};w.matches=function(r,y){return w(r,null,null,y)};w.matchesSelector=function(r,y){return w(y,null,null,[r]).length>0};w.find=function(r,y,H){var J;if(!r)return[];for(var G=0,L=A.order.length;G<
L;G++){var U,aa=A.order[G];if(U=A.leftMatch[aa].exec(r)){var ra=U[1];U.splice(1,1);if(ra.substr(ra.length-1)!=="\\"){U[1]=(U[1]||"").replace(q,"");J=A.find[aa](U,y,H);if(J!=null){r=r.replace(A.match[aa],"");break}}}}J||(J=typeof y.getElementsByTagName!="undefined"?y.getElementsByTagName("*"):[]);return{set:J,expr:r}};w.filter=function(r,y,H,J){for(var G,L,U=r,aa=[],ra=y,Ma=y&&y[0]&&w.isXML(y[0]);r&&y.length;){for(var Ja in A.filter)if((G=A.leftMatch[Ja].exec(r))!=null&&G[2]){var Sa,z,M=A.filter[Ja];
z=G[1];L=false;G.splice(1,1);if(z.substr(z.length-1)!=="\\"){ra===aa&&(aa=[]);if(A.preFilter[Ja])if(G=A.preFilter[Ja](G,ra,H,aa,J,Ma)){if(G===true)continue}else L=Sa=true;if(G)for(var ea=0;(z=ra[ea])!=null;ea++)if(z){Sa=M(z,G,ea,ra);var Z=J^!!Sa;H&&Sa!=null?Z?(L=true):(ra[ea]=false):Z&&(aa.push(z),L=true)}if(Sa!==a){H||(ra=aa);r=r.replace(A.match[Ja],"");if(!L)return[];break}}}if(r===U)if(L==null)w.error(r);else break;U=r}return ra};w.error=function(r){throw"Syntax error, unrecognized expression: "+
r;};var A=w.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(r){return r.getAttribute("href")},type:function(r){return r.getAttribute("type")}},relative:{"+":function(r,y){var H=typeof y=="string",J=H&&!u.test(y);H=H&&!J;J&&(y=y.toLowerCase());J=0;for(var G=r.length,L;J<G;J++)if(L=r[J]){for(;(L=L.previousSibling)&&L.nodeType!==1;);r[J]=H||L&&L.nodeName.toLowerCase()===y?L||false:L===y}H&&
w.filter(y,r,true)},">":function(r,y){var H,J=typeof y=="string",G=0,L=r.length;if(J&&!u.test(y))for(y=y.toLowerCase();G<L;G++){if(H=r[G]){H=H.parentNode;r[G]=H.nodeName.toLowerCase()===y?H:false}}else{for(;G<L;G++)(H=r[G])&&(r[G]=J?H.parentNode:H.parentNode===y);J&&w.filter(y,r,true)}},"":function(r,y,H){var J,G=j++,L=b;typeof y=="string"&&!u.test(y)&&(y=y.toLowerCase(),J=y,L=h);L("parentNode",y,G,r,J,H)},"~":function(r,y,H){var J,G=j++,L=b;typeof y=="string"&&!u.test(y)&&(y=y.toLowerCase(),J=y,
L=h);L("previousSibling",y,G,r,J,H)}},find:{ID:function(r,y,H){if(typeof y.getElementById!="undefined"&&!H)return(r=y.getElementById(r[1]))&&r.parentNode?[r]:[]},NAME:function(r,y){if(typeof y.getElementsByName!="undefined"){for(var H=[],J=y.getElementsByName(r[1]),G=0,L=J.length;G<L;G++)J[G].getAttribute("name")===r[1]&&H.push(J[G]);return H.length===0?null:H}},TAG:function(r,y){if(typeof y.getElementsByTagName!="undefined")return y.getElementsByTagName(r[1])}},preFilter:{CLASS:function(r,y,H,J,
G,L){r=" "+r[1].replace(q,"")+" ";if(L)return r;L=0;for(var U;(U=y[L])!=null;L++)U&&(G^(U.className&&(" "+U.className+" ").replace(/[\t\n\r]/g," ").indexOf(r)>=0)?H||J.push(U):H&&(y[L]=false));return false},ID:function(r){return r[1].replace(q,"")},TAG:function(r){return r[1].replace(q,"").toLowerCase()},CHILD:function(r){if(r[1]==="nth"){r[2]||w.error(r[0]);r[2]=r[2].replace(/^\+|\s*/g,"");var y=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(r[2]==="even"&&"2n"||r[2]==="odd"&&"2n+1"||!/\D/.test(r[2])&&"0n+"+
r[2]||r[2]);r[2]=y[1]+(y[2]||1)-0;r[3]=y[3]-0}else r[2]&&w.error(r[0]);r[0]=j++;return r},ATTR:function(r,y,H,J,G,L){y=r[1]=r[1].replace(q,"");!L&&A.attrMap[y]&&(r[1]=A.attrMap[y]);r[4]=(r[4]||r[5]||"").replace(q,"");r[2]==="~="&&(r[4]=" "+r[4]+" ");return r},PSEUDO:function(r,y,H,J,G){if(r[1]==="not")if((d.exec(r[3])||"").length>1||/^\w/.test(r[3]))r[3]=w(r[3],null,null,y);else{r=w.filter(r[3],y,H,true^G);H||J.push.apply(J,r);return false}else if(A.match.POS.test(r[0])||A.match.CHILD.test(r[0]))return true;
return r},POS:function(r){r.unshift(true);return r}},filters:{enabled:function(r){return r.disabled===false&&r.type!=="hidden"},disabled:function(r){return r.disabled===true},checked:function(r){return r.checked===true},selected:function(r){return r.selected===true},parent:function(r){return!!r.firstChild},empty:function(r){return!r.firstChild},has:function(r,y,H){return!!w(H[3],r).length},header:function(r){return/h\d/i.test(r.nodeName)},text:function(r){var y=r.getAttribute("type"),H=r.type;return r.nodeName.toLowerCase()===
"input"&&"text"===H&&(y===H||y===null)},radio:function(r){return r.nodeName.toLowerCase()==="input"&&"radio"===r.type},checkbox:function(r){return r.nodeName.toLowerCase()==="input"&&"checkbox"===r.type},file:function(r){return r.nodeName.toLowerCase()==="input"&&"file"===r.type},password:function(r){return r.nodeName.toLowerCase()==="input"&&"password"===r.type},submit:function(r){var y=r.nodeName.toLowerCase();return(y==="input"||y==="button")&&"submit"===r.type},image:function(r){return r.nodeName.toLowerCase()===
"input"&&"image"===r.type},reset:function(r){var y=r.nodeName.toLowerCase();return(y==="input"||y==="button")&&"reset"===r.type},button:function(r){var y=r.nodeName.toLowerCase();return y==="input"&&"button"===r.type||y==="button"},input:function(r){return/input|select|textarea|button/i.test(r.nodeName)},focus:function(r){return r===r.ownerDocument.activeElement}},setFilters:{first:function(r,y){return y===0},last:function(r,y,H,J){return y===J.length-1},even:function(r,y){return y%2===0},odd:function(r,
y){return y%2===1},lt:function(r,y,H){return y<H[3]-0},gt:function(r,y,H){return y>H[3]-0},nth:function(r,y,H){return H[3]-0===y},eq:function(r,y,H){return H[3]-0===y}},filter:{PSEUDO:function(r,y,H,J){var G=y[1],L=A.filters[G];if(L)return L(r,H,y,J);if(G==="contains")return(r.textContent||r.innerText||w.getText([r])||"").indexOf(y[3])>=0;if(G==="not"){y=y[3];H=0;for(J=y.length;H<J;H++)if(y[H]===r)return false;return true}w.error(G)},CHILD:function(r,y){var H=y[1],J=r;switch(H){case "only":case "first":for(;J=
J.previousSibling;)if(J.nodeType===1)return false;if(H==="first")return true;J=r;case "last":for(;J=J.nextSibling;)if(J.nodeType===1)return false;return true;case "nth":H=y[2];var G=y[3];if(H===1&&G===0)return true;var L=y[0],U=r.parentNode;if(U&&(U.sizcache!==L||!r.nodeIndex)){var aa=0;for(J=U.firstChild;J;J=J.nextSibling)J.nodeType===1&&(J.nodeIndex=++aa);U.sizcache=L}J=r.nodeIndex-G;return H===0?J===0:J%H===0&&J/H>=0}},ID:function(r,y){return r.nodeType===1&&r.getAttribute("id")===y},TAG:function(r,
y){return y==="*"&&r.nodeType===1||r.nodeName.toLowerCase()===y},CLASS:function(r,y){return(" "+(r.className||r.getAttribute("class"))+" ").indexOf(y)>-1},ATTR:function(r,y){var H=y[1];H=A.attrHandle[H]?A.attrHandle[H](r):r[H]!=null?r[H]:r.getAttribute(H);var J=H+"",G=y[2],L=y[4];return H==null?G==="!=":G==="="?J===L:G==="*="?J.indexOf(L)>=0:G==="~="?(" "+J+" ").indexOf(L)>=0:L?G==="!="?J!==L:G==="^="?J.indexOf(L)===0:G==="$="?J.substr(J.length-L.length)===L:G==="|="?J===L||J.substr(0,L.length+1)===
L+"-":false:J&&H!==false},POS:function(r,y,H,J){var G=A.setFilters[y[2]];if(G)return G(r,H,y,J)}}},F=A.match.POS,R=function(r,y){return"\\"+(y-0+1)};for(var da in A.match){A.match[da]=new RegExp(A.match[da].source+/(?![^\[]*\])(?![^\(]*\))/.source);A.leftMatch[da]=new RegExp(/(^(?:.|\r|\n)*?)/.source+A.match[da].source.replace(/\\(\d+)/g,R))}var na=function(r,y){r=Array.prototype.slice.call(r,0);if(y){y.push.apply(y,r);return y}return r};try{Array.prototype.slice.call(X.documentElement.childNodes,
0)}catch(Ia){na=function(r,y){var H=0,J=y||[];if(k.call(r)==="[object Array]")Array.prototype.push.apply(J,r);else if(typeof r.length=="number")for(var G=r.length;H<G;H++)J.push(r[H]);else for(;r[H];H++)J.push(r[H]);return J}}var za,Ba;X.documentElement.compareDocumentPosition?(za=function(r,y){if(r===y){m=true;return 0}if(!r.compareDocumentPosition||!y.compareDocumentPosition)return r.compareDocumentPosition?-1:1;return r.compareDocumentPosition(y)&4?-1:1}):(za=function(r,y){if(r===y){m=true;return 0}if(r.sourceIndex&&
y.sourceIndex)return r.sourceIndex-y.sourceIndex;var H,J,G=[],L=[];H=r.parentNode;J=y.parentNode;var U=H;if(H===J)return Ba(r,y);if(!H)return-1;if(!J)return 1;for(;U;){G.unshift(U);U=U.parentNode}for(U=J;U;){L.unshift(U);U=U.parentNode}H=G.length;J=L.length;for(U=0;U<H&&U<J;U++)if(G[U]!==L[U])return Ba(G[U],L[U]);return U===H?Ba(r,L[U],-1):Ba(G[U],y,1)},Ba=function(r,y,H){if(r===y)return H;for(r=r.nextSibling;r;){if(r===y)return-1;r=r.nextSibling}return 1});w.getText=function(r){for(var y="",H,J=
0;r[J];J++){H=r[J];H.nodeType===3||H.nodeType===4?(y+=H.nodeValue):H.nodeType!==8&&(y+=w.getText(H.childNodes))}return y};(function(){var r=X.createElement("div"),y="script"+(new Date).getTime(),H=X.documentElement;r.innerHTML="<a name='"+y+"'/>";H.insertBefore(r,H.firstChild);X.getElementById(y)&&(A.find.ID=function(J,G,L){if(typeof G.getElementById!="undefined"&&!L)return(G=G.getElementById(J[1]))?G.id===J[1]||typeof G.getAttributeNode!="undefined"&&G.getAttributeNode("id").nodeValue===J[1]?[G]:
a:[]},A.filter.ID=function(J,G){var L=typeof J.getAttributeNode!="undefined"&&J.getAttributeNode("id");return J.nodeType===1&&L&&L.nodeValue===G});H.removeChild(r);H=r=null})();(function(){var r=X.createElement("div");r.appendChild(X.createComment(""));r.getElementsByTagName("*").length>0&&(A.find.TAG=function(y,H){var J=H.getElementsByTagName(y[1]);if(y[1]==="*"){for(var G=[],L=0;J[L];L++)J[L].nodeType===1&&G.push(J[L]);J=G}return J});r.innerHTML="<a href='#'></a>";r.firstChild&&typeof r.firstChild.getAttribute!=
"undefined"&&r.firstChild.getAttribute("href")!=="#"&&(A.attrHandle.href=function(y){return y.getAttribute("href",2)});r=null})();X.querySelectorAll&&function(){var r=w,y=X.createElement("div");y.innerHTML="<p class='TEST'></p>";if(!y.querySelectorAll||y.querySelectorAll(".TEST").length!==0){w=function(J,G,L,U){G=G||X;if(!U&&!w.isXML(G)){var aa=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(J);if(aa&&(G.nodeType===1||G.nodeType===9)){if(aa[1])return na(G.getElementsByTagName(J),L);if(aa[2]&&A.find.CLASS&&
G.getElementsByClassName)return na(G.getElementsByClassName(aa[2]),L)}if(G.nodeType===9){if(J==="body"&&G.body)return na([G.body],L);if(aa&&aa[3]){var ra=G.getElementById(aa[3]);if(!ra||!ra.parentNode)return na([],L);if(ra.id===aa[3])return na([ra],L)}try{return na(G.querySelectorAll(J),L)}catch(Ma){}}else if(G.nodeType===1&&G.nodeName.toLowerCase()!=="object"){aa=G;var Ja=(ra=G.getAttribute("id"))||"__sizzle__",Sa=G.parentNode,z=/^\s*[+~]/.test(J);ra?(Ja=Ja.replace(/'/g,"\\$&")):G.setAttribute("id",
Ja);z&&Sa&&(G=G.parentNode);try{if(!z||Sa)return na(G.querySelectorAll("[id='"+Ja+"'] "+J),L)}catch(M){}finally{ra||aa.removeAttribute("id")}}}return r(J,G,L,U)};for(var H in r)w[H]=r[H];y=null}}();(function(){var r=X.documentElement,y=r.matchesSelector||r.mozMatchesSelector||r.webkitMatchesSelector||r.msMatchesSelector;if(y){var H=!y.call(X.createElement("div"),"div"),J=false;try{y.call(X.documentElement,"[test!='']:sizzle")}catch(G){J=true}w.matchesSelector=function(L,U){U=U.replace(/\=\s*([^'"\]]*)\s*\]/g,
"='$1']");if(!w.isXML(L))try{if(J||!A.match.PSEUDO.test(U)&&!/!=/.test(U)){var aa=y.call(L,U);if(aa||!H||L.document&&L.document.nodeType!==11)return aa}}catch(ra){}return w(U,null,null,[L]).length>0}}})();(function(){var r=X.createElement("div");r.innerHTML="<div class='test e'></div><div class='test'></div>";if(r.getElementsByClassName&&r.getElementsByClassName("e").length!==0){r.lastChild.className="e";if(r.getElementsByClassName("e").length!==1){A.order.splice(1,0,"CLASS");A.find.CLASS=function(y,
H,J){if(typeof H.getElementsByClassName!="undefined"&&!J)return H.getElementsByClassName(y[1])};r=null}}})();X.documentElement.contains?(w.contains=function(r,y){return r!==y&&(r.contains?r.contains(y):true)}):X.documentElement.compareDocumentPosition?(w.contains=function(r,y){return!!(r.compareDocumentPosition(y)&16)}):(w.contains=function(){return false});w.isXML=function(r){return(r=(r?r.ownerDocument||r:0).documentElement)?r.nodeName!=="HTML":false};var Ca=function(r,y){for(var H,J=[],G="",L=
y.nodeType?[y]:y;H=A.match.PSEUDO.exec(r);){G+=H[0];r=r.replace(A.match.PSEUDO,"")}r=A.relative[r]?r+"*":r;H=0;for(var U=L.length;H<U;H++)w(r,L[H],J);return w.filter(G,J)};f.find=w;f.expr=w.selectors;f.expr[":"]=f.expr.filters;f.unique=w.uniqueSort;f.text=w.getText;f.isXMLDoc=w.isXML;f.contains=w.contains})();var xb=/Until$/,yb=/^(?:parents|prevUntil|prevAll)/,zb=/,/,Ka=/^.[^:#\[\.,]*$/,lc=Array.prototype.slice,sb=f.expr.match.POS,ec={children:true,contents:true,next:true,prev:true};f.fn.extend({find:function(b){var h=
this,d,j;if(typeof b!="string")return f(b).filter(function(){d=0;for(j=h.length;d<j;d++)if(f.contains(h[d],this))return true});var k=this.pushStack("","find",b),m,o,q;d=0;for(j=this.length;d<j;d++){m=k.length;f.find(b,this[d],k);if(d>0)for(o=m;o<k.length;o++)for(q=0;q<m;q++)if(k[q]===k[o]){k.splice(o--,1);break}}return k},has:function(b){var h=f(b);return this.filter(function(){for(var d=0,j=h.length;d<j;d++)if(f.contains(this,h[d]))return true})},not:function(b){return this.pushStack(E(this,b,false),
"not",b)},filter:function(b){return this.pushStack(E(this,b,true),"filter",b)},is:function(b){return!!b&&(typeof b=="string"?f.filter(b,this).length>0:this.filter(b).length>0)},closest:function(b,h){var d=[],j,k,m=this[0];if(f.isArray(b)){var o,q={},u=1;if(m&&b.length){j=0;for(k=b.length;j<k;j++){o=b[j];q[o]||(q[o]=sb.test(o)?f(o,h||this.context):o)}for(;m&&m.ownerDocument&&m!==h;){for(o in q){j=q[o];(j.jquery?j.index(m)>-1:f(m).is(j))&&d.push({selector:o,elem:m,level:u})}m=m.parentNode;u++}}return d}o=
sb.test(b)||typeof b!="string"?f(b,h||this.context):0;j=0;for(k=this.length;j<k;j++)for(m=this[j];m;){if(o?o.index(m)>-1:f.find.matchesSelector(m,b)){d.push(m);break}m=m.parentNode;if(!m||!m.ownerDocument||m===h||m.nodeType===11)break}d=d.length>1?f.unique(d):d;return this.pushStack(d,"closest",b)},index:function(b){if(!b||typeof b=="string")return f.inArray(this[0],b?f(b):this.parent().children());return f.inArray(b.jquery?b[0]:b,this)},add:function(b,h){var d=typeof b=="string"?f(b,h):f.makeArray(b&&
b.nodeType?[b]:b),j=f.merge(this.get(),d);return this.pushStack(!d[0]||!d[0].parentNode||d[0].parentNode.nodeType===11||!j[0]||!j[0].parentNode||j[0].parentNode.nodeType===11?j:f.unique(j))},andSelf:function(){return this.add(this.prevObject)}});f.each({parent:function(b){return(b=b.parentNode)&&b.nodeType!==11?b:null},parents:function(b){return f.dir(b,"parentNode")},parentsUntil:function(b,h,d){return f.dir(b,"parentNode",d)},next:function(b){return f.nth(b,2,"nextSibling")},prev:function(b){return f.nth(b,
2,"previousSibling")},nextAll:function(b){return f.dir(b,"nextSibling")},prevAll:function(b){return f.dir(b,"previousSibling")},nextUntil:function(b,h,d){return f.dir(b,"nextSibling",d)},prevUntil:function(b,h,d){return f.dir(b,"previousSibling",d)},siblings:function(b){return f.sibling(b.parentNode.firstChild,b)},children:function(b){return f.sibling(b.firstChild)},contents:function(b){return f.nodeName(b,"iframe")?b.contentDocument||b.contentWindow.document:f.makeArray(b.childNodes)}},function(b,
h){f.fn[b]=function(d,j){var k=f.map(this,h,d),m=lc.call(arguments);xb.test(b)||(j=d);j&&typeof j=="string"&&(k=f.filter(j,k));k=this.length>1&&!ec[b]?f.unique(k):k;(this.length>1||zb.test(j))&&yb.test(b)&&(k=k.reverse());return this.pushStack(k,b,m.join(","))}});f.extend({filter:function(b,h,d){d&&(b=":not("+b+")");return h.length===1?f.find.matchesSelector(h[0],b)?[h[0]]:[]:f.find.matches(b,h)},dir:function(b,h,d){var j=[];for(b=b[h];b&&b.nodeType!==9&&(d===a||b.nodeType!==1||!f(b).is(d));){b.nodeType===
1&&j.push(b);b=b[h]}return j},nth:function(b,h,d){for(var j=0;b;b=b[d])if(b.nodeType===1&&++j===(h||1))break;return b},sibling:function(b,h){for(var d=[];b;b=b.nextSibling)b.nodeType===1&&b!==h&&d.push(b);return d}});var Tb=/ jQuery\d+="(?:\d+|null)"/g,Jb=/^\s+/,Ub=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Vb=/<([\w:]+)/,Wb=/<tbody/i,fc=/<|&#?\w+;/,ab=/<(?:script|object|embed|option|style)/i,tb=/checked\s*(?:[^=]|=\s*.checked.)/i,gc=/\/(java|ecma)script/i,dc=/^\s*<!(?:\[CDATA\[|\-\-)/,
Va={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};Va.optgroup=Va.option;Va.tbody=Va.tfoot=Va.colgroup=Va.caption=Va.thead;Va.th=Va.td;f.support.htmlSerialize||(Va._default=[1,"div<div>","</div>"]);f.fn.extend({text:function(b){if(f.isFunction(b))return this.each(function(h){var d=
f(this);d.text(b.call(this,h,d.text()))});if(typeof b!="object"&&b!==a)return this.empty().append((this[0]&&this[0].ownerDocument||X).createTextNode(b));return f.text(this)},wrapAll:function(b){if(f.isFunction(b))return this.each(function(d){f(this).wrapAll(b.call(this,d))});if(this[0]){var h=f(b,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&h.insertBefore(this[0]);h.map(function(){for(var d=this;d.firstChild&&d.firstChild.nodeType===1;)d=d.firstChild;return d}).append(this)}return this},
wrapInner:function(b){if(f.isFunction(b))return this.each(function(h){f(this).wrapInner(b.call(this,h))});return this.each(function(){var h=f(this),d=h.contents();d.length?d.wrapAll(b):h.append(b)})},wrap:function(b){return this.each(function(){f(this).wrapAll(b)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(b){this.nodeType===1&&this.appendChild(b)})},
prepend:function(){return this.domManip(arguments,true,function(b){this.nodeType===1&&this.insertBefore(b,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(h){this.parentNode.insertBefore(h,this)});if(arguments.length){var b=f(arguments[0]);b.push.apply(b,this.toArray());return this.pushStack(b,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(h){this.parentNode.insertBefore(h,
this.nextSibling)});if(arguments.length){var b=this.pushStack(this,"after",arguments);b.push.apply(b,f(arguments[0]).toArray());return b}},remove:function(b,h){for(var d=0,j;(j=this[d])!=null;d++)if(!b||f.filter(b,[j]).length){!h&&j.nodeType===1&&(f.cleanData(j.getElementsByTagName("*")),f.cleanData([j]));j.parentNode&&j.parentNode.removeChild(j)}return this},empty:function(){for(var b=0,h;(h=this[b])!=null;b++)for(h.nodeType===1&&f.cleanData(h.getElementsByTagName("*"));h.firstChild;)h.removeChild(h.firstChild);
return this},clone:function(b,h){b=b==null?false:b;h=h==null?b:h;return this.map(function(){return f.clone(this,b,h)})},html:function(b){if(b===a)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Tb,""):null;if(typeof b=="string"&&!ab.test(b)&&(f.support.leadingWhitespace||!Jb.test(b))&&!Va[(Vb.exec(b)||["",""])[1].toLowerCase()]){b=b.replace(Ub,"<$1></$2>");try{for(var h=0,d=this.length;h<d;h++)this[h].nodeType===1&&(f.cleanData(this[h].getElementsByTagName("*")),this[h].innerHTML=b)}catch(j){this.empty().append(b)}}else f.isFunction(b)?
this.each(function(k){var m=f(this);m.html(b.call(this,k,m.html()))}):this.empty().append(b);return this},replaceWith:function(b){if(this[0]&&this[0].parentNode){if(f.isFunction(b))return this.each(function(h){var d=f(this),j=d.html();d.replaceWith(b.call(this,h,j))});typeof b!="string"&&(b=f(b).detach());return this.each(function(){var h=this.nextSibling,d=this.parentNode;f(this).remove();h?f(h).before(b):f(d).append(b)})}return this.length?this.pushStack(f(f.isFunction(b)?b():b),"replaceWith",b):
this},detach:function(b){return this.remove(b,true)},domManip:function(b,h,d){var j,k,m,o=b[0],q=[];if(!f.support.checkClone&&arguments.length===3&&typeof o=="string"&&tb.test(o))return this.each(function(){f(this).domManip(b,h,d,true)});if(f.isFunction(o))return this.each(function(A){var F=f(this);b[0]=o.call(this,A,h?F.html():a);F.domManip(b,h,d)});if(this[0]){m=o&&o.parentNode;f.support.parentNode&&m&&m.nodeType===11&&m.childNodes.length===this.length?(j={fragment:m}):(j=f.buildFragment(b,this,
q));m=j.fragment;m.childNodes.length===1?(k=m=m.firstChild):(k=m.firstChild);if(k){h=h&&f.nodeName(k,"tr");k=0;for(var u=this.length,w=u-1;k<u;k++)d.call(h?f.nodeName(this[k],"table")?this[k].getElementsByTagName("tbody")[0]||this[k].appendChild(this[k].ownerDocument.createElement("tbody")):this[k]:this[k],j.cacheable||u>1&&k<w?f.clone(m,true,true):m)}q.length&&f.each(q,ba)}return this}});f.buildFragment=function(b,h,d){var j,k,m,o;h&&h[0]&&(o=h[0].ownerDocument||h[0]);o.createDocumentFragment||(o=
X);b.length===1&&typeof b[0]=="string"&&b[0].length<512&&o===X&&b[0].charAt(0)==="<"&&!ab.test(b[0])&&(f.support.checkClone||!tb.test(b[0]))&&(k=true,m=f.fragments[b[0]],m&&m!==1&&(j=m));j||(j=o.createDocumentFragment(),f.clean(b,o,j,d));k&&(f.fragments[b[0]]=m?j:1);return{fragment:j,cacheable:k}};f.fragments={};f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,h){f.fn[b]=function(d){var j=[];d=f(d);var k=this.length===1&&
this[0].parentNode;if(k&&k.nodeType===11&&k.childNodes.length===1&&d.length===1){d[h](this[0]);return this}k=0;for(var m=d.length;k<m;k++){var o=(k>0?this.clone(true):this).get();f(d[k])[h](o);j=j.concat(o)}return this.pushStack(j,b,d.selector)}});f.extend({clone:function(b,h,d){var j=b.cloneNode(true),k,m,o;if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(b.nodeType===1||b.nodeType===11)&&!f.isXMLDoc(b)){t(b,j);k=p(b);m=p(j);for(o=0;k[o];++o)t(k[o],m[o])}if(h){B(b,j);if(d){k=p(b);m=p(j);
for(o=0;k[o];++o)B(k[o],m[o])}}return j},clean:function(b,h,d,j){h=h||X;typeof h.createElement=="undefined"&&(h=h.ownerDocument||h[0]&&h[0].ownerDocument||X);for(var k=[],m,o=0,q;(q=b[o])!=null;o++){typeof q=="number"&&(q+="");if(q){if(typeof q=="string")if(fc.test(q)){q=q.replace(Ub,"<$1></$2>");m=(Vb.exec(q)||["",""])[1].toLowerCase();var u=Va[m]||Va._default,w=u[0],A=h.createElement("div");for(A.innerHTML=u[1]+q+u[2];w--;)A=A.lastChild;if(!f.support.tbody){w=Wb.test(q);u=m==="table"&&!w?A.firstChild&&
A.firstChild.childNodes:u[1]==="<table>"&&!w?A.childNodes:[];for(m=u.length-1;m>=0;--m)f.nodeName(u[m],"tbody")&&!u[m].childNodes.length&&u[m].parentNode.removeChild(u[m])}!f.support.leadingWhitespace&&Jb.test(q)&&A.insertBefore(h.createTextNode(Jb.exec(q)[0]),A.firstChild);q=A.childNodes}else q=h.createTextNode(q);var F;if(!f.support.appendChecked)if(q[0]&&typeof(F=q.length)=="number")for(m=0;m<F;m++)ka(q[m]);else ka(q);q.nodeType?k.push(q):(k=f.merge(k,q))}}if(d){b=function(R){return!R.type||gc.test(R.type)};
for(o=0;k[o];o++)if(j&&f.nodeName(k[o],"script")&&(!k[o].type||k[o].type.toLowerCase()==="text/javascript"))j.push(k[o].parentNode?k[o].parentNode.removeChild(k[o]):k[o]);else{if(k[o].nodeType===1){h=f.grep(k[o].getElementsByTagName("script"),b);k.splice.apply(k,[o+1,0].concat(h))}d.appendChild(k[o])}}return k},cleanData:function(b){for(var h,d,j=f.cache,k=f.expando,m=f.event.special,o=f.support.deleteExpando,q=0,u;(u=b[q])!=null;q++)if(!(u.nodeName&&f.noData[u.nodeName.toLowerCase()]))if(d=u[f.expando]){if((h=
j[d]&&j[d][k])&&h.events){for(var w in h.events)m[w]?f.event.remove(u,w):f.removeEvent(u,w,h.handle);h.handle&&(h.handle.elem=null)}o?delete u[f.expando]:u.removeAttribute&&u.removeAttribute(f.expando);delete j[d]}}});var Xb=/alpha\([^)]*\)/i,hc=/opacity=([^)]*)/,mc=/([A-Z]|^ms)/g,Kb=/^-?\d+(?:px)?$/i,Yb=/^-?\d/,Zb=/^[+\-]=/,ya=/[^+\-\.\de]+/g,ic={position:"absolute",visibility:"hidden",display:"block"},oa=["Left","Right"],Qb=["Top","Bottom"],fb,mb,va;f.fn.css=function(b,h){if(arguments.length===
2&&h===a)return this;return f.access(this,b,h,true,function(d,j,k){return k!==a?f.style(d,j,k):f.css(d,j)})};f.extend({cssHooks:{opacity:{get:function(b,h){if(h){var d=fb(b,"opacity","opacity");return d===""?"1":d}return b.style.opacity}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(b,h,d,j){if(b&&b.nodeType!==3&&b.nodeType!==8&&b.style){var k,m=
f.camelCase(h),o=b.style,q=f.cssHooks[m];h=f.cssProps[m]||m;if(d===a){if(q&&"get"in q&&(k=q.get(b,false,j))!==a)return k;return o[h]}j=typeof d;if(!(j==="number"&&isNaN(d)||d==null)){j==="string"&&Zb.test(d)&&(d=+d.replace(ya,"")+parseFloat(f.css(b,h)),j="number");j==="number"&&!f.cssNumber[m]&&(d+="px");if(!q||!("set"in q)||(d=q.set(b,d))!==a)try{o[h]=d}catch(u){}}}},css:function(b,h,d){var j,k;h=f.camelCase(h);k=f.cssHooks[h];h=f.cssProps[h]||h;h==="cssFloat"&&(h="float");if(k&&"get"in k&&(j=k.get(b,
true,d))!==a)return j;if(fb)return fb(b,h)},swap:function(b,h,d){var j={};for(var k in h){j[k]=b.style[k];b.style[k]=h[k]}d.call(b);for(k in h)b.style[k]=j[k]}});f.curCSS=f.css;f.each(["height","width"],function(b,h){f.cssHooks[h]={get:function(d,j,k){var m;if(j){if(d.offsetWidth!==0)return K(d,h,k);f.swap(d,ic,function(){m=K(d,h,k)});return m}},set:function(d,j){if(!Kb.test(j))return j;j=parseFloat(j);if(j>=0)return j+"px"}}});f.support.opacity||(f.cssHooks.opacity={get:function(b,h){return hc.test((h&&
b.currentStyle?b.currentStyle.filter:b.style.filter)||"")?parseFloat(RegExp.$1)/100+"":h?"1":""},set:function(b,h){var d=b.style,j=b.currentStyle;d.zoom=1;var k=f.isNaN(h)?"":"alpha(opacity="+h*100+")";j=j&&j.filter||d.filter||"";d.filter=Xb.test(j)?j.replace(Xb,k):j+" "+k}});f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(b,h){var d;f.swap(b,{display:"inline-block"},function(){h?(d=fb(b,"margin-right","marginRight")):(d=b.style.marginRight)});return d}})});X.defaultView&&
X.defaultView.getComputedStyle&&(mb=function(b,h){var d,j;h=h.replace(mc,"-$1").toLowerCase();if(!(j=b.ownerDocument.defaultView))return a;if(j=j.getComputedStyle(b,null)){d=j.getPropertyValue(h);d===""&&!f.contains(b.ownerDocument.documentElement,b)&&(d=f.style(b,h))}return d});X.documentElement.currentStyle&&(va=function(b,h){var d,j=b.currentStyle&&b.currentStyle[h],k=b.runtimeStyle&&b.runtimeStyle[h],m=b.style;!Kb.test(j)&&Yb.test(j)&&(d=m.left,k&&(b.runtimeStyle.left=b.currentStyle.left),m.left=
h==="fontSize"?"1em":j||0,j=m.pixelLeft+"px",m.left=d,k&&(b.runtimeStyle.left=k));return j===""?"auto":j});fb=mb||va;f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(b){var h=b.offsetHeight;return b.offsetWidth===0&&h===0||!f.support.reliableHiddenOffsets&&(b.style.display||f.css(b,"display"))==="none"},f.expr.filters.visible=function(b){return!f.expr.filters.hidden(b)});var Ab=/%20/g,eb=/\[\]$/,Lb=/\r?\n/g,nb=/#.*$/,Mb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,$b=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
Ea=/^(?:GET|HEAD)$/,Ya=/^\/\//,ob=/\?/,Qa=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ac=/^(?:select|textarea)/i,cc=/\s+/,bc=/([?&])_=[^&]*/,Ta=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,W=f.fn.load,cb={},Za={},Wa,P;try{Wa=V.href}catch(hb){Wa=X.createElement("a");Wa.href="";Wa=Wa.href}P=Ta.exec(Wa.toLowerCase())||[];f.fn.extend({load:function(b,h,d){if(typeof b!="string"&&W)return W.apply(this,arguments);if(!this.length)return this;var j=b.indexOf(" ");if(j>=0){var k=b.slice(j,b.length);
b=b.slice(0,j)}j="GET";h&&(f.isFunction(h)?(d=h,h=a):typeof h=="object"&&(h=f.param(h,f.ajaxSettings.traditional),j="POST"));var m=this;f.ajax({url:b,type:j,dataType:"html",data:h,complete:function(o,q,u){u=o.responseText;o.isResolved()&&(o.done(function(w){u=w}),m.html(k?f("<div>").append(u.replace(Qa,"")).find(k):u));d&&m.each(d,[u,q,o])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):
this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ac.test(this.nodeName)||$b.test(this.type))}).map(function(b,h){var d=f(this).val();return d==null?null:f.isArray(d)?f.map(d,function(j){return{name:h.name,value:j.replace(Lb,"\r\n")}}):{name:h.name,value:d.replace(Lb,"\r\n")}}).get()}});f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b,h){f.fn[h]=function(d){return this.bind(h,d)}});f.each(["get","post"],function(b,h){f[h]=function(d,
j,k,m){f.isFunction(j)&&(m=m||k,k=j,j=a);return f.ajax({type:h,url:d,data:j,success:k,dataType:m})}});f.extend({getScript:function(b,h){return f.get(b,a,h,"script")},getJSON:function(b,h,d){return f.get(b,h,d,"json")},ajaxSetup:function(b,h){h?f.extend(true,b,f.ajaxSettings,h):(h=b,b=f.extend(true,f.ajaxSettings,h));for(var d in{context:1,url:1})d in h?(b[d]=h[d]):d in f.ajaxSettings&&(b[d]=f.ajaxSettings[d]);return b},ajaxSettings:{url:Wa,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|widget):$/.test(P[1]),
global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":c.String,"text html":true,"text json":f.parseJSON,"text xml":f.parseXML}},ajaxPrefilter:D(cb),ajaxTransport:D(Za),ajax:function(b,h){function d(G,L,U,aa){if(Ba!==
2){Ba=2;Ia&&clearTimeout(Ia);na=a;R=aa||"";y.readyState=G?4:0;var ra,Ma,Ja;if(U){aa=j;var Sa=y,z=aa.contents,M=aa.dataTypes,ea=aa.responseFields,Z,qa,Aa,Da;for(qa in ea)qa in U&&(Sa[ea[qa]]=U[qa]);for(;M[0]==="*";){M.shift();Z===a&&(Z=aa.mimeType||Sa.getResponseHeader("content-type"))}if(Z)for(qa in z)if(z[qa]&&z[qa].test(Z)){M.unshift(qa);break}if(M[0]in U)Aa=M[0];else{for(qa in U){if(!M[0]||aa.converters[qa+" "+M[0]]){Aa=qa;break}Da||(Da=qa)}Aa=Aa||Da}if(Aa){Aa!==M[0]&&M.unshift(Aa);U=U[Aa]}else U=
void 0}else U=a;U=U;if(G>=200&&G<300||G===304){if(j.ifModified){if(Z=y.getResponseHeader("Last-Modified"))f.lastModified[w]=Z;if(Z=y.getResponseHeader("Etag"))f.etag[w]=Z}if(G===304){L="notmodified";ra=true}else try{Z=j;U=U;Z.dataFilter&&(U=Z.dataFilter(U,Z.dataType));var Fa=Z.dataTypes;qa={};var vb,wb,oc=Fa.length,jc,Bb=Fa[0],Nb,nc,Cb,Ib,Ob;for(vb=1;vb<oc;vb++){if(vb===1)for(wb in Z.converters)typeof wb=="string"&&(qa[wb.toLowerCase()]=Z.converters[wb]);Nb=Bb;Bb=Fa[vb];if(Bb==="*")Bb=Nb;else if(Nb!==
"*"&&Nb!==Bb){nc=Nb+" "+Bb;Cb=qa[nc]||qa["* "+Bb];if(!Cb){Ob=a;for(Ib in qa){jc=Ib.split(" ");if(jc[0]===Nb||jc[0]==="*")if(Ob=qa[jc[1]+" "+Bb]){Ib=qa[Ib];Ib===true?(Cb=Ob):Ob===true&&(Cb=Ib);break}}}!Cb&&!Ob&&f.error("No conversion from "+nc.replace(" "," to "));Cb!==true&&(U=Cb?Cb(U):Ob(Ib(U)))}}Ma=U;L="success";ra=true}catch(pc){L="parsererror";Ja=pc}}else{Ja=L;if(!L||G){L="error";G<0&&(G=0)}}y.status=G;y.statusText=L;ra?o.resolveWith(k,[Ma,L,y]):o.rejectWith(k,[y,L,Ja]);y.statusCode(u);u=a;Ca&&
m.trigger("ajax"+(ra?"Success":"Error"),[y,j,ra?Ma:Ja]);q.resolveWith(k,[y,L]);Ca&&(m.trigger("ajaxComplete",[y,j]),--f.active||f.event.trigger("ajaxStop"))}}typeof b=="object"&&(h=b,b=a);h=h||{};var j=f.ajaxSetup({},h),k=j.context||j,m=k!==j&&(k.nodeType||k instanceof f)?f(k):f.event,o=f.Deferred(),q=f._Deferred(),u=j.statusCode||{},w,A={},F={},R,da,na,Ia,za,Ba=0,Ca,r,y={readyState:0,setRequestHeader:function(G,L){if(!Ba){var U=G.toLowerCase();G=F[U]=F[U]||G;A[G]=L}return this},getAllResponseHeaders:function(){return Ba===
2?R:null},getResponseHeader:function(G){var L;if(Ba===2){if(!da)for(da={};L=Mb.exec(R);)da[L[1].toLowerCase()]=L[2];L=da[G.toLowerCase()]}return L===a?null:L},overrideMimeType:function(G){Ba||(j.mimeType=G);return this},abort:function(G){G=G||"abort";na&&na.abort(G);d(0,G);return this}};o.promise(y);y.success=y.done;y.error=y.fail;y.complete=q.done;y.statusCode=function(G){if(G){var L;if(Ba<2)for(L in G)u[L]=[u[L],G[L]];else{L=G[y.status];y.then(L,L)}}return this};j.url=((b||j.url)+"").replace(nb,
"").replace(Ya,P[1]+"//");j.dataTypes=f.trim(j.dataType||"*").toLowerCase().split(cc);j.crossDomain==null&&(za=Ta.exec(j.url.toLowerCase()),j.crossDomain=!(!za||za[1]==P[1]&&za[2]==P[2]&&(za[3]||(za[1]==="http:"?80:443))==(P[3]||(P[1]==="http:"?80:443))));j.data&&j.processData&&typeof j.data!="string"&&(j.data=f.param(j.data,j.traditional));s(cb,j,h,y);if(Ba===2)return false;Ca=j.global;j.type=j.type.toUpperCase();j.hasContent=!Ea.test(j.type);Ca&&f.active++===0&&f.event.trigger("ajaxStart");if(!j.hasContent){j.data&&
(j.url+=(ob.test(j.url)?"&":"?")+j.data);w=j.url;if(j.cache===false){za=f.now();var H=j.url.replace(bc,"$1_="+za);j.url=H+(H===j.url?(ob.test(j.url)?"&":"?")+"_="+za:"")}}(j.data&&j.hasContent&&j.contentType!==false||h.contentType)&&y.setRequestHeader("Content-Type",j.contentType);j.ifModified&&(w=w||j.url,f.lastModified[w]&&y.setRequestHeader("If-Modified-Since",f.lastModified[w]),f.etag[w]&&y.setRequestHeader("If-None-Match",f.etag[w]));y.setRequestHeader("Accept",j.dataTypes[0]&&j.accepts[j.dataTypes[0]]?
j.accepts[j.dataTypes[0]]+(j.dataTypes[0]!=="*"?", */*; q=0.01":""):j.accepts["*"]);for(r in j.headers)y.setRequestHeader(r,j.headers[r]);if(j.beforeSend&&(j.beforeSend.call(k,y,j)===false||Ba===2)){y.abort();return false}for(r in{success:1,error:1,complete:1})y[r](j[r]);if(na=s(Za,j,h,y)){y.readyState=1;Ca&&m.trigger("ajaxSend",[y,j]);j.async&&j.timeout>0&&(Ia=setTimeout(function(){y.abort("timeout")},j.timeout));try{Ba=1;na.send(A,d)}catch(J){status<2?d(-1,J):f.error(J)}}else d(-1,"No Transport");
return y},param:function(b,h){var d=[],j=function(m,o){o=f.isFunction(o)?o():o;d[d.length]=encodeURIComponent(m)+"="+encodeURIComponent(o)};h===a&&(h=f.ajaxSettings.traditional);if(f.isArray(b)||b.jquery&&!f.isPlainObject(b))f.each(b,function(){j(this.name,this.value)});else for(var k in b)x(k,b[k],h,j);return d.join("&").replace(Ab,"+")}});f.extend({active:0,lastModified:{},etag:{}});var ub=f.now(),Db=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+
ub++}});f.ajaxPrefilter("json jsonp",function(b,h,d){h=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==false&&(Db.test(b.url)||h&&Db.test(b.data))){var j,k=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,m=c[k],o=b.url,q=b.data,u="$1"+k+"$2";b.jsonp!==false&&(o=o.replace(Db,u),b.url===o&&(h&&(q=q.replace(Db,u)),b.data===q&&(o+=(/\?/.test(o)?"&":"?")+b.jsonp+"="+k)));b.url=o;b.data=q;c[k]=function(w){j=
[w]};d.always(function(){c[k]=m;j&&f.isFunction(m)&&c[k](j[0])});b.converters["script json"]=function(){j||f.error(k+" was not called");return j[0]};b.dataTypes[0]="json";return"script"}});f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(b){f.globalEval(b);return b}}});f.ajaxPrefilter("script",function(b){b.cache===a&&(b.cache=false);b.crossDomain&&
(b.type="GET",b.global=false)});f.ajaxTransport("script",function(b){if(b.crossDomain){var h,d=X.head||X.getElementsByTagName("head")[0]||X.documentElement;return{send:function(j,k){h=X.createElement("script");h.async="async";b.scriptCharset&&(h.charset=b.scriptCharset);h.src=b.url;h.onload=h.onreadystatechange=function(m,o){if(o||!h.readyState||/loaded|complete/.test(h.readyState)){h.onload=h.onreadystatechange=null;d&&h.parentNode&&d.removeChild(h);h=a;o||k(200,"success")}};d.insertBefore(h,d.firstChild)},
abort:function(){h&&h.onload(0,1)}}}});var bb=c.ActiveXObject?function(){for(var b in pb)pb[b](0,1)}:false,Ua=0,pb;f.ajaxSettings.xhr=c.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&v()))a:{try{b=new c.ActiveXObject("Microsoft.XMLHTTP");break a}catch(h){}b=void 0}return b}:v;(function(b){f.extend(f.support,{ajax:!!b,cors:!!b&&"withCredentials"in b})})(f.ajaxSettings.xhr());f.support.ajax&&f.ajaxTransport(function(b){if(!b.crossDomain||f.support.cors){var h;return{send:function(d,j){var k=b.xhr(),
m,o;b.username?k.open(b.type,b.url,b.async,b.username,b.password):k.open(b.type,b.url,b.async);if(b.xhrFields)for(o in b.xhrFields)k[o]=b.xhrFields[o];b.mimeType&&k.overrideMimeType&&k.overrideMimeType(b.mimeType);!b.crossDomain&&!d["X-Requested-With"]&&(d["X-Requested-With"]="XMLHttpRequest");try{for(o in d)k.setRequestHeader(o,d[o])}catch(q){}k.send(b.hasContent&&b.data||null);h=function(u,w){var A,F,R,da,na;try{if(h&&(w||k.readyState===4)){h=a;m&&(k.onreadystatechange=f.noop,bb&&delete pb[m]);
if(w)k.readyState!==4&&k.abort();else{A=k.status;R=k.getAllResponseHeaders();da={};(na=k.responseXML)&&na.documentElement&&(da.xml=na);da.text=k.responseText;try{F=k.statusText}catch(Ia){F=""}!A&&b.isLocal&&!b.crossDomain?(A=da.text?200:404):A===1223&&(A=204)}}}catch(za){w||j(-1,za)}da&&j(A,F,da,R)};!b.async||k.readyState===4?h():(m=++Ua,bb&&(pb||(pb={},f(c).unload(bb)),pb[m]=h),k.onreadystatechange=h)},abort:function(){h&&h(0,1)}}}});var db={},Xa,Ha,ib=/^(?:toggle|show|hide)$/,kc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,
jb,Pa=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],qb,Eb=c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame||c.oRequestAnimationFrame;f.fn.extend({show:function(b,h,d){var j;if(b||b===0)return this.animate(i("show",3),b,h,d);h=0;for(d=this.length;h<d;h++){b=this[h];b.style&&(j=b.style.display,!f._data(b,"olddisplay")&&j==="none"&&(j=b.style.display=""),j===""&&f.css(b,"display")==="none"&&
f._data(b,"olddisplay",g(b.nodeName)))}for(h=0;h<d;h++){b=this[h];if(b.style){j=b.style.display;if(j===""||j==="none")b.style.display=f._data(b,"olddisplay")||""}}return this},hide:function(b,h,d){if(b||b===0)return this.animate(i("hide",3),b,h,d);b=0;for(h=this.length;b<h;b++)if(this[b].style){d=f.css(this[b],"display");d!=="none"&&!f._data(this[b],"olddisplay")&&f._data(this[b],"olddisplay",d)}for(b=0;b<h;b++)this[b].style&&(this[b].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(b,
h,d){var j=typeof b=="boolean";f.isFunction(b)&&f.isFunction(h)?this._toggle.apply(this,arguments):b==null||j?this.each(function(){var k=j?b:f(this).is(":hidden");f(this)[k?"show":"hide"]()}):this.animate(i("toggle",3),b,h,d);return this},fadeTo:function(b,h,d,j){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:h},b,d,j)},animate:function(b,h,d,j){var k=f.speed(h,d,j);if(f.isEmptyObject(b))return this.each(k.complete,[false]);b=f.extend({},b);return this[k.queue===false?
"each":"queue"](function(){k.queue===false&&f._mark(this);var m=f.extend({},k),o=this.nodeType===1,q=o&&f(this).is(":hidden"),u,w,A,F,R,da,na,Ia;m.animatedProperties={};for(A in b){u=f.camelCase(A);A!==u&&(b[u]=b[A],delete b[A]);w=b[u];f.isArray(w)?(m.animatedProperties[u]=w[1],w=b[u]=w[0]):(m.animatedProperties[u]=m.specialEasing&&m.specialEasing[u]||m.easing||"swing");if(w==="hide"&&q||w==="show"&&!q)return m.complete.call(this);o&&(u==="height"||u==="width")&&(m.overflow=[this.style.overflow,this.style.overflowX,
this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(f.support.inlineBlockNeedsLayout?(F=g(this.nodeName),F==="inline"?(this.style.display="inline-block"):(this.style.display="inline",this.style.zoom=1)):(this.style.display="inline-block")))}m.overflow!=null&&(this.style.overflow="hidden");for(A in b){o=new f.fx(this,m,A);w=b[A];ib.test(w)?o[w==="toggle"?q?"show":"hide":w]():(R=kc.exec(w),da=o.cur(),R?(na=parseFloat(R[2]),Ia=R[3]||(f.cssNumber[A]?"":"px"),Ia!=="px"&&
(f.style(this,A,(na||1)+Ia),da=(na||1)/o.cur()*da,f.style(this,A,da+Ia)),R[1]&&(na=(R[1]==="-="?-1:1)*na+da),o.custom(da,na,Ia)):o.custom(da,w,""))}return true})},stop:function(b,h){b&&this.queue([]);this.each(function(){var d=f.timers,j=d.length;for(h||f._unmark(true,this);j--;)d[j].elem===this&&(h&&d[j](true),d.splice(j,1))});h||this.dequeue();return this}});f.each({slideDown:i("show",1),slideUp:i("hide",1),slideToggle:i("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},
function(b,h){f.fn[b]=function(d,j,k){return this.animate(h,d,j,k)}});f.extend({speed:function(b,h,d){var j=b&&typeof b=="object"?f.extend({},b):{complete:d||!d&&h||f.isFunction(b)&&b,duration:b,easing:d&&h||h&&!f.isFunction(h)&&h};j.duration=f.fx.off?0:typeof j.duration=="number"?j.duration:j.duration in f.fx.speeds?f.fx.speeds[j.duration]:f.fx.speeds._default;j.old=j.complete;j.complete=function(k){f.isFunction(j.old)&&j.old.call(this);j.queue!==false?f.dequeue(this):k!==false&&f._unmark(this)};
return j},easing:{linear:function(b,h,d,j){return d+j*b},swing:function(b,h,d,j){return(-Math.cos(b*Math.PI)/2+0.5)*j+d}},timers:[],fx:function(b,h,d){this.options=h;this.elem=b;this.prop=d;h.orig=h.orig||{}}});f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var b,h=f.css(this.elem,
this.prop);return isNaN(b=parseFloat(h))?!h||h==="auto"?0:h:b},custom:function(b,h,d){function j(q){return k.step(q)}var k=this,m=f.fx,o;this.startTime=qb||n();this.start=b;this.end=h;this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;j.elem=this.elem;j()&&f.timers.push(j)&&!jb&&(Eb?(jb=true,o=function(){jb&&(Eb(o),m.tick())},Eb(o)):(jb=setInterval(m.tick,m.interval)))},show:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop);this.options.show=
true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(b){var h=qb||n(),d=true,j=this.elem,k=this.options,m,o;if(b||h>=k.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();k.animatedProperties[this.prop]=true;for(m in k.animatedProperties)k.animatedProperties[m]!==true&&(d=false);if(d){k.overflow!=
null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(u,w){j.style["overflow"+w]=k.overflow[u]});k.hide&&f(j).hide();if(k.hide||k.show)for(var q in k.animatedProperties)f.style(j,q,k.orig[q]);k.complete.call(j)}return false}k.duration==Infinity?(this.now=h):(o=h-this.startTime,this.state=o/k.duration,this.pos=f.easing[k.animatedProperties[this.prop]](this.state,o,0,1,k.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return true}};f.extend(f.fx,{tick:function(){for(var b=
f.timers,h=0;h<b.length;++h)b[h]()||b.splice(h--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(jb);jb=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(b){f.style(b.elem,"opacity",b.now)},_default:function(b){b.elem.style&&b.elem.style[b.prop]!=null?(b.elem.style[b.prop]=(b.prop==="width"||b.prop==="height"?Math.max(0,b.now):b.now)+b.unit):(b.elem[b.prop]=b.now)}}});f.expr&&f.expr.filters&&(f.expr.filters.animated=function(b){return f.grep(f.timers,function(h){return b===
h.elem}).length});var $a=/^t(?:able|d|h)$/i,Pb=/^(?:body|html)$/i;"getBoundingClientRect"in X.documentElement?(f.fn.offset=function(b){var h=this[0],d;if(b)return this.each(function(o){f.offset.setOffset(this,b,o)});if(!h||!h.ownerDocument)return null;if(h===h.ownerDocument.body)return f.offset.bodyOffset(h);try{d=h.getBoundingClientRect()}catch(j){}var k=h.ownerDocument,m=k.documentElement;if(!d||!f.contains(m,h))return d?{top:d.top,left:d.left}:{top:0,left:0};h=k.body;k=e(k);return{top:d.top+(k.pageYOffset||
f.support.boxModel&&m.scrollTop||h.scrollTop)-(m.clientTop||h.clientTop||0),left:d.left+(k.pageXOffset||f.support.boxModel&&m.scrollLeft||h.scrollLeft)-(m.clientLeft||h.clientLeft||0)}}):(f.fn.offset=function(b){var h=this[0];if(b)return this.each(function(A){f.offset.setOffset(this,b,A)});if(!h||!h.ownerDocument)return null;if(h===h.ownerDocument.body)return f.offset.bodyOffset(h);f.offset.initialize();var d,j=h.offsetParent,k=h,m=h.ownerDocument,o=m.documentElement,q=m.body;d=(m=m.defaultView)?
m.getComputedStyle(h,null):h.currentStyle;for(var u=h.offsetTop,w=h.offsetLeft;(h=h.parentNode)&&h!==q&&h!==o;){if(f.offset.supportsFixedPosition&&d.position==="fixed")break;d=m?m.getComputedStyle(h,null):h.currentStyle;u-=h.scrollTop;w-=h.scrollLeft;h===j&&(u+=h.offsetTop,w+=h.offsetLeft,f.offset.doesNotAddBorder&&(!f.offset.doesAddBorderForTableAndCells||!$a.test(h.nodeName))&&(u+=parseFloat(d.borderTopWidth)||0,w+=parseFloat(d.borderLeftWidth)||0),k=j,j=h.offsetParent);f.offset.subtractsBorderForOverflowNotVisible&&
d.overflow!=="visible"&&(u+=parseFloat(d.borderTopWidth)||0,w+=parseFloat(d.borderLeftWidth)||0);d=d}if(d.position==="relative"||d.position==="static"){u+=q.offsetTop;w+=q.offsetLeft}f.offset.supportsFixedPosition&&d.position==="fixed"&&(u+=Math.max(o.scrollTop,q.scrollTop),w+=Math.max(o.scrollLeft,q.scrollLeft));return{top:u,left:w}});f.offset={initialize:function(){var b=X.body,h=X.createElement("div"),d,j,k,m=parseFloat(f.css(b,"marginTop"))||0;f.extend(h.style,{position:"absolute",top:0,left:0,
margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});h.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";b.insertBefore(h,b.firstChild);d=h.firstChild;j=d.firstChild;k=d.nextSibling.firstChild.firstChild;this.doesNotAddBorder=j.offsetTop!==
5;this.doesAddBorderForTableAndCells=k.offsetTop===5;j.style.position="fixed";j.style.top="20px";this.supportsFixedPosition=j.offsetTop===20||j.offsetTop===15;j.style.position=j.style.top="";d.style.overflow="hidden";d.style.position="relative";this.subtractsBorderForOverflowNotVisible=j.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=b.offsetTop!==m;b.removeChild(h);f.offset.initialize=f.noop},bodyOffset:function(b){var h=b.offsetTop,d=b.offsetLeft;f.offset.initialize();f.offset.doesNotIncludeMarginInBodyOffset&&
(h+=parseFloat(f.css(b,"marginTop"))||0,d+=parseFloat(f.css(b,"marginLeft"))||0);return{top:h,left:d}},setOffset:function(b,h,d){var j=f.css(b,"position");j==="static"&&(b.style.position="relative");var k=f(b),m=k.offset(),o=f.css(b,"top"),q=f.css(b,"left"),u={},w={},A,F;(j==="absolute"||j==="fixed")&&f.inArray("auto",[o,q])>-1?(w=k.position(),A=w.top,F=w.left):(A=parseFloat(o)||0,F=parseFloat(q)||0);f.isFunction(h)&&(h=h.call(b,d,m));h.top!=null&&(u.top=h.top-m.top+A);h.left!=null&&(u.left=h.left-
m.left+F);"using"in h?h.using.call(b,u):k.css(u)}};f.fn.extend({position:function(){if(!this[0])return null;var b=this[0],h=this.offsetParent(),d=this.offset(),j=Pb.test(h[0].nodeName)?{top:0,left:0}:h.offset();d.top-=parseFloat(f.css(b,"marginTop"))||0;d.left-=parseFloat(f.css(b,"marginLeft"))||0;j.top+=parseFloat(f.css(h[0],"borderTopWidth"))||0;j.left+=parseFloat(f.css(h[0],"borderLeftWidth"))||0;return{top:d.top-j.top,left:d.left-j.left}},offsetParent:function(){return this.map(function(){for(var b=
this.offsetParent||X.body;b&&!Pb.test(b.nodeName)&&f.css(b,"position")==="static";)b=b.offsetParent;return b})}});f.each(["Left","Top"],function(b,h){var d="scroll"+h;f.fn[d]=function(j){var k,m;if(j===a){k=this[0];if(!k)return null;return(m=e(k))?"pageXOffset"in m?m[b?"pageYOffset":"pageXOffset"]:f.support.boxModel&&m.document.documentElement[d]||m.document.body[d]:k[d]}return this.each(function(){(m=e(this))?m.scrollTo(b?f(m).scrollLeft():j,b?j:f(m).scrollTop()):(this[d]=j)})}});f.each(["Height",
"Width"],function(b,h){var d=h.toLowerCase();f.fn["inner"+h]=function(){var j=this[0];return j&&j.style?parseFloat(f.css(j,d,"padding")):null};f.fn["outer"+h]=function(j){var k=this[0];return k&&k.style?parseFloat(f.css(k,d,j?"margin":"border")):null};f.fn[d]=function(j){var k=this[0];if(!k)return j==null?null:this;if(f.isFunction(j))return this.each(function(o){var q=f(this);q[d](j.call(this,o,q[d]()))});if(f.isWindow(k)){var m=k.document.documentElement["client"+h];return k.document.compatMode===
"CSS1Compat"&&m||k.document.body["client"+h]||m}if(k.nodeType===9)return Math.max(k.documentElement["client"+h],k.body["scroll"+h],k.documentElement["scroll"+h],k.body["offset"+h],k.documentElement["offset"+h]);if(j===a){k=f.css(k,d);m=parseFloat(k);return f.isNaN(m)?k:m}return this.css(d,typeof j=="string"?j:j+"px")}});c.jQuery=c.$=f})(window);
(function(c,a){function e(i,l){var n=i.nodeName.toLowerCase();if("area"===n){n=i.parentNode;var v=n.name;if(!i.href||!v||n.nodeName.toLowerCase()!=="map")return false;n=c("img[usemap=#"+v+"]")[0];return!!n&&g(n)}return(/input|select|textarea|button|object/.test(n)?!i.disabled:"a"==n?i.href||l:l)&&g(i)}function g(i){return!c(i).parents().andSelf().filter(function(){return c.curCSS(this,"visibility")==="hidden"||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};if(!c.ui.version){c.extend(c.ui,{version:"1.8.16",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({propAttr:c.fn.prop||c.fn.attr,_focus:c.fn.focus,focus:function(i,l){return typeof i==="number"?this.each(function(){var n=
this;setTimeout(function(){c(n).focus();l&&l.call(n)},i)}):this._focus.apply(this,arguments)},scrollParent:function(){var i;i=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,
"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!i.length?c(document):i},zIndex:function(i){if(i!==a)return this.css("zIndex",i);if(this.length){i=c(this[0]);for(var l;i.length&&i[0]!==document;){l=i.css("position");if(l==="absolute"||l==="relative"||l==="fixed"){l=parseInt(i.css("zIndex"),10);if(!isNaN(l)&&l!==0)return l}i=i.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(i){i.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.each(["Width","Height"],function(i,l){function n(D,K,ba,ka){c.each(v,function(){K-=parseFloat(c.curCSS(D,"padding"+this,true))||0;if(ba)K-=parseFloat(c.curCSS(D,"border"+this+"Width",true))||0;if(ka)K-=parseFloat(c.curCSS(D,"margin"+this,true))||0});return K}var v=l==="Width"?["Left","Right"]:["Top","Bottom"],x=l.toLowerCase(),s={innerWidth:c.fn.innerWidth,
innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+l]=function(D){if(D===a)return s["inner"+l].call(this);return this.each(function(){c(this).css(x,n(this,D)+"px")})};c.fn["outer"+l]=function(D,K){if(typeof D!=="number")return s["outer"+l].call(this,D);return this.each(function(){c(this).css(x,n(this,D,true,K)+"px")})}});c.extend(c.expr[":"],{data:function(i,l,n){return!!c.data(i,n[3])},focusable:function(i){return e(i,!isNaN(c.attr(i,"tabindex")))},
tabbable:function(i){var l=c.attr(i,"tabindex"),n=isNaN(l);return(n||l>=0)&&e(i,!n)}});c(function(){var i=document.body,l=i.appendChild(l=document.createElement("div"));c.extend(l.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=l.offsetHeight===100;c.support.selectstart="onselectstart"in l;i.removeChild(l).style.display="none"});c.extend(c.ui,{plugin:{add:function(i,l,n){i=c.ui[i].prototype;for(var v in n){i.plugins[v]=i.plugins[v]||[];i.plugins[v].push([l,n[v]])}},
call:function(i,l,n){if((l=i.plugins[l])&&i.element[0].parentNode)for(var v=0;v<l.length;v++)i.options[l[v][0]]&&l[v][1].apply(i.element,n)}},contains:function(i,l){return document.compareDocumentPosition?i.compareDocumentPosition(l)&16:i!==l&&i.contains(l)},hasScroll:function(i,l){if(c(i).css("overflow")==="hidden")return false;var n=l&&l==="left"?"scrollLeft":"scrollTop",v=false;if(i[n]>0)return true;i[n]=1;v=i[n]>0;i[n]=0;return v},isOverAxis:function(i,l,n){return i>l&&i<l+n},isOver:function(i,
l,n,v,x,s){return c.ui.isOverAxis(i,n,x)&&c.ui.isOverAxis(l,v,s)}})}})(jQuery);
(function(c,a){if(c.cleanData){var e=c.cleanData;c.cleanData=function(i){for(var l=0,n;(n=i[l])!=null;l++)try{c(n).triggerHandler("remove")}catch(v){}e(i)}}else{var g=c.fn.remove;c.fn.remove=function(i,l){return this.each(function(){if(!l)if(!i||c.filter(i,[this]).length)c("*",this).add([this]).each(function(){try{c(this).triggerHandler("remove")}catch(n){}});return g.call(c(this),i,l)})}}c.widget=function(i,l,n){var v=i.split(".")[0],x;i=i.split(".")[1];x=v+"-"+i;if(!n){n=l;l=c.Widget}c.expr[":"][x]=
function(s){return!!c.data(s,i)};c[v]=c[v]||{};c[v][i]=function(s,D){arguments.length&&this._createWidget(s,D)};l=new l;l.options=c.extend(true,{},l.options);c[v][i].prototype=c.extend(true,l,{namespace:v,widgetName:i,widgetEventPrefix:c[v][i].prototype.widgetEventPrefix||i,widgetBaseClass:x},n);c.widget.bridge(i,c[v][i])};c.widget.bridge=function(i,l){c.fn[i]=function(n){var v=typeof n==="string",x=Array.prototype.slice.call(arguments,1),s=this;n=!v&&x.length?c.extend.apply(null,[true,n].concat(x)):
n;if(v&&n.charAt(0)==="_")return s;v?this.each(function(){var D=c.data(this,i),K=D&&c.isFunction(D[n])?D[n].apply(D,x):D;if(K!==D&&K!==a){s=K;return false}}):this.each(function(){var D=c.data(this,i);D?D.option(n||{})._init():c.data(this,i,new l(n,this))});return s}};c.Widget=function(i,l){arguments.length&&this._createWidget(i,l)};c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(i,l){c.data(l,this.widgetName,this);this.element=c(l);this.options=
c.extend(true,{},this.options,this._getCreateOptions(),i);var n=this;this.element.bind("remove."+this.widgetName,function(){n.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return c.metadata&&c.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(i,l){var n=i;if(arguments.length===0)return c.extend({},this.options);if(typeof i==="string"){if(l===a)return this.options[i];n={};n[i]=l}this._setOptions(n);return this},_setOptions:function(i){var l=this;c.each(i,function(n,v){l._setOption(n,v)});return this},_setOption:function(i,l){this.options[i]=l;if(i==="disabled")this.widget()[l?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
l);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(i,l,n){var v=this.options[i];l=c.Event(l);l.type=(i===this.widgetEventPrefix?i:this.widgetEventPrefix+i).toLowerCase();n=n||{};if(l.originalEvent){i=c.event.props.length;for(var x;i;){x=c.event.props[--i];l[x]=l.originalEvent[x]}}this.element.trigger(l,n);return!(c.isFunction(v)&&v.call(this.element[0],l,n)===false||l.isDefaultPrevented())}}})(jQuery);
(function(c){var a=false;c(document).mouseup(function(){a=false});c.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(g){return e._mouseDown(g)}).bind("click."+this.widgetName,function(g){if(true===c.data(g.target,e.widgetName+".preventClickEvent")){c.removeData(g.target,e.widgetName+".preventClickEvent");g.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(e){if(!a){this._mouseStarted&&this._mouseUp(e);this._mouseDownEvent=e;var g=this,i=e.which==1,l=typeof this.options.cancel=="string"&&e.target.nodeName?c(e.target).closest(this.options.cancel).length:false;if(!i||l||!this._mouseCapture(e))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){g.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=
this._mouseStart(e)!==false;if(!this._mouseStarted){e.preventDefault();return true}}true===c.data(e.target,this.widgetName+".preventClickEvent")&&c.removeData(e.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(n){return g._mouseMove(n)};this._mouseUpDelegate=function(n){return g._mouseUp(n)};c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);e.preventDefault();return a=true}},_mouseMove:function(e){if(c.browser.msie&&
!(document.documentMode>=9)&&!e.button)return this._mouseUp(e);if(this._mouseStarted){this._mouseDrag(e);return e.preventDefault()}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==false)?this._mouseDrag(e):this._mouseUp(e);return!this._mouseStarted},_mouseUp:function(e){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=
false;e.target==this._mouseDownEvent.target&&c.data(e.target,this.widgetName+".preventClickEvent",true);this._mouseStop(e)}return false},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(c){c.widget("ui.draggable",c.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(a){var e=
this.options;if(this.helper||e.disabled||c(a.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(a);if(!this.handle)return false;if(e.iframeFix)c(e.iframeFix===true?"iframe":e.iframeFix).each(function(){c('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(c(this).offset()).appendTo("body")});return true},_mouseStart:function(a){var e=this.options;
this.helper=this._createHelper(a);this._cacheHelperProportions();if(c.ui.ddmanager)c.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};c.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});
this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);e.containment&&this._setContainment();if(this._trigger("start",a)===false){this._clear();return false}this._cacheHelperProportions();c.ui.ddmanager&&!e.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(a,true);c.ui.ddmanager&&c.ui.ddmanager.dragStart(this,a);return true},
_mouseDrag:function(a,e){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!e){var g=this._uiHash();if(this._trigger("drag",a,g)===false){this._mouseUp({});return false}this.position=g.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";c.ui.ddmanager&&c.ui.ddmanager.drag(this,a);return false},_mouseStop:function(a){var e=
false;if(c.ui.ddmanager&&!this.options.dropBehaviour)e=c.ui.ddmanager.drop(this,a);if(this.dropped){e=this.dropped;this.dropped=false}if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return false;if(this.options.revert=="invalid"&&!e||this.options.revert=="valid"&&e||this.options.revert===true||c.isFunction(this.options.revert)&&this.options.revert.call(this.element,e)){var g=this;c(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,
10),function(){g._trigger("stop",a)!==false&&g._clear()})}else this._trigger("stop",a)!==false&&this._clear();return false},_mouseUp:function(a){this.options.iframeFix===true&&c("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});c.ui.ddmanager&&c.ui.ddmanager.dragStop(this,a);return c.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var e=!this.options.handle||
!c(this.options.handle,this.element).length?true:false;c(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==a.target)e=true});return e},_createHelper:function(a){var e=this.options;a=c.isFunction(e.helper)?c(e.helper.apply(this.element[0],[a])):e.helper=="clone"?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo(e.appendTo=="parent"?this.element[0].parentNode:e.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&
a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(c.isArray(a))a={left:+a[0],top:+a[1]||0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=
this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&c.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),
10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[a.containment=="document"?0:c(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:c(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,
(a.containment=="document"?0:c(window).scrollLeft())+c(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:c(window).scrollTop())+(c(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){a=c(a.containment);var e=a[0];if(e){a.offset();var g=c(e).css("overflow")!=
"hidden";this.containment=[(parseInt(c(e).css("borderLeftWidth"),10)||0)+(parseInt(c(e).css("paddingLeft"),10)||0),(parseInt(c(e).css("borderTopWidth"),10)||0)+(parseInt(c(e).css("paddingTop"),10)||0),(g?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(c(e).css("borderLeftWidth"),10)||0)-(parseInt(c(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(g?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(c(e).css("borderTopWidth"),
10)||0)-(parseInt(c(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=a}}else if(a.containment.constructor==Array)this.containment=a.containment},_convertPositionTo:function(a,e){if(!e)e=this.position;var g=a=="absolute"?1:-1,i=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(i[0].tagName);return{top:e.top+
this.offset.relative.top*g+this.offset.parent.top*g-(c.browser.safari&&c.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():l?0:i.scrollTop())*g),left:e.left+this.offset.relative.left*g+this.offset.parent.left*g-(c.browser.safari&&c.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:i.scrollLeft())*g)}},_generatePosition:function(a){var e=this.options,g=this.cssPosition=="absolute"&&
!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=/(html|body)/i.test(g[0].tagName),l=a.pageX,n=a.pageY;if(this.originalPosition){var v;if(this.containment){if(this.relative_container){v=this.relative_container.offset();v=[this.containment[0]+v.left,this.containment[1]+v.top,this.containment[2]+v.left,this.containment[3]+v.top]}else v=this.containment;if(a.pageX-this.offset.click.left<v[0])l=v[0]+this.offset.click.left;
if(a.pageY-this.offset.click.top<v[1])n=v[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>v[2])l=v[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>v[3])n=v[3]+this.offset.click.top}if(e.grid){n=e.grid[1]?this.originalPageY+Math.round((n-this.originalPageY)/e.grid[1])*e.grid[1]:this.originalPageY;n=v?!(n-this.offset.click.top<v[1]||n-this.offset.click.top>v[3])?n:!(n-this.offset.click.top<v[1])?n-e.grid[1]:n+e.grid[1]:n;l=e.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/
e.grid[0])*e.grid[0]:this.originalPageX;l=v?!(l-this.offset.click.left<v[0]||l-this.offset.click.left>v[2])?l:!(l-this.offset.click.left<v[0])?l-e.grid[0]:l+e.grid[0]:l}}return{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(c.browser.safari&&c.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:g.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(c.browser.safari&&c.browser.version<
526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:g.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(a,e,g){g=g||this._uiHash();c.ui.plugin.call(this,a,[e,g]);if(a=="drag")this.positionAbs=this._convertPositionTo("absolute");return c.Widget.prototype._trigger.call(this,a,e,
g)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});c.extend(c.ui.draggable,{version:"1.8.16"});c.ui.plugin.add("draggable","connectToSortable",{start:function(a,e){var g=c(this).data("draggable"),i=g.options,l=c.extend({},e,{item:g.element});g.sortables=[];c(i.connectToSortable).each(function(){var n=c.data(this,"sortable");if(n&&!n.options.disabled){g.sortables.push({instance:n,shouldRevert:n.options.revert});
n.refreshPositions();n._trigger("activate",a,l)}})},stop:function(a,e){var g=c(this).data("draggable"),i=c.extend({},e,{item:g.element});c.each(g.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;g.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(a);this.instance.options.helper=this.instance.options._helper;g.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=
false;this.instance._trigger("deactivate",a,i)}})},drag:function(a,e){var g=c(this).data("draggable"),i=this;c.each(g.sortables,function(){this.instance.positionAbs=g.positionAbs;this.instance.helperProportions=g.helperProportions;this.instance.offset.click=g.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=c(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);
this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return e.helper[0]};a.target=this.instance.currentItem[0];this.instance._mouseCapture(a,true);this.instance._mouseStart(a,true,true);this.instance.offset.click.top=g.offset.click.top;this.instance.offset.click.left=g.offset.click.left;this.instance.offset.parent.left-=g.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=g.offset.parent.top-this.instance.offset.parent.top;
g._trigger("toSortable",a);g.dropped=this.instance.element;g.currentItem=g.element;this.instance.fromOutside=g}this.instance.currentItem&&this.instance._mouseDrag(a)}else if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",a,this.instance._uiHash(this.instance));this.instance._mouseStop(a,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&
this.instance.placeholder.remove();g._trigger("fromSortable",a);g.dropped=false}})}});c.ui.plugin.add("draggable","cursor",{start:function(){var a=c("body"),e=c(this).data("draggable").options;if(a.css("cursor"))e._cursor=a.css("cursor");a.css("cursor",e.cursor)},stop:function(){var a=c(this).data("draggable").options;a._cursor&&c("body").css("cursor",a._cursor)}});c.ui.plugin.add("draggable","opacity",{start:function(a,e){var g=c(e.helper),i=c(this).data("draggable").options;if(g.css("opacity"))i._opacity=
g.css("opacity");g.css("opacity",i.opacity)},stop:function(a,e){var g=c(this).data("draggable").options;g._opacity&&c(e.helper).css("opacity",g._opacity)}});c.ui.plugin.add("draggable","scroll",{start:function(){var a=c(this).data("draggable");if(a.scrollParent[0]!=document&&a.scrollParent[0].tagName!="HTML")a.overflowOffset=a.scrollParent.offset()},drag:function(a){var e=c(this).data("draggable"),g=e.options,i=false;if(e.scrollParent[0]!=document&&e.scrollParent[0].tagName!="HTML"){if(!g.axis||g.axis!=
"x")if(e.overflowOffset.top+e.scrollParent[0].offsetHeight-a.pageY<g.scrollSensitivity)e.scrollParent[0].scrollTop=i=e.scrollParent[0].scrollTop+g.scrollSpeed;else if(a.pageY-e.overflowOffset.top<g.scrollSensitivity)e.scrollParent[0].scrollTop=i=e.scrollParent[0].scrollTop-g.scrollSpeed;if(!g.axis||g.axis!="y")if(e.overflowOffset.left+e.scrollParent[0].offsetWidth-a.pageX<g.scrollSensitivity)e.scrollParent[0].scrollLeft=i=e.scrollParent[0].scrollLeft+g.scrollSpeed;else if(a.pageX-e.overflowOffset.left<
g.scrollSensitivity)e.scrollParent[0].scrollLeft=i=e.scrollParent[0].scrollLeft-g.scrollSpeed}else{if(!g.axis||g.axis!="x")if(a.pageY-c(document).scrollTop()<g.scrollSensitivity)i=c(document).scrollTop(c(document).scrollTop()-g.scrollSpeed);else if(c(window).height()-(a.pageY-c(document).scrollTop())<g.scrollSensitivity)i=c(document).scrollTop(c(document).scrollTop()+g.scrollSpeed);if(!g.axis||g.axis!="y")if(a.pageX-c(document).scrollLeft()<g.scrollSensitivity)i=c(document).scrollLeft(c(document).scrollLeft()-
g.scrollSpeed);else if(c(window).width()-(a.pageX-c(document).scrollLeft())<g.scrollSensitivity)i=c(document).scrollLeft(c(document).scrollLeft()+g.scrollSpeed)}i!==false&&c.ui.ddmanager&&!g.dropBehaviour&&c.ui.ddmanager.prepareOffsets(e,a)}});c.ui.plugin.add("draggable","snap",{start:function(){var a=c(this).data("draggable"),e=a.options;a.snapElements=[];c(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var g=c(this),i=g.offset();this!=a.element[0]&&a.snapElements.push({item:this,
width:g.outerWidth(),height:g.outerHeight(),top:i.top,left:i.left})})},drag:function(a,e){for(var g=c(this).data("draggable"),i=g.options,l=i.snapTolerance,n=e.offset.left,v=n+g.helperProportions.width,x=e.offset.top,s=x+g.helperProportions.height,D=g.snapElements.length-1;D>=0;D--){var K=g.snapElements[D].left,ba=K+g.snapElements[D].width,ka=g.snapElements[D].top,ma=ka+g.snapElements[D].height;if(K-l<n&&n<ba+l&&ka-l<x&&x<ma+l||K-l<n&&n<ba+l&&ka-l<s&&s<ma+l||K-l<v&&v<ba+l&&ka-l<x&&x<ma+l||K-l<v&&
v<ba+l&&ka-l<s&&s<ma+l){if(i.snapMode!="inner"){var p=Math.abs(ka-s)<=l,t=Math.abs(ma-x)<=l,B=Math.abs(K-v)<=l,E=Math.abs(ba-n)<=l;if(p)e.position.top=g._convertPositionTo("relative",{top:ka-g.helperProportions.height,left:0}).top-g.margins.top;if(t)e.position.top=g._convertPositionTo("relative",{top:ma,left:0}).top-g.margins.top;if(B)e.position.left=g._convertPositionTo("relative",{top:0,left:K-g.helperProportions.width}).left-g.margins.left;if(E)e.position.left=g._convertPositionTo("relative",{top:0,
left:ba}).left-g.margins.left}var Y=p||t||B||E;if(i.snapMode!="outer"){p=Math.abs(ka-x)<=l;t=Math.abs(ma-s)<=l;B=Math.abs(K-n)<=l;E=Math.abs(ba-v)<=l;if(p)e.position.top=g._convertPositionTo("relative",{top:ka,left:0}).top-g.margins.top;if(t)e.position.top=g._convertPositionTo("relative",{top:ma-g.helperProportions.height,left:0}).top-g.margins.top;if(B)e.position.left=g._convertPositionTo("relative",{top:0,left:K}).left-g.margins.left;if(E)e.position.left=g._convertPositionTo("relative",{top:0,left:ba-
g.helperProportions.width}).left-g.margins.left}if(!g.snapElements[D].snapping&&(p||t||B||E||Y))g.options.snap.snap&&g.options.snap.snap.call(g.element,a,c.extend(g._uiHash(),{snapItem:g.snapElements[D].item}));g.snapElements[D].snapping=p||t||B||E||Y}else{g.snapElements[D].snapping&&g.options.snap.release&&g.options.snap.release.call(g.element,a,c.extend(g._uiHash(),{snapItem:g.snapElements[D].item}));g.snapElements[D].snapping=false}}}});c.ui.plugin.add("draggable","stack",{start:function(){var a=
c(this).data("draggable").options;a=c.makeArray(c(a.stack)).sort(function(g,i){return(parseInt(c(g).css("zIndex"),10)||0)-(parseInt(c(i).css("zIndex"),10)||0)});if(a.length){var e=parseInt(a[0].style.zIndex)||0;c(a).each(function(g){this.style.zIndex=e+g});this[0].style.zIndex=e+a.length}}});c.ui.plugin.add("draggable","zIndex",{start:function(a,e){var g=c(e.helper),i=c(this).data("draggable").options;if(g.css("zIndex"))i._zIndex=g.css("zIndex");g.css("zIndex",i.zIndex)},stop:function(a,e){var g=
c(this).data("draggable").options;g._zIndex&&c(e.helper).css("zIndex",g._zIndex)}})})(jQuery);
(function(c){c.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,e=a.accept;this.isover=0;this.isout=1;this.accept=c.isFunction(e)?e:function(g){return g.is(e)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};c.ui.ddmanager.droppables[a.scope]=c.ui.ddmanager.droppables[a.scope]||[];c.ui.ddmanager.droppables[a.scope].push(this);
a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var a=c.ui.ddmanager.droppables[this.options.scope],e=0;e<a.length;e++)a[e]==this&&a.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(a,e){if(a=="accept")this.accept=c.isFunction(e)?e:function(g){return g.is(e)};c.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var e=c.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);e&&this._trigger("activate",a,this.ui(e))},_deactivate:function(a){var e=c.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);e&&this._trigger("deactivate",a,this.ui(e))},_over:function(a){var e=c.ui.ddmanager.current;if(!(!e||(e.currentItem||e.element)[0]==this.element[0]))if(this.accept.call(this.element[0],e.currentItem||e.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);
this._trigger("over",a,this.ui(e))}},_out:function(a){var e=c.ui.ddmanager.current;if(!(!e||(e.currentItem||e.element)[0]==this.element[0]))if(this.accept.call(this.element[0],e.currentItem||e.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("out",a,this.ui(e))}},_drop:function(a,e){var g=e||c.ui.ddmanager.current;if(!g||(g.currentItem||g.element)[0]==this.element[0])return false;var i=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var l=
c.data(this,"droppable");if(l.options.greedy&&!l.options.disabled&&l.options.scope==g.options.scope&&l.accept.call(l.element[0],g.currentItem||g.element)&&c.ui.intersect(g,c.extend(l,{offset:l.element.offset()}),l.options.tolerance)){i=true;return false}});if(i)return false;if(this.accept.call(this.element[0],g.currentItem||g.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",
a,this.ui(g));return this.element}return false},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});c.extend(c.ui.droppable,{version:"1.8.16"});c.ui.intersect=function(a,e,g){if(!e.offset)return false;var i=(a.positionAbs||a.position.absolute).left,l=i+a.helperProportions.width,n=(a.positionAbs||a.position.absolute).top,v=n+a.helperProportions.height,x=e.offset.left,s=x+e.proportions.width,D=e.offset.top,K=D+e.proportions.height;switch(g){case "fit":return x<=
i&&l<=s&&D<=n&&v<=K;case "intersect":return x<i+a.helperProportions.width/2&&l-a.helperProportions.width/2<s&&D<n+a.helperProportions.height/2&&v-a.helperProportions.height/2<K;case "pointer":return c.ui.isOver((a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,D,x,e.proportions.height,e.proportions.width);case "touch":return(n>=D&&n<=K||v>=D&&v<=K||n<D&&v>K)&&(i>=x&&i<=s||l>=x&&l<=s||i<x&&l>s);
default:return false}};c.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,e){var g=c.ui.ddmanager.droppables[a.options.scope]||[],i=e?e.type:null,l=(a.currentItem||a.element).find(":data(droppable)").andSelf(),n=0;a:for(;n<g.length;n++)if(!(g[n].options.disabled||a&&!g[n].accept.call(g[n].element[0],a.currentItem||a.element))){for(var v=0;v<l.length;v++)if(l[v]==g[n].element[0]){g[n].proportions.height=0;continue a}g[n].visible=g[n].element.css("display")!="none";if(g[n].visible){i==
"mousedown"&&g[n]._activate.call(g[n],e);g[n].offset=g[n].element.offset();g[n].proportions={width:g[n].element[0].offsetWidth,height:g[n].element[0].offsetHeight}}}},drop:function(a,e){var g=false;c.each(c.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&c.ui.intersect(a,this,this.options.tolerance))g=g||this._drop.call(this,e);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)){this.isout=
1;this.isover=0;this._deactivate.call(this,e)}}});return g},dragStart:function(a,e){a.element.parents(":not(body,html)").bind("scroll.droppable",function(){a.options.refreshPositions||c.ui.ddmanager.prepareOffsets(a,e)})},drag:function(a,e){a.options.refreshPositions&&c.ui.ddmanager.prepareOffsets(a,e);c.each(c.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var g=c.ui.intersect(a,this,this.options.tolerance);if(g=!g&&this.isover==
1?"isout":g&&this.isover==0?"isover":null){var i;if(this.options.greedy){var l=this.element.parents(":data(droppable):eq(0)");if(l.length){i=c.data(l[0],"droppable");i.greedyChild=g=="isover"?1:0}}if(i&&g=="isover"){i.isover=0;i.isout=1;i._out.call(i,e)}this[g]=1;this[g=="isout"?"isover":"isout"]=0;this[g=="isover"?"_over":"_out"].call(this,e);if(i&&g=="isout"){i.isout=0;i.isover=1;i._over.call(i,e)}}}})},dragStop:function(a,e){a.element.parents(":not(body,html)").unbind("scroll.droppable");a.options.refreshPositions||
c.ui.ddmanager.prepareOffsets(a,e)}}})(jQuery);
(function(c){c.widget("ui.resizable",c.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var g=this,i=this.options;this.element.addClass("ui-resizable");c.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){/relative/.test(this.element.css("position"))&&c.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap(c('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),
top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=
this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=i.handles||(!c(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",
nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var l=this.handles.split(",");this.handles={};for(var n=0;n<l.length;n++){var v=c.trim(l[n]),x=c('<div class="ui-resizable-handle '+("ui-resizable-"+v)+'"></div>');/sw|se|ne|nw/.test(v)&&x.css({zIndex:++i.zIndex});"se"==v&&x.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[v]=".ui-resizable-"+v;this.element.append(x)}}this._renderAxis=function(s){s=s||this.element;for(var D in this.handles){if(this.handles[D].constructor==
String)this.handles[D]=c(this.handles[D],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var K=c(this.handles[D],this.element),ba=0;ba=/sw|ne|nw|se|n|s/.test(D)?K.outerHeight():K.outerWidth();K=["padding",/ne|nw|n/.test(D)?"Top":/se|sw|s/.test(D)?"Bottom":/^e$/.test(D)?"Right":"Left"].join("");s.css(K,ba);this._proportionallyResize()}c(this.handles[D])}};this._renderAxis(this.element);this._handles=c(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){if(!g.resizing){if(this.className)var s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);g.axis=s&&s[1]?s[1]:"se"}});if(i.autoHide){this._handles.hide();c(this.element).addClass("ui-resizable-autohide").hover(function(){if(!i.disabled){c(this).removeClass("ui-resizable-autohide");g._handles.show()}},function(){if(!i.disabled)if(!g.resizing){c(this).addClass("ui-resizable-autohide");g._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();
var g=function(l){c(l).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){g(this.element);var i=this.element;i.after(this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);g(this.originalElement);return this},_mouseCapture:function(g){var i=
false;for(var l in this.handles)if(c(this.handles[l])[0]==g.target)i=true;return!this.options.disabled&&i},_mouseStart:function(g){var i=this.options,l=this.element.position(),n=this.element;this.resizing=true;this.documentScroll={top:c(document).scrollTop(),left:c(document).scrollLeft()};if(n.is(".ui-draggable")||/absolute/.test(n.css("position")))n.css({position:"absolute",top:l.top,left:l.left});c.browser.opera&&/relative/.test(n.css("position"))&&n.css({position:"relative",top:"auto",left:"auto"});
this._renderProxy();l=a(this.helper.css("left"));var v=a(this.helper.css("top"));if(i.containment){l+=c(i.containment).scrollLeft()||0;v+=c(i.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:l,top:v};this.size=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()};this.originalSize=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()};this.originalPosition={left:l,top:v};this.sizeDiff=
{width:n.outerWidth()-n.width(),height:n.outerHeight()-n.height()};this.originalMousePosition={left:g.pageX,top:g.pageY};this.aspectRatio=typeof i.aspectRatio=="number"?i.aspectRatio:this.originalSize.width/this.originalSize.height||1;i=c(".ui-resizable-"+this.axis).css("cursor");c("body").css("cursor",i=="auto"?this.axis+"-resize":i);n.addClass("ui-resizable-resizing");this._propagate("start",g);return true},_mouseDrag:function(g){var i=this.helper,l=this.originalMousePosition,n=this._change[this.axis];
if(!n)return false;l=n.apply(this,[g,g.pageX-l.left||0,g.pageY-l.top||0]);this._updateVirtualBoundaries(g.shiftKey);if(this._aspectRatio||g.shiftKey)l=this._updateRatio(l,g);l=this._respectSize(l,g);this._propagate("resize",g);i.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(l);this._trigger("resize",g,this.ui());return false},
_mouseStop:function(g){this.resizing=false;var i=this.options;if(this._helper){var l=this._proportionallyResizeElements,n=l.length&&/textarea/i.test(l[0].nodeName);l=n&&c.ui.hasScroll(l[0],"left")?0:this.sizeDiff.height;n=n?0:this.sizeDiff.width;n={width:this.helper.width()-n,height:this.helper.height()-l};l=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null;var v=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;i.animate||
this.element.css(c.extend(n,{top:v,left:l}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!i.animate&&this._proportionallyResize()}c("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",g);this._helper&&this.helper.remove();return false},_updateVirtualBoundaries:function(g){var i=this.options,l,n,v;i={minWidth:e(i.minWidth)?i.minWidth:0,maxWidth:e(i.maxWidth)?i.maxWidth:Infinity,minHeight:e(i.minHeight)?i.minHeight:
0,maxHeight:e(i.maxHeight)?i.maxHeight:Infinity};if(this._aspectRatio||g){g=i.minHeight*this.aspectRatio;n=i.minWidth/this.aspectRatio;l=i.maxHeight*this.aspectRatio;v=i.maxWidth/this.aspectRatio;if(g>i.minWidth)i.minWidth=g;if(n>i.minHeight)i.minHeight=n;if(l<i.maxWidth)i.maxWidth=l;if(v<i.maxHeight)i.maxHeight=v}this._vBoundaries=i},_updateCache:function(g){this.offset=this.helper.offset();if(e(g.left))this.position.left=g.left;if(e(g.top))this.position.top=g.top;if(e(g.height))this.size.height=
g.height;if(e(g.width))this.size.width=g.width},_updateRatio:function(g){var i=this.position,l=this.size,n=this.axis;if(e(g.height))g.width=g.height*this.aspectRatio;else if(e(g.width))g.height=g.width/this.aspectRatio;if(n=="sw"){g.left=i.left+(l.width-g.width);g.top=null}if(n=="nw"){g.top=i.top+(l.height-g.height);g.left=i.left+(l.width-g.width)}return g},_respectSize:function(g){var i=this._vBoundaries,l=this.axis,n=e(g.width)&&i.maxWidth&&i.maxWidth<g.width,v=e(g.height)&&i.maxHeight&&i.maxHeight<
g.height,x=e(g.width)&&i.minWidth&&i.minWidth>g.width,s=e(g.height)&&i.minHeight&&i.minHeight>g.height;if(x)g.width=i.minWidth;if(s)g.height=i.minHeight;if(n)g.width=i.maxWidth;if(v)g.height=i.maxHeight;var D=this.originalPosition.left+this.originalSize.width,K=this.position.top+this.size.height,ba=/sw|nw|w/.test(l);l=/nw|ne|n/.test(l);if(x&&ba)g.left=D-i.minWidth;if(n&&ba)g.left=D-i.maxWidth;if(s&&l)g.top=K-i.minHeight;if(v&&l)g.top=K-i.maxHeight;if((i=!g.width&&!g.height)&&!g.left&&g.top)g.top=
null;else if(i&&!g.top&&g.left)g.left=null;return g},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var g=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var l=this._proportionallyResizeElements[i];if(!this.borderDif){var n=[l.css("borderTopWidth"),l.css("borderRightWidth"),l.css("borderBottomWidth"),l.css("borderLeftWidth")],v=[l.css("paddingTop"),l.css("paddingRight"),l.css("paddingBottom"),l.css("paddingLeft")];this.borderDif=c.map(n,
function(x,s){var D=parseInt(x,10)||0,K=parseInt(v[s],10)||0;return D+K})}c.browser.msie&&(c(g).is(":hidden")||c(g).parents(":hidden").length)||l.css({height:g.height()-this.borderDif[0]-this.borderDif[2]||0,width:g.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var g=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||c('<div style="overflow:hidden;"></div>');var i=c.browser.msie&&c.browser.version<7,l=i?1:0;i=i?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+
i,height:this.element.outerHeight()+i,position:"absolute",left:this.elementOffset.left-l+"px",top:this.elementOffset.top-l+"px",zIndex:++g.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(g,i){return{width:this.originalSize.width+i}},w:function(g,i){return{left:this.originalPosition.left+i,width:this.originalSize.width-i}},n:function(g,i,l){return{top:this.originalPosition.top+l,height:this.originalSize.height-l}},s:function(g,i,l){return{height:this.originalSize.height+
l}},se:function(g,i,l){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[g,i,l]))},sw:function(g,i,l){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[g,i,l]))},ne:function(g,i,l){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[g,i,l]))},nw:function(g,i,l){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[g,i,l]))}},_propagate:function(g,i){c.ui.plugin.call(this,g,[i,this.ui()]);
g!="resize"&&this._trigger(g,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});c.extend(c.ui.resizable,{version:"1.8.16"});c.ui.plugin.add("resizable","alsoResize",{start:function(){var g=c(this).data("resizable").options,i=function(l){c(l).each(function(){var n=c(this);n.data("resizable-alsoresize",{width:parseInt(n.width(),
10),height:parseInt(n.height(),10),left:parseInt(n.css("left"),10),top:parseInt(n.css("top"),10),position:n.css("position")})})};if(typeof g.alsoResize=="object"&&!g.alsoResize.parentNode)if(g.alsoResize.length){g.alsoResize=g.alsoResize[0];i(g.alsoResize)}else c.each(g.alsoResize,function(l){i(l)});else i(g.alsoResize)},resize:function(g,i){var l=c(this).data("resizable"),n=l.options,v=l.originalSize,x=l.originalPosition,s={height:l.size.height-v.height||0,width:l.size.width-v.width||0,top:l.position.top-
x.top||0,left:l.position.left-x.left||0},D=function(K,ba){c(K).each(function(){var ka=c(this),ma=c(this).data("resizable-alsoresize"),p={},t=ba&&ba.length?ba:ka.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(t,function(B,E){var Y=(ma[E]||0)+(s[E]||0);if(Y&&Y>=0)p[E]=Y||null});if(c.browser.opera&&/relative/.test(ka.css("position"))){l._revertToRelativePosition=true;ka.css({position:"absolute",top:"auto",left:"auto"})}ka.css(p)})};typeof n.alsoResize==
"object"&&!n.alsoResize.nodeType?c.each(n.alsoResize,function(K,ba){D(K,ba)}):D(n.alsoResize)},stop:function(){var g=c(this).data("resizable"),i=g.options,l=function(n){c(n).each(function(){var v=c(this);v.css({position:v.data("resizable-alsoresize").position})})};if(g._revertToRelativePosition){g._revertToRelativePosition=false;typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?c.each(i.alsoResize,function(n){l(n)}):l(i.alsoResize)}c(this).removeData("resizable-alsoresize")}});c.ui.plugin.add("resizable",
"animate",{stop:function(g){var i=c(this).data("resizable"),l=i.options,n=i._proportionallyResizeElements,v=n.length&&/textarea/i.test(n[0].nodeName),x=v&&c.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height;v={width:i.size.width-(v?0:i.sizeDiff.width),height:i.size.height-x};x=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null;var s=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(c.extend(v,s&&x?{top:s,left:x}:{}),{duration:l.animateDuration,
easing:l.animateEasing,step:function(){var D={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&c(n[0]).css({width:D.width,height:D.height});i._updateCache(D);i._propagate("resize",g)}})}});c.ui.plugin.add("resizable","containment",{start:function(){var g=c(this).data("resizable"),i=g.element,l=g.options.containment;if(i=l instanceof c?l.get(0):/parent/.test(l)?i.parent().get(0):
l){g.containerElement=c(i);if(/document/.test(l)||l==document){g.containerOffset={left:0,top:0};g.containerPosition={left:0,top:0};g.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}}else{var n=c(i),v=[];c(["Top","Right","Left","Bottom"]).each(function(D,K){v[D]=a(n.css("padding"+K))});g.containerOffset=n.offset();g.containerPosition=n.position();g.containerSize={height:n.innerHeight()-v[3],width:n.innerWidth()-
v[1]};l=g.containerOffset;var x=g.containerSize.height,s=g.containerSize.width;s=c.ui.hasScroll(i,"left")?i.scrollWidth:s;x=c.ui.hasScroll(i)?i.scrollHeight:x;g.parentData={element:i,left:l.left,top:l.top,width:s,height:x}}}},resize:function(g){var i=c(this).data("resizable"),l=i.options,n=i.containerOffset,v=i.position;g=i._aspectRatio||g.shiftKey;var x={top:0,left:0},s=i.containerElement;if(s[0]!=document&&/static/.test(s.css("position")))x=n;if(v.left<(i._helper?n.left:0)){i.size.width+=i._helper?
i.position.left-n.left:i.position.left-x.left;if(g)i.size.height=i.size.width/l.aspectRatio;i.position.left=l.helper?n.left:0}if(v.top<(i._helper?n.top:0)){i.size.height+=i._helper?i.position.top-n.top:i.position.top;if(g)i.size.width=i.size.height*l.aspectRatio;i.position.top=i._helper?n.top:0}i.offset.left=i.parentData.left+i.position.left;i.offset.top=i.parentData.top+i.position.top;l=Math.abs((i._helper?i.offset.left-x.left:i.offset.left-x.left)+i.sizeDiff.width);n=Math.abs((i._helper?i.offset.top-
x.top:i.offset.top-n.top)+i.sizeDiff.height);v=i.containerElement.get(0)==i.element.parent().get(0);x=/relative|absolute/.test(i.containerElement.css("position"));if(v&&x)l-=i.parentData.left;if(l+i.size.width>=i.parentData.width){i.size.width=i.parentData.width-l;if(g)i.size.height=i.size.width/i.aspectRatio}if(n+i.size.height>=i.parentData.height){i.size.height=i.parentData.height-n;if(g)i.size.width=i.size.height*i.aspectRatio}},stop:function(){var g=c(this).data("resizable"),i=g.options,l=g.containerOffset,
n=g.containerPosition,v=g.containerElement,x=c(g.helper),s=x.offset(),D=x.outerWidth()-g.sizeDiff.width;x=x.outerHeight()-g.sizeDiff.height;g._helper&&!i.animate&&/relative/.test(v.css("position"))&&c(this).css({left:s.left-n.left-l.left,width:D,height:x});g._helper&&!i.animate&&/static/.test(v.css("position"))&&c(this).css({left:s.left-n.left-l.left,width:D,height:x})}});c.ui.plugin.add("resizable","ghost",{start:function(){var g=c(this).data("resizable"),i=g.options,l=g.size;g.ghost=g.originalElement.clone();
g.ghost.css({opacity:0.25,display:"block",position:"relative",height:l.height,width:l.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:"");g.ghost.appendTo(g.helper)},resize:function(){var g=c(this).data("resizable");g.ghost&&g.ghost.css({position:"relative",height:g.size.height,width:g.size.width})},stop:function(){var g=c(this).data("resizable");g.ghost&&g.helper&&g.helper.get(0).removeChild(g.ghost.get(0))}});c.ui.plugin.add("resizable","grid",
{resize:function(){var g=c(this).data("resizable"),i=g.options,l=g.size,n=g.originalSize,v=g.originalPosition,x=g.axis;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var s=Math.round((l.width-n.width)/(i.grid[0]||1))*(i.grid[0]||1);i=Math.round((l.height-n.height)/(i.grid[1]||1))*(i.grid[1]||1);if(/^(se|s|e)$/.test(x)){g.size.width=n.width+s;g.size.height=n.height+i}else if(/^(ne)$/.test(x)){g.size.width=n.width+s;g.size.height=n.height+i;g.position.top=v.top-i}else{if(/^(sw)$/.test(x)){g.size.width=
n.width+s;g.size.height=n.height+i}else{g.size.width=n.width+s;g.size.height=n.height+i;g.position.top=v.top-i}g.position.left=v.left-s}}});var a=function(g){return parseInt(g,10)||0},e=function(g){return!isNaN(parseInt(g,10))}})(jQuery);
(function(c){c.widget("ui.selectable",c.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var a=this;this.element.addClass("ui-selectable");this.dragged=false;var e;this.refresh=function(){e=c(a.options.filter,a.element[0]);e.each(function(){var g=c(this),i=g.offset();c.data(this,"selectable-item",{element:this,$element:g,left:i.left,top:i.top,right:i.left+g.outerWidth(),bottom:i.top+g.outerHeight(),startselected:false,selected:g.hasClass("ui-selected"),
selecting:g.hasClass("ui-selecting"),unselecting:g.hasClass("ui-unselecting")})})};this.refresh();this.selectees=e.addClass("ui-selectee");this._mouseInit();this.helper=c("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(a){var e=this;this.opos=[a.pageX,
a.pageY];if(!this.options.disabled){var g=this.options;this.selectees=c(g.filter,this.element[0]);this._trigger("start",a);c(g.appendTo).append(this.helper);this.helper.css({left:a.clientX,top:a.clientY,width:0,height:0});g.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var i=c.data(this,"selectable-item");i.startselected=true;if(!a.metaKey){i.$element.removeClass("ui-selected");i.selected=false;i.$element.addClass("ui-unselecting");i.unselecting=true;e._trigger("unselecting",
a,{unselecting:i.element})}});c(a.target).parents().andSelf().each(function(){var i=c.data(this,"selectable-item");if(i){var l=!a.metaKey||!i.$element.hasClass("ui-selected");i.$element.removeClass(l?"ui-unselecting":"ui-selected").addClass(l?"ui-selecting":"ui-unselecting");i.unselecting=!l;i.selecting=l;(i.selected=l)?e._trigger("selecting",a,{selecting:i.element}):e._trigger("unselecting",a,{unselecting:i.element});return false}})}},_mouseDrag:function(a){var e=this;this.dragged=true;if(!this.options.disabled){var g=
this.options,i=this.opos[0],l=this.opos[1],n=a.pageX,v=a.pageY;if(i>n){var x=n;n=i;i=x}if(l>v){x=v;v=l;l=x}this.helper.css({left:i,top:l,width:n-i,height:v-l});this.selectees.each(function(){var s=c.data(this,"selectable-item");if(!(!s||s.element==e.element[0])){var D=false;if(g.tolerance=="touch")D=!(s.left>n||s.right<i||s.top>v||s.bottom<l);else if(g.tolerance=="fit")D=s.left>i&&s.right<n&&s.top>l&&s.bottom<v;if(D){if(s.selected){s.$element.removeClass("ui-selected");s.selected=false}if(s.unselecting){s.$element.removeClass("ui-unselecting");
s.unselecting=false}if(!s.selecting){s.$element.addClass("ui-selecting");s.selecting=true;e._trigger("selecting",a,{selecting:s.element})}}else{if(s.selecting)if(a.metaKey&&s.startselected){s.$element.removeClass("ui-selecting");s.selecting=false;s.$element.addClass("ui-selected");s.selected=true}else{s.$element.removeClass("ui-selecting");s.selecting=false;if(s.startselected){s.$element.addClass("ui-unselecting");s.unselecting=true}e._trigger("unselecting",a,{unselecting:s.element})}if(s.selected)if(!a.metaKey&&
!s.startselected){s.$element.removeClass("ui-selected");s.selected=false;s.$element.addClass("ui-unselecting");s.unselecting=true;e._trigger("unselecting",a,{unselecting:s.element})}}}});return false}},_mouseStop:function(a){var e=this;this.dragged=false;c(".ui-unselecting",this.element[0]).each(function(){var g=c.data(this,"selectable-item");g.$element.removeClass("ui-unselecting");g.unselecting=false;g.startselected=false;e._trigger("unselected",a,{unselected:g.element})});c(".ui-selecting",this.element[0]).each(function(){var g=
c.data(this,"selectable-item");g.$element.removeClass("ui-selecting").addClass("ui-selected");g.selecting=false;g.selected=true;g.startselected=true;e._trigger("selected",a,{selected:g.element})});this._trigger("stop",a);this.helper.remove();return false}});c.extend(c.ui.selectable,{version:"1.8.16"})})(jQuery);
(function(c){c.widget("ui.sortable",c.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?a.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(a,e){if(a===
"disabled"){this.options[a]=e;this.widget()[e?"addClass":"removeClass"]("ui-sortable-disabled")}else c.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,e){if(this.reverting)return false;if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(a);var g=null,i=this;c(a.target).parents().each(function(){if(c.data(this,"sortable-item")==i){g=c(this);return false}});if(c.data(a.target,"sortable-item")==i)g=c(a.target);if(!g)return false;if(this.options.handle&&
!e){var l=false;c(this.options.handle,g).find("*").andSelf().each(function(){if(this==a.target)l=true});if(!l)return false}this.currentItem=g;this._removeCurrentsFromItems();return true},_mouseStart:function(a,e,g){e=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-
this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");c.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();e.containment&&this._setContainment();if(e.cursor){if(c("body").css("cursor"))this._storedCursor=c("body").css("cursor");c("body").css("cursor",e.cursor)}if(e.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",e.opacity)}if(e.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",e.zIndex)}if(this.scrollParent[0]!=
document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!g)for(g=this.containers.length-1;g>=0;g--)this.containers[g]._trigger("activate",a,this._uiHash(this));if(c.ui.ddmanager)c.ui.ddmanager.current=this;c.ui.ddmanager&&!e.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,a);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);
return true},_mouseDrag:function(a){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var e=this.options,g=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<e.scrollSensitivity)this.scrollParent[0].scrollTop=g=this.scrollParent[0].scrollTop+e.scrollSpeed;else if(a.pageY-this.overflowOffset.top<
e.scrollSensitivity)this.scrollParent[0].scrollTop=g=this.scrollParent[0].scrollTop-e.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<e.scrollSensitivity)this.scrollParent[0].scrollLeft=g=this.scrollParent[0].scrollLeft+e.scrollSpeed;else if(a.pageX-this.overflowOffset.left<e.scrollSensitivity)this.scrollParent[0].scrollLeft=g=this.scrollParent[0].scrollLeft-e.scrollSpeed}else{if(a.pageY-c(document).scrollTop()<e.scrollSensitivity)g=c(document).scrollTop(c(document).scrollTop()-
e.scrollSpeed);else if(c(window).height()-(a.pageY-c(document).scrollTop())<e.scrollSensitivity)g=c(document).scrollTop(c(document).scrollTop()+e.scrollSpeed);if(a.pageX-c(document).scrollLeft()<e.scrollSensitivity)g=c(document).scrollLeft(c(document).scrollLeft()-e.scrollSpeed);else if(c(window).width()-(a.pageX-c(document).scrollLeft())<e.scrollSensitivity)g=c(document).scrollLeft(c(document).scrollLeft()+e.scrollSpeed)}g!==false&&c.ui.ddmanager&&!e.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,
a)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(e=this.items.length-1;e>=0;e--){g=this.items[e];var i=g.item[0],l=this._intersectsWithPointer(g);if(l)if(i!=this.currentItem[0]&&this.placeholder[l==1?"next":"prev"]()[0]!=i&&!c.ui.contains(this.placeholder[0],i)&&(this.options.type=="semi-dynamic"?!c.ui.contains(this.element[0],
i):true)){this.direction=l==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(g))this._rearrange(a,g);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);c.ui.ddmanager&&c.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(a,e){if(a){c.ui.ddmanager&&!this.options.dropBehaviour&&c.ui.ddmanager.drop(this,a);if(this.options.revert){var g=this,i=g.placeholder.offset();
g.reverting=true;c(this.helper).animate({left:i.left-this.offset.parent.left-g.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-g.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){g._clear(a)})}else this._clear(a,e);return false}},cancel:function(){if(this.dragging){this._mouseUp({target:null});this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):
this.currentItem.show();for(var a=this.containers.length-1;a>=0;a--){this.containers[a]._trigger("deactivate",null,this._uiHash(this));if(this.containers[a].containerCache.over){this.containers[a]._trigger("out",null,this._uiHash(this));this.containers[a].containerCache.over=0}}}if(this.placeholder){this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();c.extend(this,
{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?c(this.domPosition.prev).after(this.currentItem):c(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(a){var e=this._getItemsAsjQuery(a&&a.connected),g=[];a=a||{};c(e).each(function(){var i=(c(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);if(i)g.push((a.key||i[1]+"[]")+"="+(a.key&&a.expression?i[1]:i[2]))});!g.length&&a.key&&g.push(a.key+"=");return g.join("&")},
toArray:function(a){var e=this._getItemsAsjQuery(a&&a.connected),g=[];a=a||{};e.each(function(){g.push(c(a.item||this).attr(a.attribute||"id")||"")});return g},_intersectsWith:function(a){var e=this.positionAbs.left,g=e+this.helperProportions.width,i=this.positionAbs.top,l=i+this.helperProportions.height,n=a.left,v=n+a.width,x=a.top,s=x+a.height,D=this.offset.click.top,K=this.offset.click.left;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=
"pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?i+D>x&&i+D<s&&e+K>n&&e+K<v:n<e+this.helperProportions.width/2&&g-this.helperProportions.width/2<v&&x<i+this.helperProportions.height/2&&l-this.helperProportions.height/2<s},_intersectsWithPointer:function(a){var e=c.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height);a=c.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);e=e&&a;a=this._getDragVerticalDirection();
var g=this._getDragHorizontalDirection();if(!e)return false;return this.floating?g&&g=="right"||a=="down"?2:1:a&&(a=="down"?2:1)},_intersectsWithSides:function(a){var e=c.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=c.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var g=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?i=="right"&&a||i=="left"&&!a:g&&(g=="down"&&e||g=="up"&&!e)},
_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){var e=[],g=[],i=this._connectWith();
if(i&&a)for(a=i.length-1;a>=0;a--)for(var l=c(i[a]),n=l.length-1;n>=0;n--){var v=c.data(l[n],"sortable");if(v&&v!=this&&!v.options.disabled)g.push([c.isFunction(v.options.items)?v.options.items.call(v.element):c(v.options.items,v.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),v])}g.push([c.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):c(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
this]);for(a=g.length-1;a>=0;a--)g[a][0].each(function(){e.push(this)});return c(e)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data(sortable-item)"),e=0;e<this.items.length;e++)for(var g=0;g<a.length;g++)a[g]==this.items[e].item[0]&&this.items.splice(e,1)},_refreshItems:function(a){this.items=[];this.containers=[this];var e=this.items,g=[[c.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):c(this.options.items,this.element),
this]],i=this._connectWith();if(i)for(var l=i.length-1;l>=0;l--)for(var n=c(i[l]),v=n.length-1;v>=0;v--){var x=c.data(n[v],"sortable");if(x&&x!=this&&!x.options.disabled){g.push([c.isFunction(x.options.items)?x.options.items.call(x.element[0],a,{item:this.currentItem}):c(x.options.items,x.element),x]);this.containers.push(x)}}for(l=g.length-1;l>=0;l--){a=g[l][1];i=g[l][0];v=0;for(n=i.length;v<n;v++){x=c(i[v]);x.data("sortable-item",a);e.push({item:x,instance:a,width:0,height:0,left:0,top:0})}}},refreshPositions:function(a){if(this.offsetParent&&
this.helper)this.offset.parent=this._getParentOffset();for(var e=this.items.length-1;e>=0;e--){var g=this.items[e];if(!(g.instance!=this.currentContainer&&this.currentContainer&&g.item[0]!=this.currentItem[0])){var i=this.options.toleranceElement?c(this.options.toleranceElement,g.item):g.item;if(!a){g.width=i.outerWidth();g.height=i.outerHeight()}i=i.offset();g.left=i.left;g.top=i.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=
this.containers.length-1;e>=0;e--){i=this.containers[e].element.offset();this.containers[e].containerCache.left=i.left;this.containers[e].containerCache.top=i.top;this.containers[e].containerCache.width=this.containers[e].element.outerWidth();this.containers[e].containerCache.height=this.containers[e].element.outerHeight()}return this},_createPlaceholder:function(a){var e=a||this,g=e.options;if(!g.placeholder||g.placeholder.constructor==String){var i=g.placeholder;g.placeholder={element:function(){var l=
c(document.createElement(e.currentItem[0].nodeName)).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!i)l.style.visibility="hidden";return l},update:function(l,n){if(!(i&&!g.forcePlaceholderSize)){n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10));n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||
0,10))}}}}e.placeholder=c(g.placeholder.element.call(e.element,e.currentItem));e.currentItem.after(e.placeholder);g.placeholder.update(e,e.placeholder)},_contactContainers:function(a){for(var e=null,g=null,i=this.containers.length-1;i>=0;i--)if(!c.ui.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(!(e&&c.ui.contains(this.containers[i].element[0],e.element[0]))){e=this.containers[i];g=i}}else if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",
a,this._uiHash(this));this.containers[i].containerCache.over=0}if(e)if(this.containers.length===1){this.containers[g]._trigger("over",a,this._uiHash(this));this.containers[g].containerCache.over=1}else if(this.currentContainer!=this.containers[g]){e=1E4;i=null;for(var l=this.positionAbs[this.containers[g].floating?"left":"top"],n=this.items.length-1;n>=0;n--)if(c.ui.contains(this.containers[g].element[0],this.items[n].item[0])){var v=this.items[n][this.containers[g].floating?"left":"top"];if(Math.abs(v-
l)<e){e=Math.abs(v-l);i=this.items[n]}}if(i||this.options.dropOnEmpty){this.currentContainer=this.containers[g];i?this._rearrange(a,i,null,true):this._rearrange(a,null,this.containers[g].element,true);this._trigger("change",a,this._uiHash());this.containers[g]._trigger("change",a,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[g]._trigger("over",a,this._uiHash(this));this.containers[g].containerCache.over=1}}},_createHelper:function(a){var e=
this.options;a=c.isFunction(e.helper)?c(e.helper.apply(this.element[0],[a,this.currentItem])):e.helper=="clone"?this.currentItem.clone():this.currentItem;a.parents("body").length||c(e.appendTo!="parent"?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);if(a[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(a[0].style.width==
""||e.forceHelperSize)a.width(this.currentItem.width());if(a[0].style.height==""||e.forceHelperSize)a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(c.isArray(a))a={left:+a[0],top:+a[1]||0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=
this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&c.browser.msie)a=
{top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),
10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,c(a.containment=="document"?
document:window).width()-this.helperProportions.width-this.margins.left,(c(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var e=c(a.containment)[0];a=c(a.containment).offset();var g=c(e).css("overflow")!="hidden";this.containment=[a.left+(parseInt(c(e).css("borderLeftWidth"),10)||0)+(parseInt(c(e).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(c(e).css("borderTopWidth"),
10)||0)+(parseInt(c(e).css("paddingTop"),10)||0)-this.margins.top,a.left+(g?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(c(e).css("borderLeftWidth"),10)||0)-(parseInt(c(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(g?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(c(e).css("borderTopWidth"),10)||0)-(parseInt(c(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,e){if(!e)e=
this.position;var g=a=="absolute"?1:-1,i=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*g+this.offset.parent.top*g-(c.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():l?0:i.scrollTop())*g),left:e.left+this.offset.relative.left*g+this.offset.parent.left*g-(c.browser.safari&&
this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:i.scrollLeft())*g)}},_generatePosition:function(a){var e=this.options,g=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=/(html|body)/i.test(g[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();
var l=a.pageX,n=a.pageY;if(this.originalPosition){if(this.containment){if(a.pageX-this.offset.click.left<this.containment[0])l=this.containment[0]+this.offset.click.left;if(a.pageY-this.offset.click.top<this.containment[1])n=this.containment[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>this.containment[2])l=this.containment[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>this.containment[3])n=this.containment[3]+this.offset.click.top}if(e.grid){n=this.originalPageY+Math.round((n-
this.originalPageY)/e.grid[1])*e.grid[1];n=this.containment?!(n-this.offset.click.top<this.containment[1]||n-this.offset.click.top>this.containment[3])?n:!(n-this.offset.click.top<this.containment[1])?n-e.grid[1]:n+e.grid[1]:n;l=this.originalPageX+Math.round((l-this.originalPageX)/e.grid[0])*e.grid[0];l=this.containment?!(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l:!(l-this.offset.click.left<this.containment[0])?l-e.grid[0]:l+e.grid[0]:l}}return{top:n-
this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(c.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:g.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(c.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:g.scrollLeft())}},_rearrange:function(a,e,g,i){g?g[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],
this.direction=="down"?e.item[0]:e.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var l=this,n=this.counter;window.setTimeout(function(){n==l.counter&&l.refreshPositions(!i)},0)},_clear:function(a,e){this.reverting=false;var g=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")this._storedCSS[i]=
"";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!e&&g.push(function(l){this._trigger("receive",l,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!e)g.push(function(l){this._trigger("update",l,this._uiHash())});if(!c.ui.contains(this.element[0],this.currentItem[0])){e||g.push(function(l){this._trigger("remove",
l,this._uiHash())});for(i=this.containers.length-1;i>=0;i--)if(c.ui.contains(this.containers[i].element[0],this.currentItem[0])&&!e){g.push(function(l){return function(n){l._trigger("receive",n,this._uiHash(this))}}.call(this,this.containers[i]));g.push(function(l){return function(n){l._trigger("update",n,this._uiHash(this))}}.call(this,this.containers[i]))}}for(i=this.containers.length-1;i>=0;i--){e||g.push(function(l){return function(n){l._trigger("deactivate",n,this._uiHash(this))}}.call(this,
this.containers[i]));if(this.containers[i].containerCache.over){g.push(function(l){return function(n){l._trigger("out",n,this._uiHash(this))}}.call(this,this.containers[i]));this.containers[i].containerCache.over=0}}this._storedCursor&&c("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!e){this._trigger("beforeStop",
a,this._uiHash());for(i=0;i<g.length;i++)g[i].call(this,a);this._trigger("stop",a,this._uiHash())}return false}e||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!e){for(i=0;i<g.length;i++)g[i].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){c.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},
_uiHash:function(a){var e=a||this;return{helper:e.helper,placeholder:e.placeholder||c([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:a?a.element:null}}});c.extend(c.ui.sortable,{version:"1.8.16"})})(jQuery);
(function(c,a){var e,g=/:([\w\d]+)/g,i=/\?([^#]*)$/,l=function(p){return Array.prototype.slice.call(p)},n=function(p){return Object.prototype.toString.call(p)==="[object Function]"},v=function(p){return Object.prototype.toString.call(p)==="[object Array]"},x=function(p){return decodeURIComponent((p||"").replace(/\+/g," "))},s=encodeURIComponent,D=function(p){return String(p).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},K=function(p){return function(t,
B){return this.route.apply(this,[p,t,B])}},ba={},ka=!!(a.history&&history.pushState),ma=[];e=function(){var p=l(arguments),t,B;e.apps=e.apps||{};if(p.length===0||p[0]&&n(p[0]))return e.apply(e,["body"].concat(p));else if(typeof(B=p.shift())=="string"){t=e.apps[B]||new e.Application;t.element_selector=B;p.length>0&&c.each(p,function(E,Y){t.use(Y)});t.element_selector!=B&&delete e.apps[B];return e.apps[t.element_selector]=t}};e.VERSION="0.7.0";e.addLogger=function(p){ma.push(p)};e.log=function(){var p=
l(arguments);p.unshift("["+Date()+"]");c.each(ma,function(t,B){B.apply(e,p)})};if(typeof a.console!="undefined")n(a.console.log.apply)?e.addLogger(function(){a.console.log.apply(a.console,arguments)}):e.addLogger(function(){a.console.log(arguments)});else typeof console!="undefined"&&e.addLogger(function(){console.log.apply(console,arguments)});c.extend(e,{makeArray:l,isFunction:n,isArray:v});e.Object=function(p){return c.extend(this,p||{})};c.extend(e.Object.prototype,{escapeHTML:D,h:D,toHash:function(){var p=
{};c.each(this,function(t,B){n(B)||(p[t]=B)});return p},toHTML:function(){var p="";c.each(this,function(t,B){n(B)||(p+="<strong>"+t+"</strong> "+B+"<br />")});return p},keys:function(p){var t=[];for(var B in this)if(!n(this[B])||!p)t.push(B);return t},has:function(p){return this[p]&&c.trim(this[p].toString())!==""},join:function(){var p=l(arguments),t=p.shift();return p.join(t)},log:function(){e.log.apply(e,arguments)},toString:function(p){var t=[];c.each(this,function(B,E){if(!n(E)||p)t.push('"'+
B+'": '+E.toString())});return"Sammy.Object: {"+t.join(",")+"}"}});e.DefaultLocationProxy=function(p,t){this.app=p;this.is_native=false;this.has_history=ka;this._startPolling(t)};e.DefaultLocationProxy.fullPath=function(p){var t=p.toString().match(/^[^#]*(#.+)$/);return[p.pathname,p.search,t?t[1]:""].join("")};e.DefaultLocationProxy.prototype={bind:function(){var p=this,t=this.app,B=e.DefaultLocationProxy;c(a).bind("hashchange."+this.app.eventNamespace(),function(E,Y){if(p.is_native===false&&!Y){p.is_native=
true;a.clearInterval(B._interval)}t.trigger("location-changed")});if(ka&&!t.disable_push_state){c(a).bind("popstate."+this.app.eventNamespace(),function(){t.trigger("location-changed")});c("a").live("click.history-"+this.app.eventNamespace(),function(E){var Y=B.fullPath(this);if(this.hostname==a.location.hostname&&t.lookupRoute("get",Y)){E.preventDefault();p.setLocation(Y);return false}})}if(!B._bindings)B._bindings=0;B._bindings++},unbind:function(){c(a).unbind("hashchange."+this.app.eventNamespace());
c(a).unbind("popstate."+this.app.eventNamespace());c("a").die("click.history-"+this.app.eventNamespace());e.DefaultLocationProxy._bindings--;e.DefaultLocationProxy._bindings<=0&&a.clearInterval(e.DefaultLocationProxy._interval)},getLocation:function(){return e.DefaultLocationProxy.fullPath(a.location)},setLocation:function(p){if(/^([^#\/]|$)/.test(p))p=ka?"/"+p:"#!/"+p;if(p!=this.getLocation())if(ka&&/^\//.test(p)){history.pushState({path:p},a.title,p);this.app.trigger("location-changed")}else return a.location=
p},_startPolling:function(p){var t=this;if(!e.DefaultLocationProxy._interval){p||(p=10);var B=function(){var E=t.getLocation();if(typeof e.DefaultLocationProxy._last_location=="undefined"||E!=e.DefaultLocationProxy._last_location)a.setTimeout(function(){c(a).trigger("hashchange",[true])},0);e.DefaultLocationProxy._last_location=E};B();e.DefaultLocationProxy._interval=a.setInterval(B,p)}}};e.Application=function(p){var t=this;this.routes={};this.listeners=new e.Object({});this.arounds=[];this.befores=
[];this.namespace=(new Date).getTime()+"-"+parseInt(Math.random()*1E3,10);this.context_prototype=function(){e.EventContext.apply(this,arguments)};this.context_prototype.prototype=new e.EventContext;n(p)&&p.apply(this,[this]);this._location_proxy||this.setLocationProxy(new e.DefaultLocationProxy(this,this.run_interval_every));this.debug&&this.bindToAllEvents(function(B,E){t.log(t.toString(),B.cleaned_type,E||{})})};e.Application.prototype=c.extend({},e.Object.prototype,{ROUTE_VERBS:["get","post","put",
"delete"],APP_EVENTS:["run","unload","lookup-route","run-route","route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect","location-changed"],_last_route:null,_location_proxy:null,_running:false,element_selector:"body",debug:false,raise_errors:false,run_interval_every:50,disable_push_state:false,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(p){return p?c(this.element_selector).find(p):
c(this.element_selector)},use:function(){var p=l(arguments),t=p.shift(),B=t||"";try{p.unshift(this);if(typeof t=="string"){B="Sammy."+t;t=e[t]}t.apply(this,p)}catch(E){if(typeof t==="undefined")this.error("Plugin Error: called use() but plugin ("+B.toString()+") is not defined",E);else n(t)?this.error("Plugin Error",E):this.error("Plugin Error: called use() but '"+B.toString()+"' is not a function",E)}return this},setLocationProxy:function(p){var t=this._location_proxy;this._location_proxy=p;if(this.isRunning()){t&&
t.unbind();this._location_proxy.bind()}},route:function(p,t,B){var E=this,Y=[],pa,T;if(!B&&n(t)){B=t=p;p="any"}p=p.toLowerCase();if(t.constructor==String){for(g.lastIndex=0;(T=g.exec(t))!==null;)Y.push(T[1]);t=new RegExp(t.replace(g,"([^/]+)")+"$")}if(typeof B=="string")B=E[B];pa=function(ga){var ha={verb:ga,path:t,callback:B,param_names:Y};E.routes[ga]=E.routes[ga]||[];E.routes[ga].push(ha)};p==="any"?c.each(this.ROUTE_VERBS,function(ga,ha){pa(ha)}):pa(p);return this},get:K("get"),post:K("post"),
put:K("put"),del:K("delete"),any:K("any"),mapRoutes:function(p){var t=this;c.each(p,function(B,E){t.route.apply(t,E)});return this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(p,t,B){var E=this;if(typeof B=="undefined")B=t;t=function(Y,pa){var T;if(pa&&pa.context){T=pa.context;delete pa.context}else T=new E.context_prototype(E,"bind",Y.type,pa,Y.target);Y.cleaned_type=Y.type.replace(E.eventNamespace(),"");B.apply(T,[Y,pa])};this.listeners[p]||(this.listeners[p]=
[]);this.listeners[p].push(t);this.isRunning()&&this._listen(p,t);return this},trigger:function(p,t){this.$element().trigger([p,this.eventNamespace()].join("."),[t]);return this},refresh:function(){this.last_location=null;this.trigger("location-changed");return this},before:function(p,t){if(n(p)){t=p;p={}}this.befores.push([p,t]);return this},after:function(p){return this.bind("event-context-after",p)},around:function(p){this.arounds.push(p);return this},isRunning:function(){return this._running},
helpers:function(p){c.extend(this.context_prototype.prototype,p);return this},helper:function(p,t){this.context_prototype.prototype[p]=t;return this},run:function(p){if(this.isRunning())return false;var t=this;c.each(this.listeners.toHash(),function(B,E){c.each(E,function(Y,pa){t._listen(B,pa)})});this.trigger("run",{start_url:p});this._running=true;this.last_location=null;!/\#(.+)/.test(this.getLocation())&&typeof p!="undefined"&&this.setLocation(p);this._checkLocation();this._location_proxy.bind();
this.bind("location-changed",function(){t._checkLocation()});this.bind("submit",function(B){return t._checkFormSubmission(c(B.target).closest("form"))===false?B.preventDefault():false});c(a).bind("beforeunload",function(){t.unload()});return this.trigger("changed")},unload:function(){if(!this.isRunning())return false;var p=this;this.trigger("unload");this._location_proxy.unbind();this.$element().unbind("submit").removeClass(p.eventNamespace());c.each(this.listeners.toHash(),function(t,B){c.each(B,
function(E,Y){p._unlisten(t,Y)})});this._running=false;return this},bindToAllEvents:function(p){var t=this;c.each(this.APP_EVENTS,function(B,E){t.bind(E,p)});c.each(this.listeners.keys(true),function(B,E){c.inArray(E,t.APP_EVENTS)==-1&&t.bind(E,p)});return this},routablePath:function(p){return p.replace(i,"")},lookupRoute:function(p,t){var B=false,E=0,Y,pa;if(typeof this.routes[p]!="undefined")for(Y=this.routes[p].length;E<Y;E++){pa=this.routes[p][E];if(this.routablePath(t).match(pa.path)){B=pa;break}}return B},
runRoute:function(p,t,B,E){var Y=this,pa=this.lookupRoute(p,t),T,ga,ha,xa,Oa,Ra,X;this.log("runRoute",[p,t].join(" "));this.trigger("run-route",{verb:p,path:t,params:B});if(typeof B=="undefined")B={};c.extend(B,this._parseQueryString(t));if(pa){this.trigger("route-found",{route:pa});if((Ra=pa.path.exec(this.routablePath(t)))!==null){Ra.shift();c.each(Ra,function(V,f){if(pa.param_names[V])B[pa.param_names[V]]=x(f);else{if(!B.splat)B.splat=[];B.splat.push(x(f))}})}T=new this.context_prototype(this,
p,t,B,E);E=this.arounds.slice(0);ha=this.befores.slice(0);Oa=[T].concat(B.splat);ga=function(){for(var V;ha.length>0;){xa=ha.shift();if(Y.contextMatchesOptions(T,xa[0])){V=xa[1].apply(T,[T]);if(V===false)return false}}Y.last_route=pa;T.trigger("event-context-before",{context:T});V=pa.callback.apply(T,Oa);T.trigger("event-context-after",{context:T});return V};c.each(E.reverse(),function(V,f){var C=ga;ga=function(){return f.apply(T,[C])}});try{X=ga()}catch(Q){this.error(["500 Error",p,t].join(" "),
Q)}return X}else return this.notFound(p,t)},contextMatchesOptions:function(p,t,B){t=t;if(typeof t==="undefined"||t=={})return true;if(typeof B==="undefined")B=true;if(typeof t==="string"||n(t.test))t={path:t};if(t.only)return this.contextMatchesOptions(p,t.only,true);else if(t.except)return this.contextMatchesOptions(p,t.except,false);var E=true,Y=true;if(t.path){if(!n(t.path.test))t.path=new RegExp(t.path.toString()+"$");E=t.path.test(p.path)}if(t.verb)Y=typeof t.verb==="string"?t.verb===p.verb:
t.verb.indexOf(p.verb)>-1;return B?Y&&E:!(Y&&E)},getLocation:function(){return this._location_proxy.getLocation()},setLocation:function(p){return this._location_proxy.setLocation(p)},swap:function(p){return this.$element().html(p)},templateCache:function(p,t){return typeof t!="undefined"?(ba[p]=t):ba[p]},clearTemplateCache:function(){return ba={}},notFound:function(p,t){var B=this.error(["404 Not Found",p,t].join(" "));return p==="get"?B:true},error:function(p,t){t||(t=new Error);t.message=[p,t.message].join(" ");
this.trigger("error",{message:t.message,error:t});if(this.raise_errors)throw t;else this.log(t.message,t)},_checkLocation:function(){var p,t;p=this.getLocation();if(!this.last_location||this.last_location[0]!="get"||this.last_location[1]!=p){this.last_location=["get",p];t=this.runRoute("get",p)}return t},_getFormVerb:function(p){p=c(p);var t,B;B=p.find('input[name="_method"]');if(B.length>0)t=B.val();t||(t=p[0].getAttribute("method"));if(!t||t=="")t="get";return c.trim(t.toString().toLowerCase())},
_checkFormSubmission:function(p){var t,B,E;this.trigger("check-form-submission",{form:p});t=c(p);B=t.attr("action")||"";E=this._getFormVerb(t);this.log("_checkFormSubmission",t,B,E);if(E==="get"){this.setLocation(B+"?"+this._serializeFormParams(t));p=false}else{t=c.extend({},this._parseFormParams(t));p=this.runRoute(E,B,t,p.get(0))}return typeof p=="undefined"?false:p},_serializeFormParams:function(p){var t="";p=p.serializeArray();var B;if(p.length>0){t=this._encodeFormPair(p[0].name,p[0].value);
for(B=1;B<p.length;B++)t=t+"&"+this._encodeFormPair(p[B].name,p[B].value)}return t},_encodeFormPair:function(p,t){return s(p)+"="+s(t)},_parseFormParams:function(p){var t={};p=p.serializeArray();var B;for(B=0;B<p.length;B++)t=this._parseParamPair(t,p[B].name,p[B].value);return t},_parseQueryString:function(p){var t={},B,E;if(p=p.match(i)){p=p[1].split("&");for(E=0;E<p.length;E++){B=p[E].split("=");t=this._parseParamPair(t,x(B[0]),x(B[1]||""))}}return t},_parseParamPair:function(p,t,B){if(p[t])if(v(p[t]))p[t].push(B);
else p[t]=[p[t],B];else p[t]=B;return p},_listen:function(p,t){return this.$element().bind([p,this.eventNamespace()].join("."),t)},_unlisten:function(p,t){return this.$element().unbind([p,this.eventNamespace()].join("."),t)}});e.RenderContext=function(p){this.event_context=p;this.callbacks=[];this.content=this.previous_content=null;this.waiting=this.next_engine=false};e.RenderContext.prototype=c.extend({},e.Object.prototype,{then:function(p){if(!n(p))if(typeof p==="string"&&p in this.event_context){var t=
this.event_context[p];p=function(E){return t.apply(this.event_context,[E])}}else return this;var B=this;if(this.waiting)this.callbacks.push(p);else{this.wait();a.setTimeout(function(){var E=p.apply(B,[B.content,B.previous_content]);E!==false&&B.next(E)},0)}return this},wait:function(){this.waiting=true},next:function(p){this.waiting=false;if(typeof p!=="undefined"){this.previous_content=this.content;this.content=p}this.callbacks.length>0&&this.then(this.callbacks.shift())},load:function(p,t,B){var E=
this;return this.then(function(){var Y,pa,T;if(n(t)){B=t;t={}}else t=c.extend({},t);B&&this.then(B);if(typeof p==="string"){Y=(T=p.match(/\.json$/)||t.json)&&t.cache===true||t.cache!==false;E.next_engine=E.event_context.engineFor(p);delete t.cache;delete t.json;if(t.engine){E.next_engine=t.engine;delete t.engine}if(Y&&(pa=this.event_context.app.templateCache(p)))return pa;this.wait();c.ajax(c.extend({url:p,data:{},dataType:T?"json":null,type:"get",success:function(ga){Y&&E.event_context.app.templateCache(p,
ga);E.next(ga)}},t));return false}else{if(p.nodeType)return p.innerHTML;if(p.selector){E.next_engine=p.attr("data-engine");return t.clone===false?p.remove()[0].innerHTML.toString():p[0].innerHTML.toString()}}})},loadPartials:function(p){if(p){this.partials=this.partials||{};for(name in p)this.load(p[name]).then(function(t){this.partials[name]=t})}return this},render:function(p,t,B,E){return n(p)&&!t?this.then(p):this.loadPartials(E).load(p).interpolate(t,p).then(B)},partial:function(p,t){return this.render(p,
t).swap()},send:function(){var p=this,t=l(arguments),B=t.shift();if(v(t[0]))t=t[0];return this.then(function(){t.push(function(E){p.next(E)});p.wait();B.apply(B,t);return false})},collect:function(p,t,B){var E=this,Y=function(){if(n(p)){t=p;p=this.content}var pa=[],T=false;c.each(p,function(ga,ha){var xa=t.apply(E,[ga,ha]);if(xa.jquery&&xa.length==1){xa=xa[0];T=true}pa.push(xa);return xa});return T?pa:pa.join("")};return B?Y():this.then(Y)},renderEach:function(p,t,B,E){if(v(t)){E=B;B=t;t=null}return this.load(p).then(function(Y){var pa=
this;B||(B=v(this.previous_content)?this.previous_content:[]);if(E)c.each(B,function(T,ga){var ha={},xa=this.next_engine||p;t?(ha[t]=ga):(ha=ga);E(ga,pa.event_context.interpolate(Y,ha,xa))});else return this.collect(B,function(T,ga){var ha={},xa=this.next_engine||p;t?(ha[t]=ga):(ha=ga);return this.event_context.interpolate(Y,ha,xa)},true)})},interpolate:function(p,t,B){var E=this;return this.then(function(Y,pa){if(!p&&pa)p=pa;if(this.next_engine){t=this.next_engine;this.next_engine=false}var T=E.event_context.interpolate(Y,
p,t,this.partials);return B?pa+T:T})},swap:function(){return this.then(function(p){this.event_context.swap(p)}).trigger("changed",{})},appendTo:function(p){return this.then(function(t){c(p).append(t)}).trigger("changed",{})},prependTo:function(p){return this.then(function(t){c(p).prepend(t)}).trigger("changed",{})},replace:function(p){return this.then(function(t){c(p).html(t)}).trigger("changed",{})},trigger:function(p,t){return this.then(function(B){if(typeof t=="undefined")t={content:B};this.event_context.trigger(p,
t)})}});e.EventContext=function(p,t,B,E,Y){this.app=p;this.verb=t;this.path=B;this.params=new e.Object(E);this.target=Y};e.EventContext.prototype=c.extend({},e.Object.prototype,{$element:function(){return this.app.$element(l(arguments).shift())},engineFor:function(p){var t;if(n(p))return p;p=(p||this.app.template_engine).toString();if(t=p.match(/\.([^\.\?\#]+)$/))p=t[1];if(p&&n(this[p]))return this[p];if(this.app.template_engine)return this.engineFor(this.app.template_engine);return function(B){return B}},
interpolate:function(p,t,B,E){return this.engineFor(B).apply(this,[p,t,E])},render:function(p,t,B,E){return(new e.RenderContext(this)).render(p,t,B,E)},renderEach:function(p,t,B,E){return(new e.RenderContext(this)).renderEach(p,t,B,E)},load:function(p,t,B){return(new e.RenderContext(this)).load(p,t,B)},partial:function(p,t){return(new e.RenderContext(this)).partial(p,t)},send:function(){var p=new e.RenderContext(this);return p.send.apply(p,arguments)},redirect:function(){var p;p=l(arguments);var t=
this.app.getLocation(),B=p.length;if(B>1){for(var E=0,Y=[],pa=[],T={},ga=false;E<B;E++)if(typeof p[E]=="string")Y.push(p[E]);else{c.extend(T,p[E]);ga=true}p=Y.join("/");if(ga){for(var ha in T)pa.push(this.app._encodeFormPair(ha,T[ha]));p+="?"+pa.join("&")}}else p=p[0];this.trigger("redirect",{to:p});this.app.last_location=[this.verb,this.path];this.app.setLocation(p);(new RegExp(p)).test(t)&&this.app.trigger("location-changed")},trigger:function(p,t){if(typeof t=="undefined")t={};if(!t.context)t.context=
this;return this.app.trigger(p,t)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(p){return this.app.swap(p)},notFound:function(){return this.app.notFound(this.verb,this.path)},json:function(p){return c.parseJSON(p)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}});c.sammy=a.Sammy=e})(jQuery,window);
(function(c){Sammy=Sammy||{};Sammy.Title=function(){this.setTitle=function(a){this.title_function=c.isFunction(a)?a:function(e){return[a,e].join(" ")}};this.helper("title",function(){var a=c.makeArray(arguments).join(" ");if(this.app.title_function)a=this.app.title_function(a);document.title=a})}})(jQuery);
(function(c){function a(g){g=unescape(g);return g==="true"?true:g==="false"?false:g}function e(g,i,l){var n;if(i.match(/^[^\[]+$/))g[i]=a(l);else if(n=i.match(/^([^\[]+)\[\](.*)$/)){i=n[1];n=n[2];if(g[i]&&!c.isArray(g[i]))throw"400 Bad Request";if(n){n=n.match(/^\[([^\]]+)\](.*)$/);if(!n)throw"400 Bad Request";if(g[i])g[i][g[i].length-1][n[1]]?g[i].push(e({},n[1]+n[2],l)):c.extend(true,g[i][g[i].length-1],e({},n[1]+n[2],l));else g[i]=[e({},n[1]+n[2],l)]}else if(g[i])g[i].push(a(l));else g[i]=[a(l)]}else if(n=
i.match(/^([^\[]+)\[([^\[]+)\](.*)$/)){i=n[1];n=n[2]+n[3];if(g[i]&&c.isArray(g[i]))throw"400 Bad Request";if(g[i])c.extend(true,g[i],e(g[i],n,l));else g[i]=e({},n,l)}return g}Sammy=Sammy||{};Sammy.NestedParams=function(g){g._parseParamPair=e}})(jQuery);
(function(){if(!window.JSON)window.JSON={};(function(){function c(s){return s<10?"0"+s:s}function a(s){i.lastIndex=0;return i.test(s)?'"'+s.replace(i,function(D){var K=v[D];return typeof K==="string"?K:"\\u"+("0000"+D.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+s+'"'}function e(s,D){var K,ba,ka,ma,p=l,t,B=D[s];if(B&&typeof B==="object"&&typeof B.toJSON==="function")B=B.toJSON(s);if(typeof x==="function")B=x.call(D,s,B);switch(typeof B){case "string":return a(B);case "number":return isFinite(B)?
String(B):"null";case "boolean":case "null":return String(B);case "object":if(!B)return"null";l+=n;t=[];if(Object.prototype.toString.apply(B)==="[object Array]"){ma=B.length;for(K=0;K<ma;K+=1)t[K]=e(K,B)||"null";ka=t.length===0?"[]":l?"[\n"+l+t.join(",\n"+l)+"\n"+p+"]":"["+t.join(",")+"]";l=p;return ka}if(x&&typeof x==="object"){ma=x.length;for(K=0;K<ma;K+=1){ba=x[K];if(typeof ba==="string")if(ka=e(ba,B))t.push(a(ba)+(l?": ":":")+ka)}}else for(ba in B)if(Object.hasOwnProperty.call(B,ba))if(ka=e(ba,
B))t.push(a(ba)+(l?": ":":")+ka);ka=t.length===0?"{}":l?"{\n"+l+t.join(",\n"+l)+"\n"+p+"}":"{"+t.join(",")+"}";l=p;return ka}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z"};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l,n,v={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},x;if(typeof JSON.stringify!=="function")JSON.stringify=function(s,D,K){var ba;n=l="";if(typeof K==="number")for(ba=0;ba<K;ba+=1)n+=" ";else if(typeof K==="string")n=K;if((x=D)&&typeof D!=="function"&&(typeof D!=="object"||typeof D.length!=="number"))throw new Error("JSON.stringify");
return e("",{"":s})};if(typeof JSON.parse!=="function")JSON.parse=function(s,D){function K(ka,ma){var p,t,B=ka[ma];if(B&&typeof B==="object")for(p in B)if(Object.hasOwnProperty.call(B,p)){t=K(B,p);if(t!==undefined)B[p]=t;else delete B[p]}return D.call(ka,ma,B)}var ba;g.lastIndex=0;if(g.test(s))s=s.replace(g,function(ka){return"\\u"+("0000"+ka.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(s.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){ba=eval("("+s+")");return typeof D==="function"?K({"":ba},""):ba}throw new SyntaxError("JSON.parse");}})();Sammy=Sammy||{};Sammy.JSON=function(c){c.helpers({json:function(a){return typeof a=="string"?JSON.parse(a):JSON.stringify(a)}})}})(jQuery);
var Mustache=function(){var c=function(){};c.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":true},context:{},render:function(a,e,g,i){if(!i){this.context=e;this.buffer=[]}if(!this.includes("",a))if(i)return a;else{this.send(a);return}a=this.render_pragmas(a);a=this.render_section(a,e,g);if(i)return this.render_tags(a,e,g,i);this.render_tags(a,e,g,i)},send:function(a){a!==""&&this.buffer.push(a)},render_pragmas:function(a){if(!this.includes("%",a))return a;
var e=this;return a.replace(new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag,"g"),function(g,i,l){if(!e.pragmas_implemented[i])throw{message:"This implementation of mustache doesn't understand the '"+i+"' pragma"};e.pragmas[i]={};if(l){g=l.split("=");e.pragmas[i][g[0]]=g[1]}return""})},render_partial:function(a,e,g){a=this.trim(a);if(!g||g[a]===undefined)throw{message:"unknown_partial '"+a+"'"};if(typeof e[a]!="object")return this.render(g[a],e,g,true);return this.render(g[a],e[a],g,
true)},render_section:function(a,e,g){if(!this.includes("#",a)&&!this.includes("^",a))return a;var i=this;return a.replace(new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg"),function(l,n,v,x){l=i.find(v,e);if(n=="^")return!l||i.is_array(l)&&l.length===0?i.render(x,e,g,true):"";else if(n=="#")return i.is_array(l)?i.map(l,function(s){return i.render(x,i.create_context(s),g,true)}).join(""):i.is_object(l)?i.render(x,i.create_context(l),
g,true):typeof l==="function"?l.call(e,x,function(s){return i.render(s,e,g,true)}):l?i.render(x,e,g,true):""})},render_tags:function(a,e,g,i){var l=this,n=function(){return new RegExp(l.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+l.ctag+"+","g")},v=n(),x=function(D,K,ba){switch(K){case "!":return"";case "=":l.set_delimiters(ba);v=n();return"";case ">":return l.render_partial(ba,e,g);case "{":return l.find(ba,e);default:return l.escape(l.find(ba,e))}};a=a.split("\n");for(var s=0;s<a.length;s++){a[s]=a[s].replace(v,
x,this);i||this.send(a[s])}if(i)return a.join("\n")},set_delimiters:function(a){a=a.split(" ");this.otag=this.escape_regex(a[0]);this.ctag=this.escape_regex(a[1])},escape_regex:function(a){if(!arguments.callee.sRE)arguments.callee.sRE=new RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,e){a=this.trim(a);var g;if(e[a]===false||e[a]===0||e[a])g=e[a];else if(this.context[a]===false||this.context[a]===0||this.context[a])g=
this.context[a];if(typeof g==="function")return g.apply(e);if(g!==undefined)return g;return""},includes:function(a,e){return e.indexOf(this.otag+a)!=-1},escape:function(a){return String(a===null?"":a).replace(/&(?!\w+;)|["'<>\\]/g,function(e){switch(e){case "&":return"&amp;";case "\\":return"\\\\";case '"':return"&quot;";case "'":return"&#39;";case "<":return"&lt;";case ">":return"&gt;";default:return e}})},create_context:function(a){if(this.is_object(a))return a;else{var e=".";if(this.pragmas["IMPLICIT-ITERATOR"])e=
this.pragmas["IMPLICIT-ITERATOR"].iterator;var g={};g[e]=a;return g}},is_object:function(a){return a&&typeof a=="object"},is_array:function(a){return Object.prototype.toString.call(a)==="[object Array]"},trim:function(a){return a.replace(/^\s*|\s*$/g,"")},map:function(a,e){if(typeof a.map=="function")return a.map(e);else{for(var g=[],i=a.length,l=0;l<i;l++)g.push(e(a[l]));return g}}};return{name:"mustache.js",version:"0.3.1-dev",to_html:function(a,e,g,i){var l=new c;if(i)l.send=i;l.render(a,e,g);
if(!i)return l.buffer.join("\n")}}}();(function(c){Sammy=Sammy||{};Sammy.Mustache=function(a,e){e||(e="mustache");a.helper(e,function(g,i,l){i=c.extend({},this,i);l=c.extend({},i.partials,l);return Mustache.to_html(g,i,l)})}})(jQuery);
window.Modernizr=function(c,a,e){function g(){v.input=function(Q){for(var V=0,f=Q.length;V<f;V++)pa[Q[V]]=!!(Q[V]in ba);return pa}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));v.inputtypes=function(Q){for(var V=0,f,C,N,O=Q.length;V<O;V++){ba.setAttribute("type",C=Q[V]);(f=ba.type!=="text")&&(ba.value=ka,ba.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(C)&&ba.style.WebkitAppearance!==e?(x.appendChild(ba),N=a.defaultView,f=N.getComputedStyle&&
N.getComputedStyle(ba,null).WebkitAppearance!=="textfield"&&ba.offsetHeight!==0,x.removeChild(ba)):/^(search|tel)$/.test(C)||(/^(url|email)$/.test(C)?(f=ba.checkValidity&&ba.checkValidity()===false):/^color$/.test(C)?(x.appendChild(ba),f=ba.value!=ka,x.removeChild(ba)):(f=ba.value!=ka)));Y[Q[V]]=!!f}return Y}("search tel url email datetime date month week time datetime-local number range color".split(" "))}function i(Q,V){var f=Q.charAt(0).toUpperCase()+Q.substr(1);f=(Q+" "+t.join(f+" ")+f).split(" ");
return!!l(f,V)}function l(Q,V){for(var f in Q)if(K[Q[f]]!==e&&(!V||V(Q[f],D)))return true}function n(Q,V){return typeof Q===V}var v={},x=a.documentElement,s=a.head||a.getElementsByTagName("head")[0],D=a.createElement("modernizr"),K=D.style,ba=a.createElement("input"),ka=":)",ma=Object.prototype.toString,p=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),t="Webkit Moz O ms Khtml".split(" "),B={svg:"http://www.w3.org/2000/svg"},E={},Y={},pa={},T=[],ga,ha=function(Q){var V=a.createElement("style"),f=a.createElement("div");
V.textContent=Q+"{#modernizr{height:3px}}";s.appendChild(V);f.id="modernizr";x.appendChild(f);Q=f.offsetHeight===3;V.parentNode.removeChild(V);f.parentNode.removeChild(f);return!!Q},xa=function(){var Q={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(V,f){f=f||a.createElement(Q[V]||"div");var C=(V="on"+V)in f;C||(f.setAttribute||(f=a.createElement("div")),f.setAttribute&&f.removeAttribute&&(f.setAttribute(V,""),C=n(f[V],"function"),n(f[V],
e)||(f[V]=e),f.removeAttribute(V)));return C}}(),Oa={}.hasOwnProperty,Ra;n(Oa,e)||n(Oa.call,e)?(Ra=function(Q,V){return V in Q&&n(Q.constructor.prototype[V],e)}):(Ra=function(Q,V){return Oa.call(Q,V)});E.flexbox=function(){var Q=a.createElement("div"),V=a.createElement("div");(function(C,N,O,S){N+=":";C.style.cssText=(N+p.join(O+";"+N)).slice(0,-N.length)+(S||"")})(Q,"display","box","width:42px;padding:0;");V.style.cssText=p.join("box-flex:1;")+"width:10px;";Q.appendChild(V);x.appendChild(Q);var f=
V.offsetWidth===42;Q.removeChild(V);x.removeChild(Q);return f};E.canvas=function(){var Q=a.createElement("canvas");return Q.getContext&&Q.getContext("2d")};E.canvastext=function(){return v.canvas&&n(a.createElement("canvas").getContext("2d").fillText,"function")};E.webgl=function(){return!!c.WebGLRenderingContext};E.touch=function(){return"ontouchstart"in c||ha("@media ("+p.join("touch-enabled),(")+"modernizr)")};E.geolocation=function(){return!!navigator.geolocation};E.postmessage=function(){return!!c.postMessage};
E.websqldatabase=function(){return!!c.openDatabase};E.indexedDB=function(){for(var Q=-1,V=t.length;++Q<V;){var f=t[Q].toLowerCase();if(c[f+"_indexedDB"]||c[f+"IndexedDB"])return true}return false};E.hashchange=function(){return xa("hashchange",c)&&(a.documentMode===e||a.documentMode>7)};E.history=function(){return!!(c.history&&history.pushState)};E.draganddrop=function(){return xa("dragstart")&&xa("drop")};E.websockets=function(){return"WebSocket"in c};E.rgba=function(){K.cssText="background-color:rgba(150,255,150,.5)";
return(""+K.backgroundColor).indexOf("rgba")!==-1};E.hsla=function(){K.cssText="background-color:hsla(120,40%,100%,.5)";return(""+K.backgroundColor).indexOf("rgba")!==-1||(""+K.backgroundColor).indexOf("hsla")!==-1};E.multiplebgs=function(){K.cssText="background:url(//:),url(//:),red url(//:)";return/(url\s*\(.*?){3}/.test(K.background)};E.backgroundsize=function(){return i("backgroundSize")};E.borderimage=function(){return i("borderImage")};E.borderradius=function(){return i("borderRadius","",function(Q){return(""+
Q).indexOf("orderRadius")!==-1})};E.boxshadow=function(){return i("boxShadow")};E.textshadow=function(){return a.createElement("div").style.textShadow===""};E.opacity=function(){var Q=p.join("opacity:.55;")+"";K.cssText=Q;return/^0.55$/.test(K.opacity)};E.cssanimations=function(){return i("animationName")};E.csscolumns=function(){return i("columnCount")};E.cssgradients=function(){var Q=("background-image:"+p.join("gradient(linear,left top,right bottom,from(#9f9),to(white));background-image:")+p.join("linear-gradient(left top,#9f9, white);background-image:")).slice(0,
-17);K.cssText=Q;return(""+K.backgroundImage).indexOf("gradient")!==-1};E.cssreflections=function(){return i("boxReflect")};E.csstransforms=function(){return!!l(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])};E.csstransforms3d=function(){var Q=!!l(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);Q&&"webkitPerspective"in x.style&&(Q=ha("@media ("+p.join("transform-3d),(")+"modernizr)"));return Q};E.csstransitions=function(){return i("transitionProperty")};
E.fontface=function(){var Q,V,f=s||x,C=a.createElement("style");V=a.implementation||{hasFeature:function(){return false}};C.type="text/css";f.insertBefore(C,f.firstChild);Q=C.sheet||C.styleSheet;V=(V.hasFeature("CSS2","")?function(N){if(!Q||!N)return false;var O=false;try{Q.insertRule(N,0);O=/src/i.test(Q.cssRules[0].cssText);Q.deleteRule(Q.cssRules.length-1)}catch(S){}return O}:function(N){if(!Q||!N)return false;Q.cssText=N;return Q.cssText.length!==0&&/src/i.test(Q.cssText)&&Q.cssText.replace(/\r+|\n+/g,
"").indexOf(N.split(" ")[0])===0})('@font-face { font-family: "font"; src: url(data:,); }');f.removeChild(C);return V};E.video=function(){var Q=a.createElement("video"),V=!!Q.canPlayType;if(V){V=new Boolean(V);V.ogg=Q.canPlayType('video/ogg; codecs="theora"');V.h264=Q.canPlayType('video/mp4; codecs="avc1.42E01E"')||Q.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');V.webm=Q.canPlayType('video/webm; codecs="vp8, vorbis"')}return V};E.audio=function(){var Q=a.createElement("audio"),V=!!Q.canPlayType;
V&&(V=new Boolean(V),V.ogg=Q.canPlayType('audio/ogg; codecs="vorbis"'),V.mp3=Q.canPlayType("audio/mpeg;"),V.wav=Q.canPlayType('audio/wav; codecs="1"'),V.m4a=Q.canPlayType("audio/x-m4a;")||Q.canPlayType("audio/aac;"));return V};E.localstorage=function(){try{return!!localStorage.getItem}catch(Q){return false}};E.sessionstorage=function(){try{return!!sessionStorage.getItem}catch(Q){return false}};E.webWorkers=function(){return!!c.Worker};E.applicationcache=function(){return!!c.applicationCache};E.svg=
function(){return!!a.createElementNS&&!!a.createElementNS(B.svg,"svg").createSVGRect};E.inlinesvg=function(){var Q=a.createElement("div");Q.innerHTML="<svg/>";return(Q.firstChild&&Q.firstChild.namespaceURI)==B.svg};E.smil=function(){return!!a.createElementNS&&/SVG/.test(ma.call(a.createElementNS(B.svg,"animate")))};E.svgclippaths=function(){return!!a.createElementNS&&/SVG/.test(ma.call(a.createElementNS(B.svg,"clipPath")))};for(var X in E)Ra(E,X)&&(ga=X.toLowerCase(),v[ga]=E[X](),T.push((v[ga]?"":
"no-")+ga));v.input||g();v.crosswindowmessaging=v.postmessage;v.historymanagement=v.history;v.addTest=function(Q,V){Q=Q.toLowerCase();if(!v[Q]){V=!!V();x.className+=" "+(V?"":"no-")+Q;v[Q]=V;return v}};K.cssText="";D=ba=null;c.attachEvent&&function(){var Q=a.createElement("div");Q.innerHTML="<elem></elem>";return Q.childNodes.length!==1}()&&function(Q,V){function f(ca,ia){for(var sa=-1,ta=ca.length,La,gb=[];++sa<ta;){La=ca[sa];(ia=La.media||ia)!="screen"&&gb.push(f(La.imports,ia),La.cssText)}return gb.join("")}
function C(ca){for(var ia=-1;++ia<O;)ca.createElement(N[ia])}var N="abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video".split("|"),O=N.length,S=new RegExp("(^|\\s)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)","gi"),la=new RegExp("<(/*)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)",
"gi"),ja=new RegExp("(^|[^\\n]*?\\s)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)([^\\n]*)({[\\n\\w\\W]*?})","gi"),wa=V.createDocumentFragment(),Ga=V.documentElement,ua=Ga.firstChild,Na=V.createElement("body"),I=V.createElement("style"),fa;C(V);C(wa);ua.insertBefore(I,ua.firstChild);I.media="print";Q.attachEvent("onbeforeprint",function(){var ca=-1,ia=f(V.styleSheets,"all"),sa=[],ta;for(fa=fa||V.body;(ta=
ja.exec(ia))!=null;)sa.push((ta[1]+ta[2]+ta[3]).replace(S,"$1.iepp_$2")+ta[4]);for(I.styleSheet.cssText=sa.join("\n");++ca<O;){ia=V.getElementsByTagName(N[ca]);sa=ia.length;for(ta=-1;++ta<sa;)ia[ta].className.indexOf("iepp_")<0&&(ia[ta].className+=" iepp_"+N[ca])}wa.appendChild(fa);Ga.appendChild(Na);Na.className=fa.className;Na.innerHTML=fa.innerHTML.replace(la,"<$1font")});Q.attachEvent("onafterprint",function(){Na.innerHTML="";Ga.removeChild(Na);Ga.appendChild(fa);I.styleSheet.cssText=""})}(c,
a);v._enableHTML5=true;v._version="1.7";x.className=x.className.replace(/\bno-js\b/,"")+" js "+T.join(" ");return v}(this,this.document);
var Model=function(c,a){var e=function(g){this.attributes=jQuery.extend({},g);this.changes={};this.errors=new Model.Errors(this);this.uid=[c,Model.UID.generate()].join("-");jQuery.isFunction(this.initialize)&&this.initialize()};Model.Module.extend.call(e,Model.Module);e._name=c;e.collection=[];e.unique_key="id";e.extend(Model.Callbacks).extend(Model.ClassMethods);e.prototype=new Model.Base;e.prototype.constructor=e;jQuery.isFunction(a)&&a.call(e,e,e.prototype);return e};
Model.Callbacks={bind:function(c,a){this.callbacks=this.callbacks||{};this.callbacks[c]=this.callbacks[c]||[];this.callbacks[c].push(a);return this},trigger:function(c,a){this.callbacks=this.callbacks||{};var e=this.callbacks[c];if(e)for(var g=0;g<e.length;g++)e[g].apply(this,a||[]);return this},unbind:function(c,a){this.callbacks=this.callbacks||{};if(a)for(var e=this.callbacks[c]||[],g=0;g<e.length;g++)e[g]===a&&this.callbacks[c].splice(g,1);else delete this.callbacks[c];return this}};
Model.ClassMethods={add:function(c){var a=c.id();if(jQuery.inArray(c,this.collection)===-1&&!(a&&this.find(a))){this.collection.push(c);this.trigger("add",[c])}return this},all:function(){return this.collection.slice()},chain:function(c){return jQuery.extend({},this,{collection:c})},count:function(){return this.all().length},detect:function(c){for(var a=this.all(),e,g=0,i=a.length;g<i;g++){e=a[g];if(c.call(e,e,g))return e}},each:function(c,a){for(var e=this.all(),g=0,i=e.length;g<i;g++)c.call(a||
e[g],e[g],g,e);return this},find:function(c){return this.detect(function(){return this.id()==c})},first:function(){return this.all()[0]},load:function(c){if(this._persistence){var a=this;this._persistence.read(function(e){for(var g=0,i=e.length;g<i;g++)a.add(e[g]);c&&c.call(a,e)})}return this},last:function(){var c=this.all();return c[c.length-1]},map:function(c,a){for(var e=this.all(),g=[],i=0,l=e.length;i<l;i++)g.push(c.call(a||e[i],e[i],i,e));return g},persistence:function(c){if(arguments.length==
0)return this._persistence;else{var a=Array.prototype.slice.call(arguments,1);a.unshift(this);this._persistence=c.apply(c,a);return this}},pluck:function(c){for(var a=this.all(),e=[],g=0,i=a.length;g<i;g++)e.push(a[g].attr(c));return e},remove:function(c){for(var a,e=0,g=this.collection.length;e<g;e++)if(this.collection[e]===c){a=e;break}if(a!=undefined){this.collection.splice(a,1);this.trigger("remove",[c]);return true}else return false},reverse:function(){return this.chain(this.all().reverse())},
select:function(c,a){for(var e=this.all(),g=[],i,l=0,n=e.length;l<n;l++){i=e[l];if(c.call(a||i,i,l,e))g.push(i)}return this.chain(g)},sort:function(c){return this.chain(this.all().sort(c))},sortBy:function(c){var a=jQuery.isFunction(c);return this.sort(function(e,g){var i=a?c.call(e):e.attr(c),l=a?c.call(g):g.attr(c);return i<l?-1:i>l?1:0})},use:function(c){var a=Array.prototype.slice.call(arguments,1);a.unshift(this);c.apply(this,a);return this}};
Model.Errors=function(c){this.errors={};this.model=c};Model.Errors.prototype={add:function(c,a){this.errors[c]||(this.errors[c]=[]);this.errors[c].push(a);return this},all:function(){return this.errors},clear:function(){this.errors={};return this},each:function(c){for(var a in this.errors)for(var e=0;e<this.errors[a].length;e++)c.call(this,a,this.errors[a][e]);return this},on:function(c){return this.errors[c]||[]},size:function(){var c=0;this.each(function(){c++});return c}};
Model.InstanceMethods={asJSON:function(){return this.attr()},attr:function(c,a){if(arguments.length===0)return jQuery.extend({},this.attributes,this.changes);else if(arguments.length===2){if(this.attributes[c]===a)delete this.changes[c];else this.changes[c]=a;return this}else if(typeof c==="object"){for(var e in c)this.attr(e,c[e]);return this}else return c in this.changes?this.changes[c]:this.attributes[c]},callPersistMethod:function(c,a){var e=this,g=function(i){if(i){e.merge(e.changes).reset();
c==="destroy"?e.constructor.remove(e):e.constructor.add(e);e.trigger(c)}var l;if(a)l=a.apply(e,arguments);return l};this.constructor._persistence?this.constructor._persistence[c](this,g):g.call(this,true)},destroy:function(c){this.callPersistMethod("destroy",c);return this},id:function(){return this.attributes[this.constructor.unique_key]},merge:function(c){jQuery.extend(this.attributes,c);return this},newRecord:function(){return this.id()===undefined},reset:function(){this.errors.clear();this.changes=
{};return this},save:function(c){if(this.valid())this.callPersistMethod(this.newRecord()?"create":"update",c);else c&&c(false);return this},valid:function(){this.errors.clear();this.validate();return this.errors.size()===0},validate:function(){return this}};
Model.localStorage=function(c){if(!window.localStorage)return{create:function(i,l){l(true)},destroy:function(i,l){l(true)},read:function(i){i([])},update:function(i,l){l(true)}};var a=[c._name,"collection"].join("-"),e=function(){var i=localStorage[a];return i?JSON.parse(i):[]},g=function(i){localStorage.setItem(i.uid,JSON.stringify(i.asJSON()));i=i.uid;var l=e();if(jQuery.inArray(i,l)===-1){l.push(i);localStorage.setItem(a,JSON.stringify(l))}};return{create:function(i,l){g(i);l(true)},destroy:function(i,
l){localStorage.removeItem(i.uid);var n=i.uid,v=e();n=jQuery.inArray(n,v);if(n>-1){v.splice(n,1);localStorage.setItem(a,JSON.stringify(v))}l(true)},read:function(i){if(!i)return false;for(var l=c.map(function(){return this.uid}),n=e(),v=[],x,s,D=0,K=n.length;D<K;D++){s=n[D];if(jQuery.inArray(s,l)==-1){x=JSON.parse(localStorage[s]);x=new c(x);x.uid=s;v.push(x)}}i(v)},update:function(i,l){g(i);l(true)}}};Model.Log=function(){window.console&&window.console.log.apply(window.console,arguments)};
Model.Module={extend:function(c){jQuery.extend(this,c);return this},include:function(c){jQuery.extend(this.prototype,c);return this}};
Model.REST=function(c,a,e){var g=/:([\w\d]+)/g,i=function(){for(var l=[],n;(n=g.exec(a))!==null;)l.push(n[1]);return l}();return jQuery.extend({path:function(l){var n=a;jQuery.each(i,function(v,x){n=n.replace(":"+x,l.attributes[x])});return n},create:function(l,n){return this.xhr("POST",this.create_path(l),l,n)},create_path:function(l){return this.path(l)},destroy:function(l,n){return this.xhr("DELETE",this.destroy_path(l),l,n)},destroy_path:function(l){return this.update_path(l)},params:function(l){var n;
if(l){var v=l.asJSON();delete v[l.constructor.unique_key];n={};n[l.constructor._name.toLowerCase()]=v}else n=null;if(jQuery.ajaxSettings.data)n=jQuery.extend({},jQuery.ajaxSettings.data,n);return n},read:function(l){return this.xhr("GET",this.read_path(),null,function(n,v,x){x=jQuery.makeArray(x);n=[];v=0;for(var s=x.length;v<s;v++)n.push(new c(x[v]));l(n)})},read_path:function(){return a},update:function(l,n){return this.xhr("PUT",this.update_path(l),l,n)},update_path:function(l){return[this.path(l),
l.id()].join("/")},xhr:function(l,n,v,x){var s=this,D=l=="GET"?undefined:this.params(v);return jQuery.ajax({type:l,url:n+".json",dataType:"json",data:D,dataFilter:function(K){return/\S/.test(K)?K:undefined},complete:function(K,ba){s.xhrComplete(K,ba,v,x)}})},xhrComplete:function(l,n,v,x){var s=Model.REST["handle"+l.status];s&&s.call(this,l,n,v);n=n==="success";s=Model.REST.parseResponseData(l);n&&v&&s&&v.attr(s);x&&x.call(v,n,l,s)}},e)};Model.RestPersistence=Model.REST;
Model.REST.handle422=function(c,a,e){if(c=Model.REST.parseResponseData(c)){e.errors.clear();for(var g in c)for(a=0;a<c[g].length;a++)e.errors.add(g,c[g][a])}};Model.REST.parseResponseData=function(c){try{return/\S/.test(c.responseText)?jQuery.parseJSON(c.responseText):undefined}catch(a){Model.Log(a)}};Model.UID={counter:0,generate:function(){return[(new Date).valueOf(),this.counter++].join("-")},reset:function(){this.counter=0;return this}};Model.VERSION="0.10.1";
Model.Base=function(){function c(){}c.prototype=jQuery.extend({},Model.Callbacks,Model.InstanceMethods);return c}();
Model.SinatraREST=function(c,a,e){var g=/:([\w\d]+)/g,i=function(){for(var l=[],n;(n=g.exec(a))!==null;)l.push(n[1]);return l}();return jQuery.extend({path:function(l){var n=a;jQuery.each(i,function(v,x){n=n.replace(":"+x,l.attributes[x])});return n},create:function(l,n){return this.xhr("POST",this.create_path(l),l,n)},create_path:function(l){return this.path(l)},destroy:function(l,n){return this.xhr("DELETE",this.destroy_path(l),l,n)},destroy_path:function(l){return this.update_path(l)},params:function(l){var n;
if(l){var v=l.asJSON();delete v[l.constructor.unique_key];n={};n[l.constructor._name.toLowerCase()]=v}else n=null;if(jQuery.ajaxSettings.data)n=jQuery.extend({},jQuery.ajaxSettings.data,n);return n},read:function(l){return this.xhr("GET",this.read_path(),null,function(n,v,x){x=jQuery.makeArray(x);n=[];v=0;for(var s=x.length;v<s;v++)n.push(new c(x[v]));l(n)})},read_path:function(){return a},update:function(l,n){return this.xhr("PUT",this.update_path(l),l,n)},update_path:function(l){return[this.path(l),
l.id()].join("/")},xhr:function(l,n,v,x){var s=this,D=l=="GET"?undefined:this.params(v);return jQuery.ajax({type:l,url:n+".json",dataType:"json",data:D,complete:function(K,ba){s.xhrComplete(K,ba,v,x)}})},xhrComplete:function(l,n,v,x){var s=Model.REST["handle"+l.status];s&&s.call(this,l,n,v);n=n==="success";s=Model.REST.parseResponseData(l);n&&v&&s&&v.attr(s);x&&x.call(v,n,l,s)}},e)};
var CodeMirror=function(){function c(f,C){function N(d){Za=null;var j={line:0,ch:0};la(j,{line:W.length-1,ch:W[W.length-1].text.length},X(d),j,j);Za=new n}function O(){if(oa.readOnly!="nocursor"){!Wa&&oa.onFocus&&oa.onFocus($a);Wa=true;sa();if(va.className.search(/\bCodeMirror-focused\b/)==-1)va.className+=" CodeMirror-focused";dc()}}function S(){Wa&&oa.onBlur&&oa.onBlur($a);clearInterval(bc);hb=null;Wa=false;va.className=va.className.replace(" CodeMirror-focused","")}function la(d,j,k,m,o){if(Za){for(var q=
[],u=d.line,w=j.line+1;u<w;++u)q.push(W[u].text);for(Za.addChange(d.line,k.length,q);Za.done.length>oa.undoDepth;)Za.done.shift()}ua(d,j,k,m,o)}function ja(d,j){var k=d.pop();if(k){for(var m=[],o=k.start+k.added,q=k.start;q<o;++q)m.push(W[q].text);j.push({start:k.start,added:k.old.length,old:m});q=k.start+k.old.length-1;m=m[m.length-1];var u=k.old[k.old.length-1];if(u)if(m){for(var w=m.length,A=u.length;w>=0&&A>=0;--w,--A)if(m.charAt(w)!=u.charAt(A))break;m=A+1}else m=u.length;else m=m?m.length:0;
q=Ka({line:q,ch:m});ua({line:k.start,ch:0},{line:o-1,ch:W[o-1].text.length},k.old,q,q)}}function wa(){ja(Za.done,Za.undone)}function Ga(){ja(Za.undone,Za.done)}function ua(d,j,k,m,o){for(var q=false,u=Eb.length,w=d.line;w<j.line;++w)if(W[w].text.length==u){q=true;break}var A=j.line-d.line;w=W[d.line];var F=W[j.line];if(w==F)if(k.length==1)w.replace(d.ch,j.ch,k[0]);else{F=w.split(j.ch,k[k.length-1]);var R=[d.line+1,A];w.replace(d.ch,w.text.length,k[0]);w=1;for(var da=k.length-1;w<da;++w)R.push(new i(k[w]));
R.push(F);W.splice.apply(W,R)}else if(k.length==1){w.replace(d.ch,w.text.length,k[0]+F.text.slice(j.ch));W.splice(d.line+1,A)}else{R=[d.line+1,A-1];w.replace(d.ch,w.text.length,k[0]);F.replace(0,j.ch,k[k.length-1]);w=1;for(da=k.length-1;w<da;++w)R.push(new i(k[w]));W.splice.apply(W,R)}w=d.line;for(da=w+k.length;w<da;++w){F=W[w].text;if(F.length>u){Eb=F;u=F.length;q=false}}if(q){w=u=0;for(da=W.length;w<da;++w){F=W[w].text;if(F.length>u){u=F.length;Eb=F}}}q=[];A=k.length-A-1;w=0;for(F=cb.length;w<F;++w){u=
cb[w];if(u<d.line)q.push(u);else u>j.line&&q.push(u+A)}k.length&&q.push(d.line);cb=q;Kb(100);Ua.push({from:d.line,to:j.line+1,diff:A});pb={from:d,to:j,text:k};xb(m,o,P.from.line<=Math.min(j.line,j.line+A)?P.from.line:P.from.line+A,P.to.line<=Math.min(j.line,j.line+A)?P.to.line:P.to.line+A);Ab.style.height=W.length*ab()+2*Ya.offsetTop+"px"}function Na(d,j,k){function m(q){if(p(q,j))return q;if(!p(k,q))return o;var u=q.line+d.length-(k.line-j.line)-1,w=q.ch;if(q.line==k.line)w+=d[d.length-1].length-
(k.ch-(k.line==j.line?j.ch:0));return{line:u,ch:w}}j=Ka(j);k=k?Ka(k):j;d=X(d);var o;fa(d,j,k,function(q){o=q;return{from:m(P.from),to:m(P.to)}});return o}function I(d,j){fa(X(d),P.from,P.to,function(k){return j=="end"?{from:k,to:k}:j=="start"?{from:P.from,to:P.from}:{from:P.from,to:k}})}function fa(d,j,k,m){m=m({line:j.line+d.length-1,ch:d.length==1?d[0].length+j.ch:d[d.length-1].length});la(j,k,d,m.from,m.to)}function ca(d,j){var k=d.line,m=j.line;if(k==m)return W[k].text.slice(d.ch,j.ch);var o=
[W[k].text.slice(d.ch)];for(k=k+1;k<m;++k)o.push(W[k].text);o.push(W[m].text.slice(0,j.ch));return o.join("\n")}function ia(){return ca(P.from,P.to)}function sa(){Pb||ac.set(2E3,function(){Yb();La();Wa&&sa();Zb()})}function ta(d){function j(){Yb();var m=La();if(m=="moved"&&d)Oa[d]=true;if(!m&&!k){k=true;ac.set(80,j)}else{Pb=false;sa()}Zb()}var k=false;Pb=true;ac.set(20,j)}function La(){function d(Ba,Ca){for(var r=0;;){var y=k.indexOf("\n",r);if(y==-1||(k.charAt(y-1)=="\r"?y-1:y)>=Ba)return{line:Ca,
ch:Ba-r};++Ca;r=y+1}}if(!Xa){var j=false,k=Ea.value,m=Q(Ea);if(!m)return false;j=Pa.text!=k;var o=ub,q=j||m.start!=Pa.start||m.end!=(o?Pa.start:Pa.end);if(!q&&!o)return false;if(j){hb=ub=null;if(oa.readOnly){bb=true;return"changed"}}var u=d(m.start,Pa.from),w=d(m.end,Pa.from);if(o){u=m.start==o.anchor?w:u;w=hb?P.to:m.start==o.anchor?u:w;if(!p(u,w)){ub=null;P.inverted=false;o=u;u=w;w=o}}if(u.line==w.line&&u.line==P.from.line&&u.line==P.to.line&&!hb)bb=false;if(j){o=0;for(var A=k.length,F=Math.min(A,
Pa.text.length),R,da=Pa.from,na=-1;o<F&&(R=k.charAt(o))==Pa.text.charAt(o);){++o;if(R=="\n"){da++;na=o}}F=na>-1?o-na:o;for(var Ia=Pa.to-1,za=Pa.text.length;;){R=Pa.text.charAt(za);R=="\n"&&Ia--;if(k.charAt(A)!=R){++A;++za;break}if(za<=o||A<=o)break;--A;--za}na=Pa.text.lastIndexOf("\n",za-1);la({line:da,ch:F},{line:Ia,ch:na==-1?za:za-na-1},X(k.slice(o,A)),u,w);if(da!=Ia||u.line!=da)bb=true}else xb(u,w);Pa.text=k;Pa.start=m.start;Pa.end=m.end;return j?"changed":q?"moved":false}}function gb(){for(var d=
[],j=Math.max(0,P.from.line-1),k=Math.min(W.length,P.to.line+2),m=j;m<k;++m)d.push(W[m].text);d=Ea.value=d.join(ga);var o=P.from.ch,q=P.to.ch;for(m=j;m<P.from.line;++m)o+=ga.length+W[m].text.length;for(m=j;m<P.to.line;++m)q+=ga.length+W[m].text.length;Pa={text:d,from:j,to:k,start:o,end:q};V(Ea,o,ub?o:q)}function kb(){oa.readOnly!="nocursor"&&Ea.focus()}function Fb(){var d=Wb(P.inverted?P.from:P.to);return Rb(d.x,d.y,d.x,d.yBot)}function Rb(d,j,k,m){var o=Ya.offsetLeft,q=Ya.offsetTop,u=ab();j+=q;m+=
q;d+=o;k+=o;var w=va.clientHeight,A=va.scrollTop;o=false;q=true;if(j<A){va.scrollTop=Math.max(0,j-2*u);o=true}else if(m>A+w){va.scrollTop=m+u-w;o=true}j=va.clientWidth;m=va.scrollLeft;if(d<m){va.scrollLeft=Math.max(0,d-10);o=true}else if(k>j+m){va.scrollLeft=k+10-j;o=true;if(k>Ab.clientWidth)q=false}o&&oa.onScroll&&oa.onScroll($a);return q}function Sb(){var d=ab(),j=va.scrollTop-Ya.offsetTop;return{from:Math.min(W.length,Math.max(0,Math.floor(j/d))),to:Math.min(W.length,Math.ceil((j+va.clientHeight)/
d))}}function lb(d){if(va.clientWidth){for(var j=d===true?[]:[{from:Ha,to:ib,domStart:0}],k=0,m=d.length||0;k<m;++k){for(var o=d[k],q=[],u=o.diff||0,w=0,A=j.length;w<A;++w){var F=j[w];if(o.to<=F.from)q.push({from:F.from+u,to:F.to+u,domStart:F.domStart});else if(F.to<=o.from)q.push(F);else{o.from>F.from&&q.push({from:F.from,to:o.from,domStart:F.domStart});o.to<F.to&&q.push({from:o.to+u,to:F.to+u,domStart:F.domStart+(o.to-F.from)})}}j=q}u=Sb();o=Math.min(Ha,Math.max(u.from-3,0));q=Math.min(W.length,
Math.max(ib,u.to+3));d=[];w=0;A=ib-Ha;var R=o,da=0;k=0;for(m=j.length;k<m;++k){F=j[k];if(!(F.to<=o)){if(F.from>=q)break;if(F.domStart>w||F.from>R){d.push({from:R,to:F.from,domSize:F.domStart-w,domStart:w});da+=F.from-R}R=F.to;w=F.domStart+(F.to-F.from)}}if(w!=A||R!=q){da+=Math.abs(q-R);d.push({from:R,to:q,domSize:A-w,domStart:w})}if(d.length){Qa.style.display="none";if(da>(u.to-u.from)*0.3){F=o=Math.max(u.from-10,0);j=q=Math.min(u.to+7,W.length);k=[];m={line:F,ch:0};m=p(P.from,m)&&!p(P.to,m);for(F=
F;F<j;++F){w=u=null;if(m){u=0;if(P.to.line==F){m=false;w=P.to.ch}}else if(P.from.line==F)if(P.to.line==F){u=P.from.ch;w=P.to.ch}else{m=true;u=P.from.ch}k.push(W[F].getHTML(u,w,true))}Qa.innerHTML=k.join("")}else{j=P.from.line;k=P.to.line;m=0;F=pa&&mb.createElement("div");u=0;for(w=d.length;u<w;++u){A=d[u];R=A.to-A.from-A.domSize;da=Qa.childNodes[A.domStart+A.domSize+m]||null;if(pa)for(var na=Math.max(-R,A.domSize);na>0;--na)Qa.removeChild(da?da.previousSibling:Qa.lastChild);else if(R){for(na=Math.max(0,
R);na>0;--na)Qa.insertBefore(mb.createElement("pre"),da);for(na=Math.max(0,-R);na>0;--na)Qa.removeChild(da?da.previousSibling:Qa.lastChild)}var Ia=Qa.childNodes[A.domStart+m],za=j<A.from&&k>=A.from;for(na=A.from;na<A.to;++na){var Ba=null,Ca=null;if(za){Ba=0;if(k==na){za=false;Ca=P.to.ch}}else if(j==na)if(k==na){Ba=P.from.ch;Ca=P.to.ch}else{za=true;Ba=P.from.ch}if(pa){F.innerHTML=W[na].getHTML(Ba,Ca,true);Qa.insertBefore(F.firstChild,da)}else{Ia.innerHTML=W[na].getHTML(Ba,Ca,false);Ia.className=W[na].className||
"";Ia=Ia.nextSibling}}m+=R}}Qa.style.display="";j=o!=Ha||q!=ib||kc!=va.clientHeight;Ha=o;ib=q;Lb.style.top=o*ab()+"px";if(j){kc=va.clientHeight;Ab.style.height=W.length*ab()+2*Ya.offsetTop+"px";Gb()}o=Jb(Eb);Ya.style.width=o>va.clientWidth?o+"px":"";if(Qa.childNodes.length!=ib-Ha)throw new Error("BAD PATCH! "+JSON.stringify(d)+" size="+(ib-Ha)+" nodes="+Qa.childNodes.length);Hb()}}else Ha=ib=0}function Gb(){if(oa.gutter||oa.lineNumbers){var d=Lb.offsetHeight,j=va.clientHeight;nb.style.height=(d-j<
2?j:d)+"px";d=[];for(j=Ha;j<ib;++j){var k=W[j].gutterMarker,m=oa.lineNumbers?j+oa.firstLineNumber:null;if(k&&k.text)m=k.text.replace("%N%",m!=null?m:"");else if(m==null)m="\u00a0";d.push(k&&k.style?'<pre class="'+k.style+'">':"<pre>",m,"</pre>")}nb.style.display="none";Mb.innerHTML=d.join("");d=String(W.length).length;j=Mb.firstChild;k=j.textContent||j.innerText||j.nodeValue||"";for(m="";k.length+m.length<d;)m+="\u00a0";m&&j.insertBefore(mb.createTextNode(m),j.firstChild);nb.style.display="";Ya.style.marginLeft=
nb.offsetWidth+"px"}}function Hb(){var d=P.inverted?P.from:P.to,j=Ub(d.line,d.ch)+"px";d=(d.line-Ha)*ab()+"px";$b.style.top=d;if(ma(P.from,P.to)){ob.style.top=d;ob.style.left=j;ob.style.display=""}else ob.style.display="none"}function rb(d,j){var k=hb&&Ka(hb);if(k)if(p(k,d))d=k;else if(p(j,k))j=k;xb(d,j)}function xb(d,j,k,m){if(!(ma(P.from,d)&&ma(P.to,j))){if(p(j,d)){var o=j;j=d;d=o}o=ma(P.to,j);var q=ma(P.from,d);if(ma(d,j))P.inverted=false;else if(o&&!q)P.inverted=true;else if(q&&!o)P.inverted=
false;if(k==null){k=P.from.line;m=P.to.line}if(ma(d,j))ma(P.from,P.to)||Ua.push({from:k,to:m+1});else if(ma(P.from,P.to))Ua.push({from:d.line,to:j.line+1});else{ma(d,P.from)||(d.line<k?Ua.push({from:d.line,to:Math.min(j.line,k)+1}):Ua.push({from:k,to:Math.min(m,d.line)+1}));ma(j,P.to)||(j.line<m?Ua.push({from:Math.max(k,d.line),to:m+1}):Ua.push({from:Math.max(d.line,m),to:j.line+1}))}P.from=d;P.to=j;db=true}}function yb(d,j,k){d=Ka({line:d,ch:j||0});(k?rb:xb)(d,d)}function zb(d){return Math.max(0,
Math.min(d,W.length-1))}function Ka(d){if(d.line<0)return{line:0,ch:0};if(d.line>=W.length)return{line:W.length-1,ch:W[W.length-1].text.length};var j=d.ch,k=W[d.line].text.length;return j==null||j>k?{line:d.line,ch:k}:j<0?{line:d.line,ch:0}:d}function lc(d){rb({line:d,ch:0},{line:d,ch:W[d].text.length})}function sb(d,j){if(j=="smart")if(Ta.indent)var k=hc(d);else j="prev";var m=W[d],o=m.indentation(),q=m.text.match(/^\s*/)[0],u;if(j=="prev")u=d?W[d-1].indentation():0;else if(j=="smart")u=Ta.indent(k,
m.text.slice(q.length));else if(j=="add")u=o+oa.indentUnit;else if(j=="subtract")u=o-oa.indentUnit;u=Math.max(0,u);if(u-o){o="";k=0;if(oa.indentWithTabs)for(m=Math.floor(u/ha);m;--m){k+=ha;o+="\t"}for(;k<u;){++k;o+=" "}}else{if(P.from.line!=d&&P.to.line!=d)return;o=q}Na(o,{line:d,ch:0},{line:d,ch:q.length})}function ec(){Ta=c.getMode(oa,oa.mode);for(var d=0,j=W.length;d<j;++d)W[d].stateAfter=null;cb=[0];Kb()}function Tb(d,j,k){function m(w,A,F,R){w=W[w];A=w.addMark(A,F,R);A.line=w;o.push(A)}d=Ka(d);
j=Ka(j);var o=[];if(d.line==j.line)m(d.line,d.ch,j.ch,k);else{m(d.line,d.ch,null,k);for(var q=d.line+1,u=j.line;q<u;++q)m(q,0,null,k);m(j.line,0,j.ch,k)}Ua.push({from:d.line,to:j.line+1});return function(){for(var w,A,F=0;F<o.length;++F){var R=o[F],da=B(W,R.line);R.line.removeMark(R);if(da>-1){if(w==null)w=da;A=da}}w!=null&&Ua.push({from:w,to:A+1})}}function Jb(d){eb.innerHTML="<pre><span>x</span></pre>";eb.firstChild.firstChild.firstChild.nodeValue=d;return eb.firstChild.firstChild.offsetWidth||
10}function Ub(d,j){if(j==0)return 0;eb.innerHTML="<pre><span>"+W[d].getHTML(null,null,false,j)+"</span></pre>";return eb.firstChild.firstChild.offsetWidth}function Vb(d,j){function k(R){eb.innerHTML="<pre><span>"+m.getHTML(null,null,false,R)+"</span></pre>";return eb.firstChild.firstChild.offsetWidth}if(j<=0)return 0;for(var m=W[d],o=0,q=0,u=m.text.length,w,A=Math.min(u,Math.ceil(j/Jb("x")));;){var F=k(A);if(F<=j&&A<u)A=Math.min(u,Math.ceil(A*1.2));else{w=F;u=A;break}}if(j>w)return u;A=Math.floor(u*
0.8);F=k(A);if(F<j){o=A;q=F}for(;;){if(u-o<=1)return w-j>j-q?o:u;A=Math.ceil((o+u)/2);F=k(A);if(F>j){u=A;w=F}else{o=A;q=F}}}function Wb(d,j){var k=ab(),m=d.line-(j?Ha:0);return{x:Ub(d.line,d.ch),y:m*k,yBot:(m+1)*k}}function fc(d){d=Wb(d,true);var j=ka(Ya);return{x:j.left+d.x,y:j.top+d.y,yBot:j.top+d.yBot}}function ab(){var d=Qa.childNodes.length;if(d)return Qa.offsetHeight/d||1;eb.innerHTML="<pre>x</pre>";return eb.firstChild.offsetHeight||1}function tb(d,j){var k=ka(va,true),m=d.e.clientX,o=d.e.clientY;
if(!j&&(m-k.left>va.clientWidth||o-k.top>va.clientHeight))return null;k=ka(Ya,true);o=Ha+Math.floor((o-k.top)/ab());return Ka({line:o,ch:Vb(zb(o),m-k.left)})}function gc(d){function j(){Ea.value!=o&&ya(I)(Ea.value,"end");Ea.style.cssText=m;Xa=false;gb();sa()}var k=tb(d);if(!(!k||window.opera)){if(ma(P.from,P.to)||p(k,P.from)||!p(k,P.to))yb(k.line,k.ch);var m=Ea.style.cssText;Ea.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(d.pageY()-1)+"px; left: "+(d.pageX()-1)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden;";
var o=Ea.value=ia();kb();V(Ea,0,Ea.value.length);Xa=true;if(T){d.stop();var q=D(window,"mouseup",function(){q();setTimeout(j,20)},true)}else setTimeout(j,50)}}function dc(){clearInterval(bc);var d=true;ob.style.visibility="";bc=setInterval(function(){ob.style.visibility=(d=!d)?"":"hidden"},650)}function Va(d){function j(Ca,r,y){if(Ca.text){var H=Ca.styles;Ca=u?0:Ca.text.length-1;for(var J,G=u?0:H.length-2,L=u?H.length:-2;G!=L;G+=2*w){var U=H[G];if(H[G+1]!=null&&H[G+1]!=da)Ca+=w*U.length;else for(var aa=
u?0:U.length-1,ra=u?U.length:-1;aa!=ra;aa+=w,Ca+=w)if(Ca>=r&&Ca<y&&Ia.test(J=U.charAt(aa))){var Ma=b[J];if(Ma.charAt(1)==">"==u)na.push(J);else if(na.pop()!=Ma.charAt(0))return{pos:Ca,match:false};else if(!na.length)return{pos:Ca,match:true}}}}}var k=P.inverted?P.from:P.to,m=W[k.line],o=k.ch-1,q=o>=0&&b[m.text.charAt(o)]||b[m.text.charAt(++o)];if(q){q.charAt(0);var u=q.charAt(1)==">",w=u?1:-1,A=m.styles,F=o+1;q=0;for(var R=A.length;q<R;q+=2)if((F-=A[q].length)<=0){var da=A[q+1];break}var na=[m.text.charAt(o)],
Ia=/[(){}[\]]/;q=k.line;for(R=u?Math.min(q+50,W.length):Math.max(-1,q-50);q!=R;q+=w){m=W[q];A=q==k.line;if(m=j(m,A&&u?o+1:0,A&&!u?o:m.text.length)){da=m.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var za=Tb({line:k.line,ch:o},{line:k.line,ch:o+1},da),Ba=Tb({line:q,ch:m.pos},{line:q,ch:m.pos+1},da);k=ya(function(){za();Ba()});if(d)setTimeout(k,800);else qb=k;break}}}}function Xb(d){for(var j,k,m=d;m>d-40;--m){if(m==0)return 0;var o=W[m-1];if(o.stateAfter)return m;o=o.indentation();
if(k==null||j>o){k=m;j=o}}return k}function hc(d){var j=Xb(d),k=j&&W[j-1].stateAfter;k=k?a(Ta,k):e(Ta);for(j=j;j<d;++j){var m=W[j];m.highlight(Ta,k);m.stateAfter=a(Ta,k)}W[d].stateAfter||cb.push(d);return k}function mc(){for(var d=+new Date+oa.workTime,j=false;cb.length;){var k=W[Ha].stateAfter?cb.pop():Ha;if(!(k>=W.length)){j=true;var m=Xb(k),o=m&&W[m-1].stateAfter;o=o?a(Ta,o):e(Ta);m=m;for(var q=W.length;m<q;++m){var u=W[m],w=u.stateAfter;if(+new Date>d){cb.push(m);Kb(oa.workDelay);Ua.push({from:k,
to:m});return}var A=u.highlight(Ta,o);u.stateAfter=a(Ta,o);if(w&&!A&&u.text)break}Ua.push({from:k,to:m})}}j&&oa.onHighlightComplete&&oa.onHighlightComplete($a)}function Kb(d){cb.length&&cc.set(d,ya(mc))}function Yb(){bb=null;Ua=[];pb=db=false}function Zb(){var d=false;if(db)d=!Fb();if(Ua.length)lb(Ua);else db&&Hb();d&&Fb();db&&dc();if(!Xa&&(bb===true||bb!==false&&db))gb();db&&oa.matchBrackets&&setTimeout(ya(function(){if(qb){qb();qb=null}Va(false)}),20);d=pb;db&&oa.onCursorActivity&&oa.onCursorActivity($a);
d&&oa.onChange&&$a&&oa.onChange($a,d)}function ya(d){return function(){h++||Yb();try{var j=d.apply(this,arguments)}finally{--h||Zb()}return j}}function ic(d,j,k){this.atOccurrence=false;if(k==null)k=typeof d=="string"&&d==d.toLowerCase();j=j&&typeof j=="object"?Ka(j):{line:0,ch:0};this.pos={from:j,to:j};if(typeof d!="string")this.matches=function(q,u){if(q)for(var w=W[u.line].text.slice(0,u.ch),A=w.match(d),F=0;A;){var R=w.indexOf(A[0]);F+=R;w=w.slice(R+1);if(R=w.match(d))A=R;else break;F++}else{w=
W[u.line].text.slice(u.ch);F=(A=w.match(d))&&u.ch+w.indexOf(A[0])}if(A)return{from:{line:u.line,ch:F},to:{line:u.line,ch:F+A[0].length},match:A}};else{if(k)d=d.toLowerCase();var m=k?function(q){return q.toLowerCase()}:function(q){return q},o=d.split("\n");this.matches=o.length==1?function(q,u){var w=m(W[u.line].text),A=d.length,F;if(q?u.ch>=A&&(F=w.lastIndexOf(d,u.ch-A))!=-1:(F=w.indexOf(d,u.ch))!=-1)return{from:{line:u.line,ch:F},to:{line:u.line,ch:F+A}}}:function(q,u){var w=u.line,A=q?o.length-
1:0,F=o[A],R=m(W[w].text),da=q?R.indexOf(F)+F.length:R.lastIndexOf(F);if(!(q?da>=u.ch||da!=F.length:da<=u.ch||da!=R.length-F.length))for(;;){if(q?!w:w==W.length-1)return;R=m(W[w+=q?-1:1].text);F=o[q?--A:++A];if(A>0&&A<o.length-1)if(R!=F)return;else continue;A=q?R.lastIndexOf(F):R.indexOf(F)+F.length;if(q?A!=R.length-F.length:A!=F.length)return;F={line:u.line,ch:da};w={line:w,ch:A};return{from:q?w:F,to:q?F:w}}}}}var oa={},Qb=c.defaults;for(var fb in Qb)if(Qb.hasOwnProperty(fb))oa[fb]=(C&&C.hasOwnProperty(fb)?
C:Qb)[fb];var mb=oa.document,va=mb.createElement("div");va.className="CodeMirror";if(window.ActiveXObject&&/MSIE [1-7]\b/.test(navigator.userAgent))va.style.position="relative";va.innerHTML='<div style="position: relative"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"></div><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div style="overflow: hidden; position: absolute; width: 1px; height: 0; left: 0"><textarea style="position: absolute; width: 100000px;" wrap="off"></textarea></div><div class="CodeMirror-lines"><div style="position: relative"><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div>';
f.appendChild?f.appendChild(va):f(va);var Ab=va.firstChild,eb=Ab.firstChild,Lb=eb.nextSibling,nb=Lb.firstChild,Mb=nb.firstChild,$b=nb.nextSibling,Ea=$b.firstChild,Ya=$b.nextSibling.firstChild,ob=Ya.firstChild,Qa=ob.nextSibling;if(oa.tabindex!=null)Ea.tabindex=oa.tabindex;if(!oa.gutter&&!oa.lineNumbers)nb.style.display="none";var ac=new K,cc=new K,bc,Ta,W=[new i("")],cb,Za=new n,Wa;ec();var P={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false},hb,ub,Db,bb,Ua,pb,db,Xa,Ha=0,ib=0,kc=0,jb=null,Pa,qb,
Eb="";ya(function(){N(oa.value||"");bb=false})();setTimeout(gb,20);D(va,"mousedown",ya(function(d){function j(F){var R=tb(F,true);if(R&&!ma(R,q)){Wa||O();q=R;rb(o,R);bb=false;var da=Sb();if(R.line>=da.to||R.line<da.from)u=setTimeout(ya(function(){j(F)}),150)}}var k=Db;Db=null;for(var m=d.target();m!=va;m=m.parentNode)if(m.parentNode==Mb){oa.onGutterClick&&oa.onGutterClick($a,B(Mb.childNodes,m)+Ha);return d.stop()}T&&d.button()==3&&gc(d);if(d.button()==1){var o=tb(d),q=o,u;if(o){Wa||O();d.stop();if(k&&
+new Date-k<400)return lc(o.line);yb(o.line,o.ch,true);var w=D(mb,"mousemove",ya(function(F){clearTimeout(u);F.stop();j(F)}),true),A=D(mb,"mouseup",ya(function(F){clearTimeout(u);var R=tb(F);R&&rb(o,R);F.stop();kb();bb=true;w();A()}),true)}else d.target()==va&&d.stop()}}));T||D(va,"contextmenu",ya(gc));D(Ab,"dblclick",ya(function(d){var j=tb(d);if(j){for(var k=W[j.line].text,m=j.ch,o=j.ch;m>0&&/\w/.test(k.charAt(m-1));)--m;for(;o<k.length&&/\w/.test(k.charAt(o));)++o;rb({line:j.line,ch:m},{line:j.line,
ch:o});d.stop();Db=+new Date}}));D(va,"scroll",function(){lb([]);oa.onScroll&&oa.onScroll($a)});D(window,"resize",function(){lb(true)});D(Ea,"keyup",ya(function(d){if(!(oa.onKeyEvent&&oa.onKeyEvent($a,x(d.e)))){if(ub){ub=null;bb=true}if(d.e.keyCode==16)hb=null}}));D(Ea,"keydown",ya(function(d){Wa||O();var j=d.e.keyCode,k=(xa?d.e.metaKey:d.e.ctrlKey)&&!d.e.altKey,m=d.e.ctrlKey||d.e.altKey||d.e.metaKey;hb=j==16||d.e.shiftKey?hb||(P.inverted?P.to:P.from):null;if(!(oa.onKeyEvent&&oa.onKeyEvent($a,x(d.e)))){if(j==
33||j==34){j=j==34;k=Math.floor(va.clientHeight/ab());m=P.inverted?P.from:P.to;yb(m.line+Math.max(k-1,1)*(j?1:-1),m.ch,true);return d.stop()}if(k&&(j==36||j==35||xa&&(j==38||j==40))){yb(j==36||j==38?0:W.length-1,true);return d.stop()}if(k&&j==65){j=W.length-1;xb({line:0,ch:0},{line:j,ch:W[j].text.length});return d.stop()}if(!oa.readOnly){if(!m&&j==13)return;if(m=!m){if(m=j==9)a:{m=d.e.shiftKey;hb=null;switch(oa.tabMode){case "default":m=false;break a;case "indent":for(var o=P.from.line,q=P.to.line;o<=
q;++o)sb(o,"smart");break;case "classic":if(ma(P.from,P.to)){m?sb(P.from.line,"smart"):I("\t","end");break}case "shift":o=P.from.line;for(q=P.to.line;o<=q;++o)sb(o,m?"subtract":"add");break}m=true}m=m}if(m)return d.stop();if(k&&j==90){wa();return d.stop()}if(k&&(d.e.shiftKey&&j==90||j==89)){Ga();return d.stop()}}jb=(k?"c":"")+j;if(P.inverted&&Oa.hasOwnProperty(jb))if(d=Q(Ea)){ub={anchor:d.start};V(Ea,d.start,d.start)}ta(jb)}}));D(Ea,"keypress",ya(function(d){if(!(oa.onKeyEvent&&oa.onKeyEvent($a,x(d.e)))){if(oa.electricChars&&
Ta.electricChars){var j=String.fromCharCode(d.e.charCode==null?d.e.keyCode:d.e.charCode);Ta.electricChars.indexOf(j)>-1&&setTimeout(ya(function(){sb(P.to.line,"smart")}),50)}j=d.e.keyCode;if(j==13){if(!oa.readOnly){I("\n","end");if(oa.enterMode!="flat")sb(P.from.line,oa.enterMode=="keep"?"prev":"smart")}d.stop()}else!d.e.ctrlKey&&!d.e.altKey&&!d.e.metaKey&&j==9&&oa.tabMode!="default"?d.stop():ta(jb)}}));D(Ea,"focus",O);D(Ea,"blur",S);D(va,"dragenter",function(d){d.stop()});D(va,"dragover",function(d){d.stop()});
D(va,"drop",ya(function(d){var j=tb(d,true),k=d.e.dataTransfer.files;if(!(!j||oa.readOnly))if(k&&k.length&&window.FileReader&&window.File){var m=k.length,o=Array(m),q=0;for(d=0;d<m;++d)u(k[d],d);var u=function(A,F){var R=new FileReader;R.onload=function(){o[F]=R.result;++q==m&&Na(o.join(""),Ka(j),Ka(j))};R.readAsText(A)}}else try{(o=d.e.dataTransfer.getData("Text"))&&Na(o,j,j)}catch(w){}}));D(va,"paste",function(){kb();ta()});D(Ea,"paste",function(){ta()});D(Ea,"cut",function(){ta()});mb.activeElement==
Ea?O():S();var $a={getValue:function(){for(var d=[],j=0,k=W.length;j<k;++j)d.push(W[j].text);return d.join("\n")},setValue:ya(N),getSelection:ia,replaceSelection:ya(I),focus:function(){kb();O();ta()},setOption:function(d,j){oa[d]=j;if(d=="lineNumbers"||d=="gutter"){var k=oa.gutter||oa.lineNumbers;nb.style.display=k?"":"none";if(k)Gb();else Qa.parentNode.style.marginLeft=0}else if(d=="mode"||d=="indentUnit")ec();else d=="readOnly"&&j=="nocursor"&&Ea.blur()},getOption:function(d){return oa[d]},undo:ya(wa),
redo:ya(Ga),indentLine:ya(function(d){d>=0&&d<W.length&&sb(d,"smart")}),historySize:function(){return{undo:Za.done.length,redo:Za.undone.length}},matchBrackets:ya(function(){Va(true)}),getTokenAt:function(d){d=Ka(d);return W[d.line].getTokenAt(Ta,hc(d.line),d.ch)},cursorCoords:function(d){if(d==null)d=P.inverted;return fc(d?P.from:P.to)},charCoords:function(d){return fc(Ka(d))},coordsChar:function(d){var j=ka(Ya),k=zb(Math.min(W.length-1,Ha+Math.floor((d.y-j.top)/ab())));return Ka({line:k,ch:Vb(zb(k),
d.x-j.left)})},getSearchCursor:function(d,j,k){return new ic(d,j,k)},markText:ya(function(d,j,k){return ya(Tb(d,j,k))}),setMarker:function(d,j,k){if(typeof d=="number")d=W[zb(d)];d.gutterMarker={text:j,style:k};Gb();return d},clearMarker:function(d){if(typeof d=="number")d=W[zb(d)];d.gutterMarker=null;Gb()},setLineClass:ya(function(d,j){if(typeof d=="number"){var k=d;d=W[zb(d)]}else{k=B(W,d);if(k==-1)return null}if(d.className!=j){d.className=j;Ua.push({from:k,to:k+1})}return d}),lineInfo:function(d){if(typeof d==
"number"){var j=d;d=W[d];if(!d)return null}else{j=B(W,d);if(j==-1)return null}var k=d.gutterMarker;return{line:j,text:d.text,markerText:k&&k.text,markerClass:k&&k.style}},addWidget:function(d,j,k){d=Wb(Ka(d),true);j.style.top=Ha*ab()+d.yBot+Ya.offsetTop+"px";j.style.left=d.x+Ya.offsetLeft+"px";Ab.appendChild(j);k&&Rb(d.x,d.yBot,d.x+j.offsetWidth,d.yBot+j.offsetHeight)},lineCount:function(){return W.length},getCursor:function(d){if(d==null)d=P.inverted;return{line:(d?P.from:P.to).line,ch:(d?P.from:
P.to).ch}},somethingSelected:function(){return!ma(P.from,P.to)},setCursor:ya(function(d,j){j==null&&typeof d.line=="number"?yb(d.line,d.ch):yb(d,j)}),setSelection:ya(function(d,j){xb(Ka(d),Ka(j||d))}),getLine:function(d){if(d>=0&&d<W.length)return W[d].text},setLine:ya(function(d,j){d>=0&&d<W.length&&Na(j,{line:d,ch:0},{line:d,ch:W[d].text.length})}),removeLine:ya(function(d){d>=0&&d<W.length&&Na("",{line:d,ch:0},Ka({line:d+1,ch:0}))}),replaceRange:ya(Na),getRange:function(d,j){return ca(Ka(d),Ka(j))},
operation:function(d){return ya(d)()},refresh:function(){lb(true)},getInputField:function(){return Ea},getWrapperElement:function(){return va}},Pb=false,b={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},h=0;ic.prototype={findNext:function(){return this.find(false)},findPrevious:function(){return this.find(true)},find:function(d){function j(o){o={line:o,ch:0};k.pos={from:o,to:o};return k.atOccurrence=false}for(var k=this,m=Ka(d?this.pos.from:this.pos.to);;){if(this.pos=this.matches(d,m)){this.atOccurrence=
true;return this.pos.match||true}if(d){if(!m.line)return j(0);m={line:m.line-1,ch:W[m.line-1].text.length}}else{if(m.line==W.length-1)return j(W.length);m={line:m.line+1,ch:0}}}},from:function(){if(this.atOccurrence)return{line:this.pos.from.line,ch:this.pos.from.ch}},to:function(){if(this.atOccurrence)return{line:this.pos.to.line,ch:this.pos.to.ch}}};return $a}function a(f,C){if(C===true)return C;if(f.copyState)return f.copyState(C);var N={};for(var O in C){var S=C[O];if(S instanceof Array)S=S.concat([]);
N[O]=S}return N}function e(f,C,N){return f.startState?f.startState(C,N):true}function g(f){this.pos=this.start=0;this.string=f}function i(f,C){this.styles=C||[f,null];this.stateAfter=null;this.text=f;this.marked=this.gutterMarker=this.className=null}function l(f,C,N,O){for(var S=0,la=0,ja=0;la<C;S+=2){var wa=N[S],Ga=la+wa.length;if(ja==0){Ga>f&&O.push(wa.slice(f-la,Math.min(wa.length,C-la)),N[S+1]);if(Ga>=f)ja=1}else if(ja==1)Ga>C?O.push(wa.slice(0,C-la),N[S+1]):O.push(wa,N[S+1]);la=Ga}}function n(){this.time=
0;this.done=[];this.undone=[]}function v(){if(this.preventDefault){this.preventDefault();this.stopPropagation()}else{this.returnValue=false;this.cancelBubble=true}}function x(f){if(!f.stop)f.stop=v;return f}function s(f){this.e=f}function D(f,C,N,O){function S(la){N(new s(la||window.event))}if(typeof f.addEventListener=="function"){f.addEventListener(C,S,false);if(O)return function(){f.removeEventListener(C,S,false)}}else{f.attachEvent("on"+C,S);if(O)return function(){f.detachEvent("on"+C,S)}}}function K(){this.id=
null}function ba(f,C){if(C==null){C=f.search(/[^\s\u00a0]/);if(C==-1)C=f.length}for(var N=0,O=0;N<C;++N)if(f.charAt(N)=="\t")O+=ha-O%ha;else++O;return O}function ka(f,C){for(var N=f.ownerDocument.body,O=0,S=0,la=false,ja=f;ja;ja=ja.offsetParent){O+=ja.offsetLeft;S+=ja.offsetTop;if(ja==N)la=true}for(ja=f.parentNode;ja!=(C&&la?null:N);ja=ja.parentNode)if(ja.scrollLeft!=null){O-=ja.scrollLeft;S-=ja.scrollTop}return{left:O,top:S}}function ma(f,C){return f.line==C.line&&f.ch==C.ch}function p(f,C){return f.line<
C.line||f.line==C.line&&f.ch<C.ch}function t(f){return f.replace(/[<>&]/g,function(C){return C=="&"?"&amp;":C=="<"?"&lt;":"&gt;"})}function B(f,C){if(f.indexOf)return f.indexOf(C);for(var N=0,O=f.length;N<O;++N)if(f[N]==C)return N;return-1}c.defaults={value:"",mode:null,indentUnit:2,indentWithTabs:false,tabMode:"classic",enterMode:"indent",electricChars:true,onKeyEvent:null,lineNumbers:false,gutter:false,firstLineNumber:1,readOnly:false,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,
onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,workTime:100,workDelay:200,undoDepth:40,tabindex:null,document:window.document};var E={},Y={};c.defineMode=function(f,C){if(!c.defaults.mode&&f!="null")c.defaults.mode=f;E[f]=C};c.defineMIME=function(f,C){Y[f]=C};c.getMode=function(f,C){if(typeof C=="string"&&Y.hasOwnProperty(C))C=Y[C];if(typeof C=="string")var N=C,O={};else if(C!=null){N=C.name;O=C}var S=E[N];if(!S){window.console&&console.warn("No mode "+N+" found, falling back to plain text.");
return c.getMode(f,"text/plain")}return S(f,O||{})};c.listModes=function(){var f=[];for(var C in E)E.propertyIsEnumerable(C)&&f.push(C);return f};c.listMIMEs=function(){var f=[];for(var C in Y)Y.propertyIsEnumerable(C)&&f.push(C);return f};c.fromTextArea=function(f,C){function N(){f.value=ja.getValue()}C||(C={});C.value=f.value;if(!C.tabindex&&f.tabindex)C.tabindex=f.tabindex;if(f.form){var O=D(f.form,"submit",N,true);if(typeof f.form.submit=="function"){var S=f.form.submit,la=function(){N();f.form.submit=
S;f.form.submit();f.form.submit=la};f.form.submit=la}}f.style.display="none";var ja=c(function(wa){f.parentNode.insertBefore(wa,f.nextSibling)},C);ja.save=N;ja.toTextArea=function(){N();f.parentNode.removeChild(ja.getWrapperElement());f.style.display="";if(f.form){O();if(typeof f.form.submit=="function")f.form.submit=S}};return ja};c.startState=e;c.copyState=a;g.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},
next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(f){var C=this.string.charAt(this.pos);if(typeof f=="string"?C==f:C&&(f.test?f.test(C):f(C))){++this.pos;return C}},eatWhile:function(f){for(var C=this.start;this.eat(f););return this.pos>C},eatSpace:function(){for(var f=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>f},skipToEnd:function(){this.pos=this.string.length},skipTo:function(f){f=this.string.indexOf(f,this.pos);
if(f>-1){this.pos=f;return true}},backUp:function(f){this.pos-=f},column:function(){return ba(this.string,this.start)},indentation:function(){return ba(this.string)},match:function(f,C,N){if(typeof f=="string"){if((N?this.string.toLowerCase():this.string).indexOf(N?f.toLowerCase():f,this.pos)==this.pos){if(C!==false)this.pos+=f.length;return true}}else{if((f=this.string.slice(this.pos).match(f))&&C!==false)this.pos+=f[0].length;return f}},current:function(){return this.string.slice(this.start,this.pos)}};
i.prototype={replace:function(f,C,N){var O=[],S=this.marked;l(0,f,this.styles,O);N&&O.push(N,null);l(C,this.text.length,this.styles,O);this.styles=O;this.text=this.text.slice(0,f)+N+this.text.slice(C);this.stateAfter=null;if(S){f=N.length-(C-f);N=this.text.length;for(O=0;O<S.length;++O){var la=S[O],ja=false;if(la.from>=N)ja=true;else{la.from=la.from<=Math.min(C,C+f)?la.from:la.from+f;if(la.to!=null)la.to=la.to<=Math.min(C,C+f)?la.to:la.to+f}if(ja||la.from>=la.to){S.splice(O,1);O--}}}},split:function(f,
C){var N=[C,null];l(f,this.text.length,this.styles,N);return new i(C+this.text.slice(f),N)},addMark:function(f,C,N){f={from:f,to:C,style:N};if(this.marked==null)this.marked=[];this.marked.push(f);this.marked.sort(function(O,S){return O.from-S.from});return f},removeMark:function(f){var C=this.marked;if(C)for(var N=0;N<C.length;++N)if(C[N]==f){C.splice(N,1);break}},highlight:function(f,C){var N=new g(this.text),O=this.styles,S=0,la=false,ja=O[0],wa;for(this.text==""&&f.blankLine&&f.blankLine(C);!N.eol();){var Ga=
f.token(N,C),ua=this.text.slice(N.start,N.pos);N.start=N.pos;if(S&&O[S-1]==Ga)O[S-2]+=ua;else if(ua){if(!la&&(O[S+1]!=Ga||S&&O[S-2]!=wa))la=true;O[S++]=ua;O[S++]=Ga;wa=ja;ja=O[S]}if(N.pos>5E3){O[S++]=this.text.slice(N.pos);O[S++]=null;break}}if(O.length!=S){O.length=S;la=true}if(S&&O[S-2]!=wa)la=true;return la},getTokenAt:function(f,C,N){for(var O=new g(this.text);O.pos<N&&!O.eol();){O.start=O.pos;var S=f.token(O,C)}return{start:O.start,end:O.pos,string:O.current(),className:S||null,state:C}},indentation:function(){return ba(this.text)},
getHTML:function(f,C,N,O){function S(kb,Fb){if(kb)Fb?la.push('<span class="',Fb,'">',t(kb),"</span>"):la.push(t(kb))}var la=[];if(N)la.push(this.className?'<pre class="'+this.className+'">':"<pre>");var ja=this.styles,wa=this.text,Ga=this.marked;if(f==C)f=null;var ua=wa.length;if(O!=null)ua=Math.min(O,ua);if(!wa&&O==null)S(" ",f!=null&&C==null?"CodeMirror-selected":null);else if(!Ga&&f==null)for(f=O=0;f<ua;O+=2){C=ja[O];var Na=C.length;if(f+Na>ua)C=C.slice(0,ua-f);f+=Na;S(C,ja[O+1])}else{O=wa=0;var I=
"",fa=-1,ca=null,ia=function(){if(Ga){fa+=1;ca=fa<Ga.length?Ga[fa]:null}};for(ia();wa<ua;){var sa=ua,ta="";if(f!=null)if(f>wa)sa=f;else if(C==null||C>wa){ta=" CodeMirror-selected";if(C!=null)sa=Math.min(sa,C)}for(;ca&&ca.to!=null&&ca.to<=wa;)ia();if(ca)if(ca.from>wa)sa=Math.min(sa,ca.from);else{ta+=" "+ca.style;if(ca.to!=null)sa=Math.min(sa,ca.to)}for(;;){var La=wa+I.length,gb=Na;if(ta)gb=Na?Na+ta:ta;S(La>sa?I.slice(0,sa-wa):I,gb);if(La>=sa){I=I.slice(sa-wa);wa=sa;break}wa=La;I=ja[O++];Na=ja[O++]}}f!=
null&&C==null&&S(" ","CodeMirror-selected")}N&&la.push("</pre>");return la.join("")}};n.prototype={addChange:function(f,C,N){this.undone.length=0;var O=+new Date,S=this.done[this.done.length-1];if(O-this.time>400||!S||S.start>f+C||S.start+S.added<f-S.added+S.old.length)this.done.push({start:f,added:C,old:N});else{var la=0;if(f<S.start){for(var ja=S.start-f-1;ja>=0;--ja)S.old.unshift(N[ja]);S.added+=S.start-f;S.start=f}else if(S.start<f){la=f-S.start;C+=la}ja=S.added-la;for(f=N.length;ja<f;++ja)S.old.push(N[ja]);
if(S.added<C)S.added=C}this.time=O}};s.prototype={stop:function(){v.call(this.e)},target:function(){return this.e.target||this.e.srcElement},button:function(){if(this.e.which)return this.e.which;else if(this.e.button&1)return 1;else if(this.e.button&2)return 3;else if(this.e.button&4)return 2},pageX:function(){if(this.e.pageX!=null)return this.e.pageX;var f=this.target().ownerDocument;return this.e.clientX+f.body.scrollLeft+f.documentElement.scrollLeft},pageY:function(){if(this.e.pageY!=null)return this.e.pageY;
var f=this.target().ownerDocument;return this.e.clientY+f.body.scrollTop+f.documentElement.scrollTop}};K.prototype={set:function(f,C){clearTimeout(this.id);this.id=setTimeout(C,f)}};var pa=function(){var f=document.createElement("pre");f.innerHTML=" ";return!f.innerHTML}(),T=/gecko\/\d{7}/i.test(navigator.userAgent),ga="\n";(function(){var f=document.createElement("textarea");f.value="foo\nbar";if(f.value.indexOf("\r")>-1)ga="\r\n"})();for(var ha=8,xa=/Mac/.test(navigator.platform),Oa={},Ra=35;Ra<=
40;++Ra)Oa[Ra]=Oa["c"+Ra]=true;var X="\n\nb".split(/\n/).length!=3?function(f){for(var C=0,N,O=[];(N=f.indexOf("\n",C))>-1;){O.push(f.slice(C,f.charAt(N-1)=="\r"?N-1:N));C=N+1}O.push(f.slice(C));return O}:function(f){return f.split(/\r?\n/)};if(window.getSelection)var Q=function(f){try{return{start:f.selectionStart,end:f.selectionEnd}}catch(C){return null}},V=function(f,C,N){try{f.setSelectionRange(C,N)}catch(O){}};else{Q=function(f){try{var C=f.ownerDocument.selection.createRange()}catch(N){return null}if(!C||
C.parentElement()!=f)return null;var O=f.value,S=O.length,la=f.createTextRange();la.moveToBookmark(C.getBookmark());var ja=f.createTextRange();ja.collapse(false);if(la.compareEndPoints("StartToEnd",ja)>-1)return{start:S,end:S};f=-la.moveStart("character",-S);for(C=O.indexOf("\r");C>-1&&C<f;C=O.indexOf("\r",C+1),f++);if(la.compareEndPoints("EndToEnd",ja)>-1)return{start:f,end:S};S=-la.moveEnd("character",-S);for(C=O.indexOf("\r");C>-1&&C<S;C=O.indexOf("\r",C+1),S++);return{start:f,end:S}};V=function(f,
C,N){var O=f.createTextRange();O.collapse(true);var S=O.duplicate(),la=0;f=f.value;for(var ja=f.indexOf("\n");ja>-1&&ja<C;ja=f.indexOf("\n",ja+1))++la;for(O.move("character",C-la);ja>-1&&ja<N;ja=f.indexOf("\n",ja+1))++la;S.move("character",N-la);O.setEndPoint("EndToEnd",S);O.select()}}c.defineMode("null",function(){return{token:function(f){f.skipToEnd()}}});c.defineMIME("text/plain","null");return c}();
jQuery.cookie=function(c,a,e){if(typeof a!="undefined"){e=e||{};if(a===null){a="";e.expires=-1}var g="";if(e.expires&&(typeof e.expires=="number"||e.expires.toUTCString)){if(typeof e.expires=="number"){g=new Date;g.setTime(g.getTime()+e.expires*24*60*60*1E3)}else g=e.expires;g="; expires="+g.toUTCString()}var i=e.path?"; path="+e.path:"",l=e.domain?"; domain="+e.domain:"";e=e.secure?"; secure":"";document.cookie=[c,"=",encodeURIComponent(a),g,i,l,e].join("")}else{a=null;if(document.cookie&&document.cookie!=
""){e=document.cookie.split(";");for(g=0;g<e.length;g++){i=jQuery.trim(e[g]);if(i.substring(0,c.length+1)==c+"="){a=decodeURIComponent(i.substring(c.length+1));break}}}return a}};
function Sanskrit(c,a){this.options=a||{};this.textarea=c;this.form=c.form;this.container=document.createElement("div");this.iframe=document.createElement("iframe");this.hiddenInput=document.createElement("input");this.hiddenInput.type="hidden";this.callbacks=Sanskrit.inherit(Sanskrit.prototype.callbacks);for(var e in Sanskrit.prototype.callbacks)if(Sanskrit.prototype.callbacks.hasOwnProperty(e)&&typeof this.options[e]==="function")this.callbacks[e]=this.options[e];this.replaceTextarea();var g=this;
this.onReady(function(){g.findContentDocument();if(g.richTextIsAvailable()){g.applyClassNames();g.enableEditor();g.addStyle(Sanskrit.defaultStyle);g.createToolbar();g.hijackForm()}else g.unreplaceTextarea()});Sanskrit.editors.push(this)}Sanskrit.inherit=function(c){function a(){}a.prototype=c;return new a};Sanskrit.getClassName=function(c){return c.getAttribute("class")||c.getAttribute("className")};Sanskrit.setClassName=function(c,a){c.setAttribute("class",a);c.className=a};
Sanskrit.hasClassName=function(c,a){if(!Sanskrit.getClassName(c))return false;for(var e=Sanskrit.getClassName(c).split(" "),g=0;g<e.length;g++)if(e[g]==a)return true;return false};Sanskrit.addClassName=function(c,a){if(Sanskrit.hasClassName(c,a))return false;var e=Sanskrit.getClassName(c)||"";Sanskrit.setClassName(c,e==""?a:e+" "+a);return true};
Sanskrit.removeClassName=function(c,a){for(var e=(Sanskrit.getClassName(c)||"").split(" "),g=[],i=0;i<e.length;i++)e[i]!=a&&g.push(e[i]);g=g.join(" ");Sanskrit.setClassName(c,g);return g};Sanskrit.defaultStyle="html { padding:0; cursor:text; } body { font-size:90%; margin:0; padding:0.5em; cursor:text; } p { margin: 0.5em 0; }";Sanskrit.editors=[];
Sanskrit.prototype={onReady:function(c){setTimeout(c,250)},findContentDocument:function(){if(this.iframe.contentDocument){this.internetExplorer=false;this.contentDocument=this.iframe.contentDocument}else{this.internetExplorer=true;this.contentDocument=this.iframe.contentWindow.document}return this.contentDocument},replaceTextarea:function(){this.container.appendChild(this.iframe);this.hiddenInput.value=this.textarea.value;this.hiddenInput.name=this.textarea.name;this.hiddenInput.id=this.textarea.id;
this.container.insertBefore(this.hiddenInput,this.iframe);this.textarea.parentNode.insertBefore(this.container,this.textarea);this.textarea.parentNode.removeChild(this.textarea)},unreplaceTextarea:function(){this.container.parentNode.insertBefore(this.textarea,this.container);this.container.parentNode.removeChild(this.container)},toggleTextarea:function(){if(this.iframe.parentNode){this.textarea.value=this.textilize(this.getContents());this.iframe.parentNode.insertBefore(this.textarea,this.iframe);
this.iframe.parentNode.removeChild(this.iframe);return true}else{this.textarea.parentNode.insertBefore(this.iframe,this.textarea);this.textarea.parentNode.removeChild(this.textarea);var c=this;this.onReady(function(){c.findContentDocument();c.hiddenInput.value=c.textarea.value;c.enableEditor();c.toolbar.observeEditor()});return false}},enableEditor:function(){this.contentDocument.designMode="on";try{this.execCommand("styleWithCSS",false)}catch(c){}this.setContents(this.htmlize(this.hiddenInput.value))},
focusEditor:function(){this.iframe.contentWindow.focus()},createToolbar:function(){this.toolbar=new SanskritToolbar(this,this.options.toolbar||{})},insertToolbar:function(c){this.container.insertBefore(c,this.iframe)},getContents:function(){return this.contentDocument.getElementsByTagName("body")[0].innerHTML},setContents:function(c){var a=this;setTimeout(function(){a.contentDocument.getElementsByTagName("body")[0].innerHTML=c},250)},getSelection:function(){return this.iframe.contentWindow.document.selection?
this.iframe.contentWindow.document.selection:this.iframe.contentWindow.getSelection()},getCurrentAncestors:function(){var c=this.getSelection();if(c.createRange){c=c.createRange();c=c.parentElement()}else{c=c.getRangeAt(0);c=c.commonAncestorContainer}for(var a=[];c.nodeType!==1||c.nodeName.toLowerCase()!=="body";){c.nodeType===1&&a.push(c);c=c.parentNode}return a},includeAncestor:function(c,a){a=a||this.getCurrentAncestors();for(var e=false,g=0;g<a.length;g++)if(a[g].nodeName.toLowerCase()==c.toLowerCase())e=
true;return e},applyClassNames:function(){Sanskrit.addClassName(this.container,this.options.className||"sanskrit")},hijackForm:function(){var c=this,a=this.form.onsubmit||function(){};this.form.onsubmit=function(){a();c.hiddenInput.value=c.textilize(c.iframe.parentNode?c.getContents():c.textarea.value);return c.callbacks.onSubmit.call(c)}},addStyle:function(c){var a=this;setTimeout(function(){if(document.createStyleSheet){var e=a.contentDocument.createStyleSheet(),g=c.split("}"),i,l;for(i=0;i<g.length-
1;i++){l=g[i].split("{");e.addRule(l[0],l[1])}}else{e=document.createElement("style");e.appendChild(document.createTextNode(c));a.contentDocument.getElementsByTagName("head")[0].appendChild(e)}},250)},textilize:function(c,a){c=c.replace(/\s*<p>((.|[\r\n])*?)<\/p>\s*/gi,"\n\n$1\n\n");c=c.replace(/<br ?\/?>/gi,"\n");c=c.replace(/<(?:b|strong)>((.|[\r\n])*?)<\/(?:b|strong)>/gi,"*$1*");c=c.replace(/<(?:i|em)>((.|[\r\n])*?)<\/(?:i|em)>/gi,"_$1_");c=c.replace(/<(?:strike|del)>((.|[\r\n])*?)<\/(?:strike|del)>/gi,
"-$1-");c=c.replace(/<(?:u|ins)>((.|[\r\n])*?)<\/(?:u|ins)>/gi,"+$1+");c=c.replace(/<a href="(.*?)">((.|[\r\n])*?)<\/a>/gi,'"$2":$1');c=c.replace(/<code.*?>((.|[\r\n])*?)<\/code>/gi,"@$1@");if(a)c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");c=c.replace(/(\r\n|\n){3,}/g,"\n\n");return c=c.replace(/^[\r\n]+|[\r\n]+$/g,"")},htmlize:function(c,a){for(var e=c.split("\n\n"),g=0;g<e.length;g++){e[g]=e[g].replace(/(^|\r\n|\n|\r)\* (.*)/g,"$1###LI### $2");e[g]=e[g].replace(/\n/gi,"<br/>");
e[g]=e[g].replace(/@((.|[\r\n])*?)@/gi,"<code>$1</code>");e[g]=e[g].replace(/\*(.+?)\*/gi,this.internetExplorer?"<strong>$1</strong>":"<b>$1</b>");e[g]=e[g].replace(/_(.+?)_/gi,this.internetExplorer?"<em>$1</em>":"<i>$1</i>");e[g]=e[g].replace(/\+(.+?)\+/gi,"<u>$1</u>");e[g]=e[g].replace(/-(.+?)-/gi,"<strike>$1</strike>");e[g]=e[g].replace(/"(.+?)":([^\s\n<]+)/gi,'<a href="$2">$1</a>');e[g]=e[g].replace(/###LI###/gi,"*");e[g]="<p>"+e[g]+"</p>"}c=e.join("\n");c=c.replace(/<p>[\s\n]*<\/p>/g,"");if(a)c=
c.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");return c},execCommand:function(c,a){if(typeof a=="undefined")a=null;this.contentDocument.execCommand(c,false,a)},richTextIsAvailable:function(){return typeof this.contentDocument.execCommand!="undefined"},callbacks:{onSubmit:function(){return true}}};
function SanskritToolbar(c,a){this.options=a||{};this.editor=c;this.list=document.createElement("ul");this.listItems=[];this.listItemCallbacks={};this.availableActions={strong:"strong",em:"em",ins:"ins",del:"del",link:"link",unlink:"unlink",textile:"textile"};this.callbacks=Sanskrit.inherit(SanskritToolbar.prototype.callbacks);for(var e in this.actions){var g="on"+e.slice(0,1).toUpperCase()+e.slice(1);if(typeof this.options[g]==="function")this.callbacks[g]=this.options[g]}this.addListItems();this.applyClassNames();
this.injectListIntoEditor();this.observeEditor()}
SanskritToolbar.prototype={actions:{strong:function(c){c.execCommand("Bold")},em:function(c){c.execCommand("Italic")},link:function(c){var a=prompt("Enter link address:");if(typeof a==="string"){a.match(/^[a-zA-Z]+:\/\//)||(a="http://"+a);c.execCommand("createLink",a)}else return false},unlink:function(c){c.execCommand("unlink");c.toolbar.deactivateListItem("link");c.toolbar.activateListItem("unlink")},del:function(c){c.execCommand("strikeThrough")},ins:function(c){c.execCommand("underline")},textile:function(c){c.toolbar.resetListStatus();
var a=c.toolbar;(c=c.toggleTextarea())?a.activateListItem("textile"):a.deactivateListItem("textile");for(var e in a.actions)if(a.actions.hasOwnProperty(e)&&e!=="textile")c?a.hideListItem(e):a.showListItem(e);return false}},callbacks:{},createAction:function(c,a){var e=this,g=c.onclick||function(){};return function(){g();if(e.actions[a](e.editor)!==false){var i="on"+a.slice(0,1).toUpperCase()+a.slice(1);typeof e.callbacks[i]==="function"&&e.callbacks[i].call(e.editor);e.updateListStatus(e.editor.getCurrentAncestors());
e.editor.focusEditor()}return false}},addListItems:function(){var c=this.options.actions||this.availableActions;for(var a in c)if(c.hasOwnProperty(a)){var e=document.createElement("li"),g=document.createElement("a");g.setAttribute("href","#");Sanskrit.addClassName(e,a);g.appendChild(typeof c[a]=="string"?document.createTextNode(c[a]):c[a]);g.onclick=this.createAction(g,a);e.appendChild(g);this.listItems.push(e);this.list.appendChild(e)}},applyClassNames:function(){Sanskrit.addClassName(this.list,
"toolbar")},injectListIntoEditor:function(){this.editor.insertToolbar(this.list)},observeEditor:function(){var c=this;setTimeout(function(){if(c.editor.contentDocument.addEventListener){c.editor.contentDocument.addEventListener("mouseup",function(){c.updateListStatus(c.editor.getCurrentAncestors())},false);c.editor.contentDocument.addEventListener("keyup",function(){c.updateListStatus(c.editor.getCurrentAncestors())},false);c.editor.contentDocument.addEventListener("keydown",function(){c.updateListStatus(c.editor.getCurrentAncestors())},
false);c.editor.contentDocument.addEventListener("blur",function(){c.resetListStatus()},false)}else{c.editor.contentDocument.attachEvent("onmouseup",function(){c.updateListStatus(c.editor.getCurrentAncestors())});c.editor.contentDocument.attachEvent("onkeyup",function(){c.updateListStatus(c.editor.getCurrentAncestors())});c.editor.contentDocument.attachEvent("onkeydown",function(){c.updateListStatus(c.editor.getCurrentAncestors())},false);c.editor.contentDocument.attachEvent("onblur",function(){c.resetListStatus()},
false)}},100)},getListItem:function(c){if(typeof c!="string")return c;for(var a=0;a<this.listItems.length;a++)if(Sanskrit.hasClassName(this.listItems[a],c))return this.listItems[a];return document.createElement("li")},activateListItem:function(c){Sanskrit.addClassName(this.getListItem(c),"active")},deactivateListItem:function(c){Sanskrit.removeClassName(this.getListItem(c),"active")},toggleListItem:function(c){c=this.getListItem(c);Sanskrit.hasClassName(c,"active")?Sanskrit.removeClassName(c,"active"):
Sanskrit.addClassName(c,"active")},hideListItem:function(c){c=this.getListItem(c);c.previousDisplayValue=c.style.display;c.style.display="none"},showListItem:function(c){c=this.getListItem(c);c.style.display=c.previousDisplayValue||""},resetListStatus:function(){for(var c=0;c<this.listItems.length;c++)this.deactivateListItem(this.listItems[c])},updateListStatus:function(c){this.resetListStatus();for(var a=0;a<c.length;a++)switch(c[a].nodeName.toLowerCase()){case "b":this.activateListItem("strong");
break;case "strong":this.activateListItem("strong");break;case "i":this.activateListItem("em");break;case "em":this.activateListItem("em");break;case "u":this.activateListItem("ins");break;case "strike":this.activateListItem("del");break;case "a":this.activateListItem("link");break}}};Sanskrit.onLoadFunction=function(){for(var c=[],a=document.getElementsByTagName("textarea"),e=0;e<a.length;e++)c.push(a[e]);for(e=0;e<c.length;e++)Sanskrit.hasClassName(c[e],"sanskrit")&&new Sanskrit(c[e])};
if(typeof Event!="undefined"&&Event.onReady)Event.onReady(Sanskrit.onLoadFunction);else if(typeof Event!="undefined"&&Event.observe)Event.observe(window,"load",Sanskrit.onLoadFunction);else if(window.addEventListener)window.addEventListener("load",Sanskrit.onLoadFunction,false);else if(window.attachEvent)window.attachEvent("onload",Sanskrit.onLoadFunction,false);else{var old=window.onload;window.onload=function(){old();Sanskrit.onLoadFunction()}}
CodeMirror.defineMode("javascript",function(c,a){function e(I,fa){for(var ca=false,ia;(ia=I.next())!=null;){if(ia==fa&&!ca)return false;ca=!ca&&ia=="\\"}return ca}function g(I,fa,ca){ja=I;wa=ca;return fa}function i(I,fa){var ca=I.next();if(ca=='"'||ca=="'"){ca=l(ca);fa.tokenize=ca;return ca(I,fa)}else if(/[\[\]{}\(\),;\:\.]/.test(ca))return g(ca);else if(ca=="0"&&I.eat(/x/i)){I.eatWhile(/[\da-f]/i);return g("number","js-atom")}else if(/\d/.test(ca)){I.match(/^\d*(?:\.\d*)?(?:e[+\-]?\d+)?/);return g("number",
"js-atom")}else if(ca=="/")if(I.eat("*")){ca=n;fa.tokenize=ca;return ca(I,fa)}else if(I.eat("/")){I.skipToEnd();return g("comment","js-comment")}else if(fa.reAllowed){e(I,"/");I.eatWhile(/[gimy]/);return g("regexp","js-string")}else{I.eatWhile(la);return g("operator",null,I.current())}else if(la.test(ca)){I.eatWhile(la);return g("operator",null,I.current())}else{I.eatWhile(/[\w\$_]/);ca=I.current();var ia=S.propertyIsEnumerable(ca)&&S[ca];return ia?g(ia.type,ia.style,ca):g("variable","js-variable",
ca)}}function l(I){return function(fa,ca){if(!e(fa,I))ca.tokenize=i;return g("string","js-string")}}function n(I,fa){for(var ca=false,ia;ia=I.next();){if(ia=="/"&&ca){fa.tokenize=i;break}ca=ia=="*"}return g("comment","js-comment")}function v(I,fa,ca,ia,sa,ta){this.indented=I;this.column=fa;this.type=ca;this.prev=sa;this.info=ta;if(ia!=null)this.align=ia}function x(){for(var I=arguments.length-1;I>=0;I--)ua.cc.push(arguments[I])}function s(){x.apply(null,arguments);return true}function D(I){var fa=
ua.state;if(fa.context){ua.marked="js-variabledef";for(var ca=fa.localVars;ca;ca=ca.next)if(ca.name==I)return;fa.localVars={name:I,next:fa.localVars}}}function K(){if(!ua.state.context)ua.state.localVars=Na;ua.state.context={prev:ua.state.context,vars:ua.state.localVars}}function ba(){ua.state.localVars=ua.state.context.vars;ua.state.context=ua.state.context.prev}function ka(I,fa){var ca=function(){var ia=ua.state;ia.lexical=new v(ia.indented,ua.stream.column(),I,null,ia.lexical,fa)};ca.lex=true;
return ca}function ma(){var I=ua.state;if(I.lexical.prev){if(I.lexical.type==")")I.indented=I.lexical.indented;I.lexical=I.lexical.prev}}function p(I){return function(fa){return fa==I?s():I==";"?x():s(arguments.callee)}}function t(I){if(I=="var")return s(ka("vardef"),xa,p(";"),ma);if(I=="keyword a")return s(ka("form"),B,t,ma);if(I=="keyword b")return s(ka("form"),t,ma);if(I=="{")return s(ka("}"),ha,ma);if(I==";")return s();if(I=="function")return s(f);if(I=="for")return s(ka("form"),p("("),ka(")"),
Ra,p(")"),ma,t,ma);if(I=="variable")return s(ka("stat"),Y);if(I=="switch")return s(ka("form"),B,ka("}","switch"),p("{"),ha,ma,ma);if(I=="case")return s(B,p(":"));if(I=="default")return s(p(":"));if(I=="catch")return s(ka("form"),K,p("("),C,p(")"),t,ma,ba);return x(ka("stat"),B,p(";"),ma)}function B(I){if(Ga.hasOwnProperty(I))return s(E);if(I=="function")return s(f);if(I=="keyword c")return s(B);if(I=="(")return s(ka(")"),B,p(")"),ma,E);if(I=="operator")return s(B);if(I=="[")return s(ka("]"),ga(B,
"]"),ma,E);if(I=="{")return s(ka("}"),ga(T,"}"),ma,E);return s()}function E(I,fa){if(I=="operator"&&/\+\+|--/.test(fa))return s(E);if(I=="operator")return s(B);if(I!=";"){if(I=="(")return s(ka(")"),ga(B,")"),ma,E);if(I==".")return s(pa,E);if(I=="[")return s(ka("]"),B,p("]"),ma,E)}}function Y(I){if(I==":")return s(ma,t);return x(E,p(";"),ma)}function pa(I){if(I=="variable"){ua.marked="js-property";return s()}}function T(I){if(I=="variable")ua.marked="js-property";if(Ga.hasOwnProperty(I))return s(p(":"),
B)}function ga(I,fa){function ca(ia){if(ia==",")return s(I,ca);if(ia==fa)return s();return s(p(fa))}return function(ia){return ia==fa?s():x(I,ca)}}function ha(I){if(I=="}")return s();return x(t,ha)}function xa(I,fa){if(I=="variable"){D(fa);return s(Oa)}return s()}function Oa(I,fa){if(fa=="=")return s(B,Oa);if(I==",")return s(xa)}function Ra(I){if(I=="var")return s(xa,Q);if(I==";")return x(Q);if(I=="variable")return s(X);return x(Q)}function X(I,fa){if(fa=="in")return s(B);return s(E,Q)}function Q(I,
fa){if(I==";")return s(V);if(fa=="in")return s(B);return s(B,p(";"),V)}function V(I){I!=")"&&s(B)}function f(I,fa){if(I=="variable"){D(fa);return s(f)}if(I=="(")return s(ka(")"),K,ga(C,")"),ma,t,ba)}function C(I,fa){if(I=="variable"){D(fa);return s()}}var N=c.indentUnit,O=a.json,S=function(){function I(La){return{type:La,style:"js-keyword"}}var fa=I("keyword a"),ca=I("keyword b"),ia=I("keyword c"),sa=I("operator"),ta={type:"atom",style:"js-atom"};return{"if":fa,"while":fa,"with":fa,"else":ca,"do":ca,
"try":ca,"finally":ca,"return":ia,"break":ia,"continue":ia,"new":ia,"delete":ia,"throw":ia,"var":I("var"),"function":I("function"),"catch":I("catch"),"for":I("for"),"switch":I("switch"),"case":I("case"),"default":I("default"),"in":sa,"typeof":sa,"instanceof":sa,"true":ta,"false":ta,"null":ta,undefined:ta,NaN:ta,Infinity:ta}}(),la=/[+\-*&%=<>!?|]/,ja,wa,Ga={atom:true,number:true,variable:true,string:true,regexp:true},ua={state:null,column:null,marked:null,cc:null},Na={name:"this",next:{name:"arguments"}};
ma.lex=true;return{startState:function(I){return{tokenize:i,reAllowed:true,cc:[],lexical:new v((I||0)-N,0,"block",false),localVars:null,context:null,indented:0}},token:function(I,fa){if(I.sol()){if(!fa.lexical.hasOwnProperty("align"))fa.lexical.align=false;fa.indented=I.indentation()}if(I.eatSpace())return null;var ca=fa.tokenize(I,fa);if(ja=="comment")return ca;fa.reAllowed=ja=="operator"||ja=="keyword c"||ja.match(/^[\[{}\(,;:]$/);var ia;a:{var sa=ja,ta=wa,La=fa.cc;ua.state=fa;ua.stream=I;ua.marked=
null;ua.cc=La;if(!fa.lexical.hasOwnProperty("align"))fa.lexical.align=true;for(;;)if((La.length?La.pop():O?B:t)(sa,ta)){for(;La.length&&La[La.length-1].lex;)La.pop()();if(ua.marked){ia=ua.marked;break a}if(ia=sa=="variable")b:{for(ia=fa.localVars;ia;ia=ia.next)if(ia.name==ta){ia=true;break b}ia=void 0}if(ia){ia="js-localvariable";break a}ia=ca;break a}}return ia},indent:function(I,fa){if(I.tokenize!=i)return 0;var ca=fa&&fa.charAt(0),ia=I.lexical,sa=ia.type,ta=ca==sa;return sa=="vardef"?ia.indented+
4:sa=="form"&&ca=="{"?ia.indented:sa=="stat"||sa=="form"?ia.indented+N:ia.info=="switch"&&!ta?ia.indented+(/^(?:case|default)\b/.test(fa)?N:2*N):ia.align?ia.column+(ta?0:1):ia.indented+(ta?0:N)},electricChars:":{}"}});CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:true});
CodeMirror.defineMode("xml",function(c,a){function e(T,ga){function ha(Oa){ga.tokenize=Oa;return Oa(T,ga)}var xa=T.next();if(xa=="<")if(T.eat("!"))if(T.eat("["))return T.match("CDATA[")?ha(l("xml-cdata","]]\>")):null;else if(T.match("--"))return ha(l("xml-comment","--\>"));else if(T.match("DOCTYPE")){T.eatWhile(/[\w\._\-]/);return ha(l("xml-doctype",">"))}else return null;else if(T.eat("?")){T.eatWhile(/[\w\._\-]/);ga.tokenize=l("xml-processing","?>");return"xml-processing"}else{E=T.eat("/")?"closeTag":
"openTag";T.eatSpace();for(B="";xa=T.eat(/[^\s\u00a0=<>\"\'\/?]/);)B+=xa;ga.tokenize=g;return"xml-tag"}else if(xa=="&"){T.eatWhile(/[^;]/);T.eat(";");return"xml-entity"}else{T.eatWhile(/[^&<]/);return null}}function g(T,ga){var ha=T.next();if(ha==">"||ha=="/"&&T.eat(">")){ga.tokenize=e;E=ha==">"?"endTag":"selfcloseTag";return"xml-tag"}else if(ha=="="){E="equals";return null}else if(/[\'\"]/.test(ha)){ga.tokenize=i(ha);return ga.tokenize(T,ga)}else{T.eatWhile(/[^\s\u00a0=<>\"\'\/?]/);return"xml-word"}}
function i(T){return function(ga,ha){for(;!ga.eol();)if(ga.next()==T){ha.tokenize=g;break}return"xml-attribute"}}function l(T,ga){return function(ha,xa){for(;!ha.eol();){if(ha.match(ga)){xa.tokenize=e;break}ha.next()}return T}}function n(){for(var T=arguments.length-1;T>=0;T--)Y.cc.push(arguments[T])}function v(){n.apply(null,arguments);return true}function x(T,ga){var ha=p.doNotIndent.hasOwnProperty(T)||Y.context&&Y.context.noIndent;Y.context={prev:Y.context,tagName:T,indent:Y.indented,startOfLine:ga,
noIndent:ha}}function s(T){if(T=="openTag"){Y.tagName=B;return v(ba,D(Y.startOfLine))}else if(T=="closeTag"){if(Y.context)Y.context=Y.context.prev;return v(K)}else{if(T=="xml-cdata"){if(!Y.context||Y.context.name!="!cdata")x("!cdata");if(Y.tokenize==e)if(Y.context)Y.context=Y.context.prev}return v()}}function D(T){return function(ga){if(ga=="selfcloseTag"||ga=="endTag"&&p.autoSelfClosers.hasOwnProperty(Y.tagName.toLowerCase()))return v();if(ga=="endTag"){x(Y.tagName,T);return v()}return v()}}function K(T){if(T==
"endTag")return v();return n()}function ba(T){if(T=="xml-word"){pa="xml-attname";return v(ba)}if(T=="equals")return v(ka,ba);return n()}function ka(T){if(T=="xml-word"&&p.allowUnquoted){pa="xml-attribute";return v()}if(T=="xml-attribute")return v();return n()}var ma=c.indentUnit,p=a.htmlMode?{autoSelfClosers:{br:true,img:true,hr:true,link:true,input:true,meta:true,col:true,frame:true,base:true,area:true},doNotIndent:{pre:true,"!cdata":true},allowUnquoted:true}:{autoSelfClosers:{},doNotIndent:{"!cdata":true},
allowUnquoted:false},t=a.alignCDATA,B,E,Y,pa;return{startState:function(){return{tokenize:e,cc:[],indented:0,startOfLine:true,tagName:null,context:null}},token:function(T,ga){if(T.sol()){ga.startOfLine=true;ga.indented=T.indentation()}if(T.eatSpace())return null;pa=E=B=null;var ha=ga.tokenize(T,ga);if((ha||E)&&ha!="xml-comment")for(Y=ga;;)if((ga.cc.pop()||s)(E||ha))break;ga.startOfLine=false;return pa||ha},indent:function(T,ga){var ha=T.context;if(ha&&ha.noIndent)return 0;if(t&&/<!\[CDATA\[/.test(ga))return 0;
if(ha&&/^<\//.test(ga))ha=ha.prev;for(;ha&&!ha.startOfLine;)ha=ha.prev;return ha?ha.indent+ma:0},electricChars:"/"}});CodeMirror.defineMIME("application/xml","xml");CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:true});
CodeMirror.defineMode("css",function(c){function a(x,s){v=s;return x}function e(x,s){var D=x.next();if(D=="@"){x.eatWhile(/\w/);return a("css-at",x.current())}else if(D=="/"&&x.eat("*")){s.tokenize=g;return g(x,s)}else if(D=="<"&&x.eat("!")){s.tokenize=i;return i(x,s)}else if(D=="=")a(null,"compare");else if((D=="~"||D=="|")&&x.eat("="))return a(null,"compare");else if(D=='"'||D=="'"){s.tokenize=l(D);return s.tokenize(x,s)}else if(D=="#"){x.eatWhile(/\w/);return a("css-selector","hash")}else if(D==
"!"){x.match(/^\s*\w*/);return a("css-important","important")}else if(/\d/.test(D)){x.eatWhile(/[\w.%]/);return a("css-unit","unit")}else if(/[,.+>*\/]/.test(D))return a(null,"select-op");else if(/[;{}:\[\]]/.test(D))return a(null,D);else{x.eatWhile(/[\w\\\-_]/);return a("css-identifier","identifier")}}function g(x,s){for(var D=false,K;(K=x.next())!=null;){if(D&&K=="/"){s.tokenize=e;break}D=K=="*"}return a("css-comment","comment")}function i(x,s){for(var D=0,K;(K=x.next())!=null;){if(D>=2&&K==">"){s.tokenize=
e;break}D=K=="-"?D+1:0}return a("css-comment","comment")}function l(x){return function(s,D){for(var K=false,ba;(ba=s.next())!=null;){if(ba==x&&!K)break;K=!K&&ba=="\\"}if(!K)D.tokenize=e;return a("css-string","string")}}var n=c.indentUnit,v;return{startState:function(x){return{tokenize:e,baseIndent:x||0,stack:[]}},token:function(x,s){if(x.eatSpace())return null;var D=s.tokenize(x,s),K=s.stack[s.stack.length-1];if(v=="hash"&&K=="rule")D="css-colorcode";else if(D=="css-identifier")if(K=="rule")D="css-value";
else if(!K||K=="@media{")D="css-selector";K=="rule"&&/^[\{\};]$/.test(v)&&s.stack.pop();if(v=="{")if(K=="@media")s.stack[s.stack.length-1]="@media{";else s.stack.push("{");else if(v=="}")s.stack.pop();else if(v=="@media")s.stack.push("@media");else K!="rule"&&K!="@media"&&v!="comment"&&s.stack.push("rule");return D},indent:function(x,s){var D=x.stack.length;if(/^\}/.test(s))D-=x.stack[x.stack.length-1]=="rule"?2:1;return x.baseIndent+D*n},electricChars:"}"}});CodeMirror.defineMIME("text/css","css");
CodeMirror.defineMode("liquid",function(c){function a(x,s){var D=l.token(x,s.htmlState);if(D=="xml-tag"&&x.current()==">"&&s.htmlState.context)if(/^script$/i.test(s.htmlState.context.tagName)){s.token=g;s.localState=n.startState(l.indent(s.htmlState,""))}else if(/^style$/i.test(s.htmlState.context.tagName)){s.token=i;s.localState=v.startState(l.indent(s.htmlState,""))}return D}function e(x,s,D){var K=x.current();s=K.search(s);s>-1&&x.backUp(K.length-s);return D}function g(x,s){if(x.match(/^<\/\s*script\s*>/i,
false)){s.token=a;s.curState=null;return a(x,s)}return e(x,/<\/\s*script\s*>/,n.token(x,s.localState))}function i(x,s){if(x.match(/^<\/\s*style\s*>/i,false)){s.token=a;s.localState=null;return a(x,s)}return e(x,/<\/\s*style\s*>/,v.token(x,s.localState))}var l=CodeMirror.getMode(c,{name:"xml",htmlMode:true}),n=CodeMirror.getMode(c,"javascript"),v=CodeMirror.getMode(c,"css");return{startState:function(){var x=l.startState();return{token:a,localState:null,htmlState:x}},copyState:function(x){if(x.localState)var s=
CodeMirror.copyState(x.token==i?v:n,x.localState);return{token:x.token,localState:s,htmlState:CodeMirror.copyState(l,x.htmlState)}},token:function(x,s){return s.token(x,s)},indent:function(x,s){return x.token==a||/^\s*<\//.test(s)?l.indent(x.htmlState,s):x.token==g?n.indent(x.localState,s):v.indent(x.localState,s)},electricChars:"/{}:"}});CodeMirror.defineMIME("text/html","htmlmixed");
var Asset=Model("asset",function(){this.persistence(Model.REST,"/admin/assets");this.include({toMustache:function(c){this.merge({query_path:c?"?"+decodeURIComponent(jQuery.param({query:c})):"",query:c});return this.attr()},toMustacheWithNeighbors:function(c){var a=Asset.all(),e=a.indexOf(this),g=this.toMustache(c),i=a[e+1]?Asset.all()[e+1].toMustache(c):null;c=a[e-1]?Asset.all()[e-1].toMustache(c):null;jQuery("<img />")[0].src="/images/large/"+g.id+"/"+g.file_name;if(i)jQuery("<img />")[0].src="/images/large/"+
i.id+"/"+i.file_name;if(c)jQuery("<img />")[0].src="/images/large/"+c.id+"/"+c.file_name;return{asset:g,next:i,previous:c}}});this.extend({toMustache:function(c){var a=c?"?"+decodeURIComponent(jQuery.param({query:c})):"";return{assets:this.map(function(e){e.merge({query_path:a,query:c});return e.attr()}),query:c}},asJSON:function(){return Asset.map(function(c){return c.attr()})},tags:function(){tags=[];Asset.map(function(){tags=tags.concat(this.attr("tags"))});return tags},searchRemote:function(c,
a){var e=c!=null?decodeURIComponent(jQuery.param({query:c})):"";Asset.each(function(){Asset.remove(this)});jQuery.ajax({type:"get",url:"/search.json",contentType:"application/json",dataType:"json",data:e,success:function(g){jQuery.each(g,function(i,l){var n=new Asset({id:l.id});n.merge(l);Asset.add(n)});a.call(this)}})},searchAdmin:function(c,a){Asset.each(function(){Asset.remove(this)});jQuery.ajax({type:"get",url:"/admin/assets.json",contentType:"application/json",dataType:"json",data:c,success:function(e){$.each(e,
function(g,i){var l=new Asset({id:i.id});l.merge(i);Asset.add(l)});a.call(this)}})},keys:{},create:function(c,a){Asset.callback=a;var e=new XMLHttpRequest,g=Asset.generate_uuid();e.upload.uuid=g;e.upload.filename=c.name;e.upload.addEventListener("loadstart",Asset.onloadstartHandler,false);e.upload.addEventListener("progress",Asset.onprogressHandler);e.upload.addEventListener("load",Asset.onloadHandler,false);e.addEventListener("readystatechange",Asset.onreadystatechangeHandler,false);e.open("POST",
"/admin/assets.json",true);e.setRequestHeader("Content-Type","application/octet-stream");e.setRequestHeader("X-File-Name",c.name);e.setRequestHeader("X-File-Upload","true");e.send(c);a.before&&a.before.call(this,g)},onloadstartHandler:function(){},onloadHandler:function(){},onprogressHandler:function(c){var a=Math.round(c.loaded/c.total*100);Asset.callback.progress&&Asset.callback.progress.call(this,c.target.uuid,a)},onreadystatechangeHandler:function(c){var a=null;try{a=c.target.status}catch(e){return}if(a==
"200"&&c.target.readyState==4&&c.target.responseText){c=JSON.parse(c.target.responseText);a=new Asset({id:c.id});a.merge(c);Asset.add(a);Asset.callback.success&&Asset.callback.success.call(this,a)}},generate_uuid:function(){for(var c=[],a=0;a<32;a++)c[a]="0123456789ABCDEF".substr(Math.floor(Math.random()*16),1);c[12]="4";c[16]="0123456789ABCDEF".substr(c[16]&3|8,1);return c.join("")}})}),Page=Model("page",function(){this.persistence(Model.SinatraREST,"/admin/pages");this.include({children:function(){return Page.find_all_by_parent_id(this.id())},
has_children:function(){if(this.children().all().length>0)return true},assets:function(){for(var c=this.attr("assets"),a=0,e=c.length;a<e;++a){var g=c[a],i=new Asset({id:g.id});i.merge(g);Asset.add(i)}return Asset},parts:function(){var c=this.attr("parts"),a=c.length;Part.each(function(){Part.remove(this)});for(var e=0;e<a;++e){var g=c[e],i=new Part({id:g.id});i.merge(g);i.attr("page_id",this.id());Part.add(i)}return Part},load:function(c){var a=this,e="/admin/pages/"+a.id()+".json";jQuery.ajax({type:"GET",
url:e,dataType:"json",success:function(g){a.merge(g);c.call(this)}})},saveRemote:function(c,a){var e=this,g="/admin/pages/"+this.id()+".json";jQuery.ajax({type:"PUT",url:g,data:c,dataType:"json",success:function(i){if(i.errors){alert(JSON.stringify(i.errors));a.error&&a.error.call(this)}else{e.merge(i);a.success&&a.success.call(this)}}})}});this.extend({toMustache:function(){return{pages:this.map(function(c){return c.attr()})}},asJSON:function(){return Page.map(function(c){return c.attr()})},root:function(){return this.detect(function(){return this.attr("parent_id")==
null})},find_by_parent_id:function(c){return this.detect(function(){return this.attr("parent_id")==c})},find_all_by_parent_id:function(c){return this.select(function(){return this.attr("parent_id")==c})},find_by_path:function(c){return this.detect(function(){return this.attr("path")==c})},load_by_id:function(c,a){jQuery.ajax({type:"GET",url:"/admin/pages/"+c+".json",dataType:"json",success:function(e){var g=Page.find(e.id);g||(g=new Page({id:e.id}));g.merge(e);Page.add(g);a&&a.call(this,e)}})},create:function(c,
a){jQuery.ajax({type:"post",url:"/admin/pages.json",dataType:"json",data:{page:c},success:function(e){var g=new Page({id:e.id});g.merge(e);Page.add(g);a.call(this,e)}})}})}),Layout=Model("template",function(){this.persistence(Model.SinatraREST,"/admin/templates");this.include({load:function(c){var a=this,e="/admin/templates/"+a.id()+".json";jQuery.ajax({type:"GET",url:e,dataType:"json",success:function(g){a.merge(g);c.call(this,g)}})}});this.extend({toMustache:function(){return{layouts:this.map(function(c){return c.attr()})}},
asLayoutJSON:function(c){return Layout.find_all_by_class("Layout").map(function(a){c==a.id()?a.attr("selected",'selected="selected"'):a.attr("selected","");return a.attr()})},find_by_class:function(c){return this.detect(function(){return this.attr("klass")==c})},find_all_by_class:function(c){return this.select(function(){return this.attr("klass")==c})},asJSON_by_class:function(c){return this.find_all_by_class(function(){return c.map(function(a){return a.attributes})})}})}),Part=Model("part",function(){this.include({deleteRemote:function(c,
a){var e="/admin/pages/"+c.id()+"/parts/"+this.id()+".json";jQuery.ajax({type:"DELETE",url:e,dataType:"json",success:function(g){c.merge(g);a.call(this)}})}});this.extend({toMustache:function(){return{parts:this.map(function(c){return c.attr()})}},create:function(c,a){var e="/admin/templates/"+c.template_id+"/parts.json",g=Layout.find(c.template_id);jQuery.ajax({type:"post",url:e,dataType:"json",data:{part:c},success:function(i){g.merge(i);a.call(this)}})}})}),Site=Model("site",function(){this.persistence(Model.SinatraREST,
"/admin/sites");this.include({});this.extend({toMustache:function(){return{sites:this.map(function(c){return c.attr()})}}})}),User=Model("user",function(){this.persistence(Model.SinatraREST,"/admin/users");this.include({});this.extend({toMustache:function(){return{users:this.map(function(c){return c.attr()})}}})}),Galerie={open:function(c,a){$("body").append('<div id="overlay"></div>').append('<div id="modal_wrapper"><div id="modal"></div></div>');var e=$("#modal");e.html(c);var g=$("#modal_wrapper"),
i=$(window).height();e=e.height()+42;e=(i-e)/2;$("#overlay").css({height:i}).hide().fadeIn("fast");g.hide().fadeIn("fast").css({top:e});a&&a.call(this)},close:function(){$("#modal_wrapper").fadeOut("fast",function(){$(this).remove();$("#overlay").fadeOut("fast",function(){$(this).remove()})})}},logger={info:function(c){window.console&&console.log(c)},debug:function(c){window.console&&console.log(c)}},Utilities={notice:function(c){var a=jQuery(".notice");a.text(c);a.slideDown("slow",function(){setTimeout(function(){a.slideUp("slow")},
1E3)})},keyboard_nav:function(){jQuery("body").keydown(function(c){switch(c.keyCode){case 37:$("a.previous").click();break;case 39:$("a.next").click();break}})},check_browser_version:function(){if(!Modernizr.history){jQuery("a").live("click",function(a){a.preventDefault();document.location.hash=$(this).attr("href")});var c=jQuery("form#search-form");c.attr("action","#"+c.attr("action"))}},formObserver:function(c){jQuery(c).keyup(function(){delay(function(){jQuery(c).parents("form:first").submit()},
800)})}},iFramer={initialize:function(c,a){var e=jQuery(c),g=this;e.length&&e.load(function(){var i=$(this),l=i.contents(),n=l.find("span.part-editor"),v=n.find("a");g.setEditFlags(n);i.fadeIn("fast");l.find('a[href^="/preview"]').click(function(x){var s=$(this).attr("href").split("?")[0].replace("/preview","");if(s=Page.find_by_path(s)){x.preventDefault();s.id();document.location.hash=s.attr("admin_path")}});v.click(function(){window.top.trigger=$(this);window.top.location.hash=$(this).attr("href");
return false});a&&a.call(this)})},setEditFlags:function(c){c.css({position:"relative",display:"block",height:"0",width:"0","text-decoration":"none"}).find("span").css({display:"block",position:"absolute",top:"-24px",left:"12px",padding:"4px 8px",width:"100px",background:"rgba(255, 255, 0, 0.7)"})}},TabControl={initialize:function(c){if(c=jQuery(c)){c.each(function(a,e){$(e).hide()});c.first().show();this.tabControl(jQuery(".tab-control"))}},tabControl:function(c){c.click(function(){var a="tab-"+$(this).find("label").attr("for").split("-")[1];
jQuery(".tab").hide();jQuery("#"+a).show()})}},delay=function(){var c=0;return function(a,e){clearTimeout(c);c=setTimeout(a,e)}}(),Sites=Sammy(function(){var c=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.helpers({loadSites:function(a){if(Site.all().length==0)Site.load(function(){a&&a.call(this)});else a&&a.call(this)},renderSiteIndex:function(){this.load(jQuery("#admin-sites-index")).interpolate(Site.toMustache(),
"mustache").replace("#sidebar")}});this.bind("run",function(){c.modal=false;c.refresh_pages=true});this.get("#/preview",function(){alert(document.location.hostname);window.open("/","preview")});this.get("#/sites",function(a){c.refresh_pages=true;Galerie.close();jQuery("#editor").html('<h1 class="section">Sites</div>');a.loadSites(function(){a.renderSiteIndex()})});this.get("#/sites/new",function(a){a.loadSites(function(){$("#modal").length==0&&Galerie.open();a.load(jQuery("#admin-sites-new")).interpolate({},
"mustache").replace("#modal");a.renderSiteIndex(Site.all())})});this.post("#/sites",function(a){(new Site(a.params.site)).save(function(e,g){var i=JSON.parse(g.responseText);i.errors?alert(JSON.stringify(i)):a.redirect("#/sites")})});this.get("#/sites/:id/edit",function(a){Galerie.close();a.loadSites(function(){site=Site.find(a.params.id);a.load(jQuery("#admin-sites-edit")).interpolate({site:site.asJSON()},"mustache").replace("#editor");a.renderSiteIndex(Site.all())})});this.put("#/sites/:id",function(a){var e=
Site.find(a.params.id);e.attr(a.params.site);e.save(function(g,i){var l=JSON.parse(i.responseText);l.errors?alert(JSON.stringify(l)):a.redirect("#/sites")})});this.get("#/sites/:id/remove",function(a){Galerie.open();a.loadSites(function(){site=Site.find(a.params.id);a.load(jQuery("#admin-sites-remove")).interpolate({site:site.asJSON()},"mustache").replace("#modal");a.renderSiteIndex(Site.all())})});this.del("#/sites/:id",function(a){site.destroy(function(e){e?a.redirect("#/sites"):alert("there were issues")})})}),
Layouts=Sammy(function(){var c=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.helpers({loadLayouts:function(a){if(Layout.all().length==0)Layout.load(function(){a&&a.call(this)});else a&&a.call(this)},renderLayoutIndex:function(){this.load(jQuery("#admin-templates-index")).interpolate({layouts:Layout.find_all_by_class("Layout").map(function(a){return a.attributes}),partials:Layout.find_all_by_class("Partial").map(function(a){return a.attributes}),
javascripts:Layout.find_all_by_class("Javascript").map(function(a){return a.attributes}),stylesheets:Layout.find_all_by_class("Stylesheet").map(function(a){return a.attributes})},"mustache").replace("#sidebar")},renderLayout:function(a){this.load(jQuery("#admin-templates-edit")).interpolate({layout:a.asJSON(),filters:[{name:"none",value:"none",selected:a.attr("filter")=="css"?'selected="selected"':""},{name:"Sass",value:"sass",selected:a.attr("filter")=="sass"?'selected="selected"':""},{name:"Scss",
value:"scss",selected:a.attr("filter")=="scss"?'selected="selected"':""}]},"mustache").replace("#editor").then(function(){var e=jQuery("#layout_content");e.attr("value",a.attr("content"));e=e.attr("class");jQuery("#layout_content").length>0&&CodeMirror.fromTextArea(document.getElementById("layout_content"),{mode:e,lineNumbers:true})})}});this.bind("run",function(){c.refresh_templates=true;c.refresh_pages=true;c.modal=false});this.get("#/templates",function(a){Galerie.close();c.refresh_templates=false;
c.refresh_pages=true;jQuery("#editor").html('<h1 class="section">Templates</div>');a.loadLayouts(function(){a.renderLayoutIndex(Layout.all())})});this.get("#/templates/new/:klass",function(a){this.loadLayouts(function(){var e=$("<div />").attr({id:"new-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(e);a.load(jQuery("#admin-templates-new")).interpolate({klass:a.params.klass},"mustache").replace("#new-page-container");a.renderLayoutIndex(Layout.all())})});this.post("#/templates",
function(a){(new Layout(a.params.template)).save(function(e,g){var i=JSON.parse(g.responseText);if(i.errors)Utilities.notice(JSON.stringify(i));else{a.redirect("#/templates");Utilities.notice("Successfully saved template")}})});this.get("#/templates/:id/edit",function(a){Galerie.close();c.refresh_pages=true;this.loadLayouts(function(){var e=Layout.find(a.params.id);a.renderLayout(e);a.renderLayoutIndex(Layout.all())})});this.put("#/templates/:id",function(a){var e=Layout.find(a.params.id);e.attr(a.params.layout);
e.save(function(g){if(g){a.renderLayoutIndex();Utilities.notice("Successfully saved template")}})});this.get("#/templates/:id/remove",function(a){this.loadLayouts(function(){var e=Layout.find(a.params.id);Galerie.open();a.load(jQuery("#admin-templates-remove")).interpolate({layout:e.asJSON()},"mustache").replace("#modal");a.renderLayoutIndex(Layout.all())})});this.del("/templates/:id",function(a){Layout.find(a.params.id).destroy(function(e){if(e){a.renderLayoutIndex();Utilities.notice("Successfully deleted template");
a.redirect("#/templates")}})});this.post("/layouts/:id/parts",function(a){this.loadLayouts(function(){var e=a.params.id;Part.create(a.params.part,function(){a.redirect("#/templates/"+e+"/edit")})})})}),Assets=Sammy(function(){var c=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.swap=function(a){jQuery("#editor").html(a)};this.helpers({loadAssets:function(a,e){if(Asset.all().length==0)Asset.searchAdmin(a,function(){e&&
e.call(this)});else e&&e.call(this)},send_files:function(a,e,g){for(var i=0,l=0;l<a.length;l++){var n=a[l];Asset.create(n,{before:function(v){jQuery(".progress").append('<p id="progress-'+v+'">'+n.name+'<span class="percentage"></span></p>')},progress:function(v,x){jQuery("#progress-"+v+" .percentage").text(" "+x+"%")},success:function(){i+=1;i==a.length&&Asset.searchAdmin(e,function(){g&&g.call(this)})}})}}});this.bind("run",function(){c.modal=false;c.first_run=true});this.get("#/assets",function(a){var e=
a.params.query,g=e?{query:e}:{};g.limit=a.params.limit||48;g.page=a.params.page||1;Galerie.close();c.modal||Asset.searchAdmin(g,function(){a.load(jQuery("#admin-assets-index")).interpolate(Asset.toMustache(e),"mustache").replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple","multiple")})});c.modal=false;c.first_run=false});this.get("#/assets/new",function(a){a.load(jQuery("#admin-assets-new")).interpolate({},"mustache").replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple",
"multiple")});c.first_run=false});this.post("/admin/assets",function(a){var e=this,g=document.getElementById("ajax_uploader").files,i=a.params.query?a.params.query:null;jQuery("form#new_asset");var l=i?{query:i}:{};l.limit=a.params.limit||48;l.page=a.params.page||1;this.send_files(g,l,function(){e.render("/templates/admin/assets/index.mustache",Asset.toMustache(l.query)).replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple","multiple")})});return false});this.get("#/assets/:id/edit",
function(a){var e=a.params.query?a.params.query:null;this.loadAssets(e?{query:a.params.query}:{},function(){var g=Asset.find(a.params.id);a.load(jQuery("#admin-assets-edit")).interpolate(g.toMustacheWithNeighbors(e),"mustache").replace("#editor").then(function(){setTimeout(function(){$("img.fade-in").fadeIn("slow")},100);Utilities.formObserver(".image-info input[type=text], .image-info textarea")})});c.modal=false});this.put("#/assets/:id",function(a){var e=Asset.find(a.params.id);e.attr(a.params.asset);
e.save(function(g){g&&Utilities.notice("Successfully saved asset")})});this.get("#/assets/:id/remove",function(a){var e=a.params.query?a.params.query:null,g=e?{query:a.params.query}:null;jQuery(".modal-strip").remove();this.loadAssets(g,function(){var i=Asset.find(a.params.id);if(c.first_run){var l=a.load(jQuery("#admin-assets-edit")).interpolate(Asset.toMustache(e),"mustache"),n=a.load(jQuery("#admin-assets-remove")).interpolate({asset:i.toMustache(e)},"mustache");l.replace("#editor").then(function(){var v=
jQuery("#asset-"+i.id());n.appendTo(v).then(function(){jQuery(".modal-strip").fadeIn("fast").css({})})})}else{l=jQuery("#asset-"+i.id());n=a.load(jQuery("#admin-assets-remove")).interpolate({asset:i.toMustache(e)},"mustache");n.appendTo(l).then(function(){jQuery(".modal-strip").fadeIn("fast").css({})})}})});this.del("#/assets/:id",function(a){var e=a.params.query?a.params.query:null,g=e?"?"+decodeURIComponent(jQuery.param({query:e})):"";Asset.find(a.params.id).destroy(function(i){if(i){Galerie.close();
Utilities.notice("Successfully saved asset");a.redirect("#/assets"+g)}})})}),Pages=Sammy(function(c){var a=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);c.helpers({loadPages:function(e){if(Page.all().length==0)Page.load(function(){Layout.load(function(){e&&e.call(this)})});else e&&e.call(this)},renderTree:function(e,g){var i=this;i.load(jQuery("#admin-pages-node")).interpolate({pages:[e.asJSON()]},"mustache").replace("#sidebar").then(function(){i.renderNode(e,
g);e.id()==g.id()&&jQuery("li#page-"+e.id()).addClass("active")})},renderNode:function(e,g){var i=this;i.load(jQuery("#admin-pages-node")).interpolate(e.children().toMustache(),"mustache").appendTo("#page-"+e.id()).then(function(){e.children().each(function(l){l.id()==g.id()&&jQuery("li#page-"+l.id()).addClass("active");if(l.has_children()==true){jQuery("#page-"+l.id()).addClass("open");i.renderNode(l,g)}})})},renderPagePreview:function(e,g){a.modal||this.load(jQuery("#admin-pages-show")).interpolate({page:e.asJSON(),
layouts:Layout.asLayoutJSON(e.attr("layout_id")),base_page_id:e.id()},"mustache").replace("#editor").then(function(){iFramer.initialize(".preview iframe",function(){g&&g.call(this)});jQuery("li.node").removeClass("active");jQuery("#page-"+e.id()).addClass("active")})},open_page_editor:function(){var e=jQuery("#page-editor"),g=jQuery("#page-title");e.addClass("open").animate({height:"200px"},300);g.removeAttr("disabled").focus()},close_page_editor:function(){var e=jQuery("#page-editor"),g=jQuery("#page-title");
e.removeClass("open").animate({height:"0"},300);g.attr("disabled","disabled")}});this.bind("page-index",function(){var e=this;jQuery(".page-children").length||e.loadPages(function(){e.renderTree(Page.root(),Page.root())})});this.bind("run",function(){a.application=this;a.refresh_pages=true;a.modal=false;jQuery(".add-asset").live("click",function(){a.application.trigger("add-asset");return false});jQuery("#sidebar .opener").live("click",function(){var e=(new Date).getTime();e=$(this).parents("li:first");
console.log(e);var g=this.id.split("-")[2],i=Page.find(g),l=jQuery.cookie("active_page_ids");l=l?l.split(","):[];if(e.hasClass("open")){e.toggleClass("open");l=jQuery.grep(l,function(n){return n!=g});jQuery.cookie("active_page_ids",l.join(","),{path:"/admin"});i.children().each(function(n){Page.remove(n)});jQuery("#page-"+g+" ul").remove()}else{l.push(g);e.toggleClass("open");e=(new Date).getTime();jQuery.cookie("active_page_ids",l.join(","),{path:"/admin"});Page.load(function(){a.application.renderNode(i,
i)})}a.refresh_pages=false;return a.modal=false})});this.get("#/pages/?",function(e){Galerie.close();e.trigger("page-index");jQuery("#editor").html('<h1 class="section">Pages</div>');a.do_not_refresh=false});this.get("#/pages/:id/new/?",function(e){this.loadPages(function(){var g=Page.find(e.params.id),i=$("<div />").attr({id:"new-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(i);e.trigger("page-index");e.load(jQuery("#admin-pages-new")).interpolate({parent:g.asJSON(),
layouts:Layout.asLayoutJSON(g.attr("layout_id"))},"mustache").replace("#new-page-container")})});this.post("#/pages/:page_id",function(e){Page.find(e.params.page_id);(new Page(e.params.page)).save(function(g,i){var l=JSON.parse(i.responseText);if(l.errors)alert(JSON.stringify(l));else{a.refresh_pages=true;Utilities.notice("Successfully saved page");e.redirect("#/pages/"+l.id)}})});this.get("#/pages/:id/?",function(e){var g=this;Galerie.close();jQuery(".modal-editor").remove();this.loadPages(function(){var i=
e.params.id,l=Page.find(i);if(a.do_not_refresh)g.close_page_editor();else{if(l)e.renderPagePreview(l);else{l=new Page({id:i});l.load(function(){e.renderPagePreview(l)})}a.modal=false;a.do_not_refresh=false;e.trigger("page-index")}});a.do_not_refresh=false});this.get("#/pages/:id/edit/?",function(e){var g=this;Galerie.close();a.modal=false;this.loadPages(function(){var i=Page.find(e.params.id);if(jQuery("#preview-"+i.id()).length)g.open_page_editor();else{e.renderPagePreview(i,function(){g.open_page_editor()});
e.trigger("page-index")}});a.do_not_refresh=true});this.put("#/pages/:page_id",function(e){var g=Page.find(e.params.page_id);g.attr(e.params.page);g.save(function(i){if(i){a.modal=false;Utilities.notice("Successfully saved page");e.renderTree(Page.root(),g)}})});this.get("#/pages/:id/remove",function(e){this.loadPages(function(){var g=Page.find(e.params.id),i=$("<div />").attr({id:"remove-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(i);e.trigger("page-index");e.load(jQuery("#admin-pages-remove")).interpolate({page:g.asJSON()},
"mustache").replace("#remove-page-container")})});this.del("/pages/:id",function(e){var g=e.params.id;Page.find(g).destroy(function(i){if(i){jQuery("#page-"+g).remove();a.refresh_pages=false;e.redirect("#/pages")}})})}),Parts=Sammy(function(c){var a=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);c.helpers({render_part:function(e,g,i){var l=this;l.load(jQuery("#admin-"+i+"-edit")).interpolate({part:e.asJSON(),page:g.asJSON(),
assets:Asset.asJSON()},"mustache").appendTo(jQuery("body")).then(function(){var n=jQuery(".modal-editor"),v=$("iframe").contents(),x=v.find("#editor-"+e.id());n.fadeIn("fast").css({top:x.offset().top-v.find("body").scrollTop()+"px",left:x.offset().left+400+"px"});l.set_asset_links(e,g);jQuery("#ajax_uploader").attr("multiple","multiple").change(function(){var s=jQuery(this).parents("form:first");jQuery(".progress").slideDown("slow",function(){s.submit()})});l.trigger("page-index");a.modal=true})},
set_asset_links:function(e,g){jQuery("#search-results-container li.asset").each(function(i,l){var n=jQuery(l).find("a"),v=jQuery(l).attr("id").split("-")[1];n.click(function(x){x.preventDefault();x=g.attr("parts");for(var s=0,D=x.length;s<D;++s){var K=x[s];if(e.id()==K.id){K.asset_id=v;e.attr("asset_id",v);e.save()}}g.save(function(){jQuery(".modal-editor").remove();a.modal=false;document.location.hash="#"+g.attr("admin_path")})})})}});this.get("#/pages/:page_id/parts/:id/edit",function(e){jQuery(".modal-editor").remove();
var g=$("iframe");this.loadPages(function(){Page.load_by_id(e.params.page_id,function(){var i=Page.find(e.params.page_id),l=i.parts().find(e.params.id),n=jQuery("#page-updated_at").attr("value");if(g.length)if(n!=i.attr("updated_at")){var v=jQuery(".preview iframe");v.hide().attr("src",v.attr("src"));v.load(function(){v.fadeIn("fast");e.render_part(l,i,"parts")})}else e.render_part(l,i,"parts");else e.renderPagePreview(i,function(){e.render_part(l,i,"parts")})})})});this.get("#/pages/:page_id/image_parts/:id/edit",
function(e){var g=this;jQuery(".modal-editor").remove();g.loadPages(function(){var i=Page.find(e.params.page_id),l=i.parts().find(e.params.id),n=$("iframe");Asset.searchAdmin({limit:"8"},function(){n.length?g.render_part(l,i,"image_parts"):e.renderPagePreview(i,function(){g.render_part(l,i,"image_parts")})})})});this.get("/pages/:page_id/parts/:id/results",function(e){var g=this;this.loadPages(function(){var i=Page.find(e.params.page_id),l=Part.find(e.params.id),n=e.params.query?e.params.query:null;
Asset.searchAdmin(n?{query:n}:{},function(){e.render("/templates/admin/pages/search_results.mustache",Asset.toMustache()).replace("#search-results-container").then(function(){g.set_asset_links(l,i)})})})});this.put("#/pages/:page_id/parts/:id",function(e){var g=e.params.id,i=e.params.page_id,l=Page.find(i),n=l.parts().find(g);logger.info(e.params.part);for(var v=l.attr("parts"),x=0,s=v.length;x<s;++x){n=v[x];if(g==n.id){var D=e.params.part.content;n.content=D;n=Part.find(n.id);n.attr("content",D);
n.save()}}l.save(function(K){if(K){a.modal=false;e.redirect("#/pages/"+i)}})});this.post("#/pages/:page_id/image_parts/:id/assets",function(e){var g=this,i=Page.find(e.params.page_id),l=i.parts().find(e.params.id),n=document.getElementById("ajax_uploader").files,v=e.params.query?e.params.query:null;jQuery("form#new_asset");v=v?{query:v}:{};v.limit=e.params.limit||48;v.page=e.params.page||1;this.send_files(n,v,function(){e.render("/templates/admin/pages/search_results.mustache",Asset.toMustache()).replace("#search-results-container").then(function(){jQuery("#ajax_uploader").attr("files",
null);jQuery(".progress").slideUp("slow",function(){jQuery(this).html("")});g.set_asset_links(l,i)})})})}),Users=Sammy(function(){var c=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.helpers({loadUsers:function(a){if(User.all().length==0)User.load(function(){a&&a.call(this)});else a&&a.call(this)},renderUserIndex:function(a){this.load(jQuery("#admin-users-index")).interpolate(User.toMustache(),"mustache").replace("#editor").then(function(){a&&
a.call(this)})}});this.bind("run",function(){c.modal=false;c.refresh_pages=true});this.get("#/users",function(a){Galerie.close();jQuery("#editor").html('<h1 class="section">Users</div>');a.loadUsers(function(){a.renderUserIndex()})});this.get("#/users/new",function(a){a.loadUsers(function(){jQuery("#modal").length||Galerie.open();a.load(jQuery("#admin-users-new")).interpolate({},"mustache").replace("#modal");a.renderUserIndex()})});this.post("#/users",function(a){(new User(a.params.user)).save(function(e,
g){var i=JSON.parse(g.responseText);i.errors?alert(JSON.stringify(i)):a.redirect("#/users")})});this.get("#/users/:id/edit",function(a){a.loadUsers(function(){user=User.find(a.params.id);if(jQuery("#users").length){jQuery(".user-form").html("");a.load(jQuery("#admin-users-edit")).interpolate({user:user.asJSON()},"mustache").replace("#user-form-"+user.id())}else a.renderUserIndex(function(){jQuery(".user-form").html("");a.load(jQuery("#admin-users-edit")).interpolate({user:user.asJSON()},"mustache").replace("#user-form-"+
user.id())})})});this.put("#/users/:id",function(a){var e=User.find(a.params.id);e.attr(a.params.user);e.save(function(g,i){var l=JSON.parse(i.responseText);l.errors?alert(JSON.stringify(l)):a.redirect("#/users")})})});
jQuery(document).ready(function(){jQuery("body").ajaxStart(function(){logger.info("starting")});jQuery("body").ajaxSuccess(function(){logger.info("success!")});jQuery("#login").length||jQuery.ajax({url:"/templates",success:function(c){jQuery("head").append(c);Pages.run("#/pages")}});Utilities.keyboard_nav();Utilities.check_browser_version()});
