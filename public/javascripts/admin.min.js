(function(b,a){function e(c){return f.isWindow(c)?c:c.nodeType===9?c.defaultView||c.parentWindow:false}function g(c){if(!db[c]){var h=V.body,d=f("<"+c+">").appendTo(h),j=d.css("display");d.remove();if(j==="none"||j===""){Ta||(Ta=V.createElement("iframe"),Ta.frameBorder=Ta.width=Ta.height=0);h.appendChild(Ta);if(!Ba||!Ta.createElement){Ba=(Ta.contentWindow||Ta.contentDocument).document;Ba.write((V.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");Ba.close()}d=Ba.createElement(c);Ba.body.appendChild(d);
j=f.css(d,"display");h.removeChild(Ta)}db[c]=j}return db[c]}function i(c,h){var d={};f.each(Ka.concat.apply([],Ka.slice(0,h)),function(){d[this]=c});return d}function l(){qb=a}function o(){setTimeout(l,0);return qb=f.now()}function w(){try{return new b.XMLHttpRequest}catch(c){}}function C(c,h,d,j){if(f.isArray(h))f.each(h,function(m,n){d||eb.test(c)?j(c,n):C(c+"["+(typeof n=="object"||f.isArray(n)?m:"")+"]",n,d,j)});else if(!d&&h!=null&&typeof h=="object")for(var k in h)C(c+"["+k+"]",h[k],d,j);else j(c,
h)}function B(c,h,d,j,k,m){k=k||h.dataTypes[0];m=m||{};m[k]=true;k=c[k];for(var n=0,q=k?k.length:0,s=c===bb,u;n<q&&(s||!u);n++){u=k[n](h,d,j);typeof u=="string"&&(!s||m[u]?(u=a):(h.dataTypes.unshift(u),u=B(c,h,d,j,u,m)))}(s||!u)&&!m["*"]&&(u=B(c,h,d,j,"*",m));return u}function K(c){return function(h,d){typeof h!="string"&&(d=h,h="*");if(f.isFunction(d))for(var j=h.toLowerCase().split(cc),k=0,m=j.length,n,q;k<m;k++){n=j[k];(q=/^\+/.test(n))&&(n=n.substr(1)||"*");n=c[n]=c[n]||[];n[q?"unshift":"push"](d)}}}
function O(c,h,d){var j=h==="width"?c.offsetWidth:c.offsetHeight,k=h==="width"?fa:Qb;if(j>0){d!=="border"&&f.each(k,function(){d||(j-=parseFloat(f.css(c,"padding"+this))||0);d==="margin"?(j+=parseFloat(f.css(c,d+this))||0):(j-=parseFloat(f.css(c,"border"+this+"Width"))||0)});return j+"px"}j=fb(c,h,h);if(j<0||j==null)j=c.style[h]||0;j=parseFloat(j)||0;d&&f.each(k,function(){j+=parseFloat(f.css(c,"padding"+this))||0;d!=="padding"&&(j+=parseFloat(f.css(c,"border"+this+"Width"))||0);d==="margin"&&(j+=
parseFloat(f.css(c,d+this))||0)});return j+"px"}function aa(c,h){h.src?f.ajax({url:h.src,async:false,dataType:"script"}):f.globalEval((h.text||h.textContent||h.innerHTML||"").replace(dc,"/*$0*/"));h.parentNode&&h.parentNode.removeChild(h)}function ia(c){f.nodeName(c,"input")?ka(c):"getElementsByTagName"in c&&f.grep(c.getElementsByTagName("input"),ka)}function ka(c){if(c.type==="checkbox"||c.type==="radio")c.defaultChecked=c.checked}function p(c){return"getElementsByTagName"in c?c.getElementsByTagName("*"):
"querySelectorAll"in c?c.querySelectorAll("*"):[]}function t(c,h){var d;if(h.nodeType===1){h.clearAttributes&&h.clearAttributes();h.mergeAttributes&&h.mergeAttributes(c);d=h.nodeName.toLowerCase();if(d==="object")h.outerHTML=c.outerHTML;else if(d!=="input"||c.type!=="checkbox"&&c.type!=="radio")if(d==="option")h.selected=c.defaultSelected;else{if(d==="input"||d==="textarea")h.defaultValue=c.defaultValue}else{c.checked&&(h.defaultChecked=h.checked=c.checked);h.value!==c.value&&(h.value=c.value)}h.removeAttribute(f.expando)}}
function z(c,h){if(h.nodeType===1&&f.hasData(c)){var d=f.expando,j=f.data(c),k=f.data(h,j);if(j=j[d]){var m=j.events;k=k[d]=f.extend({},j);if(m){delete k.handle;k.events={};for(var n in m){d=0;for(j=m[n].length;d<j;d++)f.event.add(h,n+(m[n][d].namespace?".":"")+m[n][d].namespace,m[n][d],m[n][d].data)}}}}}function F(c,h,d){h=h||0;if(f.isFunction(h))return f.grep(c,function(k,m){return!!h.call(k,m,k)===d});if(h.nodeType)return f.grep(c,function(k){return k===h===d});if(typeof h=="string"){var j=f.grep(c,
function(k){return k.nodeType===1});if(Fa.test(h))return f.filter(h,j,!d);h=f.filter(h,j)}return f.grep(c,function(k){return f.inArray(k,h)>=0===d})}function ba(c,h){return(c&&c!=="*"?c+".":"")+h.replace(cb,"`").replace(gb,"&")}function ga(c){var h,d,j,k,m,n,q,s,u,y,D,P=[];k=[];m=f._data(this,"events");if(!(c.liveFired===this||!m||!m.live||c.target.disabled||c.button&&c.type==="click")){c.namespace&&(D=new RegExp("(^|\\.)"+c.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)"));c.liveFired=this;
var Y=m.live.slice(0);for(q=0;q<Y.length;q++){m=Y[q];m.origType.replace(ua,"")===c.type?k.push(m.selector):Y.splice(q--,1)}k=f(c.target).closest(k,c.currentTarget);s=0;for(u=k.length;s<u;s++){y=k[s];for(q=0;q<Y.length;q++){m=Y[q];if(y.selector===m.selector&&(!D||D.test(m.namespace))&&!y.elem.disabled){n=y.elem;j=null;if(m.preType==="mouseenter"||m.preType==="mouseleave"){c.type=m.preType;(j=f(c.relatedTarget).closest(m.selector)[0])&&f.contains(n,j)&&(j=n)}(!j||j!==n)&&P.push({elem:n,handleObj:m,
level:y.level})}}}s=0;for(u=P.length;s<u;s++){k=P[s];if(d&&k.level>d)break;c.currentTarget=k.elem;c.data=k.handleObj.data;c.handleObj=k.handleObj;D=k.handleObj.origHandler.apply(k.elem,arguments);if(D===false||c.isPropagationStopped()){d=k.level;D===false&&(h=false);if(c.isImmediatePropagationStopped())break}}return h}}function la(c,h,d){var j=f.extend({},d[0]);j.type=c;j.originalEvent={};j.liveFired=a;f.event.handle.call(h,j);j.isDefaultPrevented()&&d[0].preventDefault()}function na(){return true}
function oa(){return false}function Ca(c,h,d){var j=h+"defer",k=h+"queue",m=h+"mark",n=f.data(c,j,a,true);n&&(d==="queue"||!f.data(c,k,a,true))&&(d==="mark"||!f.data(c,m,a,true))&&setTimeout(function(){!f.data(c,k,a,true)&&!f.data(c,m,a,true)&&(f.removeData(c,j,true),n.resolve())},0)}function Ua(c){for(var h in c)if(h!=="toJSON")return false;return true}function Va(c,h,d){if(d===a&&c.nodeType===1){d="data-"+h.replace(S,"$1-$2").toLowerCase();d=c.getAttribute(d);if(typeof d=="string"){try{d=d==="true"?
true:d==="false"?false:d==="null"?null:f.isNaN(d)?L.test(d)?f.parseJSON(d):d:parseFloat(d)}catch(j){}f.data(c,h,d)}else d=a}return d}var V=b.document,Q=b.navigator,U=b.location,f=function(){function c(){if(!h.isReady){try{V.documentElement.doScroll("left")}catch(x){setTimeout(c,1);return}h.ready()}}var h=function(x,J){return new h.fn.init(x,J,k)},d=b.jQuery,j=b.$,k,m=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,n=/\S/,q=/^\s+/,s=/\s+$/,u=/\d/,y=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,D=/^[\],:{}\s]*$/,P=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
Y=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ca=/(?:^|:|,)(?:\s*\[)+/g,Da=/(webkit)[ \/]([\w.]+)/,ra=/(opera)(?:.*version)?[ \/]([\w.]+)/,va=/(msie) ([\w.]+)/,wa=/(mozilla)(?:.*? rv:([\w.]+))?/,r=/-([a-z])/ig,v=function(x,J){return J.toUpperCase()},G=Q.userAgent,H,E,I=Object.prototype.toString,R=Object.prototype.hasOwnProperty,X=Array.prototype.push,ja=Array.prototype.slice,Ga=String.prototype.trim,Ea=Array.prototype.indexOf,Oa={};h.fn=h.prototype={constructor:h,init:function(x,
J,Z){var W,ha;if(!x)return this;if(x.nodeType){this.context=this[0]=x;this.length=1;return this}if(x==="body"&&!J&&V.body){this.context=V;this[0]=V.body;this.selector=x;this.length=1;return this}if(typeof x=="string"){x.charAt(0)!=="<"||x.charAt(x.length-1)!==">"||x.length<3?(W=m.exec(x)):(W=[null,x,null]);if(W&&(W[1]||!J)){if(W[1]){ha=(J=J instanceof h?J[0]:J)?J.ownerDocument||J:V;(Z=y.exec(x))?h.isPlainObject(J)?(x=[V.createElement(Z[1])],h.fn.attr.call(x,J,true)):(x=[ha.createElement(Z[1])]):(Z=
h.buildFragment([W[1]],[ha]),x=(Z.cacheable?h.clone(Z.fragment):Z.fragment).childNodes);return h.merge(this,x)}if((J=V.getElementById(W[2]))&&J.parentNode){if(J.id!==W[2])return Z.find(x);this.length=1;this[0]=J}this.context=V;this.selector=x;return this}return!J||J.jquery?(J||Z).find(x):this.constructor(J).find(x)}if(h.isFunction(x))return Z.ready(x);x.selector!==a&&(this.selector=x.selector,this.context=x.context);return h.makeArray(x,this)},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},
toArray:function(){return ja.call(this,0)},get:function(x){return x==null?this.toArray():x<0?this[this.length+x]:this[x]},pushStack:function(x,J,Z){var W=this.constructor();h.isArray(x)?X.apply(W,x):h.merge(W,x);W.prevObject=this;W.context=this.context;J==="find"?(W.selector=this.selector+(this.selector?" ":"")+Z):J&&(W.selector=this.selector+"."+J+"("+Z+")");return W},each:function(x,J){return h.each(this,x,J)},ready:function(x){h.bindReady();H.done(x);return this},eq:function(x){return x===-1?this.slice(x):
this.slice(x,+x+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(ja.apply(this,arguments),"slice",ja.call(arguments).join(","))},map:function(x){return this.pushStack(h.map(this,function(J,Z){return x.call(J,Z,J)}))},end:function(){return this.prevObject||this.constructor(null)},push:X,sort:[].sort,splice:[].splice};h.fn.init.prototype=h.fn;h.extend=h.fn.extend=function(){var x,J,Z,W,ha,sa,xa=arguments[0]||{},Aa=1,vb=arguments.length,
wb=false;typeof xa=="boolean"&&(wb=xa,xa=arguments[1]||{},Aa=2);typeof xa!="object"&&!h.isFunction(xa)&&(xa={});for(vb===Aa&&(xa=this,--Aa);Aa<vb;Aa++)if((x=arguments[Aa])!=null)for(J in x){Z=xa[J];W=x[J];if(xa!==W)wb&&W&&(h.isPlainObject(W)||(ha=h.isArray(W)))?(ha?(ha=false,sa=Z&&h.isArray(Z)?Z:[]):(sa=Z&&h.isPlainObject(Z)?Z:{}),xa[J]=h.extend(wb,sa,W)):W!==a&&(xa[J]=W)}return xa};h.extend({noConflict:function(x){b.$===h&&(b.$=j);x&&b.jQuery===h&&(b.jQuery=d);return h},isReady:false,readyWait:1,
holdReady:function(x){x?h.readyWait++:h.ready(true)},ready:function(x){if(x===true&&!--h.readyWait||x!==true&&!h.isReady){if(!V.body)return setTimeout(h.ready,1);h.isReady=true;if(!(x!==true&&--h.readyWait>0)){H.resolveWith(V,[h]);h.fn.trigger&&h(V).trigger("ready").unbind("ready")}}},bindReady:function(){if(!H){H=h._Deferred();if(V.readyState==="complete")return setTimeout(h.ready,1);if(V.addEventListener){V.addEventListener("DOMContentLoaded",E,false);b.addEventListener("load",h.ready,false)}else if(V.attachEvent){V.attachEvent("onreadystatechange",
E);b.attachEvent("onload",h.ready);var x=false;try{x=b.frameElement==null}catch(J){}V.documentElement.doScroll&&x&&c()}}},isFunction:function(x){return h.type(x)==="function"},isArray:Array.isArray||function(x){return h.type(x)==="array"},isWindow:function(x){return x&&typeof x=="object"&&"setInterval"in x},isNaN:function(x){return x==null||!u.test(x)||isNaN(x)},type:function(x){return x==null?String(x):Oa[I.call(x)]||"object"},isPlainObject:function(x){if(!x||h.type(x)!=="object"||x.nodeType||h.isWindow(x))return false;
if(x.constructor&&!R.call(x,"constructor")&&!R.call(x.constructor.prototype,"isPrototypeOf"))return false;var J;for(J in x);return J===a||R.call(x,J)},isEmptyObject:function(x){for(var J in x)return false;return true},error:function(x){throw x;},parseJSON:function(x){if(typeof x!="string"||!x)return null;x=h.trim(x);if(b.JSON&&b.JSON.parse)return b.JSON.parse(x);if(D.test(x.replace(P,"@").replace(Y,"]").replace(ca,"")))return(new Function("return "+x))();h.error("Invalid JSON: "+x)},parseXML:function(x,
J,Z){b.DOMParser?(Z=new DOMParser,J=Z.parseFromString(x,"text/xml")):(J=new ActiveXObject("Microsoft.XMLDOM"),J.async="false",J.loadXML(x));Z=J.documentElement;(!Z||!Z.nodeName||Z.nodeName==="parsererror")&&h.error("Invalid XML: "+x);return J},noop:function(){},globalEval:function(x){x&&n.test(x)&&(b.execScript||function(J){b.eval.call(b,J)})(x)},camelCase:function(x){return x.replace(r,v)},nodeName:function(x,J){return x.nodeName&&x.nodeName.toUpperCase()===J.toUpperCase()},each:function(x,J,Z){var W,
ha=0,sa=x.length,xa=sa===a||h.isFunction(x);if(Z)if(xa)for(W in x){if(J.apply(x[W],Z)===false)break}else for(;ha<sa;){if(J.apply(x[ha++],Z)===false)break}else if(xa)for(W in x){if(J.call(x[W],W,x[W])===false)break}else for(;ha<sa;)if(J.call(x[ha],ha,x[ha++])===false)break;return x},trim:Ga?function(x){return x==null?"":Ga.call(x)}:function(x){return x==null?"":(x+"").replace(q,"").replace(s,"")},makeArray:function(x,J){var Z=J||[];if(x!=null){var W=h.type(x);x.length==null||W==="string"||W==="function"||
W==="regexp"||h.isWindow(x)?X.call(Z,x):h.merge(Z,x)}return Z},inArray:function(x,J){if(Ea)return Ea.call(J,x);for(var Z=0,W=J.length;Z<W;Z++)if(J[Z]===x)return Z;return-1},merge:function(x,J){var Z=x.length,W=0;if(typeof J.length=="number")for(var ha=J.length;W<ha;W++)x[Z++]=J[W];else for(;J[W]!==a;)x[Z++]=J[W++];x.length=Z;return x},grep:function(x,J,Z){var W=[],ha;Z=!!Z;for(var sa=0,xa=x.length;sa<xa;sa++){ha=!!J(x[sa],sa);Z!==ha&&W.push(x[sa])}return W},map:function(x,J,Z){var W,ha,sa=[],xa=0,
Aa=x.length;if(x instanceof h||Aa!==a&&typeof Aa=="number"&&(Aa>0&&x[0]&&x[Aa-1]||Aa===0||h.isArray(x)))for(;xa<Aa;xa++){W=J(x[xa],xa,Z);W!=null&&(sa[sa.length]=W)}else for(ha in x){W=J(x[ha],ha,Z);W!=null&&(sa[sa.length]=W)}return sa.concat.apply([],sa)},guid:1,proxy:function(x,J){if(typeof J=="string"){var Z=x[J];J=x;x=Z}if(!h.isFunction(x))return a;var W=ja.call(arguments,2);Z=function(){return x.apply(J,W.concat(ja.call(arguments)))};Z.guid=x.guid=x.guid||Z.guid||h.guid++;return Z},access:function(x,
J,Z,W,ha,sa){var xa=x.length;if(typeof J=="object"){for(var Aa in J)h.access(x,Aa,J[Aa],W,ha,Z);return x}if(Z!==a){W=!sa&&W&&h.isFunction(Z);for(Aa=0;Aa<xa;Aa++)ha(x[Aa],J,W?Z.call(x[Aa],Aa,ha(x[Aa],J)):Z,sa);return x}return xa?ha(x[0],J):a},now:function(){return(new Date).getTime()},uaMatch:function(x){x=x.toLowerCase();x=Da.exec(x)||ra.exec(x)||va.exec(x)||x.indexOf("compatible")<0&&wa.exec(x)||[];return{browser:x[1]||"",version:x[2]||"0"}},sub:function(){function x(Z,W){return new x.fn.init(Z,
W)}h.extend(true,x,this);x.superclass=this;x.fn=x.prototype=this();x.fn.constructor=x;x.sub=this.sub;x.fn.init=function(Z,W){W&&W instanceof h&&!(W instanceof x)&&(W=x(W));return h.fn.init.call(this,Z,W,J)};x.fn.init.prototype=x.fn;var J=x(V);return x},browser:{}});h.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(x,J){Oa["[object "+J+"]"]=J.toLowerCase()});G=h.uaMatch(G);G.browser&&(h.browser[G.browser]=true,h.browser.version=G.version);h.browser.webkit&&(h.browser.safari=
true);n.test("\u00a0")&&(q=/^[\s\xA0]+/,s=/[\s\xA0]+$/);k=h(V);V.addEventListener?(E=function(){V.removeEventListener("DOMContentLoaded",E,false);h.ready()}):V.attachEvent&&(E=function(){V.readyState==="complete"&&(V.detachEvent("onreadystatechange",E),h.ready())});return h}(),A="done fail isResolved isRejected promise then always pipe".split(" "),M=[].slice;f.extend({_Deferred:function(){var c=[],h,d,j,k={done:function(){if(!j){var m=arguments,n,q,s,u,y;h&&(y=h,h=0);n=0;for(q=m.length;n<q;n++){s=
m[n];u=f.type(s);u==="array"?k.done.apply(k,s):u==="function"&&c.push(s)}y&&k.resolveWith(y[0],y[1])}return this},resolveWith:function(m,n){if(!j&&!h&&!d){n=n||[];d=1;try{for(;c[0];)c.shift().apply(m,n)}finally{h=[m,n];d=0}}return this},resolve:function(){k.resolveWith(this,arguments);return this},isResolved:function(){return!!d||!!h},cancel:function(){j=1;c=[];return this}};return k},Deferred:function(c){var h=f._Deferred(),d=f._Deferred(),j;f.extend(h,{then:function(k,m){h.done(k).fail(m);return this},
always:function(){return h.done.apply(h,arguments).fail.apply(this,arguments)},fail:d.done,rejectWith:d.resolveWith,reject:d.resolve,isRejected:d.isResolved,pipe:function(k,m){return f.Deferred(function(n){f.each({done:[k,"resolve"],fail:[m,"reject"]},function(q,s){var u=s[0],y=s[1],D;f.isFunction(u)?h[q](function(){(D=u.apply(this,arguments))&&f.isFunction(D.promise)?D.promise().then(n.resolve,n.reject):n[y](D)}):h[q](n[y])})}).promise()},promise:function(k){if(k==null){if(j)return j;j=k={}}for(var m=
A.length;m--;)k[A[m]]=h[A[m]];return k}});h.done(d.cancel).fail(h.cancel);delete h.cancel;c&&c.call(h,h);return h},when:function(c){function h(q){return function(s){d[q]=arguments.length>1?M.call(arguments,0):s;--m||n.resolveWith(n,M.call(d,0))}}var d=arguments,j=0,k=d.length,m=k,n=k<=1&&c&&f.isFunction(c.promise)?c:f.Deferred();if(k>1){for(;j<k;j++)d[j]&&f.isFunction(d[j].promise)?d[j].promise().then(h(j),n.reject):--m;m||n.resolveWith(n,d)}else n!==c&&n.resolveWith(n,k?[c]:[]);return n.promise()}});
f.support=function(){var c=V.createElement("div"),h=V.documentElement,d,j,k,m,n,q,s;c.setAttribute("className","t");c.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";d=c.getElementsByTagName("*");j=c.getElementsByTagName("a")[0];if(!d||!d.length||!j)return{};k=V.createElement("select");m=k.appendChild(V.createElement("option"));d=c.getElementsByTagName("input")[0];q={leadingWhitespace:c.firstChild.nodeType===3,tbody:!c.getElementsByTagName("tbody").length,
htmlSerialize:!!c.getElementsByTagName("link").length,style:/top/.test(j.getAttribute("style")),hrefNormalized:j.getAttribute("href")==="/a",opacity:/^0.55$/.test(j.style.opacity),cssFloat:!!j.style.cssFloat,checkOn:d.value==="on",optSelected:m.selected,getSetAttribute:c.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};d.checked=true;q.noCloneChecked=d.cloneNode(true).checked;
k.disabled=true;q.optDisabled=!m.disabled;try{delete c.test}catch(u){q.deleteExpando=false}!c.addEventListener&&c.attachEvent&&c.fireEvent&&(c.attachEvent("onclick",function(){q.noCloneEvent=false}),c.cloneNode(true).fireEvent("onclick"));d=V.createElement("input");d.value="t";d.setAttribute("type","radio");q.radioValue=d.value==="t";d.setAttribute("checked","checked");c.appendChild(d);j=V.createDocumentFragment();j.appendChild(c.firstChild);q.checkClone=j.cloneNode(true).cloneNode(true).lastChild.checked;
c.innerHTML="";c.style.width=c.style.paddingLeft="1px";k=V.getElementsByTagName("body")[0];j=V.createElement(k?"div":"body");m={visibility:"hidden",width:0,height:0,border:0,margin:0};k&&f.extend(m,{position:"absolute",left:-1000,top:-1000});for(s in m)j.style[s]=m[s];j.appendChild(c);h=k||h;h.insertBefore(j,h.firstChild);q.appendChecked=d.checked;q.boxModel=c.offsetWidth===2;"zoom"in c.style&&(c.style.display="inline",c.style.zoom=1,q.inlineBlockNeedsLayout=c.offsetWidth===2,c.style.display="",c.innerHTML=
"<div style='width:4px;'></div>",q.shrinkWrapBlocks=c.offsetWidth!==2);c.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";k=c.getElementsByTagName("td");d=k[0].offsetHeight===0;k[0].style.display="";k[1].style.display="none";q.reliableHiddenOffsets=d&&k[0].offsetHeight===0;c.innerHTML="";V.defaultView&&V.defaultView.getComputedStyle&&(n=V.createElement("div"),n.style.width="0",n.style.marginRight="0",c.appendChild(n),q.reliableMarginRight=(parseInt((V.defaultView.getComputedStyle(n,
null)||{marginRight:0}).marginRight,10)||0)===0);j.innerHTML="";h.removeChild(j);if(c.attachEvent)for(s in{submit:1,change:1,focusin:1}){n="on"+s;(d=n in c)||(c.setAttribute(n,"return;"),d=typeof c[n]=="function");q[s+"Bubbles"]=d}j=j=k=m=k=n=c=d=null;return q}();f.boxModel=f.support.boxModel;var L=/^(?:\{.*\}|\[.*\])$/,S=/([a-z])([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
applet:true},hasData:function(c){c=c.nodeType?f.cache[c[f.expando]]:c[f.expando];return!!c&&!Ua(c)},data:function(c,h,d,j){if(f.acceptData(c)){var k=f.expando,m=typeof h=="string",n=c.nodeType,q=n?f.cache:c,s=n?c[f.expando]:c[f.expando]&&f.expando;if(!((!s||j&&s&&!q[s][k])&&m&&d===a)){s||(n?(c[f.expando]=s=++f.uuid):(s=f.expando));q[s]||(q[s]={},n||(q[s].toJSON=f.noop));if(typeof h=="object"||typeof h=="function")j?(q[s][k]=f.extend(q[s][k],h)):(q[s]=f.extend(q[s],h));c=q[s];j&&(c[k]||(c[k]={}),c=
c[k]);d!==a&&(c[f.camelCase(h)]=d);if(h==="events"&&!c[h])return c[k]&&c[k].events;return m?c[f.camelCase(h)]||c[h]:c}}},removeData:function(c,h,d){if(f.acceptData(c)){var j=f.expando,k=c.nodeType,m=k?f.cache:c,n=k?c[f.expando]:f.expando;if(m[n]){if(h){var q=d?m[n][j]:m[n];if(q){delete q[h];if(!Ua(q))return}}if(d){delete m[n][j];if(!Ua(m[n]))return}h=m[n][j];f.support.deleteExpando||m!=b?delete m[n]:(m[n]=null);h?(m[n]={},k||(m[n].toJSON=f.noop),m[n][j]=h):k&&(f.support.deleteExpando?delete c[f.expando]:
c.removeAttribute?c.removeAttribute(f.expando):(c[f.expando]=null))}}},_data:function(c,h,d){return f.data(c,h,d,true)},acceptData:function(c){if(c.nodeName){var h=f.noData[c.nodeName.toLowerCase()];if(h)return h!==true&&c.getAttribute("classid")===h}return true}});f.fn.extend({data:function(c,h){var d=null;if(typeof c=="undefined"){if(this.length){d=f.data(this[0]);if(this[0].nodeType===1)for(var j=this[0].attributes,k,m=0,n=j.length;m<n;m++){k=j[m].name;k.indexOf("data-")===0&&(k=f.camelCase(k.substring(5)),
Va(this[0],k,d[k]))}}return d}if(typeof c=="object")return this.each(function(){f.data(this,c)});var q=c.split(".");q[1]=q[1]?"."+q[1]:"";if(h===a){d=this.triggerHandler("getData"+q[1]+"!",[q[0]]);d===a&&this.length&&(d=f.data(this[0],c),d=Va(this[0],c,d));return d===a&&q[1]?this.data(q[0]):d}return this.each(function(){var s=f(this),u=[q[0],h];s.triggerHandler("setData"+q[1]+"!",u);f.data(this,c,h);s.triggerHandler("changeData"+q[1]+"!",u)})},removeData:function(c){return this.each(function(){f.removeData(this,
c)})}});f.extend({_mark:function(c,h){c&&(h=(h||"fx")+"mark",f.data(c,h,(f.data(c,h,a,true)||0)+1,true))},_unmark:function(c,h,d){c!==true&&(d=h,h=c,c=false);if(h){d=d||"fx";var j=d+"mark";(c=c?0:(f.data(h,j,a,true)||1)-1)?f.data(h,j,c,true):(f.removeData(h,j,true),Ca(h,d,"mark"))}},queue:function(c,h,d){if(c){h=(h||"fx")+"queue";var j=f.data(c,h,a,true);d&&(!j||f.isArray(d)?(j=f.data(c,h,f.makeArray(d),true)):j.push(d));return j||[]}},dequeue:function(c,h){h=h||"fx";var d=f.queue(c,h),j=d.shift();
j==="inprogress"&&(j=d.shift());j&&(h==="fx"&&d.unshift("inprogress"),j.call(c,function(){f.dequeue(c,h)}));d.length||(f.removeData(c,h+"queue",true),Ca(c,h,"queue"))}});f.fn.extend({queue:function(c,h){typeof c!="string"&&(h=c,c="fx");if(h===a)return f.queue(this[0],c);return this.each(function(){var d=f.queue(this,c,h);c==="fx"&&d[0]!=="inprogress"&&f.dequeue(this,c)})},dequeue:function(c){return this.each(function(){f.dequeue(this,c)})},delay:function(c,h){c=f.fx?f.fx.speeds[c]||c:c;h=h||"fx";
return this.queue(h,function(){var d=this;setTimeout(function(){f.dequeue(d,h)},c)})},clearQueue:function(c){return this.queue(c||"fx",[])},promise:function(c,h){function d(){--n||j.resolveWith(k,[k])}typeof c!="string"&&(h=c,c=a);c=c||"fx";for(var j=f.Deferred(),k=this,m=k.length,n=1,q=c+"defer",s=c+"queue",u=c+"mark",y;m--;)if(y=f.data(k[m],q,a,true)||(f.data(k[m],s,a,true)||f.data(k[m],u,a,true))&&f.data(k[m],q,f._Deferred(),true)){n++;y.done(d)}d();return j.promise()}});var ea=/[\n\t\r]/g,da=
/\s+/,pa=/\r/g,Ha=/^(?:button|input)$/i,La=/^(?:button|input|object|select|textarea)$/i,Ia=/^a(?:rea)?$/i,Ma=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Wa=/\:|^on/,ta,Ja;f.fn.extend({attr:function(c,h){return f.access(this,c,h,true,f.attr)},removeAttr:function(c){return this.each(function(){f.removeAttr(this,c)})},prop:function(c,h){return f.access(this,c,h,true,f.prop)},removeProp:function(c){c=f.propFix[c]||c;return this.each(function(){try{this[c]=
a;delete this[c]}catch(h){}})},addClass:function(c){var h,d,j,k,m,n,q;if(f.isFunction(c))return this.each(function(s){f(this).addClass(c.call(this,s,this.className))});if(c&&typeof c=="string"){h=c.split(da);d=0;for(j=this.length;d<j;d++){k=this[d];if(k.nodeType===1)if(!k.className&&h.length===1)k.className=c;else{m=" "+k.className+" ";n=0;for(q=h.length;n<q;n++)~m.indexOf(" "+h[n]+" ")||(m+=h[n]+" ");k.className=f.trim(m)}}}return this},removeClass:function(c){var h,d,j,k,m,n,q;if(f.isFunction(c))return this.each(function(s){f(this).removeClass(c.call(this,
s,this.className))});if(c&&typeof c=="string"||c===a){h=(c||"").split(da);d=0;for(j=this.length;d<j;d++){k=this[d];if(k.nodeType===1&&k.className)if(c){m=(" "+k.className+" ").replace(ea," ");n=0;for(q=h.length;n<q;n++)m=m.replace(" "+h[n]+" "," ");k.className=f.trim(m)}else k.className=""}}return this},toggleClass:function(c,h){var d=typeof c,j=typeof h=="boolean";if(f.isFunction(c))return this.each(function(k){f(this).toggleClass(c.call(this,k,this.className,h),h)});return this.each(function(){if(d===
"string")for(var k,m=0,n=f(this),q=h,s=c.split(da);k=s[m++];){q=j?q:!n.hasClass(k);n[q?"addClass":"removeClass"](k)}else if(d==="undefined"||d==="boolean"){this.className&&f._data(this,"__className__",this.className);this.className=this.className||c===false?"":f._data(this,"__className__")||""}})},hasClass:function(c){for(var h=0,d=this.length;h<d;h++)if((" "+this[h].className+" ").replace(ea," ").indexOf(" "+c+" ")>-1)return true;return false},val:function(c){var h,d,j=this[0];if(!arguments.length){if(j){if((h=
f.valHooks[j.nodeName.toLowerCase()]||f.valHooks[j.type])&&"get"in h&&(d=h.get(j,"value"))!==a)return d;d=j.value;return typeof d=="string"?d.replace(pa,""):d==null?"":d}return a}var k=f.isFunction(c);return this.each(function(m){var n=f(this),q;if(this.nodeType===1){k?(q=c.call(this,m,n.val())):(q=c);q==null?(q=""):typeof q=="number"?(q+=""):f.isArray(q)&&(q=f.map(q,function(s){return s==null?"":s+""}));h=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!h||!("set"in h)||h.set(this,
q,"value")===a)this.value=q}})}});f.extend({valHooks:{option:{get:function(c){var h=c.attributes.value;return!h||h.specified?c.value:c.text}},select:{get:function(c){var h,d=c.selectedIndex,j=[],k=c.options;c=c.type==="select-one";if(d<0)return null;for(var m=c?d:0,n=c?d+1:k.length;m<n;m++){h=k[m];if(h.selected&&(f.support.optDisabled?!h.disabled:h.getAttribute("disabled")===null)&&(!h.parentNode.disabled||!f.nodeName(h.parentNode,"optgroup"))){h=f(h).val();if(c)return h;j.push(h)}}if(c&&!j.length&&
k.length)return f(k[d]).val();return j},set:function(c,h){var d=f.makeArray(h);f(c).find("option").each(function(){this.selected=f.inArray(f(this).val(),d)>=0});d.length||(c.selectedIndex=-1);return d}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attrFix:{tabindex:"tabIndex"},attr:function(c,h,d,j){var k=c.nodeType;if(!c||k===3||k===8||k===2)return a;if(j&&h in f.attrFn)return f(c)[h](d);if(!("getAttribute"in c))return f.prop(c,h,d);var m,n;(j=k!==
1||!f.isXMLDoc(c))&&(h=f.attrFix[h]||h,n=f.attrHooks[h],n||(Ma.test(h)?(n=Ja):ta&&h!=="className"&&(f.nodeName(c,"form")||Wa.test(h))&&(n=ta)));if(d!==a){if(d===null){f.removeAttr(c,h);return a}if(n&&"set"in n&&j&&(m=n.set(c,d,h))!==a)return m;c.setAttribute(h,""+d);return d}if(n&&"get"in n&&j&&(m=n.get(c,h))!==null)return m;m=c.getAttribute(h);return m===null?a:m},removeAttr:function(c,h){var d;c.nodeType===1&&(h=f.attrFix[h]||h,f.support.getSetAttribute?c.removeAttribute(h):(f.attr(c,h,""),c.removeAttributeNode(c.getAttributeNode(h))),
Ma.test(h)&&(d=f.propFix[h]||h)in c&&(c[d]=false))},attrHooks:{type:{set:function(c,h){if(Ha.test(c.nodeName)&&c.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&h==="radio"&&f.nodeName(c,"input")){var d=c.value;c.setAttribute("type",h);d&&(c.value=d);return h}}},tabIndex:{get:function(c){var h=c.getAttributeNode("tabIndex");return h&&h.specified?parseInt(h.value,10):La.test(c.nodeName)||Ia.test(c.nodeName)&&c.href?0:a}},value:{get:function(c,h){if(ta&&f.nodeName(c,
"button"))return ta.get(c,h);return h in c?c.value:null},set:function(c,h,d){if(ta&&f.nodeName(c,"button"))return ta.set(c,h,d);c.value=h}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(c,h,d){var j=c.nodeType;if(!c||j===3||j===8||j===2)return a;var k,m;(j!==1||
!f.isXMLDoc(c))&&(h=f.propFix[h]||h,m=f.propHooks[h]);return d!==a?m&&"set"in m&&(k=m.set(c,d,h))!==a?k:(c[h]=d):m&&"get"in m&&(k=m.get(c,h))!==a?k:c[h]},propHooks:{}});Ja={get:function(c,h){return f.prop(c,h)?h.toLowerCase():a},set:function(c,h,d){var j;h===false?f.removeAttr(c,d):(j=f.propFix[d]||d,j in c&&(c[j]=true),c.setAttribute(d,d.toLowerCase()));return d}};f.support.getSetAttribute||(f.attrFix=f.propFix,ta=f.attrHooks.name=f.attrHooks.title=f.valHooks.button={get:function(c,h){var d;return(d=
c.getAttributeNode(h))&&d.nodeValue!==""?d.nodeValue:a},set:function(c,h,d){if(c=c.getAttributeNode(d))return c.nodeValue=h}},f.each(["width","height"],function(c,h){f.attrHooks[h]=f.extend(f.attrHooks[h],{set:function(d,j){if(j===""){d.setAttribute(h,"auto");return j}}})}));f.support.hrefNormalized||f.each(["href","src","width","height"],function(c,h){f.attrHooks[h]=f.extend(f.attrHooks[h],{get:function(d){d=d.getAttribute(h,2);return d===null?a:d}})});f.support.style||(f.attrHooks.style={get:function(c){return c.style.cssText.toLowerCase()||
a},set:function(c,h){return c.style.cssText=""+h}});f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(){}}));f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(c){return c.getAttribute("value")===null?"on":c.value}}});f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(c,h){if(f.isArray(h))return c.checked=f.inArray(f(c).val(),h)>=0}})});var ua=/\.(.*)$/,ya=/^(?:textarea|input|select)$/i,
cb=/\./g,gb=/ /g,kb=/[^\w\s.|`]/g,Fb=function(c){return c.replace(kb,"\\$&")};f.event={add:function(c,h,d,j){if(c.nodeType!==3&&c.nodeType!==8){if(d===false)d=oa;else if(!d)return;var k,m;d.handler&&(k=d,d=k.handler);d.guid||(d.guid=f.guid++);if(m=f._data(c)){var n=m.events,q=m.handle;n||(m.events=n={});q||(m.handle=q=function(Y){return typeof f!="undefined"&&(!Y||f.event.triggered!==Y.type)?f.event.handle.apply(q.elem,arguments):a});q.elem=c;h=h.split(" ");for(var s,u=0,y;s=h[u++];){m=k?f.extend({},
k):{handler:d,data:j};s.indexOf(".")>-1?(y=s.split("."),s=y.shift(),m.namespace=y.slice(0).sort().join(".")):(y=[],m.namespace="");m.type=s;m.guid||(m.guid=d.guid);var D=n[s],P=f.event.special[s]||{};if(!D){D=n[s]=[];if(!P.setup||P.setup.call(c,j,y,q)===false)c.addEventListener?c.addEventListener(s,q,false):c.attachEvent&&c.attachEvent("on"+s,q)}P.add&&(P.add.call(c,m),m.handler.guid||(m.handler.guid=d.guid));D.push(m);f.event.global[s]=true}c=null}}},global:{},remove:function(c,h,d,j){if(c.nodeType!==
3&&c.nodeType!==8){d===false&&(d=oa);var k,m,n=0,q,s,u,y,D,P,Y=f.hasData(c)&&f._data(c),ca=Y&&Y.events;if(Y&&ca){h&&h.type&&(d=h.handler,h=h.type);if(!h||typeof h=="string"&&h.charAt(0)===".")for(k in ca)f.event.remove(c,k+(h||""));else{for(h=h.split(" ");k=h[n++];){y=k;q=k.indexOf(".")<0;s=[];q||(s=k.split("."),k=s.shift(),u=new RegExp("(^|\\.)"+f.map(s.slice(0).sort(),Fb).join("\\.(?:.*\\.)?")+"(\\.|$)"));if(D=ca[k])if(d){y=f.event.special[k]||{};for(m=j||0;m<D.length;m++){P=D[m];if(d.guid===P.guid){if(q||
u.test(P.namespace)){j==null&&D.splice(m--,1);y.remove&&y.remove.call(c,P)}if(j!=null)break}}if(D.length===0||j!=null&&D.length===1){(!y.teardown||y.teardown.call(c,s)===false)&&f.removeEvent(c,k,Y.handle);delete ca[k]}}else for(m=0;m<D.length;m++){P=D[m];if(q||u.test(P.namespace)){f.event.remove(c,y,P.handler,m);D.splice(m--,1)}}}if(f.isEmptyObject(ca)){(h=Y.handle)&&(h.elem=null);delete Y.events;delete Y.handle;f.isEmptyObject(Y)&&f.removeData(c,a,true)}}}}},customEvent:{getData:true,setData:true,
changeData:true},trigger:function(c,h,d,j){var k=c.type||c,m=[],n;k.indexOf("!")>=0&&(k=k.slice(0,-1),n=true);k.indexOf(".")>=0&&(m=k.split("."),k=m.shift(),m.sort());if(d&&!f.event.customEvent[k]||f.event.global[k]){c=typeof c=="object"?c[f.expando]?c:new f.Event(k,c):new f.Event(k);c.type=k;c.exclusive=n;c.namespace=m.join(".");c.namespace_re=new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.)?")+"(\\.|$)");if(j||!d){c.preventDefault();c.stopPropagation()}if(d){if(!(d.nodeType===3||d.nodeType===8)){c.result=
a;c.target=d;h=h!=null?f.makeArray(h):[];h.unshift(c);m=d;j=k.indexOf(":")<0?"on"+k:"";do{n=f._data(m,"handle");c.currentTarget=m;n&&n.apply(m,h);j&&f.acceptData(m)&&m[j]&&m[j].apply(m,h)===false&&(c.result=false,c.preventDefault());m=m.parentNode||m.ownerDocument||m===c.target.ownerDocument&&b}while(m&&!c.isPropagationStopped());if(!c.isDefaultPrevented()){var q;m=f.event.special[k]||{};if((!m._default||m._default.call(d.ownerDocument,c)===false)&&(k!=="click"||!f.nodeName(d,"a"))&&f.acceptData(d)){try{j&&
d[k]&&(q=d[j],q&&(d[j]=null),f.event.triggered=k,d[k]())}catch(s){}q&&(d[j]=q);f.event.triggered=a}}return c.result}}else f.each(f.cache,function(){var u=this[f.expando];u&&u.events&&u.events[k]&&f.event.trigger(c,h,u.handle.elem)})}},handle:function(c){c=f.event.fix(c||b.event);var h=((f._data(this,"events")||{})[c.type]||[]).slice(0),d=!c.exclusive&&!c.namespace,j=Array.prototype.slice.call(arguments,0);j[0]=c;c.currentTarget=this;for(var k=0,m=h.length;k<m;k++){var n=h[k];if(d||c.namespace_re.test(n.namespace)){c.handler=
n.handler;c.data=n.data;c.handleObj=n;n=n.handler.apply(this,j);n!==a&&(c.result=n,n===false&&(c.preventDefault(),c.stopPropagation()));if(c.isImmediatePropagationStopped())break}}return c.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(c){if(c[f.expando])return c;var h=c;c=f.Event(h);for(var d=this.props.length,j;d;){j=this.props[--d];c[j]=h[j]}c.target||(c.target=c.srcElement||V);c.target.nodeType===3&&(c.target=c.target.parentNode);!c.relatedTarget&&c.fromElement&&(c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement);if(c.pageX==null&&c.clientX!=null){d=c.target.ownerDocument||V;h=d.documentElement;d=d.body;c.pageX=c.clientX+(h&&h.scrollLeft||d&&d.scrollLeft||0)-(h&&h.clientLeft||d&&d.clientLeft||0);
c.pageY=c.clientY+(h&&h.scrollTop||d&&d.scrollTop||0)-(h&&h.clientTop||d&&d.clientTop||0)}c.which==null&&(c.charCode!=null||c.keyCode!=null)&&(c.which=c.charCode!=null?c.charCode:c.keyCode);!c.metaKey&&c.ctrlKey&&(c.metaKey=c.ctrlKey);!c.which&&c.button!==a&&(c.which=c.button&1?1:c.button&2?3:c.button&4?2:0);return c},guid:1E8,proxy:f.proxy,special:{ready:{setup:f.bindReady,teardown:f.noop},live:{add:function(c){f.event.add(this,ba(c.origType,c.selector),f.extend({},c,{handler:ga,guid:c.handler.guid}))},
remove:function(c){f.event.remove(this,ba(c.origType,c.selector),c)}},beforeunload:{setup:function(c,h,d){f.isWindow(this)&&(this.onbeforeunload=d)},teardown:function(c,h){this.onbeforeunload===h&&(this.onbeforeunload=null)}}}};f.removeEvent=V.removeEventListener?function(c,h,d){c.removeEventListener&&c.removeEventListener(h,d,false)}:function(c,h,d){c.detachEvent&&c.detachEvent("on"+h,d)};f.Event=function(c,h){if(!this.preventDefault)return new f.Event(c,h);c&&c.type?(this.originalEvent=c,this.type=
c.type,this.isDefaultPrevented=c.defaultPrevented||c.returnValue===false||c.getPreventDefault&&c.getPreventDefault()?na:oa):(this.type=c);h&&f.extend(this,h);this.timeStamp=f.now();this[f.expando]=true};f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=na;var c=this.originalEvent;!c||(c.preventDefault?c.preventDefault():(c.returnValue=false))},stopPropagation:function(){this.isPropagationStopped=na;var c=this.originalEvent;!c||(c.stopPropagation&&c.stopPropagation(),c.cancelBubble=
true)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=na;this.stopPropagation()},isDefaultPrevented:oa,isPropagationStopped:oa,isImmediatePropagationStopped:oa};var Rb=function(c){var h=c.relatedTarget,d=false,j=c.type;c.type=c.data;h!==this&&(h&&(d=f.contains(this,h)),d||(f.event.handle.apply(this,arguments),c.type=j))},Sb=function(c){c.type=c.data;f.event.handle.apply(this,arguments)};f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(c,h){f.event.special[c]=
{setup:function(d){f.event.add(this,h,d&&d.selector?Sb:Rb,c)},teardown:function(d){f.event.remove(this,h,d&&d.selector?Sb:Rb)}}});f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return false;else{f.event.add(this,"click.specialSubmit",function(c){var h=c.target,d=h.type;(d==="submit"||d==="image")&&f(h).closest("form").length&&la("submit",this,arguments)});f.event.add(this,"keypress.specialSubmit",function(c){var h=c.target,d=h.type;(d==="text"||d==="password")&&
f(h).closest("form").length&&c.keyCode===13&&la("submit",this,arguments)})}},teardown:function(){f.event.remove(this,".specialSubmit")}});if(!f.support.changeBubbles){var lb,Gb=function(c){var h=c.type,d=c.value;h==="radio"||h==="checkbox"?(d=c.checked):h==="select-multiple"?(d=c.selectedIndex>-1?f.map(c.options,function(j){return j.selected}).join("-"):""):f.nodeName(c,"select")&&(d=c.selectedIndex);return d},Hb=function(c,h){var d=c.target,j,k;if(ya.test(d.nodeName)&&!d.readOnly){j=f._data(d,"_change_data");
k=Gb(d);(c.type!=="focusout"||d.type!=="radio")&&f._data(d,"_change_data",k);if(!(j===a||k===j))if(j!=null||k){c.type="change";c.liveFired=a;f.event.trigger(c,h,d)}}};f.event.special.change={filters:{focusout:Hb,beforedeactivate:Hb,click:function(c){var h=c.target,d=f.nodeName(h,"input")?h.type:"";(d==="radio"||d==="checkbox"||f.nodeName(h,"select"))&&Hb.call(this,c)},keydown:function(c){var h=c.target,d=f.nodeName(h,"input")?h.type:"";(c.keyCode===13&&!f.nodeName(h,"textarea")||c.keyCode===32&&(d===
"checkbox"||d==="radio")||d==="select-multiple")&&Hb.call(this,c)},beforeactivate:function(c){c=c.target;f._data(c,"_change_data",Gb(c))}},setup:function(){if(this.type==="file")return false;for(var c in lb)f.event.add(this,c+".specialChange",lb[c]);return ya.test(this.nodeName)},teardown:function(){f.event.remove(this,".specialChange");return ya.test(this.nodeName)}};lb=f.event.special.change.filters;lb.focus=lb.beforeactivate}f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(c,
h){function d(k){var m=f.event.fix(k);m.type=h;m.originalEvent={};f.event.trigger(m,null,m.target);m.isDefaultPrevented()&&k.preventDefault()}var j=0;f.event.special[h]={setup:function(){j++===0&&V.addEventListener(c,d,true)},teardown:function(){--j===0&&V.removeEventListener(c,d,true)}}});f.each(["bind","one"],function(c,h){f.fn[h]=function(d,j,k){var m;if(typeof d=="object"){for(var n in d)this[h](n,j,d[n],k);return this}if(arguments.length===2||j===false){k=j;j=a}h==="one"?(m=function(s){f(this).unbind(s,
m);return k.apply(this,arguments)},m.guid=k.guid||f.guid++):(m=k);if(d==="unload"&&h!=="one")this.one(d,j,k);else{n=0;for(var q=this.length;n<q;n++)f.event.add(this[n],d,m,j)}return this}});f.fn.extend({unbind:function(c,h){if(typeof c=="object"&&!c.preventDefault)for(var d in c)this.unbind(d,c[d]);else{d=0;for(var j=this.length;d<j;d++)f.event.remove(this[d],c,h)}return this},delegate:function(c,h,d,j){return this.live(h,d,j,c)},undelegate:function(c,h,d){return arguments.length===0?this.unbind("live"):
this.die(h,null,d,c)},trigger:function(c,h){return this.each(function(){f.event.trigger(c,h,this)})},triggerHandler:function(c,h){if(this[0])return f.event.trigger(c,h,this[0],true)},toggle:function(c){var h=arguments,d=c.guid||f.guid++,j=0,k=function(m){var n=(f.data(this,"lastToggle"+c.guid)||0)%j;f.data(this,"lastToggle"+c.guid,n+1);m.preventDefault();return h[n].apply(this,arguments)||false};for(k.guid=d;j<h.length;)h[j++].guid=d;return this.click(k)},hover:function(c,h){return this.mouseenter(c).mouseleave(h||
c)}});var rb={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};f.each(["live","die"],function(c,h){f.fn[h]=function(d,j,k,m){var n=0,q,s,u=m||this.selector,y=m?this:f(this.context);if(typeof d=="object"&&!d.preventDefault){for(q in d)y[h](q,j,d[q],u);return this}if(h==="die"&&!d&&m&&m.charAt(0)==="."){y.unbind(m);return this}if(j===false||f.isFunction(j)){k=j||oa;j=a}for(d=(d||"").split(" ");(m=d[n++])!=null;){q=ua.exec(m);s="";q&&(s=q[0],m=m.replace(ua,""));if(m==="hover")d.push("mouseenter"+
s,"mouseleave"+s);else{q=m;rb[m]?(d.push(rb[m]+s),m+=s):(m=(rb[m]||m)+s);if(h==="live"){s=0;for(var D=y.length;s<D;s++)f.event.add(y[s],"live."+ba(m,u),{data:j,selector:u,handler:k,origType:m,origHandler:k,preType:q})}else y.unbind("live."+ba(m,u),k)}}return this}});f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(c,h){f.fn[h]=function(d,
j){j==null&&(j=d,d=null);return arguments.length>0?this.bind(h,d,j):this.trigger(h)};f.attrFn&&(f.attrFn[h]=true)});(function(){function c(r,v,G,H,E,I){E=0;for(var R=H.length;E<R;E++){var X=H[E];if(X){var ja=false;for(X=X[r];X;){if(X.sizcache===G){ja=H[X.sizset];break}if(X.nodeType===1){I||(X.sizcache=G,X.sizset=E);if(typeof v!="string"){if(X===v){ja=true;break}}else if(u.filter(v,[X]).length>0){ja=X;break}}X=X[r]}H[E]=ja}}}function h(r,v,G,H,E,I){E=0;for(var R=H.length;E<R;E++){var X=H[E];if(X){var ja=
false;for(X=X[r];X;){if(X.sizcache===G){ja=H[X.sizset];break}X.nodeType===1&&!I&&(X.sizcache=G,X.sizset=E);if(X.nodeName.toLowerCase()===v){ja=X;break}X=X[r]}H[E]=ja}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,j=0,k=Object.prototype.toString,m=false,n=true,q=/\\/g,s=/\W/;[0,0].sort(function(){n=false;return 0});var u=function(r,v,G,H){G=G||[];var E=v=v||V;if(v.nodeType!==1&&v.nodeType!==9)return[];if(!r||
typeof r!="string")return G;var I,R,X,ja,Ga,Ea,Oa=true,x=u.isXML(v),J=[],Z=r;do{d.exec("");if(I=d.exec(Z)){Z=I[3];J.push(I[1]);if(I[2]){ja=I[3];break}}}while(I);if(J.length>1&&D.exec(r))if(J.length===2&&y.relative[J[0]])R=wa(J[0]+J[1],v);else for(R=y.relative[J[0]]?[v]:u(J.shift(),v);J.length;){r=J.shift();y.relative[r]&&(r+=J.shift());R=wa(r,R)}else{!H&&J.length>1&&v.nodeType===9&&!x&&y.match.ID.test(J[0])&&!y.match.ID.test(J[J.length-1])&&(Ga=u.find(J.shift(),v,x),v=Ga.expr?u.filter(Ga.expr,Ga.set)[0]:
Ga.set[0]);if(v){Ga=H?{expr:J.pop(),set:ca(H)}:u.find(J.pop(),J.length===1&&(J[0]==="~"||J[0]==="+")&&v.parentNode?v.parentNode:v,x);R=Ga.expr?u.filter(Ga.expr,Ga.set):Ga.set;for(J.length>0?(X=ca(R)):(Oa=false);J.length;){I=Ea=J.pop();y.relative[Ea]?(I=J.pop()):(Ea="");I==null&&(I=v);y.relative[Ea](X,I,x)}}else X=[]}X||(X=R);X||u.error(Ea||r);if(k.call(X)==="[object Array]")if(Oa)if(v&&v.nodeType===1)for(r=0;X[r]!=null;r++)X[r]&&(X[r]===true||X[r].nodeType===1&&u.contains(v,X[r]))&&G.push(R[r]);else for(r=
0;X[r]!=null;r++)X[r]&&X[r].nodeType===1&&G.push(R[r]);else G.push.apply(G,X);else ca(X,G);ja&&(u(ja,E,G,H),u.uniqueSort(G));return G};u.uniqueSort=function(r){if(ra){m=n;r.sort(ra);if(m)for(var v=1;v<r.length;v++)r[v]===r[v-1]&&r.splice(v--,1)}return r};u.matches=function(r,v){return u(r,null,null,v)};u.matchesSelector=function(r,v){return u(v,null,null,[r]).length>0};u.find=function(r,v,G){var H;if(!r)return[];for(var E=0,I=y.order.length;E<I;E++){var R,X=y.order[E];if(R=y.leftMatch[X].exec(r)){var ja=
R[1];R.splice(1,1);if(ja.substr(ja.length-1)!=="\\"){R[1]=(R[1]||"").replace(q,"");H=y.find[X](R,v,G);if(H!=null){r=r.replace(y.match[X],"");break}}}}H||(H=typeof v.getElementsByTagName!="undefined"?v.getElementsByTagName("*"):[]);return{set:H,expr:r}};u.filter=function(r,v,G,H){for(var E,I,R=r,X=[],ja=v,Ga=v&&v[0]&&u.isXML(v[0]);r&&v.length;){for(var Ea in y.filter)if((E=y.leftMatch[Ea].exec(r))!=null&&E[2]){var Oa,x,J=y.filter[Ea];x=E[1];I=false;E.splice(1,1);if(x.substr(x.length-1)!=="\\"){ja===
X&&(X=[]);if(y.preFilter[Ea])if(E=y.preFilter[Ea](E,ja,G,X,H,Ga)){if(E===true)continue}else I=Oa=true;if(E)for(var Z=0;(x=ja[Z])!=null;Z++)if(x){Oa=J(x,E,Z,ja);var W=H^!!Oa;G&&Oa!=null?W?(I=true):(ja[Z]=false):W&&(X.push(x),I=true)}if(Oa!==a){G||(ja=X);r=r.replace(y.match[Ea],"");if(!I)return[];break}}}if(r===R)if(I==null)u.error(r);else break;R=r}return ja};u.error=function(r){throw"Syntax error, unrecognized expression: "+r;};var y=u.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},
leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(r){return r.getAttribute("href")},type:function(r){return r.getAttribute("type")}},relative:{"+":function(r,v){var G=typeof v=="string",H=G&&!s.test(v);G=G&&!H;H&&(v=v.toLowerCase());H=0;for(var E=r.length,I;H<E;H++)if(I=r[H]){for(;(I=I.previousSibling)&&I.nodeType!==1;);r[H]=G||I&&I.nodeName.toLowerCase()===v?I||false:I===v}G&&u.filter(v,r,true)},">":function(r,v){var G,H=typeof v=="string",E=0,I=r.length;if(H&&
!s.test(v))for(v=v.toLowerCase();E<I;E++){if(G=r[E]){G=G.parentNode;r[E]=G.nodeName.toLowerCase()===v?G:false}}else{for(;E<I;E++)(G=r[E])&&(r[E]=H?G.parentNode:G.parentNode===v);H&&u.filter(v,r,true)}},"":function(r,v,G){var H,E=j++,I=c;typeof v=="string"&&!s.test(v)&&(v=v.toLowerCase(),H=v,I=h);I("parentNode",v,E,r,H,G)},"~":function(r,v,G){var H,E=j++,I=c;typeof v=="string"&&!s.test(v)&&(v=v.toLowerCase(),H=v,I=h);I("previousSibling",v,E,r,H,G)}},find:{ID:function(r,v,G){if(typeof v.getElementById!=
"undefined"&&!G)return(r=v.getElementById(r[1]))&&r.parentNode?[r]:[]},NAME:function(r,v){if(typeof v.getElementsByName!="undefined"){for(var G=[],H=v.getElementsByName(r[1]),E=0,I=H.length;E<I;E++)H[E].getAttribute("name")===r[1]&&G.push(H[E]);return G.length===0?null:G}},TAG:function(r,v){if(typeof v.getElementsByTagName!="undefined")return v.getElementsByTagName(r[1])}},preFilter:{CLASS:function(r,v,G,H,E,I){r=" "+r[1].replace(q,"")+" ";if(I)return r;I=0;for(var R;(R=v[I])!=null;I++)R&&(E^(R.className&&
(" "+R.className+" ").replace(/[\t\n\r]/g," ").indexOf(r)>=0)?G||H.push(R):G&&(v[I]=false));return false},ID:function(r){return r[1].replace(q,"")},TAG:function(r){return r[1].replace(q,"").toLowerCase()},CHILD:function(r){if(r[1]==="nth"){r[2]||u.error(r[0]);r[2]=r[2].replace(/^\+|\s*/g,"");var v=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(r[2]==="even"&&"2n"||r[2]==="odd"&&"2n+1"||!/\D/.test(r[2])&&"0n+"+r[2]||r[2]);r[2]=v[1]+(v[2]||1)-0;r[3]=v[3]-0}else r[2]&&u.error(r[0]);r[0]=j++;return r},ATTR:function(r,
v,G,H,E,I){v=r[1]=r[1].replace(q,"");!I&&y.attrMap[v]&&(r[1]=y.attrMap[v]);r[4]=(r[4]||r[5]||"").replace(q,"");r[2]==="~="&&(r[4]=" "+r[4]+" ");return r},PSEUDO:function(r,v,G,H,E){if(r[1]==="not")if((d.exec(r[3])||"").length>1||/^\w/.test(r[3]))r[3]=u(r[3],null,null,v);else{r=u.filter(r[3],v,G,true^E);G||H.push.apply(H,r);return false}else if(y.match.POS.test(r[0])||y.match.CHILD.test(r[0]))return true;return r},POS:function(r){r.unshift(true);return r}},filters:{enabled:function(r){return r.disabled===
false&&r.type!=="hidden"},disabled:function(r){return r.disabled===true},checked:function(r){return r.checked===true},selected:function(r){return r.selected===true},parent:function(r){return!!r.firstChild},empty:function(r){return!r.firstChild},has:function(r,v,G){return!!u(G[3],r).length},header:function(r){return/h\d/i.test(r.nodeName)},text:function(r){var v=r.getAttribute("type"),G=r.type;return r.nodeName.toLowerCase()==="input"&&"text"===G&&(v===G||v===null)},radio:function(r){return r.nodeName.toLowerCase()===
"input"&&"radio"===r.type},checkbox:function(r){return r.nodeName.toLowerCase()==="input"&&"checkbox"===r.type},file:function(r){return r.nodeName.toLowerCase()==="input"&&"file"===r.type},password:function(r){return r.nodeName.toLowerCase()==="input"&&"password"===r.type},submit:function(r){var v=r.nodeName.toLowerCase();return(v==="input"||v==="button")&&"submit"===r.type},image:function(r){return r.nodeName.toLowerCase()==="input"&&"image"===r.type},reset:function(r){var v=r.nodeName.toLowerCase();
return(v==="input"||v==="button")&&"reset"===r.type},button:function(r){var v=r.nodeName.toLowerCase();return v==="input"&&"button"===r.type||v==="button"},input:function(r){return/input|select|textarea|button/i.test(r.nodeName)},focus:function(r){return r===r.ownerDocument.activeElement}},setFilters:{first:function(r,v){return v===0},last:function(r,v,G,H){return v===H.length-1},even:function(r,v){return v%2===0},odd:function(r,v){return v%2===1},lt:function(r,v,G){return v<G[3]-0},gt:function(r,
v,G){return v>G[3]-0},nth:function(r,v,G){return G[3]-0===v},eq:function(r,v,G){return G[3]-0===v}},filter:{PSEUDO:function(r,v,G,H){var E=v[1],I=y.filters[E];if(I)return I(r,G,v,H);if(E==="contains")return(r.textContent||r.innerText||u.getText([r])||"").indexOf(v[3])>=0;if(E==="not"){v=v[3];G=0;for(H=v.length;G<H;G++)if(v[G]===r)return false;return true}u.error(E)},CHILD:function(r,v){var G=v[1],H=r;switch(G){case "only":case "first":for(;H=H.previousSibling;)if(H.nodeType===1)return false;if(G===
"first")return true;H=r;case "last":for(;H=H.nextSibling;)if(H.nodeType===1)return false;return true;case "nth":G=v[2];var E=v[3];if(G===1&&E===0)return true;var I=v[0],R=r.parentNode;if(R&&(R.sizcache!==I||!r.nodeIndex)){var X=0;for(H=R.firstChild;H;H=H.nextSibling)H.nodeType===1&&(H.nodeIndex=++X);R.sizcache=I}H=r.nodeIndex-E;return G===0?H===0:H%G===0&&H/G>=0}},ID:function(r,v){return r.nodeType===1&&r.getAttribute("id")===v},TAG:function(r,v){return v==="*"&&r.nodeType===1||r.nodeName.toLowerCase()===
v},CLASS:function(r,v){return(" "+(r.className||r.getAttribute("class"))+" ").indexOf(v)>-1},ATTR:function(r,v){var G=v[1];G=y.attrHandle[G]?y.attrHandle[G](r):r[G]!=null?r[G]:r.getAttribute(G);var H=G+"",E=v[2],I=v[4];return G==null?E==="!=":E==="="?H===I:E==="*="?H.indexOf(I)>=0:E==="~="?(" "+H+" ").indexOf(I)>=0:I?E==="!="?H!==I:E==="^="?H.indexOf(I)===0:E==="$="?H.substr(H.length-I.length)===I:E==="|="?H===I||H.substr(0,I.length+1)===I+"-":false:H&&G!==false},POS:function(r,v,G,H){var E=y.setFilters[v[2]];
if(E)return E(r,G,v,H)}}},D=y.match.POS,P=function(r,v){return"\\"+(v-0+1)};for(var Y in y.match){y.match[Y]=new RegExp(y.match[Y].source+/(?![^\[]*\])(?![^\(]*\))/.source);y.leftMatch[Y]=new RegExp(/(^(?:.|\r|\n)*?)/.source+y.match[Y].source.replace(/\\(\d+)/g,P))}var ca=function(r,v){r=Array.prototype.slice.call(r,0);if(v){v.push.apply(v,r);return v}return r};try{Array.prototype.slice.call(V.documentElement.childNodes,0)}catch(Da){ca=function(r,v){var G=0,H=v||[];if(k.call(r)==="[object Array]")Array.prototype.push.apply(H,
r);else if(typeof r.length=="number")for(var E=r.length;G<E;G++)H.push(r[G]);else for(;r[G];G++)H.push(r[G]);return H}}var ra,va;V.documentElement.compareDocumentPosition?(ra=function(r,v){if(r===v){m=true;return 0}if(!r.compareDocumentPosition||!v.compareDocumentPosition)return r.compareDocumentPosition?-1:1;return r.compareDocumentPosition(v)&4?-1:1}):(ra=function(r,v){if(r===v){m=true;return 0}if(r.sourceIndex&&v.sourceIndex)return r.sourceIndex-v.sourceIndex;var G,H,E=[],I=[];G=r.parentNode;H=
v.parentNode;var R=G;if(G===H)return va(r,v);if(!G)return-1;if(!H)return 1;for(;R;){E.unshift(R);R=R.parentNode}for(R=H;R;){I.unshift(R);R=R.parentNode}G=E.length;H=I.length;for(R=0;R<G&&R<H;R++)if(E[R]!==I[R])return va(E[R],I[R]);return R===G?va(r,I[R],-1):va(E[R],v,1)},va=function(r,v,G){if(r===v)return G;for(r=r.nextSibling;r;){if(r===v)return-1;r=r.nextSibling}return 1});u.getText=function(r){for(var v="",G,H=0;r[H];H++){G=r[H];G.nodeType===3||G.nodeType===4?(v+=G.nodeValue):G.nodeType!==8&&(v+=
u.getText(G.childNodes))}return v};(function(){var r=V.createElement("div"),v="script"+(new Date).getTime(),G=V.documentElement;r.innerHTML="<a name='"+v+"'/>";G.insertBefore(r,G.firstChild);V.getElementById(v)&&(y.find.ID=function(H,E,I){if(typeof E.getElementById!="undefined"&&!I)return(E=E.getElementById(H[1]))?E.id===H[1]||typeof E.getAttributeNode!="undefined"&&E.getAttributeNode("id").nodeValue===H[1]?[E]:a:[]},y.filter.ID=function(H,E){var I=typeof H.getAttributeNode!="undefined"&&H.getAttributeNode("id");
return H.nodeType===1&&I&&I.nodeValue===E});G.removeChild(r);G=r=null})();(function(){var r=V.createElement("div");r.appendChild(V.createComment(""));r.getElementsByTagName("*").length>0&&(y.find.TAG=function(v,G){var H=G.getElementsByTagName(v[1]);if(v[1]==="*"){for(var E=[],I=0;H[I];I++)H[I].nodeType===1&&E.push(H[I]);H=E}return H});r.innerHTML="<a href='#'></a>";r.firstChild&&typeof r.firstChild.getAttribute!="undefined"&&r.firstChild.getAttribute("href")!=="#"&&(y.attrHandle.href=function(v){return v.getAttribute("href",
2)});r=null})();V.querySelectorAll&&function(){var r=u,v=V.createElement("div");v.innerHTML="<p class='TEST'></p>";if(!v.querySelectorAll||v.querySelectorAll(".TEST").length!==0){u=function(H,E,I,R){E=E||V;if(!R&&!u.isXML(E)){var X=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(H);if(X&&(E.nodeType===1||E.nodeType===9)){if(X[1])return ca(E.getElementsByTagName(H),I);if(X[2]&&y.find.CLASS&&E.getElementsByClassName)return ca(E.getElementsByClassName(X[2]),I)}if(E.nodeType===9){if(H==="body"&&E.body)return ca([E.body],
I);if(X&&X[3]){var ja=E.getElementById(X[3]);if(!ja||!ja.parentNode)return ca([],I);if(ja.id===X[3])return ca([ja],I)}try{return ca(E.querySelectorAll(H),I)}catch(Ga){}}else if(E.nodeType===1&&E.nodeName.toLowerCase()!=="object"){X=E;var Ea=(ja=E.getAttribute("id"))||"__sizzle__",Oa=E.parentNode,x=/^\s*[+~]/.test(H);ja?(Ea=Ea.replace(/'/g,"\\$&")):E.setAttribute("id",Ea);x&&Oa&&(E=E.parentNode);try{if(!x||Oa)return ca(E.querySelectorAll("[id='"+Ea+"'] "+H),I)}catch(J){}finally{ja||X.removeAttribute("id")}}}return r(H,
E,I,R)};for(var G in r)u[G]=r[G];v=null}}();(function(){var r=V.documentElement,v=r.matchesSelector||r.mozMatchesSelector||r.webkitMatchesSelector||r.msMatchesSelector;if(v){var G=!v.call(V.createElement("div"),"div"),H=false;try{v.call(V.documentElement,"[test!='']:sizzle")}catch(E){H=true}u.matchesSelector=function(I,R){R=R.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!u.isXML(I))try{if(H||!y.match.PSEUDO.test(R)&&!/!=/.test(R)){var X=v.call(I,R);if(X||!G||I.document&&I.document.nodeType!==11)return X}}catch(ja){}return u(R,
null,null,[I]).length>0}}})();(function(){var r=V.createElement("div");r.innerHTML="<div class='test e'></div><div class='test'></div>";if(r.getElementsByClassName&&r.getElementsByClassName("e").length!==0){r.lastChild.className="e";if(r.getElementsByClassName("e").length!==1){y.order.splice(1,0,"CLASS");y.find.CLASS=function(v,G,H){if(typeof G.getElementsByClassName!="undefined"&&!H)return G.getElementsByClassName(v[1])};r=null}}})();V.documentElement.contains?(u.contains=function(r,v){return r!==
v&&(r.contains?r.contains(v):true)}):V.documentElement.compareDocumentPosition?(u.contains=function(r,v){return!!(r.compareDocumentPosition(v)&16)}):(u.contains=function(){return false});u.isXML=function(r){return(r=(r?r.ownerDocument||r:0).documentElement)?r.nodeName!=="HTML":false};var wa=function(r,v){for(var G,H=[],E="",I=v.nodeType?[v]:v;G=y.match.PSEUDO.exec(r);){E+=G[0];r=r.replace(y.match.PSEUDO,"")}r=y.relative[r]?r+"*":r;G=0;for(var R=I.length;G<R;G++)u(r,I[G],H);return u.filter(E,H)};f.find=
u;f.expr=u.selectors;f.expr[":"]=f.expr.filters;f.unique=u.uniqueSort;f.text=u.getText;f.isXMLDoc=u.isXML;f.contains=u.contains})();var xb=/Until$/,yb=/^(?:parents|prevUntil|prevAll)/,zb=/,/,Fa=/^.[^:#\[\.,]*$/,lc=Array.prototype.slice,sb=f.expr.match.POS,ec={children:true,contents:true,next:true,prev:true};f.fn.extend({find:function(c){var h=this,d,j;if(typeof c!="string")return f(c).filter(function(){d=0;for(j=h.length;d<j;d++)if(f.contains(h[d],this))return true});var k=this.pushStack("","find",
c),m,n,q;d=0;for(j=this.length;d<j;d++){m=k.length;f.find(c,this[d],k);if(d>0)for(n=m;n<k.length;n++)for(q=0;q<m;q++)if(k[q]===k[n]){k.splice(n--,1);break}}return k},has:function(c){var h=f(c);return this.filter(function(){for(var d=0,j=h.length;d<j;d++)if(f.contains(this,h[d]))return true})},not:function(c){return this.pushStack(F(this,c,false),"not",c)},filter:function(c){return this.pushStack(F(this,c,true),"filter",c)},is:function(c){return!!c&&(typeof c=="string"?f.filter(c,this).length>0:this.filter(c).length>
0)},closest:function(c,h){var d=[],j,k,m=this[0];if(f.isArray(c)){var n,q={},s=1;if(m&&c.length){j=0;for(k=c.length;j<k;j++){n=c[j];q[n]||(q[n]=sb.test(n)?f(n,h||this.context):n)}for(;m&&m.ownerDocument&&m!==h;){for(n in q){j=q[n];(j.jquery?j.index(m)>-1:f(m).is(j))&&d.push({selector:n,elem:m,level:s})}m=m.parentNode;s++}}return d}n=sb.test(c)||typeof c!="string"?f(c,h||this.context):0;j=0;for(k=this.length;j<k;j++)for(m=this[j];m;){if(n?n.index(m)>-1:f.find.matchesSelector(m,c)){d.push(m);break}m=
m.parentNode;if(!m||!m.ownerDocument||m===h||m.nodeType===11)break}d=d.length>1?f.unique(d):d;return this.pushStack(d,"closest",c)},index:function(c){if(!c||typeof c=="string")return f.inArray(this[0],c?f(c):this.parent().children());return f.inArray(c.jquery?c[0]:c,this)},add:function(c,h){var d=typeof c=="string"?f(c,h):f.makeArray(c&&c.nodeType?[c]:c),j=f.merge(this.get(),d);return this.pushStack(!d[0]||!d[0].parentNode||d[0].parentNode.nodeType===11||!j[0]||!j[0].parentNode||j[0].parentNode.nodeType===
11?j:f.unique(j))},andSelf:function(){return this.add(this.prevObject)}});f.each({parent:function(c){return(c=c.parentNode)&&c.nodeType!==11?c:null},parents:function(c){return f.dir(c,"parentNode")},parentsUntil:function(c,h,d){return f.dir(c,"parentNode",d)},next:function(c){return f.nth(c,2,"nextSibling")},prev:function(c){return f.nth(c,2,"previousSibling")},nextAll:function(c){return f.dir(c,"nextSibling")},prevAll:function(c){return f.dir(c,"previousSibling")},nextUntil:function(c,h,d){return f.dir(c,
"nextSibling",d)},prevUntil:function(c,h,d){return f.dir(c,"previousSibling",d)},siblings:function(c){return f.sibling(c.parentNode.firstChild,c)},children:function(c){return f.sibling(c.firstChild)},contents:function(c){return f.nodeName(c,"iframe")?c.contentDocument||c.contentWindow.document:f.makeArray(c.childNodes)}},function(c,h){f.fn[c]=function(d,j){var k=f.map(this,h,d),m=lc.call(arguments);xb.test(c)||(j=d);j&&typeof j=="string"&&(k=f.filter(j,k));k=this.length>1&&!ec[c]?f.unique(k):k;(this.length>
1||zb.test(j))&&yb.test(c)&&(k=k.reverse());return this.pushStack(k,c,m.join(","))}});f.extend({filter:function(c,h,d){d&&(c=":not("+c+")");return h.length===1?f.find.matchesSelector(h[0],c)?[h[0]]:[]:f.find.matches(c,h)},dir:function(c,h,d){var j=[];for(c=c[h];c&&c.nodeType!==9&&(d===a||c.nodeType!==1||!f(c).is(d));){c.nodeType===1&&j.push(c);c=c[h]}return j},nth:function(c,h,d){for(var j=0;c;c=c[d])if(c.nodeType===1&&++j===(h||1))break;return c},sibling:function(c,h){for(var d=[];c;c=c.nextSibling)c.nodeType===
1&&c!==h&&d.push(c);return d}});var Tb=/ jQuery\d+="(?:\d+|null)"/g,Jb=/^\s+/,Ub=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Vb=/<([\w:]+)/,Wb=/<tbody/i,fc=/<|&#?\w+;/,$a=/<(?:script|object|embed|option|style)/i,tb=/checked\s*(?:[^=]|=\s*.checked.)/i,gc=/\/(java|ecma)script/i,dc=/^\s*<!(?:\[CDATA\[|\-\-)/,Ra={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};Ra.optgroup=Ra.option;Ra.tbody=Ra.tfoot=Ra.colgroup=Ra.caption=Ra.thead;Ra.th=Ra.td;f.support.htmlSerialize||(Ra._default=[1,"div<div>","</div>"]);f.fn.extend({text:function(c){if(f.isFunction(c))return this.each(function(h){var d=f(this);d.text(c.call(this,h,d.text()))});if(typeof c!="object"&&c!==a)return this.empty().append((this[0]&&
this[0].ownerDocument||V).createTextNode(c));return f.text(this)},wrapAll:function(c){if(f.isFunction(c))return this.each(function(d){f(this).wrapAll(c.call(this,d))});if(this[0]){var h=f(c,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&h.insertBefore(this[0]);h.map(function(){for(var d=this;d.firstChild&&d.firstChild.nodeType===1;)d=d.firstChild;return d}).append(this)}return this},wrapInner:function(c){if(f.isFunction(c))return this.each(function(h){f(this).wrapInner(c.call(this,h))});
return this.each(function(){var h=f(this),d=h.contents();d.length?d.wrapAll(c):h.append(c)})},wrap:function(c){return this.each(function(){f(this).wrapAll(c)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.appendChild(c)})},prepend:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.insertBefore(c,
this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(h){this.parentNode.insertBefore(h,this)});if(arguments.length){var c=f(arguments[0]);c.push.apply(c,this.toArray());return this.pushStack(c,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(h){this.parentNode.insertBefore(h,this.nextSibling)});if(arguments.length){var c=this.pushStack(this,"after",arguments);c.push.apply(c,
f(arguments[0]).toArray());return c}},remove:function(c,h){for(var d=0,j;(j=this[d])!=null;d++)if(!c||f.filter(c,[j]).length){!h&&j.nodeType===1&&(f.cleanData(j.getElementsByTagName("*")),f.cleanData([j]));j.parentNode&&j.parentNode.removeChild(j)}return this},empty:function(){for(var c=0,h;(h=this[c])!=null;c++)for(h.nodeType===1&&f.cleanData(h.getElementsByTagName("*"));h.firstChild;)h.removeChild(h.firstChild);return this},clone:function(c,h){c=c==null?false:c;h=h==null?c:h;return this.map(function(){return f.clone(this,
c,h)})},html:function(c){if(c===a)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Tb,""):null;if(typeof c=="string"&&!$a.test(c)&&(f.support.leadingWhitespace||!Jb.test(c))&&!Ra[(Vb.exec(c)||["",""])[1].toLowerCase()]){c=c.replace(Ub,"<$1></$2>");try{for(var h=0,d=this.length;h<d;h++)this[h].nodeType===1&&(f.cleanData(this[h].getElementsByTagName("*")),this[h].innerHTML=c)}catch(j){this.empty().append(c)}}else f.isFunction(c)?this.each(function(k){var m=f(this);m.html(c.call(this,k,
m.html()))}):this.empty().append(c);return this},replaceWith:function(c){if(this[0]&&this[0].parentNode){if(f.isFunction(c))return this.each(function(h){var d=f(this),j=d.html();d.replaceWith(c.call(this,h,j))});typeof c!="string"&&(c=f(c).detach());return this.each(function(){var h=this.nextSibling,d=this.parentNode;f(this).remove();h?f(h).before(c):f(d).append(c)})}return this.length?this.pushStack(f(f.isFunction(c)?c():c),"replaceWith",c):this},detach:function(c){return this.remove(c,true)},domManip:function(c,
h,d){var j,k,m,n=c[0],q=[];if(!f.support.checkClone&&arguments.length===3&&typeof n=="string"&&tb.test(n))return this.each(function(){f(this).domManip(c,h,d,true)});if(f.isFunction(n))return this.each(function(y){var D=f(this);c[0]=n.call(this,y,h?D.html():a);D.domManip(c,h,d)});if(this[0]){m=n&&n.parentNode;f.support.parentNode&&m&&m.nodeType===11&&m.childNodes.length===this.length?(j={fragment:m}):(j=f.buildFragment(c,this,q));m=j.fragment;m.childNodes.length===1?(k=m=m.firstChild):(k=m.firstChild);
if(k){h=h&&f.nodeName(k,"tr");k=0;for(var s=this.length,u=s-1;k<s;k++)d.call(h?f.nodeName(this[k],"table")?this[k].getElementsByTagName("tbody")[0]||this[k].appendChild(this[k].ownerDocument.createElement("tbody")):this[k]:this[k],j.cacheable||s>1&&k<u?f.clone(m,true,true):m)}q.length&&f.each(q,aa)}return this}});f.buildFragment=function(c,h,d){var j,k,m,n;h&&h[0]&&(n=h[0].ownerDocument||h[0]);n.createDocumentFragment||(n=V);c.length===1&&typeof c[0]=="string"&&c[0].length<512&&n===V&&c[0].charAt(0)===
"<"&&!$a.test(c[0])&&(f.support.checkClone||!tb.test(c[0]))&&(k=true,m=f.fragments[c[0]],m&&m!==1&&(j=m));j||(j=n.createDocumentFragment(),f.clean(c,n,j,d));k&&(f.fragments[c[0]]=m?j:1);return{fragment:j,cacheable:k}};f.fragments={};f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(c,h){f.fn[c]=function(d){var j=[];d=f(d);var k=this.length===1&&this[0].parentNode;if(k&&k.nodeType===11&&k.childNodes.length===1&&d.length===1){d[h](this[0]);
return this}k=0;for(var m=d.length;k<m;k++){var n=(k>0?this.clone(true):this).get();f(d[k])[h](n);j=j.concat(n)}return this.pushStack(j,c,d.selector)}});f.extend({clone:function(c,h,d){var j=c.cloneNode(true),k,m,n;if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(c.nodeType===1||c.nodeType===11)&&!f.isXMLDoc(c)){t(c,j);k=p(c);m=p(j);for(n=0;k[n];++n)t(k[n],m[n])}if(h){z(c,j);if(d){k=p(c);m=p(j);for(n=0;k[n];++n)z(k[n],m[n])}}return j},clean:function(c,h,d,j){h=h||V;typeof h.createElement==
"undefined"&&(h=h.ownerDocument||h[0]&&h[0].ownerDocument||V);for(var k=[],m,n=0,q;(q=c[n])!=null;n++){typeof q=="number"&&(q+="");if(q){if(typeof q=="string")if(fc.test(q)){q=q.replace(Ub,"<$1></$2>");m=(Vb.exec(q)||["",""])[1].toLowerCase();var s=Ra[m]||Ra._default,u=s[0],y=h.createElement("div");for(y.innerHTML=s[1]+q+s[2];u--;)y=y.lastChild;if(!f.support.tbody){u=Wb.test(q);s=m==="table"&&!u?y.firstChild&&y.firstChild.childNodes:s[1]==="<table>"&&!u?y.childNodes:[];for(m=s.length-1;m>=0;--m)f.nodeName(s[m],
"tbody")&&!s[m].childNodes.length&&s[m].parentNode.removeChild(s[m])}!f.support.leadingWhitespace&&Jb.test(q)&&y.insertBefore(h.createTextNode(Jb.exec(q)[0]),y.firstChild);q=y.childNodes}else q=h.createTextNode(q);var D;if(!f.support.appendChecked)if(q[0]&&typeof(D=q.length)=="number")for(m=0;m<D;m++)ia(q[m]);else ia(q);q.nodeType?k.push(q):(k=f.merge(k,q))}}if(d){c=function(P){return!P.type||gc.test(P.type)};for(n=0;k[n];n++)if(j&&f.nodeName(k[n],"script")&&(!k[n].type||k[n].type.toLowerCase()===
"text/javascript"))j.push(k[n].parentNode?k[n].parentNode.removeChild(k[n]):k[n]);else{if(k[n].nodeType===1){h=f.grep(k[n].getElementsByTagName("script"),c);k.splice.apply(k,[n+1,0].concat(h))}d.appendChild(k[n])}}return k},cleanData:function(c){for(var h,d,j=f.cache,k=f.expando,m=f.event.special,n=f.support.deleteExpando,q=0,s;(s=c[q])!=null;q++)if(!(s.nodeName&&f.noData[s.nodeName.toLowerCase()]))if(d=s[f.expando]){if((h=j[d]&&j[d][k])&&h.events){for(var u in h.events)m[u]?f.event.remove(s,u):f.removeEvent(s,
u,h.handle);h.handle&&(h.handle.elem=null)}n?delete s[f.expando]:s.removeAttribute&&s.removeAttribute(f.expando);delete j[d]}}});var Xb=/alpha\([^)]*\)/i,hc=/opacity=([^)]*)/,mc=/([A-Z]|^ms)/g,Kb=/^-?\d+(?:px)?$/i,Yb=/^-?\d/,Zb=/^[+\-]=/,qa=/[^+\-\.\de]+/g,ic={position:"absolute",visibility:"hidden",display:"block"},fa=["Left","Right"],Qb=["Top","Bottom"],fb,mb,ma;f.fn.css=function(c,h){if(arguments.length===2&&h===a)return this;return f.access(this,c,h,true,function(d,j,k){return k!==a?f.style(d,
j,k):f.css(d,j)})};f.extend({cssHooks:{opacity:{get:function(c,h){if(h){var d=fb(c,"opacity","opacity");return d===""?"1":d}return c.style.opacity}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(c,h,d,j){if(c&&c.nodeType!==3&&c.nodeType!==8&&c.style){var k,m=f.camelCase(h),n=c.style,q=f.cssHooks[m];h=f.cssProps[m]||m;if(d===a){if(q&&"get"in q&&(k=
q.get(c,false,j))!==a)return k;return n[h]}j=typeof d;if(!(j==="number"&&isNaN(d)||d==null)){j==="string"&&Zb.test(d)&&(d=+d.replace(qa,"")+parseFloat(f.css(c,h)),j="number");j==="number"&&!f.cssNumber[m]&&(d+="px");if(!q||!("set"in q)||(d=q.set(c,d))!==a)try{n[h]=d}catch(s){}}}},css:function(c,h,d){var j,k;h=f.camelCase(h);k=f.cssHooks[h];h=f.cssProps[h]||h;h==="cssFloat"&&(h="float");if(k&&"get"in k&&(j=k.get(c,true,d))!==a)return j;if(fb)return fb(c,h)},swap:function(c,h,d){var j={};for(var k in h){j[k]=
c.style[k];c.style[k]=h[k]}d.call(c);for(k in h)c.style[k]=j[k]}});f.curCSS=f.css;f.each(["height","width"],function(c,h){f.cssHooks[h]={get:function(d,j,k){var m;if(j){if(d.offsetWidth!==0)return O(d,h,k);f.swap(d,ic,function(){m=O(d,h,k)});return m}},set:function(d,j){if(!Kb.test(j))return j;j=parseFloat(j);if(j>=0)return j+"px"}}});f.support.opacity||(f.cssHooks.opacity={get:function(c,h){return hc.test((h&&c.currentStyle?c.currentStyle.filter:c.style.filter)||"")?parseFloat(RegExp.$1)/100+"":
h?"1":""},set:function(c,h){var d=c.style,j=c.currentStyle;d.zoom=1;var k=f.isNaN(h)?"":"alpha(opacity="+h*100+")";j=j&&j.filter||d.filter||"";d.filter=Xb.test(j)?j.replace(Xb,k):j+" "+k}});f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(c,h){var d;f.swap(c,{display:"inline-block"},function(){h?(d=fb(c,"margin-right","marginRight")):(d=c.style.marginRight)});return d}})});V.defaultView&&V.defaultView.getComputedStyle&&(mb=function(c,h){var d,j;h=h.replace(mc,"-$1").toLowerCase();
if(!(j=c.ownerDocument.defaultView))return a;if(j=j.getComputedStyle(c,null)){d=j.getPropertyValue(h);d===""&&!f.contains(c.ownerDocument.documentElement,c)&&(d=f.style(c,h))}return d});V.documentElement.currentStyle&&(ma=function(c,h){var d,j=c.currentStyle&&c.currentStyle[h],k=c.runtimeStyle&&c.runtimeStyle[h],m=c.style;!Kb.test(j)&&Yb.test(j)&&(d=m.left,k&&(c.runtimeStyle.left=c.currentStyle.left),m.left=h==="fontSize"?"1em":j||0,j=m.pixelLeft+"px",m.left=d,k&&(c.runtimeStyle.left=k));return j===
""?"auto":j});fb=mb||ma;f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(c){var h=c.offsetHeight;return c.offsetWidth===0&&h===0||!f.support.reliableHiddenOffsets&&(c.style.display||f.css(c,"display"))==="none"},f.expr.filters.visible=function(c){return!f.expr.filters.hidden(c)});var Ab=/%20/g,eb=/\[\]$/,Lb=/\r?\n/g,nb=/#.*$/,Mb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,$b=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,za=/^(?:GET|HEAD)$/,Xa=/^\/\//,
ob=/\?/,Na=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ac=/^(?:select|textarea)/i,cc=/\s+/,bc=/([?&])_=[^&]*/,Pa=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,T=f.fn.load,bb={},Ya={},Sa,N;try{Sa=U.href}catch(hb){Sa=V.createElement("a");Sa.href="";Sa=Sa.href}N=Pa.exec(Sa.toLowerCase())||[];f.fn.extend({load:function(c,h,d){if(typeof c!="string"&&T)return T.apply(this,arguments);if(!this.length)return this;var j=c.indexOf(" ");if(j>=0){var k=c.slice(j,c.length);c=c.slice(0,j)}j="GET";h&&
(f.isFunction(h)?(d=h,h=a):typeof h=="object"&&(h=f.param(h,f.ajaxSettings.traditional),j="POST"));var m=this;f.ajax({url:c,type:j,dataType:"html",data:h,complete:function(n,q,s){s=n.responseText;n.isResolved()&&(n.done(function(u){s=u}),m.html(k?f("<div>").append(s.replace(Na,"")).find(k):s));d&&m.each(d,[s,q,n])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&
!this.disabled&&(this.checked||ac.test(this.nodeName)||$b.test(this.type))}).map(function(c,h){var d=f(this).val();return d==null?null:f.isArray(d)?f.map(d,function(j){return{name:h.name,value:j.replace(Lb,"\r\n")}}):{name:h.name,value:d.replace(Lb,"\r\n")}}).get()}});f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(c,h){f.fn[h]=function(d){return this.bind(h,d)}});f.each(["get","post"],function(c,h){f[h]=function(d,j,k,m){f.isFunction(j)&&(m=m||k,k=j,j=
a);return f.ajax({type:h,url:d,data:j,success:k,dataType:m})}});f.extend({getScript:function(c,h){return f.get(c,a,h,"script")},getJSON:function(c,h,d){return f.get(c,h,d,"json")},ajaxSetup:function(c,h){h?f.extend(true,c,f.ajaxSettings,h):(h=c,c=f.extend(true,f.ajaxSettings,h));for(var d in{context:1,url:1})d in h?(c[d]=h[d]):d in f.ajaxSettings&&(c[d]=f.ajaxSettings[d]);return c},ajaxSettings:{url:Sa,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|widget):$/.test(N[1]),global:true,type:"GET",
contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":b.String,"text html":true,"text json":f.parseJSON,"text xml":f.parseXML}},ajaxPrefilter:K(bb),ajaxTransport:K(Ya),ajax:function(c,h){function d(E,I,R,X){if(va!==2){va=2;Da&&clearTimeout(Da);
ca=a;P=X||"";v.readyState=E?4:0;var ja,Ga,Ea;if(R){X=j;var Oa=v,x=X.contents,J=X.dataTypes,Z=X.responseFields,W,ha,sa,xa;for(ha in Z)ha in R&&(Oa[Z[ha]]=R[ha]);for(;J[0]==="*";){J.shift();W===a&&(W=X.mimeType||Oa.getResponseHeader("content-type"))}if(W)for(ha in x)if(x[ha]&&x[ha].test(W)){J.unshift(ha);break}if(J[0]in R)sa=J[0];else{for(ha in R){if(!J[0]||X.converters[ha+" "+J[0]]){sa=ha;break}xa||(xa=ha)}sa=sa||xa}if(sa){sa!==J[0]&&J.unshift(sa);R=R[sa]}else R=void 0}else R=a;R=R;if(E>=200&&E<300||
E===304){if(j.ifModified){if(W=v.getResponseHeader("Last-Modified"))f.lastModified[u]=W;if(W=v.getResponseHeader("Etag"))f.etag[u]=W}if(E===304){I="notmodified";ja=true}else try{W=j;R=R;W.dataFilter&&(R=W.dataFilter(R,W.dataType));var Aa=W.dataTypes;ha={};var vb,wb,oc=Aa.length,jc,Bb=Aa[0],Nb,nc,Cb,Ib,Ob;for(vb=1;vb<oc;vb++){if(vb===1)for(wb in W.converters)typeof wb=="string"&&(ha[wb.toLowerCase()]=W.converters[wb]);Nb=Bb;Bb=Aa[vb];if(Bb==="*")Bb=Nb;else if(Nb!=="*"&&Nb!==Bb){nc=Nb+" "+Bb;Cb=ha[nc]||
ha["* "+Bb];if(!Cb){Ob=a;for(Ib in ha){jc=Ib.split(" ");if(jc[0]===Nb||jc[0]==="*")if(Ob=ha[jc[1]+" "+Bb]){Ib=ha[Ib];Ib===true?(Cb=Ob):Ob===true&&(Cb=Ib);break}}}!Cb&&!Ob&&f.error("No conversion from "+nc.replace(" "," to "));Cb!==true&&(R=Cb?Cb(R):Ob(Ib(R)))}}Ga=R;I="success";ja=true}catch(pc){I="parsererror";Ea=pc}}else{Ea=I;if(!I||E){I="error";E<0&&(E=0)}}v.status=E;v.statusText=I;ja?n.resolveWith(k,[Ga,I,v]):n.rejectWith(k,[v,I,Ea]);v.statusCode(s);s=a;wa&&m.trigger("ajax"+(ja?"Success":"Error"),
[v,j,ja?Ga:Ea]);q.resolveWith(k,[v,I]);wa&&(m.trigger("ajaxComplete",[v,j]),--f.active||f.event.trigger("ajaxStop"))}}typeof c=="object"&&(h=c,c=a);h=h||{};var j=f.ajaxSetup({},h),k=j.context||j,m=k!==j&&(k.nodeType||k instanceof f)?f(k):f.event,n=f.Deferred(),q=f._Deferred(),s=j.statusCode||{},u,y={},D={},P,Y,ca,Da,ra,va=0,wa,r,v={readyState:0,setRequestHeader:function(E,I){if(!va){var R=E.toLowerCase();E=D[R]=D[R]||E;y[E]=I}return this},getAllResponseHeaders:function(){return va===2?P:null},getResponseHeader:function(E){var I;
if(va===2){if(!Y)for(Y={};I=Mb.exec(P);)Y[I[1].toLowerCase()]=I[2];I=Y[E.toLowerCase()]}return I===a?null:I},overrideMimeType:function(E){va||(j.mimeType=E);return this},abort:function(E){E=E||"abort";ca&&ca.abort(E);d(0,E);return this}};n.promise(v);v.success=v.done;v.error=v.fail;v.complete=q.done;v.statusCode=function(E){if(E){var I;if(va<2)for(I in E)s[I]=[s[I],E[I]];else{I=E[v.status];v.then(I,I)}}return this};j.url=((c||j.url)+"").replace(nb,"").replace(Xa,N[1]+"//");j.dataTypes=f.trim(j.dataType||
"*").toLowerCase().split(cc);j.crossDomain==null&&(ra=Pa.exec(j.url.toLowerCase()),j.crossDomain=!(!ra||ra[1]==N[1]&&ra[2]==N[2]&&(ra[3]||(ra[1]==="http:"?80:443))==(N[3]||(N[1]==="http:"?80:443))));j.data&&j.processData&&typeof j.data!="string"&&(j.data=f.param(j.data,j.traditional));B(bb,j,h,v);if(va===2)return false;wa=j.global;j.type=j.type.toUpperCase();j.hasContent=!za.test(j.type);wa&&f.active++===0&&f.event.trigger("ajaxStart");if(!j.hasContent){j.data&&(j.url+=(ob.test(j.url)?"&":"?")+j.data);
u=j.url;if(j.cache===false){ra=f.now();var G=j.url.replace(bc,"$1_="+ra);j.url=G+(G===j.url?(ob.test(j.url)?"&":"?")+"_="+ra:"")}}(j.data&&j.hasContent&&j.contentType!==false||h.contentType)&&v.setRequestHeader("Content-Type",j.contentType);j.ifModified&&(u=u||j.url,f.lastModified[u]&&v.setRequestHeader("If-Modified-Since",f.lastModified[u]),f.etag[u]&&v.setRequestHeader("If-None-Match",f.etag[u]));v.setRequestHeader("Accept",j.dataTypes[0]&&j.accepts[j.dataTypes[0]]?j.accepts[j.dataTypes[0]]+(j.dataTypes[0]!==
"*"?", */*; q=0.01":""):j.accepts["*"]);for(r in j.headers)v.setRequestHeader(r,j.headers[r]);if(j.beforeSend&&(j.beforeSend.call(k,v,j)===false||va===2)){v.abort();return false}for(r in{success:1,error:1,complete:1})v[r](j[r]);if(ca=B(Ya,j,h,v)){v.readyState=1;wa&&m.trigger("ajaxSend",[v,j]);j.async&&j.timeout>0&&(Da=setTimeout(function(){v.abort("timeout")},j.timeout));try{va=1;ca.send(y,d)}catch(H){status<2?d(-1,H):f.error(H)}}else d(-1,"No Transport");return v},param:function(c,h){var d=[],j=
function(m,n){n=f.isFunction(n)?n():n;d[d.length]=encodeURIComponent(m)+"="+encodeURIComponent(n)};h===a&&(h=f.ajaxSettings.traditional);if(f.isArray(c)||c.jquery&&!f.isPlainObject(c))f.each(c,function(){j(this.name,this.value)});else for(var k in c)C(k,c[k],h,j);return d.join("&").replace(Ab,"+")}});f.extend({active:0,lastModified:{},etag:{}});var ub=f.now(),Db=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+ub++}});f.ajaxPrefilter("json jsonp",function(c,
h,d){h=c.contentType==="application/x-www-form-urlencoded"&&typeof c.data=="string";if(c.dataTypes[0]==="jsonp"||c.jsonp!==false&&(Db.test(c.url)||h&&Db.test(c.data))){var j,k=c.jsonpCallback=f.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,m=b[k],n=c.url,q=c.data,s="$1"+k+"$2";c.jsonp!==false&&(n=n.replace(Db,s),c.url===n&&(h&&(q=q.replace(Db,s)),c.data===q&&(n+=(/\?/.test(n)?"&":"?")+c.jsonp+"="+k)));c.url=n;c.data=q;b[k]=function(u){j=[u]};d.always(function(){b[k]=m;j&&f.isFunction(m)&&
b[k](j[0])});c.converters["script json"]=function(){j||f.error(k+" was not called");return j[0]};c.dataTypes[0]="json";return"script"}});f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(c){f.globalEval(c);return c}}});f.ajaxPrefilter("script",function(c){c.cache===a&&(c.cache=false);c.crossDomain&&(c.type="GET",c.global=false)});f.ajaxTransport("script",
function(c){if(c.crossDomain){var h,d=V.head||V.getElementsByTagName("head")[0]||V.documentElement;return{send:function(j,k){h=V.createElement("script");h.async="async";c.scriptCharset&&(h.charset=c.scriptCharset);h.src=c.url;h.onload=h.onreadystatechange=function(m,n){if(n||!h.readyState||/loaded|complete/.test(h.readyState)){h.onload=h.onreadystatechange=null;d&&h.parentNode&&d.removeChild(h);h=a;n||k(200,"success")}};d.insertBefore(h,d.firstChild)},abort:function(){h&&h.onload(0,1)}}}});var ab=
b.ActiveXObject?function(){for(var c in pb)pb[c](0,1)}:false,Qa=0,pb;f.ajaxSettings.xhr=b.ActiveXObject?function(){var c;if(!(c=!this.isLocal&&w()))a:{try{c=new b.ActiveXObject("Microsoft.XMLHTTP");break a}catch(h){}c=void 0}return c}:w;(function(c){f.extend(f.support,{ajax:!!c,cors:!!c&&"withCredentials"in c})})(f.ajaxSettings.xhr());f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var h;return{send:function(d,j){var k=c.xhr(),m,n;c.username?k.open(c.type,c.url,c.async,
c.username,c.password):k.open(c.type,c.url,c.async);if(c.xhrFields)for(n in c.xhrFields)k[n]=c.xhrFields[n];c.mimeType&&k.overrideMimeType&&k.overrideMimeType(c.mimeType);!c.crossDomain&&!d["X-Requested-With"]&&(d["X-Requested-With"]="XMLHttpRequest");try{for(n in d)k.setRequestHeader(n,d[n])}catch(q){}k.send(c.hasContent&&c.data||null);h=function(s,u){var y,D,P,Y,ca;try{if(h&&(u||k.readyState===4)){h=a;m&&(k.onreadystatechange=f.noop,ab&&delete pb[m]);if(u)k.readyState!==4&&k.abort();else{y=k.status;
P=k.getAllResponseHeaders();Y={};(ca=k.responseXML)&&ca.documentElement&&(Y.xml=ca);Y.text=k.responseText;try{D=k.statusText}catch(Da){D=""}!y&&c.isLocal&&!c.crossDomain?(y=Y.text?200:404):y===1223&&(y=204)}}}catch(ra){u||j(-1,ra)}Y&&j(y,D,Y,P)};!c.async||k.readyState===4?h():(m=++Qa,ab&&(pb||(pb={},f(b).unload(ab)),pb[m]=h),k.onreadystatechange=h)},abort:function(){h&&h(0,1)}}}});var db={},Ta,Ba,ib=/^(?:toggle|show|hide)$/,kc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,jb,Ka=[["height","marginTop","marginBottom",
"paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],qb,Eb=b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.oRequestAnimationFrame;f.fn.extend({show:function(c,h,d){var j;if(c||c===0)return this.animate(i("show",3),c,h,d);h=0;for(d=this.length;h<d;h++){c=this[h];c.style&&(j=c.style.display,!f._data(c,"olddisplay")&&j==="none"&&(j=c.style.display=""),j===""&&f.css(c,"display")==="none"&&f._data(c,"olddisplay",g(c.nodeName)))}for(h=
0;h<d;h++){c=this[h];if(c.style){j=c.style.display;if(j===""||j==="none")c.style.display=f._data(c,"olddisplay")||""}}return this},hide:function(c,h,d){if(c||c===0)return this.animate(i("hide",3),c,h,d);c=0;for(h=this.length;c<h;c++)if(this[c].style){d=f.css(this[c],"display");d!=="none"&&!f._data(this[c],"olddisplay")&&f._data(this[c],"olddisplay",d)}for(c=0;c<h;c++)this[c].style&&(this[c].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(c,h,d){var j=typeof c=="boolean";f.isFunction(c)&&
f.isFunction(h)?this._toggle.apply(this,arguments):c==null||j?this.each(function(){var k=j?c:f(this).is(":hidden");f(this)[k?"show":"hide"]()}):this.animate(i("toggle",3),c,h,d);return this},fadeTo:function(c,h,d,j){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:h},c,d,j)},animate:function(c,h,d,j){var k=f.speed(h,d,j);if(f.isEmptyObject(c))return this.each(k.complete,[false]);c=f.extend({},c);return this[k.queue===false?"each":"queue"](function(){k.queue===false&&f._mark(this);
var m=f.extend({},k),n=this.nodeType===1,q=n&&f(this).is(":hidden"),s,u,y,D,P,Y,ca,Da;m.animatedProperties={};for(y in c){s=f.camelCase(y);y!==s&&(c[s]=c[y],delete c[y]);u=c[s];f.isArray(u)?(m.animatedProperties[s]=u[1],u=c[s]=u[0]):(m.animatedProperties[s]=m.specialEasing&&m.specialEasing[s]||m.easing||"swing");if(u==="hide"&&q||u==="show"&&!q)return m.complete.call(this);n&&(s==="height"||s==="width")&&(m.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")===
"inline"&&f.css(this,"float")==="none"&&(f.support.inlineBlockNeedsLayout?(D=g(this.nodeName),D==="inline"?(this.style.display="inline-block"):(this.style.display="inline",this.style.zoom=1)):(this.style.display="inline-block")))}m.overflow!=null&&(this.style.overflow="hidden");for(y in c){n=new f.fx(this,m,y);u=c[y];ib.test(u)?n[u==="toggle"?q?"show":"hide":u]():(P=kc.exec(u),Y=n.cur(),P?(ca=parseFloat(P[2]),Da=P[3]||(f.cssNumber[y]?"":"px"),Da!=="px"&&(f.style(this,y,(ca||1)+Da),Y=(ca||1)/n.cur()*
Y,f.style(this,y,Y+Da)),P[1]&&(ca=(P[1]==="-="?-1:1)*ca+Y),n.custom(Y,ca,Da)):n.custom(Y,u,""))}return true})},stop:function(c,h){c&&this.queue([]);this.each(function(){var d=f.timers,j=d.length;for(h||f._unmark(true,this);j--;)d[j].elem===this&&(h&&d[j](true),d.splice(j,1))});h||this.dequeue();return this}});f.each({slideDown:i("show",1),slideUp:i("hide",1),slideToggle:i("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(c,h){f.fn[c]=function(d,j,
k){return this.animate(h,d,j,k)}});f.extend({speed:function(c,h,d){var j=c&&typeof c=="object"?f.extend({},c):{complete:d||!d&&h||f.isFunction(c)&&c,duration:c,easing:d&&h||h&&!f.isFunction(h)&&h};j.duration=f.fx.off?0:typeof j.duration=="number"?j.duration:j.duration in f.fx.speeds?f.fx.speeds[j.duration]:f.fx.speeds._default;j.old=j.complete;j.complete=function(k){f.isFunction(j.old)&&j.old.call(this);j.queue!==false?f.dequeue(this):k!==false&&f._unmark(this)};return j},easing:{linear:function(c,
h,d,j){return d+j*c},swing:function(c,h,d,j){return(-Math.cos(c*Math.PI)/2+0.5)*j+d}},timers:[],fx:function(c,h,d){this.options=h;this.elem=c;this.prop=d;h.orig=h.orig||{}}});f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var c,h=f.css(this.elem,this.prop);return isNaN(c=
parseFloat(h))?!h||h==="auto"?0:h:c},custom:function(c,h,d){function j(q){return k.step(q)}var k=this,m=f.fx,n;this.startTime=qb||o();this.start=c;this.end=h;this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;j.elem=this.elem;j()&&f.timers.push(j)&&!jb&&(Eb?(jb=true,n=function(){jb&&(Eb(n),m.tick())},Eb(n)):(jb=setInterval(m.tick,m.interval)))},show:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop===
"width"||this.prop==="height"?1:0,this.cur());f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(c){var h=qb||o(),d=true,j=this.elem,k=this.options,m,n;if(c||h>=k.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();k.animatedProperties[this.prop]=true;for(m in k.animatedProperties)k.animatedProperties[m]!==true&&(d=false);if(d){k.overflow!=null&&!f.support.shrinkWrapBlocks&&
f.each(["","X","Y"],function(s,u){j.style["overflow"+u]=k.overflow[s]});k.hide&&f(j).hide();if(k.hide||k.show)for(var q in k.animatedProperties)f.style(j,q,k.orig[q]);k.complete.call(j)}return false}k.duration==Infinity?(this.now=h):(n=h-this.startTime,this.state=n/k.duration,this.pos=f.easing[k.animatedProperties[this.prop]](this.state,n,0,1,k.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return true}};f.extend(f.fx,{tick:function(){for(var c=f.timers,h=0;h<c.length;++h)c[h]()||
c.splice(h--,1);c.length||f.fx.stop()},interval:13,stop:function(){clearInterval(jb);jb=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(c){f.style(c.elem,"opacity",c.now)},_default:function(c){c.elem.style&&c.elem.style[c.prop]!=null?(c.elem.style[c.prop]=(c.prop==="width"||c.prop==="height"?Math.max(0,c.now):c.now)+c.unit):(c.elem[c.prop]=c.now)}}});f.expr&&f.expr.filters&&(f.expr.filters.animated=function(c){return f.grep(f.timers,function(h){return c===h.elem}).length});var Za=
/^t(?:able|d|h)$/i,Pb=/^(?:body|html)$/i;"getBoundingClientRect"in V.documentElement?(f.fn.offset=function(c){var h=this[0],d;if(c)return this.each(function(n){f.offset.setOffset(this,c,n)});if(!h||!h.ownerDocument)return null;if(h===h.ownerDocument.body)return f.offset.bodyOffset(h);try{d=h.getBoundingClientRect()}catch(j){}var k=h.ownerDocument,m=k.documentElement;if(!d||!f.contains(m,h))return d?{top:d.top,left:d.left}:{top:0,left:0};h=k.body;k=e(k);return{top:d.top+(k.pageYOffset||f.support.boxModel&&
m.scrollTop||h.scrollTop)-(m.clientTop||h.clientTop||0),left:d.left+(k.pageXOffset||f.support.boxModel&&m.scrollLeft||h.scrollLeft)-(m.clientLeft||h.clientLeft||0)}}):(f.fn.offset=function(c){var h=this[0];if(c)return this.each(function(y){f.offset.setOffset(this,c,y)});if(!h||!h.ownerDocument)return null;if(h===h.ownerDocument.body)return f.offset.bodyOffset(h);f.offset.initialize();var d,j=h.offsetParent,k=h,m=h.ownerDocument,n=m.documentElement,q=m.body;d=(m=m.defaultView)?m.getComputedStyle(h,
null):h.currentStyle;for(var s=h.offsetTop,u=h.offsetLeft;(h=h.parentNode)&&h!==q&&h!==n;){if(f.offset.supportsFixedPosition&&d.position==="fixed")break;d=m?m.getComputedStyle(h,null):h.currentStyle;s-=h.scrollTop;u-=h.scrollLeft;h===j&&(s+=h.offsetTop,u+=h.offsetLeft,f.offset.doesNotAddBorder&&(!f.offset.doesAddBorderForTableAndCells||!Za.test(h.nodeName))&&(s+=parseFloat(d.borderTopWidth)||0,u+=parseFloat(d.borderLeftWidth)||0),k=j,j=h.offsetParent);f.offset.subtractsBorderForOverflowNotVisible&&
d.overflow!=="visible"&&(s+=parseFloat(d.borderTopWidth)||0,u+=parseFloat(d.borderLeftWidth)||0);d=d}if(d.position==="relative"||d.position==="static"){s+=q.offsetTop;u+=q.offsetLeft}f.offset.supportsFixedPosition&&d.position==="fixed"&&(s+=Math.max(n.scrollTop,q.scrollTop),u+=Math.max(n.scrollLeft,q.scrollLeft));return{top:s,left:u}});f.offset={initialize:function(){var c=V.body,h=V.createElement("div"),d,j,k,m=parseFloat(f.css(c,"marginTop"))||0;f.extend(h.style,{position:"absolute",top:0,left:0,
margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});h.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";c.insertBefore(h,c.firstChild);d=h.firstChild;j=d.firstChild;k=d.nextSibling.firstChild.firstChild;this.doesNotAddBorder=j.offsetTop!==
5;this.doesAddBorderForTableAndCells=k.offsetTop===5;j.style.position="fixed";j.style.top="20px";this.supportsFixedPosition=j.offsetTop===20||j.offsetTop===15;j.style.position=j.style.top="";d.style.overflow="hidden";d.style.position="relative";this.subtractsBorderForOverflowNotVisible=j.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=c.offsetTop!==m;c.removeChild(h);f.offset.initialize=f.noop},bodyOffset:function(c){var h=c.offsetTop,d=c.offsetLeft;f.offset.initialize();f.offset.doesNotIncludeMarginInBodyOffset&&
(h+=parseFloat(f.css(c,"marginTop"))||0,d+=parseFloat(f.css(c,"marginLeft"))||0);return{top:h,left:d}},setOffset:function(c,h,d){var j=f.css(c,"position");j==="static"&&(c.style.position="relative");var k=f(c),m=k.offset(),n=f.css(c,"top"),q=f.css(c,"left"),s={},u={},y,D;(j==="absolute"||j==="fixed")&&f.inArray("auto",[n,q])>-1?(u=k.position(),y=u.top,D=u.left):(y=parseFloat(n)||0,D=parseFloat(q)||0);f.isFunction(h)&&(h=h.call(c,d,m));h.top!=null&&(s.top=h.top-m.top+y);h.left!=null&&(s.left=h.left-
m.left+D);"using"in h?h.using.call(c,s):k.css(s)}};f.fn.extend({position:function(){if(!this[0])return null;var c=this[0],h=this.offsetParent(),d=this.offset(),j=Pb.test(h[0].nodeName)?{top:0,left:0}:h.offset();d.top-=parseFloat(f.css(c,"marginTop"))||0;d.left-=parseFloat(f.css(c,"marginLeft"))||0;j.top+=parseFloat(f.css(h[0],"borderTopWidth"))||0;j.left+=parseFloat(f.css(h[0],"borderLeftWidth"))||0;return{top:d.top-j.top,left:d.left-j.left}},offsetParent:function(){return this.map(function(){for(var c=
this.offsetParent||V.body;c&&!Pb.test(c.nodeName)&&f.css(c,"position")==="static";)c=c.offsetParent;return c})}});f.each(["Left","Top"],function(c,h){var d="scroll"+h;f.fn[d]=function(j){var k,m;if(j===a){k=this[0];if(!k)return null;return(m=e(k))?"pageXOffset"in m?m[c?"pageYOffset":"pageXOffset"]:f.support.boxModel&&m.document.documentElement[d]||m.document.body[d]:k[d]}return this.each(function(){(m=e(this))?m.scrollTo(c?f(m).scrollLeft():j,c?j:f(m).scrollTop()):(this[d]=j)})}});f.each(["Height",
"Width"],function(c,h){var d=h.toLowerCase();f.fn["inner"+h]=function(){var j=this[0];return j&&j.style?parseFloat(f.css(j,d,"padding")):null};f.fn["outer"+h]=function(j){var k=this[0];return k&&k.style?parseFloat(f.css(k,d,j?"margin":"border")):null};f.fn[d]=function(j){var k=this[0];if(!k)return j==null?null:this;if(f.isFunction(j))return this.each(function(n){var q=f(this);q[d](j.call(this,n,q[d]()))});if(f.isWindow(k)){var m=k.document.documentElement["client"+h];return k.document.compatMode===
"CSS1Compat"&&m||k.document.body["client"+h]||m}if(k.nodeType===9)return Math.max(k.documentElement["client"+h],k.body["scroll"+h],k.documentElement["scroll"+h],k.body["offset"+h],k.documentElement["offset"+h]);if(j===a){k=f.css(k,d);m=parseFloat(k);return f.isNaN(m)?k:m}return this.css(d,typeof j=="string"?j:j+"px")}});b.jQuery=b.$=f})(window);
(function(b,a){function e(i,l){var o=i.nodeName.toLowerCase();if("area"===o){o=i.parentNode;var w=o.name;if(!i.href||!w||o.nodeName.toLowerCase()!=="map")return false;o=b("img[usemap=#"+w+"]")[0];return!!o&&g(o)}return(/input|select|textarea|button|object/.test(o)?!i.disabled:"a"==o?i.href||l:l)&&g(i)}function g(i){return!b(i).parents().andSelf().filter(function(){return b.curCSS(this,"visibility")==="hidden"||b.expr.filters.hidden(this)}).length}b.ui=b.ui||{};if(!b.ui.version){b.extend(b.ui,{version:"1.8.16",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});b.fn.extend({propAttr:b.fn.prop||b.fn.attr,_focus:b.fn.focus,focus:function(i,l){return typeof i==="number"?this.each(function(){var o=
this;setTimeout(function(){b(o).focus();l&&l.call(o)},i)}):this._focus.apply(this,arguments)},scrollParent:function(){var i;i=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.curCSS(this,"position",1))&&/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.curCSS(this,
"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!i.length?b(document):i},zIndex:function(i){if(i!==a)return this.css("zIndex",i);if(this.length){i=b(this[0]);for(var l;i.length&&i[0]!==document;){l=i.css("position");if(l==="absolute"||l==="relative"||l==="fixed"){l=parseInt(i.css("zIndex"),10);if(!isNaN(l)&&l!==0)return l}i=i.parent()}}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(i){i.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.each(["Width","Height"],function(i,l){function o(K,O,aa,ia){b.each(w,function(){O-=parseFloat(b.curCSS(K,"padding"+this,true))||0;if(aa)O-=parseFloat(b.curCSS(K,"border"+this+"Width",true))||0;if(ia)O-=parseFloat(b.curCSS(K,"margin"+this,true))||0});return O}var w=l==="Width"?["Left","Right"]:["Top","Bottom"],C=l.toLowerCase(),B={innerWidth:b.fn.innerWidth,
innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+l]=function(K){if(K===a)return B["inner"+l].call(this);return this.each(function(){b(this).css(C,o(this,K)+"px")})};b.fn["outer"+l]=function(K,O){if(typeof K!=="number")return B["outer"+l].call(this,K);return this.each(function(){b(this).css(C,o(this,K,true,O)+"px")})}});b.extend(b.expr[":"],{data:function(i,l,o){return!!b.data(i,o[3])},focusable:function(i){return e(i,!isNaN(b.attr(i,"tabindex")))},
tabbable:function(i){var l=b.attr(i,"tabindex"),o=isNaN(l);return(o||l>=0)&&e(i,!o)}});b(function(){var i=document.body,l=i.appendChild(l=document.createElement("div"));b.extend(l.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=l.offsetHeight===100;b.support.selectstart="onselectstart"in l;i.removeChild(l).style.display="none"});b.extend(b.ui,{plugin:{add:function(i,l,o){i=b.ui[i].prototype;for(var w in o){i.plugins[w]=i.plugins[w]||[];i.plugins[w].push([l,o[w]])}},
call:function(i,l,o){if((l=i.plugins[l])&&i.element[0].parentNode)for(var w=0;w<l.length;w++)i.options[l[w][0]]&&l[w][1].apply(i.element,o)}},contains:function(i,l){return document.compareDocumentPosition?i.compareDocumentPosition(l)&16:i!==l&&i.contains(l)},hasScroll:function(i,l){if(b(i).css("overflow")==="hidden")return false;var o=l&&l==="left"?"scrollLeft":"scrollTop",w=false;if(i[o]>0)return true;i[o]=1;w=i[o]>0;i[o]=0;return w},isOverAxis:function(i,l,o){return i>l&&i<l+o},isOver:function(i,
l,o,w,C,B){return b.ui.isOverAxis(i,o,C)&&b.ui.isOverAxis(l,w,B)}})}})(jQuery);
(function(b,a){if(b.cleanData){var e=b.cleanData;b.cleanData=function(i){for(var l=0,o;(o=i[l])!=null;l++)try{b(o).triggerHandler("remove")}catch(w){}e(i)}}else{var g=b.fn.remove;b.fn.remove=function(i,l){return this.each(function(){if(!l)if(!i||b.filter(i,[this]).length)b("*",this).add([this]).each(function(){try{b(this).triggerHandler("remove")}catch(o){}});return g.call(b(this),i,l)})}}b.widget=function(i,l,o){var w=i.split(".")[0],C;i=i.split(".")[1];C=w+"-"+i;if(!o){o=l;l=b.Widget}b.expr[":"][C]=
function(B){return!!b.data(B,i)};b[w]=b[w]||{};b[w][i]=function(B,K){arguments.length&&this._createWidget(B,K)};l=new l;l.options=b.extend(true,{},l.options);b[w][i].prototype=b.extend(true,l,{namespace:w,widgetName:i,widgetEventPrefix:b[w][i].prototype.widgetEventPrefix||i,widgetBaseClass:C},o);b.widget.bridge(i,b[w][i])};b.widget.bridge=function(i,l){b.fn[i]=function(o){var w=typeof o==="string",C=Array.prototype.slice.call(arguments,1),B=this;o=!w&&C.length?b.extend.apply(null,[true,o].concat(C)):
o;if(w&&o.charAt(0)==="_")return B;w?this.each(function(){var K=b.data(this,i),O=K&&b.isFunction(K[o])?K[o].apply(K,C):K;if(O!==K&&O!==a){B=O;return false}}):this.each(function(){var K=b.data(this,i);K?K.option(o||{})._init():b.data(this,i,new l(o,this))});return B}};b.Widget=function(i,l){arguments.length&&this._createWidget(i,l)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(i,l){b.data(l,this.widgetName,this);this.element=b(l);this.options=
b.extend(true,{},this.options,this._getCreateOptions(),i);var o=this;this.element.bind("remove."+this.widgetName,function(){o.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(i,l){var o=i;if(arguments.length===0)return b.extend({},this.options);if(typeof i==="string"){if(l===a)return this.options[i];o={};o[i]=l}this._setOptions(o);return this},_setOptions:function(i){var l=this;b.each(i,function(o,w){l._setOption(o,w)});return this},_setOption:function(i,l){this.options[i]=l;if(i==="disabled")this.widget()[l?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
l);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(i,l,o){var w=this.options[i];l=b.Event(l);l.type=(i===this.widgetEventPrefix?i:this.widgetEventPrefix+i).toLowerCase();o=o||{};if(l.originalEvent){i=b.event.props.length;for(var C;i;){C=b.event.props[--i];l[C]=l.originalEvent[C]}}this.element.trigger(l,o);return!(b.isFunction(w)&&w.call(this.element[0],l,o)===false||l.isDefaultPrevented())}}})(jQuery);
(function(b){var a=false;b(document).mouseup(function(){a=false});b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(g){return e._mouseDown(g)}).bind("click."+this.widgetName,function(g){if(true===b.data(g.target,e.widgetName+".preventClickEvent")){b.removeData(g.target,e.widgetName+".preventClickEvent");g.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(e){if(!a){this._mouseStarted&&this._mouseUp(e);this._mouseDownEvent=e;var g=this,i=e.which==1,l=typeof this.options.cancel=="string"&&e.target.nodeName?b(e.target).closest(this.options.cancel).length:false;if(!i||l||!this._mouseCapture(e))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){g.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=
this._mouseStart(e)!==false;if(!this._mouseStarted){e.preventDefault();return true}}true===b.data(e.target,this.widgetName+".preventClickEvent")&&b.removeData(e.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(o){return g._mouseMove(o)};this._mouseUpDelegate=function(o){return g._mouseUp(o)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);e.preventDefault();return a=true}},_mouseMove:function(e){if(b.browser.msie&&
!(document.documentMode>=9)&&!e.button)return this._mouseUp(e);if(this._mouseStarted){this._mouseDrag(e);return e.preventDefault()}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==false)?this._mouseDrag(e):this._mouseUp(e);return!this._mouseStarted},_mouseUp:function(e){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=
false;e.target==this._mouseDownEvent.target&&b.data(e.target,this.widgetName+".preventClickEvent",true);this._mouseStop(e)}return false},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(b){b.widget("ui.draggable",b.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(a){var e=
this.options;if(this.helper||e.disabled||b(a.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(a);if(!this.handle)return false;if(e.iframeFix)b(e.iframeFix===true?"iframe":e.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(b(this).offset()).appendTo("body")});return true},_mouseStart:function(a){var e=this.options;
this.helper=this._createHelper(a);this._cacheHelperProportions();if(b.ui.ddmanager)b.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});
this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);e.containment&&this._setContainment();if(this._trigger("start",a)===false){this._clear();return false}this._cacheHelperProportions();b.ui.ddmanager&&!e.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(a,true);b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,a);return true},
_mouseDrag:function(a,e){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!e){var g=this._uiHash();if(this._trigger("drag",a,g)===false){this._mouseUp({});return false}this.position=g.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";b.ui.ddmanager&&b.ui.ddmanager.drag(this,a);return false},_mouseStop:function(a){var e=
false;if(b.ui.ddmanager&&!this.options.dropBehaviour)e=b.ui.ddmanager.drop(this,a);if(this.dropped){e=this.dropped;this.dropped=false}if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return false;if(this.options.revert=="invalid"&&!e||this.options.revert=="valid"&&e||this.options.revert===true||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,e)){var g=this;b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,
10),function(){g._trigger("stop",a)!==false&&g._clear()})}else this._trigger("stop",a)!==false&&this._clear();return false},_mouseUp:function(a){this.options.iframeFix===true&&b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,a);return b.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var e=!this.options.handle||
!b(this.options.handle,this.element).length?true:false;b(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==a.target)e=true});return e},_createHelper:function(a){var e=this.options;a=b.isFunction(e.helper)?b(e.helper.apply(this.element[0],[a])):e.helper=="clone"?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo(e.appendTo=="parent"?this.element[0].parentNode:e.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&
a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(b.isArray(a))a={left:+a[0],top:+a[1]||0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=
this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&b.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),
10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[a.containment=="document"?0:b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,
(a.containment=="document"?0:b(window).scrollLeft())+b(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:b(window).scrollTop())+(b(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){a=b(a.containment);var e=a[0];if(e){a.offset();var g=b(e).css("overflow")!=
"hidden";this.containment=[(parseInt(b(e).css("borderLeftWidth"),10)||0)+(parseInt(b(e).css("paddingLeft"),10)||0),(parseInt(b(e).css("borderTopWidth"),10)||0)+(parseInt(b(e).css("paddingTop"),10)||0),(g?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(b(e).css("borderLeftWidth"),10)||0)-(parseInt(b(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(g?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(b(e).css("borderTopWidth"),
10)||0)-(parseInt(b(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=a}}else if(a.containment.constructor==Array)this.containment=a.containment},_convertPositionTo:function(a,e){if(!e)e=this.position;var g=a=="absolute"?1:-1,i=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(i[0].tagName);return{top:e.top+
this.offset.relative.top*g+this.offset.parent.top*g-(b.browser.safari&&b.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():l?0:i.scrollTop())*g),left:e.left+this.offset.relative.left*g+this.offset.parent.left*g-(b.browser.safari&&b.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:i.scrollLeft())*g)}},_generatePosition:function(a){var e=this.options,g=this.cssPosition=="absolute"&&
!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=/(html|body)/i.test(g[0].tagName),l=a.pageX,o=a.pageY;if(this.originalPosition){var w;if(this.containment){if(this.relative_container){w=this.relative_container.offset();w=[this.containment[0]+w.left,this.containment[1]+w.top,this.containment[2]+w.left,this.containment[3]+w.top]}else w=this.containment;if(a.pageX-this.offset.click.left<w[0])l=w[0]+this.offset.click.left;
if(a.pageY-this.offset.click.top<w[1])o=w[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>w[2])l=w[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>w[3])o=w[3]+this.offset.click.top}if(e.grid){o=e.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/e.grid[1])*e.grid[1]:this.originalPageY;o=w?!(o-this.offset.click.top<w[1]||o-this.offset.click.top>w[3])?o:!(o-this.offset.click.top<w[1])?o-e.grid[1]:o+e.grid[1]:o;l=e.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/
e.grid[0])*e.grid[0]:this.originalPageX;l=w?!(l-this.offset.click.left<w[0]||l-this.offset.click.left>w[2])?l:!(l-this.offset.click.left<w[0])?l-e.grid[0]:l+e.grid[0]:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(b.browser.safari&&b.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:g.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(b.browser.safari&&b.browser.version<
526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:g.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(a,e,g){g=g||this._uiHash();b.ui.plugin.call(this,a,[e,g]);if(a=="drag")this.positionAbs=this._convertPositionTo("absolute");return b.Widget.prototype._trigger.call(this,a,e,
g)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.extend(b.ui.draggable,{version:"1.8.16"});b.ui.plugin.add("draggable","connectToSortable",{start:function(a,e){var g=b(this).data("draggable"),i=g.options,l=b.extend({},e,{item:g.element});g.sortables=[];b(i.connectToSortable).each(function(){var o=b.data(this,"sortable");if(o&&!o.options.disabled){g.sortables.push({instance:o,shouldRevert:o.options.revert});
o.refreshPositions();o._trigger("activate",a,l)}})},stop:function(a,e){var g=b(this).data("draggable"),i=b.extend({},e,{item:g.element});b.each(g.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;g.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(a);this.instance.options.helper=this.instance.options._helper;g.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=
false;this.instance._trigger("deactivate",a,i)}})},drag:function(a,e){var g=b(this).data("draggable"),i=this;b.each(g.sortables,function(){this.instance.positionAbs=g.positionAbs;this.instance.helperProportions=g.helperProportions;this.instance.offset.click=g.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=b(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);
this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return e.helper[0]};a.target=this.instance.currentItem[0];this.instance._mouseCapture(a,true);this.instance._mouseStart(a,true,true);this.instance.offset.click.top=g.offset.click.top;this.instance.offset.click.left=g.offset.click.left;this.instance.offset.parent.left-=g.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=g.offset.parent.top-this.instance.offset.parent.top;
g._trigger("toSortable",a);g.dropped=this.instance.element;g.currentItem=g.element;this.instance.fromOutside=g}this.instance.currentItem&&this.instance._mouseDrag(a)}else if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",a,this.instance._uiHash(this.instance));this.instance._mouseStop(a,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&
this.instance.placeholder.remove();g._trigger("fromSortable",a);g.dropped=false}})}});b.ui.plugin.add("draggable","cursor",{start:function(){var a=b("body"),e=b(this).data("draggable").options;if(a.css("cursor"))e._cursor=a.css("cursor");a.css("cursor",e.cursor)},stop:function(){var a=b(this).data("draggable").options;a._cursor&&b("body").css("cursor",a._cursor)}});b.ui.plugin.add("draggable","opacity",{start:function(a,e){var g=b(e.helper),i=b(this).data("draggable").options;if(g.css("opacity"))i._opacity=
g.css("opacity");g.css("opacity",i.opacity)},stop:function(a,e){var g=b(this).data("draggable").options;g._opacity&&b(e.helper).css("opacity",g._opacity)}});b.ui.plugin.add("draggable","scroll",{start:function(){var a=b(this).data("draggable");if(a.scrollParent[0]!=document&&a.scrollParent[0].tagName!="HTML")a.overflowOffset=a.scrollParent.offset()},drag:function(a){var e=b(this).data("draggable"),g=e.options,i=false;if(e.scrollParent[0]!=document&&e.scrollParent[0].tagName!="HTML"){if(!g.axis||g.axis!=
"x")if(e.overflowOffset.top+e.scrollParent[0].offsetHeight-a.pageY<g.scrollSensitivity)e.scrollParent[0].scrollTop=i=e.scrollParent[0].scrollTop+g.scrollSpeed;else if(a.pageY-e.overflowOffset.top<g.scrollSensitivity)e.scrollParent[0].scrollTop=i=e.scrollParent[0].scrollTop-g.scrollSpeed;if(!g.axis||g.axis!="y")if(e.overflowOffset.left+e.scrollParent[0].offsetWidth-a.pageX<g.scrollSensitivity)e.scrollParent[0].scrollLeft=i=e.scrollParent[0].scrollLeft+g.scrollSpeed;else if(a.pageX-e.overflowOffset.left<
g.scrollSensitivity)e.scrollParent[0].scrollLeft=i=e.scrollParent[0].scrollLeft-g.scrollSpeed}else{if(!g.axis||g.axis!="x")if(a.pageY-b(document).scrollTop()<g.scrollSensitivity)i=b(document).scrollTop(b(document).scrollTop()-g.scrollSpeed);else if(b(window).height()-(a.pageY-b(document).scrollTop())<g.scrollSensitivity)i=b(document).scrollTop(b(document).scrollTop()+g.scrollSpeed);if(!g.axis||g.axis!="y")if(a.pageX-b(document).scrollLeft()<g.scrollSensitivity)i=b(document).scrollLeft(b(document).scrollLeft()-
g.scrollSpeed);else if(b(window).width()-(a.pageX-b(document).scrollLeft())<g.scrollSensitivity)i=b(document).scrollLeft(b(document).scrollLeft()+g.scrollSpeed)}i!==false&&b.ui.ddmanager&&!g.dropBehaviour&&b.ui.ddmanager.prepareOffsets(e,a)}});b.ui.plugin.add("draggable","snap",{start:function(){var a=b(this).data("draggable"),e=a.options;a.snapElements=[];b(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var g=b(this),i=g.offset();this!=a.element[0]&&a.snapElements.push({item:this,
width:g.outerWidth(),height:g.outerHeight(),top:i.top,left:i.left})})},drag:function(a,e){for(var g=b(this).data("draggable"),i=g.options,l=i.snapTolerance,o=e.offset.left,w=o+g.helperProportions.width,C=e.offset.top,B=C+g.helperProportions.height,K=g.snapElements.length-1;K>=0;K--){var O=g.snapElements[K].left,aa=O+g.snapElements[K].width,ia=g.snapElements[K].top,ka=ia+g.snapElements[K].height;if(O-l<o&&o<aa+l&&ia-l<C&&C<ka+l||O-l<o&&o<aa+l&&ia-l<B&&B<ka+l||O-l<w&&w<aa+l&&ia-l<C&&C<ka+l||O-l<w&&
w<aa+l&&ia-l<B&&B<ka+l){if(i.snapMode!="inner"){var p=Math.abs(ia-B)<=l,t=Math.abs(ka-C)<=l,z=Math.abs(O-w)<=l,F=Math.abs(aa-o)<=l;if(p)e.position.top=g._convertPositionTo("relative",{top:ia-g.helperProportions.height,left:0}).top-g.margins.top;if(t)e.position.top=g._convertPositionTo("relative",{top:ka,left:0}).top-g.margins.top;if(z)e.position.left=g._convertPositionTo("relative",{top:0,left:O-g.helperProportions.width}).left-g.margins.left;if(F)e.position.left=g._convertPositionTo("relative",{top:0,
left:aa}).left-g.margins.left}var ba=p||t||z||F;if(i.snapMode!="outer"){p=Math.abs(ia-C)<=l;t=Math.abs(ka-B)<=l;z=Math.abs(O-o)<=l;F=Math.abs(aa-w)<=l;if(p)e.position.top=g._convertPositionTo("relative",{top:ia,left:0}).top-g.margins.top;if(t)e.position.top=g._convertPositionTo("relative",{top:ka-g.helperProportions.height,left:0}).top-g.margins.top;if(z)e.position.left=g._convertPositionTo("relative",{top:0,left:O}).left-g.margins.left;if(F)e.position.left=g._convertPositionTo("relative",{top:0,
left:aa-g.helperProportions.width}).left-g.margins.left}if(!g.snapElements[K].snapping&&(p||t||z||F||ba))g.options.snap.snap&&g.options.snap.snap.call(g.element,a,b.extend(g._uiHash(),{snapItem:g.snapElements[K].item}));g.snapElements[K].snapping=p||t||z||F||ba}else{g.snapElements[K].snapping&&g.options.snap.release&&g.options.snap.release.call(g.element,a,b.extend(g._uiHash(),{snapItem:g.snapElements[K].item}));g.snapElements[K].snapping=false}}}});b.ui.plugin.add("draggable","stack",{start:function(){var a=
b(this).data("draggable").options;a=b.makeArray(b(a.stack)).sort(function(g,i){return(parseInt(b(g).css("zIndex"),10)||0)-(parseInt(b(i).css("zIndex"),10)||0)});if(a.length){var e=parseInt(a[0].style.zIndex)||0;b(a).each(function(g){this.style.zIndex=e+g});this[0].style.zIndex=e+a.length}}});b.ui.plugin.add("draggable","zIndex",{start:function(a,e){var g=b(e.helper),i=b(this).data("draggable").options;if(g.css("zIndex"))i._zIndex=g.css("zIndex");g.css("zIndex",i.zIndex)},stop:function(a,e){var g=
b(this).data("draggable").options;g._zIndex&&b(e.helper).css("zIndex",g._zIndex)}})})(jQuery);
(function(b){b.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,e=a.accept;this.isover=0;this.isout=1;this.accept=b.isFunction(e)?e:function(g){return g.is(e)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};b.ui.ddmanager.droppables[a.scope]=b.ui.ddmanager.droppables[a.scope]||[];b.ui.ddmanager.droppables[a.scope].push(this);
a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var a=b.ui.ddmanager.droppables[this.options.scope],e=0;e<a.length;e++)a[e]==this&&a.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(a,e){if(a=="accept")this.accept=b.isFunction(e)?e:function(g){return g.is(e)};b.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var e=b.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);e&&this._trigger("activate",a,this.ui(e))},_deactivate:function(a){var e=b.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);e&&this._trigger("deactivate",a,this.ui(e))},_over:function(a){var e=b.ui.ddmanager.current;if(!(!e||(e.currentItem||e.element)[0]==this.element[0]))if(this.accept.call(this.element[0],e.currentItem||e.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);
this._trigger("over",a,this.ui(e))}},_out:function(a){var e=b.ui.ddmanager.current;if(!(!e||(e.currentItem||e.element)[0]==this.element[0]))if(this.accept.call(this.element[0],e.currentItem||e.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("out",a,this.ui(e))}},_drop:function(a,e){var g=e||b.ui.ddmanager.current;if(!g||(g.currentItem||g.element)[0]==this.element[0])return false;var i=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var l=
b.data(this,"droppable");if(l.options.greedy&&!l.options.disabled&&l.options.scope==g.options.scope&&l.accept.call(l.element[0],g.currentItem||g.element)&&b.ui.intersect(g,b.extend(l,{offset:l.element.offset()}),l.options.tolerance)){i=true;return false}});if(i)return false;if(this.accept.call(this.element[0],g.currentItem||g.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",
a,this.ui(g));return this.element}return false},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});b.extend(b.ui.droppable,{version:"1.8.16"});b.ui.intersect=function(a,e,g){if(!e.offset)return false;var i=(a.positionAbs||a.position.absolute).left,l=i+a.helperProportions.width,o=(a.positionAbs||a.position.absolute).top,w=o+a.helperProportions.height,C=e.offset.left,B=C+e.proportions.width,K=e.offset.top,O=K+e.proportions.height;switch(g){case "fit":return C<=
i&&l<=B&&K<=o&&w<=O;case "intersect":return C<i+a.helperProportions.width/2&&l-a.helperProportions.width/2<B&&K<o+a.helperProportions.height/2&&w-a.helperProportions.height/2<O;case "pointer":return b.ui.isOver((a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,K,C,e.proportions.height,e.proportions.width);case "touch":return(o>=K&&o<=O||w>=K&&w<=O||o<K&&w>O)&&(i>=C&&i<=B||l>=C&&l<=B||i<C&&l>B);
default:return false}};b.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,e){var g=b.ui.ddmanager.droppables[a.options.scope]||[],i=e?e.type:null,l=(a.currentItem||a.element).find(":data(droppable)").andSelf(),o=0;a:for(;o<g.length;o++)if(!(g[o].options.disabled||a&&!g[o].accept.call(g[o].element[0],a.currentItem||a.element))){for(var w=0;w<l.length;w++)if(l[w]==g[o].element[0]){g[o].proportions.height=0;continue a}g[o].visible=g[o].element.css("display")!="none";if(g[o].visible){i==
"mousedown"&&g[o]._activate.call(g[o],e);g[o].offset=g[o].element.offset();g[o].proportions={width:g[o].element[0].offsetWidth,height:g[o].element[0].offsetHeight}}}},drop:function(a,e){var g=false;b.each(b.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&b.ui.intersect(a,this,this.options.tolerance))g=g||this._drop.call(this,e);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)){this.isout=
1;this.isover=0;this._deactivate.call(this,e)}}});return g},dragStart:function(a,e){a.element.parents(":not(body,html)").bind("scroll.droppable",function(){a.options.refreshPositions||b.ui.ddmanager.prepareOffsets(a,e)})},drag:function(a,e){a.options.refreshPositions&&b.ui.ddmanager.prepareOffsets(a,e);b.each(b.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var g=b.ui.intersect(a,this,this.options.tolerance);if(g=!g&&this.isover==
1?"isout":g&&this.isover==0?"isover":null){var i;if(this.options.greedy){var l=this.element.parents(":data(droppable):eq(0)");if(l.length){i=b.data(l[0],"droppable");i.greedyChild=g=="isover"?1:0}}if(i&&g=="isover"){i.isover=0;i.isout=1;i._out.call(i,e)}this[g]=1;this[g=="isout"?"isover":"isout"]=0;this[g=="isover"?"_over":"_out"].call(this,e);if(i&&g=="isout"){i.isout=0;i.isover=1;i._over.call(i,e)}}}})},dragStop:function(a,e){a.element.parents(":not(body,html)").unbind("scroll.droppable");a.options.refreshPositions||
b.ui.ddmanager.prepareOffsets(a,e)}}})(jQuery);
(function(b){b.widget("ui.resizable",b.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var g=this,i=this.options;this.element.addClass("ui-resizable");b.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){/relative/.test(this.element.css("position"))&&b.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap(b('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),
top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=
this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=i.handles||(!b(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",
nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var l=this.handles.split(",");this.handles={};for(var o=0;o<l.length;o++){var w=b.trim(l[o]),C=b('<div class="ui-resizable-handle '+("ui-resizable-"+w)+'"></div>');/sw|se|ne|nw/.test(w)&&C.css({zIndex:++i.zIndex});"se"==w&&C.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[w]=".ui-resizable-"+w;this.element.append(C)}}this._renderAxis=function(B){B=B||this.element;for(var K in this.handles){if(this.handles[K].constructor==
String)this.handles[K]=b(this.handles[K],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var O=b(this.handles[K],this.element),aa=0;aa=/sw|ne|nw|se|n|s/.test(K)?O.outerHeight():O.outerWidth();O=["padding",/ne|nw|n/.test(K)?"Top":/se|sw|s/.test(K)?"Bottom":/^e$/.test(K)?"Right":"Left"].join("");B.css(O,aa);this._proportionallyResize()}b(this.handles[K])}};this._renderAxis(this.element);this._handles=b(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){if(!g.resizing){if(this.className)var B=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);g.axis=B&&B[1]?B[1]:"se"}});if(i.autoHide){this._handles.hide();b(this.element).addClass("ui-resizable-autohide").hover(function(){if(!i.disabled){b(this).removeClass("ui-resizable-autohide");g._handles.show()}},function(){if(!i.disabled)if(!g.resizing){b(this).addClass("ui-resizable-autohide");g._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();
var g=function(l){b(l).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){g(this.element);var i=this.element;i.after(this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);g(this.originalElement);return this},_mouseCapture:function(g){var i=
false;for(var l in this.handles)if(b(this.handles[l])[0]==g.target)i=true;return!this.options.disabled&&i},_mouseStart:function(g){var i=this.options,l=this.element.position(),o=this.element;this.resizing=true;this.documentScroll={top:b(document).scrollTop(),left:b(document).scrollLeft()};if(o.is(".ui-draggable")||/absolute/.test(o.css("position")))o.css({position:"absolute",top:l.top,left:l.left});b.browser.opera&&/relative/.test(o.css("position"))&&o.css({position:"relative",top:"auto",left:"auto"});
this._renderProxy();l=a(this.helper.css("left"));var w=a(this.helper.css("top"));if(i.containment){l+=b(i.containment).scrollLeft()||0;w+=b(i.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:l,top:w};this.size=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()};this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()};this.originalPosition={left:l,top:w};this.sizeDiff=
{width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()};this.originalMousePosition={left:g.pageX,top:g.pageY};this.aspectRatio=typeof i.aspectRatio=="number"?i.aspectRatio:this.originalSize.width/this.originalSize.height||1;i=b(".ui-resizable-"+this.axis).css("cursor");b("body").css("cursor",i=="auto"?this.axis+"-resize":i);o.addClass("ui-resizable-resizing");this._propagate("start",g);return true},_mouseDrag:function(g){var i=this.helper,l=this.originalMousePosition,o=this._change[this.axis];
if(!o)return false;l=o.apply(this,[g,g.pageX-l.left||0,g.pageY-l.top||0]);this._updateVirtualBoundaries(g.shiftKey);if(this._aspectRatio||g.shiftKey)l=this._updateRatio(l,g);l=this._respectSize(l,g);this._propagate("resize",g);i.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(l);this._trigger("resize",g,this.ui());return false},
_mouseStop:function(g){this.resizing=false;var i=this.options;if(this._helper){var l=this._proportionallyResizeElements,o=l.length&&/textarea/i.test(l[0].nodeName);l=o&&b.ui.hasScroll(l[0],"left")?0:this.sizeDiff.height;o=o?0:this.sizeDiff.width;o={width:this.helper.width()-o,height:this.helper.height()-l};l=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null;var w=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;i.animate||
this.element.css(b.extend(o,{top:w,left:l}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!i.animate&&this._proportionallyResize()}b("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",g);this._helper&&this.helper.remove();return false},_updateVirtualBoundaries:function(g){var i=this.options,l,o,w;i={minWidth:e(i.minWidth)?i.minWidth:0,maxWidth:e(i.maxWidth)?i.maxWidth:Infinity,minHeight:e(i.minHeight)?i.minHeight:
0,maxHeight:e(i.maxHeight)?i.maxHeight:Infinity};if(this._aspectRatio||g){g=i.minHeight*this.aspectRatio;o=i.minWidth/this.aspectRatio;l=i.maxHeight*this.aspectRatio;w=i.maxWidth/this.aspectRatio;if(g>i.minWidth)i.minWidth=g;if(o>i.minHeight)i.minHeight=o;if(l<i.maxWidth)i.maxWidth=l;if(w<i.maxHeight)i.maxHeight=w}this._vBoundaries=i},_updateCache:function(g){this.offset=this.helper.offset();if(e(g.left))this.position.left=g.left;if(e(g.top))this.position.top=g.top;if(e(g.height))this.size.height=
g.height;if(e(g.width))this.size.width=g.width},_updateRatio:function(g){var i=this.position,l=this.size,o=this.axis;if(e(g.height))g.width=g.height*this.aspectRatio;else if(e(g.width))g.height=g.width/this.aspectRatio;if(o=="sw"){g.left=i.left+(l.width-g.width);g.top=null}if(o=="nw"){g.top=i.top+(l.height-g.height);g.left=i.left+(l.width-g.width)}return g},_respectSize:function(g){var i=this._vBoundaries,l=this.axis,o=e(g.width)&&i.maxWidth&&i.maxWidth<g.width,w=e(g.height)&&i.maxHeight&&i.maxHeight<
g.height,C=e(g.width)&&i.minWidth&&i.minWidth>g.width,B=e(g.height)&&i.minHeight&&i.minHeight>g.height;if(C)g.width=i.minWidth;if(B)g.height=i.minHeight;if(o)g.width=i.maxWidth;if(w)g.height=i.maxHeight;var K=this.originalPosition.left+this.originalSize.width,O=this.position.top+this.size.height,aa=/sw|nw|w/.test(l);l=/nw|ne|n/.test(l);if(C&&aa)g.left=K-i.minWidth;if(o&&aa)g.left=K-i.maxWidth;if(B&&l)g.top=O-i.minHeight;if(w&&l)g.top=O-i.maxHeight;if((i=!g.width&&!g.height)&&!g.left&&g.top)g.top=
null;else if(i&&!g.top&&g.left)g.left=null;return g},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var g=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var l=this._proportionallyResizeElements[i];if(!this.borderDif){var o=[l.css("borderTopWidth"),l.css("borderRightWidth"),l.css("borderBottomWidth"),l.css("borderLeftWidth")],w=[l.css("paddingTop"),l.css("paddingRight"),l.css("paddingBottom"),l.css("paddingLeft")];this.borderDif=b.map(o,
function(C,B){var K=parseInt(C,10)||0,O=parseInt(w[B],10)||0;return K+O})}b.browser.msie&&(b(g).is(":hidden")||b(g).parents(":hidden").length)||l.css({height:g.height()-this.borderDif[0]-this.borderDif[2]||0,width:g.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var g=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||b('<div style="overflow:hidden;"></div>');var i=b.browser.msie&&b.browser.version<7,l=i?1:0;i=i?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+
i,height:this.element.outerHeight()+i,position:"absolute",left:this.elementOffset.left-l+"px",top:this.elementOffset.top-l+"px",zIndex:++g.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(g,i){return{width:this.originalSize.width+i}},w:function(g,i){return{left:this.originalPosition.left+i,width:this.originalSize.width-i}},n:function(g,i,l){return{top:this.originalPosition.top+l,height:this.originalSize.height-l}},s:function(g,i,l){return{height:this.originalSize.height+
l}},se:function(g,i,l){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[g,i,l]))},sw:function(g,i,l){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[g,i,l]))},ne:function(g,i,l){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[g,i,l]))},nw:function(g,i,l){return b.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[g,i,l]))}},_propagate:function(g,i){b.ui.plugin.call(this,g,[i,this.ui()]);
g!="resize"&&this._trigger(g,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});b.extend(b.ui.resizable,{version:"1.8.16"});b.ui.plugin.add("resizable","alsoResize",{start:function(){var g=b(this).data("resizable").options,i=function(l){b(l).each(function(){var o=b(this);o.data("resizable-alsoresize",{width:parseInt(o.width(),
10),height:parseInt(o.height(),10),left:parseInt(o.css("left"),10),top:parseInt(o.css("top"),10),position:o.css("position")})})};if(typeof g.alsoResize=="object"&&!g.alsoResize.parentNode)if(g.alsoResize.length){g.alsoResize=g.alsoResize[0];i(g.alsoResize)}else b.each(g.alsoResize,function(l){i(l)});else i(g.alsoResize)},resize:function(g,i){var l=b(this).data("resizable"),o=l.options,w=l.originalSize,C=l.originalPosition,B={height:l.size.height-w.height||0,width:l.size.width-w.width||0,top:l.position.top-
C.top||0,left:l.position.left-C.left||0},K=function(O,aa){b(O).each(function(){var ia=b(this),ka=b(this).data("resizable-alsoresize"),p={},t=aa&&aa.length?aa:ia.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];b.each(t,function(z,F){var ba=(ka[F]||0)+(B[F]||0);if(ba&&ba>=0)p[F]=ba||null});if(b.browser.opera&&/relative/.test(ia.css("position"))){l._revertToRelativePosition=true;ia.css({position:"absolute",top:"auto",left:"auto"})}ia.css(p)})};typeof o.alsoResize==
"object"&&!o.alsoResize.nodeType?b.each(o.alsoResize,function(O,aa){K(O,aa)}):K(o.alsoResize)},stop:function(){var g=b(this).data("resizable"),i=g.options,l=function(o){b(o).each(function(){var w=b(this);w.css({position:w.data("resizable-alsoresize").position})})};if(g._revertToRelativePosition){g._revertToRelativePosition=false;typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?b.each(i.alsoResize,function(o){l(o)}):l(i.alsoResize)}b(this).removeData("resizable-alsoresize")}});b.ui.plugin.add("resizable",
"animate",{stop:function(g){var i=b(this).data("resizable"),l=i.options,o=i._proportionallyResizeElements,w=o.length&&/textarea/i.test(o[0].nodeName),C=w&&b.ui.hasScroll(o[0],"left")?0:i.sizeDiff.height;w={width:i.size.width-(w?0:i.sizeDiff.width),height:i.size.height-C};C=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null;var B=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(b.extend(w,B&&C?{top:B,left:C}:{}),{duration:l.animateDuration,
easing:l.animateEasing,step:function(){var K={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};o&&o.length&&b(o[0]).css({width:K.width,height:K.height});i._updateCache(K);i._propagate("resize",g)}})}});b.ui.plugin.add("resizable","containment",{start:function(){var g=b(this).data("resizable"),i=g.element,l=g.options.containment;if(i=l instanceof b?l.get(0):/parent/.test(l)?i.parent().get(0):
l){g.containerElement=b(i);if(/document/.test(l)||l==document){g.containerOffset={left:0,top:0};g.containerPosition={left:0,top:0};g.parentData={element:b(document),left:0,top:0,width:b(document).width(),height:b(document).height()||document.body.parentNode.scrollHeight}}else{var o=b(i),w=[];b(["Top","Right","Left","Bottom"]).each(function(K,O){w[K]=a(o.css("padding"+O))});g.containerOffset=o.offset();g.containerPosition=o.position();g.containerSize={height:o.innerHeight()-w[3],width:o.innerWidth()-
w[1]};l=g.containerOffset;var C=g.containerSize.height,B=g.containerSize.width;B=b.ui.hasScroll(i,"left")?i.scrollWidth:B;C=b.ui.hasScroll(i)?i.scrollHeight:C;g.parentData={element:i,left:l.left,top:l.top,width:B,height:C}}}},resize:function(g){var i=b(this).data("resizable"),l=i.options,o=i.containerOffset,w=i.position;g=i._aspectRatio||g.shiftKey;var C={top:0,left:0},B=i.containerElement;if(B[0]!=document&&/static/.test(B.css("position")))C=o;if(w.left<(i._helper?o.left:0)){i.size.width+=i._helper?
i.position.left-o.left:i.position.left-C.left;if(g)i.size.height=i.size.width/l.aspectRatio;i.position.left=l.helper?o.left:0}if(w.top<(i._helper?o.top:0)){i.size.height+=i._helper?i.position.top-o.top:i.position.top;if(g)i.size.width=i.size.height*l.aspectRatio;i.position.top=i._helper?o.top:0}i.offset.left=i.parentData.left+i.position.left;i.offset.top=i.parentData.top+i.position.top;l=Math.abs((i._helper?i.offset.left-C.left:i.offset.left-C.left)+i.sizeDiff.width);o=Math.abs((i._helper?i.offset.top-
C.top:i.offset.top-o.top)+i.sizeDiff.height);w=i.containerElement.get(0)==i.element.parent().get(0);C=/relative|absolute/.test(i.containerElement.css("position"));if(w&&C)l-=i.parentData.left;if(l+i.size.width>=i.parentData.width){i.size.width=i.parentData.width-l;if(g)i.size.height=i.size.width/i.aspectRatio}if(o+i.size.height>=i.parentData.height){i.size.height=i.parentData.height-o;if(g)i.size.width=i.size.height*i.aspectRatio}},stop:function(){var g=b(this).data("resizable"),i=g.options,l=g.containerOffset,
o=g.containerPosition,w=g.containerElement,C=b(g.helper),B=C.offset(),K=C.outerWidth()-g.sizeDiff.width;C=C.outerHeight()-g.sizeDiff.height;g._helper&&!i.animate&&/relative/.test(w.css("position"))&&b(this).css({left:B.left-o.left-l.left,width:K,height:C});g._helper&&!i.animate&&/static/.test(w.css("position"))&&b(this).css({left:B.left-o.left-l.left,width:K,height:C})}});b.ui.plugin.add("resizable","ghost",{start:function(){var g=b(this).data("resizable"),i=g.options,l=g.size;g.ghost=g.originalElement.clone();
g.ghost.css({opacity:0.25,display:"block",position:"relative",height:l.height,width:l.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:"");g.ghost.appendTo(g.helper)},resize:function(){var g=b(this).data("resizable");g.ghost&&g.ghost.css({position:"relative",height:g.size.height,width:g.size.width})},stop:function(){var g=b(this).data("resizable");g.ghost&&g.helper&&g.helper.get(0).removeChild(g.ghost.get(0))}});b.ui.plugin.add("resizable","grid",
{resize:function(){var g=b(this).data("resizable"),i=g.options,l=g.size,o=g.originalSize,w=g.originalPosition,C=g.axis;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var B=Math.round((l.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1);i=Math.round((l.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);if(/^(se|s|e)$/.test(C)){g.size.width=o.width+B;g.size.height=o.height+i}else if(/^(ne)$/.test(C)){g.size.width=o.width+B;g.size.height=o.height+i;g.position.top=w.top-i}else{if(/^(sw)$/.test(C)){g.size.width=
o.width+B;g.size.height=o.height+i}else{g.size.width=o.width+B;g.size.height=o.height+i;g.position.top=w.top-i}g.position.left=w.left-B}}});var a=function(g){return parseInt(g,10)||0},e=function(g){return!isNaN(parseInt(g,10))}})(jQuery);
(function(b){b.widget("ui.selectable",b.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var a=this;this.element.addClass("ui-selectable");this.dragged=false;var e;this.refresh=function(){e=b(a.options.filter,a.element[0]);e.each(function(){var g=b(this),i=g.offset();b.data(this,"selectable-item",{element:this,$element:g,left:i.left,top:i.top,right:i.left+g.outerWidth(),bottom:i.top+g.outerHeight(),startselected:false,selected:g.hasClass("ui-selected"),
selecting:g.hasClass("ui-selecting"),unselecting:g.hasClass("ui-unselecting")})})};this.refresh();this.selectees=e.addClass("ui-selectee");this._mouseInit();this.helper=b("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(a){var e=this;this.opos=[a.pageX,
a.pageY];if(!this.options.disabled){var g=this.options;this.selectees=b(g.filter,this.element[0]);this._trigger("start",a);b(g.appendTo).append(this.helper);this.helper.css({left:a.clientX,top:a.clientY,width:0,height:0});g.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var i=b.data(this,"selectable-item");i.startselected=true;if(!a.metaKey){i.$element.removeClass("ui-selected");i.selected=false;i.$element.addClass("ui-unselecting");i.unselecting=true;e._trigger("unselecting",
a,{unselecting:i.element})}});b(a.target).parents().andSelf().each(function(){var i=b.data(this,"selectable-item");if(i){var l=!a.metaKey||!i.$element.hasClass("ui-selected");i.$element.removeClass(l?"ui-unselecting":"ui-selected").addClass(l?"ui-selecting":"ui-unselecting");i.unselecting=!l;i.selecting=l;(i.selected=l)?e._trigger("selecting",a,{selecting:i.element}):e._trigger("unselecting",a,{unselecting:i.element});return false}})}},_mouseDrag:function(a){var e=this;this.dragged=true;if(!this.options.disabled){var g=
this.options,i=this.opos[0],l=this.opos[1],o=a.pageX,w=a.pageY;if(i>o){var C=o;o=i;i=C}if(l>w){C=w;w=l;l=C}this.helper.css({left:i,top:l,width:o-i,height:w-l});this.selectees.each(function(){var B=b.data(this,"selectable-item");if(!(!B||B.element==e.element[0])){var K=false;if(g.tolerance=="touch")K=!(B.left>o||B.right<i||B.top>w||B.bottom<l);else if(g.tolerance=="fit")K=B.left>i&&B.right<o&&B.top>l&&B.bottom<w;if(K){if(B.selected){B.$element.removeClass("ui-selected");B.selected=false}if(B.unselecting){B.$element.removeClass("ui-unselecting");
B.unselecting=false}if(!B.selecting){B.$element.addClass("ui-selecting");B.selecting=true;e._trigger("selecting",a,{selecting:B.element})}}else{if(B.selecting)if(a.metaKey&&B.startselected){B.$element.removeClass("ui-selecting");B.selecting=false;B.$element.addClass("ui-selected");B.selected=true}else{B.$element.removeClass("ui-selecting");B.selecting=false;if(B.startselected){B.$element.addClass("ui-unselecting");B.unselecting=true}e._trigger("unselecting",a,{unselecting:B.element})}if(B.selected)if(!a.metaKey&&
!B.startselected){B.$element.removeClass("ui-selected");B.selected=false;B.$element.addClass("ui-unselecting");B.unselecting=true;e._trigger("unselecting",a,{unselecting:B.element})}}}});return false}},_mouseStop:function(a){var e=this;this.dragged=false;b(".ui-unselecting",this.element[0]).each(function(){var g=b.data(this,"selectable-item");g.$element.removeClass("ui-unselecting");g.unselecting=false;g.startselected=false;e._trigger("unselected",a,{unselected:g.element})});b(".ui-selecting",this.element[0]).each(function(){var g=
b.data(this,"selectable-item");g.$element.removeClass("ui-selecting").addClass("ui-selected");g.selecting=false;g.selected=true;g.startselected=true;e._trigger("selected",a,{selected:g.element})});this._trigger("stop",a);this.helper.remove();return false}});b.extend(b.ui.selectable,{version:"1.8.16"})})(jQuery);
(function(b){b.widget("ui.sortable",b.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?a.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(a,e){if(a===
"disabled"){this.options[a]=e;this.widget()[e?"addClass":"removeClass"]("ui-sortable-disabled")}else b.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,e){if(this.reverting)return false;if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(a);var g=null,i=this;b(a.target).parents().each(function(){if(b.data(this,"sortable-item")==i){g=b(this);return false}});if(b.data(a.target,"sortable-item")==i)g=b(a.target);if(!g)return false;if(this.options.handle&&
!e){var l=false;b(this.options.handle,g).find("*").andSelf().each(function(){if(this==a.target)l=true});if(!l)return false}this.currentItem=g;this._removeCurrentsFromItems();return true},_mouseStart:function(a,e,g){e=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-
this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");b.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();e.containment&&this._setContainment();if(e.cursor){if(b("body").css("cursor"))this._storedCursor=b("body").css("cursor");b("body").css("cursor",e.cursor)}if(e.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",e.opacity)}if(e.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",e.zIndex)}if(this.scrollParent[0]!=
document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!g)for(g=this.containers.length-1;g>=0;g--)this.containers[g]._trigger("activate",a,this._uiHash(this));if(b.ui.ddmanager)b.ui.ddmanager.current=this;b.ui.ddmanager&&!e.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,a);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);
return true},_mouseDrag:function(a){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var e=this.options,g=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<e.scrollSensitivity)this.scrollParent[0].scrollTop=g=this.scrollParent[0].scrollTop+e.scrollSpeed;else if(a.pageY-this.overflowOffset.top<
e.scrollSensitivity)this.scrollParent[0].scrollTop=g=this.scrollParent[0].scrollTop-e.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<e.scrollSensitivity)this.scrollParent[0].scrollLeft=g=this.scrollParent[0].scrollLeft+e.scrollSpeed;else if(a.pageX-this.overflowOffset.left<e.scrollSensitivity)this.scrollParent[0].scrollLeft=g=this.scrollParent[0].scrollLeft-e.scrollSpeed}else{if(a.pageY-b(document).scrollTop()<e.scrollSensitivity)g=b(document).scrollTop(b(document).scrollTop()-
e.scrollSpeed);else if(b(window).height()-(a.pageY-b(document).scrollTop())<e.scrollSensitivity)g=b(document).scrollTop(b(document).scrollTop()+e.scrollSpeed);if(a.pageX-b(document).scrollLeft()<e.scrollSensitivity)g=b(document).scrollLeft(b(document).scrollLeft()-e.scrollSpeed);else if(b(window).width()-(a.pageX-b(document).scrollLeft())<e.scrollSensitivity)g=b(document).scrollLeft(b(document).scrollLeft()+e.scrollSpeed)}g!==false&&b.ui.ddmanager&&!e.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,
a)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(e=this.items.length-1;e>=0;e--){g=this.items[e];var i=g.item[0],l=this._intersectsWithPointer(g);if(l)if(i!=this.currentItem[0]&&this.placeholder[l==1?"next":"prev"]()[0]!=i&&!b.ui.contains(this.placeholder[0],i)&&(this.options.type=="semi-dynamic"?!b.ui.contains(this.element[0],
i):true)){this.direction=l==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(g))this._rearrange(a,g);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);b.ui.ddmanager&&b.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(a,e){if(a){b.ui.ddmanager&&!this.options.dropBehaviour&&b.ui.ddmanager.drop(this,a);if(this.options.revert){var g=this,i=g.placeholder.offset();
g.reverting=true;b(this.helper).animate({left:i.left-this.offset.parent.left-g.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-g.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){g._clear(a)})}else this._clear(a,e);return false}},cancel:function(){if(this.dragging){this._mouseUp({target:null});this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):
this.currentItem.show();for(var a=this.containers.length-1;a>=0;a--){this.containers[a]._trigger("deactivate",null,this._uiHash(this));if(this.containers[a].containerCache.over){this.containers[a]._trigger("out",null,this._uiHash(this));this.containers[a].containerCache.over=0}}}if(this.placeholder){this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();b.extend(this,
{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?b(this.domPosition.prev).after(this.currentItem):b(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(a){var e=this._getItemsAsjQuery(a&&a.connected),g=[];a=a||{};b(e).each(function(){var i=(b(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);if(i)g.push((a.key||i[1]+"[]")+"="+(a.key&&a.expression?i[1]:i[2]))});!g.length&&a.key&&g.push(a.key+"=");return g.join("&")},
toArray:function(a){var e=this._getItemsAsjQuery(a&&a.connected),g=[];a=a||{};e.each(function(){g.push(b(a.item||this).attr(a.attribute||"id")||"")});return g},_intersectsWith:function(a){var e=this.positionAbs.left,g=e+this.helperProportions.width,i=this.positionAbs.top,l=i+this.helperProportions.height,o=a.left,w=o+a.width,C=a.top,B=C+a.height,K=this.offset.click.top,O=this.offset.click.left;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=
"pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?i+K>C&&i+K<B&&e+O>o&&e+O<w:o<e+this.helperProportions.width/2&&g-this.helperProportions.width/2<w&&C<i+this.helperProportions.height/2&&l-this.helperProportions.height/2<B},_intersectsWithPointer:function(a){var e=b.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height);a=b.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);e=e&&a;a=this._getDragVerticalDirection();
var g=this._getDragHorizontalDirection();if(!e)return false;return this.floating?g&&g=="right"||a=="down"?2:1:a&&(a=="down"?2:1)},_intersectsWithSides:function(a){var e=b.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=b.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var g=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?i=="right"&&a||i=="left"&&!a:g&&(g=="down"&&e||g=="up"&&!e)},
_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){var e=[],g=[],i=this._connectWith();
if(i&&a)for(a=i.length-1;a>=0;a--)for(var l=b(i[a]),o=l.length-1;o>=0;o--){var w=b.data(l[o],"sortable");if(w&&w!=this&&!w.options.disabled)g.push([b.isFunction(w.options.items)?w.options.items.call(w.element):b(w.options.items,w.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),w])}g.push([b.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):b(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
this]);for(a=g.length-1;a>=0;a--)g[a][0].each(function(){e.push(this)});return b(e)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data(sortable-item)"),e=0;e<this.items.length;e++)for(var g=0;g<a.length;g++)a[g]==this.items[e].item[0]&&this.items.splice(e,1)},_refreshItems:function(a){this.items=[];this.containers=[this];var e=this.items,g=[[b.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):b(this.options.items,this.element),
this]],i=this._connectWith();if(i)for(var l=i.length-1;l>=0;l--)for(var o=b(i[l]),w=o.length-1;w>=0;w--){var C=b.data(o[w],"sortable");if(C&&C!=this&&!C.options.disabled){g.push([b.isFunction(C.options.items)?C.options.items.call(C.element[0],a,{item:this.currentItem}):b(C.options.items,C.element),C]);this.containers.push(C)}}for(l=g.length-1;l>=0;l--){a=g[l][1];i=g[l][0];w=0;for(o=i.length;w<o;w++){C=b(i[w]);C.data("sortable-item",a);e.push({item:C,instance:a,width:0,height:0,left:0,top:0})}}},refreshPositions:function(a){if(this.offsetParent&&
this.helper)this.offset.parent=this._getParentOffset();for(var e=this.items.length-1;e>=0;e--){var g=this.items[e];if(!(g.instance!=this.currentContainer&&this.currentContainer&&g.item[0]!=this.currentItem[0])){var i=this.options.toleranceElement?b(this.options.toleranceElement,g.item):g.item;if(!a){g.width=i.outerWidth();g.height=i.outerHeight()}i=i.offset();g.left=i.left;g.top=i.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=
this.containers.length-1;e>=0;e--){i=this.containers[e].element.offset();this.containers[e].containerCache.left=i.left;this.containers[e].containerCache.top=i.top;this.containers[e].containerCache.width=this.containers[e].element.outerWidth();this.containers[e].containerCache.height=this.containers[e].element.outerHeight()}return this},_createPlaceholder:function(a){var e=a||this,g=e.options;if(!g.placeholder||g.placeholder.constructor==String){var i=g.placeholder;g.placeholder={element:function(){var l=
b(document.createElement(e.currentItem[0].nodeName)).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!i)l.style.visibility="hidden";return l},update:function(l,o){if(!(i&&!g.forcePlaceholderSize)){o.height()||o.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10));o.width()||o.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||
0,10))}}}}e.placeholder=b(g.placeholder.element.call(e.element,e.currentItem));e.currentItem.after(e.placeholder);g.placeholder.update(e,e.placeholder)},_contactContainers:function(a){for(var e=null,g=null,i=this.containers.length-1;i>=0;i--)if(!b.ui.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(!(e&&b.ui.contains(this.containers[i].element[0],e.element[0]))){e=this.containers[i];g=i}}else if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",
a,this._uiHash(this));this.containers[i].containerCache.over=0}if(e)if(this.containers.length===1){this.containers[g]._trigger("over",a,this._uiHash(this));this.containers[g].containerCache.over=1}else if(this.currentContainer!=this.containers[g]){e=1E4;i=null;for(var l=this.positionAbs[this.containers[g].floating?"left":"top"],o=this.items.length-1;o>=0;o--)if(b.ui.contains(this.containers[g].element[0],this.items[o].item[0])){var w=this.items[o][this.containers[g].floating?"left":"top"];if(Math.abs(w-
l)<e){e=Math.abs(w-l);i=this.items[o]}}if(i||this.options.dropOnEmpty){this.currentContainer=this.containers[g];i?this._rearrange(a,i,null,true):this._rearrange(a,null,this.containers[g].element,true);this._trigger("change",a,this._uiHash());this.containers[g]._trigger("change",a,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[g]._trigger("over",a,this._uiHash(this));this.containers[g].containerCache.over=1}}},_createHelper:function(a){var e=
this.options;a=b.isFunction(e.helper)?b(e.helper.apply(this.element[0],[a,this.currentItem])):e.helper=="clone"?this.currentItem.clone():this.currentItem;a.parents("body").length||b(e.appendTo!="parent"?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);if(a[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(a[0].style.width==
""||e.forceHelperSize)a.width(this.currentItem.width());if(a[0].style.height==""||e.forceHelperSize)a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(b.isArray(a))a={left:+a[0],top:+a[1]||0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=
this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&b.browser.msie)a=
{top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),
10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,b(a.containment=="document"?
document:window).width()-this.helperProportions.width-this.margins.left,(b(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var e=b(a.containment)[0];a=b(a.containment).offset();var g=b(e).css("overflow")!="hidden";this.containment=[a.left+(parseInt(b(e).css("borderLeftWidth"),10)||0)+(parseInt(b(e).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(b(e).css("borderTopWidth"),
10)||0)+(parseInt(b(e).css("paddingTop"),10)||0)-this.margins.top,a.left+(g?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(b(e).css("borderLeftWidth"),10)||0)-(parseInt(b(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(g?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(b(e).css("borderTopWidth"),10)||0)-(parseInt(b(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,e){if(!e)e=
this.position;var g=a=="absolute"?1:-1,i=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*g+this.offset.parent.top*g-(b.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():l?0:i.scrollTop())*g),left:e.left+this.offset.relative.left*g+this.offset.parent.left*g-(b.browser.safari&&
this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:i.scrollLeft())*g)}},_generatePosition:function(a){var e=this.options,g=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=/(html|body)/i.test(g[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();
var l=a.pageX,o=a.pageY;if(this.originalPosition){if(this.containment){if(a.pageX-this.offset.click.left<this.containment[0])l=this.containment[0]+this.offset.click.left;if(a.pageY-this.offset.click.top<this.containment[1])o=this.containment[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>this.containment[2])l=this.containment[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>this.containment[3])o=this.containment[3]+this.offset.click.top}if(e.grid){o=this.originalPageY+Math.round((o-
this.originalPageY)/e.grid[1])*e.grid[1];o=this.containment?!(o-this.offset.click.top<this.containment[1]||o-this.offset.click.top>this.containment[3])?o:!(o-this.offset.click.top<this.containment[1])?o-e.grid[1]:o+e.grid[1]:o;l=this.originalPageX+Math.round((l-this.originalPageX)/e.grid[0])*e.grid[0];l=this.containment?!(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l:!(l-this.offset.click.left<this.containment[0])?l-e.grid[0]:l+e.grid[0]:l}}return{top:o-
this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(b.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:g.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(b.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:g.scrollLeft())}},_rearrange:function(a,e,g,i){g?g[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],
this.direction=="down"?e.item[0]:e.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var l=this,o=this.counter;window.setTimeout(function(){o==l.counter&&l.refreshPositions(!i)},0)},_clear:function(a,e){this.reverting=false;var g=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")this._storedCSS[i]=
"";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!e&&g.push(function(l){this._trigger("receive",l,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!e)g.push(function(l){this._trigger("update",l,this._uiHash())});if(!b.ui.contains(this.element[0],this.currentItem[0])){e||g.push(function(l){this._trigger("remove",
l,this._uiHash())});for(i=this.containers.length-1;i>=0;i--)if(b.ui.contains(this.containers[i].element[0],this.currentItem[0])&&!e){g.push(function(l){return function(o){l._trigger("receive",o,this._uiHash(this))}}.call(this,this.containers[i]));g.push(function(l){return function(o){l._trigger("update",o,this._uiHash(this))}}.call(this,this.containers[i]))}}for(i=this.containers.length-1;i>=0;i--){e||g.push(function(l){return function(o){l._trigger("deactivate",o,this._uiHash(this))}}.call(this,
this.containers[i]));if(this.containers[i].containerCache.over){g.push(function(l){return function(o){l._trigger("out",o,this._uiHash(this))}}.call(this,this.containers[i]));this.containers[i].containerCache.over=0}}this._storedCursor&&b("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!e){this._trigger("beforeStop",
a,this._uiHash());for(i=0;i<g.length;i++)g[i].call(this,a);this._trigger("stop",a,this._uiHash())}return false}e||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!e){for(i=0;i<g.length;i++)g[i].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){b.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},
_uiHash:function(a){var e=a||this;return{helper:e.helper,placeholder:e.placeholder||b([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:a?a.element:null}}});b.extend(b.ui.sortable,{version:"1.8.16"})})(jQuery);
(function(b,a){var e,g=/:([\w\d]+)/g,i=/\?([^#]*)$/,l=function(p){return Array.prototype.slice.call(p)},o=function(p){return Object.prototype.toString.call(p)==="[object Function]"},w=function(p){return Object.prototype.toString.call(p)==="[object Array]"},C=function(p){return decodeURIComponent((p||"").replace(/\+/g," "))},B=encodeURIComponent,K=function(p){return String(p).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},O=function(p){return function(t,
z){return this.route.apply(this,[p,t,z])}},aa={},ia=!!(a.history&&history.pushState),ka=[];e=function(){var p=l(arguments),t,z;e.apps=e.apps||{};if(p.length===0||p[0]&&o(p[0]))return e.apply(e,["body"].concat(p));else if(typeof(z=p.shift())=="string"){t=e.apps[z]||new e.Application;t.element_selector=z;p.length>0&&b.each(p,function(F,ba){t.use(ba)});t.element_selector!=z&&delete e.apps[z];return e.apps[t.element_selector]=t}};e.VERSION="0.7.0";e.addLogger=function(p){ka.push(p)};e.log=function(){var p=
l(arguments);p.unshift("["+Date()+"]");b.each(ka,function(t,z){z.apply(e,p)})};if(typeof a.console!="undefined")o(a.console.log.apply)?e.addLogger(function(){a.console.log.apply(a.console,arguments)}):e.addLogger(function(){a.console.log(arguments)});else typeof console!="undefined"&&e.addLogger(function(){console.log.apply(console,arguments)});b.extend(e,{makeArray:l,isFunction:o,isArray:w});e.Object=function(p){return b.extend(this,p||{})};b.extend(e.Object.prototype,{escapeHTML:K,h:K,toHash:function(){var p=
{};b.each(this,function(t,z){o(z)||(p[t]=z)});return p},toHTML:function(){var p="";b.each(this,function(t,z){o(z)||(p+="<strong>"+t+"</strong> "+z+"<br />")});return p},keys:function(p){var t=[];for(var z in this)if(!o(this[z])||!p)t.push(z);return t},has:function(p){return this[p]&&b.trim(this[p].toString())!==""},join:function(){var p=l(arguments),t=p.shift();return p.join(t)},log:function(){e.log.apply(e,arguments)},toString:function(p){var t=[];b.each(this,function(z,F){if(!o(F)||p)t.push('"'+
z+'": '+F.toString())});return"Sammy.Object: {"+t.join(",")+"}"}});e.DefaultLocationProxy=function(p,t){this.app=p;this.is_native=false;this.has_history=ia;this._startPolling(t)};e.DefaultLocationProxy.fullPath=function(p){var t=p.toString().match(/^[^#]*(#.+)$/);return[p.pathname,p.search,t?t[1]:""].join("")};e.DefaultLocationProxy.prototype={bind:function(){var p=this,t=this.app,z=e.DefaultLocationProxy;b(a).bind("hashchange."+this.app.eventNamespace(),function(F,ba){if(p.is_native===false&&!ba){p.is_native=
true;a.clearInterval(z._interval)}t.trigger("location-changed")});if(ia&&!t.disable_push_state){b(a).bind("popstate."+this.app.eventNamespace(),function(){t.trigger("location-changed")});b("a").live("click.history-"+this.app.eventNamespace(),function(F){var ba=z.fullPath(this);if(this.hostname==a.location.hostname&&t.lookupRoute("get",ba)){F.preventDefault();p.setLocation(ba);return false}})}if(!z._bindings)z._bindings=0;z._bindings++},unbind:function(){b(a).unbind("hashchange."+this.app.eventNamespace());
b(a).unbind("popstate."+this.app.eventNamespace());b("a").die("click.history-"+this.app.eventNamespace());e.DefaultLocationProxy._bindings--;e.DefaultLocationProxy._bindings<=0&&a.clearInterval(e.DefaultLocationProxy._interval)},getLocation:function(){return e.DefaultLocationProxy.fullPath(a.location)},setLocation:function(p){if(/^([^#\/]|$)/.test(p))p=ia?"/"+p:"#!/"+p;if(p!=this.getLocation())if(ia&&/^\//.test(p)){history.pushState({path:p},a.title,p);this.app.trigger("location-changed")}else return a.location=
p},_startPolling:function(p){var t=this;if(!e.DefaultLocationProxy._interval){p||(p=10);var z=function(){var F=t.getLocation();if(typeof e.DefaultLocationProxy._last_location=="undefined"||F!=e.DefaultLocationProxy._last_location)a.setTimeout(function(){b(a).trigger("hashchange",[true])},0);e.DefaultLocationProxy._last_location=F};z();e.DefaultLocationProxy._interval=a.setInterval(z,p)}}};e.Application=function(p){var t=this;this.routes={};this.listeners=new e.Object({});this.arounds=[];this.befores=
[];this.namespace=(new Date).getTime()+"-"+parseInt(Math.random()*1E3,10);this.context_prototype=function(){e.EventContext.apply(this,arguments)};this.context_prototype.prototype=new e.EventContext;o(p)&&p.apply(this,[this]);this._location_proxy||this.setLocationProxy(new e.DefaultLocationProxy(this,this.run_interval_every));this.debug&&this.bindToAllEvents(function(z,F){t.log(t.toString(),z.cleaned_type,F||{})})};e.Application.prototype=b.extend({},e.Object.prototype,{ROUTE_VERBS:["get","post","put",
"delete"],APP_EVENTS:["run","unload","lookup-route","run-route","route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect","location-changed"],_last_route:null,_location_proxy:null,_running:false,element_selector:"body",debug:false,raise_errors:false,run_interval_every:50,disable_push_state:false,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(p){return p?b(this.element_selector).find(p):
b(this.element_selector)},use:function(){var p=l(arguments),t=p.shift(),z=t||"";try{p.unshift(this);if(typeof t=="string"){z="Sammy."+t;t=e[t]}t.apply(this,p)}catch(F){if(typeof t==="undefined")this.error("Plugin Error: called use() but plugin ("+z.toString()+") is not defined",F);else o(t)?this.error("Plugin Error",F):this.error("Plugin Error: called use() but '"+z.toString()+"' is not a function",F)}return this},setLocationProxy:function(p){var t=this._location_proxy;this._location_proxy=p;if(this.isRunning()){t&&
t.unbind();this._location_proxy.bind()}},route:function(p,t,z){var F=this,ba=[],ga,la;if(!z&&o(t)){z=t=p;p="any"}p=p.toLowerCase();if(t.constructor==String){for(g.lastIndex=0;(la=g.exec(t))!==null;)ba.push(la[1]);t=new RegExp(t.replace(g,"([^/]+)")+"$")}if(typeof z=="string")z=F[z];ga=function(na){var oa={verb:na,path:t,callback:z,param_names:ba};F.routes[na]=F.routes[na]||[];F.routes[na].push(oa)};p==="any"?b.each(this.ROUTE_VERBS,function(na,oa){ga(oa)}):ga(p);return this},get:O("get"),post:O("post"),
put:O("put"),del:O("delete"),any:O("any"),mapRoutes:function(p){var t=this;b.each(p,function(z,F){t.route.apply(t,F)});return this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(p,t,z){var F=this;if(typeof z=="undefined")z=t;t=function(ba,ga){var la;if(ga&&ga.context){la=ga.context;delete ga.context}else la=new F.context_prototype(F,"bind",ba.type,ga,ba.target);ba.cleaned_type=ba.type.replace(F.eventNamespace(),"");z.apply(la,[ba,ga])};this.listeners[p]||(this.listeners[p]=
[]);this.listeners[p].push(t);this.isRunning()&&this._listen(p,t);return this},trigger:function(p,t){this.$element().trigger([p,this.eventNamespace()].join("."),[t]);return this},refresh:function(){this.last_location=null;this.trigger("location-changed");return this},before:function(p,t){if(o(p)){t=p;p={}}this.befores.push([p,t]);return this},after:function(p){return this.bind("event-context-after",p)},around:function(p){this.arounds.push(p);return this},isRunning:function(){return this._running},
helpers:function(p){b.extend(this.context_prototype.prototype,p);return this},helper:function(p,t){this.context_prototype.prototype[p]=t;return this},run:function(p){if(this.isRunning())return false;var t=this;b.each(this.listeners.toHash(),function(z,F){b.each(F,function(ba,ga){t._listen(z,ga)})});this.trigger("run",{start_url:p});this._running=true;this.last_location=null;!/\#(.+)/.test(this.getLocation())&&typeof p!="undefined"&&this.setLocation(p);this._checkLocation();this._location_proxy.bind();
this.bind("location-changed",function(){t._checkLocation()});this.bind("submit",function(z){return t._checkFormSubmission(b(z.target).closest("form"))===false?z.preventDefault():false});b(a).bind("beforeunload",function(){t.unload()});return this.trigger("changed")},unload:function(){if(!this.isRunning())return false;var p=this;this.trigger("unload");this._location_proxy.unbind();this.$element().unbind("submit").removeClass(p.eventNamespace());b.each(this.listeners.toHash(),function(t,z){b.each(z,
function(F,ba){p._unlisten(t,ba)})});this._running=false;return this},bindToAllEvents:function(p){var t=this;b.each(this.APP_EVENTS,function(z,F){t.bind(F,p)});b.each(this.listeners.keys(true),function(z,F){b.inArray(F,t.APP_EVENTS)==-1&&t.bind(F,p)});return this},routablePath:function(p){return p.replace(i,"")},lookupRoute:function(p,t){var z=false,F=0,ba,ga;if(typeof this.routes[p]!="undefined")for(ba=this.routes[p].length;F<ba;F++){ga=this.routes[p][F];if(this.routablePath(t).match(ga.path)){z=
ga;break}}return z},runRoute:function(p,t,z,F){var ba=this,ga=this.lookupRoute(p,t),la,na,oa,Ca,Ua,Va,V;this.log("runRoute",[p,t].join(" "));this.trigger("run-route",{verb:p,path:t,params:z});if(typeof z=="undefined")z={};b.extend(z,this._parseQueryString(t));if(ga){this.trigger("route-found",{route:ga});if((Va=ga.path.exec(this.routablePath(t)))!==null){Va.shift();b.each(Va,function(U,f){if(ga.param_names[U])z[ga.param_names[U]]=C(f);else{if(!z.splat)z.splat=[];z.splat.push(C(f))}})}la=new this.context_prototype(this,
p,t,z,F);F=this.arounds.slice(0);oa=this.befores.slice(0);Ua=[la].concat(z.splat);na=function(){for(var U;oa.length>0;){Ca=oa.shift();if(ba.contextMatchesOptions(la,Ca[0])){U=Ca[1].apply(la,[la]);if(U===false)return false}}ba.last_route=ga;la.trigger("event-context-before",{context:la});U=ga.callback.apply(la,Ua);la.trigger("event-context-after",{context:la});return U};b.each(F.reverse(),function(U,f){var A=na;na=function(){return f.apply(la,[A])}});try{V=na()}catch(Q){this.error(["500 Error",p,t].join(" "),
Q)}return V}else return this.notFound(p,t)},contextMatchesOptions:function(p,t,z){t=t;if(typeof t==="undefined"||t=={})return true;if(typeof z==="undefined")z=true;if(typeof t==="string"||o(t.test))t={path:t};if(t.only)return this.contextMatchesOptions(p,t.only,true);else if(t.except)return this.contextMatchesOptions(p,t.except,false);var F=true,ba=true;if(t.path){if(!o(t.path.test))t.path=new RegExp(t.path.toString()+"$");F=t.path.test(p.path)}if(t.verb)ba=typeof t.verb==="string"?t.verb===p.verb:
t.verb.indexOf(p.verb)>-1;return z?ba&&F:!(ba&&F)},getLocation:function(){return this._location_proxy.getLocation()},setLocation:function(p){return this._location_proxy.setLocation(p)},swap:function(p){return this.$element().html(p)},templateCache:function(p,t){return typeof t!="undefined"?(aa[p]=t):aa[p]},clearTemplateCache:function(){return aa={}},notFound:function(p,t){var z=this.error(["404 Not Found",p,t].join(" "));return p==="get"?z:true},error:function(p,t){t||(t=new Error);t.message=[p,t.message].join(" ");
this.trigger("error",{message:t.message,error:t});if(this.raise_errors)throw t;else this.log(t.message,t)},_checkLocation:function(){var p,t;p=this.getLocation();if(!this.last_location||this.last_location[0]!="get"||this.last_location[1]!=p){this.last_location=["get",p];t=this.runRoute("get",p)}return t},_getFormVerb:function(p){p=b(p);var t,z;z=p.find('input[name="_method"]');if(z.length>0)t=z.val();t||(t=p[0].getAttribute("method"));if(!t||t=="")t="get";return b.trim(t.toString().toLowerCase())},
_checkFormSubmission:function(p){var t,z,F;this.trigger("check-form-submission",{form:p});t=b(p);z=t.attr("action")||"";F=this._getFormVerb(t);this.log("_checkFormSubmission",t,z,F);if(F==="get"){this.setLocation(z+"?"+this._serializeFormParams(t));p=false}else{t=b.extend({},this._parseFormParams(t));p=this.runRoute(F,z,t,p.get(0))}return typeof p=="undefined"?false:p},_serializeFormParams:function(p){var t="";p=p.serializeArray();var z;if(p.length>0){t=this._encodeFormPair(p[0].name,p[0].value);
for(z=1;z<p.length;z++)t=t+"&"+this._encodeFormPair(p[z].name,p[z].value)}return t},_encodeFormPair:function(p,t){return B(p)+"="+B(t)},_parseFormParams:function(p){var t={};p=p.serializeArray();var z;for(z=0;z<p.length;z++)t=this._parseParamPair(t,p[z].name,p[z].value);return t},_parseQueryString:function(p){var t={},z,F;if(p=p.match(i)){p=p[1].split("&");for(F=0;F<p.length;F++){z=p[F].split("=");t=this._parseParamPair(t,C(z[0]),C(z[1]||""))}}return t},_parseParamPair:function(p,t,z){if(p[t])if(w(p[t]))p[t].push(z);
else p[t]=[p[t],z];else p[t]=z;return p},_listen:function(p,t){return this.$element().bind([p,this.eventNamespace()].join("."),t)},_unlisten:function(p,t){return this.$element().unbind([p,this.eventNamespace()].join("."),t)}});e.RenderContext=function(p){this.event_context=p;this.callbacks=[];this.content=this.previous_content=null;this.waiting=this.next_engine=false};e.RenderContext.prototype=b.extend({},e.Object.prototype,{then:function(p){if(!o(p))if(typeof p==="string"&&p in this.event_context){var t=
this.event_context[p];p=function(F){return t.apply(this.event_context,[F])}}else return this;var z=this;if(this.waiting)this.callbacks.push(p);else{this.wait();a.setTimeout(function(){var F=p.apply(z,[z.content,z.previous_content]);F!==false&&z.next(F)},0)}return this},wait:function(){this.waiting=true},next:function(p){this.waiting=false;if(typeof p!=="undefined"){this.previous_content=this.content;this.content=p}this.callbacks.length>0&&this.then(this.callbacks.shift())},load:function(p,t,z){var F=
this;return this.then(function(){var ba,ga,la;if(o(t)){z=t;t={}}else t=b.extend({},t);z&&this.then(z);if(typeof p==="string"){ba=(la=p.match(/\.json$/)||t.json)&&t.cache===true||t.cache!==false;F.next_engine=F.event_context.engineFor(p);delete t.cache;delete t.json;if(t.engine){F.next_engine=t.engine;delete t.engine}if(ba&&(ga=this.event_context.app.templateCache(p)))return ga;this.wait();b.ajax(b.extend({url:p,data:{},dataType:la?"json":null,type:"get",success:function(na){ba&&F.event_context.app.templateCache(p,
na);F.next(na)}},t));return false}else{if(p.nodeType)return p.innerHTML;if(p.selector){F.next_engine=p.attr("data-engine");return t.clone===false?p.remove()[0].innerHTML.toString():p[0].innerHTML.toString()}}})},loadPartials:function(p){if(p){this.partials=this.partials||{};for(name in p)this.load(p[name]).then(function(t){this.partials[name]=t})}return this},render:function(p,t,z,F){return o(p)&&!t?this.then(p):this.loadPartials(F).load(p).interpolate(t,p).then(z)},partial:function(p,t){return this.render(p,
t).swap()},send:function(){var p=this,t=l(arguments),z=t.shift();if(w(t[0]))t=t[0];return this.then(function(){t.push(function(F){p.next(F)});p.wait();z.apply(z,t);return false})},collect:function(p,t,z){var F=this,ba=function(){if(o(p)){t=p;p=this.content}var ga=[],la=false;b.each(p,function(na,oa){var Ca=t.apply(F,[na,oa]);if(Ca.jquery&&Ca.length==1){Ca=Ca[0];la=true}ga.push(Ca);return Ca});return la?ga:ga.join("")};return z?ba():this.then(ba)},renderEach:function(p,t,z,F){if(w(t)){F=z;z=t;t=null}return this.load(p).then(function(ba){var ga=
this;z||(z=w(this.previous_content)?this.previous_content:[]);if(F)b.each(z,function(la,na){var oa={},Ca=this.next_engine||p;t?(oa[t]=na):(oa=na);F(na,ga.event_context.interpolate(ba,oa,Ca))});else return this.collect(z,function(la,na){var oa={},Ca=this.next_engine||p;t?(oa[t]=na):(oa=na);return this.event_context.interpolate(ba,oa,Ca)},true)})},interpolate:function(p,t,z){var F=this;return this.then(function(ba,ga){if(!p&&ga)p=ga;if(this.next_engine){t=this.next_engine;this.next_engine=false}var la=
F.event_context.interpolate(ba,p,t,this.partials);return z?ga+la:la})},swap:function(){return this.then(function(p){this.event_context.swap(p)}).trigger("changed",{})},appendTo:function(p){return this.then(function(t){b(p).append(t)}).trigger("changed",{})},prependTo:function(p){return this.then(function(t){b(p).prepend(t)}).trigger("changed",{})},replace:function(p){return this.then(function(t){b(p).html(t)}).trigger("changed",{})},trigger:function(p,t){return this.then(function(z){if(typeof t==
"undefined")t={content:z};this.event_context.trigger(p,t)})}});e.EventContext=function(p,t,z,F,ba){this.app=p;this.verb=t;this.path=z;this.params=new e.Object(F);this.target=ba};e.EventContext.prototype=b.extend({},e.Object.prototype,{$element:function(){return this.app.$element(l(arguments).shift())},engineFor:function(p){var t;if(o(p))return p;p=(p||this.app.template_engine).toString();if(t=p.match(/\.([^\.\?\#]+)$/))p=t[1];if(p&&o(this[p]))return this[p];if(this.app.template_engine)return this.engineFor(this.app.template_engine);
return function(z){return z}},interpolate:function(p,t,z,F){return this.engineFor(z).apply(this,[p,t,F])},render:function(p,t,z,F){return(new e.RenderContext(this)).render(p,t,z,F)},renderEach:function(p,t,z,F){return(new e.RenderContext(this)).renderEach(p,t,z,F)},load:function(p,t,z){return(new e.RenderContext(this)).load(p,t,z)},partial:function(p,t){return(new e.RenderContext(this)).partial(p,t)},send:function(){var p=new e.RenderContext(this);return p.send.apply(p,arguments)},redirect:function(){var p;
p=l(arguments);var t=this.app.getLocation(),z=p.length;if(z>1){for(var F=0,ba=[],ga=[],la={},na=false;F<z;F++)if(typeof p[F]=="string")ba.push(p[F]);else{b.extend(la,p[F]);na=true}p=ba.join("/");if(na){for(var oa in la)ga.push(this.app._encodeFormPair(oa,la[oa]));p+="?"+ga.join("&")}}else p=p[0];this.trigger("redirect",{to:p});this.app.last_location=[this.verb,this.path];this.app.setLocation(p);(new RegExp(p)).test(t)&&this.app.trigger("location-changed")},trigger:function(p,t){if(typeof t=="undefined")t=
{};if(!t.context)t.context=this;return this.app.trigger(p,t)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(p){return this.app.swap(p)},notFound:function(){return this.app.notFound(this.verb,this.path)},json:function(p){return b.parseJSON(p)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}});b.sammy=a.Sammy=e})(jQuery,window);
(function(b){Sammy=Sammy||{};Sammy.Title=function(){this.setTitle=function(a){this.title_function=b.isFunction(a)?a:function(e){return[a,e].join(" ")}};this.helper("title",function(){var a=b.makeArray(arguments).join(" ");if(this.app.title_function)a=this.app.title_function(a);document.title=a})}})(jQuery);
(function(b){function a(g){g=unescape(g);return g==="true"?true:g==="false"?false:g}function e(g,i,l){var o;if(i.match(/^[^\[]+$/))g[i]=a(l);else if(o=i.match(/^([^\[]+)\[\](.*)$/)){i=o[1];o=o[2];if(g[i]&&!b.isArray(g[i]))throw"400 Bad Request";if(o){o=o.match(/^\[([^\]]+)\](.*)$/);if(!o)throw"400 Bad Request";if(g[i])g[i][g[i].length-1][o[1]]?g[i].push(e({},o[1]+o[2],l)):b.extend(true,g[i][g[i].length-1],e({},o[1]+o[2],l));else g[i]=[e({},o[1]+o[2],l)]}else if(g[i])g[i].push(a(l));else g[i]=[a(l)]}else if(o=
i.match(/^([^\[]+)\[([^\[]+)\](.*)$/)){i=o[1];o=o[2]+o[3];if(g[i]&&b.isArray(g[i]))throw"400 Bad Request";if(g[i])b.extend(true,g[i],e(g[i],o,l));else g[i]=e({},o,l)}return g}Sammy=Sammy||{};Sammy.NestedParams=function(g){g._parseParamPair=e}})(jQuery);
(function(){if(!window.JSON)window.JSON={};(function(){function b(B){return B<10?"0"+B:B}function a(B){i.lastIndex=0;return i.test(B)?'"'+B.replace(i,function(K){var O=w[K];return typeof O==="string"?O:"\\u"+("0000"+K.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+B+'"'}function e(B,K){var O,aa,ia,ka,p=l,t,z=K[B];if(z&&typeof z==="object"&&typeof z.toJSON==="function")z=z.toJSON(B);if(typeof C==="function")z=C.call(K,B,z);switch(typeof z){case "string":return a(z);case "number":return isFinite(z)?
String(z):"null";case "boolean":case "null":return String(z);case "object":if(!z)return"null";l+=o;t=[];if(Object.prototype.toString.apply(z)==="[object Array]"){ka=z.length;for(O=0;O<ka;O+=1)t[O]=e(O,z)||"null";ia=t.length===0?"[]":l?"[\n"+l+t.join(",\n"+l)+"\n"+p+"]":"["+t.join(",")+"]";l=p;return ia}if(C&&typeof C==="object"){ka=C.length;for(O=0;O<ka;O+=1){aa=C[O];if(typeof aa==="string")if(ia=e(aa,z))t.push(a(aa)+(l?": ":":")+ia)}}else for(aa in z)if(Object.hasOwnProperty.call(z,aa))if(ia=e(aa,
z))t.push(a(aa)+(l?": ":":")+ia);ia=t.length===0?"{}":l?"{\n"+l+t.join(",\n"+l)+"\n"+p+"}":"{"+t.join(",")+"}";l=p;return ia}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z"};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l,o,w={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},C;if(typeof JSON.stringify!=="function")JSON.stringify=function(B,K,O){var aa;o=l="";if(typeof O==="number")for(aa=0;aa<O;aa+=1)o+=" ";else if(typeof O==="string")o=O;if((C=K)&&typeof K!=="function"&&(typeof K!=="object"||typeof K.length!=="number"))throw new Error("JSON.stringify");
return e("",{"":B})};if(typeof JSON.parse!=="function")JSON.parse=function(B,K){function O(ia,ka){var p,t,z=ia[ka];if(z&&typeof z==="object")for(p in z)if(Object.hasOwnProperty.call(z,p)){t=O(z,p);if(t!==undefined)z[p]=t;else delete z[p]}return K.call(ia,ka,z)}var aa;g.lastIndex=0;if(g.test(B))B=B.replace(g,function(ia){return"\\u"+("0000"+ia.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(B.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){aa=eval("("+B+")");return typeof K==="function"?O({"":aa},""):aa}throw new SyntaxError("JSON.parse");}})();Sammy=Sammy||{};Sammy.JSON=function(b){b.helpers({json:function(a){return typeof a=="string"?JSON.parse(a):JSON.stringify(a)}})}})(jQuery);
var Mustache=function(){var b=function(){};b.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":true},context:{},render:function(a,e,g,i){if(!i){this.context=e;this.buffer=[]}if(!this.includes("",a))if(i)return a;else{this.send(a);return}a=this.render_pragmas(a);a=this.render_section(a,e,g);if(i)return this.render_tags(a,e,g,i);this.render_tags(a,e,g,i)},send:function(a){a!==""&&this.buffer.push(a)},render_pragmas:function(a){if(!this.includes("%",a))return a;
var e=this;return a.replace(new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag,"g"),function(g,i,l){if(!e.pragmas_implemented[i])throw{message:"This implementation of mustache doesn't understand the '"+i+"' pragma"};e.pragmas[i]={};if(l){g=l.split("=");e.pragmas[i][g[0]]=g[1]}return""})},render_partial:function(a,e,g){a=this.trim(a);if(!g||g[a]===undefined)throw{message:"unknown_partial '"+a+"'"};if(typeof e[a]!="object")return this.render(g[a],e,g,true);return this.render(g[a],e[a],g,
true)},render_section:function(a,e,g){if(!this.includes("#",a)&&!this.includes("^",a))return a;var i=this;return a.replace(new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg"),function(l,o,w,C){l=i.find(w,e);if(o=="^")return!l||i.is_array(l)&&l.length===0?i.render(C,e,g,true):"";else if(o=="#")return i.is_array(l)?i.map(l,function(B){return i.render(C,i.create_context(B),g,true)}).join(""):i.is_object(l)?i.render(C,i.create_context(l),
g,true):typeof l==="function"?l.call(e,C,function(B){return i.render(B,e,g,true)}):l?i.render(C,e,g,true):""})},render_tags:function(a,e,g,i){var l=this,o=function(){return new RegExp(l.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+l.ctag+"+","g")},w=o(),C=function(K,O,aa){switch(O){case "!":return"";case "=":l.set_delimiters(aa);w=o();return"";case ">":return l.render_partial(aa,e,g);case "{":return l.find(aa,e);default:return l.escape(l.find(aa,e))}};a=a.split("\n");for(var B=0;B<a.length;B++){a[B]=a[B].replace(w,
C,this);i||this.send(a[B])}if(i)return a.join("\n")},set_delimiters:function(a){a=a.split(" ");this.otag=this.escape_regex(a[0]);this.ctag=this.escape_regex(a[1])},escape_regex:function(a){if(!arguments.callee.sRE)arguments.callee.sRE=new RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,e){a=this.trim(a);var g;if(e[a]===false||e[a]===0||e[a])g=e[a];else if(this.context[a]===false||this.context[a]===0||this.context[a])g=
this.context[a];if(typeof g==="function")return g.apply(e);if(g!==undefined)return g;return""},includes:function(a,e){return e.indexOf(this.otag+a)!=-1},escape:function(a){return String(a===null?"":a).replace(/&(?!\w+;)|["'<>\\]/g,function(e){switch(e){case "&":return"&amp;";case "\\":return"\\\\";case '"':return"&quot;";case "'":return"&#39;";case "<":return"&lt;";case ">":return"&gt;";default:return e}})},create_context:function(a){if(this.is_object(a))return a;else{var e=".";if(this.pragmas["IMPLICIT-ITERATOR"])e=
this.pragmas["IMPLICIT-ITERATOR"].iterator;var g={};g[e]=a;return g}},is_object:function(a){return a&&typeof a=="object"},is_array:function(a){return Object.prototype.toString.call(a)==="[object Array]"},trim:function(a){return a.replace(/^\s*|\s*$/g,"")},map:function(a,e){if(typeof a.map=="function")return a.map(e);else{for(var g=[],i=a.length,l=0;l<i;l++)g.push(e(a[l]));return g}}};return{name:"mustache.js",version:"0.3.1-dev",to_html:function(a,e,g,i){var l=new b;if(i)l.send=i;l.render(a,e,g);
if(!i)return l.buffer.join("\n")}}}();(function(b){Sammy=Sammy||{};Sammy.Mustache=function(a,e){e||(e="mustache");a.helper(e,function(g,i,l){i=b.extend({},this,i);l=b.extend({},i.partials,l);return Mustache.to_html(g,i,l)})}})(jQuery);
window.Modernizr=function(b,a,e){function g(){w.input=function(Q){for(var U=0,f=Q.length;U<f;U++)ga[Q[U]]=!!(Q[U]in aa);return ga}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));w.inputtypes=function(Q){for(var U=0,f,A,M,L=Q.length;U<L;U++){aa.setAttribute("type",A=Q[U]);(f=aa.type!=="text")&&(aa.value=ia,aa.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(A)&&aa.style.WebkitAppearance!==e?(C.appendChild(aa),M=a.defaultView,f=M.getComputedStyle&&
M.getComputedStyle(aa,null).WebkitAppearance!=="textfield"&&aa.offsetHeight!==0,C.removeChild(aa)):/^(search|tel)$/.test(A)||(/^(url|email)$/.test(A)?(f=aa.checkValidity&&aa.checkValidity()===false):/^color$/.test(A)?(C.appendChild(aa),f=aa.value!=ia,C.removeChild(aa)):(f=aa.value!=ia)));ba[Q[U]]=!!f}return ba}("search tel url email datetime date month week time datetime-local number range color".split(" "))}function i(Q,U){var f=Q.charAt(0).toUpperCase()+Q.substr(1);f=(Q+" "+t.join(f+" ")+f).split(" ");
return!!l(f,U)}function l(Q,U){for(var f in Q)if(O[Q[f]]!==e&&(!U||U(Q[f],K)))return true}function o(Q,U){return typeof Q===U}var w={},C=a.documentElement,B=a.head||a.getElementsByTagName("head")[0],K=a.createElement("modernizr"),O=K.style,aa=a.createElement("input"),ia=":)",ka=Object.prototype.toString,p=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),t="Webkit Moz O ms Khtml".split(" "),z={svg:"http://www.w3.org/2000/svg"},F={},ba={},ga={},la=[],na,oa=function(Q){var U=a.createElement("style"),f=
a.createElement("div");U.textContent=Q+"{#modernizr{height:3px}}";B.appendChild(U);f.id="modernizr";C.appendChild(f);Q=f.offsetHeight===3;U.parentNode.removeChild(U);f.parentNode.removeChild(f);return!!Q},Ca=function(){var Q={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(U,f){f=f||a.createElement(Q[U]||"div");var A=(U="on"+U)in f;A||(f.setAttribute||(f=a.createElement("div")),f.setAttribute&&f.removeAttribute&&(f.setAttribute(U,""),A=
o(f[U],"function"),o(f[U],e)||(f[U]=e),f.removeAttribute(U)));return A}}(),Ua={}.hasOwnProperty,Va;o(Ua,e)||o(Ua.call,e)?(Va=function(Q,U){return U in Q&&o(Q.constructor.prototype[U],e)}):(Va=function(Q,U){return Ua.call(Q,U)});F.flexbox=function(){var Q=a.createElement("div"),U=a.createElement("div");(function(A,M,L,S){M+=":";A.style.cssText=(M+p.join(L+";"+M)).slice(0,-M.length)+(S||"")})(Q,"display","box","width:42px;padding:0;");U.style.cssText=p.join("box-flex:1;")+"width:10px;";Q.appendChild(U);
C.appendChild(Q);var f=U.offsetWidth===42;Q.removeChild(U);C.removeChild(Q);return f};F.canvas=function(){var Q=a.createElement("canvas");return Q.getContext&&Q.getContext("2d")};F.canvastext=function(){return w.canvas&&o(a.createElement("canvas").getContext("2d").fillText,"function")};F.webgl=function(){return!!b.WebGLRenderingContext};F.touch=function(){return"ontouchstart"in b||oa("@media ("+p.join("touch-enabled),(")+"modernizr)")};F.geolocation=function(){return!!navigator.geolocation};F.postmessage=
function(){return!!b.postMessage};F.websqldatabase=function(){return!!b.openDatabase};F.indexedDB=function(){for(var Q=-1,U=t.length;++Q<U;){var f=t[Q].toLowerCase();if(b[f+"_indexedDB"]||b[f+"IndexedDB"])return true}return false};F.hashchange=function(){return Ca("hashchange",b)&&(a.documentMode===e||a.documentMode>7)};F.history=function(){return!!(b.history&&history.pushState)};F.draganddrop=function(){return Ca("dragstart")&&Ca("drop")};F.websockets=function(){return"WebSocket"in b};F.rgba=function(){O.cssText=
"background-color:rgba(150,255,150,.5)";return(""+O.backgroundColor).indexOf("rgba")!==-1};F.hsla=function(){O.cssText="background-color:hsla(120,40%,100%,.5)";return(""+O.backgroundColor).indexOf("rgba")!==-1||(""+O.backgroundColor).indexOf("hsla")!==-1};F.multiplebgs=function(){O.cssText="background:url(//:),url(//:),red url(//:)";return/(url\s*\(.*?){3}/.test(O.background)};F.backgroundsize=function(){return i("backgroundSize")};F.borderimage=function(){return i("borderImage")};F.borderradius=
function(){return i("borderRadius","",function(Q){return(""+Q).indexOf("orderRadius")!==-1})};F.boxshadow=function(){return i("boxShadow")};F.textshadow=function(){return a.createElement("div").style.textShadow===""};F.opacity=function(){var Q=p.join("opacity:.55;")+"";O.cssText=Q;return/^0.55$/.test(O.opacity)};F.cssanimations=function(){return i("animationName")};F.csscolumns=function(){return i("columnCount")};F.cssgradients=function(){var Q=("background-image:"+p.join("gradient(linear,left top,right bottom,from(#9f9),to(white));background-image:")+
p.join("linear-gradient(left top,#9f9, white);background-image:")).slice(0,-17);O.cssText=Q;return(""+O.backgroundImage).indexOf("gradient")!==-1};F.cssreflections=function(){return i("boxReflect")};F.csstransforms=function(){return!!l(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])};F.csstransforms3d=function(){var Q=!!l(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);Q&&"webkitPerspective"in C.style&&(Q=oa("@media ("+
p.join("transform-3d),(")+"modernizr)"));return Q};F.csstransitions=function(){return i("transitionProperty")};F.fontface=function(){var Q,U,f=B||C,A=a.createElement("style");U=a.implementation||{hasFeature:function(){return false}};A.type="text/css";f.insertBefore(A,f.firstChild);Q=A.sheet||A.styleSheet;U=(U.hasFeature("CSS2","")?function(M){if(!Q||!M)return false;var L=false;try{Q.insertRule(M,0);L=/src/i.test(Q.cssRules[0].cssText);Q.deleteRule(Q.cssRules.length-1)}catch(S){}return L}:function(M){if(!Q||
!M)return false;Q.cssText=M;return Q.cssText.length!==0&&/src/i.test(Q.cssText)&&Q.cssText.replace(/\r+|\n+/g,"").indexOf(M.split(" ")[0])===0})('@font-face { font-family: "font"; src: url(data:,); }');f.removeChild(A);return U};F.video=function(){var Q=a.createElement("video"),U=!!Q.canPlayType;if(U){U=new Boolean(U);U.ogg=Q.canPlayType('video/ogg; codecs="theora"');U.h264=Q.canPlayType('video/mp4; codecs="avc1.42E01E"')||Q.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');U.webm=Q.canPlayType('video/webm; codecs="vp8, vorbis"')}return U};
F.audio=function(){var Q=a.createElement("audio"),U=!!Q.canPlayType;U&&(U=new Boolean(U),U.ogg=Q.canPlayType('audio/ogg; codecs="vorbis"'),U.mp3=Q.canPlayType("audio/mpeg;"),U.wav=Q.canPlayType('audio/wav; codecs="1"'),U.m4a=Q.canPlayType("audio/x-m4a;")||Q.canPlayType("audio/aac;"));return U};F.localstorage=function(){try{return!!localStorage.getItem}catch(Q){return false}};F.sessionstorage=function(){try{return!!sessionStorage.getItem}catch(Q){return false}};F.webWorkers=function(){return!!b.Worker};
F.applicationcache=function(){return!!b.applicationCache};F.svg=function(){return!!a.createElementNS&&!!a.createElementNS(z.svg,"svg").createSVGRect};F.inlinesvg=function(){var Q=a.createElement("div");Q.innerHTML="<svg/>";return(Q.firstChild&&Q.firstChild.namespaceURI)==z.svg};F.smil=function(){return!!a.createElementNS&&/SVG/.test(ka.call(a.createElementNS(z.svg,"animate")))};F.svgclippaths=function(){return!!a.createElementNS&&/SVG/.test(ka.call(a.createElementNS(z.svg,"clipPath")))};for(var V in F)Va(F,
V)&&(na=V.toLowerCase(),w[na]=F[V](),la.push((w[na]?"":"no-")+na));w.input||g();w.crosswindowmessaging=w.postmessage;w.historymanagement=w.history;w.addTest=function(Q,U){Q=Q.toLowerCase();if(!w[Q]){U=!!U();C.className+=" "+(U?"":"no-")+Q;w[Q]=U;return w}};O.cssText="";K=aa=null;b.attachEvent&&function(){var Q=a.createElement("div");Q.innerHTML="<elem></elem>";return Q.childNodes.length!==1}()&&function(Q,U){function f(ta,Ja){for(var ua=-1,ya=ta.length,cb,gb=[];++ua<ya;){cb=ta[ua];(Ja=cb.media||Ja)!=
"screen"&&gb.push(f(cb.imports,Ja),cb.cssText)}return gb.join("")}function A(ta){for(var Ja=-1;++Ja<L;)ta.createElement(M[Ja])}var M="abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video".split("|"),L=M.length,S=new RegExp("(^|\\s)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)","gi"),ea=new RegExp("<(/*)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)",
"gi"),da=new RegExp("(^|[^\\n]*?\\s)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)([^\\n]*)({[\\n\\w\\W]*?})","gi"),pa=U.createDocumentFragment(),Ha=U.documentElement,La=Ha.firstChild,Ia=U.createElement("body"),Ma=U.createElement("style"),Wa;A(U);A(pa);La.insertBefore(Ma,La.firstChild);Ma.media="print";Q.attachEvent("onbeforeprint",function(){var ta=-1,Ja=f(U.styleSheets,"all"),ua=[],ya;for(Wa=Wa||U.body;(ya=
da.exec(Ja))!=null;)ua.push((ya[1]+ya[2]+ya[3]).replace(S,"$1.iepp_$2")+ya[4]);for(Ma.styleSheet.cssText=ua.join("\n");++ta<L;){Ja=U.getElementsByTagName(M[ta]);ua=Ja.length;for(ya=-1;++ya<ua;)Ja[ya].className.indexOf("iepp_")<0&&(Ja[ya].className+=" iepp_"+M[ta])}pa.appendChild(Wa);Ha.appendChild(Ia);Ia.className=Wa.className;Ia.innerHTML=Wa.innerHTML.replace(ea,"<$1font")});Q.attachEvent("onafterprint",function(){Ia.innerHTML="";Ha.removeChild(Ia);Ha.appendChild(Wa);Ma.styleSheet.cssText=""})}(b,
a);w._enableHTML5=true;w._version="1.7";C.className=C.className.replace(/\bno-js\b/,"")+" js "+la.join(" ");return w}(this,this.document);
var Model=function(b,a){var e=function(g){this.attributes=jQuery.extend({},g);this.changes={};this.errors=new Model.Errors(this);this.uid=[b,Model.UID.generate()].join("-");jQuery.isFunction(this.initialize)&&this.initialize()};Model.Module.extend.call(e,Model.Module);e._name=b;e.collection=[];e.unique_key="id";e.extend(Model.Callbacks).extend(Model.ClassMethods);e.prototype=new Model.Base;e.prototype.constructor=e;jQuery.isFunction(a)&&a.call(e,e,e.prototype);return e};
Model.Callbacks={bind:function(b,a){this.callbacks=this.callbacks||{};this.callbacks[b]=this.callbacks[b]||[];this.callbacks[b].push(a);return this},trigger:function(b,a){this.callbacks=this.callbacks||{};var e=this.callbacks[b];if(e)for(var g=0;g<e.length;g++)e[g].apply(this,a||[]);return this},unbind:function(b,a){this.callbacks=this.callbacks||{};if(a)for(var e=this.callbacks[b]||[],g=0;g<e.length;g++)e[g]===a&&this.callbacks[b].splice(g,1);else delete this.callbacks[b];return this}};
Model.ClassMethods={add:function(b){var a=b.id();if(jQuery.inArray(b,this.collection)===-1&&!(a&&this.find(a))){this.collection.push(b);this.trigger("add",[b])}return this},all:function(){return this.collection.slice()},chain:function(b){return jQuery.extend({},this,{collection:b})},count:function(){return this.all().length},detect:function(b){for(var a=this.all(),e,g=0,i=a.length;g<i;g++){e=a[g];if(b.call(e,e,g))return e}},each:function(b,a){for(var e=this.all(),g=0,i=e.length;g<i;g++)b.call(a||
e[g],e[g],g,e);return this},find:function(b){return this.detect(function(){return this.id()==b})},first:function(){return this.all()[0]},load:function(b){if(this._persistence){var a=this;this._persistence.read(function(e){for(var g=0,i=e.length;g<i;g++)a.add(e[g]);b&&b.call(a,e)})}return this},last:function(){var b=this.all();return b[b.length-1]},map:function(b,a){for(var e=this.all(),g=[],i=0,l=e.length;i<l;i++)g.push(b.call(a||e[i],e[i],i,e));return g},persistence:function(b){if(arguments.length==
0)return this._persistence;else{var a=Array.prototype.slice.call(arguments,1);a.unshift(this);this._persistence=b.apply(b,a);return this}},pluck:function(b){for(var a=this.all(),e=[],g=0,i=a.length;g<i;g++)e.push(a[g].attr(b));return e},remove:function(b){for(var a,e=0,g=this.collection.length;e<g;e++)if(this.collection[e]===b){a=e;break}if(a!=undefined){this.collection.splice(a,1);this.trigger("remove",[b]);return true}else return false},reverse:function(){return this.chain(this.all().reverse())},
select:function(b,a){for(var e=this.all(),g=[],i,l=0,o=e.length;l<o;l++){i=e[l];if(b.call(a||i,i,l,e))g.push(i)}return this.chain(g)},sort:function(b){return this.chain(this.all().sort(b))},sortBy:function(b){var a=jQuery.isFunction(b);return this.sort(function(e,g){var i=a?b.call(e):e.attr(b),l=a?b.call(g):g.attr(b);return i<l?-1:i>l?1:0})},use:function(b){var a=Array.prototype.slice.call(arguments,1);a.unshift(this);b.apply(this,a);return this}};
Model.Errors=function(b){this.errors={};this.model=b};Model.Errors.prototype={add:function(b,a){this.errors[b]||(this.errors[b]=[]);this.errors[b].push(a);return this},all:function(){return this.errors},clear:function(){this.errors={};return this},each:function(b){for(var a in this.errors)for(var e=0;e<this.errors[a].length;e++)b.call(this,a,this.errors[a][e]);return this},on:function(b){return this.errors[b]||[]},size:function(){var b=0;this.each(function(){b++});return b}};
Model.InstanceMethods={asJSON:function(){return this.attr()},attr:function(b,a){if(arguments.length===0)return jQuery.extend({},this.attributes,this.changes);else if(arguments.length===2){if(this.attributes[b]===a)delete this.changes[b];else this.changes[b]=a;return this}else if(typeof b==="object"){for(var e in b)this.attr(e,b[e]);return this}else return b in this.changes?this.changes[b]:this.attributes[b]},callPersistMethod:function(b,a){var e=this,g=function(i){if(i){e.merge(e.changes).reset();
b==="destroy"?e.constructor.remove(e):e.constructor.add(e);e.trigger(b)}var l;if(a)l=a.apply(e,arguments);return l};this.constructor._persistence?this.constructor._persistence[b](this,g):g.call(this,true)},destroy:function(b){this.callPersistMethod("destroy",b);return this},id:function(){return this.attributes[this.constructor.unique_key]},merge:function(b){jQuery.extend(this.attributes,b);return this},newRecord:function(){return this.id()===undefined},reset:function(){this.errors.clear();this.changes=
{};return this},save:function(b){if(this.valid())this.callPersistMethod(this.newRecord()?"create":"update",b);else b&&b(false);return this},valid:function(){this.errors.clear();this.validate();return this.errors.size()===0},validate:function(){return this}};
Model.localStorage=function(b){if(!window.localStorage)return{create:function(i,l){l(true)},destroy:function(i,l){l(true)},read:function(i){i([])},update:function(i,l){l(true)}};var a=[b._name,"collection"].join("-"),e=function(){var i=localStorage[a];return i?JSON.parse(i):[]},g=function(i){localStorage.setItem(i.uid,JSON.stringify(i.asJSON()));i=i.uid;var l=e();if(jQuery.inArray(i,l)===-1){l.push(i);localStorage.setItem(a,JSON.stringify(l))}};return{create:function(i,l){g(i);l(true)},destroy:function(i,
l){localStorage.removeItem(i.uid);var o=i.uid,w=e();o=jQuery.inArray(o,w);if(o>-1){w.splice(o,1);localStorage.setItem(a,JSON.stringify(w))}l(true)},read:function(i){if(!i)return false;for(var l=b.map(function(){return this.uid}),o=e(),w=[],C,B,K=0,O=o.length;K<O;K++){B=o[K];if(jQuery.inArray(B,l)==-1){C=JSON.parse(localStorage[B]);C=new b(C);C.uid=B;w.push(C)}}i(w)},update:function(i,l){g(i);l(true)}}};Model.Log=function(){window.console&&window.console.log.apply(window.console,arguments)};
Model.Module={extend:function(b){jQuery.extend(this,b);return this},include:function(b){jQuery.extend(this.prototype,b);return this}};
Model.REST=function(b,a,e){var g=/:([\w\d]+)/g,i=function(){for(var l=[],o;(o=g.exec(a))!==null;)l.push(o[1]);return l}();return jQuery.extend({path:function(l){var o=a;jQuery.each(i,function(w,C){o=o.replace(":"+C,l.attributes[C])});return o},create:function(l,o){return this.xhr("POST",this.create_path(l),l,o)},create_path:function(l){return this.path(l)},destroy:function(l,o){return this.xhr("DELETE",this.destroy_path(l),l,o)},destroy_path:function(l){return this.update_path(l)},params:function(l){var o;
if(l){var w=l.asJSON();delete w[l.constructor.unique_key];o={};o[l.constructor._name.toLowerCase()]=w}else o=null;if(jQuery.ajaxSettings.data)o=jQuery.extend({},jQuery.ajaxSettings.data,o);return o},read:function(l){return this.xhr("GET",this.read_path(),null,function(o,w,C){C=jQuery.makeArray(C);o=[];w=0;for(var B=C.length;w<B;w++)o.push(new b(C[w]));l(o)})},read_path:function(){return a},update:function(l,o){return this.xhr("PUT",this.update_path(l),l,o)},update_path:function(l){return[this.path(l),
l.id()].join("/")},xhr:function(l,o,w,C){var B=this,K=l=="GET"?undefined:this.params(w);return jQuery.ajax({type:l,url:o+".json",dataType:"json",data:K,dataFilter:function(O){return/\S/.test(O)?O:undefined},complete:function(O,aa){B.xhrComplete(O,aa,w,C)}})},xhrComplete:function(l,o,w,C){var B=Model.REST["handle"+l.status];B&&B.call(this,l,o,w);o=o==="success";B=Model.REST.parseResponseData(l);o&&w&&B&&w.attr(B);C&&C.call(w,o,l,B)}},e)};Model.RestPersistence=Model.REST;
Model.REST.handle422=function(b,a,e){if(b=Model.REST.parseResponseData(b)){e.errors.clear();for(var g in b)for(a=0;a<b[g].length;a++)e.errors.add(g,b[g][a])}};Model.REST.parseResponseData=function(b){try{return/\S/.test(b.responseText)?jQuery.parseJSON(b.responseText):undefined}catch(a){Model.Log(a)}};Model.UID={counter:0,generate:function(){return[(new Date).valueOf(),this.counter++].join("-")},reset:function(){this.counter=0;return this}};Model.VERSION="0.10.1";
Model.Base=function(){function b(){}b.prototype=jQuery.extend({},Model.Callbacks,Model.InstanceMethods);return b}();
Model.SinatraREST=function(b,a,e){var g=/:([\w\d]+)/g,i=function(){for(var l=[],o;(o=g.exec(a))!==null;)l.push(o[1]);return l}();return jQuery.extend({path:function(l){var o=a;jQuery.each(i,function(w,C){o=o.replace(":"+C,l.attributes[C])});return o},create:function(l,o){return this.xhr("POST",this.create_path(l),l,o)},create_path:function(l){return this.path(l)},destroy:function(l,o){return this.xhr("DELETE",this.destroy_path(l),l,o)},destroy_path:function(l){return this.update_path(l)},params:function(l){var o;
if(l){var w=l.asJSON();delete w[l.constructor.unique_key];o={};o[l.constructor._name.toLowerCase()]=w}else o=null;if(jQuery.ajaxSettings.data)o=jQuery.extend({},jQuery.ajaxSettings.data,o);return o},read:function(l){return this.xhr("GET",this.read_path(),null,function(o,w,C){C=jQuery.makeArray(C);o=[];w=0;for(var B=C.length;w<B;w++)o.push(new b(C[w]));l(o)})},read_path:function(){return a},update:function(l,o){return this.xhr("PUT",this.update_path(l),l,o)},update_path:function(l){return[this.path(l),
l.id()].join("/")},xhr:function(l,o,w,C){var B=this,K=l=="GET"?undefined:this.params(w);return jQuery.ajax({type:l,url:o+".json",dataType:"json",data:K,complete:function(O,aa){B.xhrComplete(O,aa,w,C)}})},xhrComplete:function(l,o,w,C){var B=Model.REST["handle"+l.status];B&&B.call(this,l,o,w);o=o==="success";B=Model.REST.parseResponseData(l);o&&w&&B&&w.attr(B);C&&C.call(w,o,l,B)}},e)};
var CodeMirror=function(){function b(f,A){function M(d){Ya=null;var j={line:0,ch:0};ea(j,{line:T.length-1,ch:T[T.length-1].text.length},V(d),j,j);Ya=new o}function L(){if(fa.readOnly!="nocursor"){!Sa&&fa.onFocus&&fa.onFocus(Za);Sa=true;ua();if(ma.className.search(/\bCodeMirror-focused\b/)==-1)ma.className+=" CodeMirror-focused";dc()}}function S(){Sa&&fa.onBlur&&fa.onBlur(Za);clearInterval(bc);hb=null;Sa=false;ma.className=ma.className.replace(" CodeMirror-focused","")}function ea(d,j,k,m,n){if(Ya){for(var q=
[],s=d.line,u=j.line+1;s<u;++s)q.push(T[s].text);for(Ya.addChange(d.line,k.length,q);Ya.done.length>fa.undoDepth;)Ya.done.shift()}La(d,j,k,m,n)}function da(d,j){var k=d.pop();if(k){for(var m=[],n=k.start+k.added,q=k.start;q<n;++q)m.push(T[q].text);j.push({start:k.start,added:k.old.length,old:m});q=k.start+k.old.length-1;m=m[m.length-1];var s=k.old[k.old.length-1];if(s)if(m){for(var u=m.length,y=s.length;u>=0&&y>=0;--u,--y)if(m.charAt(u)!=s.charAt(y))break;m=y+1}else m=s.length;else m=m?m.length:0;
q=Fa({line:q,ch:m});La({line:k.start,ch:0},{line:n-1,ch:T[n-1].text.length},k.old,q,q)}}function pa(){da(Ya.done,Ya.undone)}function Ha(){da(Ya.undone,Ya.done)}function La(d,j,k,m,n){for(var q=false,s=Eb.length,u=d.line;u<j.line;++u)if(T[u].text.length==s){q=true;break}var y=j.line-d.line;u=T[d.line];var D=T[j.line];if(u==D)if(k.length==1)u.replace(d.ch,j.ch,k[0]);else{D=u.split(j.ch,k[k.length-1]);var P=[d.line+1,y];u.replace(d.ch,u.text.length,k[0]);u=1;for(var Y=k.length-1;u<Y;++u)P.push(new i(k[u]));
P.push(D);T.splice.apply(T,P)}else if(k.length==1){u.replace(d.ch,u.text.length,k[0]+D.text.slice(j.ch));T.splice(d.line+1,y)}else{P=[d.line+1,y-1];u.replace(d.ch,u.text.length,k[0]);D.replace(0,j.ch,k[k.length-1]);u=1;for(Y=k.length-1;u<Y;++u)P.push(new i(k[u]));T.splice.apply(T,P)}u=d.line;for(Y=u+k.length;u<Y;++u){D=T[u].text;if(D.length>s){Eb=D;s=D.length;q=false}}if(q){u=s=0;for(Y=T.length;u<Y;++u){D=T[u].text;if(D.length>s){s=D.length;Eb=D}}}q=[];y=k.length-y-1;u=0;for(D=bb.length;u<D;++u){s=
bb[u];if(s<d.line)q.push(s);else s>j.line&&q.push(s+y)}k.length&&q.push(d.line);bb=q;Kb(100);Qa.push({from:d.line,to:j.line+1,diff:y});pb={from:d,to:j,text:k};xb(m,n,N.from.line<=Math.min(j.line,j.line+y)?N.from.line:N.from.line+y,N.to.line<=Math.min(j.line,j.line+y)?N.to.line:N.to.line+y);Ab.style.height=T.length*$a()+2*Xa.offsetTop+"px"}function Ia(d,j,k){function m(q){if(p(q,j))return q;if(!p(k,q))return n;var s=q.line+d.length-(k.line-j.line)-1,u=q.ch;if(q.line==k.line)u+=d[d.length-1].length-
(k.ch-(k.line==j.line?j.ch:0));return{line:s,ch:u}}j=Fa(j);k=k?Fa(k):j;d=V(d);var n;Wa(d,j,k,function(q){n=q;return{from:m(N.from),to:m(N.to)}});return n}function Ma(d,j){Wa(V(d),N.from,N.to,function(k){return j=="end"?{from:k,to:k}:j=="start"?{from:N.from,to:N.from}:{from:N.from,to:k}})}function Wa(d,j,k,m){m=m({line:j.line+d.length-1,ch:d.length==1?d[0].length+j.ch:d[d.length-1].length});ea(j,k,d,m.from,m.to)}function ta(d,j){var k=d.line,m=j.line;if(k==m)return T[k].text.slice(d.ch,j.ch);var n=
[T[k].text.slice(d.ch)];for(k=k+1;k<m;++k)n.push(T[k].text);n.push(T[m].text.slice(0,j.ch));return n.join("\n")}function Ja(){return ta(N.from,N.to)}function ua(){Pb||ac.set(2E3,function(){Yb();cb();Sa&&ua();Zb()})}function ya(d){function j(){Yb();var m=cb();if(m=="moved"&&d)Ua[d]=true;if(!m&&!k){k=true;ac.set(80,j)}else{Pb=false;ua()}Zb()}var k=false;Pb=true;ac.set(20,j)}function cb(){function d(va,wa){for(var r=0;;){var v=k.indexOf("\n",r);if(v==-1||(k.charAt(v-1)=="\r"?v-1:v)>=va)return{line:wa,
ch:va-r};++wa;r=v+1}}if(!Ta){var j=false,k=za.value,m=Q(za);if(!m)return false;j=Ka.text!=k;var n=ub,q=j||m.start!=Ka.start||m.end!=(n?Ka.start:Ka.end);if(!q&&!n)return false;if(j){hb=ub=null;if(fa.readOnly){ab=true;return"changed"}}var s=d(m.start,Ka.from),u=d(m.end,Ka.from);if(n){s=m.start==n.anchor?u:s;u=hb?N.to:m.start==n.anchor?s:u;if(!p(s,u)){ub=null;N.inverted=false;n=s;s=u;u=n}}if(s.line==u.line&&s.line==N.from.line&&s.line==N.to.line&&!hb)ab=false;if(j){n=0;for(var y=k.length,D=Math.min(y,
Ka.text.length),P,Y=Ka.from,ca=-1;n<D&&(P=k.charAt(n))==Ka.text.charAt(n);){++n;if(P=="\n"){Y++;ca=n}}D=ca>-1?n-ca:n;for(var Da=Ka.to-1,ra=Ka.text.length;;){P=Ka.text.charAt(ra);P=="\n"&&Da--;if(k.charAt(y)!=P){++y;++ra;break}if(ra<=n||y<=n)break;--y;--ra}ca=Ka.text.lastIndexOf("\n",ra-1);ea({line:Y,ch:D},{line:Da,ch:ca==-1?ra:ra-ca-1},V(k.slice(n,y)),s,u);if(Y!=Da||s.line!=Y)ab=true}else xb(s,u);Ka.text=k;Ka.start=m.start;Ka.end=m.end;return j?"changed":q?"moved":false}}function gb(){for(var d=[],
j=Math.max(0,N.from.line-1),k=Math.min(T.length,N.to.line+2),m=j;m<k;++m)d.push(T[m].text);d=za.value=d.join(na);var n=N.from.ch,q=N.to.ch;for(m=j;m<N.from.line;++m)n+=na.length+T[m].text.length;for(m=j;m<N.to.line;++m)q+=na.length+T[m].text.length;Ka={text:d,from:j,to:k,start:n,end:q};U(za,n,ub?n:q)}function kb(){fa.readOnly!="nocursor"&&za.focus()}function Fb(){var d=Wb(N.inverted?N.from:N.to);return Rb(d.x,d.y,d.x,d.yBot)}function Rb(d,j,k,m){var n=Xa.offsetLeft,q=Xa.offsetTop,s=$a();j+=q;m+=q;
d+=n;k+=n;var u=ma.clientHeight,y=ma.scrollTop;n=false;q=true;if(j<y){ma.scrollTop=Math.max(0,j-2*s);n=true}else if(m>y+u){ma.scrollTop=m+s-u;n=true}j=ma.clientWidth;m=ma.scrollLeft;if(d<m){ma.scrollLeft=Math.max(0,d-10);n=true}else if(k>j+m){ma.scrollLeft=k+10-j;n=true;if(k>Ab.clientWidth)q=false}n&&fa.onScroll&&fa.onScroll(Za);return q}function Sb(){var d=$a(),j=ma.scrollTop-Xa.offsetTop;return{from:Math.min(T.length,Math.max(0,Math.floor(j/d))),to:Math.min(T.length,Math.ceil((j+ma.clientHeight)/
d))}}function lb(d){if(ma.clientWidth){for(var j=d===true?[]:[{from:Ba,to:ib,domStart:0}],k=0,m=d.length||0;k<m;++k){for(var n=d[k],q=[],s=n.diff||0,u=0,y=j.length;u<y;++u){var D=j[u];if(n.to<=D.from)q.push({from:D.from+s,to:D.to+s,domStart:D.domStart});else if(D.to<=n.from)q.push(D);else{n.from>D.from&&q.push({from:D.from,to:n.from,domStart:D.domStart});n.to<D.to&&q.push({from:n.to+s,to:D.to+s,domStart:D.domStart+(n.to-D.from)})}}j=q}s=Sb();n=Math.min(Ba,Math.max(s.from-3,0));q=Math.min(T.length,
Math.max(ib,s.to+3));d=[];u=0;y=ib-Ba;var P=n,Y=0;k=0;for(m=j.length;k<m;++k){D=j[k];if(!(D.to<=n)){if(D.from>=q)break;if(D.domStart>u||D.from>P){d.push({from:P,to:D.from,domSize:D.domStart-u,domStart:u});Y+=D.from-P}P=D.to;u=D.domStart+(D.to-D.from)}}if(u!=y||P!=q){Y+=Math.abs(q-P);d.push({from:P,to:q,domSize:y-u,domStart:u})}if(d.length){Na.style.display="none";if(Y>(s.to-s.from)*0.3){D=n=Math.max(s.from-10,0);j=q=Math.min(s.to+7,T.length);k=[];m={line:D,ch:0};m=p(N.from,m)&&!p(N.to,m);for(D=D;D<
j;++D){u=s=null;if(m){s=0;if(N.to.line==D){m=false;u=N.to.ch}}else if(N.from.line==D)if(N.to.line==D){s=N.from.ch;u=N.to.ch}else{m=true;s=N.from.ch}k.push(T[D].getHTML(s,u,true))}Na.innerHTML=k.join("")}else{j=N.from.line;k=N.to.line;m=0;D=ga&&mb.createElement("div");s=0;for(u=d.length;s<u;++s){y=d[s];P=y.to-y.from-y.domSize;Y=Na.childNodes[y.domStart+y.domSize+m]||null;if(ga)for(var ca=Math.max(-P,y.domSize);ca>0;--ca)Na.removeChild(Y?Y.previousSibling:Na.lastChild);else if(P){for(ca=Math.max(0,
P);ca>0;--ca)Na.insertBefore(mb.createElement("pre"),Y);for(ca=Math.max(0,-P);ca>0;--ca)Na.removeChild(Y?Y.previousSibling:Na.lastChild)}var Da=Na.childNodes[y.domStart+m],ra=j<y.from&&k>=y.from;for(ca=y.from;ca<y.to;++ca){var va=null,wa=null;if(ra){va=0;if(k==ca){ra=false;wa=N.to.ch}}else if(j==ca)if(k==ca){va=N.from.ch;wa=N.to.ch}else{ra=true;va=N.from.ch}if(ga){D.innerHTML=T[ca].getHTML(va,wa,true);Na.insertBefore(D.firstChild,Y)}else{Da.innerHTML=T[ca].getHTML(va,wa,false);Da.className=T[ca].className||
"";Da=Da.nextSibling}}m+=P}}Na.style.display="";j=n!=Ba||q!=ib||kc!=ma.clientHeight;Ba=n;ib=q;Lb.style.top=n*$a()+"px";if(j){kc=ma.clientHeight;Ab.style.height=T.length*$a()+2*Xa.offsetTop+"px";Gb()}n=Jb(Eb);Xa.style.width=n>ma.clientWidth?n+"px":"";if(Na.childNodes.length!=ib-Ba)throw new Error("BAD PATCH! "+JSON.stringify(d)+" size="+(ib-Ba)+" nodes="+Na.childNodes.length);Hb()}}else Ba=ib=0}function Gb(){if(fa.gutter||fa.lineNumbers){var d=Lb.offsetHeight,j=ma.clientHeight;nb.style.height=(d-j<
2?j:d)+"px";d=[];for(j=Ba;j<ib;++j){var k=T[j].gutterMarker,m=fa.lineNumbers?j+fa.firstLineNumber:null;if(k&&k.text)m=k.text.replace("%N%",m!=null?m:"");else if(m==null)m="\u00a0";d.push(k&&k.style?'<pre class="'+k.style+'">':"<pre>",m,"</pre>")}nb.style.display="none";Mb.innerHTML=d.join("");d=String(T.length).length;j=Mb.firstChild;k=j.textContent||j.innerText||j.nodeValue||"";for(m="";k.length+m.length<d;)m+="\u00a0";m&&j.insertBefore(mb.createTextNode(m),j.firstChild);nb.style.display="";Xa.style.marginLeft=
nb.offsetWidth+"px"}}function Hb(){var d=N.inverted?N.from:N.to,j=Ub(d.line,d.ch)+"px";d=(d.line-Ba)*$a()+"px";$b.style.top=d;if(ka(N.from,N.to)){ob.style.top=d;ob.style.left=j;ob.style.display=""}else ob.style.display="none"}function rb(d,j){var k=hb&&Fa(hb);if(k)if(p(k,d))d=k;else if(p(j,k))j=k;xb(d,j)}function xb(d,j,k,m){if(!(ka(N.from,d)&&ka(N.to,j))){if(p(j,d)){var n=j;j=d;d=n}n=ka(N.to,j);var q=ka(N.from,d);if(ka(d,j))N.inverted=false;else if(n&&!q)N.inverted=true;else if(q&&!n)N.inverted=
false;if(k==null){k=N.from.line;m=N.to.line}if(ka(d,j))ka(N.from,N.to)||Qa.push({from:k,to:m+1});else if(ka(N.from,N.to))Qa.push({from:d.line,to:j.line+1});else{ka(d,N.from)||(d.line<k?Qa.push({from:d.line,to:Math.min(j.line,k)+1}):Qa.push({from:k,to:Math.min(m,d.line)+1}));ka(j,N.to)||(j.line<m?Qa.push({from:Math.max(k,d.line),to:m+1}):Qa.push({from:Math.max(d.line,m),to:j.line+1}))}N.from=d;N.to=j;db=true}}function yb(d,j,k){d=Fa({line:d,ch:j||0});(k?rb:xb)(d,d)}function zb(d){return Math.max(0,
Math.min(d,T.length-1))}function Fa(d){if(d.line<0)return{line:0,ch:0};if(d.line>=T.length)return{line:T.length-1,ch:T[T.length-1].text.length};var j=d.ch,k=T[d.line].text.length;return j==null||j>k?{line:d.line,ch:k}:j<0?{line:d.line,ch:0}:d}function lc(d){rb({line:d,ch:0},{line:d,ch:T[d].text.length})}function sb(d,j){if(j=="smart")if(Pa.indent)var k=hc(d);else j="prev";var m=T[d],n=m.indentation(),q=m.text.match(/^\s*/)[0],s;if(j=="prev")s=d?T[d-1].indentation():0;else if(j=="smart")s=Pa.indent(k,
m.text.slice(q.length));else if(j=="add")s=n+fa.indentUnit;else if(j=="subtract")s=n-fa.indentUnit;s=Math.max(0,s);if(s-n){n="";k=0;if(fa.indentWithTabs)for(m=Math.floor(s/oa);m;--m){k+=oa;n+="\t"}for(;k<s;){++k;n+=" "}}else{if(N.from.line!=d&&N.to.line!=d)return;n=q}Ia(n,{line:d,ch:0},{line:d,ch:q.length})}function ec(){Pa=b.getMode(fa,fa.mode);for(var d=0,j=T.length;d<j;++d)T[d].stateAfter=null;bb=[0];Kb()}function Tb(d,j,k){function m(u,y,D,P){u=T[u];y=u.addMark(y,D,P);y.line=u;n.push(y)}d=Fa(d);
j=Fa(j);var n=[];if(d.line==j.line)m(d.line,d.ch,j.ch,k);else{m(d.line,d.ch,null,k);for(var q=d.line+1,s=j.line;q<s;++q)m(q,0,null,k);m(j.line,0,j.ch,k)}Qa.push({from:d.line,to:j.line+1});return function(){for(var u,y,D=0;D<n.length;++D){var P=n[D],Y=z(T,P.line);P.line.removeMark(P);if(Y>-1){if(u==null)u=Y;y=Y}}u!=null&&Qa.push({from:u,to:y+1})}}function Jb(d){eb.innerHTML="<pre><span>x</span></pre>";eb.firstChild.firstChild.firstChild.nodeValue=d;return eb.firstChild.firstChild.offsetWidth||10}function Ub(d,
j){if(j==0)return 0;eb.innerHTML="<pre><span>"+T[d].getHTML(null,null,false,j)+"</span></pre>";return eb.firstChild.firstChild.offsetWidth}function Vb(d,j){function k(P){eb.innerHTML="<pre><span>"+m.getHTML(null,null,false,P)+"</span></pre>";return eb.firstChild.firstChild.offsetWidth}if(j<=0)return 0;for(var m=T[d],n=0,q=0,s=m.text.length,u,y=Math.min(s,Math.ceil(j/Jb("x")));;){var D=k(y);if(D<=j&&y<s)y=Math.min(s,Math.ceil(y*1.2));else{u=D;s=y;break}}if(j>u)return s;y=Math.floor(s*0.8);D=k(y);if(D<
j){n=y;q=D}for(;;){if(s-n<=1)return u-j>j-q?n:s;y=Math.ceil((n+s)/2);D=k(y);if(D>j){s=y;u=D}else{n=y;q=D}}}function Wb(d,j){var k=$a(),m=d.line-(j?Ba:0);return{x:Ub(d.line,d.ch),y:m*k,yBot:(m+1)*k}}function fc(d){d=Wb(d,true);var j=ia(Xa);return{x:j.left+d.x,y:j.top+d.y,yBot:j.top+d.yBot}}function $a(){var d=Na.childNodes.length;if(d)return Na.offsetHeight/d||1;eb.innerHTML="<pre>x</pre>";return eb.firstChild.offsetHeight||1}function tb(d,j){var k=ia(ma,true),m=d.e.clientX,n=d.e.clientY;if(!j&&(m-
k.left>ma.clientWidth||n-k.top>ma.clientHeight))return null;k=ia(Xa,true);n=Ba+Math.floor((n-k.top)/$a());return Fa({line:n,ch:Vb(zb(n),m-k.left)})}function gc(d){function j(){za.value!=n&&qa(Ma)(za.value,"end");za.style.cssText=m;Ta=false;gb();ua()}var k=tb(d);if(!(!k||window.opera)){if(ka(N.from,N.to)||p(k,N.from)||!p(k,N.to))yb(k.line,k.ch);var m=za.style.cssText;za.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(d.pageY()-1)+"px; left: "+(d.pageX()-1)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden;";
var n=za.value=Ja();kb();U(za,0,za.value.length);Ta=true;if(la){d.stop();var q=K(window,"mouseup",function(){q();setTimeout(j,20)},true)}else setTimeout(j,50)}}function dc(){clearInterval(bc);var d=true;ob.style.visibility="";bc=setInterval(function(){ob.style.visibility=(d=!d)?"":"hidden"},650)}function Ra(d){function j(wa,r,v){if(wa.text){var G=wa.styles;wa=s?0:wa.text.length-1;for(var H,E=s?0:G.length-2,I=s?G.length:-2;E!=I;E+=2*u){var R=G[E];if(G[E+1]!=null&&G[E+1]!=Y)wa+=u*R.length;else for(var X=
s?0:R.length-1,ja=s?R.length:-1;X!=ja;X+=u,wa+=u)if(wa>=r&&wa<v&&Da.test(H=R.charAt(X))){var Ga=c[H];if(Ga.charAt(1)==">"==s)ca.push(H);else if(ca.pop()!=Ga.charAt(0))return{pos:wa,match:false};else if(!ca.length)return{pos:wa,match:true}}}}}var k=N.inverted?N.from:N.to,m=T[k.line],n=k.ch-1,q=n>=0&&c[m.text.charAt(n)]||c[m.text.charAt(++n)];if(q){q.charAt(0);var s=q.charAt(1)==">",u=s?1:-1,y=m.styles,D=n+1;q=0;for(var P=y.length;q<P;q+=2)if((D-=y[q].length)<=0){var Y=y[q+1];break}var ca=[m.text.charAt(n)],
Da=/[(){}[\]]/;q=k.line;for(P=s?Math.min(q+50,T.length):Math.max(-1,q-50);q!=P;q+=u){m=T[q];y=q==k.line;if(m=j(m,y&&s?n+1:0,y&&!s?n:m.text.length)){Y=m.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var ra=Tb({line:k.line,ch:n},{line:k.line,ch:n+1},Y),va=Tb({line:q,ch:m.pos},{line:q,ch:m.pos+1},Y);k=qa(function(){ra();va()});if(d)setTimeout(k,800);else qb=k;break}}}}function Xb(d){for(var j,k,m=d;m>d-40;--m){if(m==0)return 0;var n=T[m-1];if(n.stateAfter)return m;n=n.indentation();
if(k==null||j>n){k=m;j=n}}return k}function hc(d){var j=Xb(d),k=j&&T[j-1].stateAfter;k=k?a(Pa,k):e(Pa);for(j=j;j<d;++j){var m=T[j];m.highlight(Pa,k);m.stateAfter=a(Pa,k)}T[d].stateAfter||bb.push(d);return k}function mc(){for(var d=+new Date+fa.workTime,j=false;bb.length;){var k=T[Ba].stateAfter?bb.pop():Ba;if(!(k>=T.length)){j=true;var m=Xb(k),n=m&&T[m-1].stateAfter;n=n?a(Pa,n):e(Pa);m=m;for(var q=T.length;m<q;++m){var s=T[m],u=s.stateAfter;if(+new Date>d){bb.push(m);Kb(fa.workDelay);Qa.push({from:k,
to:m});return}var y=s.highlight(Pa,n);s.stateAfter=a(Pa,n);if(u&&!y&&s.text)break}Qa.push({from:k,to:m})}}j&&fa.onHighlightComplete&&fa.onHighlightComplete(Za)}function Kb(d){bb.length&&cc.set(d,qa(mc))}function Yb(){ab=null;Qa=[];pb=db=false}function Zb(){var d=false;if(db)d=!Fb();if(Qa.length)lb(Qa);else db&&Hb();d&&Fb();db&&dc();if(!Ta&&(ab===true||ab!==false&&db))gb();db&&fa.matchBrackets&&setTimeout(qa(function(){if(qb){qb();qb=null}Ra(false)}),20);d=pb;db&&fa.onCursorActivity&&fa.onCursorActivity(Za);
d&&fa.onChange&&Za&&fa.onChange(Za,d)}function qa(d){return function(){h++||Yb();try{var j=d.apply(this,arguments)}finally{--h||Zb()}return j}}function ic(d,j,k){this.atOccurrence=false;if(k==null)k=typeof d=="string"&&d==d.toLowerCase();j=j&&typeof j=="object"?Fa(j):{line:0,ch:0};this.pos={from:j,to:j};if(typeof d!="string")this.matches=function(q,s){if(q)for(var u=T[s.line].text.slice(0,s.ch),y=u.match(d),D=0;y;){var P=u.indexOf(y[0]);D+=P;u=u.slice(P+1);if(P=u.match(d))y=P;else break;D++}else{u=
T[s.line].text.slice(s.ch);D=(y=u.match(d))&&s.ch+u.indexOf(y[0])}if(y)return{from:{line:s.line,ch:D},to:{line:s.line,ch:D+y[0].length},match:y}};else{if(k)d=d.toLowerCase();var m=k?function(q){return q.toLowerCase()}:function(q){return q},n=d.split("\n");this.matches=n.length==1?function(q,s){var u=m(T[s.line].text),y=d.length,D;if(q?s.ch>=y&&(D=u.lastIndexOf(d,s.ch-y))!=-1:(D=u.indexOf(d,s.ch))!=-1)return{from:{line:s.line,ch:D},to:{line:s.line,ch:D+y}}}:function(q,s){var u=s.line,y=q?n.length-
1:0,D=n[y],P=m(T[u].text),Y=q?P.indexOf(D)+D.length:P.lastIndexOf(D);if(!(q?Y>=s.ch||Y!=D.length:Y<=s.ch||Y!=P.length-D.length))for(;;){if(q?!u:u==T.length-1)return;P=m(T[u+=q?-1:1].text);D=n[q?--y:++y];if(y>0&&y<n.length-1)if(P!=D)return;else continue;y=q?P.lastIndexOf(D):P.indexOf(D)+D.length;if(q?y!=P.length-D.length:y!=D.length)return;D={line:s.line,ch:Y};u={line:u,ch:y};return{from:q?u:D,to:q?D:u}}}}}var fa={},Qb=b.defaults;for(var fb in Qb)if(Qb.hasOwnProperty(fb))fa[fb]=(A&&A.hasOwnProperty(fb)?
A:Qb)[fb];var mb=fa.document,ma=mb.createElement("div");ma.className="CodeMirror";if(window.ActiveXObject&&/MSIE [1-7]\b/.test(navigator.userAgent))ma.style.position="relative";ma.innerHTML='<div style="position: relative"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"></div><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div style="overflow: hidden; position: absolute; width: 1px; height: 0; left: 0"><textarea style="position: absolute; width: 100000px;" wrap="off"></textarea></div><div class="CodeMirror-lines"><div style="position: relative"><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div>';
f.appendChild?f.appendChild(ma):f(ma);var Ab=ma.firstChild,eb=Ab.firstChild,Lb=eb.nextSibling,nb=Lb.firstChild,Mb=nb.firstChild,$b=nb.nextSibling,za=$b.firstChild,Xa=$b.nextSibling.firstChild,ob=Xa.firstChild,Na=ob.nextSibling;if(fa.tabindex!=null)za.tabindex=fa.tabindex;if(!fa.gutter&&!fa.lineNumbers)nb.style.display="none";var ac=new O,cc=new O,bc,Pa,T=[new i("")],bb,Ya=new o,Sa;ec();var N={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false},hb,ub,Db,ab,Qa,pb,db,Ta,Ba=0,ib=0,kc=0,jb=null,Ka,qb,
Eb="";qa(function(){M(fa.value||"");ab=false})();setTimeout(gb,20);K(ma,"mousedown",qa(function(d){function j(D){var P=tb(D,true);if(P&&!ka(P,q)){Sa||L();q=P;rb(n,P);ab=false;var Y=Sb();if(P.line>=Y.to||P.line<Y.from)s=setTimeout(qa(function(){j(D)}),150)}}var k=Db;Db=null;for(var m=d.target();m!=ma;m=m.parentNode)if(m.parentNode==Mb){fa.onGutterClick&&fa.onGutterClick(Za,z(Mb.childNodes,m)+Ba);return d.stop()}la&&d.button()==3&&gc(d);if(d.button()==1){var n=tb(d),q=n,s;if(n){Sa||L();d.stop();if(k&&
+new Date-k<400)return lc(n.line);yb(n.line,n.ch,true);var u=K(mb,"mousemove",qa(function(D){clearTimeout(s);D.stop();j(D)}),true),y=K(mb,"mouseup",qa(function(D){clearTimeout(s);var P=tb(D);P&&rb(n,P);D.stop();kb();ab=true;u();y()}),true)}else d.target()==ma&&d.stop()}}));la||K(ma,"contextmenu",qa(gc));K(Ab,"dblclick",qa(function(d){var j=tb(d);if(j){for(var k=T[j.line].text,m=j.ch,n=j.ch;m>0&&/\w/.test(k.charAt(m-1));)--m;for(;n<k.length&&/\w/.test(k.charAt(n));)++n;rb({line:j.line,ch:m},{line:j.line,
ch:n});d.stop();Db=+new Date}}));K(ma,"scroll",function(){lb([]);fa.onScroll&&fa.onScroll(Za)});K(window,"resize",function(){lb(true)});K(za,"keyup",qa(function(d){if(!(fa.onKeyEvent&&fa.onKeyEvent(Za,C(d.e)))){if(ub){ub=null;ab=true}if(d.e.keyCode==16)hb=null}}));K(za,"keydown",qa(function(d){Sa||L();var j=d.e.keyCode,k=(Ca?d.e.metaKey:d.e.ctrlKey)&&!d.e.altKey,m=d.e.ctrlKey||d.e.altKey||d.e.metaKey;hb=j==16||d.e.shiftKey?hb||(N.inverted?N.to:N.from):null;if(!(fa.onKeyEvent&&fa.onKeyEvent(Za,C(d.e)))){if(j==
33||j==34){j=j==34;k=Math.floor(ma.clientHeight/$a());m=N.inverted?N.from:N.to;yb(m.line+Math.max(k-1,1)*(j?1:-1),m.ch,true);return d.stop()}if(k&&(j==36||j==35||Ca&&(j==38||j==40))){yb(j==36||j==38?0:T.length-1,true);return d.stop()}if(k&&j==65){j=T.length-1;xb({line:0,ch:0},{line:j,ch:T[j].text.length});return d.stop()}if(!fa.readOnly){if(!m&&j==13)return;if(m=!m){if(m=j==9)a:{m=d.e.shiftKey;hb=null;switch(fa.tabMode){case "default":m=false;break a;case "indent":for(var n=N.from.line,q=N.to.line;n<=
q;++n)sb(n,"smart");break;case "classic":if(ka(N.from,N.to)){m?sb(N.from.line,"smart"):Ma("\t","end");break}case "shift":n=N.from.line;for(q=N.to.line;n<=q;++n)sb(n,m?"subtract":"add");break}m=true}m=m}if(m)return d.stop();if(k&&j==90){pa();return d.stop()}if(k&&(d.e.shiftKey&&j==90||j==89)){Ha();return d.stop()}}jb=(k?"c":"")+j;if(N.inverted&&Ua.hasOwnProperty(jb))if(d=Q(za)){ub={anchor:d.start};U(za,d.start,d.start)}ya(jb)}}));K(za,"keypress",qa(function(d){if(!(fa.onKeyEvent&&fa.onKeyEvent(Za,
C(d.e)))){if(fa.electricChars&&Pa.electricChars){var j=String.fromCharCode(d.e.charCode==null?d.e.keyCode:d.e.charCode);Pa.electricChars.indexOf(j)>-1&&setTimeout(qa(function(){sb(N.to.line,"smart")}),50)}j=d.e.keyCode;if(j==13){if(!fa.readOnly){Ma("\n","end");if(fa.enterMode!="flat")sb(N.from.line,fa.enterMode=="keep"?"prev":"smart")}d.stop()}else!d.e.ctrlKey&&!d.e.altKey&&!d.e.metaKey&&j==9&&fa.tabMode!="default"?d.stop():ya(jb)}}));K(za,"focus",L);K(za,"blur",S);K(ma,"dragenter",function(d){d.stop()});
K(ma,"dragover",function(d){d.stop()});K(ma,"drop",qa(function(d){var j=tb(d,true),k=d.e.dataTransfer.files;if(!(!j||fa.readOnly))if(k&&k.length&&window.FileReader&&window.File){var m=k.length,n=Array(m),q=0;for(d=0;d<m;++d)s(k[d],d);var s=function(y,D){var P=new FileReader;P.onload=function(){n[D]=P.result;++q==m&&Ia(n.join(""),Fa(j),Fa(j))};P.readAsText(y)}}else try{(n=d.e.dataTransfer.getData("Text"))&&Ia(n,j,j)}catch(u){}}));K(ma,"paste",function(){kb();ya()});K(za,"paste",function(){ya()});K(za,
"cut",function(){ya()});mb.activeElement==za?L():S();var Za={getValue:function(){for(var d=[],j=0,k=T.length;j<k;++j)d.push(T[j].text);return d.join("\n")},setValue:qa(M),getSelection:Ja,replaceSelection:qa(Ma),focus:function(){kb();L();ya()},setOption:function(d,j){fa[d]=j;if(d=="lineNumbers"||d=="gutter"){var k=fa.gutter||fa.lineNumbers;nb.style.display=k?"":"none";if(k)Gb();else Na.parentNode.style.marginLeft=0}else if(d=="mode"||d=="indentUnit")ec();else d=="readOnly"&&j=="nocursor"&&za.blur()},
getOption:function(d){return fa[d]},undo:qa(pa),redo:qa(Ha),indentLine:qa(function(d){d>=0&&d<T.length&&sb(d,"smart")}),historySize:function(){return{undo:Ya.done.length,redo:Ya.undone.length}},matchBrackets:qa(function(){Ra(true)}),getTokenAt:function(d){d=Fa(d);return T[d.line].getTokenAt(Pa,hc(d.line),d.ch)},cursorCoords:function(d){if(d==null)d=N.inverted;return fc(d?N.from:N.to)},charCoords:function(d){return fc(Fa(d))},coordsChar:function(d){var j=ia(Xa),k=zb(Math.min(T.length-1,Ba+Math.floor((d.y-
j.top)/$a())));return Fa({line:k,ch:Vb(zb(k),d.x-j.left)})},getSearchCursor:function(d,j,k){return new ic(d,j,k)},markText:qa(function(d,j,k){return qa(Tb(d,j,k))}),setMarker:function(d,j,k){if(typeof d=="number")d=T[zb(d)];d.gutterMarker={text:j,style:k};Gb();return d},clearMarker:function(d){if(typeof d=="number")d=T[zb(d)];d.gutterMarker=null;Gb()},setLineClass:qa(function(d,j){if(typeof d=="number"){var k=d;d=T[zb(d)]}else{k=z(T,d);if(k==-1)return null}if(d.className!=j){d.className=j;Qa.push({from:k,
to:k+1})}return d}),lineInfo:function(d){if(typeof d=="number"){var j=d;d=T[d];if(!d)return null}else{j=z(T,d);if(j==-1)return null}var k=d.gutterMarker;return{line:j,text:d.text,markerText:k&&k.text,markerClass:k&&k.style}},addWidget:function(d,j,k){d=Wb(Fa(d),true);j.style.top=Ba*$a()+d.yBot+Xa.offsetTop+"px";j.style.left=d.x+Xa.offsetLeft+"px";Ab.appendChild(j);k&&Rb(d.x,d.yBot,d.x+j.offsetWidth,d.yBot+j.offsetHeight)},lineCount:function(){return T.length},getCursor:function(d){if(d==null)d=N.inverted;
return{line:(d?N.from:N.to).line,ch:(d?N.from:N.to).ch}},somethingSelected:function(){return!ka(N.from,N.to)},setCursor:qa(function(d,j){j==null&&typeof d.line=="number"?yb(d.line,d.ch):yb(d,j)}),setSelection:qa(function(d,j){xb(Fa(d),Fa(j||d))}),getLine:function(d){if(d>=0&&d<T.length)return T[d].text},setLine:qa(function(d,j){d>=0&&d<T.length&&Ia(j,{line:d,ch:0},{line:d,ch:T[d].text.length})}),removeLine:qa(function(d){d>=0&&d<T.length&&Ia("",{line:d,ch:0},Fa({line:d+1,ch:0}))}),replaceRange:qa(Ia),
getRange:function(d,j){return ta(Fa(d),Fa(j))},operation:function(d){return qa(d)()},refresh:function(){lb(true)},getInputField:function(){return za},getWrapperElement:function(){return ma}},Pb=false,c={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},h=0;ic.prototype={findNext:function(){return this.find(false)},findPrevious:function(){return this.find(true)},find:function(d){function j(n){n={line:n,ch:0};k.pos={from:n,to:n};return k.atOccurrence=false}for(var k=this,m=Fa(d?this.pos.from:this.pos.to);;){if(this.pos=
this.matches(d,m)){this.atOccurrence=true;return this.pos.match||true}if(d){if(!m.line)return j(0);m={line:m.line-1,ch:T[m.line-1].text.length}}else{if(m.line==T.length-1)return j(T.length);m={line:m.line+1,ch:0}}}},from:function(){if(this.atOccurrence)return{line:this.pos.from.line,ch:this.pos.from.ch}},to:function(){if(this.atOccurrence)return{line:this.pos.to.line,ch:this.pos.to.ch}}};return Za}function a(f,A){if(A===true)return A;if(f.copyState)return f.copyState(A);var M={};for(var L in A){var S=
A[L];if(S instanceof Array)S=S.concat([]);M[L]=S}return M}function e(f,A,M){return f.startState?f.startState(A,M):true}function g(f){this.pos=this.start=0;this.string=f}function i(f,A){this.styles=A||[f,null];this.stateAfter=null;this.text=f;this.marked=this.gutterMarker=this.className=null}function l(f,A,M,L){for(var S=0,ea=0,da=0;ea<A;S+=2){var pa=M[S],Ha=ea+pa.length;if(da==0){Ha>f&&L.push(pa.slice(f-ea,Math.min(pa.length,A-ea)),M[S+1]);if(Ha>=f)da=1}else if(da==1)Ha>A?L.push(pa.slice(0,A-ea),
M[S+1]):L.push(pa,M[S+1]);ea=Ha}}function o(){this.time=0;this.done=[];this.undone=[]}function w(){if(this.preventDefault){this.preventDefault();this.stopPropagation()}else{this.returnValue=false;this.cancelBubble=true}}function C(f){if(!f.stop)f.stop=w;return f}function B(f){this.e=f}function K(f,A,M,L){function S(ea){M(new B(ea||window.event))}if(typeof f.addEventListener=="function"){f.addEventListener(A,S,false);if(L)return function(){f.removeEventListener(A,S,false)}}else{f.attachEvent("on"+
A,S);if(L)return function(){f.detachEvent("on"+A,S)}}}function O(){this.id=null}function aa(f,A){if(A==null){A=f.search(/[^\s\u00a0]/);if(A==-1)A=f.length}for(var M=0,L=0;M<A;++M)if(f.charAt(M)=="\t")L+=oa-L%oa;else++L;return L}function ia(f,A){for(var M=f.ownerDocument.body,L=0,S=0,ea=false,da=f;da;da=da.offsetParent){L+=da.offsetLeft;S+=da.offsetTop;if(da==M)ea=true}for(da=f.parentNode;da!=(A&&ea?null:M);da=da.parentNode)if(da.scrollLeft!=null){L-=da.scrollLeft;S-=da.scrollTop}return{left:L,top:S}}
function ka(f,A){return f.line==A.line&&f.ch==A.ch}function p(f,A){return f.line<A.line||f.line==A.line&&f.ch<A.ch}function t(f){return f.replace(/[<>&]/g,function(A){return A=="&"?"&amp;":A=="<"?"&lt;":"&gt;"})}function z(f,A){if(f.indexOf)return f.indexOf(A);for(var M=0,L=f.length;M<L;++M)if(f[M]==A)return M;return-1}b.defaults={value:"",mode:null,indentUnit:2,indentWithTabs:false,tabMode:"classic",enterMode:"indent",electricChars:true,onKeyEvent:null,lineNumbers:false,gutter:false,firstLineNumber:1,
readOnly:false,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,workTime:100,workDelay:200,undoDepth:40,tabindex:null,document:window.document};var F={},ba={};b.defineMode=function(f,A){if(!b.defaults.mode&&f!="null")b.defaults.mode=f;F[f]=A};b.defineMIME=function(f,A){ba[f]=A};b.getMode=function(f,A){if(typeof A=="string"&&ba.hasOwnProperty(A))A=ba[A];if(typeof A=="string")var M=A,L={};else if(A!=null){M=A.name;
L=A}var S=F[M];if(!S){window.console&&console.warn("No mode "+M+" found, falling back to plain text.");return b.getMode(f,"text/plain")}return S(f,L||{})};b.listModes=function(){var f=[];for(var A in F)F.propertyIsEnumerable(A)&&f.push(A);return f};b.listMIMEs=function(){var f=[];for(var A in ba)ba.propertyIsEnumerable(A)&&f.push(A);return f};b.fromTextArea=function(f,A){function M(){f.value=da.getValue()}A||(A={});A.value=f.value;if(!A.tabindex&&f.tabindex)A.tabindex=f.tabindex;if(f.form){var L=
K(f.form,"submit",M,true);if(typeof f.form.submit=="function"){var S=f.form.submit,ea=function(){M();f.form.submit=S;f.form.submit();f.form.submit=ea};f.form.submit=ea}}f.style.display="none";var da=b(function(pa){f.parentNode.insertBefore(pa,f.nextSibling)},A);da.save=M;da.toTextArea=function(){M();f.parentNode.removeChild(da.getWrapperElement());f.style.display="";if(f.form){L();if(typeof f.form.submit=="function")f.form.submit=S}};return da};b.startState=e;b.copyState=a;g.prototype={eol:function(){return this.pos>=
this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(f){var A=this.string.charAt(this.pos);if(typeof f=="string"?A==f:A&&(f.test?f.test(A):f(A))){++this.pos;return A}},eatWhile:function(f){for(var A=this.start;this.eat(f););return this.pos>A},eatSpace:function(){for(var f=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>
f},skipToEnd:function(){this.pos=this.string.length},skipTo:function(f){f=this.string.indexOf(f,this.pos);if(f>-1){this.pos=f;return true}},backUp:function(f){this.pos-=f},column:function(){return aa(this.string,this.start)},indentation:function(){return aa(this.string)},match:function(f,A,M){if(typeof f=="string"){if((M?this.string.toLowerCase():this.string).indexOf(M?f.toLowerCase():f,this.pos)==this.pos){if(A!==false)this.pos+=f.length;return true}}else{if((f=this.string.slice(this.pos).match(f))&&
A!==false)this.pos+=f[0].length;return f}},current:function(){return this.string.slice(this.start,this.pos)}};i.prototype={replace:function(f,A,M){var L=[],S=this.marked;l(0,f,this.styles,L);M&&L.push(M,null);l(A,this.text.length,this.styles,L);this.styles=L;this.text=this.text.slice(0,f)+M+this.text.slice(A);this.stateAfter=null;if(S){f=M.length-(A-f);M=this.text.length;for(L=0;L<S.length;++L){var ea=S[L],da=false;if(ea.from>=M)da=true;else{ea.from=ea.from<=Math.min(A,A+f)?ea.from:ea.from+f;if(ea.to!=
null)ea.to=ea.to<=Math.min(A,A+f)?ea.to:ea.to+f}if(da||ea.from>=ea.to){S.splice(L,1);L--}}}},split:function(f,A){var M=[A,null];l(f,this.text.length,this.styles,M);return new i(A+this.text.slice(f),M)},addMark:function(f,A,M){f={from:f,to:A,style:M};if(this.marked==null)this.marked=[];this.marked.push(f);this.marked.sort(function(L,S){return L.from-S.from});return f},removeMark:function(f){var A=this.marked;if(A)for(var M=0;M<A.length;++M)if(A[M]==f){A.splice(M,1);break}},highlight:function(f,A){var M=
new g(this.text),L=this.styles,S=0,ea=false,da=L[0],pa;for(this.text==""&&f.blankLine&&f.blankLine(A);!M.eol();){var Ha=f.token(M,A),La=this.text.slice(M.start,M.pos);M.start=M.pos;if(S&&L[S-1]==Ha)L[S-2]+=La;else if(La){if(!ea&&(L[S+1]!=Ha||S&&L[S-2]!=pa))ea=true;L[S++]=La;L[S++]=Ha;pa=da;da=L[S]}if(M.pos>5E3){L[S++]=this.text.slice(M.pos);L[S++]=null;break}}if(L.length!=S){L.length=S;ea=true}if(S&&L[S-2]!=pa)ea=true;return ea},getTokenAt:function(f,A,M){for(var L=new g(this.text);L.pos<M&&!L.eol();){L.start=
L.pos;var S=f.token(L,A)}return{start:L.start,end:L.pos,string:L.current(),className:S||null,state:A}},indentation:function(){return aa(this.text)},getHTML:function(f,A,M,L){function S(kb,Fb){if(kb)Fb?ea.push('<span class="',Fb,'">',t(kb),"</span>"):ea.push(t(kb))}var ea=[];if(M)ea.push(this.className?'<pre class="'+this.className+'">':"<pre>");var da=this.styles,pa=this.text,Ha=this.marked;if(f==A)f=null;var La=pa.length;if(L!=null)La=Math.min(L,La);if(!pa&&L==null)S(" ",f!=null&&A==null?"CodeMirror-selected":
null);else if(!Ha&&f==null)for(f=L=0;f<La;L+=2){A=da[L];var Ia=A.length;if(f+Ia>La)A=A.slice(0,La-f);f+=Ia;S(A,da[L+1])}else{L=pa=0;var Ma="",Wa=-1,ta=null,Ja=function(){if(Ha){Wa+=1;ta=Wa<Ha.length?Ha[Wa]:null}};for(Ja();pa<La;){var ua=La,ya="";if(f!=null)if(f>pa)ua=f;else if(A==null||A>pa){ya=" CodeMirror-selected";if(A!=null)ua=Math.min(ua,A)}for(;ta&&ta.to!=null&&ta.to<=pa;)Ja();if(ta)if(ta.from>pa)ua=Math.min(ua,ta.from);else{ya+=" "+ta.style;if(ta.to!=null)ua=Math.min(ua,ta.to)}for(;;){var cb=
pa+Ma.length,gb=Ia;if(ya)gb=Ia?Ia+ya:ya;S(cb>ua?Ma.slice(0,ua-pa):Ma,gb);if(cb>=ua){Ma=Ma.slice(ua-pa);pa=ua;break}pa=cb;Ma=da[L++];Ia=da[L++]}}f!=null&&A==null&&S(" ","CodeMirror-selected")}M&&ea.push("</pre>");return ea.join("")}};o.prototype={addChange:function(f,A,M){this.undone.length=0;var L=+new Date,S=this.done[this.done.length-1];if(L-this.time>400||!S||S.start>f+A||S.start+S.added<f-S.added+S.old.length)this.done.push({start:f,added:A,old:M});else{var ea=0;if(f<S.start){for(var da=S.start-
f-1;da>=0;--da)S.old.unshift(M[da]);S.added+=S.start-f;S.start=f}else if(S.start<f){ea=f-S.start;A+=ea}da=S.added-ea;for(f=M.length;da<f;++da)S.old.push(M[da]);if(S.added<A)S.added=A}this.time=L}};B.prototype={stop:function(){w.call(this.e)},target:function(){return this.e.target||this.e.srcElement},button:function(){if(this.e.which)return this.e.which;else if(this.e.button&1)return 1;else if(this.e.button&2)return 3;else if(this.e.button&4)return 2},pageX:function(){if(this.e.pageX!=null)return this.e.pageX;
var f=this.target().ownerDocument;return this.e.clientX+f.body.scrollLeft+f.documentElement.scrollLeft},pageY:function(){if(this.e.pageY!=null)return this.e.pageY;var f=this.target().ownerDocument;return this.e.clientY+f.body.scrollTop+f.documentElement.scrollTop}};O.prototype={set:function(f,A){clearTimeout(this.id);this.id=setTimeout(A,f)}};var ga=function(){var f=document.createElement("pre");f.innerHTML=" ";return!f.innerHTML}(),la=/gecko\/\d{7}/i.test(navigator.userAgent),na="\n";(function(){var f=
document.createElement("textarea");f.value="foo\nbar";if(f.value.indexOf("\r")>-1)na="\r\n"})();for(var oa=8,Ca=/Mac/.test(navigator.platform),Ua={},Va=35;Va<=40;++Va)Ua[Va]=Ua["c"+Va]=true;var V="\n\nb".split(/\n/).length!=3?function(f){for(var A=0,M,L=[];(M=f.indexOf("\n",A))>-1;){L.push(f.slice(A,f.charAt(M-1)=="\r"?M-1:M));A=M+1}L.push(f.slice(A));return L}:function(f){return f.split(/\r?\n/)};if(window.getSelection)var Q=function(f){try{return{start:f.selectionStart,end:f.selectionEnd}}catch(A){return null}},
U=function(f,A,M){try{f.setSelectionRange(A,M)}catch(L){}};else{Q=function(f){try{var A=f.ownerDocument.selection.createRange()}catch(M){return null}if(!A||A.parentElement()!=f)return null;var L=f.value,S=L.length,ea=f.createTextRange();ea.moveToBookmark(A.getBookmark());var da=f.createTextRange();da.collapse(false);if(ea.compareEndPoints("StartToEnd",da)>-1)return{start:S,end:S};f=-ea.moveStart("character",-S);for(A=L.indexOf("\r");A>-1&&A<f;A=L.indexOf("\r",A+1),f++);if(ea.compareEndPoints("EndToEnd",
da)>-1)return{start:f,end:S};S=-ea.moveEnd("character",-S);for(A=L.indexOf("\r");A>-1&&A<S;A=L.indexOf("\r",A+1),S++);return{start:f,end:S}};U=function(f,A,M){var L=f.createTextRange();L.collapse(true);var S=L.duplicate(),ea=0;f=f.value;for(var da=f.indexOf("\n");da>-1&&da<A;da=f.indexOf("\n",da+1))++ea;for(L.move("character",A-ea);da>-1&&da<M;da=f.indexOf("\n",da+1))++ea;S.move("character",M-ea);L.setEndPoint("EndToEnd",S);L.select()}}b.defineMode("null",function(){return{token:function(f){f.skipToEnd()}}});
b.defineMIME("text/plain","null");return b}();
jQuery.cookie=function(b,a,e){if(typeof a!="undefined"){e=e||{};if(a===null){a="";e.expires=-1}var g="";if(e.expires&&(typeof e.expires=="number"||e.expires.toUTCString)){if(typeof e.expires=="number"){g=new Date;g.setTime(g.getTime()+e.expires*24*60*60*1E3)}else g=e.expires;g="; expires="+g.toUTCString()}var i=e.path?"; path="+e.path:"",l=e.domain?"; domain="+e.domain:"";e=e.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(a),g,i,l,e].join("")}else{a=null;if(document.cookie&&document.cookie!=
""){e=document.cookie.split(";");for(g=0;g<e.length;g++){i=jQuery.trim(e[g]);if(i.substring(0,b.length+1)==b+"="){a=decodeURIComponent(i.substring(b.length+1));break}}}return a}};
function Sanskrit(b,a){this.options=a||{};this.textarea=b;this.form=b.form;this.container=document.createElement("div");this.iframe=document.createElement("iframe");this.hiddenInput=document.createElement("input");this.hiddenInput.type="hidden";this.callbacks=Sanskrit.inherit(Sanskrit.prototype.callbacks);for(var e in Sanskrit.prototype.callbacks)if(Sanskrit.prototype.callbacks.hasOwnProperty(e)&&typeof this.options[e]==="function")this.callbacks[e]=this.options[e];this.replaceTextarea();var g=this;
this.onReady(function(){g.findContentDocument();if(g.richTextIsAvailable()){g.applyClassNames();g.enableEditor();g.addStyle(Sanskrit.defaultStyle);g.createToolbar();g.hijackForm()}else g.unreplaceTextarea()});Sanskrit.editors.push(this)}Sanskrit.inherit=function(b){function a(){}a.prototype=b;return new a};Sanskrit.getClassName=function(b){return b.getAttribute("class")||b.getAttribute("className")};Sanskrit.setClassName=function(b,a){b.setAttribute("class",a);b.className=a};
Sanskrit.hasClassName=function(b,a){if(!Sanskrit.getClassName(b))return false;for(var e=Sanskrit.getClassName(b).split(" "),g=0;g<e.length;g++)if(e[g]==a)return true;return false};Sanskrit.addClassName=function(b,a){if(Sanskrit.hasClassName(b,a))return false;var e=Sanskrit.getClassName(b)||"";Sanskrit.setClassName(b,e==""?a:e+" "+a);return true};
Sanskrit.removeClassName=function(b,a){for(var e=(Sanskrit.getClassName(b)||"").split(" "),g=[],i=0;i<e.length;i++)e[i]!=a&&g.push(e[i]);g=g.join(" ");Sanskrit.setClassName(b,g);return g};Sanskrit.defaultStyle="html { padding:0; cursor:text; } body { font-size:90%; margin:0; padding:0.5em; cursor:text; } p { margin: 0.5em 0; }";Sanskrit.editors=[];
Sanskrit.prototype={onReady:function(b){setTimeout(b,250)},findContentDocument:function(){if(this.iframe.contentDocument){this.internetExplorer=false;this.contentDocument=this.iframe.contentDocument}else{this.internetExplorer=true;this.contentDocument=this.iframe.contentWindow.document}return this.contentDocument},replaceTextarea:function(){this.container.appendChild(this.iframe);this.hiddenInput.value=this.textarea.value;this.hiddenInput.name=this.textarea.name;this.hiddenInput.id=this.textarea.id;
this.container.insertBefore(this.hiddenInput,this.iframe);this.textarea.parentNode.insertBefore(this.container,this.textarea);this.textarea.parentNode.removeChild(this.textarea)},unreplaceTextarea:function(){this.container.parentNode.insertBefore(this.textarea,this.container);this.container.parentNode.removeChild(this.container)},toggleTextarea:function(){if(this.iframe.parentNode){this.textarea.value=this.textilize(this.getContents());this.iframe.parentNode.insertBefore(this.textarea,this.iframe);
this.iframe.parentNode.removeChild(this.iframe);return true}else{this.textarea.parentNode.insertBefore(this.iframe,this.textarea);this.textarea.parentNode.removeChild(this.textarea);var b=this;this.onReady(function(){b.findContentDocument();b.hiddenInput.value=b.textarea.value;b.enableEditor();b.toolbar.observeEditor()});return false}},enableEditor:function(){this.contentDocument.designMode="on";try{this.execCommand("styleWithCSS",false)}catch(b){}this.setContents(this.htmlize(this.hiddenInput.value))},
focusEditor:function(){this.iframe.contentWindow.focus()},createToolbar:function(){this.toolbar=new SanskritToolbar(this,this.options.toolbar||{})},insertToolbar:function(b){this.container.insertBefore(b,this.iframe)},getContents:function(){return this.contentDocument.getElementsByTagName("body")[0].innerHTML},setContents:function(b){var a=this;setTimeout(function(){a.contentDocument.getElementsByTagName("body")[0].innerHTML=b},250)},getSelection:function(){return this.iframe.contentWindow.document.selection?
this.iframe.contentWindow.document.selection:this.iframe.contentWindow.getSelection()},getCurrentAncestors:function(){var b=this.getSelection();if(b.createRange){b=b.createRange();b=b.parentElement()}else{b=b.getRangeAt(0);b=b.commonAncestorContainer}for(var a=[];b.nodeType!==1||b.nodeName.toLowerCase()!=="body";){b.nodeType===1&&a.push(b);b=b.parentNode}return a},includeAncestor:function(b,a){a=a||this.getCurrentAncestors();for(var e=false,g=0;g<a.length;g++)if(a[g].nodeName.toLowerCase()==b.toLowerCase())e=
true;return e},applyClassNames:function(){Sanskrit.addClassName(this.container,this.options.className||"sanskrit")},hijackForm:function(){var b=this,a=this.form.onsubmit||function(){};this.form.onsubmit=function(){a();b.hiddenInput.value=b.textilize(b.iframe.parentNode?b.getContents():b.textarea.value);return b.callbacks.onSubmit.call(b)}},addStyle:function(b){var a=this;setTimeout(function(){if(document.createStyleSheet){var e=a.contentDocument.createStyleSheet(),g=b.split("}"),i,l;for(i=0;i<g.length-
1;i++){l=g[i].split("{");e.addRule(l[0],l[1])}}else{e=document.createElement("style");e.appendChild(document.createTextNode(b));a.contentDocument.getElementsByTagName("head")[0].appendChild(e)}},250)},textilize:function(b,a){b=b.replace(/\s*<p>((.|[\r\n])*?)<\/p>\s*/gi,"\n\n$1\n\n");b=b.replace(/<br ?\/?>/gi,"\n");b=b.replace(/<(?:b|strong)>((.|[\r\n])*?)<\/(?:b|strong)>/gi,"*$1*");b=b.replace(/<(?:i|em)>((.|[\r\n])*?)<\/(?:i|em)>/gi,"_$1_");b=b.replace(/<(?:strike|del)>((.|[\r\n])*?)<\/(?:strike|del)>/gi,
"-$1-");b=b.replace(/<(?:u|ins)>((.|[\r\n])*?)<\/(?:u|ins)>/gi,"+$1+");b=b.replace(/<a href="(.*?)">((.|[\r\n])*?)<\/a>/gi,'"$2":$1');b=b.replace(/<code.*?>((.|[\r\n])*?)<\/code>/gi,"@$1@");if(a)b=b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");b=b.replace(/(\r\n|\n){3,}/g,"\n\n");return b=b.replace(/^[\r\n]+|[\r\n]+$/g,"")},htmlize:function(b,a){for(var e=b.split("\n\n"),g=0;g<e.length;g++){e[g]=e[g].replace(/(^|\r\n|\n|\r)\* (.*)/g,"$1###LI### $2");e[g]=e[g].replace(/\n/gi,"<br/>");
e[g]=e[g].replace(/@((.|[\r\n])*?)@/gi,"<code>$1</code>");e[g]=e[g].replace(/\*(.+?)\*/gi,this.internetExplorer?"<strong>$1</strong>":"<b>$1</b>");e[g]=e[g].replace(/_(.+?)_/gi,this.internetExplorer?"<em>$1</em>":"<i>$1</i>");e[g]=e[g].replace(/\+(.+?)\+/gi,"<u>$1</u>");e[g]=e[g].replace(/-(.+?)-/gi,"<strike>$1</strike>");e[g]=e[g].replace(/"(.+?)":([^\s\n<]+)/gi,'<a href="$2">$1</a>');e[g]=e[g].replace(/###LI###/gi,"*");e[g]="<p>"+e[g]+"</p>"}b=e.join("\n");b=b.replace(/<p>[\s\n]*<\/p>/g,"");if(a)b=
b.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");return b},execCommand:function(b,a){if(typeof a=="undefined")a=null;this.contentDocument.execCommand(b,false,a)},richTextIsAvailable:function(){return typeof this.contentDocument.execCommand!="undefined"},callbacks:{onSubmit:function(){return true}}};
function SanskritToolbar(b,a){this.options=a||{};this.editor=b;this.list=document.createElement("ul");this.listItems=[];this.listItemCallbacks={};this.availableActions={strong:"strong",em:"em",ins:"ins",del:"del",link:"link",unlink:"unlink",textile:"textile"};this.callbacks=Sanskrit.inherit(SanskritToolbar.prototype.callbacks);for(var e in this.actions){var g="on"+e.slice(0,1).toUpperCase()+e.slice(1);if(typeof this.options[g]==="function")this.callbacks[g]=this.options[g]}this.addListItems();this.applyClassNames();
this.injectListIntoEditor();this.observeEditor()}
SanskritToolbar.prototype={actions:{strong:function(b){b.execCommand("Bold")},em:function(b){b.execCommand("Italic")},link:function(b){var a=prompt("Enter link address:");if(typeof a==="string"){a.match(/^[a-zA-Z]+:\/\//)||(a="http://"+a);b.execCommand("createLink",a)}else return false},unlink:function(b){b.execCommand("unlink");b.toolbar.deactivateListItem("link");b.toolbar.activateListItem("unlink")},del:function(b){b.execCommand("strikeThrough")},ins:function(b){b.execCommand("underline")},textile:function(b){b.toolbar.resetListStatus();
var a=b.toolbar;(b=b.toggleTextarea())?a.activateListItem("textile"):a.deactivateListItem("textile");for(var e in a.actions)if(a.actions.hasOwnProperty(e)&&e!=="textile")b?a.hideListItem(e):a.showListItem(e);return false}},callbacks:{},createAction:function(b,a){var e=this,g=b.onclick||function(){};return function(){g();if(e.actions[a](e.editor)!==false){var i="on"+a.slice(0,1).toUpperCase()+a.slice(1);typeof e.callbacks[i]==="function"&&e.callbacks[i].call(e.editor);e.updateListStatus(e.editor.getCurrentAncestors());
e.editor.focusEditor()}return false}},addListItems:function(){var b=this.options.actions||this.availableActions;for(var a in b)if(b.hasOwnProperty(a)){var e=document.createElement("li"),g=document.createElement("span");Sanskrit.addClassName(e,a);g.appendChild(typeof b[a]=="string"?document.createTextNode(b[a]):b[a]);g.onclick=this.createAction(g,a);e.appendChild(g);this.listItems.push(e);this.list.appendChild(e)}},applyClassNames:function(){Sanskrit.addClassName(this.list,"toolbar")},injectListIntoEditor:function(){this.editor.insertToolbar(this.list)},
observeEditor:function(){var b=this;setTimeout(function(){if(b.editor.contentDocument.addEventListener){b.editor.contentDocument.addEventListener("mouseup",function(){b.updateListStatus(b.editor.getCurrentAncestors())},false);b.editor.contentDocument.addEventListener("keyup",function(){b.updateListStatus(b.editor.getCurrentAncestors())},false);b.editor.contentDocument.addEventListener("keydown",function(){b.updateListStatus(b.editor.getCurrentAncestors())},false);b.editor.contentDocument.addEventListener("blur",
function(){b.resetListStatus()},false)}else{b.editor.contentDocument.attachEvent("onmouseup",function(){b.updateListStatus(b.editor.getCurrentAncestors())});b.editor.contentDocument.attachEvent("onkeyup",function(){b.updateListStatus(b.editor.getCurrentAncestors())});b.editor.contentDocument.attachEvent("onkeydown",function(){b.updateListStatus(b.editor.getCurrentAncestors())},false);b.editor.contentDocument.attachEvent("onblur",function(){b.resetListStatus()},false)}},100)},getListItem:function(b){if(typeof b!=
"string")return b;for(var a=0;a<this.listItems.length;a++)if(Sanskrit.hasClassName(this.listItems[a],b))return this.listItems[a];return document.createElement("li")},activateListItem:function(b){Sanskrit.addClassName(this.getListItem(b),"active")},deactivateListItem:function(b){Sanskrit.removeClassName(this.getListItem(b),"active")},toggleListItem:function(b){b=this.getListItem(b);Sanskrit.hasClassName(b,"active")?Sanskrit.removeClassName(b,"active"):Sanskrit.addClassName(b,"active")},hideListItem:function(b){b=
this.getListItem(b);b.previousDisplayValue=b.style.display;b.style.display="none"},showListItem:function(b){b=this.getListItem(b);b.style.display=b.previousDisplayValue||""},resetListStatus:function(){for(var b=0;b<this.listItems.length;b++)this.deactivateListItem(this.listItems[b])},updateListStatus:function(b){this.resetListStatus();for(var a=0;a<b.length;a++)switch(b[a].nodeName.toLowerCase()){case "b":this.activateListItem("strong");break;case "strong":this.activateListItem("strong");break;case "i":this.activateListItem("em");
break;case "em":this.activateListItem("em");break;case "u":this.activateListItem("ins");break;case "strike":this.activateListItem("del");break;case "a":this.activateListItem("link");break}}};Sanskrit.onLoadFunction=function(){for(var b=[],a=document.getElementsByTagName("textarea"),e=0;e<a.length;e++)b.push(a[e]);for(e=0;e<b.length;e++)Sanskrit.hasClassName(b[e],"sanskrit")&&new Sanskrit(b[e])};
if(typeof Event!="undefined"&&Event.onReady)Event.onReady(Sanskrit.onLoadFunction);else if(typeof Event!="undefined"&&Event.observe)Event.observe(window,"load",Sanskrit.onLoadFunction);else if(window.addEventListener)window.addEventListener("load",Sanskrit.onLoadFunction,false);else if(window.attachEvent)window.attachEvent("onload",Sanskrit.onLoadFunction,false);else{var old=window.onload;window.onload=function(){old();Sanskrit.onLoadFunction()}}
var Asset=Model("asset",function(){this.persistence(Model.REST,"/admin/assets");this.include({load:function(b){var a=this,e="/admin/assets/"+a.id()+".json";jQuery.ajax({type:"GET",url:e,dataType:"json",success:function(g){a.merge(g);b.call(this)}})},toMustache:function(b){this.merge({query_path:b?"?"+decodeURIComponent(jQuery.param({query:b})):"",query:b});return this.attr()},toMustacheWithNeighbors:function(b){var a=Asset.all(),e=a.indexOf(this),g=this.toMustache(b),i=a[e+1]?Asset.all()[e+1].toMustache(b):
null;b=a[e-1]?Asset.all()[e-1].toMustache(b):null;jQuery("<img />")[0].src="/images/large/"+g.id+"/"+g.file_name;if(i)jQuery("<img />")[0].src="/images/large/"+i.id+"/"+i.file_name;if(b)jQuery("<img />")[0].src="/images/large/"+b.id+"/"+b.file_name;return{asset:g,next:i,previous:b}}});this.extend({find_all_by_folder_id:function(b){return this.select(function(){return this.attr("folder_id")==b})},toMustache:function(b){var a=b?"?"+decodeURIComponent(jQuery.param({query:b})):"";return{assets:this.map(function(e){e.merge({query_path:a,
query:b});return e.attr()}),query:b}},asJSON:function(){return Asset.map(function(b){return b.attr()})},tags:function(){tags=[];Asset.map(function(){tags=tags.concat(this.attr("tags"))});return tags},searchRemote:function(b,a){var e=b!=null?decodeURIComponent(jQuery.param({query:b})):"";Asset.each(function(){Asset.remove(this)});jQuery.ajax({type:"get",url:"/search.json",contentType:"application/json",dataType:"json",data:e,success:function(g){jQuery.each(g,function(i,l){var o=new Asset({id:l.id});
o.merge(l);Asset.add(o)});a.call(this)}})},searchAdmin:function(b,a){Asset.each(function(){Asset.remove(this)});jQuery.ajax({type:"get",url:"/admin/assets.json",contentType:"application/json",dataType:"json",data:b,success:function(e){$.each(e,function(g,i){var l=new Asset({id:i.id});l.merge(i);Asset.add(l)});a.call(this)}})},keys:{},create:function(b,a){Asset.callback=a;var e=new XMLHttpRequest,g=Asset.generate_uuid();e.upload.uuid=g;e.upload.filename=b.name;e.upload.addEventListener("loadstart",
Asset.onloadstartHandler,false);e.upload.addEventListener("progress",Asset.onprogressHandler);e.upload.addEventListener("load",Asset.onloadHandler,false);e.addEventListener("readystatechange",Asset.onreadystatechangeHandler,false);e.open("POST","/admin/assets.json",true);e.setRequestHeader("Content-Type","application/octet-stream");e.setRequestHeader("X-File-Name",b.name);e.setRequestHeader("X-File-Upload","true");e.send(b);a.before&&a.before.call(this,g)},onloadstartHandler:function(){},onloadHandler:function(){},
onprogressHandler:function(b){var a=Math.round(b.loaded/b.total*100);Asset.callback.progress&&Asset.callback.progress.call(this,b.target.uuid,a)},onreadystatechangeHandler:function(b){var a=null;try{a=b.target.status}catch(e){return}if(a=="200"&&b.target.readyState==4&&b.target.responseText){b=JSON.parse(b.target.responseText);a=new Asset({id:b.id});a.merge(b);Asset.add(a);Asset.callback.success&&Asset.callback.success.call(this,a)}},generate_uuid:function(){for(var b=[],a=0;a<32;a++)b[a]="0123456789ABCDEF".substr(Math.floor(Math.random()*
16),1);b[12]="4";b[16]="0123456789ABCDEF".substr(b[16]&3|8,1);return b.join("")}})}),Folder=Model("folder",function(){this.persistence(Model.SinatraREST,"/admin/folders");this.include({loadAssets:function(b){Asset.each(function(){Asset.remove(this)});var a="/admin/folders/"+this.attr("id")+"/assets.json";jQuery.ajax({type:"get",url:a,contentType:"application/json",dataType:"json",success:function(e){jQuery.each(e,function(g,i){var l=new Asset({id:i.id});l.merge(i);Asset.add(l)});b&&b.call(this)}})}});
this.extend({asJSON:function(){return Folder.map(function(b){return b.attr()})}})}),Page=Model("page",function(){this.persistence(Model.SinatraREST,"/admin/pages");this.include({initialize:function(){},children:function(){return Page.find_all_by_parent_id(this.id())},childrenAsJSON:function(){return this.children().map(function(b){return b.attr()})},setPartContent:function(b,a){var e=this.attr("contents"),g;jQuery.each(e,function(i,l){if(b==l.name){l.content=a;g=l}});return g},getChildren:function(b){var a=
"/admin/pages/"+this.id()+"/children.json";jQuery.ajax({type:"GET",url:a,dataType:"json",success:function(e){$.each(e,function(g,i){var l=new Page({id:i.id});l.merge(i);Page.add(l)});b&&b.call(this,e)}})},has_children:function(){if(this.children().all().length>0)return true},parent:function(){return Page.find(this.attr("parent_id"))},assets:function(){for(var b=this.attr("assets"),a=0,e=b.length;a<e;++a){var g=b[a],i=new Asset({id:g.id});i.merge(g);Asset.add(i)}return Asset},parts:function(){var b=
this.attr("contents"),a=b.length;Part.each(function(){Part.remove(this)});for(var e=0;e<a;++e){var g=b[e],i=new Part({id:g.id});i.merge(g);i.attr("page_id",this.id());Part.add(i)}return Part},load:function(b){var a=this,e="/admin/pages/"+a.id()+".json";jQuery.ajax({type:"GET",url:e,dataType:"json",success:function(g){a.merge(g);b.call(this)}})}});this.extend({toMustache:function(){return{pages:this.map(function(b){return b.attr()})}},root:function(){return this.detect(function(){return this.attr("parent_id")==
null})},find_by_parent_id:function(b){return this.detect(function(){return this.attr("parent_id")==b})},find_all_by_parent_id:function(b){return this.select(function(){return this.attr("parent_id")==b})},find_by_path:function(b){return this.detect(function(){return this.attr("path")==b})},load_by_id:function(b,a){jQuery.ajax({type:"GET",url:"/admin/pages/"+b+".json",dataType:"json",success:function(e){var g=Page.find(e.id);g||(g=new Page({id:e.id}));g.merge(e);Page.add(g);a&&a.call(this,e)}})},create:function(b,
a){jQuery.ajax({type:"post",url:"/admin/pages.json",dataType:"json",data:{page:b},success:function(e){var g=new Page({id:e.id});g.merge(e);Page.add(g);a.call(this,e)}})}})}),Layout=Model("layout",function(){this.persistence(Model.SinatraREST,"/admin/templates");this.include({load:function(b){var a=this,e="/admin/templates/"+a.id()+".json";jQuery.ajax({type:"GET",url:e,dataType:"json",success:function(g){a.merge(g);b.call(this,g)}})}});this.extend({toMustache:function(){return{layouts:this.map(function(b){return b.attr()})}},
asLayoutJSON:function(b){return Layout.find_all_by_class("Layout").map(function(a){b==a.id()?a.attr("selected",'selected="selected"'):a.attr("selected","");return a.attr()})},find_by_class:function(b){return this.detect(function(){return this.attr("klass")==b})},find_all_by_class:function(b){return this.select(function(){return this.attr("klass")==b})},asJSON_by_class:function(b){return this.find_all_by_class(function(){return b.map(function(a){return a.attributes})})}})}),Part=Model("part",function(){this.include({deleteRemote:function(b,
a){var e="/admin/pages/"+b.id()+"/parts/"+this.id()+".json";jQuery.ajax({type:"DELETE",url:e,dataType:"json",success:function(g){b.merge(g);a.call(this)}})}});this.extend({toMustache:function(){return{parts:this.map(function(b){return b.attr()})}},create:function(b,a){var e="/admin/templates/"+b.template_id+"/parts.json",g=Layout.find(b.template_id);jQuery.ajax({type:"post",url:e,dataType:"json",data:{part:b},success:function(i){g.merge(i);a.call(this)}})}})}),Site=Model("site",function(){this.persistence(Model.SinatraREST,
"/admin/sites");this.include({});this.extend({toMustache:function(){return{sites:this.map(function(b){return b.attr()})}}})}),User=Model("user",function(){this.persistence(Model.SinatraREST,"/admin/users");this.include({});this.extend({toMustache:function(){return{users:this.map(function(b){return b.attr()})}}})}),Galerie={open:function(b,a){$("body").append('<div id="overlay"></div>').append('<div id="modal_wrapper"><div id="modal"></div></div>');var e=$("#modal");e.html(b);var g=$("#modal_wrapper"),
i=$(window).height();e=e.height()+42;e=(i-e)/2;$("#overlay").css({height:i}).hide().fadeIn("fast");g.hide().fadeIn("fast").css({top:e});a&&a.call(this)},close:function(){$("#modal_wrapper").fadeOut("fast",function(){$(this).remove();$("#overlay").fadeOut("fast",function(){$(this).remove()})})}},logger={info:function(b){window.console&&console.log(b)},debug:function(b){window.console&&console.log(b)}},Utilities={setNonHistoryLinks:function(){Modernizr.history||jQuery("a").click(function(b){b.preventDefault();
if((b=jQuery(this).attr("href"))&&!b.match("http://")&&!b.match(/^#/)){console.log("#"+b);document.location.hash=$(this).attr("#href")}})},loadModal:function(b,a){var e=this,g=jQuery(b);if(g.length){Loader.start();var i=g.find("img");g.height()==0?i.load(function(){e.resizeModal(g,a)}):e.resizeModal(g,a)}},resizeModal:function(b,a){var e=b.width(),g=b.height();e=e/g;jQuery(window).width();var i=jQuery(window).height();g>i-40?b.height(i-40).width((i-40)*e):b.css({"margin-top":(i-g)/2});Loader.stop();
a&&a.call(this)},notice:function(b,a){a=a||{};var e=jQuery(".notice"),g=a["class"]||"message";e.html(b).addClass(g).fadeIn("fast",function(){setTimeout(function(){a.persist||e.fadeOut("slow")},1800)})},hideNotice:function(){jQuery(".notice").fadeOut("slow")},setTimestamp:function(){window.timestamp=(new Date).getTime()},keyboard_nav:function(){jQuery("body").keydown(function(b){switch(b.keyCode){case 37:$("a.previous").click();break;case 39:$("a.next").click();break}})},check_browser_version:function(){},
formObserver:function(){}},Loader={start:function(b){b=jQuery("#loader");if(b.length){b.show();Loader.timer=setInterval(function(){var a=b.css("background-position-y").replace("px","");b.css({"background-position-y":a-40+"px"})},67)}},stop:function(b){b=jQuery("#loader");if(b.length){b.hide();clearInterval(Loader.timer)}}},Updater={setup:function(b,a){jQuery.each(b,function(e,g){var i=new a({id:g.id});i.merge(g);a.add(i)})},update:function(){window.ninja=true;jQuery.ajax({url:"/admin/activity.json",
type:"POST",data:{updated:window.timestamp},success:function(b){jQuery.each(b.models,function(a,e){Page.find(e.id).merge(e);Utilities.setTimestamp()});window.ninja=false}})}},aceModes={javascript:require("ace/mode/javascript").Mode,html:require("ace/mode/html").Mode,css:require("ace/mode/css").Mode,scss:require("ace/mode/scss").Mode,sass:require("ace/mode/scss").Mode,none:require("ace/mode/text").Mode},iFramer={initialize:function(b,a){var e=jQuery(b);jQuery("#loader");if(e.length){Loader.start();
e.load(function(){var g=$(this),i=g.contents();i.find("div.editable").attr("contenteditable","true").css({background:"hsla(30, 17.7%, 61%, 0.3)"});Loader.stop();g.fadeIn("fast");i.find("a").click(function(l){var o=jQuery(this).attr("href").split("?")[0].replace("/preview","");if(o=Page.find_by_path(o)){l.preventDefault();history.pushState({path:o.attr("title")},o.attr("title"),o.attr("admin_path"))}});a&&a.call(this)})}},setEditFlags:function(b){b.css({position:"relative",display:"block",height:"0",
width:"0","text-decoration":"none"}).find("span").css({display:"block",position:"absolute",top:"-24px",left:"12px",padding:"4px 8px",width:"100px",background:"rgba(255, 255, 0, 0.7)"})}},delay=function(){var b=0;return function(a,e){clearTimeout(b);b=setTimeout(a,e)}}(),Editor={initialize:function(){var b=jQuery("#testForm input[type=button]"),a=jQuery("#testForm input#save");b.click(function(){var e=jQuery(this).data("cmd"),g=jQuery(this).data("value"),i=jQuery("iframe")[0];e&&i.contentDocument.execCommand(e,
false,g)});a.click(function(){var e=document.location.pathname.split("/"),g=Page.find(e[e.length-1]),i={};jQuery("iframe").contents().find("div.editable").each(function(){var l=jQuery(this),o=l.attr("id").split("_")[0];i[o]=l.html()});jQuery.each(i,function(l,o){g.setPartContent(l,o)});g.save()})},textilize:function(b,a){b=b.replace(/\s*<p>((.|[\r\n])*?)<\/p>\s*/gi,"\n\n$1\n\n");b=b.replace(/<br ?\/?>/gi,"\n");b=b.replace(/<(?:b|strong)>((.|[\r\n])*?)<\/(?:b|strong)>/gi,"*$1*");b=b.replace(/<(?:i|em)>((.|[\r\n])*?)<\/(?:i|em)>/gi,
"_$1_");b=b.replace(/<(?:strike|del)>((.|[\r\n])*?)<\/(?:strike|del)>/gi,"-$1-");b=b.replace(/<(?:u|ins)>((.|[\r\n])*?)<\/(?:u|ins)>/gi,"+$1+");b=b.replace(/<a href="(.*?)">((.|[\r\n])*?)<\/a>/gi,'"$2":$1');b=b.replace(/<code.*?>((.|[\r\n])*?)<\/code>/gi,"@$1@");if(a)b=b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");b=b.replace(/(\r\n|\n){3,}/g,"\n\n");return b=b.replace(/^[\r\n]+|[\r\n]+$/g,"")}},Base=Sammy(function(b){b.debug=false;b.use(Sammy.JSON);b.use(Sammy.Mustache);b.use(Sammy.NestedParams);
b.template_engine="mustache";b.helpers({setup:function(a,e){jQuery.each(a,function(g,i){var l=new e({id:i.id});l.merge(i);e.add(l)})},update:function(){var a=this;window.ninja=true;jQuery.ajax({url:"/admin/activity.json",type:"POST",data:{updated:window.timestamp},success:function(e){jQuery.each(e.models,function(g,i){i.class_name=="Page"&&a.trigger("update-page",i);i.class_name=="Layout"&&a.trigger("update-layout",i);Utilities.setTimestamp()});window.ninja=false}})}});b.bind("run",function(){var a=
this;jQuery("#sidebar .opener").live("click",function(){a.trigger("toggle-children",this);return false});a.trigger("toggle-sidebar")});b.bind("set-active-tab",function(a,e){var g=jQuery("div#tabs a.tab"),i=e.split("?")[0].split("/")[2];i=jQuery("#"+i+"-tab");g.removeClass("active");i.addClass("active")});b.bind("update-page",function(a,e){var g=Page.find(e.id);g.merge(e);g.save();jQuery("li#page-"+e.id).find("span.title a").text(g.attr("title"));jQuery("h1#page-title-"+g.id()).text(g.attr("title"));
jQuery("#page-iframe-"+g.id()).length&&Utilities.notice('<a class="page-reload" href="'+g.attr("admin_path")+'">This page has been changed. Click here to reload.</span>',{persist:true,"class":"warning"})});b.bind("update-layout",function(a,e){var g=Layout.find(e.id);g.merge(e);g.save();jQuery("li#layout-"+e.id).find("span.title a").text(g.attr("name"))});b.bind("sanskrit",function(a,e){if(e.length){var g=e.find("textarea.sanskrit");g.each(function(i,l){new Sanskrit(l,{toolbar:{actions:{strong:"B",
em:"I",ins:"ins",del:"del",link:"link",unlink:"unlink",textile:"Textile"}}})});setTimeout(function(){g.fadeIn("fast")},420)}});b.bind("toggle-sidebar",function(){var a=jQuery("div#sidebar"),e=jQuery("div#editor"),g=jQuery("p#toggle");g.find("a").click(function(i){i.preventDefault();if(a.hasClass("closed")){i="300";jQuery.cookie("sidebar_toggled","")}else{i="24";jQuery.cookie("sidebar_toggled","closed")}Modernizr.cssanimations&&console.log("Move.js goes here");a.animate({width:i},200).toggleClass("closed");
e.animate({left:i},200).toggleClass("open");g.animate({left:i},200).toggleClass("open")})});b.before(function(){Galerie.close()});b.before(function(a){var e=a.path;a&&a.verb=="get"&&a.trigger("set-active-tab",e)})}),Sites=Sammy(function(){var b=this;this.helpers({loadSites:function(a){if(Site.all().length==0)Site.load(function(){a&&a.call(this)});else a&&a.call(this)},renderSiteIndex:function(){this.load(jQuery("script#admin-sites-index")).interpolate(Site.toMustache(),"mustache").replace("#sidebar")}});
this.bind("run",function(){b.modal=false;b.refresh_pages=true});this.get("#/preview",function(){alert(document.location.hostname);window.open("/","preview")});this.get("/admin/sites",function(a){b.refresh_pages=true;jQuery("#editor").html('<h1 class="section">Sites</div>');a.loadSites(function(){a.renderSiteIndex()})});this.get("/admin/sites/new",function(a){a.loadSites(function(){$("#modal").length==0&&Galerie.open();a.load(jQuery("script#admin-sites-new")).interpolate({},"mustache").replace("#modal");
a.renderSiteIndex(Site.all())})});this.post("/admin/sites",function(a){(new Site(a.params.site)).save(function(e,g){var i=JSON.parse(g.responseText);i.errors?alert(JSON.stringify(i)):a.redirect("#/sites")})});this.get("/admin/sites/:id/edit",function(a){a.loadSites(function(){site=Site.find(a.params.id);a.load(jQuery("script#admin-sites-edit")).interpolate({site:site.asJSON()},"mustache").replace("#editor");a.renderSiteIndex(Site.all())})});this.put("/admin/sites/:id",function(a){var e=Site.find(a.params.id);
e.attr(a.params.site);e.save(function(g,i){var l=JSON.parse(i.responseText);l.errors?alert(JSON.stringify(l)):a.redirect("#/sites")})});this.get("/admin/sites/:id/remove",function(a){Galerie.open();a.loadSites(function(){site=Site.find(a.params.id);a.load(jQuery("script#admin-sites-remove")).interpolate({site:site.asJSON()},"mustache").replace("#modal");a.renderSiteIndex(Site.all())})});this.del("/admin/sites/:id",function(a){site.destroy(function(e){e?a.redirect("#/sites"):alert("there were issues")})})}),
Layouts=Sammy(function(){var b=this;this.helpers({loadLayouts:function(a){a&&a.call(this)},renderLayoutIndex:function(){this.load(jQuery("script#admin-templates-index")).interpolate({layouts:Layout.find_all_by_class("Layout").map(function(a){return a.attributes}),partials:Layout.find_all_by_class("Partial").map(function(a){return a.attributes}),javascripts:Layout.find_all_by_class("Javascript").map(function(a){return a.attributes}),stylesheets:Layout.find_all_by_class("Stylesheet").map(function(a){return a.attributes})},
"mustache").replace("#sidebar")},renderLayout:function(a){this.load(jQuery("script#admin-templates-edit")).interpolate({layout:a.asJSON(),filters:[{name:"none",value:"none",selected:a.attr("filter")=="css"?'selected="selected"':""},{name:"Sass",value:"sass",selected:a.attr("filter")=="sass"?'selected="selected"':""},{name:"Scss",value:"scss",selected:a.attr("filter")=="scss"?'selected="selected"':""}]},"mustache").replace("#editor").then(function(){var e=a.attr("mode");e=aceModes[e];window.editor=
ace.edit("layout_content");window.editor.setTheme("ace/theme/textmate");window.editor.getSession().setMode(new e);window.editor.session.setUseWrapMode(true);window.editor.getSession().setValue(a.attr("content"))})}});this.bind("run",function(){b.refresh_templates=true;b.refresh_pages=true;b.modal=false});this.get("/admin/templates",function(a){b.refresh_templates=false;jQuery("#editor").html('<h1 class="section">Templates</div>');a.renderLayoutIndex(Layout.all())});this.get("/admin/templates/new/:klass",
function(a){var e=$("<div />").attr({id:"new-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(e);a.load(jQuery("#admin-templates-new")).interpolate({klass:a.params.klass},"mustache").replace("#new-page-container");a.renderLayoutIndex(Layout.all())});this.post("/admin/templates",function(a){(new Layout(a.params.template)).save(function(e,g){var i=JSON.parse(g.responseText);if(i.errors)Utilities.notice(JSON.stringify(i));else{a.redirect("/admin/templates");Utilities.notice("Successfully saved template")}})});
this.get("/admin/templates/:id/edit",function(a){b.refresh_pages=true;var e=Layout.find(a.params.id);a.renderLayout(e);a.renderLayoutIndex(Layout.all())});this.put("/admin/templates/:id",function(a){var e=Layout.find(a.params.id);a.params.layout.content=window.editor.getSession().getValue();e.attr(a.params.layout);e.save(function(g){if(g){a.renderLayoutIndex();Utilities.notice("Successfully saved template");g=aceModes[e.attr("mode")];window.editor.getSession().setUseSoftTabs(true);window.editor.getSession().setTabSize(2);
window.editor.getSession().setMode(new g)}})});this.get("/admin/templates/:id/remove",function(a){var e=Layout.find(a.params.id);Galerie.open();a.load(jQuery("#admin-templates-remove")).interpolate({layout:e.asJSON()},"mustache").replace("#modal");a.renderLayoutIndex(Layout.all())});this.del("/templates/:id",function(a){Layout.find(a.params.id).destroy(function(e){if(e){a.renderLayoutIndex();Utilities.notice("Successfully deleted template");a.redirect("/admin/templates")}})});this.post("/layouts/:id/parts",
function(a){this.loadLayouts(function(){var e=a.params.id;Part.create(a.params.part,function(){a.redirect("/admin/templates/"+e+"/edit")})})})}),Assets=Sammy(function(b){var a=this;b.helpers({renderFolderTree:function(e){if(jQuery("ul#folders").length)e&&e.call(this);else this.load(jQuery("script#admin-folders-index")).interpolate({folders:Folder.asJSON()},"mustache").replace("#sidebar").then(function(){e&&e.call(this)})},send_files:function(e,g,i){for(var l=0,o=0;o<e.length;o++){var w=e[o];Asset.create(w,
{before:function(C){jQuery(".progress").append('<p id="progress-'+C+'">'+w.name+'<span class="percentage"></span></p>')},progress:function(C,B){jQuery("#progress-"+C+" .percentage").text(" "+B+"%")},success:function(){l+=1;l==e.length&&Asset.searchAdmin(g,function(){i&&i.call(this)})}})}}});b.bind("render-asset",function(e,g,i){this.load(jQuery("script#admin-assets-edit")).interpolate(g.toMustacheWithNeighbors(i),"mustache").appendTo("body").then(function(){Utilities.loadModal("div#asset-editor",
function(){jQuery("div#asset-editor").fadeIn("fast")})})});b.bind("render-index",function(e,g){var i=this;i.load(jQuery("script#admin-assets-index")).interpolate(Asset.toMustache(g),"mustache").replace("#editor").then(function(){jQuery("a.info-icon").click(function(l){l.preventDefault();current_asset_id=this.id.split("-")[2];i.trigger("show_info",{current_asset_id:current_asset_id})});jQuery("#ajax_uploader").attr("multiple","multiple").change(function(){jQuery(this).parents("form:first").submit()});
jQuery("a.remove-icon").click(function(l){l.preventDefault();current_asset_id=this.id.split("-")[2];i.trigger("show_remove_dialog",{current_asset_id:current_asset_id})})})});b.bind("show_info",function(e,g){var i=Asset.find(g.current_asset_id),l=jQuery("#asset-"+i.id()),o=l.find(".info");jQuery(".modal-strip").remove();o.length||this.load(jQuery("#admin-assets-info")).interpolate({asset:i.toMustache()},"mustache").appendTo(l).then(function(){jQuery(".modal-strip").fadeIn("fast")})});b.bind("show_remove_dialog",
function(e,g){var i=Asset.find(g.current_asset_id),l=jQuery("#asset-"+i.id()),o=l.find(".remove");jQuery(".modal-strip").remove();o.length||this.load(jQuery("script#admin-assets-remove")).interpolate({asset:i.toMustache()},"mustache").appendTo(l).then(function(){jQuery(".modal-strip").fadeIn("fast")})});b.get("/admin/assets",function(e){jQuery("#overlay").remove();var g=e.params.query?e.params.query:"",i={query:g};i.limit=e.params.limit||48;i.page=e.params.page||1;e.renderFolderTree();Asset.searchAdmin(i,
function(){e.trigger("render-index",g)})});b.get("/admin/folders/:id",function(e){jQuery("#overlay").remove();var g=e.params.id,i=Folder.find(g);e.renderFolderTree(function(){jQuery("ul#folders li").removeClass("active");jQuery("#folder-"+g).addClass("active")});i.loadAssets(function(){e.trigger("render-index","")})});b.get("/admin/assets/new",function(e){e.load(jQuery("script#admin-assets-new")).interpolate({},"mustache").replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple",
"multiple")});a.first_run=false});b.post("/admin/assets",function(e){var g=document.getElementById("ajax_uploader").files,i=e.params.query?e.params.query:null;jQuery("form#new_asset");var l=i?{query:i}:{};l.limit=e.params.limit||48;l.page=e.params.page||1;this.send_files(g,l,function(){e.trigger("render-index",i)});return false});b.get("/admin/assets/:id/edit",function(e){jQuery("#overlay").remove();var g=e.params.query?e.params.query:"",i=g?{query:e.params.query}:{},l=Asset.find(e.params.id);l?e.trigger("render-asset",
l,g):Asset.searchAdmin(i,function(){var o=Asset.find(e.params.id);e.trigger("render-index",g);e.renderFolderTree();e.trigger("render-asset",o,g)})});b.put("/admin/assets/:id",function(e){var g=Asset.find(e.params.id);if(g){g.attr(e.params.asset);g.save(function(i){i&&Utilities.notice("Successfully saved asset")})}else{g=new Asset({id:e.params.id});g.load(function(){g.attr(e.params.asset);g.save(function(i){i&&Utilities.notice("Successfully saved asset")})})}});b.del("/admin/assets/:id",function(e){var g=
e.params.query?e.params.query:null,i=g?"?"+decodeURIComponent(jQuery.param({query:g})):"";Asset.find(e.params.id).destroy(function(l){if(l){Utilities.notice("Successfully saved asset");e.redirect("/admin/assets"+i)}})})}),Pages=Sammy(function(b){b.helpers({renderPagePreview:function(a,e){var g=this;jQuery("div#preview-"+a.id()).length?g.trigger("set-active-page",a):g.load(jQuery("script#admin-pages-show")).interpolate({page:a.asJSON(),layouts:Layout.asLayoutJSON(a.attr("layout_id")),base_page_id:a.id()},
"mustache").replace("#editor").then(function(){iFramer.initialize(".preview iframe",function(){e&&e.call(this)});g.trigger("set-active-page",a);Editor.initialize()})},renderPageEditor:function(a,e){var g=this;if(jQuery("#page-editor").length){e&&e.call(this);g.trigger("set-active-page",a)}else g.load(jQuery("script#admin-pages-edit")).interpolate({page:a.asJSON()},"mustache").appendTo("body").then(function(){jQuery("li.node").removeClass("active");jQuery("#page-"+a.id()).addClass("active");e&&e.call(this);
g.trigger("set-active-page",a)})},renderPageProperties:function(a,e){this.load(jQuery("script#admin-pages-form")).interpolate({page:a.asJSON(),layouts:Layout.asLayoutJSON(a.attr("layout_id")),base_page_id:a.id(),timestamp:window.timestamp},"mustache").replace("#page-tabs-"+a.id()).then(function(){e&&e.call(this)})},renderPageMenu:function(a){this.load(jQuery("script#admin-pages-index")).interpolate({pages:[a.asJSON()],children:a.childrenAsJSON()},"mustache").replace("#sidebar")}});b.bind("show-page-menu",
function(a,e){var g=this;if(e.children().count()==0&&e.attr("child_count")!=0){console.log("ajax");e.getChildren(function(){g.renderPageMenu(e)})}else{if(e.attr("child_count")==0)e=e.parent();g.renderPageMenu(e)}});b.bind("set-active-page",function(a,e){jQuery("li.node").removeClass("active");jQuery("li#page-"+e.id()).addClass("active")});b.bind("reload-page",function(a,e){var g=e.id(),i=jQuery("iframe#page-iframe-"+g);jQuery("li#page-"+g).find("span.title a").text(e.attr("title"));jQuery("h1#page-title-"+
g).text(e.attr("title"));i.attr("src",i.attr("src"))});this.get("/admin/pages/?",function(a){var e=Page.first();a.redirect(e.attr("admin_path"))});this.get("/admin/pages/:id/new/?",function(a){var e=Page.find(a.params.id),g=$("<div />").attr({id:"new-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(g);a.trigger("page-index");a.load(jQuery("#admin-pages-new")).interpolate({parent:e.asJSON(),layouts:Layout.asLayoutJSON(e.attr("layout_id"))},"mustache").replace("#new-page-container")});
this.post("/admin/pages/:page_id/?",function(a){Page.find(a.params.page_id);(new Page(a.params.page)).save(function(e,g){var i=JSON.parse(g.responseText);if(i.errors)alert(JSON.stringify(i));else{Utilities.notice("Successfully created page");a.redirect(i.admin_path)}})});this.get("/admin/pages/:id/?",function(a){jQuery("#overlay").remove();jQuery(".modal-editor").remove();var e=Page.find(a.params.id);if(e)a.renderPagePreview(e);else{e=new Page({id:a.params.id});e.load(function(){a.renderPagePreview(e)})}a.trigger("show-page-menu",
e)});this.get("/admin/pages/:id/edit/?",function(a){var e=Page.find(a.params.id);if(jQuery("#preview-"+e.id()).length)a.renderPageEditor(e,function(){a.renderPageProperties(e)});else{a.renderPagePreview(e,function(){a.renderPageEditor(e,function(){a.renderPageProperties(e)})});a.trigger("page-index")}});this.put("/admin/pages/:page_id",function(a){var e=Page.find(a.params.page_id);e.attr(a.params.page);jQuery("span.timestamp").text()<window.timestamp?alert("Someone else has edited this page, please reload and try again"):
e.save(function(g){if(g){Utilities.setTimestamp();Utilities.notice("Successfully saved page");a.trigger("reload-page",e);a.redirect(e.attr("admin_path"))}})});this.get("/admin/pages/:id/remove",function(a){var e=Page.find(a.params.id),g=$("<div />").attr({id:"remove-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(g);a.trigger("page-index");a.load(jQuery("#admin-pages-remove")).interpolate({page:e.asJSON()},"mustache").replace("#remove-page-container")});this.del("/admin/pages/:id",
function(a){var e=Page.find(a.params.id);e.destroy(function(g){if(g){jQuery("#page-"+e.id()).remove();a.redirect("#/pages")}})})}),Parts=Sammy(function(b){b.helpers({renderPart:function(a,e,g){var i=this;i.load(jQuery("script#admin-"+g+"-edit")).interpolate({part:a.asJSON(),page:e.asJSON(),assets:Asset.asJSON(),timestamp:window.timestamp},"mustache").replace("#page-tabs-"+e.id()).then(function(){jQuery(".modal-editor").fadeIn("fast");i.trigger("sanskrit",jQuery("#page-tabs-"+e.id()));i.trigger("set_asset_links");
jQuery("#ajax_uploader").attr("multiple","multiple").change(function(){alert("HHH")});i.trigger("page-index")})}});this.bind("set_asset_links",function(){jQuery("#search-results-container li.asset").each(function(a,e){var g=jQuery(e).find("a"),i=jQuery(e).attr("id").split("-")[1],l=g.find("img").attr("src");g.click(function(o){o.preventDefault();jQuery("input#part-asset-id").attr("value",i);jQuery("form#edit-part img.preview").attr("src",l.replace("icon","thumbnail"))})})});this.get("/admin/pages/:page_id/parts/:id/edit",
function(a){jQuery(".modal-editor").remove();var e=$("iframe"),g=Page.find(a.params.page_id);console.log(g);var i=g.parts().find(a.params.id);console.log(i);e.length?a.renderPageEditor(g,function(){a.renderPart(i,g,"parts")}):a.renderPagePreview(g,function(){a.renderPageEditor(g,function(){a.renderPart(i,g,"parts")})})});this.get("/admin/pages/:page_id/image_parts/:id/edit",function(a){var e=Page.find(a.params.page_id),g=e.parts().find(a.params.id),i=$("iframe");Asset.searchAdmin({limit:"24"},function(){i.length?
a.renderPageEditor(e,function(){a.renderPart(g,e,"image_parts")}):a.renderPagePreview(e,function(){a.renderPageEditor(e,function(){a.renderPart(g,e,"image_parts")})})})});this.get("/admin/pages/:page_id/parts/:id/results",function(a){Page.find(a.params.page_id);Part.find(a.params.id);var e=a.params.query?a.params.query:null;Asset.searchAdmin(e?{query:e}:{},function(){a.load(jQuery("#admin-pages-search_results")).interpolate(Asset.toMustache(),"mustache").replace("#search-results-container").then(function(){a.trigger("set_asset_links")})})});
this.put("#/pages/:page_id/parts/:id",function(a){for(var e=Page.find(a.params.page_id),g=e.parts().find(a.params.id),i=e.attr("contents"),l=0,o=i.length;l<o;++l){g=i[l];if(a.params.id==g.id){g.content=a.params.part.content;g.asset_id=a.params.part.asset_id;var w=Part.find(g.id);w.attr({asset_id:a.params.part.asset_id,content:a.params.part.content});w.save()}}e.save(function(C){if(C){Utilities.setTimestamp();Utilities.notice(w.attr("name")+" saved");a.trigger("reload-page",e);a.redirect(e.attr("admin_path"))}})});
this.post("#/pages/:page_id/image_parts/:id/assets",function(a){Page.find(a.params.page_id).parts().find(a.params.id);var e=document.getElementById("ajax_uploader").files,g=a.params.query?a.params.query:null;jQuery("form#new_asset");g=g?{query:g}:{};g.limit=a.params.limit||48;g.page=a.params.page||1;this.send_files(e,g,function(){a.load(jQuery("#admin-pages-search_results")).interpolate(Asset.toMustache(),"mustache").replace("#search-results-container").then(function(){jQuery("#ajax_uploader").attr("files",
null);jQuery(".progress").slideUp("slow",function(){jQuery(this).html("")});a.trigger("set_asset_links")})})})}),Users=Sammy(function(){var b=this;this.helpers({loadUsers:function(a){if(User.all().length==0)User.load(function(){a&&a.call(this)});else a&&a.call(this)},renderUserIndex:function(a){this.load(jQuery("script#admin-users-index")).interpolate(User.toMustache(),"mustache").replace("#editor").then(function(){a&&a.call(this)})}});this.bind("run",function(){b.modal=false;b.refresh_pages=true});
this.get("/admin/users",function(a){jQuery("#editor").html('<h1 class="section">Users</div>');a.loadUsers(function(){a.renderUserIndex()})});this.get("/admin/users/new",function(a){a.loadUsers(function(){jQuery("#modal").length||Galerie.open();a.load(jQuery("script#admin-users-new")).interpolate({},"mustache").replace("#modal");a.renderUserIndex()})});this.post("/admin/users",function(a){(new User(a.params.user)).save(function(e,g){var i=JSON.parse(g.responseText);i.errors?alert(JSON.stringify(i)):
a.redirect("/admin/users")})});this.get("/admin/users/:id/edit",function(a){a.loadUsers(function(){user=User.find(a.params.id);if(jQuery("#users").length){jQuery(".user-form").html("");a.load(jQuery("script#admin-users-edit")).interpolate({user:user.asJSON()},"mustache").replace("#user-form-"+user.id())}else a.renderUserIndex(function(){jQuery(".user-form").html("");a.load(jQuery("script#admin-users-edit")).interpolate({user:user.asJSON()},"mustache").replace("#user-form-"+user.id())})})});this.put("/admin/users/:id",
function(a){var e=User.find(a.params.id);e.attr(a.params.user);e.save(function(g,i){var l=JSON.parse(i.responseText);l.errors?alert(JSON.stringify(l)):a.redirect("/admin/users")})})});
jQuery(document).ready(function(){var b=jQuery("#loader");jQuery("<img />",{src:"/images/loader.png"});jQuery("body").ajaxStart(function(){window.ninja||Loader.start(b)}).ajaxSuccess(function(){Loader.stop(b)});if(!jQuery("#login").length){jQuery.ajax({url:"/templates",success:function(a){jQuery("head").append(a)}});jQuery.ajax({url:"/admin/sites/current.json",success:function(a){Updater.setup(a.pages,Page);Updater.setup(a.templates,Layout);Updater.setup(a.folders,Folder);Base.run();window.timestamp=
a.now}})}Utilities.setNonHistoryLinks();require("pilot/canon").addCommand({name:"save",bindKey:{win:"Ctrl-S",mac:"Command-S",sender:"editor"},exec:function(){jQuery("form.command-save").submit()}});jQuery("a.page-reload").live("click",function(){var a=jQuery(this).attr("href").split("/")[3];a=jQuery("iframe#page-iframe-"+a);a.attr("src",a.attr("src"));Utilities.hideNotice()});jQuery("div#sidebar a").live("click",function(){Utilities.hideNotice()});jQuery(window).resize(function(){var a=jQuery("div#asset-editor");
Utilities.loadModal(a)})});Sanskrit.defaultStyle='html { padding:0; cursor:text; } body { font-family: "Helvetica Neue", Arial, helvetica; color: #333; background: #fff; font-size: 100%; margin:0; padding:0.5em; cursor:text; } p { margin: 0.5em 0; }';
